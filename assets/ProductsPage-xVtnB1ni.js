import{_ as B,r as f,o as R,k as P,Z as Q,$ as i,a0 as n,a2 as a,a1 as t,a4 as m,a8 as g,a9 as p,ad as h,ae as z,a3 as x,a5 as v,a6 as k,a7 as V,af as A,ab as L,ac as T,ag as $,ah as O,ai as U,aj as d,ak as w}from"./index-DUcdBK8F.js";import{Q as C}from"./QBadge-BfPzBtIj.js";import{Q as W}from"./QSelect-Tf3a6Vgv.js";import{Q as M}from"./QForm-DYL-APiO.js";import{Q as D}from"./QExpansionItem-CQAAYAKD.js";import{a as j,b as F,Q as Z}from"./QItem-CBZBKt0L.js";import{Q as G}from"./QList-BeUwpj4O.js";import{Q as H}from"./QPage-D_dxwWK0.js";import{u as J}from"./product-store-DPTwWHAA.js";import"./format-CwRPwZVM.js";import"./index-xsH4HHeE.js";const K={class:"products-content"},X={class:"row items-center q-mb-md q-mt-lg"},Y={class:"col"},ee={class:"custom-font-bold gradient-title animate-title text-h4 flex items-center"},te={class:"col-auto flex items-center"},oe={class:"row q-col-gutter-md q-mb-md"},ae={class:"col-12 col-md-8"},se={class:"col-12 col-md-4"},ne={class:"row q-col-gutter-md"},le={class:"col-12 col-md-6"},re={class:"col-12 col-md-4"},ie={class:"col-12 col-md-2 flex flex-center"},de={class:"row q-col-gutter-md"},ce={class:"custom-font-bold text-h6"},ue={class:"custom-font-light text-grey-7"},me={key:0,class:"col-12 text-center q-mt-md"},pe={__name:"ProductsPage",setup(fe){const l=J(),_=f(""),c=f("Todos"),r=f({name:"",quantity:0}),y=f(null);R(async()=>{await l.loadProducts()});const b=P(()=>l.products.filter(s=>{const o=s.name.toLowerCase().includes(_.value.toLowerCase()),e=c.value==="Todos"||c.value==="DisponÃ­veis"&&s.quantity>0||c.value==="Esgotados"&&s.quantity===0;return o&&e})),q=P(()=>l.products.filter(s=>s.quantity===0));async function I(){y.value.validate()&&(await l.addProduct(r.value),r.value={name:"",quantity:0},y.value.resetValidation())}function S(s){if(!l.products.find(e=>e.id===s)){d.create({type:"negative",message:"Produto nÃ£o encontrado."});return}l.deleteProduct(s)}function N(s){const o=l.products.find(e=>e.id===s);if(!o){d.create({type:"negative",message:"Produto nÃ£o encontrado."});return}w.create({title:"Reabastecer Produto",message:`Informe a quantidade para reabastecer o produto "${o.name}":`,prompt:{model:"",type:"number",isValid:e=>e>0,label:"Quantidade",placeholder:"Digite a quantidade"},cancel:!0,persistent:!0}).onOk(e=>{const u=parseInt(e,10);if(isNaN(u)||u<=0){d.create({type:"negative",message:"Quantidade invÃ¡lida."});return}l.restockProduct(s,u)}).onCancel(()=>{d.create({type:"info",message:"Reabastecimento cancelado."})})}function E(s){const o=l.products.find(e=>e.id===s);if(!o){d.create({type:"negative",message:"Produto nÃ£o encontrado."});return}w.create({title:"Confirmar ExclusÃ£o",message:`Tem certeza de que deseja excluir o produto "${o.name}"?`,cancel:!0,persistent:!0,icon:"warning",color:"red"}).onOk(()=>{S(s)}).onCancel(()=>{d.create({type:"info",message:"A exclusÃ£o foi cancelada."})})}return(s,o)=>(i(),Q(H,null,{default:n(()=>[a("div",K,[a("div",X,[a("div",Y,[a("div",ee,[t(g,{name:"inventory_2",size:"28px",class:"q-mr-sm"}),o[4]||(o[4]=m(" Produtos "))])]),a("div",te,[t(C,{color:"green",class:"q-mr-sm badge-pill animate-badge"},{default:n(()=>[m(" DisponÃ­veis: "+p(b.value.length),1)]),_:1}),t(C,{color:"red",class:"badge-pill animate-badge"},{default:n(()=>[m(" Esgotados: "+p(q.value.length),1)]),_:1})])]),a("div",oe,[a("div",ae,[t(h,{modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=e=>_.value=e),label:"Buscar Produto",outlined:"",dense:"",class:"q-mb-none",placeholder:"Digite o nome do produto",clearable:"",prefix:"ðŸ”",color:"primary","input-style":{fontFamily:"Inter, Poppins, Roboto, sans-serif",fontWeight:500}},null,8,["modelValue"])]),a("div",se,[t(W,{modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=e=>c.value=e),options:["Todos","DisponÃ­veis","Esgotados"],label:"Filtrar",outlined:"",dense:"",class:"q-mb-none",color:"primary","input-style":{fontFamily:"Inter, Poppins, Roboto, sans-serif",fontWeight:500}},null,8,["modelValue"])])]),t(D,{label:"Adicionar Produto","expand-separator":"",class:"add-expansion animate-fade-in",icon:"add_box","header-class":"expansion-header"},{default:n(()=>[t(M,{onSubmit:z(I,["prevent"]),ref_key:"productForm",ref:y},{default:n(()=>[a("div",ne,[a("div",le,[t(h,{modelValue:r.value.name,"onUpdate:modelValue":o[2]||(o[2]=e=>r.value.name=e),label:"Nome do Produto",placeholder:"Digite o nome do produto",outlined:"",dense:"",rules:[e=>!!e||"O nome do produto Ã© obrigatÃ³rio"],color:"primary","input-style":{fontFamily:"Inter, Poppins, Roboto, sans-serif",fontWeight:500}},null,8,["modelValue","rules"])]),a("div",re,[t(h,{modelValue:r.value.quantity,"onUpdate:modelValue":o[3]||(o[3]=e=>r.value.quantity=e),modelModifiers:{number:!0},label:"Quantidade",placeholder:"Digite a quantidade",type:"number",outlined:"",dense:"",rules:[e=>e>0||"A quantidade deve ser maior que zero"],color:"primary","input-style":{fontFamily:"Inter, Poppins, Roboto, sans-serif",fontWeight:500}},null,8,["modelValue","rules"])]),a("div",ie,[t(x,{label:"+ Adicionar",type:"submit",color:"primary",class:"full-width",icon:"add_box",unelevated:"","no-caps":""})])])]),_:1},512)]),_:1}),t(D,{label:"Produtos Esgotados","expand-separator":"",class:"out-expansion animate-fade-in",icon:"warning","header-class":"expansion-header"},{default:n(()=>[t(G,null,{default:n(()=>[(i(!0),v(k,null,V(q.value,e=>(i(),Q(j,{key:e.id},{default:n(()=>[t(F,{avatar:""},{default:n(()=>[t(g,{name:"warning",color:"red"})]),_:1}),t(F,null,{default:n(()=>[t(Z,{class:"custom-font-bold"},{default:n(()=>[m(p(e.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),a("div",de,[(i(!0),v(k,null,V(b.value,e=>(i(),v("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[t(L,{class:"product-card animate-fade-in"},{default:n(()=>[t(T,{class:"row items-center"},{default:n(()=>[t(g,{name:"inventory_2",color:"primary",size:"32px",class:"q-mr-sm"}),a("div",null,[a("div",ce,p(e.name),1),a("div",ue,[o[5]||(o[5]=m(" Quantidade: ")),a("span",{class:$(e.quantity===0?"text-red":"text-green")},p(e.quantity),3)])])]),_:2},1024),t(O),t(U,{align:"right",class:"action-group"},{default:n(()=>[t(x,{icon:"add",label:"Adicionar Estoque",color:"green",flat:"",onClick:u=>N(e.id),class:"q-mr-xs","no-caps":""},null,8,["onClick"]),t(x,{icon:"delete",label:"Remover",color:"red",flat:"",onClick:u=>E(e.id),"no-caps":""},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),b.value.length===0?(i(),v("div",me,[t(g,{name:"info",size:"lg",color:"grey-6"}),o[6]||(o[6]=a("p",{class:"custom-font-light"},"Nenhum produto encontrado.",-1))])):A("",!0)])])]),_:1}))}},Ve=B(pe,[["__scopeId","data-v-487e1eee"]]);export{Ve as default};
