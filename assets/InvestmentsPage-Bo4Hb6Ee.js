import{_ as V,r as b,k as y,o as N,U as S,w as L,Z as w,$ as m,a0 as a,a2 as l,a1 as e,ab as c,ac as v,a8 as f,a9 as _,a4 as u,a5 as I,ad as R,a6 as D,a7 as P,af as $,ae as k,a3 as j,b as F,ak as M}from"./index-DhQyY180.js";import{Q as O,b as U,c as q,a as z}from"./QList-CsQOYvm0.js";import{Q as E}from"./QBadge-C-BWgy33.js";import{Q as T}from"./QForm-DLgz-_xu.js";import{Q as A}from"./QPage-DI6gLvA2.js";import{C as Q,B as Z,a as G,b as H,L as J,p as K,c as W}from"./chart-CMoAIPdT.js";const X={class:"text-h4 text-green-3 q-mt-xs"},Y={class:"text-h6 text-weight-bold q-mb-md text-white"},ee={key:0,class:"text-center text-grey-4 q-mt-md"},te={class:"text-h6 text-weight-bold q-mb-md text-white"},ae={class:"row q-col-gutter-md"},se={class:"col-12 col-md-4 flex flex-center"},le={class:"text-h6 text-weight-bold q-mb-md text-white"},oe={__name:"InvestmentsPage",setup(re){Q.register(Z,G,H,J,K,W);const g=b([]),o=b({amount:0,date:""});function x(r,t){M.create({type:r,message:t})}function B(){if(!o.value.amount||!o.value.date){x("negative","Preencha todos os campos corretamente.");return}g.value.push({amount:Number(o.value.amount),date:o.value.date}),x("positive","Investimento registrado!"),o.value={amount:0,date:""}}const n=y(()=>{const r={};return g.value.forEach(t=>{const s=new Date(t.date);if(isNaN(s))return;const i=s.toLocaleString("pt-BR",{month:"long",year:"numeric"});r[i]||(r[i]=0),r[i]+=t.amount}),r}),C=y(()=>g.value.reduce((r,t)=>r+Number(t.amount),0)),p=b(null);let d=null;async function h(){await F(),p.value&&(d&&d.destroy(),Object.keys(n.value).length!==0&&(d=new Q(p.value,{type:"bar",data:{labels:Object.keys(n.value),datasets:[{label:"Valor Investido",data:Object.values(n.value),backgroundColor:"#1976d2",borderRadius:12,hoverBackgroundColor:"#1565c0",barPercentage:.6,categoryPercentage:.6}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"#374151"}},x:{grid:{color:"#374151"}}}}})))}return N(h),S(()=>{d&&d.destroy()}),L(n,h),(r,t)=>(m(),w(A,null,{default:a(()=>[l("div",null,[e(c,{flat:"",bordered:"",class:"q-mb-lg investments-card"},{default:a(()=>[e(v,{class:"row items-center"},{default:a(()=>[e(f,{name:"account_balance_wallet",color:"green",size:"40px",class:"q-mr-md"}),l("div",null,[t[2]||(t[2]=l("div",{class:"text-h6 text-weight-bold text-white"},"Total Investido",-1)),l("div",X," R$ "+_(C.value.toLocaleString("pt-BR",{minimumFractionDigits:2})),1)])]),_:1})]),_:1}),e(c,{flat:"",bordered:"",class:"q-mb-lg investments-card"},{default:a(()=>[e(v,null,{default:a(()=>[l("div",Y,[e(f,{name:"event",color:"primary",class:"q-mr-sm"}),t[3]||(t[3]=u(" Detalhes por Mês "))]),e(O,null,{default:a(()=>[(m(!0),I(D,null,P(n.value,(s,i)=>(m(),w(U,{key:i,class:"investments-list-item"},{default:a(()=>[e(q,null,{default:a(()=>[e(z,{class:"text-subtitle1 text-weight-bold text-white"},{default:a(()=>[u(_(i),1)]),_:2},1024)]),_:2},1024),e(q,{side:""},{default:a(()=>[e(E,{color:"green-4",align:"top",class:"q-pa-sm text-subtitle2 text-white"},{default:a(()=>[u(" R$ "+_(s.toLocaleString("pt-BR",{minimumFractionDigits:2})),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Object.keys(n.value).length===0?(m(),I("div",ee," Nenhum investimento registrado ainda. ")):R("",!0)]),_:1})]),_:1})]),_:1}),e(c,{flat:"",bordered:"",class:"investments-card"},{default:a(()=>[e(v,null,{default:a(()=>[l("div",te,[e(f,{name:"add_circle",color:"primary",class:"q-mr-sm"}),t[4]||(t[4]=u(" Novo Investimento "))]),e(T,{onSubmit:$(B,["prevent"])},{default:a(()=>[l("div",ae,[e(k,{modelValue:o.value.amount,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.amount=s),label:"Valor (R$)",type:"number",outlined:"",dense:"",class:"col-12 col-md-4",rules:[s=>s>0||"Valor deve ser maior que zero"],color:"green-4",prefix:"R$",dark:"","label-color":"grey-3","input-class":"text-white"},null,8,["modelValue","rules"]),e(k,{modelValue:o.value.date,"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.date=s),label:"Data do Investimento",type:"date",outlined:"",dense:"",class:"col-12 col-md-4",rules:[s=>!!s||"Campo obrigatório"],color:"primary",dark:"","label-color":"grey-3","input-class":"text-white"},null,8,["modelValue","rules"]),l("div",se,[e(j,{label:"Investir Agora",color:"primary",type:"submit",unelevated:"",icon:"trending_up",class:"q-mt-sm investments-btn",size:"lg","text-color":"white"})])])]),_:1})]),_:1})]),_:1}),e(c,{flat:"",bordered:"",class:"q-mb-lg investments-card"},{default:a(()=>[e(v,null,{default:a(()=>[l("div",le,[e(f,{name:"bar_chart",color:"primary",class:"q-mr-sm"}),t[5]||(t[5]=u(" Gráfico de Investimentos "))]),l("canvas",{ref_key:"barChart",ref:p},null,512)]),_:1})]),_:1})])]),_:1}))}},ve=V(oe,[["__scopeId","data-v-d4bfdd14"]]);export{ve as default};
