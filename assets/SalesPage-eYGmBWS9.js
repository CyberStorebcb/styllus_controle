import{Q,b as k,c as g,a as y}from"./QList-CsQOYvm0.js";import{_ as q,k as x,Z as p,$ as i,a0 as t,a2 as c,a1 as s,ab as V,ac as h,a5 as b,a6 as N,a7 as D,a4 as v,a9 as _,a3 as S,a8 as B,ak as o,aj as f}from"./index-DhQyY180.js";import{Q as $}from"./QPage-DI6gLvA2.js";import{u as I}from"./product-store-BlvvGknn.js";import"./index-xsH4HHeE.js";const E={class:"sales-container"},L={key:1,class:"text-center q-mt-md"},O={__name:"SalesPage",setup(w){const d=I(),u=x(()=>d.availableProducts);function P(r){const e=d.products.find(a=>a.id===r);if(!e){o.create({type:"negative",message:"Produto não encontrado."});return}f.create({title:"Vender Produto",message:`Informe a quantidade para vender o produto "${e.name}":`,prompt:{model:"",type:"number",isValid:a=>a>0&&a<=e.quantity,label:"Quantidade",placeholder:`Máximo: ${e.quantity}`},cancel:!0,persistent:!0}).onOk(a=>{const n=parseInt(a,10);if(!r||isNaN(n)||n<=0||n>e.quantity){o.create({type:"negative",message:"Preencha todos os campos corretamente."});return}f.create({title:"Preço Unitário",message:`Informe o preço unitário do produto "${e.name}":`,prompt:{model:"",type:"number",isValid:m=>m>0,label:"Preço Unitário",placeholder:"Digite o preço unitário"},cancel:!0,persistent:!0}).onOk(m=>{const l=parseFloat(m);if(!r||isNaN(l)||l<=0){o.create({type:"negative",message:"Preencha todos os campos corretamente."});return}f.create({title:"Método de Pagamento",message:"Selecione o método de pagamento:",options:{type:"radio",model:"",items:[{label:"Dinheiro",value:"Dinheiro"},{label:"Cartão de Crédito",value:"Cartão de Crédito"},{label:"Cartão de Débito",value:"Cartão de Débito"},{label:"Pix",value:"Pix"},{label:"Boleto",value:"Boleto"}]},cancel:!0,persistent:!0}).onOk(C=>{if(!r||!l||!n||n<=0||l<=0){o.create({type:"negative",message:"Preencha todos os campos corretamente."});return}d.sellProduct(r,n,l,C),o.create({type:"positive",message:"Venda registrada com sucesso!"})}).onCancel(()=>{o.create({type:"info",message:"Venda cancelada."})})}).onCancel(()=>{o.create({type:"info",message:"Venda cancelada."})})}).onCancel(()=>{o.create({type:"info",message:"Venda cancelada."})})}return(r,e)=>(i(),p($,{class:"sales-bg flex flex-center"},{default:t(()=>[c("div",E,[e[2]||(e[2]=c("div",{class:"sales-title q-mb-lg"},"Nova Venda",-1)),s(V,{flat:"",bordered:"",class:"sales-card shadow-2"},{default:t(()=>[s(h,null,{default:t(()=>[e[1]||(e[1]=c("div",{class:"sales-section-title q-mb-md"},"Produtos Disponíveis",-1)),Array.isArray(u.value)&&u.value.length>0?(i(),p(Q,{key:0,class:"q-pa-none"},{default:t(()=>[(i(!0),b(N,null,D(u.value,a=>(i(),p(k,{key:a.id,class:"sales-item",disable:a.quantity===0},{default:t(()=>[s(g,null,{default:t(()=>[s(y,{class:"custom-font-bold sales-product-name"},{default:t(()=>[v(_(a.name),1)]),_:2},1024),s(y,{caption:"",class:"custom-font-light sales-qty"},{default:t(()=>[v(" Quantidade: "+_(a.quantity),1)]),_:2},1024)]),_:2},1024),s(g,{side:""},{default:t(()=>[s(S,{icon:"shopping_cart",label:"VENDER",color:"primary",unelevated:"",class:"sales-btn",onClick:n=>P(a.id),disable:a.quantity===0,"no-caps":""},null,8,["onClick","disable"])]),_:2},1024)]),_:2},1032,["disable"]))),128))]),_:1})):(i(),b("div",L,[s(B,{name:"info",size:"lg",color:"grey-6"}),e[0]||(e[0]=c("p",{class:"custom-font-light text-grey"},"Nenhum produto disponível para venda.",-1))]))]),_:1})]),_:1})])]),_:1}))}},z=q(O,[["__scopeId","data-v-710cf314"]]);export{z as default};
