import{_ as z,ar as H,k as h,Z as c,$ as o,a0 as s,a2 as l,a1 as a,ab as x,ac as Q,a5 as p,a6 as k,a7 as V,a8 as f,a4 as y,a9 as n,a3 as P,ah as R,ai as B,aj as i,ak as N}from"./index-DUcdBK8F.js";import{a as S,b as u,Q as g}from"./QItem-CBZBKt0L.js";import{Q as C}from"./QList-BeUwpj4O.js";import{Q as E}from"./QPage-D_dxwWK0.js";import{u as F}from"./product-store-DPTwWHAA.js";import"./index-xsH4HHeE.js";const T={class:"sales-container"},L={class:"sales-avatar"},O={key:1,class:"text-center q-mt-md"},A={class:"sales-avatar sales-avatar-history"},U={key:1,class:"text-center q-mt-md"},j={class:"text-right q-mt-md q-mb-sm text-weight-bold"},M={__name:"SalesPage",setup(Z){const I=H(),m=F(),q=h(()=>m.availableProducts),v=h(()=>m.salesHistory||[]),D=h(()=>v.value.reduce((r,e)=>r+(e.total||e.quantity*e.price),0).toFixed(2));function $(r){const e=m.products.find(t=>t.id===r);if(!e){i.create({type:"negative",message:"Produto não encontrado."});return}N.create({title:"Vender Produto",message:`Informe a quantidade e o preço unitário para vender o produto "${e.name}":`,prompt:{model:"",type:"number",isValid:t=>t>0&&t<=e.quantity,label:"Quantidade",placeholder:`Máximo: ${e.quantity}`},cancel:!0,persistent:!0}).onOk(t=>{const d=parseInt(t,10);if(isNaN(d)||d<=0||d>e.quantity){i.create({type:"negative",message:"Quantidade inválida."});return}N.create({title:"Preço Unitário",message:`Informe o preço unitário do produto "${e.name}":`,prompt:{model:"",type:"number",isValid:_=>_>0,label:"Preço Unitário",placeholder:"Digite o preço unitário"},cancel:!0,persistent:!0}).onOk(_=>{const b=parseFloat(_);if(isNaN(b)||b<=0){i.create({type:"negative",message:"Preço inválido."});return}m.sellProduct(r,d,b),i.create({type:"positive",message:"Venda registrada com sucesso!"})}).onCancel(()=>{i.create({type:"info",message:"Venda cancelada."})})}).onCancel(()=>{i.create({type:"info",message:"Venda cancelada."})})}function w(){I.push({name:"sales-history"})}return(r,e)=>(o(),c(E,{class:"sales-bg flex flex-center"},{default:s(()=>[l("div",T,[e[4]||(e[4]=l("div",{class:"sales-title q-mb-lg"},"HISTÓRICO DE VENDAS",-1)),a(x,{flat:"",bordered:"",class:"sales-card shadow-2"},{default:s(()=>[a(Q,null,{default:s(()=>[e[1]||(e[1]=l("div",{class:"sales-section-title q-mb-md"},"Produtos Disponíveis para Venda",-1)),q.value.length>0?(o(),c(C,{key:0,class:"q-pa-none"},{default:s(()=>[(o(!0),p(k,null,V(q.value,t=>(o(),c(S,{key:t.id,class:"sales-item",disable:t.quantity===0},{default:s(()=>[a(u,{avatar:""},{default:s(()=>[l("div",L,[a(f,{name:"radio",color:"white",size:"32px"})])]),_:1}),a(u,null,{default:s(()=>[a(g,{class:"custom-font-bold sales-product-name"},{default:s(()=>[y(n(t.name),1)]),_:2},1024),a(g,{caption:"",class:"custom-font-light sales-qty"},{default:s(()=>[y(" Quantidade: "+n(t.quantity),1)]),_:2},1024)]),_:2},1024),a(u,{side:""},{default:s(()=>[a(P,{icon:"shopping_cart",label:"VENDER",color:"primary",unelevated:"",class:"sales-btn",onClick:d=>$(t.id),disable:t.quantity===0,"no-caps":""},null,8,["onClick","disable"])]),_:2},1024)]),_:2},1032,["disable"]))),128))]),_:1})):(o(),p("div",O,[a(f,{name:"info",size:"lg",color:"grey-6"}),e[0]||(e[0]=l("p",{class:"custom-font-light text-grey"},"Nenhum produto disponível para venda.",-1))]))]),_:1}),a(R,{spaced:""}),a(B,{align:"center"},{default:s(()=>[a(P,{color:"secondary",icon:"history",label:"Ver Histórico de Vendas",class:"go-history-btn",onClick:w,"no-caps":"",unelevated:""})]),_:1})]),_:1}),a(x,{flat:"",bordered:"",class:"sales-card shadow-2 q-mt-xl"},{default:s(()=>[a(Q,null,{default:s(()=>[e[3]||(e[3]=l("div",{class:"sales-section-title q-mb-md"},"Histórico de Vendas Realizadas",-1)),v.value.length>0?(o(),c(C,{key:0,class:"q-pa-none"},{default:s(()=>[(o(!0),p(k,null,V(v.value,t=>(o(),c(S,{key:t.id,class:"sales-item"},{default:s(()=>[a(u,{avatar:""},{default:s(()=>[l("div",A,[a(f,{name:"check_circle",color:"white",size:"28px"})])]),_:1}),a(u,null,{default:s(()=>[a(g,{class:"custom-font-bold sales-product-name"},{default:s(()=>[y(n(t.name),1)]),_:2},1024),a(g,{caption:"",class:"custom-font-light sales-qty"},{default:s(()=>[y(" Quantidade: "+n(t.quantity)+" | Valor: R$ "+n(t.price.toFixed(2))+" | Data: "+n(t.date),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(o(),p("div",U,[a(f,{name:"history",size:"lg",color:"grey-6"}),e[2]||(e[2]=l("p",{class:"custom-font-light text-grey"},"Nenhuma venda realizada ainda.",-1))])),l("div",j," Total vendido: R$ "+n(D.value),1)]),_:1})]),_:1})])]),_:1}))}},ee=z(M,[["__scopeId","data-v-415120f0"]]);export{ee as default};
