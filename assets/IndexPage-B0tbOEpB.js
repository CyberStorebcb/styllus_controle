import{c as T,C as $,E as A,g as E,k as B,h as L,L as N,a8 as P,r,U as F,o as j,Y as D,Z as y,_ as o,a0 as t,$ as s,a2 as l,a6 as d,a1 as G,a9 as u,aa as m,a3 as q,a4 as M,a7 as S,ab as R,b as U}from"./index-CMbtiFzm.js";import{Q as Z}from"./QPage-Df8Z9Z99.js";import{u as Y}from"./product-store-nUOeiaRV.js";import{u as H}from"./sales-store-6TMRJuxZ.js";import{C as w,B as J,a as K,b as O,L as W,p as X,c as aa,P as ea,A as ta}from"./chart-CMoAIPdT.js";import{_ as sa}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-xsH4HHeE.js";const oa=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],ra=["wave","pulse","pulse-x","pulse-y","fade","blink","none"],la=T({name:"QSkeleton",props:{...$,tag:{type:String,default:"div"},type:{type:String,validator:e=>oa.includes(e),default:"rect"},animation:{type:String,validator:e=>ra.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:n}){const v=E(),p=A(e,v.proxy.$q),i=B(()=>{const g=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:g[0],height:g[1]}}),h=B(()=>`q-skeleton q-skeleton--${p.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>L(e.tag,{class:h.value,style:i.value},N(n.default))}}),da=P("report",()=>({reports:r([{id:1,name:"Relatório Mensal"},{id:2,name:"Relatório de Estoque"}])})),na=P("investment",()=>({totalInvested:r(5e3)})),ia={class:"dashboard-container"},ca={class:"dashboard-title text-h4 text-center q-mb-lg"},ua={class:"row justify-end q-mb-md"},ma={class:"dashboard-cards q-gutter-md row wrap justify-center"},va={class:"dashboard-card-title"},pa={class:"dashboard-card-value"},ha={class:"dashboard-card-desc"},ga={class:"dashboard-card-title"},fa={class:"dashboard-card-value"},ba={class:"dashboard-card-title"},_a={class:"dashboard-card-value"},ya={class:"dashboard-card-title"},Sa={class:"dashboard-card-value"},ka={class:"dashboard-charts row q-mt-xl q-gutter-md"},xa={class:"dashboard-chart-title"},Ca={class:"dashboard-chart-title"},qa={key:0,class:"text-grey text-center q-mt-md"},wa={__name:"IndexPage",setup(e){w.register(J,K,O,W,X,aa,ea,ta);const n=Y(),v=da(),p=na(),i=H(),h=r(0),g=r(0),Q=r(0),I=r(0),k=r(!0),x=r(null);let f=null;const C=r(null);let b=null;const c=r([]);async function z(){k.value=!0,n.loadProducts&&await n.loadProducts(),v.loadReports&&await v.loadReports(),p.loadInvestments&&await p.loadInvestments(),i.loadSales&&await i.loadSales(),h.value=n.products?.length||0,g.value=v.reports?.length||0,Q.value=p.totalInvested||0,I.value=i.totalSalesValue||0,c.value=n.products?.slice(0,5)||[],await V(),k.value=!1}async function V(){await U(),f&&f.destroy(),b&&b.destroy();try{const _=i.getSalesLast7Days?.()||[{date:"Seg",value:10},{date:"Ter",value:20},{date:"Qua",value:15},{date:"Qui",value:30},{date:"Sex",value:25},{date:"Sáb",value:18},{date:"Dom",value:12}];x.value&&(f=new w(x.value,{type:"bar",data:{labels:_.map(a=>a.date),datasets:[{label:"Vendas",data:_.map(a=>a.value),backgroundColor:"#1976d2",borderRadius:8}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})),C.value&&c.value.length&&(b=new w(C.value,{type:"pie",data:{labels:c.value.map(a=>a.name),datasets:[{data:c.value.map(a=>a.quantity),backgroundColor:["#1976d2","#43a047","#fb8c00","#8e24aa","#e53935"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}}))}catch(_){console.error("Erro ao renderizar gráficos:",_)}}return F(()=>{f&&f.destroy(),b&&b.destroy()}),j(async()=>{await z()}),(_,a)=>(y(),D(Z,null,{default:o(()=>[t("div",ia,[t("div",ca,[s(d,{name:"dashboard",color:"primary",size:"36px",class:"q-mr-sm"}),a[0]||(a[0]=l(" Dashboard Geral "))]),t("div",ua,[s(G,{color:"primary",icon:"refresh",label:"Atualizar",onClick:z,loading:k.value,unelevated:""},null,8,["loading"])]),t("div",ma,[s(u,{class:"dashboard-card col-12 col-sm-6 col-md-3"},{default:o(()=>[s(m,null,{default:o(()=>[t("div",va,[s(d,{name:"shopping_cart",color:"primary",size:"28px",class:"q-mr-sm"}),a[1]||(a[1]=l(" Produtos "))]),t("div",pa,[k.value?(y(),D(la,{key:0,type:"text",width:"60px"})):(y(),q(M,{key:1},[l(S(h.value),1)],64))]),t("div",ha,S(h.value===1?"Cadastrado":"Cadastrados"),1)]),_:1})]),_:1}),s(u,{class:"dashboard-card col-xs-12 col-sm-6 col-md-3"},{default:o(()=>[s(m,null,{default:o(()=>[t("div",ga,[s(d,{name:"attach_money",color:"green",size:"28px",class:"q-mr-sm"}),a[2]||(a[2]=l(" Vendas "))]),t("div",fa," R$ "+S(I.value.toLocaleString("pt-BR",{minimumFractionDigits:2})),1),a[3]||(a[3]=t("div",{class:"dashboard-card-desc"},"Total Vendido",-1))]),_:1})]),_:1}),s(u,{class:"dashboard-card col-xs-12 col-sm-6 col-md-3"},{default:o(()=>[s(m,null,{default:o(()=>[t("div",ba,[s(d,{name:"bar_chart",color:"deep-orange",size:"28px",class:"q-mr-sm"}),a[4]||(a[4]=l(" Relatórios "))]),t("div",_a,S(g.value),1),a[5]||(a[5]=t("div",{class:"dashboard-card-desc"},"Gerados",-1))]),_:1})]),_:1}),s(u,{class:"dashboard-card col-xs-12 col-sm-6 col-md-3"},{default:o(()=>[s(m,null,{default:o(()=>[t("div",ya,[s(d,{name:"account_balance_wallet",color:"purple",size:"28px",class:"q-mr-sm"}),a[6]||(a[6]=l(" Investimentos "))]),t("div",Sa," R$ "+S(Q.value.toLocaleString("pt-BR",{minimumFractionDigits:2})),1),a[7]||(a[7]=t("div",{class:"dashboard-card-desc"},"Total Investido",-1))]),_:1})]),_:1})]),t("div",ka,[s(u,{class:"dashboard-chart-card col-xs-12 col-md-6"},{default:o(()=>[s(m,null,{default:o(()=>[t("div",xa,[s(d,{name:"show_chart",color:"primary",size:"24px",class:"q-mr-sm"}),a[8]||(a[8]=l(" Vendas dos Últimos 7 Dias "))]),t("canvas",{ref_key:"salesChart",ref:x},null,512)]),_:1})]),_:1}),s(u,{class:"dashboard-chart-card col-xs-12 col-md-6"},{default:o(()=>[s(m,null,{default:o(()=>[t("div",Ca,[s(d,{name:"pie_chart",color:"deep-orange",size:"24px",class:"q-mr-sm"}),a[9]||(a[9]=l(" Distribuição de Produtos "))]),c.value.length?R("",!0):(y(),q("div",qa," Nenhum produto cadastrado. ")),c.value.length?(y(),q("canvas",{key:1,ref_key:"productsChart",ref:C},null,512)):R("",!0)]),_:1})]),_:1})])])]),_:1}))}},Va=sa(wa,[["__scopeId","data-v-af979aa3"]]);export{Va as default};
