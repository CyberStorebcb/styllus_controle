import{r as b,k as c,aE as T,w as j,o as U,U as G,Y as V,Z as h,_ as o,a0 as r,$ as t,a9 as w,ae as d,aa as B,a6 as S,a7 as N,a2 as p,a3 as L,ab as W,a4 as Z,a5 as Y,ad as H,ac as F,a1 as J,b as K,ai as X}from"./index-DXMZALbm.js";import{Q as ee,b as te,c as E,a as ae}from"./QList-D_md_VvF.js";import{Q as le}from"./QBadge-DIaLFIIK.js";import{Q as oe}from"./QForm-FF6Twryr.js";import{Q as se}from"./QPage-CCXwAZhy.js";import{C as O,B as re,a as ne,b as ie,L as de,p as ue,c as ce}from"./chart-CMoAIPdT.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ve={class:"investments-wrapper"},fe={class:"text-h4 text-green-3 q-mt-xs"},ge={key:0,class:"text-center text-grey-4 q-mt-md"},be={class:"row q-col-gutter-md"},pe={class:"col-12 col-md-4 flex flex-center"},xe={class:"chart-container"},Ce={__name:"InvestmentsPage",setup(ye){const x=b(!1),C=b(!1),R={id:"valueOnBar",afterDatasetsDraw(l){const{ctx:e}=l;l.data.datasets.forEach((a,s)=>{l.getDatasetMeta(s).data.forEach((f,I)=>{const g=a.data[I];e.save(),e.font="bold 15px sans-serif",e.fillStyle=l.options.scales.y.ticks.color,e.textAlign="center",e.shadowColor=l.options.scales.y.ticks.color==="#222"?"#fff":"#222",e.shadowBlur=4,e.fillText(`R$ ${Number(g).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,f.x,f.y-12),e.restore()})})}};O.register(re,ne,ie,de,ue,ce);const y=b([]),n=b({amount:0,date:""}),i=c(()=>T.isActive),_=c(()=>i.value?"bg-dark":"bg-light"),u=c(()=>i.value?"text-white":"text-dark"),$=c(()=>n.value.amount>0&&!!n.value.date&&!C.value);function P(l,e){X.create({type:l,message:e})}async function z(){$.value&&(C.value=!0,setTimeout(()=>{y.value.push({amount:Number(n.value.amount),date:n.value.date}),P("positive","Investimento registrado!"),n.value={amount:0,date:""},C.value=!1},800))}const m=c(()=>{const l={};return y.value.forEach(e=>{const a=new Date(e.date);if(isNaN(a))return;const s=a.toLocaleString("pt-BR",{month:"long",year:"numeric"});l[s]||(l[s]=0),l[s]+=e.amount}),l}),A=c(()=>y.value.reduce((l,e)=>l+Number(e.amount),0)),k=b(null);let v=null;function M(){return i.value?{gradientStart:"#43e97b",gradientEnd:"#1976d2",tickColor:"#fff",gridColor:"rgba(255,255,255,0.15)",borderColor:"#fff",hoverColor:"#43e97b"}:{gradientStart:"#1976d2",gradientEnd:"#43e97b",tickColor:"#222",gridColor:"rgba(0,0,0,0.08)",borderColor:"#1976d2",hoverColor:"#1565c0"}}async function D(){if(await K(),!k.value||(v&&v.destroy(),Object.keys(m.value).length===0))return;const l=k.value.getContext("2d"),{gradientStart:e,gradientEnd:a,tickColor:s,gridColor:q,borderColor:f,hoverColor:I}=M(),g=l.createLinearGradient(0,0,0,340);g.addColorStop(0,e),g.addColorStop(1,a),v=new O(k.value,{type:"bar",data:{labels:Object.keys(m.value),datasets:[{label:"Valor Investido",data:Object.values(m.value),backgroundColor:g,borderRadius:14,borderWidth:2,borderColor:f,hoverBackgroundColor:I,barPercentage:.55,categoryPercentage:.55}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:900,easing:"easeOutBounce"},plugins:{legend:{display:!1},tooltip:{backgroundColor:i.value?"#23272f":"#fff",titleColor:i.value?"#fff":"#222",bodyColor:i.value?"#fff":"#222",borderColor:f,borderWidth:1,callbacks:{label:Q=>`R$ ${Number(Q.parsed.y).toLocaleString("pt-BR",{minimumFractionDigits:2})}`}},valueOnBar:R},scales:{x:{ticks:{color:s,font:{size:16,weight:"bold"}},grid:{color:q}},y:{beginAtZero:!0,ticks:{color:s,font:{size:16,weight:"bold"},callback:Q=>`R$ ${Number(Q).toLocaleString("pt-BR",{minimumFractionDigits:0})}`},grid:{color:q}}}},plugins:[R]})}return j([y,i],D,{deep:!0}),U(D),G(()=>{v&&v.destroy()}),(l,e)=>(h(),V(se,{class:"investments-bg"},{default:o(()=>[r("div",ve,[t(w,{flat:"",bordered:"",class:d(["investments-card q-mb-lg",_.value])},{default:o(()=>[t(B,{class:"row items-center"},{default:o(()=>[t(S,{name:"account_balance_wallet",color:"green",size:"40px",class:"q-mr-md"}),r("div",null,[r("div",{class:d(["text-h6 text-weight-bold",u.value])},"Total Investido",2),r("div",fe," R$ "+N(A.value.toLocaleString("pt-BR",{minimumFractionDigits:2})),1)])]),_:1})]),_:1},8,["class"]),t(w,{flat:"",bordered:"",class:d(["investments-card q-mb-lg",_.value])},{default:o(()=>[t(B,null,{default:o(()=>[r("div",{class:d(["text-h6 text-weight-bold q-mb-md",u.value])},[t(S,{name:"event",color:"primary",class:"q-mr-sm"}),e[6]||(e[6]=p(" Detalhes por Mês "))],2),t(ee,null,{default:o(()=>[(h(!0),L(Z,null,Y(m.value,(a,s)=>(h(),V(te,{key:s,class:"investments-list-item"},{default:o(()=>[t(E,null,{default:o(()=>[t(ae,{class:d(["text-subtitle1 text-weight-bold",u.value])},{default:o(()=>[p(N(s),1)]),_:2},1032,["class"])]),_:2},1024),t(E,{side:""},{default:o(()=>[t(le,{color:"green-4",align:"top",class:"q-pa-sm text-subtitle2 text-white"},{default:o(()=>[p(" R$ "+N(a.toLocaleString("pt-BR",{minimumFractionDigits:2})),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Object.keys(m.value).length===0?(h(),L("div",ge," Nenhum investimento registrado ainda. ")):W("",!0)]),_:1})]),_:1})]),_:1},8,["class"]),t(w,{flat:"",bordered:"",class:d(["investments-card q-mb-lg",_.value])},{default:o(()=>[t(B,null,{default:o(()=>[r("div",{class:d(["text-h6 text-weight-bold q-mb-md",u.value])},[t(S,{name:"add_circle",color:"primary",class:"q-mr-sm"}),e[7]||(e[7]=p(" Novo Investimento "))],2),t(oe,{onSubmit:H(z,["prevent"]),class:"q-gutter-md"},{default:o(()=>[r("div",be,[t(F,{modelValue:n.value.amount,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value.amount=a),label:"Valor (R$)",type:"number",outlined:"",dense:"",class:"col-12 col-md-4",rules:[a=>a>0||"Valor deve ser maior que zero"],color:"green-4",prefix:"R$",dark:i.value,"label-color":"grey-3","input-class":u.value,onFocus:e[1]||(e[1]=a=>x.value=!0),onBlur:e[2]||(e[2]=a=>x.value=!1)},null,8,["modelValue","rules","dark","input-class"]),t(F,{modelValue:n.value.date,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value.date=a),label:"Data do Investimento",type:"date",outlined:"",dense:"",class:"col-12 col-md-4",rules:[a=>!!a||"Campo obrigatório"],color:"primary",dark:i.value,"label-color":"grey-3","input-class":u.value,onFocus:e[4]||(e[4]=a=>x.value=!0),onBlur:e[5]||(e[5]=a=>x.value=!1)},null,8,["modelValue","rules","dark","input-class"]),r("div",pe,[t(J,{label:"Investir Agora",color:"primary",type:"submit",unelevated:"",icon:"trending_up",class:"q-mt-sm investments-btn",size:"lg","text-color":"white",loading:C.value,disable:!$.value},null,8,["loading","disable"])])])]),_:1})]),_:1})]),_:1},8,["class"]),t(w,{flat:"",bordered:"",class:d(["investments-card q-mb-lg",_.value])},{default:o(()=>[t(B,null,{default:o(()=>[r("div",{class:d(["text-h6 text-weight-bold q-mb-md",u.value])},[t(S,{name:"bar_chart",color:"primary",class:"q-mr-sm"}),e[8]||(e[8]=p(" Gráfico de Investimentos "))],2),r("div",xe,[r("canvas",{ref_key:"barChart",ref:k},null,512)])]),_:1})]),_:1},8,["class"])])]),_:1}))}},Ie=me(Ce,[["__scopeId","data-v-df4fb237"]]);export{Ie as default};
