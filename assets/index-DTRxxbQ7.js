const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-BN3R6Al1.js","assets/QList-C--UWoUK.js","assets/QExpansionItem-DWmBuDUj.js","assets/format-B8-XYLEH.js","assets/use-quasar-BBnQ_X0R.js","assets/MainLayout-n3g4Fkr0.css","assets/IndexPage-B6r2GPcq.js","assets/QPage-pt9NM7Fr.js","assets/product-store-C3IlpoxU.js","assets/index-BSBq6A-N.js","assets/sales-store-BduwSnzu.js","assets/chart-CvTfpdrd.js","assets/IndexPage-Davolkwq.css","assets/ProductsPage-DTEQEyDL.js","assets/QBadge-BygkNXTq.js","assets/QSelect-CxdRDuFh.js","assets/QForm-BbcVE1MZ.js","assets/ProductsPage-08Fqx9gE.css","assets/SalesPage--hmMT62r.js","assets/SalesPage-BwcmEKTH.css","assets/SalesHistoryPage-CXHjMs-N.js","assets/SalesHistoryPage-D1KYKKzG.css","assets/MetaPage-DV1XsV-E.js","assets/MetaPage-Dt-nRpqJ.css","assets/ReportsPage-DRiOUYAb.js","assets/QTable-BFYSwBK2.js","assets/ReportsPage-DVnQYN_q.css","assets/InvestmentsPage-BDoSakfN.js","assets/InvestmentsPage-BMEVs6g6.css","assets/PaymentPage-BuRhHm6L.js","assets/PaymentPage-C1AqdGQs.css","assets/axios-x7U8OA1M.js"])))=>i.map(i=>d[i]);
const scriptRel = /* @__PURE__ */ function detectScriptRel() {
  const relList = typeof document !== "undefined" && document.createElement("link").relList;
  return relList && relList.supports && relList.supports("modulepreload") ? "modulepreload" : "preload";
}();
const assetsURL = function(dep) {
  return "/styllus_controle/" + dep;
};
const seen = {};
const __vitePreload = function preload(baseModule, deps, importerUrl) {
  let promise = Promise.resolve();
  if (deps && deps.length > 0) {
    let allSettled2 = function(promises) {
      return Promise.all(
        promises.map(
          (p2) => Promise.resolve(p2).then(
            (value) => ({ status: "fulfilled", value }),
            (reason) => ({ status: "rejected", reason })
          )
        )
      );
    };
    document.getElementsByTagName("link");
    const cspNonceMeta = document.querySelector(
      "meta[property=csp-nonce]"
    );
    const cspNonce = cspNonceMeta?.nonce || cspNonceMeta?.getAttribute("nonce");
    promise = allSettled2(
      deps.map((dep) => {
        dep = assetsURL(dep);
        if (dep in seen) return;
        seen[dep] = true;
        const isCss = dep.endsWith(".css");
        const cssSelector = isCss ? '[rel="stylesheet"]' : "";
        if (document.querySelector(`link[href="${dep}"]${cssSelector}`)) {
          return;
        }
        const link = document.createElement("link");
        link.rel = isCss ? "stylesheet" : scriptRel;
        if (!isCss) {
          link.as = "script";
        }
        link.crossOrigin = "";
        link.href = dep;
        if (cspNonce) {
          link.setAttribute("nonce", cspNonce);
        }
        document.head.appendChild(link);
        if (isCss) {
          return new Promise((res, rej) => {
            link.addEventListener("load", res);
            link.addEventListener(
              "error",
              () => rej(new Error(`Unable to preload CSS for ${dep}`))
            );
          });
        }
      })
    );
  }
  function handlePreloadError(err) {
    const e = new Event("vite:preloadError", {
      cancelable: true
    });
    e.payload = err;
    window.dispatchEvent(e);
    if (!e.defaultPrevented) {
      throw err;
    }
  }
  return promise.then((res) => {
    for (const item of res || []) {
      if (item.status !== "rejected") continue;
      handlePreloadError(item.reason);
    }
    return baseModule().catch(handlePreloadError);
  });
};
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function makeMap(str) {
  const map = /* @__PURE__ */ Object.create(null);
  for (const key of str.split(",")) map[key] = 1;
  return (val) => val in map;
}
const EMPTY_OBJ = {};
const EMPTY_ARR = [];
const NOOP = () => {
};
const NO = () => false;
const isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter
(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);
const isModelListener = (key) => key.startsWith("onUpdate:");
const extend = Object.assign;
const remove = (arr, el) => {
  const i = arr.indexOf(el);
  if (i > -1) {
    arr.splice(i, 1);
  }
};
const hasOwnProperty$1 = Object.prototype.hasOwnProperty;
const hasOwn = (val, key) => hasOwnProperty$1.call(val, key);
const isArray$2 = Array.isArray;
const isMap$1 = (val) => toTypeString(val) === "[object Map]";
const isSet$1 = (val) => toTypeString(val) === "[object Set]";
const isFunction = (val) => typeof val === "function";
const isString$1 = (val) => typeof val === "string";
const isSymbol$1 = (val) => typeof val === "symbol";
const isObject$1 = (val) => val !== null && typeof val === "object";
const isPromise = (val) => {
  return (isObject$1(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);
};
const objectToString = Object.prototype.toString;
const toTypeString = (value) => objectToString.call(value);
const toRawType = (value) => {
  return toTypeString(value).slice(8, -1);
};
const isPlainObject$1 = (val) => toTypeString(val) === "[object Object]";
const isIntegerKey = (key) => isString$1(key) && key !== "NaN" && key[0] !== "-" && "" + parseInt(key, 10) === key;
const isReservedProp = /* @__PURE__ */ makeMap(
  // the leading comma is intentional so empty string "" is also included
  ",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"
);
const cacheStringFunction = (fn) => {
  const cache = /* @__PURE__ */ Object.create(null);
  return (str) => {
    const hit = cache[str];
    return hit || (cache[str] = fn(str));
  };
};
const camelizeRE = /-(\w)/g;
const camelize = cacheStringFunction(
  (str) => {
    return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : "");
  }
);
const hyphenateRE = /\B([A-Z])/g;
const hyphenate = cacheStringFunction(
  (str) => str.replace(hyphenateRE, "-$1").toLowerCase()
);
const capitalize = cacheStringFunction((str) => {
  return str.charAt(0).toUpperCase() + str.slice(1);
});
const toHandlerKey = cacheStringFunction(
  (str) => {
    const s = str ? `on${capitalize(str)}` : ``;
    return s;
  }
);
const hasChanged = (value, oldValue) => !Object.is(value, oldValue);
const invokeArrayFns = (fns, ...arg) => {
  for (let i = 0; i < fns.length; i++) {
    fns[i](...arg);
  }
};
const def = (obj, key, value, writable = false) => {
  Object.defineProperty(obj, key, {
    configurable: true,
    enumerable: false,
    writable,
    value
  });
};
const looseToNumber = (val) => {
  const n = parseFloat(val);
  return isNaN(n) ? val : n;
};
const toNumber = (val) => {
  const n = isString$1(val) ? Number(val) : NaN;
  return isNaN(n) ? val : n;
};
let _globalThis;
const getGlobalThis = () => {
  return _globalThis || (_globalThis = typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
};
function normalizeStyle(value) {
  if (isArray$2(value)) {
    const res = {};
    for (let i = 0; i < value.length; i++) {
      const item = value[i];
      const normalized = isString$1(item) ? parseStringStyle(item) : normalizeStyle(item);
      if (normalized) {
        for (const key in normalized) {
          res[key] = normalized[key];
        }
      }
    }
    return res;
  } else if (isString$1(value) || isObject$1(value)) {
    return value;
  }
}
const listDelimiterRE = /;(?![^(]*\))/g;
const propertyDelimiterRE = /:([^]+)/;
const styleCommentRE = /\/\*[^]*?\*\//g;
function parseStringStyle(cssText) {
  const ret = {};
  cssText.replace(styleCommentRE, "").split(listDelimiterRE).forEach((item) => {
    if (item) {
      const tmp = item.split(propertyDelimiterRE);
      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());
    }
  });
  return ret;
}
function normalizeClass(value) {
  let res = "";
  if (isString$1(value)) {
    res = value;
  } else if (isArray$2(value)) {
    for (let i = 0; i < value.length; i++) {
      const normalized = normalizeClass(value[i]);
      if (normalized) {
        res += normalized + " ";
      }
    }
  } else if (isObject$1(value)) {
    for (const name in value) {
      if (value[name]) {
        res += name + " ";
      }
    }
  }
  return res.trim();
}
const specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;
const isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);
function includeBooleanAttr(value) {
  return !!value || value === "";
}
const isRef$2 = (val) => {
  return !!(val && val["__v_isRef"] === true);
};
const toDisplayString = (val) => {
  return isString$1(val) ? val : val == null ? "" : isArray$2(val) || isObject$1(val) && (val.toString === objectToString || !isFunction(val.toString)) ? isRef$2(val) ? toDisplayString(val.value) : JSON.stringify(val, replacer, 2) : String(val);
};
const replacer = (_key, val) => {
  if (isRef$2(val)) {
    return replacer(_key, val.value);
  } else if (isMap$1(val)) {
    return {
      [`Map(${val.size})`]: [...val.entries()].reduce(
        (entries, [key, val2], i) => {
          entries[stringifySymbol(key, i) + " =>"] = val2;
          return entries;
        },
        {}
      )
    };
  } else if (isSet$1(val)) {
    return {
      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))
    };
  } else if (isSymbol$1(val)) {
    return stringifySymbol(val);
  } else if (isObject$1(val) && !isArray$2(val) && !isPlainObject$1(val)) {
    return String(val);
  }
  return val;
};
const stringifySymbol = (v, i = "") => {
  var _a25;
  return (
    // Symbol.description in es2019+ so we need to cast here to pass
    // the lib: es2016 check
    isSymbol$1(v) ? `Symbol(${(_a25 = v.description) != null ? _a25 : i})` : v
  );
};
/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let activeEffectScope;
class EffectScope {
  constructor(detached = false) {
    this.detached = detached;
    this._active = true;
    this.effects = [];
    this.cleanups = [];
    this._isPaused = false;
    this.parent = activeEffectScope;
    if (!detached && activeEffectScope) {
      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(
        this
      ) - 1;
    }
  }
  get active() {
    return this._active;
  }
  pause() {
    if (this._active) {
      this._isPaused = true;
      let i, l;
      if (this.scopes) {
        for (i = 0, l = this.scopes.length; i < l; i++) {
          this.scopes[i].pause();
        }
      }
      for (i = 0, l = this.effects.length; i < l; i++) {
        this.effects[i].pause();
      }
    }
  }
  /**
   * Resumes the effect scope, including all child scopes and effects.
   */
  resume() {
    if (this._active) {
      if (this._isPaused) {
        this._isPaused = false;
        let i, l;
        if (this.scopes) {
          for (i = 0, l = this.scopes.length; i < l; i++) {
            this.scopes[i].resume();
          }
        }
        for (i = 0, l = this.effects.length; i < l; i++) {
          this.effects[i].resume();
        }
      }
    }
  }
  run(fn) {
    if (this._active) {
      const currentEffectScope = activeEffectScope;
      try {
        activeEffectScope = this;
        return fn();
      } finally {
        activeEffectScope = currentEffectScope;
      }
    }
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  on() {
    activeEffectScope = this;
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  off() {
    activeEffectScope = this.parent;
  }
  stop(fromParent) {
    if (this._active) {
      this._active = false;
      let i, l;
      for (i = 0, l = this.effects.length; i < l; i++) {
        this.effects[i].stop();
      }
      this.effects.length = 0;
      for (i = 0, l = this.cleanups.length; i < l; i++) {
        this.cleanups[i]();
      }
      this.cleanups.length = 0;
      if (this.scopes) {
        for (i = 0, l = this.scopes.length; i < l; i++) {
          this.scopes[i].stop(true);
        }
        this.scopes.length = 0;
      }
      if (!this.detached && this.parent && !fromParent) {
        const last = this.parent.scopes.pop();
        if (last && last !== this) {
          this.parent.scopes[this.index] = last;
          last.index = this.index;
        }
      }
      this.parent = void 0;
    }
  }
}
function effectScope(detached) {
  return new EffectScope(detached);
}
function getCurrentScope() {
  return activeEffectScope;
}
function onScopeDispose(fn, failSilently = false) {
  if (activeEffectScope) {
    activeEffectScope.cleanups.push(fn);
  }
}
let activeSub;
const pausedQueueEffects = /* @__PURE__ */ new WeakSet();
class ReactiveEffect {
  constructor(fn) {
    this.fn = fn;
    this.deps = void 0;
    this.depsTail = void 0;
    this.flags = 1 | 4;
    this.next = void 0;
    this.cleanup = void 0;
    this.scheduler = void 0;
    if (activeEffectScope && activeEffectScope.active) {
      activeEffectScope.effects.push(this);
    }
  }
  pause() {
    this.flags |= 64;
  }
  resume() {
    if (this.flags & 64) {
      this.flags &= -65;
      if (pausedQueueEffects.has(this)) {
        pausedQueueEffects.delete(this);
        this.trigger();
      }
    }
  }
  /**
   * @internal
   */
  notify() {
    if (this.flags & 2 && !(this.flags & 32)) {
      return;
    }
    if (!(this.flags & 8)) {
      batch(this);
    }
  }
  run() {
    if (!(this.flags & 1)) {
      return this.fn();
    }
    this.flags |= 2;
    cleanupEffect(this);
    prepareDeps(this);
    const prevEffect = activeSub;
    const prevShouldTrack = shouldTrack;
    activeSub = this;
    shouldTrack = true;
    try {
      return this.fn();
    } finally {
      cleanupDeps(this);
      activeSub = prevEffect;
      shouldTrack = prevShouldTrack;
      this.flags &= -3;
    }
  }
  stop() {
    if (this.flags & 1) {
      for (let link = this.deps; link; link = link.nextDep) {
        removeSub(link);
      }
      this.deps = this.depsTail = void 0;
      cleanupEffect(this);
      this.onStop && this.onStop();
      this.flags &= -2;
    }
  }
  trigger() {
    if (this.flags & 64) {
      pausedQueueEffects.add(this);
    } else if (this.scheduler) {
      this.scheduler();
    } else {
      this.runIfDirty();
    }
  }
  /**
   * @internal
   */
  runIfDirty() {
    if (isDirty(this)) {
      this.run();
    }
  }
  get dirty() {
    return isDirty(this);
  }
}
let batchDepth = 0;
let batchedSub;
let batchedComputed;
function batch(sub, isComputed2 = false) {
  sub.flags |= 8;
  if (isComputed2) {
    sub.next = batchedComputed;
    batchedComputed = sub;
    return;
  }
  sub.next = batchedSub;
  batchedSub = sub;
}
function startBatch() {
  batchDepth++;
}
function endBatch() {
  if (--batchDepth > 0) {
    return;
  }
  if (batchedComputed) {
    let e = batchedComputed;
    batchedComputed = void 0;
    while (e) {
      const next = e.next;
      e.next = void 0;
      e.flags &= -9;
      e = next;
    }
  }
  let error;
  while (batchedSub) {
    let e = batchedSub;
    batchedSub = void 0;
    while (e) {
      const next = e.next;
      e.next = void 0;
      e.flags &= -9;
      if (e.flags & 1) {
        try {
          ;
          e.trigger();
        } catch (err) {
          if (!error) error = err;
        }
      }
      e = next;
    }
  }
  if (error) throw error;
}
function prepareDeps(sub) {
  for (let link = sub.deps; link; link = link.nextDep) {
    link.version = -1;
    link.prevActiveLink = link.dep.activeLink;
    link.dep.activeLink = link;
  }
}
function cleanupDeps(sub) {
  let head;
  let tail = sub.depsTail;
  let link = tail;
  while (link) {
    const prev = link.prevDep;
    if (link.version === -1) {
      if (link === tail) tail = prev;
      removeSub(link);
      removeDep(link);
    } else {
      head = link;
    }
    link.dep.activeLink = link.prevActiveLink;
    link.prevActiveLink = void 0;
    link = prev;
  }
  sub.deps = head;
  sub.depsTail = tail;
}
function isDirty(sub) {
  for (let link = sub.deps; link; link = link.nextDep) {
    if (link.dep.version !== link.version || link.dep.computed && (refreshComputed(link.dep.computed) || link.dep.version !== link.version)) {
      return true;
    }
  }
  if (sub._dirty) {
    return true;
  }
  return false;
}
function refreshComputed(computed2) {
  if (computed2.flags & 4 && !(computed2.flags & 16)) {
    return;
  }
  computed2.flags &= -17;
  if (computed2.globalVersion === globalVersion) {
    return;
  }
  computed2.globalVersion = globalVersion;
  const dep = computed2.dep;
  computed2.flags |= 2;
  if (dep.version > 0 && !computed2.isSSR && computed2.deps && !isDirty(computed2)) {
    computed2.flags &= -3;
    return;
  }
  const prevSub = activeSub;
  const prevShouldTrack = shouldTrack;
  activeSub = computed2;
  shouldTrack = true;
  try {
    prepareDeps(computed2);
    const value = computed2.fn(computed2._value);
    if (dep.version === 0 || hasChanged(value, computed2._value)) {
      computed2._value = value;
      dep.version++;
    }
  } catch (err) {
    dep.version++;
    throw err;
  } finally {
    activeSub = prevSub;
    shouldTrack = prevShouldTrack;
    cleanupDeps(computed2);
    computed2.flags &= -3;
  }
}
function removeSub(link, soft = false) {
  const { dep, prevSub, nextSub } = link;
  if (prevSub) {
    prevSub.nextSub = nextSub;
    link.prevSub = void 0;
  }
  if (nextSub) {
    nextSub.prevSub = prevSub;
    link.nextSub = void 0;
  }
  if (dep.subs === link) {
    dep.subs = prevSub;
    if (!prevSub && dep.computed) {
      dep.computed.flags &= -5;
      for (let l = dep.computed.deps; l; l = l.nextDep) {
        removeSub(l, true);
      }
    }
  }
  if (!soft && !--dep.sc && dep.map) {
    dep.map.delete(dep.key);
  }
}
function removeDep(link) {
  const { prevDep, nextDep } = link;
  if (prevDep) {
    prevDep.nextDep = nextDep;
    link.prevDep = void 0;
  }
  if (nextDep) {
    nextDep.prevDep = prevDep;
    link.nextDep = void 0;
  }
}
let shouldTrack = true;
const trackStack = [];
function pauseTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = false;
}
function resetTracking() {
  const last = trackStack.pop();
  shouldTrack = last === void 0 ? true : last;
}
function cleanupEffect(e) {
  const { cleanup } = e;
  e.cleanup = void 0;
  if (cleanup) {
    const prevSub = activeSub;
    activeSub = void 0;
    try {
      cleanup();
    } finally {
      activeSub = prevSub;
    }
  }
}
let globalVersion = 0;
class Link {
  constructor(sub, dep) {
    this.sub = sub;
    this.dep = dep;
    this.version = dep.version;
    this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;
  }
}
class Dep {
  constructor(computed2) {
    this.computed = computed2;
    this.version = 0;
    this.activeLink = void 0;
    this.subs = void 0;
    this.map = void 0;
    this.key = void 0;
    this.sc = 0;
  }
  track(debugInfo) {
    if (!activeSub || !shouldTrack || activeSub === this.computed) {
      return;
    }
    let link = this.activeLink;
    if (link === void 0 || link.sub !== activeSub) {
      link = this.activeLink = new Link(activeSub, this);
      if (!activeSub.deps) {
        activeSub.deps = activeSub.depsTail = link;
      } else {
        link.prevDep = activeSub.depsTail;
        activeSub.depsTail.nextDep = link;
        activeSub.depsTail = link;
      }
      addSub(link);
    } else if (link.version === -1) {
      link.version = this.version;
      if (link.nextDep) {
        const next = link.nextDep;
        next.prevDep = link.prevDep;
        if (link.prevDep) {
          link.prevDep.nextDep = next;
        }
        link.prevDep = activeSub.depsTail;
        link.nextDep = void 0;
        activeSub.depsTail.nextDep = link;
        activeSub.depsTail = link;
        if (activeSub.deps === link) {
          activeSub.deps = next;
        }
      }
    }
    return link;
  }
  trigger(debugInfo) {
    this.version++;
    globalVersion++;
    this.notify(debugInfo);
  }
  notify(debugInfo) {
    startBatch();
    try {
      if (false) ;
      for (let link = this.subs; link; link = link.prevSub) {
        if (link.sub.notify()) {
          ;
          link.sub.dep.notify();
        }
      }
    } finally {
      endBatch();
    }
  }
}
function addSub(link) {
  link.dep.sc++;
  if (link.sub.flags & 4) {
    const computed2 = link.dep.computed;
    if (computed2 && !link.dep.subs) {
      computed2.flags |= 4 | 16;
      for (let l = computed2.deps; l; l = l.nextDep) {
        addSub(l);
      }
    }
    const currentTail = link.dep.subs;
    if (currentTail !== link) {
      link.prevSub = currentTail;
      if (currentTail) currentTail.nextSub = link;
    }
    link.dep.subs = link;
  }
}
const targetMap = /* @__PURE__ */ new WeakMap();
const ITERATE_KEY = Symbol(
  ""
);
const MAP_KEY_ITERATE_KEY = Symbol(
  ""
);
const ARRAY_ITERATE_KEY = Symbol(
  ""
);
function track(target2, type, key) {
  if (shouldTrack && activeSub) {
    let depsMap = targetMap.get(target2);
    if (!depsMap) {
      targetMap.set(target2, depsMap = /* @__PURE__ */ new Map());
    }
    let dep = depsMap.get(key);
    if (!dep) {
      depsMap.set(key, dep = new Dep());
      dep.map = depsMap;
      dep.key = key;
    }
    {
      dep.track();
    }
  }
}
function trigger$1(target2, type, key, newValue, oldValue, oldTarget) {
  const depsMap = targetMap.get(target2);
  if (!depsMap) {
    globalVersion++;
    return;
  }
  const run = (dep) => {
    if (dep) {
      {
        dep.trigger();
      }
    }
  };
  startBatch();
  if (type === "clear") {
    depsMap.forEach(run);
  } else {
    const targetIsArray = isArray$2(target2);
    const isArrayIndex = targetIsArray && isIntegerKey(key);
    if (targetIsArray && key === "length") {
      const newLength = Number(newValue);
      depsMap.forEach((dep, key2) => {
        if (key2 === "length" || key2 === ARRAY_ITERATE_KEY || !isSymbol$1(key2) && key2 >= newLength) {
          run(dep);
        }
      });
    } else {
      if (key !== void 0 || depsMap.has(void 0)) {
        run(depsMap.get(key));
      }
      if (isArrayIndex) {
        run(depsMap.get(ARRAY_ITERATE_KEY));
      }
      switch (type) {
        case "add":
          if (!targetIsArray) {
            run(depsMap.get(ITERATE_KEY));
            if (isMap$1(target2)) {
              run(depsMap.get(MAP_KEY_ITERATE_KEY));
            }
          } else if (isArrayIndex) {
            run(depsMap.get("length"));
          }
          break;
        case "delete":
          if (!targetIsArray) {
            run(depsMap.get(ITERATE_KEY));
            if (isMap$1(target2)) {
              run(depsMap.get(MAP_KEY_ITERATE_KEY));
            }
          }
          break;
        case "set":
          if (isMap$1(target2)) {
            run(depsMap.get(ITERATE_KEY));
          }
          break;
      }
    }
  }
  endBatch();
}
function getDepFromReactive(object, key) {
  const depMap = targetMap.get(object);
  return depMap && depMap.get(key);
}
function reactiveReadArray(array) {
  const raw = toRaw$1(array);
  if (raw === array) return raw;
  track(raw, "iterate", ARRAY_ITERATE_KEY);
  return isShallow(array) ? raw : raw.map(toReactive);
}
function shallowReadArray(arr) {
  track(arr = toRaw$1(arr), "iterate", ARRAY_ITERATE_KEY);
  return arr;
}
const arrayInstrumentations = {
  __proto__: null,
  [Symbol.iterator]() {
    return iterator(this, Symbol.iterator, toReactive);
  },
  concat(...args) {
    return reactiveReadArray(this).concat(
      ...args.map((x) => isArray$2(x) ? reactiveReadArray(x) : x)
    );
  },
  entries() {
    return iterator(this, "entries", (value) => {
      value[1] = toReactive(value[1]);
      return value;
    });
  },
  every(fn, thisArg) {
    return apply$1(this, "every", fn, thisArg, void 0, arguments);
  },
  filter(fn, thisArg) {
    return apply$1(this, "filter", fn, thisArg, (v) => v.map(toReactive), arguments);
  },
  find(fn, thisArg) {
    return apply$1(this, "find", fn, thisArg, toReactive, arguments);
  },
  findIndex(fn, thisArg) {
    return apply$1(this, "findIndex", fn, thisArg, void 0, arguments);
  },
  findLast(fn, thisArg) {
    return apply$1(this, "findLast", fn, thisArg, toReactive, arguments);
  },
  findLastIndex(fn, thisArg) {
    return apply$1(this, "findLastIndex", fn, thisArg, void 0, arguments);
  },
  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement
  forEach(fn, thisArg) {
    return apply$1(this, "forEach", fn, thisArg, void 0, arguments);
  },
  includes(...args) {
    return searchProxy(this, "includes", args);
  },
  indexOf(...args) {
    return searchProxy(this, "indexOf", args);
  },
  join(separator) {
    return reactiveReadArray(this).join(separator);
  },
  // keys() iterator only reads `length`, no optimisation required
  lastIndexOf(...args) {
    return searchProxy(this, "lastIndexOf", args);
  },
  map(fn, thisArg) {
    return apply$1(this, "map", fn, thisArg, void 0, arguments);
  },
  pop() {
    return noTracking(this, "pop");
  },
  push(...args) {
    return noTracking(this, "push", args);
  },
  reduce(fn, ...args) {
    return reduce(this, "reduce", fn, args);
  },
  reduceRight(fn, ...args) {
    return reduce(this, "reduceRight", fn, args);
  },
  shift() {
    return noTracking(this, "shift");
  },
  // slice could use ARRAY_ITERATE but also seems to beg for range tracking
  some(fn, thisArg) {
    return apply$1(this, "some", fn, thisArg, void 0, arguments);
  },
  splice(...args) {
    return noTracking(this, "splice", args);
  },
  toReversed() {
    return reactiveReadArray(this).toReversed();
  },
  toSorted(comparer) {
    return reactiveReadArray(this).toSorted(comparer);
  },
  toSpliced(...args) {
    return reactiveReadArray(this).toSpliced(...args);
  },
  unshift(...args) {
    return noTracking(this, "unshift", args);
  },
  values() {
    return iterator(this, "values", toReactive);
  }
};
function iterator(self2, method, wrapValue) {
  const arr = shallowReadArray(self2);
  const iter = arr[method]();
  if (arr !== self2 && !isShallow(self2)) {
    iter._next = iter.next;
    iter.next = () => {
      const result = iter._next();
      if (result.value) {
        result.value = wrapValue(result.value);
      }
      return result;
    };
  }
  return iter;
}
const arrayProto = Array.prototype;
function apply$1(self2, method, fn, thisArg, wrappedRetFn, args) {
  const arr = shallowReadArray(self2);
  const needsWrap = arr !== self2 && !isShallow(self2);
  const methodFn = arr[method];
  if (methodFn !== arrayProto[method]) {
    const result2 = methodFn.apply(self2, args);
    return needsWrap ? toReactive(result2) : result2;
  }
  let wrappedFn = fn;
  if (arr !== self2) {
    if (needsWrap) {
      wrappedFn = function(item, index) {
        return fn.call(this, toReactive(item), index, self2);
      };
    } else if (fn.length > 2) {
      wrappedFn = function(item, index) {
        return fn.call(this, item, index, self2);
      };
    }
  }
  const result = methodFn.call(arr, wrappedFn, thisArg);
  return needsWrap && wrappedRetFn ? wrappedRetFn(result) : result;
}
function reduce(self2, method, fn, args) {
  const arr = shallowReadArray(self2);
  let wrappedFn = fn;
  if (arr !== self2) {
    if (!isShallow(self2)) {
      wrappedFn = function(acc, item, index) {
        return fn.call(this, acc, toReactive(item), index, self2);
      };
    } else if (fn.length > 3) {
      wrappedFn = function(acc, item, index) {
        return fn.call(this, acc, item, index, self2);
      };
    }
  }
  return arr[method](wrappedFn, ...args);
}
function searchProxy(self2, method, args) {
  const arr = toRaw$1(self2);
  track(arr, "iterate", ARRAY_ITERATE_KEY);
  const res = arr[method](...args);
  if ((res === -1 || res === false) && isProxy(args[0])) {
    args[0] = toRaw$1(args[0]);
    return arr[method](...args);
  }
  return res;
}
function noTracking(self2, method, args = []) {
  pauseTracking();
  startBatch();
  const res = toRaw$1(self2)[method].apply(self2, args);
  endBatch();
  resetTracking();
  return res;
}
const isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);
const builtInSymbols = new Set(
  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== "arguments" && key !== "caller").map((key) => Symbol[key]).filter(isSymbol$1)
);
function hasOwnProperty(key) {
  if (!isSymbol$1(key)) key = String(key);
  const obj = toRaw$1(this);
  track(obj, "has", key);
  return obj.hasOwnProperty(key);
}
class BaseReactiveHandler {
  constructor(_isReadonly = false, _isShallow = false) {
    this._isReadonly = _isReadonly;
    this._isShallow = _isShallow;
  }
  get(target2, key, receiver) {
    if (key === "__v_skip") return target2["__v_skip"];
    const isReadonly2 = this._isReadonly, isShallow2 = this._isShallow;
    if (key === "__v_isReactive") {
      return !isReadonly2;
    } else if (key === "__v_isReadonly") {
      return isReadonly2;
    } else if (key === "__v_isShallow") {
      return isShallow2;
    } else if (key === "__v_raw") {
      if (receiver === (isReadonly2 ? isShallow2 ? shallowReadonlyMap : readonlyMap : isShallow2 ? shallowReactiveMap : reactiveMap).get(target2) || // receiver is not the reactive proxy, but has the same prototype
      // this means the receiver is a user proxy of the reactive proxy
      Object.getPrototypeOf(target2) === Object.getPrototypeOf(receiver)) {
        return target2;
      }
      return;
    }
    const targetIsArray = isArray$2(target2);
    if (!isReadonly2) {
      let fn;
      if (targetIsArray && (fn = arrayInstrumentations[key])) {
        return fn;
      }
      if (key === "hasOwnProperty") {
        return hasOwnProperty;
      }
    }
    const res = Reflect.get(
      target2,
      key,
      // if this is a proxy wrapping a ref, return methods using the raw ref
      // as receiver so that we don't have to call `toRaw` on the ref in all
      // its class methods
      isRef$1(target2) ? target2 : receiver
    );
    if (isSymbol$1(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {
      return res;
    }
    if (!isReadonly2) {
      track(target2, "get", key);
    }
    if (isShallow2) {
      return res;
    }
    if (isRef$1(res)) {
      return targetIsArray && isIntegerKey(key) ? res : res.value;
    }
    if (isObject$1(res)) {
      return isReadonly2 ? readonly(res) : reactive(res);
    }
    return res;
  }
}
class MutableReactiveHandler extends BaseReactiveHandler {
  constructor(isShallow2 = false) {
    super(false, isShallow2);
  }
  set(target2, key, value, receiver) {
    let oldValue = target2[key];
    if (!this._isShallow) {
      const isOldValueReadonly = isReadonly$1(oldValue);
      if (!isShallow(value) && !isReadonly$1(value)) {
        oldValue = toRaw$1(oldValue);
        value = toRaw$1(value);
      }
      if (!isArray$2(target2) && isRef$1(oldValue) && !isRef$1(value)) {
        if (isOldValueReadonly) {
          return false;
        } else {
          oldValue.value = value;
          return true;
        }
      }
    }
    const hadKey = isArray$2(target2) && isIntegerKey(key) ? Number(key) < target2.length : hasOwn(target2, key);
    const result = Reflect.set(
      target2,
      key,
      value,
      isRef$1(target2) ? target2 : receiver
    );
    if (target2 === toRaw$1(receiver)) {
      if (!hadKey) {
        trigger$1(target2, "add", key, value);
      } else if (hasChanged(value, oldValue)) {
        trigger$1(target2, "set", key, value);
      }
    }
    return result;
  }
  deleteProperty(target2, key) {
    const hadKey = hasOwn(target2, key);
    target2[key];
    const result = Reflect.deleteProperty(target2, key);
    if (result && hadKey) {
      trigger$1(target2, "delete", key, void 0);
    }
    return result;
  }
  has(target2, key) {
    const result = Reflect.has(target2, key);
    if (!isSymbol$1(key) || !builtInSymbols.has(key)) {
      track(target2, "has", key);
    }
    return result;
  }
  ownKeys(target2) {
    track(
      target2,
      "iterate",
      isArray$2(target2) ? "length" : ITERATE_KEY
    );
    return Reflect.ownKeys(target2);
  }
}
class ReadonlyReactiveHandler extends BaseReactiveHandler {
  constructor(isShallow2 = false) {
    super(true, isShallow2);
  }
  set(target2, key) {
    return true;
  }
  deleteProperty(target2, key) {
    return true;
  }
}
const mutableHandlers = /* @__PURE__ */ new MutableReactiveHandler();
const readonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler();
const shallowReactiveHandlers = /* @__PURE__ */ new MutableReactiveHandler(true);
const shallowReadonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler(true);
const toShallow = (value) => value;
const getProto = (v) => Reflect.getPrototypeOf(v);
function createIterableMethod(method, isReadonly2, isShallow2) {
  return function(...args) {
    const target2 = this["__v_raw"];
    const rawTarget = toRaw$1(target2);
    const targetIsMap = isMap$1(rawTarget);
    const isPair = method === "entries" || method === Symbol.iterator && targetIsMap;
    const isKeyOnly = method === "keys" && targetIsMap;
    const innerIterator = target2[method](...args);
    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
    !isReadonly2 && track(
      rawTarget,
      "iterate",
      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY
    );
    return {
      // iterator protocol
      next() {
        const { value, done } = innerIterator.next();
        return done ? { value, done } : {
          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),
          done
        };
      },
      // iterable protocol
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function createReadonlyMethod(type) {
  return function(...args) {
    return type === "delete" ? false : type === "clear" ? void 0 : this;
  };
}
function createInstrumentations(readonly2, shallow) {
  const instrumentations = {
    get(key) {
      const target2 = this["__v_raw"];
      const rawTarget = toRaw$1(target2);
      const rawKey = toRaw$1(key);
      if (!readonly2) {
        if (hasChanged(key, rawKey)) {
          track(rawTarget, "get", key);
        }
        track(rawTarget, "get", rawKey);
      }
      const { has } = getProto(rawTarget);
      const wrap = shallow ? toShallow : readonly2 ? toReadonly : toReactive;
      if (has.call(rawTarget, key)) {
        return wrap(target2.get(key));
      } else if (has.call(rawTarget, rawKey)) {
        return wrap(target2.get(rawKey));
      } else if (target2 !== rawTarget) {
        target2.get(key);
      }
    },
    get size() {
      const target2 = this["__v_raw"];
      !readonly2 && track(toRaw$1(target2), "iterate", ITERATE_KEY);
      return Reflect.get(target2, "size", target2);
    },
    has(key) {
      const target2 = this["__v_raw"];
      const rawTarget = toRaw$1(target2);
      const rawKey = toRaw$1(key);
      if (!readonly2) {
        if (hasChanged(key, rawKey)) {
          track(rawTarget, "has", key);
        }
        track(rawTarget, "has", rawKey);
      }
      return key === rawKey ? target2.has(key) : target2.has(key) || target2.has(rawKey);
    },
    forEach(callback, thisArg) {
      const observed = this;
      const target2 = observed["__v_raw"];
      const rawTarget = toRaw$1(target2);
      const wrap = shallow ? toShallow : readonly2 ? toReadonly : toReactive;
      !readonly2 && track(rawTarget, "iterate", ITERATE_KEY);
      return target2.forEach((value, key) => {
        return callback.call(thisArg, wrap(value), wrap(key), observed);
      });
    }
  };
  extend(
    instrumentations,
    readonly2 ? {
      add: createReadonlyMethod("add"),
      set: createReadonlyMethod("set"),
      delete: createReadonlyMethod("delete"),
      clear: createReadonlyMethod("clear")
    } : {
      add(value) {
        if (!shallow && !isShallow(value) && !isReadonly$1(value)) {
          value = toRaw$1(value);
        }
        const target2 = toRaw$1(this);
        const proto = getProto(target2);
        const hadKey = proto.has.call(target2, value);
        if (!hadKey) {
          target2.add(value);
          trigger$1(target2, "add", value, value);
        }
        return this;
      },
      set(key, value) {
        if (!shallow && !isShallow(value) && !isReadonly$1(value)) {
          value = toRaw$1(value);
        }
        const target2 = toRaw$1(this);
        const { has, get } = getProto(target2);
        let hadKey = has.call(target2, key);
        if (!hadKey) {
          key = toRaw$1(key);
          hadKey = has.call(target2, key);
        }
        const oldValue = get.call(target2, key);
        target2.set(key, value);
        if (!hadKey) {
          trigger$1(target2, "add", key, value);
        } else if (hasChanged(value, oldValue)) {
          trigger$1(target2, "set", key, value);
        }
        return this;
      },
      delete(key) {
        const target2 = toRaw$1(this);
        const { has, get } = getProto(target2);
        let hadKey = has.call(target2, key);
        if (!hadKey) {
          key = toRaw$1(key);
          hadKey = has.call(target2, key);
        }
        get ? get.call(target2, key) : void 0;
        const result = target2.delete(key);
        if (hadKey) {
          trigger$1(target2, "delete", key, void 0);
        }
        return result;
      },
      clear() {
        const target2 = toRaw$1(this);
        const hadItems = target2.size !== 0;
        const result = target2.clear();
        if (hadItems) {
          trigger$1(
            target2,
            "clear",
            void 0,
            void 0
          );
        }
        return result;
      }
    }
  );
  const iteratorMethods = [
    "keys",
    "values",
    "entries",
    Symbol.iterator
  ];
  iteratorMethods.forEach((method) => {
    instrumentations[method] = createIterableMethod(method, readonly2, shallow);
  });
  return instrumentations;
}
function createInstrumentationGetter(isReadonly2, shallow) {
  const instrumentations = createInstrumentations(isReadonly2, shallow);
  return (target2, key, receiver) => {
    if (key === "__v_isReactive") {
      return !isReadonly2;
    } else if (key === "__v_isReadonly") {
      return isReadonly2;
    } else if (key === "__v_raw") {
      return target2;
    }
    return Reflect.get(
      hasOwn(instrumentations, key) && key in target2 ? instrumentations : target2,
      key,
      receiver
    );
  };
}
const mutableCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, false)
};
const shallowCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, true)
};
const readonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, false)
};
const shallowReadonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, true)
};
const reactiveMap = /* @__PURE__ */ new WeakMap();
const shallowReactiveMap = /* @__PURE__ */ new WeakMap();
const readonlyMap = /* @__PURE__ */ new WeakMap();
const shallowReadonlyMap = /* @__PURE__ */ new WeakMap();
function targetTypeMap(rawType) {
  switch (rawType) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function getTargetType(value) {
  return value["__v_skip"] || !Object.isExtensible(value) ? 0 : targetTypeMap(toRawType(value));
}
function reactive(target2) {
  if (isReadonly$1(target2)) {
    return target2;
  }
  return createReactiveObject(
    target2,
    false,
    mutableHandlers,
    mutableCollectionHandlers,
    reactiveMap
  );
}
function shallowReactive(target2) {
  return createReactiveObject(
    target2,
    false,
    shallowReactiveHandlers,
    shallowCollectionHandlers,
    shallowReactiveMap
  );
}
function readonly(target2) {
  return createReactiveObject(
    target2,
    true,
    readonlyHandlers,
    readonlyCollectionHandlers,
    readonlyMap
  );
}
function shallowReadonly(target2) {
  return createReactiveObject(
    target2,
    true,
    shallowReadonlyHandlers,
    shallowReadonlyCollectionHandlers,
    shallowReadonlyMap
  );
}
function createReactiveObject(target2, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {
  if (!isObject$1(target2)) {
    return target2;
  }
  if (target2["__v_raw"] && !(isReadonly2 && target2["__v_isReactive"])) {
    return target2;
  }
  const existingProxy = proxyMap.get(target2);
  if (existingProxy) {
    return existingProxy;
  }
  const targetType = getTargetType(target2);
  if (targetType === 0) {
    return target2;
  }
  const proxy = new Proxy(
    target2,
    targetType === 2 ? collectionHandlers : baseHandlers
  );
  proxyMap.set(target2, proxy);
  return proxy;
}
function isReactive$1(value) {
  if (isReadonly$1(value)) {
    return isReactive$1(value["__v_raw"]);
  }
  return !!(value && value["__v_isReactive"]);
}
function isReadonly$1(value) {
  return !!(value && value["__v_isReadonly"]);
}
function isShallow(value) {
  return !!(value && value["__v_isShallow"]);
}
function isProxy(value) {
  return value ? !!value["__v_raw"] : false;
}
function toRaw$1(observed) {
  const raw = observed && observed["__v_raw"];
  return raw ? toRaw$1(raw) : observed;
}
function markRaw(value) {
  if (!hasOwn(value, "__v_skip") && Object.isExtensible(value)) {
    def(value, "__v_skip", true);
  }
  return value;
}
const toReactive = (value) => isObject$1(value) ? reactive(value) : value;
const toReadonly = (value) => isObject$1(value) ? readonly(value) : value;
function isRef$1(r) {
  return r ? r["__v_isRef"] === true : false;
}
function ref(value) {
  return createRef(value, false);
}
function shallowRef(value) {
  return createRef(value, true);
}
function createRef(rawValue, shallow) {
  if (isRef$1(rawValue)) {
    return rawValue;
  }
  return new RefImpl(rawValue, shallow);
}
class RefImpl {
  constructor(value, isShallow2) {
    this.dep = new Dep();
    this["__v_isRef"] = true;
    this["__v_isShallow"] = false;
    this._rawValue = isShallow2 ? value : toRaw$1(value);
    this._value = isShallow2 ? value : toReactive(value);
    this["__v_isShallow"] = isShallow2;
  }
  get value() {
    {
      this.dep.track();
    }
    return this._value;
  }
  set value(newValue) {
    const oldValue = this._rawValue;
    const useDirectValue = this["__v_isShallow"] || isShallow(newValue) || isReadonly$1(newValue);
    newValue = useDirectValue ? newValue : toRaw$1(newValue);
    if (hasChanged(newValue, oldValue)) {
      this._rawValue = newValue;
      this._value = useDirectValue ? newValue : toReactive(newValue);
      {
        this.dep.trigger();
      }
    }
  }
}
function unref(ref2) {
  return isRef$1(ref2) ? ref2.value : ref2;
}
const shallowUnwrapHandlers = {
  get: (target2, key, receiver) => key === "__v_raw" ? target2 : unref(Reflect.get(target2, key, receiver)),
  set: (target2, key, value, receiver) => {
    const oldValue = target2[key];
    if (isRef$1(oldValue) && !isRef$1(value)) {
      oldValue.value = value;
      return true;
    } else {
      return Reflect.set(target2, key, value, receiver);
    }
  }
};
function proxyRefs(objectWithRefs) {
  return isReactive$1(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);
}
function toRefs(object) {
  const ret = isArray$2(object) ? new Array(object.length) : {};
  for (const key in object) {
    ret[key] = propertyToRef(object, key);
  }
  return ret;
}
class ObjectRefImpl {
  constructor(_object, _key, _defaultValue) {
    this._object = _object;
    this._key = _key;
    this._defaultValue = _defaultValue;
    this["__v_isRef"] = true;
    this._value = void 0;
  }
  get value() {
    const val = this._object[this._key];
    return this._value = val === void 0 ? this._defaultValue : val;
  }
  set value(newVal) {
    this._object[this._key] = newVal;
  }
  get dep() {
    return getDepFromReactive(toRaw$1(this._object), this._key);
  }
}
function propertyToRef(source, key, defaultValue) {
  const val = source[key];
  return isRef$1(val) ? val : new ObjectRefImpl(source, key, defaultValue);
}
class ComputedRefImpl {
  constructor(fn, setter, isSSR) {
    this.fn = fn;
    this.setter = setter;
    this._value = void 0;
    this.dep = new Dep(this);
    this.__v_isRef = true;
    this.deps = void 0;
    this.depsTail = void 0;
    this.flags = 16;
    this.globalVersion = globalVersion - 1;
    this.next = void 0;
    this.effect = this;
    this["__v_isReadonly"] = !setter;
    this.isSSR = isSSR;
  }
  /**
   * @internal
   */
  notify() {
    this.flags |= 16;
    if (!(this.flags & 8) && // avoid infinite self recursion
    activeSub !== this) {
      batch(this, true);
      return true;
    }
  }
  get value() {
    const link = this.dep.track();
    refreshComputed(this);
    if (link) {
      link.version = this.dep.version;
    }
    return this._value;
  }
  set value(newValue) {
    if (this.setter) {
      this.setter(newValue);
    }
  }
}
function computed$1(getterOrOptions, debugOptions, isSSR = false) {
  let getter;
  let setter;
  if (isFunction(getterOrOptions)) {
    getter = getterOrOptions;
  } else {
    getter = getterOrOptions.get;
    setter = getterOrOptions.set;
  }
  const cRef = new ComputedRefImpl(getter, setter, isSSR);
  return cRef;
}
const INITIAL_WATCHER_VALUE = {};
const cleanupMap = /* @__PURE__ */ new WeakMap();
let activeWatcher = void 0;
function onWatcherCleanup(cleanupFn, failSilently = false, owner = activeWatcher) {
  if (owner) {
    let cleanups = cleanupMap.get(owner);
    if (!cleanups) cleanupMap.set(owner, cleanups = []);
    cleanups.push(cleanupFn);
  }
}
function watch$1(source, cb, options = EMPTY_OBJ) {
  const { immediate, deep, once, scheduler, augmentJob, call } = options;
  const reactiveGetter = (source2) => {
    if (deep) return source2;
    if (isShallow(source2) || deep === false || deep === 0)
      return traverse$1(source2, 1);
    return traverse$1(source2);
  };
  let effect2;
  let getter;
  let cleanup;
  let boundCleanup;
  let forceTrigger = false;
  let isMultiSource = false;
  if (isRef$1(source)) {
    getter = () => source.value;
    forceTrigger = isShallow(source);
  } else if (isReactive$1(source)) {
    getter = () => reactiveGetter(source);
    forceTrigger = true;
  } else if (isArray$2(source)) {
    isMultiSource = true;
    forceTrigger = source.some((s) => isReactive$1(s) || isShallow(s));
    getter = () => source.map((s) => {
      if (isRef$1(s)) {
        return s.value;
      } else if (isReactive$1(s)) {
        return reactiveGetter(s);
      } else if (isFunction(s)) {
        return call ? call(s, 2) : s();
      } else ;
    });
  } else if (isFunction(source)) {
    if (cb) {
      getter = call ? () => call(source, 2) : source;
    } else {
      getter = () => {
        if (cleanup) {
          pauseTracking();
          try {
            cleanup();
          } finally {
            resetTracking();
          }
        }
        const currentEffect = activeWatcher;
        activeWatcher = effect2;
        try {
          return call ? call(source, 3, [boundCleanup]) : source(boundCleanup);
        } finally {
          activeWatcher = currentEffect;
        }
      };
    }
  } else {
    getter = NOOP;
  }
  if (cb && deep) {
    const baseGetter = getter;
    const depth = deep === true ? Infinity : deep;
    getter = () => traverse$1(baseGetter(), depth);
  }
  const scope = getCurrentScope();
  const watchHandle = () => {
    effect2.stop();
    if (scope && scope.active) {
      remove(scope.effects, effect2);
    }
  };
  if (once && cb) {
    const _cb = cb;
    cb = (...args) => {
      _cb(...args);
      watchHandle();
    };
  }
  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;
  const job = (immediateFirstRun) => {
    if (!(effect2.flags & 1) || !effect2.dirty && !immediateFirstRun) {
      return;
    }
    if (cb) {
      const newValue = effect2.run();
      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue))) {
        if (cleanup) {
          cleanup();
        }
        const currentWatcher = activeWatcher;
        activeWatcher = effect2;
        try {
          const args = [
            newValue,
            // pass undefined as the old value when it's changed for the first time
            oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,
            boundCleanup
          ];
          call ? call(cb, 3, args) : (
            // @ts-expect-error
            cb(...args)
          );
          oldValue = newValue;
        } finally {
          activeWatcher = currentWatcher;
        }
      }
    } else {
      effect2.run();
    }
  };
  if (augmentJob) {
    augmentJob(job);
  }
  effect2 = new ReactiveEffect(getter);
  effect2.scheduler = scheduler ? () => scheduler(job, false) : job;
  boundCleanup = (fn) => onWatcherCleanup(fn, false, effect2);
  cleanup = effect2.onStop = () => {
    const cleanups = cleanupMap.get(effect2);
    if (cleanups) {
      if (call) {
        call(cleanups, 4);
      } else {
        for (const cleanup2 of cleanups) cleanup2();
      }
      cleanupMap.delete(effect2);
    }
  };
  if (cb) {
    if (immediate) {
      job(true);
    } else {
      oldValue = effect2.run();
    }
  } else if (scheduler) {
    scheduler(job.bind(null, true), true);
  } else {
    effect2.run();
  }
  watchHandle.pause = effect2.pause.bind(effect2);
  watchHandle.resume = effect2.resume.bind(effect2);
  watchHandle.stop = watchHandle;
  return watchHandle;
}
function traverse$1(value, depth = Infinity, seen2) {
  if (depth <= 0 || !isObject$1(value) || value["__v_skip"]) {
    return value;
  }
  seen2 = seen2 || /* @__PURE__ */ new Set();
  if (seen2.has(value)) {
    return value;
  }
  seen2.add(value);
  depth--;
  if (isRef$1(value)) {
    traverse$1(value.value, depth, seen2);
  } else if (isArray$2(value)) {
    for (let i = 0; i < value.length; i++) {
      traverse$1(value[i], depth, seen2);
    }
  } else if (isSet$1(value) || isMap$1(value)) {
    value.forEach((v) => {
      traverse$1(v, depth, seen2);
    });
  } else if (isPlainObject$1(value)) {
    for (const key in value) {
      traverse$1(value[key], depth, seen2);
    }
    for (const key of Object.getOwnPropertySymbols(value)) {
      if (Object.prototype.propertyIsEnumerable.call(value, key)) {
        traverse$1(value[key], depth, seen2);
      }
    }
  }
  return value;
}
/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
const stack = [];
let isWarning = false;
function warn$1(msg, ...args) {
  if (isWarning) return;
  isWarning = true;
  pauseTracking();
  const instance = stack.length ? stack[stack.length - 1].component : null;
  const appWarnHandler = instance && instance.appContext.config.warnHandler;
  const trace = getComponentTrace();
  if (appWarnHandler) {
    callWithErrorHandling(
      appWarnHandler,
      instance,
      11,
      [
        // eslint-disable-next-line no-restricted-syntax
        msg + args.map((a) => {
          var _a25, _b25;
          return (_b25 = (_a25 = a.toString) == null ? void 0 : _a25.call(a)) != null ? _b25 : JSON.stringify(a);
        }).join(""),
        instance && instance.proxy,
        trace.map(
          ({ vnode }) => `at <${formatComponentName(instance, vnode.type)}>`
        ).join("\n"),
        trace
      ]
    );
  } else {
    const warnArgs = [`[Vue warn]: ${msg}`, ...args];
    if (trace.length && // avoid spamming console during tests
    true) {
      warnArgs.push(`
`, ...formatTrace(trace));
    }
    console.warn(...warnArgs);
  }
  resetTracking();
  isWarning = false;
}
function getComponentTrace() {
  let currentVNode = stack[stack.length - 1];
  if (!currentVNode) {
    return [];
  }
  const normalizedStack = [];
  while (currentVNode) {
    const last = normalizedStack[0];
    if (last && last.vnode === currentVNode) {
      last.recurseCount++;
    } else {
      normalizedStack.push({
        vnode: currentVNode,
        recurseCount: 0
      });
    }
    const parentInstance = currentVNode.component && currentVNode.component.parent;
    currentVNode = parentInstance && parentInstance.vnode;
  }
  return normalizedStack;
}
function formatTrace(trace) {
  const logs = [];
  trace.forEach((entry, i) => {
    logs.push(...i === 0 ? [] : [`
`], ...formatTraceEntry(entry));
  });
  return logs;
}
function formatTraceEntry({ vnode, recurseCount }) {
  const postfix = recurseCount > 0 ? `... (${recurseCount} recursive calls)` : ``;
  const isRoot = vnode.component ? vnode.component.parent == null : false;
  const open2 = ` at <${formatComponentName(
    vnode.component,
    vnode.type,
    isRoot
  )}`;
  const close = `>` + postfix;
  return vnode.props ? [open2, ...formatProps(vnode.props), close] : [open2 + close];
}
function formatProps(props2) {
  const res = [];
  const keys = Object.keys(props2);
  keys.slice(0, 3).forEach((key) => {
    res.push(...formatProp(key, props2[key]));
  });
  if (keys.length > 3) {
    res.push(` ...`);
  }
  return res;
}
function formatProp(key, value, raw) {
  if (isString$1(value)) {
    value = JSON.stringify(value);
    return raw ? value : [`${key}=${value}`];
  } else if (typeof value === "number" || typeof value === "boolean" || value == null) {
    return raw ? value : [`${key}=${value}`];
  } else if (isRef$1(value)) {
    value = formatProp(key, toRaw$1(value.value), true);
    return raw ? value : [`${key}=Ref<`, value, `>`];
  } else if (isFunction(value)) {
    return [`${key}=fn${value.name ? `<${value.name}>` : ``}`];
  } else {
    value = toRaw$1(value);
    return raw ? value : [`${key}=`, value];
  }
}
function callWithErrorHandling(fn, instance, type, args) {
  try {
    return args ? fn(...args) : fn();
  } catch (err) {
    handleError(err, instance, type);
  }
}
function callWithAsyncErrorHandling(fn, instance, type, args) {
  if (isFunction(fn)) {
    const res = callWithErrorHandling(fn, instance, type, args);
    if (res && isPromise(res)) {
      res.catch((err) => {
        handleError(err, instance, type);
      });
    }
    return res;
  }
  if (isArray$2(fn)) {
    const values = [];
    for (let i = 0; i < fn.length; i++) {
      values.push(callWithAsyncErrorHandling(fn[i], instance, type, args));
    }
    return values;
  }
}
function handleError(err, instance, type, throwInDev = true) {
  const contextVNode = instance ? instance.vnode : null;
  const { errorHandler, throwUnhandledErrorInProduction } = instance && instance.appContext.config || EMPTY_OBJ;
  if (instance) {
    let cur = instance.parent;
    const exposedInstance = instance.proxy;
    const errorInfo = `https://vuejs.org/error-reference/#runtime-${type}`;
    while (cur) {
      const errorCapturedHooks = cur.ec;
      if (errorCapturedHooks) {
        for (let i = 0; i < errorCapturedHooks.length; i++) {
          if (errorCapturedHooks[i](err, exposedInstance, errorInfo) === false) {
            return;
          }
        }
      }
      cur = cur.parent;
    }
    if (errorHandler) {
      pauseTracking();
      callWithErrorHandling(errorHandler, null, 10, [
        err,
        exposedInstance,
        errorInfo
      ]);
      resetTracking();
      return;
    }
  }
  logError$1(err, type, contextVNode, throwInDev, throwUnhandledErrorInProduction);
}
function logError$1(err, type, contextVNode, throwInDev = true, throwInProd = false) {
  if (throwInProd) {
    throw err;
  } else {
    console.error(err);
  }
}
const queue$1 = [];
let flushIndex = -1;
const pendingPostFlushCbs = [];
let activePostFlushCbs = null;
let postFlushIndex = 0;
const resolvedPromise = /* @__PURE__ */ Promise.resolve();
let currentFlushPromise = null;
function nextTick(fn) {
  const p2 = currentFlushPromise || resolvedPromise;
  return fn ? p2.then(this ? fn.bind(this) : fn) : p2;
}
function findInsertionIndex$1(id) {
  let start2 = flushIndex + 1;
  let end = queue$1.length;
  while (start2 < end) {
    const middle = start2 + end >>> 1;
    const middleJob = queue$1[middle];
    const middleJobId = getId$1(middleJob);
    if (middleJobId < id || middleJobId === id && middleJob.flags & 2) {
      start2 = middle + 1;
    } else {
      end = middle;
    }
  }
  return start2;
}
function queueJob(job) {
  if (!(job.flags & 1)) {
    const jobId = getId$1(job);
    const lastJob = queue$1[queue$1.length - 1];
    if (!lastJob || // fast path when the job id is larger than the tail
    !(job.flags & 2) && jobId >= getId$1(lastJob)) {
      queue$1.push(job);
    } else {
      queue$1.splice(findInsertionIndex$1(jobId), 0, job);
    }
    job.flags |= 1;
    queueFlush();
  }
}
function queueFlush() {
  if (!currentFlushPromise) {
    currentFlushPromise = resolvedPromise.then(flushJobs);
  }
}
function queuePostFlushCb(cb) {
  if (!isArray$2(cb)) {
    if (activePostFlushCbs && cb.id === -1) {
      activePostFlushCbs.splice(postFlushIndex + 1, 0, cb);
    } else if (!(cb.flags & 1)) {
      pendingPostFlushCbs.push(cb);
      cb.flags |= 1;
    }
  } else {
    pendingPostFlushCbs.push(...cb);
  }
  queueFlush();
}
function flushPreFlushCbs(instance, seen2, i = flushIndex + 1) {
  for (; i < queue$1.length; i++) {
    const cb = queue$1[i];
    if (cb && cb.flags & 2) {
      if (instance && cb.id !== instance.uid) {
        continue;
      }
      queue$1.splice(i, 1);
      i--;
      if (cb.flags & 4) {
        cb.flags &= -2;
      }
      cb();
      if (!(cb.flags & 4)) {
        cb.flags &= -2;
      }
    }
  }
}
function flushPostFlushCbs(seen2) {
  if (pendingPostFlushCbs.length) {
    const deduped = [...new Set(pendingPostFlushCbs)].sort(
      (a, b) => getId$1(a) - getId$1(b)
    );
    pendingPostFlushCbs.length = 0;
    if (activePostFlushCbs) {
      activePostFlushCbs.push(...deduped);
      return;
    }
    activePostFlushCbs = deduped;
    for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {
      const cb = activePostFlushCbs[postFlushIndex];
      if (cb.flags & 4) {
        cb.flags &= -2;
      }
      if (!(cb.flags & 8)) cb();
      cb.flags &= -2;
    }
    activePostFlushCbs = null;
    postFlushIndex = 0;
  }
}
const getId$1 = (job) => job.id == null ? job.flags & 2 ? -1 : Infinity : job.id;
function flushJobs(seen2) {
  try {
    for (flushIndex = 0; flushIndex < queue$1.length; flushIndex++) {
      const job = queue$1[flushIndex];
      if (job && !(job.flags & 8)) {
        if (false) ;
        if (job.flags & 4) {
          job.flags &= ~1;
        }
        callWithErrorHandling(
          job,
          job.i,
          job.i ? 15 : 14
        );
        if (!(job.flags & 4)) {
          job.flags &= ~1;
        }
      }
    }
  } finally {
    for (; flushIndex < queue$1.length; flushIndex++) {
      const job = queue$1[flushIndex];
      if (job) {
        job.flags &= -2;
      }
    }
    flushIndex = -1;
    queue$1.length = 0;
    flushPostFlushCbs();
    currentFlushPromise = null;
    if (queue$1.length || pendingPostFlushCbs.length) {
      flushJobs();
    }
  }
}
let devtools$1;
let buffer = [];
let devtoolsNotInstalled = false;
function emit$1(event, ...args) {
  if (devtools$1) {
    devtools$1.emit(event, ...args);
  } else if (!devtoolsNotInstalled) {
    buffer.push({ event, args });
  }
}
function setDevtoolsHook$1(hook2, target2) {
  var _a25, _b25;
  devtools$1 = hook2;
  if (devtools$1) {
    devtools$1.enabled = true;
    buffer.forEach(({ event, args }) => devtools$1.emit(event, ...args));
    buffer = [];
  } else if (
    // handle late devtools injection - only do this if we are in an actual
    // browser environment to avoid the timer handle stalling test runner exit
    // (#4815)
    typeof window !== "undefined" && // some envs mock window but not fully
    window.HTMLElement && // also exclude jsdom
    // eslint-disable-next-line no-restricted-syntax
    !((_b25 = (_a25 = window.navigator) == null ? void 0 : _a25.userAgent) == null ? void 0 : _b25.includes("jsdom"))
  ) {
    const replay = target2.__VUE_DEVTOOLS_HOOK_REPLAY__ = target2.__VUE_DEVTOOLS_HOOK_REPLAY__ || [];
    replay.push((newHook) => {
      setDevtoolsHook$1(newHook, target2);
    });
    setTimeout(() => {
      if (!devtools$1) {
        target2.__VUE_DEVTOOLS_HOOK_REPLAY__ = null;
        devtoolsNotInstalled = true;
        buffer = [];
      }
    }, 3e3);
  } else {
    devtoolsNotInstalled = true;
    buffer = [];
  }
}
function devtoolsInitApp(app2, version2) {
  emit$1("app:init", app2, version2, {
    Fragment,
    Text,
    Comment,
    Static
  });
}
function devtoolsUnmountApp(app2) {
  emit$1("app:unmount", app2);
}
const devtoolsComponentAdded = /* @__PURE__ */ createDevtoolsComponentHook(
  "component:added"
  /* COMPONENT_ADDED */
);
const devtoolsComponentUpdated = /* @__PURE__ */ createDevtoolsComponentHook(
  "component:updated"
  /* COMPONENT_UPDATED */
);
const _devtoolsComponentRemoved = /* @__PURE__ */ createDevtoolsComponentHook(
  "component:removed"
  /* COMPONENT_REMOVED */
);
const devtoolsComponentRemoved = (component) => {
  if (devtools$1 && typeof devtools$1.cleanupBuffer === "function" && // remove the component if it wasn't buffered
  !devtools$1.cleanupBuffer(component)) {
    _devtoolsComponentRemoved(component);
  }
};
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function createDevtoolsComponentHook(hook2) {
  return (component) => {
    emit$1(
      hook2,
      component.appContext.app,
      component.uid,
      component.parent ? component.parent.uid : void 0,
      component
    );
  };
}
function devtoolsComponentEmit(component, event, params) {
  emit$1(
    "component:emit",
    component.appContext.app,
    component,
    event,
    params
  );
}
let currentRenderingInstance = null;
let currentScopeId = null;
function setCurrentRenderingInstance(instance) {
  const prev = currentRenderingInstance;
  currentRenderingInstance = instance;
  currentScopeId = instance && instance.type.__scopeId || null;
  return prev;
}
function withCtx(fn, ctx = currentRenderingInstance, isNonScopedSlot) {
  if (!ctx) return fn;
  if (fn._n) {
    return fn;
  }
  const renderFnWithContext = (...args) => {
    if (renderFnWithContext._d) {
      setBlockTracking(-1);
    }
    const prevInstance = setCurrentRenderingInstance(ctx);
    let res;
    try {
      res = fn(...args);
    } finally {
      setCurrentRenderingInstance(prevInstance);
      if (renderFnWithContext._d) {
        setBlockTracking(1);
      }
    }
    {
      devtoolsComponentUpdated(ctx);
    }
    return res;
  };
  renderFnWithContext._n = true;
  renderFnWithContext._c = true;
  renderFnWithContext._d = true;
  return renderFnWithContext;
}
function withDirectives(vnode, directives) {
  if (currentRenderingInstance === null) {
    return vnode;
  }
  const instance = getComponentPublicInstance(currentRenderingInstance);
  const bindings = vnode.dirs || (vnode.dirs = []);
  for (let i = 0; i < directives.length; i++) {
    let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i];
    if (dir) {
      if (isFunction(dir)) {
        dir = {
          mounted: dir,
          updated: dir
        };
      }
      if (dir.deep) {
        traverse$1(value);
      }
      bindings.push({
        dir,
        instance,
        value,
        oldValue: void 0,
        arg,
        modifiers
      });
    }
  }
  return vnode;
}
function invokeDirectiveHook(vnode, prevVNode, instance, name) {
  const bindings = vnode.dirs;
  const oldBindings = prevVNode && prevVNode.dirs;
  for (let i = 0; i < bindings.length; i++) {
    const binding = bindings[i];
    if (oldBindings) {
      binding.oldValue = oldBindings[i].value;
    }
    let hook2 = binding.dir[name];
    if (hook2) {
      pauseTracking();
      callWithAsyncErrorHandling(hook2, instance, 8, [
        vnode.el,
        binding,
        vnode,
        prevVNode
      ]);
      resetTracking();
    }
  }
}
const TeleportEndKey = Symbol("_vte");
const isTeleport = (type) => type.__isTeleport;
const isTeleportDisabled = (props2) => props2 && (props2.disabled || props2.disabled === "");
const isTeleportDeferred = (props2) => props2 && (props2.defer || props2.defer === "");
const isTargetSVG = (target2) => typeof SVGElement !== "undefined" && target2 instanceof SVGElement;
const isTargetMathML = (target2) => typeof MathMLElement === "function" && target2 instanceof MathMLElement;
const resolveTarget = (props2, select) => {
  const targetSelector = props2 && props2.to;
  if (isString$1(targetSelector)) {
    if (!select) {
      return null;
    } else {
      const target2 = select(targetSelector);
      return target2;
    }
  } else {
    return targetSelector;
  }
};
const TeleportImpl = {
  name: "Teleport",
  __isTeleport: true,
  process(n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, internals) {
    const {
      mc: mountChildren,
      pc: patchChildren,
      pbc: patchBlockChildren,
      o: { insert, querySelector, createText, createComment }
    } = internals;
    const disabled = isTeleportDisabled(n2.props);
    let { shapeFlag, children, dynamicChildren } = n2;
    if (n1 == null) {
      const placeholder = n2.el = createText("");
      const mainAnchor = n2.anchor = createText("");
      insert(placeholder, container, anchor);
      insert(mainAnchor, container, anchor);
      const mount = (container2, anchor2) => {
        if (shapeFlag & 16) {
          if (parentComponent && parentComponent.isCE) {
            parentComponent.ce._teleportTarget = container2;
          }
          mountChildren(
            children,
            container2,
            anchor2,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized
          );
        }
      };
      const mountToTarget = () => {
        const target2 = n2.target = resolveTarget(n2.props, querySelector);
        const targetAnchor = prepareAnchor(target2, n2, createText, insert);
        if (target2) {
          if (namespace !== "svg" && isTargetSVG(target2)) {
            namespace = "svg";
          } else if (namespace !== "mathml" && isTargetMathML(target2)) {
            namespace = "mathml";
          }
          if (!disabled) {
            mount(target2, targetAnchor);
            updateCssVars(n2, false);
          }
        }
      };
      if (disabled) {
        mount(container, mainAnchor);
        updateCssVars(n2, true);
      }
      if (isTeleportDeferred(n2.props)) {
        queuePostRenderEffect(() => {
          mountToTarget();
          n2.el.__isMounted = true;
        }, parentSuspense);
      } else {
        mountToTarget();
      }
    } else {
      if (isTeleportDeferred(n2.props) && !n1.el.__isMounted) {
        queuePostRenderEffect(() => {
          TeleportImpl.process(
            n1,
            n2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized,
            internals
          );
          delete n1.el.__isMounted;
        }, parentSuspense);
        return;
      }
      n2.el = n1.el;
      n2.targetStart = n1.targetStart;
      const mainAnchor = n2.anchor = n1.anchor;
      const target2 = n2.target = n1.target;
      const targetAnchor = n2.targetAnchor = n1.targetAnchor;
      const wasDisabled = isTeleportDisabled(n1.props);
      const currentContainer = wasDisabled ? container : target2;
      const currentAnchor = wasDisabled ? mainAnchor : targetAnchor;
      if (namespace === "svg" || isTargetSVG(target2)) {
        namespace = "svg";
      } else if (namespace === "mathml" || isTargetMathML(target2)) {
        namespace = "mathml";
      }
      if (dynamicChildren) {
        patchBlockChildren(
          n1.dynamicChildren,
          dynamicChildren,
          currentContainer,
          parentComponent,
          parentSuspense,
          namespace,
          slotScopeIds
        );
        traverseStaticChildren(n1, n2, true);
      } else if (!optimized) {
        patchChildren(
          n1,
          n2,
          currentContainer,
          currentAnchor,
          parentComponent,
          parentSuspense,
          namespace,
          slotScopeIds,
          false
        );
      }
      if (disabled) {
        if (!wasDisabled) {
          moveTeleport(
            n2,
            container,
            mainAnchor,
            internals,
            1
          );
        } else {
          if (n2.props && n1.props && n2.props.to !== n1.props.to) {
            n2.props.to = n1.props.to;
          }
        }
      } else {
        if ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {
          const nextTarget = n2.target = resolveTarget(
            n2.props,
            querySelector
          );
          if (nextTarget) {
            moveTeleport(
              n2,
              nextTarget,
              null,
              internals,
              0
            );
          }
        } else if (wasDisabled) {
          moveTeleport(
            n2,
            target2,
            targetAnchor,
            internals,
            1
          );
        }
      }
      updateCssVars(n2, disabled);
    }
  },
  remove(vnode, parentComponent, parentSuspense, { um: unmount, o: { remove: hostRemove } }, doRemove) {
    const {
      shapeFlag,
      children,
      anchor,
      targetStart,
      targetAnchor,
      target: target2,
      props: props2
    } = vnode;
    if (target2) {
      hostRemove(targetStart);
      hostRemove(targetAnchor);
    }
    doRemove && hostRemove(anchor);
    if (shapeFlag & 16) {
      const shouldRemove = doRemove || !isTeleportDisabled(props2);
      for (let i = 0; i < children.length; i++) {
        const child = children[i];
        unmount(
          child,
          parentComponent,
          parentSuspense,
          shouldRemove,
          !!child.dynamicChildren
        );
      }
    }
  },
  move: moveTeleport,
  hydrate: hydrateTeleport
};
function moveTeleport(vnode, container, parentAnchor, { o: { insert }, m: move }, moveType = 2) {
  if (moveType === 0) {
    insert(vnode.targetAnchor, container, parentAnchor);
  }
  const { el, anchor, shapeFlag, children, props: props2 } = vnode;
  const isReorder = moveType === 2;
  if (isReorder) {
    insert(el, container, parentAnchor);
  }
  if (!isReorder || isTeleportDisabled(props2)) {
    if (shapeFlag & 16) {
      for (let i = 0; i < children.length; i++) {
        move(
          children[i],
          container,
          parentAnchor,
          2
        );
      }
    }
  }
  if (isReorder) {
    insert(anchor, container, parentAnchor);
  }
}
function hydrateTeleport(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, {
  o: { nextSibling, parentNode, querySelector, insert, createText }
}, hydrateChildren) {
  const target2 = vnode.target = resolveTarget(
    vnode.props,
    querySelector
  );
  if (target2) {
    const disabled = isTeleportDisabled(vnode.props);
    const targetNode = target2._lpa || target2.firstChild;
    if (vnode.shapeFlag & 16) {
      if (disabled) {
        vnode.anchor = hydrateChildren(
          nextSibling(node),
          vnode,
          parentNode(node),
          parentComponent,
          parentSuspense,
          slotScopeIds,
          optimized
        );
        vnode.targetStart = targetNode;
        vnode.targetAnchor = targetNode && nextSibling(targetNode);
      } else {
        vnode.anchor = nextSibling(node);
        let targetAnchor = targetNode;
        while (targetAnchor) {
          if (targetAnchor && targetAnchor.nodeType === 8) {
            if (targetAnchor.data === "teleport start anchor") {
              vnode.targetStart = targetAnchor;
            } else if (targetAnchor.data === "teleport anchor") {
              vnode.targetAnchor = targetAnchor;
              target2._lpa = vnode.targetAnchor && nextSibling(vnode.targetAnchor);
              break;
            }
          }
          targetAnchor = nextSibling(targetAnchor);
        }
        if (!vnode.targetAnchor) {
          prepareAnchor(target2, vnode, createText, insert);
        }
        hydrateChildren(
          targetNode && nextSibling(targetNode),
          vnode,
          target2,
          parentComponent,
          parentSuspense,
          slotScopeIds,
          optimized
        );
      }
    }
    updateCssVars(vnode, disabled);
  }
  return vnode.anchor && nextSibling(vnode.anchor);
}
const Teleport = TeleportImpl;
function updateCssVars(vnode, isDisabled) {
  const ctx = vnode.ctx;
  if (ctx && ctx.ut) {
    let node, anchor;
    if (isDisabled) {
      node = vnode.el;
      anchor = vnode.anchor;
    } else {
      node = vnode.targetStart;
      anchor = vnode.targetAnchor;
    }
    while (node && node !== anchor) {
      if (node.nodeType === 1) node.setAttribute("data-v-owner", ctx.uid);
      node = node.nextSibling;
    }
    ctx.ut();
  }
}
function prepareAnchor(target2, vnode, createText, insert) {
  const targetStart = vnode.targetStart = createText("");
  const targetAnchor = vnode.targetAnchor = createText("");
  targetStart[TeleportEndKey] = targetAnchor;
  if (target2) {
    insert(targetStart, target2);
    insert(targetAnchor, target2);
  }
  return targetAnchor;
}
const leaveCbKey = Symbol("_leaveCb");
const enterCbKey$1 = Symbol("_enterCb");
function useTransitionState() {
  const state = {
    isMounted: false,
    isLeaving: false,
    isUnmounting: false,
    leavingVNodes: /* @__PURE__ */ new Map()
  };
  onMounted(() => {
    state.isMounted = true;
  });
  onBeforeUnmount(() => {
    state.isUnmounting = true;
  });
  return state;
}
const TransitionHookValidator = [Function, Array];
const BaseTransitionPropsValidators = {
  mode: String,
  appear: Boolean,
  persisted: Boolean,
  // enter
  onBeforeEnter: TransitionHookValidator,
  onEnter: TransitionHookValidator,
  onAfterEnter: TransitionHookValidator,
  onEnterCancelled: TransitionHookValidator,
  // leave
  onBeforeLeave: TransitionHookValidator,
  onLeave: TransitionHookValidator,
  onAfterLeave: TransitionHookValidator,
  onLeaveCancelled: TransitionHookValidator,
  // appear
  onBeforeAppear: TransitionHookValidator,
  onAppear: TransitionHookValidator,
  onAfterAppear: TransitionHookValidator,
  onAppearCancelled: TransitionHookValidator
};
const recursiveGetSubtree = (instance) => {
  const subTree = instance.subTree;
  return subTree.component ? recursiveGetSubtree(subTree.component) : subTree;
};
const BaseTransitionImpl = {
  name: `BaseTransition`,
  props: BaseTransitionPropsValidators,
  setup(props2, { slots }) {
    const instance = getCurrentInstance();
    const state = useTransitionState();
    return () => {
      const children = slots.default && getTransitionRawChildren(slots.default(), true);
      if (!children || !children.length) {
        return;
      }
      const child = findNonCommentChild(children);
      const rawProps = toRaw$1(props2);
      const { mode } = rawProps;
      if (state.isLeaving) {
        return emptyPlaceholder(child);
      }
      const innerChild = getInnerChild$1(child);
      if (!innerChild) {
        return emptyPlaceholder(child);
      }
      let enterHooks = resolveTransitionHooks(
        innerChild,
        rawProps,
        state,
        instance,
        // #11061, ensure enterHooks is fresh after clone
        (hooks2) => enterHooks = hooks2
      );
      if (innerChild.type !== Comment) {
        setTransitionHooks(innerChild, enterHooks);
      }
      let oldInnerChild = instance.subTree && getInnerChild$1(instance.subTree);
      if (oldInnerChild && oldInnerChild.type !== Comment && !isSameVNodeType(innerChild, oldInnerChild) && recursiveGetSubtree(instance).type !== Comment) {
        let leavingHooks = resolveTransitionHooks(
          oldInnerChild,
          rawProps,
          state,
          instance
        );
        setTransitionHooks(oldInnerChild, leavingHooks);
        if (mode === "out-in" && innerChild.type !== Comment) {
          state.isLeaving = true;
          leavingHooks.afterLeave = () => {
            state.isLeaving = false;
            if (!(instance.job.flags & 8)) {
              instance.update();
            }
            delete leavingHooks.afterLeave;
            oldInnerChild = void 0;
          };
          return emptyPlaceholder(child);
        } else if (mode === "in-out" && innerChild.type !== Comment) {
          leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {
            const leavingVNodesCache = getLeavingNodesForType(
              state,
              oldInnerChild
            );
            leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;
            el[leaveCbKey] = () => {
              earlyRemove();
              el[leaveCbKey] = void 0;
              delete enterHooks.delayedLeave;
              oldInnerChild = void 0;
            };
            enterHooks.delayedLeave = () => {
              delayedLeave();
              delete enterHooks.delayedLeave;
              oldInnerChild = void 0;
            };
          };
        } else {
          oldInnerChild = void 0;
        }
      } else if (oldInnerChild) {
        oldInnerChild = void 0;
      }
      return child;
    };
  }
};
function findNonCommentChild(children) {
  let child = children[0];
  if (children.length > 1) {
    for (const c of children) {
      if (c.type !== Comment) {
        child = c;
        break;
      }
    }
  }
  return child;
}
const BaseTransition = BaseTransitionImpl;
function getLeavingNodesForType(state, vnode) {
  const { leavingVNodes } = state;
  let leavingVNodesCache = leavingVNodes.get(vnode.type);
  if (!leavingVNodesCache) {
    leavingVNodesCache = /* @__PURE__ */ Object.create(null);
    leavingVNodes.set(vnode.type, leavingVNodesCache);
  }
  return leavingVNodesCache;
}
function resolveTransitionHooks(vnode, props2, state, instance, postClone) {
  const {
    appear,
    mode,
    persisted = false,
    onBeforeEnter,
    onEnter,
    onAfterEnter,
    onEnterCancelled,
    onBeforeLeave,
    onLeave,
    onAfterLeave,
    onLeaveCancelled,
    onBeforeAppear,
    onAppear,
    onAfterAppear,
    onAppearCancelled
  } = props2;
  const key = String(vnode.key);
  const leavingVNodesCache = getLeavingNodesForType(state, vnode);
  const callHook2 = (hook2, args) => {
    hook2 && callWithAsyncErrorHandling(
      hook2,
      instance,
      9,
      args
    );
  };
  const callAsyncHook = (hook2, args) => {
    const done = args[1];
    callHook2(hook2, args);
    if (isArray$2(hook2)) {
      if (hook2.every((hook22) => hook22.length <= 1)) done();
    } else if (hook2.length <= 1) {
      done();
    }
  };
  const hooks2 = {
    mode,
    persisted,
    beforeEnter(el) {
      let hook2 = onBeforeEnter;
      if (!state.isMounted) {
        if (appear) {
          hook2 = onBeforeAppear || onBeforeEnter;
        } else {
          return;
        }
      }
      if (el[leaveCbKey]) {
        el[leaveCbKey](
          true
          /* cancelled */
        );
      }
      const leavingVNode = leavingVNodesCache[key];
      if (leavingVNode && isSameVNodeType(vnode, leavingVNode) && leavingVNode.el[leaveCbKey]) {
        leavingVNode.el[leaveCbKey]();
      }
      callHook2(hook2, [el]);
    },
    enter(el) {
      let hook2 = onEnter;
      let afterHook = onAfterEnter;
      let cancelHook = onEnterCancelled;
      if (!state.isMounted) {
        if (appear) {
          hook2 = onAppear || onEnter;
          afterHook = onAfterAppear || onAfterEnter;
          cancelHook = onAppearCancelled || onEnterCancelled;
        } else {
          return;
        }
      }
      let called = false;
      const done = el[enterCbKey$1] = (cancelled) => {
        if (called) return;
        called = true;
        if (cancelled) {
          callHook2(cancelHook, [el]);
        } else {
          callHook2(afterHook, [el]);
        }
        if (hooks2.delayedLeave) {
          hooks2.delayedLeave();
        }
        el[enterCbKey$1] = void 0;
      };
      if (hook2) {
        callAsyncHook(hook2, [el, done]);
      } else {
        done();
      }
    },
    leave(el, remove2) {
      const key2 = String(vnode.key);
      if (el[enterCbKey$1]) {
        el[enterCbKey$1](
          true
          /* cancelled */
        );
      }
      if (state.isUnmounting) {
        return remove2();
      }
      callHook2(onBeforeLeave, [el]);
      let called = false;
      const done = el[leaveCbKey] = (cancelled) => {
        if (called) return;
        called = true;
        remove2();
        if (cancelled) {
          callHook2(onLeaveCancelled, [el]);
        } else {
          callHook2(onAfterLeave, [el]);
        }
        el[leaveCbKey] = void 0;
        if (leavingVNodesCache[key2] === vnode) {
          delete leavingVNodesCache[key2];
        }
      };
      leavingVNodesCache[key2] = vnode;
      if (onLeave) {
        callAsyncHook(onLeave, [el, done]);
      } else {
        done();
      }
    },
    clone(vnode2) {
      const hooks22 = resolveTransitionHooks(
        vnode2,
        props2,
        state,
        instance,
        postClone
      );
      if (postClone) postClone(hooks22);
      return hooks22;
    }
  };
  return hooks2;
}
function emptyPlaceholder(vnode) {
  if (isKeepAlive(vnode)) {
    vnode = cloneVNode(vnode);
    vnode.children = null;
    return vnode;
  }
}
function getInnerChild$1(vnode) {
  if (!isKeepAlive(vnode)) {
    if (isTeleport(vnode.type) && vnode.children) {
      return findNonCommentChild(vnode.children);
    }
    return vnode;
  }
  const { shapeFlag, children } = vnode;
  if (children) {
    if (shapeFlag & 16) {
      return children[0];
    }
    if (shapeFlag & 32 && isFunction(children.default)) {
      return children.default();
    }
  }
}
function setTransitionHooks(vnode, hooks2) {
  if (vnode.shapeFlag & 6 && vnode.component) {
    vnode.transition = hooks2;
    setTransitionHooks(vnode.component.subTree, hooks2);
  } else if (vnode.shapeFlag & 128) {
    vnode.ssContent.transition = hooks2.clone(vnode.ssContent);
    vnode.ssFallback.transition = hooks2.clone(vnode.ssFallback);
  } else {
    vnode.transition = hooks2;
  }
}
function getTransitionRawChildren(children, keepComment = false, parentKey) {
  let ret = [];
  let keyedFragmentCount = 0;
  for (let i = 0; i < children.length; i++) {
    let child = children[i];
    const key = parentKey == null ? child.key : String(parentKey) + String(child.key != null ? child.key : i);
    if (child.type === Fragment) {
      if (child.patchFlag & 128) keyedFragmentCount++;
      ret = ret.concat(
        getTransitionRawChildren(child.children, keepComment, key)
      );
    } else if (keepComment || child.type !== Comment) {
      ret.push(key != null ? cloneVNode(child, { key }) : child);
    }
  }
  if (keyedFragmentCount > 1) {
    for (let i = 0; i < ret.length; i++) {
      ret[i].patchFlag = -2;
    }
  }
  return ret;
}
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function defineComponent(options, extraOptions) {
  return isFunction(options) ? (
    // #8236: extend call and options.name access are considered side-effects
    // by Rollup, so we have to wrap it in a pure-annotated IIFE.
    /* @__PURE__ */ (() => extend({ name: options.name }, extraOptions, { setup: options }))()
  ) : options;
}
function markAsyncBoundary(instance) {
  instance.ids = [instance.ids[0] + instance.ids[2]++ + "-", 0, 0];
}
function setRef(rawRef, oldRawRef, parentSuspense, vnode, isUnmount = false) {
  if (isArray$2(rawRef)) {
    rawRef.forEach(
      (r, i) => setRef(
        r,
        oldRawRef && (isArray$2(oldRawRef) ? oldRawRef[i] : oldRawRef),
        parentSuspense,
        vnode,
        isUnmount
      )
    );
    return;
  }
  if (isAsyncWrapper(vnode) && !isUnmount) {
    if (vnode.shapeFlag & 512 && vnode.type.__asyncResolved && vnode.component.subTree.component) {
      setRef(rawRef, oldRawRef, parentSuspense, vnode.component.subTree);
    }
    return;
  }
  const refValue = vnode.shapeFlag & 4 ? getComponentPublicInstance(vnode.component) : vnode.el;
  const value = isUnmount ? null : refValue;
  const { i: owner, r: ref3 } = rawRef;
  const oldRef = oldRawRef && oldRawRef.r;
  const refs = owner.refs === EMPTY_OBJ ? owner.refs = {} : owner.refs;
  const setupState = owner.setupState;
  const rawSetupState = toRaw$1(setupState);
  const canSetSetupRef = setupState === EMPTY_OBJ ? () => false : (key) => {
    return hasOwn(rawSetupState, key);
  };
  if (oldRef != null && oldRef !== ref3) {
    if (isString$1(oldRef)) {
      refs[oldRef] = null;
      if (canSetSetupRef(oldRef)) {
        setupState[oldRef] = null;
      }
    } else if (isRef$1(oldRef)) {
      oldRef.value = null;
    }
  }
  if (isFunction(ref3)) {
    callWithErrorHandling(ref3, owner, 12, [value, refs]);
  } else {
    const _isString = isString$1(ref3);
    const _isRef = isRef$1(ref3);
    if (_isString || _isRef) {
      const doSet = () => {
        if (rawRef.f) {
          const existing = _isString ? canSetSetupRef(ref3) ? setupState[ref3] : refs[ref3] : ref3.value;
          if (isUnmount) {
            isArray$2(existing) && remove(existing, refValue);
          } else {
            if (!isArray$2(existing)) {
              if (_isString) {
                refs[ref3] = [refValue];
                if (canSetSetupRef(ref3)) {
                  setupState[ref3] = refs[ref3];
                }
              } else {
                ref3.value = [refValue];
                if (rawRef.k) refs[rawRef.k] = ref3.value;
              }
            } else if (!existing.includes(refValue)) {
              existing.push(refValue);
            }
          }
        } else if (_isString) {
          refs[ref3] = value;
          if (canSetSetupRef(ref3)) {
            setupState[ref3] = value;
          }
        } else if (_isRef) {
          ref3.value = value;
          if (rawRef.k) refs[rawRef.k] = value;
        } else ;
      };
      if (value) {
        doSet.id = -1;
        queuePostRenderEffect(doSet, parentSuspense);
      } else {
        doSet();
      }
    }
  }
}
getGlobalThis().requestIdleCallback || ((cb) => setTimeout(cb, 1));
getGlobalThis().cancelIdleCallback || ((id) => clearTimeout(id));
const isAsyncWrapper = (i) => !!i.type.__asyncLoader;
const isKeepAlive = (vnode) => vnode.type.__isKeepAlive;
function onActivated(hook2, target2) {
  registerKeepAliveHook(hook2, "a", target2);
}
function onDeactivated(hook2, target2) {
  registerKeepAliveHook(hook2, "da", target2);
}
function registerKeepAliveHook(hook2, type, target2 = currentInstance) {
  const wrappedHook = hook2.__wdc || (hook2.__wdc = () => {
    let current = target2;
    while (current) {
      if (current.isDeactivated) {
        return;
      }
      current = current.parent;
    }
    return hook2();
  });
  injectHook(type, wrappedHook, target2);
  if (target2) {
    let current = target2.parent;
    while (current && current.parent) {
      if (isKeepAlive(current.parent.vnode)) {
        injectToKeepAliveRoot(wrappedHook, type, target2, current);
      }
      current = current.parent;
    }
  }
}
function injectToKeepAliveRoot(hook2, type, target2, keepAliveRoot) {
  const injected = injectHook(
    type,
    hook2,
    keepAliveRoot,
    true
    /* prepend */
  );
  onUnmounted(() => {
    remove(keepAliveRoot[type], injected);
  }, target2);
}
function injectHook(type, hook2, target2 = currentInstance, prepend = false) {
  if (target2) {
    const hooks2 = target2[type] || (target2[type] = []);
    const wrappedHook = hook2.__weh || (hook2.__weh = (...args) => {
      pauseTracking();
      const reset = setCurrentInstance(target2);
      const res = callWithAsyncErrorHandling(hook2, target2, type, args);
      reset();
      resetTracking();
      return res;
    });
    if (prepend) {
      hooks2.unshift(wrappedHook);
    } else {
      hooks2.push(wrappedHook);
    }
    return wrappedHook;
  }
}
const createHook = (lifecycle) => (hook2, target2 = currentInstance) => {
  if (!isInSSRComponentSetup || lifecycle === "sp") {
    injectHook(lifecycle, (...args) => hook2(...args), target2);
  }
};
const onBeforeMount = createHook("bm");
const onMounted = createHook("m");
const onBeforeUpdate = createHook(
  "bu"
);
const onUpdated = createHook("u");
const onBeforeUnmount = createHook(
  "bum"
);
const onUnmounted = createHook("um");
const onServerPrefetch = createHook(
  "sp"
);
const onRenderTriggered = createHook("rtg");
const onRenderTracked = createHook("rtc");
function onErrorCaptured(hook2, target2 = currentInstance) {
  injectHook("ec", hook2, target2);
}
const COMPONENTS = "components";
function resolveComponent(name, maybeSelfReference) {
  return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;
}
const NULL_DYNAMIC_COMPONENT = Symbol.for("v-ndc");
function resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {
  const instance = currentRenderingInstance || currentInstance;
  if (instance) {
    const Component = instance.type;
    {
      const selfName = getComponentName(
        Component,
        false
      );
      if (selfName && (selfName === name || selfName === camelize(name) || selfName === capitalize(camelize(name)))) {
        return Component;
      }
    }
    const res = (
      // local registration
      // check instance[type] first which is resolved for options API
      resolve(instance[type] || Component[type], name) || // global registration
      resolve(instance.appContext[type], name)
    );
    if (!res && maybeSelfReference) {
      return Component;
    }
    return res;
  }
}
function resolve(registry, name) {
  return registry && (registry[name] || registry[camelize(name)] || registry[capitalize(camelize(name))]);
}
function renderList(source, renderItem, cache, index) {
  let ret;
  const cached = cache;
  const sourceIsArray = isArray$2(source);
  if (sourceIsArray || isString$1(source)) {
    const sourceIsReactiveArray = sourceIsArray && isReactive$1(source);
    let needsWrap = false;
    if (sourceIsReactiveArray) {
      needsWrap = !isShallow(source);
      source = shallowReadArray(source);
    }
    ret = new Array(source.length);
    for (let i = 0, l = source.length; i < l; i++) {
      ret[i] = renderItem(
        needsWrap ? toReactive(source[i]) : source[i],
        i,
        void 0,
        cached
      );
    }
  } else if (typeof source === "number") {
    ret = new Array(source);
    for (let i = 0; i < source; i++) {
      ret[i] = renderItem(i + 1, i, void 0, cached);
    }
  } else if (isObject$1(source)) {
    if (source[Symbol.iterator]) {
      ret = Array.from(
        source,
        (item, i) => renderItem(item, i, void 0, cached)
      );
    } else {
      const keys = Object.keys(source);
      ret = new Array(keys.length);
      for (let i = 0, l = keys.length; i < l; i++) {
        const key = keys[i];
        ret[i] = renderItem(source[key], key, i, cached);
      }
    }
  } else {
    ret = [];
  }
  return ret;
}
const getPublicInstance = (i) => {
  if (!i) return null;
  if (isStatefulComponent(i)) return getComponentPublicInstance(i);
  return getPublicInstance(i.parent);
};
const publicPropertiesMap = (
  // Move PURE marker to new line to workaround compiler discarding it
  // due to type annotation
  /* @__PURE__ */ extend(/* @__PURE__ */ Object.create(null), {
    $: (i) => i,
    $el: (i) => i.vnode.el,
    $data: (i) => i.data,
    $props: (i) => i.props,
    $attrs: (i) => i.attrs,
    $slots: (i) => i.slots,
    $refs: (i) => i.refs,
    $parent: (i) => getPublicInstance(i.parent),
    $root: (i) => getPublicInstance(i.root),
    $host: (i) => i.ce,
    $emit: (i) => i.emit,
    $options: (i) => resolveMergedOptions(i),
    $forceUpdate: (i) => i.f || (i.f = () => {
      queueJob(i.update);
    }),
    $nextTick: (i) => i.n || (i.n = nextTick.bind(i.proxy)),
    $watch: (i) => instanceWatch.bind(i)
  })
);
const hasSetupBinding = (state, key) => state !== EMPTY_OBJ && !state.__isScriptSetup && hasOwn(state, key);
const PublicInstanceProxyHandlers = {
  get({ _: instance }, key) {
    if (key === "__v_skip") {
      return true;
    }
    const { ctx, setupState, data, props: props2, accessCache, type, appContext } = instance;
    let normalizedProps;
    if (key[0] !== "$") {
      const n = accessCache[key];
      if (n !== void 0) {
        switch (n) {
          case 1:
            return setupState[key];
          case 2:
            return data[key];
          case 4:
            return ctx[key];
          case 3:
            return props2[key];
        }
      } else if (hasSetupBinding(setupState, key)) {
        accessCache[key] = 1;
        return setupState[key];
      } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {
        accessCache[key] = 2;
        return data[key];
      } else if (
        // only cache other properties when instance has declared (thus stable)
        // props
        (normalizedProps = instance.propsOptions[0]) && hasOwn(normalizedProps, key)
      ) {
        accessCache[key] = 3;
        return props2[key];
      } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {
        accessCache[key] = 4;
        return ctx[key];
      } else if (shouldCacheAccess) {
        accessCache[key] = 0;
      }
    }
    const publicGetter = publicPropertiesMap[key];
    let cssModule, globalProperties;
    if (publicGetter) {
      if (key === "$attrs") {
        track(instance.attrs, "get", "");
      }
      return publicGetter(instance);
    } else if (
      // css module (injected by vue-loader)
      (cssModule = type.__cssModules) && (cssModule = cssModule[key])
    ) {
      return cssModule;
    } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {
      accessCache[key] = 4;
      return ctx[key];
    } else if (
      // global properties
      globalProperties = appContext.config.globalProperties, hasOwn(globalProperties, key)
    ) {
      {
        return globalProperties[key];
      }
    } else ;
  },
  set({ _: instance }, key, value) {
    const { data, setupState, ctx } = instance;
    if (hasSetupBinding(setupState, key)) {
      setupState[key] = value;
      return true;
    } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {
      data[key] = value;
      return true;
    } else if (hasOwn(instance.props, key)) {
      return false;
    }
    if (key[0] === "$" && key.slice(1) in instance) {
      return false;
    } else {
      {
        ctx[key] = value;
      }
    }
    return true;
  },
  has({
    _: { data, setupState, accessCache, ctx, appContext, propsOptions }
  }, key) {
    let normalizedProps;
    return !!accessCache[key] || data !== EMPTY_OBJ && hasOwn(data, key) || hasSetupBinding(setupState, key) || (normalizedProps = propsOptions[0]) && hasOwn(normalizedProps, key) || hasOwn(ctx, key) || hasOwn(publicPropertiesMap, key) || hasOwn(appContext.config.globalProperties, key);
  },
  defineProperty(target2, key, descriptor) {
    if (descriptor.get != null) {
      target2._.accessCache[key] = 0;
    } else if (hasOwn(descriptor, "value")) {
      this.set(target2, key, descriptor.value, null);
    }
    return Reflect.defineProperty(target2, key, descriptor);
  }
};
function normalizePropsOrEmits(props2) {
  return isArray$2(props2) ? props2.reduce(
    (normalized, p2) => (normalized[p2] = null, normalized),
    {}
  ) : props2;
}
let shouldCacheAccess = true;
function applyOptions(instance) {
  const options = resolveMergedOptions(instance);
  const publicThis = instance.proxy;
  const ctx = instance.ctx;
  shouldCacheAccess = false;
  if (options.beforeCreate) {
    callHook$1(options.beforeCreate, instance, "bc");
  }
  const {
    // state
    data: dataOptions,
    computed: computedOptions,
    methods,
    watch: watchOptions,
    provide: provideOptions,
    inject: injectOptions,
    // lifecycle
    created,
    beforeMount,
    mounted,
    beforeUpdate,
    updated,
    activated,
    deactivated,
    beforeDestroy,
    beforeUnmount,
    destroyed,
    unmounted,
    render,
    renderTracked,
    renderTriggered,
    errorCaptured,
    serverPrefetch,
    // public API
    expose,
    inheritAttrs,
    // assets
    components: components2,
    directives,
    filters
  } = options;
  const checkDuplicateProperties = null;
  if (injectOptions) {
    resolveInjections(injectOptions, ctx, checkDuplicateProperties);
  }
  if (methods) {
    for (const key in methods) {
      const methodHandler = methods[key];
      if (isFunction(methodHandler)) {
        {
          ctx[key] = methodHandler.bind(publicThis);
        }
      }
    }
  }
  if (dataOptions) {
    const data = dataOptions.call(publicThis, publicThis);
    if (!isObject$1(data)) ;
    else {
      instance.data = reactive(data);
    }
  }
  shouldCacheAccess = true;
  if (computedOptions) {
    for (const key in computedOptions) {
      const opt = computedOptions[key];
      const get = isFunction(opt) ? opt.bind(publicThis, publicThis) : isFunction(opt.get) ? opt.get.bind(publicThis, publicThis) : NOOP;
      const set = !isFunction(opt) && isFunction(opt.set) ? opt.set.bind(publicThis) : NOOP;
      const c = computed({
        get,
        set
      });
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => c.value,
        set: (v) => c.value = v
      });
    }
  }
  if (watchOptions) {
    for (const key in watchOptions) {
      createWatcher(watchOptions[key], ctx, publicThis, key);
    }
  }
  if (provideOptions) {
    const provides = isFunction(provideOptions) ? provideOptions.call(publicThis) : provideOptions;
    Reflect.ownKeys(provides).forEach((key) => {
      provide(key, provides[key]);
    });
  }
  if (created) {
    callHook$1(created, instance, "c");
  }
  function registerLifecycleHook(register, hook2) {
    if (isArray$2(hook2)) {
      hook2.forEach((_hook) => register(_hook.bind(publicThis)));
    } else if (hook2) {
      register(hook2.bind(publicThis));
    }
  }
  registerLifecycleHook(onBeforeMount, beforeMount);
  registerLifecycleHook(onMounted, mounted);
  registerLifecycleHook(onBeforeUpdate, beforeUpdate);
  registerLifecycleHook(onUpdated, updated);
  registerLifecycleHook(onActivated, activated);
  registerLifecycleHook(onDeactivated, deactivated);
  registerLifecycleHook(onErrorCaptured, errorCaptured);
  registerLifecycleHook(onRenderTracked, renderTracked);
  registerLifecycleHook(onRenderTriggered, renderTriggered);
  registerLifecycleHook(onBeforeUnmount, beforeUnmount);
  registerLifecycleHook(onUnmounted, unmounted);
  registerLifecycleHook(onServerPrefetch, serverPrefetch);
  if (isArray$2(expose)) {
    if (expose.length) {
      const exposed = instance.exposed || (instance.exposed = {});
      expose.forEach((key) => {
        Object.defineProperty(exposed, key, {
          get: () => publicThis[key],
          set: (val) => publicThis[key] = val
        });
      });
    } else if (!instance.exposed) {
      instance.exposed = {};
    }
  }
  if (render && instance.render === NOOP) {
    instance.render = render;
  }
  if (inheritAttrs != null) {
    instance.inheritAttrs = inheritAttrs;
  }
  if (components2) instance.components = components2;
  if (directives) instance.directives = directives;
  if (serverPrefetch) {
    markAsyncBoundary(instance);
  }
}
function resolveInjections(injectOptions, ctx, checkDuplicateProperties = NOOP) {
  if (isArray$2(injectOptions)) {
    injectOptions = normalizeInject(injectOptions);
  }
  for (const key in injectOptions) {
    const opt = injectOptions[key];
    let injected;
    if (isObject$1(opt)) {
      if ("default" in opt) {
        injected = inject(
          opt.from || key,
          opt.default,
          true
        );
      } else {
        injected = inject(opt.from || key);
      }
    } else {
      injected = inject(opt);
    }
    if (isRef$1(injected)) {
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => injected.value,
        set: (v) => injected.value = v
      });
    } else {
      ctx[key] = injected;
    }
  }
}
function callHook$1(hook2, instance, type) {
  callWithAsyncErrorHandling(
    isArray$2(hook2) ? hook2.map((h2) => h2.bind(instance.proxy)) : hook2.bind(instance.proxy),
    instance,
    type
  );
}
function createWatcher(raw, ctx, publicThis, key) {
  let getter = key.includes(".") ? createPathGetter(publicThis, key) : () => publicThis[key];
  if (isString$1(raw)) {
    const handler = ctx[raw];
    if (isFunction(handler)) {
      {
        watch(getter, handler);
      }
    }
  } else if (isFunction(raw)) {
    {
      watch(getter, raw.bind(publicThis));
    }
  } else if (isObject$1(raw)) {
    if (isArray$2(raw)) {
      raw.forEach((r) => createWatcher(r, ctx, publicThis, key));
    } else {
      const handler = isFunction(raw.handler) ? raw.handler.bind(publicThis) : ctx[raw.handler];
      if (isFunction(handler)) {
        watch(getter, handler, raw);
      }
    }
  } else ;
}
function resolveMergedOptions(instance) {
  const base = instance.type;
  const { mixins, extends: extendsOptions } = base;
  const {
    mixins: globalMixins,
    optionsCache: cache,
    config: { optionMergeStrategies }
  } = instance.appContext;
  const cached = cache.get(base);
  let resolved;
  if (cached) {
    resolved = cached;
  } else if (!globalMixins.length && !mixins && !extendsOptions) {
    {
      resolved = base;
    }
  } else {
    resolved = {};
    if (globalMixins.length) {
      globalMixins.forEach(
        (m) => mergeOptions$1(resolved, m, optionMergeStrategies, true)
      );
    }
    mergeOptions$1(resolved, base, optionMergeStrategies);
  }
  if (isObject$1(base)) {
    cache.set(base, resolved);
  }
  return resolved;
}
function mergeOptions$1(to, from, strats, asMixin = false) {
  const { mixins, extends: extendsOptions } = from;
  if (extendsOptions) {
    mergeOptions$1(to, extendsOptions, strats, true);
  }
  if (mixins) {
    mixins.forEach(
      (m) => mergeOptions$1(to, m, strats, true)
    );
  }
  for (const key in from) {
    if (asMixin && key === "expose") ;
    else {
      const strat = internalOptionMergeStrats[key] || strats && strats[key];
      to[key] = strat ? strat(to[key], from[key]) : from[key];
    }
  }
  return to;
}
const internalOptionMergeStrats = {
  data: mergeDataFn,
  props: mergeEmitsOrPropsOptions,
  emits: mergeEmitsOrPropsOptions,
  // objects
  methods: mergeObjectOptions,
  computed: mergeObjectOptions,
  // lifecycle
  beforeCreate: mergeAsArray,
  created: mergeAsArray,
  beforeMount: mergeAsArray,
  mounted: mergeAsArray,
  beforeUpdate: mergeAsArray,
  updated: mergeAsArray,
  beforeDestroy: mergeAsArray,
  beforeUnmount: mergeAsArray,
  destroyed: mergeAsArray,
  unmounted: mergeAsArray,
  activated: mergeAsArray,
  deactivated: mergeAsArray,
  errorCaptured: mergeAsArray,
  serverPrefetch: mergeAsArray,
  // assets
  components: mergeObjectOptions,
  directives: mergeObjectOptions,
  // watch
  watch: mergeWatchOptions,
  // provide / inject
  provide: mergeDataFn,
  inject: mergeInject
};
function mergeDataFn(to, from) {
  if (!from) {
    return to;
  }
  if (!to) {
    return from;
  }
  return function mergedDataFn() {
    return extend(
      isFunction(to) ? to.call(this, this) : to,
      isFunction(from) ? from.call(this, this) : from
    );
  };
}
function mergeInject(to, from) {
  return mergeObjectOptions(normalizeInject(to), normalizeInject(from));
}
function normalizeInject(raw) {
  if (isArray$2(raw)) {
    const res = {};
    for (let i = 0; i < raw.length; i++) {
      res[raw[i]] = raw[i];
    }
    return res;
  }
  return raw;
}
function mergeAsArray(to, from) {
  return to ? [...new Set([].concat(to, from))] : from;
}
function mergeObjectOptions(to, from) {
  return to ? extend(/* @__PURE__ */ Object.create(null), to, from) : from;
}
function mergeEmitsOrPropsOptions(to, from) {
  if (to) {
    if (isArray$2(to) && isArray$2(from)) {
      return [.../* @__PURE__ */ new Set([...to, ...from])];
    }
    return extend(
      /* @__PURE__ */ Object.create(null),
      normalizePropsOrEmits(to),
      normalizePropsOrEmits(from != null ? from : {})
    );
  } else {
    return from;
  }
}
function mergeWatchOptions(to, from) {
  if (!to) return from;
  if (!from) return to;
  const merged = extend(/* @__PURE__ */ Object.create(null), to);
  for (const key in from) {
    merged[key] = mergeAsArray(to[key], from[key]);
  }
  return merged;
}
function createAppContext() {
  return {
    app: null,
    config: {
      isNativeTag: NO,
      performance: false,
      globalProperties: {},
      optionMergeStrategies: {},
      errorHandler: void 0,
      warnHandler: void 0,
      compilerOptions: {}
    },
    mixins: [],
    components: {},
    directives: {},
    provides: /* @__PURE__ */ Object.create(null),
    optionsCache: /* @__PURE__ */ new WeakMap(),
    propsCache: /* @__PURE__ */ new WeakMap(),
    emitsCache: /* @__PURE__ */ new WeakMap()
  };
}
let uid$1$1 = 0;
function createAppAPI(render, hydrate) {
  return function createApp2(rootComponent, rootProps = null) {
    if (!isFunction(rootComponent)) {
      rootComponent = extend({}, rootComponent);
    }
    if (rootProps != null && !isObject$1(rootProps)) {
      rootProps = null;
    }
    const context = createAppContext();
    const installedPlugins = /* @__PURE__ */ new WeakSet();
    const pluginCleanupFns = [];
    let isMounted = false;
    const app2 = context.app = {
      _uid: uid$1$1++,
      _component: rootComponent,
      _props: rootProps,
      _container: null,
      _context: context,
      _instance: null,
      version,
      get config() {
        return context.config;
      },
      set config(v) {
      },
      use(plugin, ...options) {
        if (installedPlugins.has(plugin)) ;
        else if (plugin && isFunction(plugin.install)) {
          installedPlugins.add(plugin);
          plugin.install(app2, ...options);
        } else if (isFunction(plugin)) {
          installedPlugins.add(plugin);
          plugin(app2, ...options);
        } else ;
        return app2;
      },
      mixin(mixin) {
        {
          if (!context.mixins.includes(mixin)) {
            context.mixins.push(mixin);
          }
        }
        return app2;
      },
      component(name, component) {
        if (!component) {
          return context.components[name];
        }
        context.components[name] = component;
        return app2;
      },
      directive(name, directive) {
        if (!directive) {
          return context.directives[name];
        }
        context.directives[name] = directive;
        return app2;
      },
      mount(rootContainer, isHydrate, namespace) {
        if (!isMounted) {
          const vnode = app2._ceVNode || createVNode(rootComponent, rootProps);
          vnode.appContext = context;
          if (namespace === true) {
            namespace = "svg";
          } else if (namespace === false) {
            namespace = void 0;
          }
          {
            render(vnode, rootContainer, namespace);
          }
          isMounted = true;
          app2._container = rootContainer;
          rootContainer.__vue_app__ = app2;
          {
            app2._instance = vnode.component;
            devtoolsInitApp(app2, version);
          }
          return getComponentPublicInstance(vnode.component);
        }
      },
      onUnmount(cleanupFn) {
        pluginCleanupFns.push(cleanupFn);
      },
      unmount() {
        if (isMounted) {
          callWithAsyncErrorHandling(
            pluginCleanupFns,
            app2._instance,
            16
          );
          render(null, app2._container);
          {
            app2._instance = null;
            devtoolsUnmountApp(app2);
          }
          delete app2._container.__vue_app__;
        }
      },
      provide(key, value) {
        context.provides[key] = value;
        return app2;
      },
      runWithContext(fn) {
        const lastApp = currentApp;
        currentApp = app2;
        try {
          return fn();
        } finally {
          currentApp = lastApp;
        }
      }
    };
    return app2;
  };
}
let currentApp = null;
function provide(key, value) {
  if (!currentInstance) ;
  else {
    let provides = currentInstance.provides;
    const parentProvides = currentInstance.parent && currentInstance.parent.provides;
    if (parentProvides === provides) {
      provides = currentInstance.provides = Object.create(parentProvides);
    }
    provides[key] = value;
  }
}
function inject(key, defaultValue, treatDefaultAsFactory = false) {
  const instance = currentInstance || currentRenderingInstance;
  if (instance || currentApp) {
    const provides = currentApp ? currentApp._context.provides : instance ? instance.parent == null ? instance.vnode.appContext && instance.vnode.appContext.provides : instance.parent.provides : void 0;
    if (provides && key in provides) {
      return provides[key];
    } else if (arguments.length > 1) {
      return treatDefaultAsFactory && isFunction(defaultValue) ? defaultValue.call(instance && instance.proxy) : defaultValue;
    } else ;
  }
}
function hasInjectionContext() {
  return !!(currentInstance || currentRenderingInstance || currentApp);
}
const internalObjectProto = {};
const createInternalObject = () => Object.create(internalObjectProto);
const isInternalObject = (obj) => Object.getPrototypeOf(obj) === internalObjectProto;
function initProps(instance, rawProps, isStateful, isSSR = false) {
  const props2 = {};
  const attrs = createInternalObject();
  instance.propsDefaults = /* @__PURE__ */ Object.create(null);
  setFullProps(instance, rawProps, props2, attrs);
  for (const key in instance.propsOptions[0]) {
    if (!(key in props2)) {
      props2[key] = void 0;
    }
  }
  if (isStateful) {
    instance.props = isSSR ? props2 : shallowReactive(props2);
  } else {
    if (!instance.type.props) {
      instance.props = attrs;
    } else {
      instance.props = props2;
    }
  }
  instance.attrs = attrs;
}
function updateProps(instance, rawProps, rawPrevProps, optimized) {
  const {
    props: props2,
    attrs,
    vnode: { patchFlag }
  } = instance;
  const rawCurrentProps = toRaw$1(props2);
  const [options] = instance.propsOptions;
  let hasAttrsChanged = false;
  if (
    // always force full diff in dev
    // - #1942 if hmr is enabled with sfc component
    // - vite#872 non-sfc component used by sfc component
    (optimized || patchFlag > 0) && !(patchFlag & 16)
  ) {
    if (patchFlag & 8) {
      const propsToUpdate = instance.vnode.dynamicProps;
      for (let i = 0; i < propsToUpdate.length; i++) {
        let key = propsToUpdate[i];
        if (isEmitListener(instance.emitsOptions, key)) {
          continue;
        }
        const value = rawProps[key];
        if (options) {
          if (hasOwn(attrs, key)) {
            if (value !== attrs[key]) {
              attrs[key] = value;
              hasAttrsChanged = true;
            }
          } else {
            const camelizedKey = camelize(key);
            props2[camelizedKey] = resolvePropValue(
              options,
              rawCurrentProps,
              camelizedKey,
              value,
              instance,
              false
            );
          }
        } else {
          if (value !== attrs[key]) {
            attrs[key] = value;
            hasAttrsChanged = true;
          }
        }
      }
    }
  } else {
    if (setFullProps(instance, rawProps, props2, attrs)) {
      hasAttrsChanged = true;
    }
    let kebabKey;
    for (const key in rawCurrentProps) {
      if (!rawProps || // for camelCase
      !hasOwn(rawProps, key) && // it's possible the original props was passed in as kebab-case
      // and converted to camelCase (#955)
      ((kebabKey = hyphenate(key)) === key || !hasOwn(rawProps, kebabKey))) {
        if (options) {
          if (rawPrevProps && // for camelCase
          (rawPrevProps[key] !== void 0 || // for kebab-case
          rawPrevProps[kebabKey] !== void 0)) {
            props2[key] = resolvePropValue(
              options,
              rawCurrentProps,
              key,
              void 0,
              instance,
              true
            );
          }
        } else {
          delete props2[key];
        }
      }
    }
    if (attrs !== rawCurrentProps) {
      for (const key in attrs) {
        if (!rawProps || !hasOwn(rawProps, key) && true) {
          delete attrs[key];
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (hasAttrsChanged) {
    trigger$1(instance.attrs, "set", "");
  }
}
function setFullProps(instance, rawProps, props2, attrs) {
  const [options, needCastKeys] = instance.propsOptions;
  let hasAttrsChanged = false;
  let rawCastValues;
  if (rawProps) {
    for (let key in rawProps) {
      if (isReservedProp(key)) {
        continue;
      }
      const value = rawProps[key];
      let camelKey;
      if (options && hasOwn(options, camelKey = camelize(key))) {
        if (!needCastKeys || !needCastKeys.includes(camelKey)) {
          props2[camelKey] = value;
        } else {
          (rawCastValues || (rawCastValues = {}))[camelKey] = value;
        }
      } else if (!isEmitListener(instance.emitsOptions, key)) {
        if (!(key in attrs) || value !== attrs[key]) {
          attrs[key] = value;
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (needCastKeys) {
    const rawCurrentProps = toRaw$1(props2);
    const castValues = rawCastValues || EMPTY_OBJ;
    for (let i = 0; i < needCastKeys.length; i++) {
      const key = needCastKeys[i];
      props2[key] = resolvePropValue(
        options,
        rawCurrentProps,
        key,
        castValues[key],
        instance,
        !hasOwn(castValues, key)
      );
    }
  }
  return hasAttrsChanged;
}
function resolvePropValue(options, props2, key, value, instance, isAbsent) {
  const opt = options[key];
  if (opt != null) {
    const hasDefault = hasOwn(opt, "default");
    if (hasDefault && value === void 0) {
      const defaultValue = opt.default;
      if (opt.type !== Function && !opt.skipFactory && isFunction(defaultValue)) {
        const { propsDefaults } = instance;
        if (key in propsDefaults) {
          value = propsDefaults[key];
        } else {
          const reset = setCurrentInstance(instance);
          value = propsDefaults[key] = defaultValue.call(
            null,
            props2
          );
          reset();
        }
      } else {
        value = defaultValue;
      }
      if (instance.ce) {
        instance.ce._setProp(key, value);
      }
    }
    if (opt[
      0
      /* shouldCast */
    ]) {
      if (isAbsent && !hasDefault) {
        value = false;
      } else if (opt[
        1
        /* shouldCastTrue */
      ] && (value === "" || value === hyphenate(key))) {
        value = true;
      }
    }
  }
  return value;
}
const mixinPropsCache = /* @__PURE__ */ new WeakMap();
function normalizePropsOptions(comp, appContext, asMixin = false) {
  const cache = asMixin ? mixinPropsCache : appContext.propsCache;
  const cached = cache.get(comp);
  if (cached) {
    return cached;
  }
  const raw = comp.props;
  const normalized = {};
  const needCastKeys = [];
  let hasExtends = false;
  if (!isFunction(comp)) {
    const extendProps = (raw2) => {
      hasExtends = true;
      const [props2, keys] = normalizePropsOptions(raw2, appContext, true);
      extend(normalized, props2);
      if (keys) needCastKeys.push(...keys);
    };
    if (!asMixin && appContext.mixins.length) {
      appContext.mixins.forEach(extendProps);
    }
    if (comp.extends) {
      extendProps(comp.extends);
    }
    if (comp.mixins) {
      comp.mixins.forEach(extendProps);
    }
  }
  if (!raw && !hasExtends) {
    if (isObject$1(comp)) {
      cache.set(comp, EMPTY_ARR);
    }
    return EMPTY_ARR;
  }
  if (isArray$2(raw)) {
    for (let i = 0; i < raw.length; i++) {
      const normalizedKey = camelize(raw[i]);
      if (validatePropName(normalizedKey)) {
        normalized[normalizedKey] = EMPTY_OBJ;
      }
    }
  } else if (raw) {
    for (const key in raw) {
      const normalizedKey = camelize(key);
      if (validatePropName(normalizedKey)) {
        const opt = raw[key];
        const prop = normalized[normalizedKey] = isArray$2(opt) || isFunction(opt) ? { type: opt } : extend({}, opt);
        const propType = prop.type;
        let shouldCast = false;
        let shouldCastTrue = true;
        if (isArray$2(propType)) {
          for (let index = 0; index < propType.length; ++index) {
            const type = propType[index];
            const typeName = isFunction(type) && type.name;
            if (typeName === "Boolean") {
              shouldCast = true;
              break;
            } else if (typeName === "String") {
              shouldCastTrue = false;
            }
          }
        } else {
          shouldCast = isFunction(propType) && propType.name === "Boolean";
        }
        prop[
          0
          /* shouldCast */
        ] = shouldCast;
        prop[
          1
          /* shouldCastTrue */
        ] = shouldCastTrue;
        if (shouldCast || hasOwn(prop, "default")) {
          needCastKeys.push(normalizedKey);
        }
      }
    }
  }
  const res = [normalized, needCastKeys];
  if (isObject$1(comp)) {
    cache.set(comp, res);
  }
  return res;
}
function validatePropName(key) {
  if (key[0] !== "$" && !isReservedProp(key)) {
    return true;
  }
  return false;
}
const isInternalKey = (key) => key[0] === "_" || key === "$stable";
const normalizeSlotValue = (value) => isArray$2(value) ? value.map(normalizeVNode) : [normalizeVNode(value)];
const normalizeSlot$1 = (key, rawSlot, ctx) => {
  if (rawSlot._n) {
    return rawSlot;
  }
  const normalized = withCtx((...args) => {
    if (false) ;
    return normalizeSlotValue(rawSlot(...args));
  }, ctx);
  normalized._c = false;
  return normalized;
};
const normalizeObjectSlots = (rawSlots, slots, instance) => {
  const ctx = rawSlots._ctx;
  for (const key in rawSlots) {
    if (isInternalKey(key)) continue;
    const value = rawSlots[key];
    if (isFunction(value)) {
      slots[key] = normalizeSlot$1(key, value, ctx);
    } else if (value != null) {
      const normalized = normalizeSlotValue(value);
      slots[key] = () => normalized;
    }
  }
};
const normalizeVNodeSlots = (instance, children) => {
  const normalized = normalizeSlotValue(children);
  instance.slots.default = () => normalized;
};
const assignSlots = (slots, children, optimized) => {
  for (const key in children) {
    if (optimized || key !== "_") {
      slots[key] = children[key];
    }
  }
};
const initSlots = (instance, children, optimized) => {
  const slots = instance.slots = createInternalObject();
  if (instance.vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      assignSlots(slots, children, optimized);
      if (optimized) {
        def(slots, "_", type, true);
      }
    } else {
      normalizeObjectSlots(children, slots);
    }
  } else if (children) {
    normalizeVNodeSlots(instance, children);
  }
};
const updateSlots = (instance, children, optimized) => {
  const { vnode, slots } = instance;
  let needDeletionCheck = true;
  let deletionComparisonTarget = EMPTY_OBJ;
  if (vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      if (optimized && type === 1) {
        needDeletionCheck = false;
      } else {
        assignSlots(slots, children, optimized);
      }
    } else {
      needDeletionCheck = !children.$stable;
      normalizeObjectSlots(children, slots);
    }
    deletionComparisonTarget = children;
  } else if (children) {
    normalizeVNodeSlots(instance, children);
    deletionComparisonTarget = { default: 1 };
  }
  if (needDeletionCheck) {
    for (const key in slots) {
      if (!isInternalKey(key) && deletionComparisonTarget[key] == null) {
        delete slots[key];
      }
    }
  }
};
const queuePostRenderEffect = queueEffectWithSuspense;
function createRenderer(options) {
  return baseCreateRenderer(options);
}
function baseCreateRenderer(options, createHydrationFns) {
  const target2 = getGlobalThis();
  target2.__VUE__ = true;
  {
    setDevtoolsHook$1(target2.__VUE_DEVTOOLS_GLOBAL_HOOK__, target2);
  }
  const {
    insert: hostInsert,
    remove: hostRemove,
    patchProp: hostPatchProp,
    createElement: hostCreateElement,
    createText: hostCreateText,
    createComment: hostCreateComment,
    setText: hostSetText,
    setElementText: hostSetElementText,
    parentNode: hostParentNode,
    nextSibling: hostNextSibling,
    setScopeId: hostSetScopeId = NOOP,
    insertStaticContent: hostInsertStaticContent
  } = options;
  const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, namespace = void 0, slotScopeIds = null, optimized = !!n2.dynamicChildren) => {
    if (n1 === n2) {
      return;
    }
    if (n1 && !isSameVNodeType(n1, n2)) {
      anchor = getNextHostNode(n1);
      unmount(n1, parentComponent, parentSuspense, true);
      n1 = null;
    }
    if (n2.patchFlag === -2) {
      optimized = false;
      n2.dynamicChildren = null;
    }
    const { type, ref: ref3, shapeFlag } = n2;
    switch (type) {
      case Text:
        processText(n1, n2, container, anchor);
        break;
      case Comment:
        processCommentNode(n1, n2, container, anchor);
        break;
      case Static:
        if (n1 == null) {
          mountStaticNode(n2, container, anchor, namespace);
        }
        break;
      case Fragment:
        processFragment(
          n1,
          n2,
          container,
          anchor,
          parentComponent,
          parentSuspense,
          namespace,
          slotScopeIds,
          optimized
        );
        break;
      default:
        if (shapeFlag & 1) {
          processElement(
            n1,
            n2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized
          );
        } else if (shapeFlag & 6) {
          processComponent(
            n1,
            n2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized
          );
        } else if (shapeFlag & 64) {
          type.process(
            n1,
            n2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized,
            internals
          );
        } else if (shapeFlag & 128) {
          type.process(
            n1,
            n2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized,
            internals
          );
        } else ;
    }
    if (ref3 != null && parentComponent) {
      setRef(ref3, n1 && n1.ref, parentSuspense, n2 || n1, !n2);
    }
  };
  const processText = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(
        n2.el = hostCreateText(n2.children),
        container,
        anchor
      );
    } else {
      const el = n2.el = n1.el;
      if (n2.children !== n1.children) {
        hostSetText(el, n2.children);
      }
    }
  };
  const processCommentNode = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(
        n2.el = hostCreateComment(n2.children || ""),
        container,
        anchor
      );
    } else {
      n2.el = n1.el;
    }
  };
  const mountStaticNode = (n2, container, anchor, namespace) => {
    [n2.el, n2.anchor] = hostInsertStaticContent(
      n2.children,
      container,
      anchor,
      namespace,
      n2.el,
      n2.anchor
    );
  };
  const moveStaticNode = ({ el, anchor }, container, nextSibling) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostInsert(el, container, nextSibling);
      el = next;
    }
    hostInsert(anchor, container, nextSibling);
  };
  const removeStaticNode = ({ el, anchor }) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostRemove(el);
      el = next;
    }
    hostRemove(anchor);
  };
  const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {
    if (n2.type === "svg") {
      namespace = "svg";
    } else if (n2.type === "math") {
      namespace = "mathml";
    }
    if (n1 == null) {
      mountElement(
        n2,
        container,
        anchor,
        parentComponent,
        parentSuspense,
        namespace,
        slotScopeIds,
        optimized
      );
    } else {
      patchElement(
        n1,
        n2,
        parentComponent,
        parentSuspense,
        namespace,
        slotScopeIds,
        optimized
      );
    }
  };
  const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {
    let el;
    let vnodeHook;
    const { props: props2, shapeFlag, transition, dirs } = vnode;
    el = vnode.el = hostCreateElement(
      vnode.type,
      namespace,
      props2 && props2.is,
      props2
    );
    if (shapeFlag & 8) {
      hostSetElementText(el, vnode.children);
    } else if (shapeFlag & 16) {
      mountChildren(
        vnode.children,
        el,
        null,
        parentComponent,
        parentSuspense,
        resolveChildrenNamespace(vnode, namespace),
        slotScopeIds,
        optimized
      );
    }
    if (dirs) {
      invokeDirectiveHook(vnode, null, parentComponent, "created");
    }
    setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);
    if (props2) {
      for (const key in props2) {
        if (key !== "value" && !isReservedProp(key)) {
          hostPatchProp(el, key, null, props2[key], namespace, parentComponent);
        }
      }
      if ("value" in props2) {
        hostPatchProp(el, "value", null, props2.value, namespace);
      }
      if (vnodeHook = props2.onVnodeBeforeMount) {
        invokeVNodeHook(vnodeHook, parentComponent, vnode);
      }
    }
    {
      def(el, "__vnode", vnode, true);
      def(el, "__vueParentComponent", parentComponent, true);
    }
    if (dirs) {
      invokeDirectiveHook(vnode, null, parentComponent, "beforeMount");
    }
    const needCallTransitionHooks = needTransition(parentSuspense, transition);
    if (needCallTransitionHooks) {
      transition.beforeEnter(el);
    }
    hostInsert(el, container, anchor);
    if ((vnodeHook = props2 && props2.onVnodeMounted) || needCallTransitionHooks || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        needCallTransitionHooks && transition.enter(el);
        dirs && invokeDirectiveHook(vnode, null, parentComponent, "mounted");
      }, parentSuspense);
    }
  };
  const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {
    if (scopeId) {
      hostSetScopeId(el, scopeId);
    }
    if (slotScopeIds) {
      for (let i = 0; i < slotScopeIds.length; i++) {
        hostSetScopeId(el, slotScopeIds[i]);
      }
    }
    if (parentComponent) {
      let subTree = parentComponent.subTree;
      if (vnode === subTree || isSuspense(subTree.type) && (subTree.ssContent === vnode || subTree.ssFallback === vnode)) {
        const parentVNode = parentComponent.vnode;
        setScopeId(
          el,
          parentVNode,
          parentVNode.scopeId,
          parentVNode.slotScopeIds,
          parentComponent.parent
        );
      }
    }
  };
  const mountChildren = (children, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, start2 = 0) => {
    for (let i = start2; i < children.length; i++) {
      const child = children[i] = optimized ? cloneIfMounted(children[i]) : normalizeVNode(children[i]);
      patch(
        null,
        child,
        container,
        anchor,
        parentComponent,
        parentSuspense,
        namespace,
        slotScopeIds,
        optimized
      );
    }
  };
  const patchElement = (n1, n2, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {
    const el = n2.el = n1.el;
    {
      el.__vnode = n2;
    }
    let { patchFlag, dynamicChildren, dirs } = n2;
    patchFlag |= n1.patchFlag & 16;
    const oldProps = n1.props || EMPTY_OBJ;
    const newProps = n2.props || EMPTY_OBJ;
    let vnodeHook;
    parentComponent && toggleRecurse(parentComponent, false);
    if (vnodeHook = newProps.onVnodeBeforeUpdate) {
      invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
    }
    if (dirs) {
      invokeDirectiveHook(n2, n1, parentComponent, "beforeUpdate");
    }
    parentComponent && toggleRecurse(parentComponent, true);
    if (oldProps.innerHTML && newProps.innerHTML == null || oldProps.textContent && newProps.textContent == null) {
      hostSetElementText(el, "");
    }
    if (dynamicChildren) {
      patchBlockChildren(
        n1.dynamicChildren,
        dynamicChildren,
        el,
        parentComponent,
        parentSuspense,
        resolveChildrenNamespace(n2, namespace),
        slotScopeIds
      );
    } else if (!optimized) {
      patchChildren(
        n1,
        n2,
        el,
        null,
        parentComponent,
        parentSuspense,
        resolveChildrenNamespace(n2, namespace),
        slotScopeIds,
        false
      );
    }
    if (patchFlag > 0) {
      if (patchFlag & 16) {
        patchProps(el, oldProps, newProps, parentComponent, namespace);
      } else {
        if (patchFlag & 2) {
          if (oldProps.class !== newProps.class) {
            hostPatchProp(el, "class", null, newProps.class, namespace);
          }
        }
        if (patchFlag & 4) {
          hostPatchProp(el, "style", oldProps.style, newProps.style, namespace);
        }
        if (patchFlag & 8) {
          const propsToUpdate = n2.dynamicProps;
          for (let i = 0; i < propsToUpdate.length; i++) {
            const key = propsToUpdate[i];
            const prev = oldProps[key];
            const next = newProps[key];
            if (next !== prev || key === "value") {
              hostPatchProp(el, key, prev, next, namespace, parentComponent);
            }
          }
        }
      }
      if (patchFlag & 1) {
        if (n1.children !== n2.children) {
          hostSetElementText(el, n2.children);
        }
      }
    } else if (!optimized && dynamicChildren == null) {
      patchProps(el, oldProps, newProps, parentComponent, namespace);
    }
    if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
        dirs && invokeDirectiveHook(n2, n1, parentComponent, "updated");
      }, parentSuspense);
    }
  };
  const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, namespace, slotScopeIds) => {
    for (let i = 0; i < newChildren.length; i++) {
      const oldVNode = oldChildren[i];
      const newVNode = newChildren[i];
      const container = (
        // oldVNode may be an errored async setup() component inside Suspense
        // which will not have a mounted element
        oldVNode.el && // - In the case of a Fragment, we need to provide the actual parent
        // of the Fragment itself so it can move its children.
        (oldVNode.type === Fragment || // - In the case of different nodes, there is going to be a replacement
        // which also requires the correct parent container
        !isSameVNodeType(oldVNode, newVNode) || // - In the case of a component, it could contain anything.
        oldVNode.shapeFlag & (6 | 64)) ? hostParentNode(oldVNode.el) : (
          // In other cases, the parent container is not actually used so we
          // just pass the block element here to avoid a DOM parentNode call.
          fallbackContainer
        )
      );
      patch(
        oldVNode,
        newVNode,
        container,
        null,
        parentComponent,
        parentSuspense,
        namespace,
        slotScopeIds,
        true
      );
    }
  };
  const patchProps = (el, oldProps, newProps, parentComponent, namespace) => {
    if (oldProps !== newProps) {
      if (oldProps !== EMPTY_OBJ) {
        for (const key in oldProps) {
          if (!isReservedProp(key) && !(key in newProps)) {
            hostPatchProp(
              el,
              key,
              oldProps[key],
              null,
              namespace,
              parentComponent
            );
          }
        }
      }
      for (const key in newProps) {
        if (isReservedProp(key)) continue;
        const next = newProps[key];
        const prev = oldProps[key];
        if (next !== prev && key !== "value") {
          hostPatchProp(el, key, prev, next, namespace, parentComponent);
        }
      }
      if ("value" in newProps) {
        hostPatchProp(el, "value", oldProps.value, newProps.value, namespace);
      }
    }
  };
  const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {
    const fragmentStartAnchor = n2.el = n1 ? n1.el : hostCreateText("");
    const fragmentEndAnchor = n2.anchor = n1 ? n1.anchor : hostCreateText("");
    let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;
    if (fragmentSlotScopeIds) {
      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;
    }
    if (n1 == null) {
      hostInsert(fragmentStartAnchor, container, anchor);
      hostInsert(fragmentEndAnchor, container, anchor);
      mountChildren(
        // #10007
        // such fragment like `<></>` will be compiled into
        // a fragment which doesn't have a children.
        // In this case fallback to an empty array
        n2.children || [],
        container,
        fragmentEndAnchor,
        parentComponent,
        parentSuspense,
        namespace,
        slotScopeIds,
        optimized
      );
    } else {
      if (patchFlag > 0 && patchFlag & 64 && dynamicChildren && // #2715 the previous fragment could've been a BAILed one as a result
      // of renderSlot() with no valid children
      n1.dynamicChildren) {
        patchBlockChildren(
          n1.dynamicChildren,
          dynamicChildren,
          container,
          parentComponent,
          parentSuspense,
          namespace,
          slotScopeIds
        );
        if (
          // #2080 if the stable fragment has a key, it's a <template v-for> that may
          //  get moved around. Make sure all root level vnodes inherit el.
          // #2134 or if it's a component root, it may also get moved around
          // as the component is being moved.
          n2.key != null || parentComponent && n2 === parentComponent.subTree
        ) {
          traverseStaticChildren(
            n1,
            n2,
            true
            /* shallow */
          );
        }
      } else {
        patchChildren(
          n1,
          n2,
          container,
          fragmentEndAnchor,
          parentComponent,
          parentSuspense,
          namespace,
          slotScopeIds,
          optimized
        );
      }
    }
  };
  const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {
    n2.slotScopeIds = slotScopeIds;
    if (n1 == null) {
      if (n2.shapeFlag & 512) {
        parentComponent.ctx.activate(
          n2,
          container,
          anchor,
          namespace,
          optimized
        );
      } else {
        mountComponent(
          n2,
          container,
          anchor,
          parentComponent,
          parentSuspense,
          namespace,
          optimized
        );
      }
    } else {
      updateComponent(n1, n2, optimized);
    }
  };
  const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, namespace, optimized) => {
    const instance = initialVNode.component = createComponentInstance(
      initialVNode,
      parentComponent,
      parentSuspense
    );
    if (isKeepAlive(initialVNode)) {
      instance.ctx.renderer = internals;
    }
    {
      setupComponent(instance, false, optimized);
    }
    if (instance.asyncDep) {
      parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect, optimized);
      if (!initialVNode.el) {
        const placeholder = instance.subTree = createVNode(Comment);
        processCommentNode(null, placeholder, container, anchor);
      }
    } else {
      setupRenderEffect(
        instance,
        initialVNode,
        container,
        anchor,
        parentSuspense,
        namespace,
        optimized
      );
    }
  };
  const updateComponent = (n1, n2, optimized) => {
    const instance = n2.component = n1.component;
    if (shouldUpdateComponent(n1, n2, optimized)) {
      if (instance.asyncDep && !instance.asyncResolved) {
        updateComponentPreRender(instance, n2, optimized);
        return;
      } else {
        instance.next = n2;
        instance.update();
      }
    } else {
      n2.el = n1.el;
      instance.vnode = n2;
    }
  };
  const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, namespace, optimized) => {
    const componentUpdateFn = () => {
      if (!instance.isMounted) {
        let vnodeHook;
        const { el, props: props2 } = initialVNode;
        const { bm, m, parent, root, type } = instance;
        const isAsyncWrapperVNode = isAsyncWrapper(initialVNode);
        toggleRecurse(instance, false);
        if (bm) {
          invokeArrayFns(bm);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props2 && props2.onVnodeBeforeMount)) {
          invokeVNodeHook(vnodeHook, parent, initialVNode);
        }
        toggleRecurse(instance, true);
        {
          if (root.ce) {
            root.ce._injectChildStyle(type);
          }
          const subTree = instance.subTree = renderComponentRoot(instance);
          patch(
            null,
            subTree,
            container,
            anchor,
            instance,
            parentSuspense,
            namespace
          );
          initialVNode.el = subTree.el;
        }
        if (m) {
          queuePostRenderEffect(m, parentSuspense);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props2 && props2.onVnodeMounted)) {
          const scopedInitialVNode = initialVNode;
          queuePostRenderEffect(
            () => invokeVNodeHook(vnodeHook, parent, scopedInitialVNode),
            parentSuspense
          );
        }
        if (initialVNode.shapeFlag & 256 || parent && isAsyncWrapper(parent.vnode) && parent.vnode.shapeFlag & 256) {
          instance.a && queuePostRenderEffect(instance.a, parentSuspense);
        }
        instance.isMounted = true;
        {
          devtoolsComponentAdded(instance);
        }
        initialVNode = container = anchor = null;
      } else {
        let { next, bu, u, parent, vnode } = instance;
        {
          const nonHydratedAsyncRoot = locateNonHydratedAsyncRoot(instance);
          if (nonHydratedAsyncRoot) {
            if (next) {
              next.el = vnode.el;
              updateComponentPreRender(instance, next, optimized);
            }
            nonHydratedAsyncRoot.asyncDep.then(() => {
              if (!instance.isUnmounted) {
                componentUpdateFn();
              }
            });
            return;
          }
        }
        let originNext = next;
        let vnodeHook;
        toggleRecurse(instance, false);
        if (next) {
          next.el = vnode.el;
          updateComponentPreRender(instance, next, optimized);
        } else {
          next = vnode;
        }
        if (bu) {
          invokeArrayFns(bu);
        }
        if (vnodeHook = next.props && next.props.onVnodeBeforeUpdate) {
          invokeVNodeHook(vnodeHook, parent, next, vnode);
        }
        toggleRecurse(instance, true);
        const nextTree = renderComponentRoot(instance);
        const prevTree = instance.subTree;
        instance.subTree = nextTree;
        patch(
          prevTree,
          nextTree,
          // parent may have changed if it's in a teleport
          hostParentNode(prevTree.el),
          // anchor may have changed if it's in a fragment
          getNextHostNode(prevTree),
          instance,
          parentSuspense,
          namespace
        );
        next.el = nextTree.el;
        if (originNext === null) {
          updateHOCHostEl(instance, nextTree.el);
        }
        if (u) {
          queuePostRenderEffect(u, parentSuspense);
        }
        if (vnodeHook = next.props && next.props.onVnodeUpdated) {
          queuePostRenderEffect(
            () => invokeVNodeHook(vnodeHook, parent, next, vnode),
            parentSuspense
          );
        }
        {
          devtoolsComponentUpdated(instance);
        }
      }
    };
    instance.scope.on();
    const effect2 = instance.effect = new ReactiveEffect(componentUpdateFn);
    instance.scope.off();
    const update2 = instance.update = effect2.run.bind(effect2);
    const job = instance.job = effect2.runIfDirty.bind(effect2);
    job.i = instance;
    job.id = instance.uid;
    effect2.scheduler = () => queueJob(job);
    toggleRecurse(instance, true);
    update2();
  };
  const updateComponentPreRender = (instance, nextVNode, optimized) => {
    nextVNode.component = instance;
    const prevProps = instance.vnode.props;
    instance.vnode = nextVNode;
    instance.next = null;
    updateProps(instance, nextVNode.props, prevProps, optimized);
    updateSlots(instance, nextVNode.children, optimized);
    pauseTracking();
    flushPreFlushCbs(instance);
    resetTracking();
  };
  const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized = false) => {
    const c1 = n1 && n1.children;
    const prevShapeFlag = n1 ? n1.shapeFlag : 0;
    const c2 = n2.children;
    const { patchFlag, shapeFlag } = n2;
    if (patchFlag > 0) {
      if (patchFlag & 128) {
        patchKeyedChildren(
          c1,
          c2,
          container,
          anchor,
          parentComponent,
          parentSuspense,
          namespace,
          slotScopeIds,
          optimized
        );
        return;
      } else if (patchFlag & 256) {
        patchUnkeyedChildren(
          c1,
          c2,
          container,
          anchor,
          parentComponent,
          parentSuspense,
          namespace,
          slotScopeIds,
          optimized
        );
        return;
      }
    }
    if (shapeFlag & 8) {
      if (prevShapeFlag & 16) {
        unmountChildren(c1, parentComponent, parentSuspense);
      }
      if (c2 !== c1) {
        hostSetElementText(container, c2);
      }
    } else {
      if (prevShapeFlag & 16) {
        if (shapeFlag & 16) {
          patchKeyedChildren(
            c1,
            c2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized
          );
        } else {
          unmountChildren(c1, parentComponent, parentSuspense, true);
        }
      } else {
        if (prevShapeFlag & 8) {
          hostSetElementText(container, "");
        }
        if (shapeFlag & 16) {
          mountChildren(
            c2,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized
          );
        }
      }
    }
  };
  const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {
    c1 = c1 || EMPTY_ARR;
    c2 = c2 || EMPTY_ARR;
    const oldLength = c1.length;
    const newLength = c2.length;
    const commonLength = Math.min(oldLength, newLength);
    let i;
    for (i = 0; i < commonLength; i++) {
      const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
      patch(
        c1[i],
        nextChild,
        container,
        null,
        parentComponent,
        parentSuspense,
        namespace,
        slotScopeIds,
        optimized
      );
    }
    if (oldLength > newLength) {
      unmountChildren(
        c1,
        parentComponent,
        parentSuspense,
        true,
        false,
        commonLength
      );
    } else {
      mountChildren(
        c2,
        container,
        anchor,
        parentComponent,
        parentSuspense,
        namespace,
        slotScopeIds,
        optimized,
        commonLength
      );
    }
  };
  const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {
    let i = 0;
    const l2 = c2.length;
    let e1 = c1.length - 1;
    let e2 = l2 - 1;
    while (i <= e1 && i <= e2) {
      const n1 = c1[i];
      const n2 = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
      if (isSameVNodeType(n1, n2)) {
        patch(
          n1,
          n2,
          container,
          null,
          parentComponent,
          parentSuspense,
          namespace,
          slotScopeIds,
          optimized
        );
      } else {
        break;
      }
      i++;
    }
    while (i <= e1 && i <= e2) {
      const n1 = c1[e1];
      const n2 = c2[e2] = optimized ? cloneIfMounted(c2[e2]) : normalizeVNode(c2[e2]);
      if (isSameVNodeType(n1, n2)) {
        patch(
          n1,
          n2,
          container,
          null,
          parentComponent,
          parentSuspense,
          namespace,
          slotScopeIds,
          optimized
        );
      } else {
        break;
      }
      e1--;
      e2--;
    }
    if (i > e1) {
      if (i <= e2) {
        const nextPos = e2 + 1;
        const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;
        while (i <= e2) {
          patch(
            null,
            c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]),
            container,
            anchor,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized
          );
          i++;
        }
      }
    } else if (i > e2) {
      while (i <= e1) {
        unmount(c1[i], parentComponent, parentSuspense, true);
        i++;
      }
    } else {
      const s1 = i;
      const s2 = i;
      const keyToNewIndexMap = /* @__PURE__ */ new Map();
      for (i = s2; i <= e2; i++) {
        const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
        if (nextChild.key != null) {
          keyToNewIndexMap.set(nextChild.key, i);
        }
      }
      let j;
      let patched = 0;
      const toBePatched = e2 - s2 + 1;
      let moved = false;
      let maxNewIndexSoFar = 0;
      const newIndexToOldIndexMap = new Array(toBePatched);
      for (i = 0; i < toBePatched; i++) newIndexToOldIndexMap[i] = 0;
      for (i = s1; i <= e1; i++) {
        const prevChild = c1[i];
        if (patched >= toBePatched) {
          unmount(prevChild, parentComponent, parentSuspense, true);
          continue;
        }
        let newIndex;
        if (prevChild.key != null) {
          newIndex = keyToNewIndexMap.get(prevChild.key);
        } else {
          for (j = s2; j <= e2; j++) {
            if (newIndexToOldIndexMap[j - s2] === 0 && isSameVNodeType(prevChild, c2[j])) {
              newIndex = j;
              break;
            }
          }
        }
        if (newIndex === void 0) {
          unmount(prevChild, parentComponent, parentSuspense, true);
        } else {
          newIndexToOldIndexMap[newIndex - s2] = i + 1;
          if (newIndex >= maxNewIndexSoFar) {
            maxNewIndexSoFar = newIndex;
          } else {
            moved = true;
          }
          patch(
            prevChild,
            c2[newIndex],
            container,
            null,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized
          );
          patched++;
        }
      }
      const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : EMPTY_ARR;
      j = increasingNewIndexSequence.length - 1;
      for (i = toBePatched - 1; i >= 0; i--) {
        const nextIndex = s2 + i;
        const nextChild = c2[nextIndex];
        const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;
        if (newIndexToOldIndexMap[i] === 0) {
          patch(
            null,
            nextChild,
            container,
            anchor,
            parentComponent,
            parentSuspense,
            namespace,
            slotScopeIds,
            optimized
          );
        } else if (moved) {
          if (j < 0 || i !== increasingNewIndexSequence[j]) {
            move(nextChild, container, anchor, 2);
          } else {
            j--;
          }
        }
      }
    }
  };
  const move = (vnode, container, anchor, moveType, parentSuspense = null) => {
    const { el, type, transition, children, shapeFlag } = vnode;
    if (shapeFlag & 6) {
      move(vnode.component.subTree, container, anchor, moveType);
      return;
    }
    if (shapeFlag & 128) {
      vnode.suspense.move(container, anchor, moveType);
      return;
    }
    if (shapeFlag & 64) {
      type.move(vnode, container, anchor, internals);
      return;
    }
    if (type === Fragment) {
      hostInsert(el, container, anchor);
      for (let i = 0; i < children.length; i++) {
        move(children[i], container, anchor, moveType);
      }
      hostInsert(vnode.anchor, container, anchor);
      return;
    }
    if (type === Static) {
      moveStaticNode(vnode, container, anchor);
      return;
    }
    const needTransition2 = moveType !== 2 && shapeFlag & 1 && transition;
    if (needTransition2) {
      if (moveType === 0) {
        transition.beforeEnter(el);
        hostInsert(el, container, anchor);
        queuePostRenderEffect(() => transition.enter(el), parentSuspense);
      } else {
        const { leave, delayLeave, afterLeave } = transition;
        const remove22 = () => hostInsert(el, container, anchor);
        const performLeave = () => {
          leave(el, () => {
            remove22();
            afterLeave && afterLeave();
          });
        };
        if (delayLeave) {
          delayLeave(el, remove22, performLeave);
        } else {
          performLeave();
        }
      }
    } else {
      hostInsert(el, container, anchor);
    }
  };
  const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {
    const {
      type,
      props: props2,
      ref: ref3,
      children,
      dynamicChildren,
      shapeFlag,
      patchFlag,
      dirs,
      cacheIndex
    } = vnode;
    if (patchFlag === -2) {
      optimized = false;
    }
    if (ref3 != null) {
      setRef(ref3, null, parentSuspense, vnode, true);
    }
    if (cacheIndex != null) {
      parentComponent.renderCache[cacheIndex] = void 0;
    }
    if (shapeFlag & 256) {
      parentComponent.ctx.deactivate(vnode);
      return;
    }
    const shouldInvokeDirs = shapeFlag & 1 && dirs;
    const shouldInvokeVnodeHook = !isAsyncWrapper(vnode);
    let vnodeHook;
    if (shouldInvokeVnodeHook && (vnodeHook = props2 && props2.onVnodeBeforeUnmount)) {
      invokeVNodeHook(vnodeHook, parentComponent, vnode);
    }
    if (shapeFlag & 6) {
      unmountComponent(vnode.component, parentSuspense, doRemove);
    } else {
      if (shapeFlag & 128) {
        vnode.suspense.unmount(parentSuspense, doRemove);
        return;
      }
      if (shouldInvokeDirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "beforeUnmount");
      }
      if (shapeFlag & 64) {
        vnode.type.remove(
          vnode,
          parentComponent,
          parentSuspense,
          internals,
          doRemove
        );
      } else if (dynamicChildren && // #5154
      // when v-once is used inside a block, setBlockTracking(-1) marks the
      // parent block with hasOnce: true
      // so that it doesn't take the fast path during unmount - otherwise
      // components nested in v-once are never unmounted.
      !dynamicChildren.hasOnce && // #1153: fast path should not be taken for non-stable (v-for) fragments
      (type !== Fragment || patchFlag > 0 && patchFlag & 64)) {
        unmountChildren(
          dynamicChildren,
          parentComponent,
          parentSuspense,
          false,
          true
        );
      } else if (type === Fragment && patchFlag & (128 | 256) || !optimized && shapeFlag & 16) {
        unmountChildren(children, parentComponent, parentSuspense);
      }
      if (doRemove) {
        remove2(vnode);
      }
    }
    if (shouldInvokeVnodeHook && (vnodeHook = props2 && props2.onVnodeUnmounted) || shouldInvokeDirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        shouldInvokeDirs && invokeDirectiveHook(vnode, null, parentComponent, "unmounted");
      }, parentSuspense);
    }
  };
  const remove2 = (vnode) => {
    const { type, el, anchor, transition } = vnode;
    if (type === Fragment) {
      {
        removeFragment(el, anchor);
      }
      return;
    }
    if (type === Static) {
      removeStaticNode(vnode);
      return;
    }
    const performRemove = () => {
      hostRemove(el);
      if (transition && !transition.persisted && transition.afterLeave) {
        transition.afterLeave();
      }
    };
    if (vnode.shapeFlag & 1 && transition && !transition.persisted) {
      const { leave, delayLeave } = transition;
      const performLeave = () => leave(el, performRemove);
      if (delayLeave) {
        delayLeave(vnode.el, performRemove, performLeave);
      } else {
        performLeave();
      }
    } else {
      performRemove();
    }
  };
  const removeFragment = (cur, end) => {
    let next;
    while (cur !== end) {
      next = hostNextSibling(cur);
      hostRemove(cur);
      cur = next;
    }
    hostRemove(end);
  };
  const unmountComponent = (instance, parentSuspense, doRemove) => {
    const { bum, scope, job, subTree, um, m, a } = instance;
    invalidateMount(m);
    invalidateMount(a);
    if (bum) {
      invokeArrayFns(bum);
    }
    scope.stop();
    if (job) {
      job.flags |= 8;
      unmount(subTree, instance, parentSuspense, doRemove);
    }
    if (um) {
      queuePostRenderEffect(um, parentSuspense);
    }
    queuePostRenderEffect(() => {
      instance.isUnmounted = true;
    }, parentSuspense);
    if (parentSuspense && parentSuspense.pendingBranch && !parentSuspense.isUnmounted && instance.asyncDep && !instance.asyncResolved && instance.suspenseId === parentSuspense.pendingId) {
      parentSuspense.deps--;
      if (parentSuspense.deps === 0) {
        parentSuspense.resolve();
      }
    }
    {
      devtoolsComponentRemoved(instance);
    }
  };
  const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start2 = 0) => {
    for (let i = start2; i < children.length; i++) {
      unmount(children[i], parentComponent, parentSuspense, doRemove, optimized);
    }
  };
  const getNextHostNode = (vnode) => {
    if (vnode.shapeFlag & 6) {
      return getNextHostNode(vnode.component.subTree);
    }
    if (vnode.shapeFlag & 128) {
      return vnode.suspense.next();
    }
    const el = hostNextSibling(vnode.anchor || vnode.el);
    const teleportEnd = el && el[TeleportEndKey];
    return teleportEnd ? hostNextSibling(teleportEnd) : el;
  };
  let isFlushing = false;
  const render = (vnode, container, namespace) => {
    if (vnode == null) {
      if (container._vnode) {
        unmount(container._vnode, null, null, true);
      }
    } else {
      patch(
        container._vnode || null,
        vnode,
        container,
        null,
        null,
        null,
        namespace
      );
    }
    container._vnode = vnode;
    if (!isFlushing) {
      isFlushing = true;
      flushPreFlushCbs();
      flushPostFlushCbs();
      isFlushing = false;
    }
  };
  const internals = {
    p: patch,
    um: unmount,
    m: move,
    r: remove2,
    mt: mountComponent,
    mc: mountChildren,
    pc: patchChildren,
    pbc: patchBlockChildren,
    n: getNextHostNode,
    o: options
  };
  let hydrate;
  return {
    render,
    hydrate,
    createApp: createAppAPI(render)
  };
}
function resolveChildrenNamespace({ type, props: props2 }, currentNamespace) {
  return currentNamespace === "svg" && type === "foreignObject" || currentNamespace === "mathml" && type === "annotation-xml" && props2 && props2.encoding && props2.encoding.includes("html") ? void 0 : currentNamespace;
}
function toggleRecurse({ effect: effect2, job }, allowed) {
  if (allowed) {
    effect2.flags |= 32;
    job.flags |= 4;
  } else {
    effect2.flags &= -33;
    job.flags &= -5;
  }
}
function needTransition(parentSuspense, transition) {
  return (!parentSuspense || parentSuspense && !parentSuspense.pendingBranch) && transition && !transition.persisted;
}
function traverseStaticChildren(n1, n2, shallow = false) {
  const ch1 = n1.children;
  const ch2 = n2.children;
  if (isArray$2(ch1) && isArray$2(ch2)) {
    for (let i = 0; i < ch1.length; i++) {
      const c1 = ch1[i];
      let c2 = ch2[i];
      if (c2.shapeFlag & 1 && !c2.dynamicChildren) {
        if (c2.patchFlag <= 0 || c2.patchFlag === 32) {
          c2 = ch2[i] = cloneIfMounted(ch2[i]);
          c2.el = c1.el;
        }
        if (!shallow && c2.patchFlag !== -2)
          traverseStaticChildren(c1, c2);
      }
      if (c2.type === Text) {
        c2.el = c1.el;
      }
    }
  }
}
function getSequence(arr) {
  const p2 = arr.slice();
  const result = [0];
  let i, j, u, v, c;
  const len = arr.length;
  for (i = 0; i < len; i++) {
    const arrI = arr[i];
    if (arrI !== 0) {
      j = result[result.length - 1];
      if (arr[j] < arrI) {
        p2[i] = j;
        result.push(i);
        continue;
      }
      u = 0;
      v = result.length - 1;
      while (u < v) {
        c = u + v >> 1;
        if (arr[result[c]] < arrI) {
          u = c + 1;
        } else {
          v = c;
        }
      }
      if (arrI < arr[result[u]]) {
        if (u > 0) {
          p2[i] = result[u - 1];
        }
        result[u] = i;
      }
    }
  }
  u = result.length;
  v = result[u - 1];
  while (u-- > 0) {
    result[u] = v;
    v = p2[v];
  }
  return result;
}
function locateNonHydratedAsyncRoot(instance) {
  const subComponent = instance.subTree.component;
  if (subComponent) {
    if (subComponent.asyncDep && !subComponent.asyncResolved) {
      return subComponent;
    } else {
      return locateNonHydratedAsyncRoot(subComponent);
    }
  }
}
function invalidateMount(hooks2) {
  if (hooks2) {
    for (let i = 0; i < hooks2.length; i++)
      hooks2[i].flags |= 8;
  }
}
const ssrContextKey = Symbol.for("v-scx");
const useSSRContext = () => {
  {
    const ctx = inject(ssrContextKey);
    return ctx;
  }
};
function watchEffect(effect2, options) {
  return doWatch(effect2, null, options);
}
function watch(source, cb, options) {
  return doWatch(source, cb, options);
}
function doWatch(source, cb, options = EMPTY_OBJ) {
  const { immediate, deep, flush, once } = options;
  const baseWatchOptions = extend({}, options);
  const runsImmediately = cb && immediate || !cb && flush !== "post";
  let ssrCleanup;
  if (isInSSRComponentSetup) {
    if (flush === "sync") {
      const ctx = useSSRContext();
      ssrCleanup = ctx.__watcherHandles || (ctx.__watcherHandles = []);
    } else if (!runsImmediately) {
      const watchStopHandle = () => {
      };
      watchStopHandle.stop = NOOP;
      watchStopHandle.resume = NOOP;
      watchStopHandle.pause = NOOP;
      return watchStopHandle;
    }
  }
  const instance = currentInstance;
  baseWatchOptions.call = (fn, type, args) => callWithAsyncErrorHandling(fn, instance, type, args);
  let isPre = false;
  if (flush === "post") {
    baseWatchOptions.scheduler = (job) => {
      queuePostRenderEffect(job, instance && instance.suspense);
    };
  } else if (flush !== "sync") {
    isPre = true;
    baseWatchOptions.scheduler = (job, isFirstRun) => {
      if (isFirstRun) {
        job();
      } else {
        queueJob(job);
      }
    };
  }
  baseWatchOptions.augmentJob = (job) => {
    if (cb) {
      job.flags |= 4;
    }
    if (isPre) {
      job.flags |= 2;
      if (instance) {
        job.id = instance.uid;
        job.i = instance;
      }
    }
  };
  const watchHandle = watch$1(source, cb, baseWatchOptions);
  if (isInSSRComponentSetup) {
    if (ssrCleanup) {
      ssrCleanup.push(watchHandle);
    } else if (runsImmediately) {
      watchHandle();
    }
  }
  return watchHandle;
}
function instanceWatch(source, value, options) {
  const publicThis = this.proxy;
  const getter = isString$1(source) ? source.includes(".") ? createPathGetter(publicThis, source) : () => publicThis[source] : source.bind(publicThis, publicThis);
  let cb;
  if (isFunction(value)) {
    cb = value;
  } else {
    cb = value.handler;
    options = value;
  }
  const reset = setCurrentInstance(this);
  const res = doWatch(getter, cb.bind(publicThis), options);
  reset();
  return res;
}
function createPathGetter(ctx, path) {
  const segments = path.split(".");
  return () => {
    let cur = ctx;
    for (let i = 0; i < segments.length && cur; i++) {
      cur = cur[segments[i]];
    }
    return cur;
  };
}
const getModelModifiers = (props2, modelName) => {
  return modelName === "modelValue" || modelName === "model-value" ? props2.modelModifiers : props2[`${modelName}Modifiers`] || props2[`${camelize(modelName)}Modifiers`] || props2[`${hyphenate(modelName)}Modifiers`];
};
function emit(instance, event, ...rawArgs) {
  if (instance.isUnmounted) return;
  const props2 = instance.vnode.props || EMPTY_OBJ;
  let args = rawArgs;
  const isModelListener2 = event.startsWith("update:");
  const modifiers = isModelListener2 && getModelModifiers(props2, event.slice(7));
  if (modifiers) {
    if (modifiers.trim) {
      args = rawArgs.map((a) => isString$1(a) ? a.trim() : a);
    }
    if (modifiers.number) {
      args = rawArgs.map(looseToNumber);
    }
  }
  {
    devtoolsComponentEmit(instance, event, args);
  }
  let handlerName;
  let handler = props2[handlerName = toHandlerKey(event)] || // also try camelCase event handler (#2249)
  props2[handlerName = toHandlerKey(camelize(event))];
  if (!handler && isModelListener2) {
    handler = props2[handlerName = toHandlerKey(hyphenate(event))];
  }
  if (handler) {
    callWithAsyncErrorHandling(
      handler,
      instance,
      6,
      args
    );
  }
  const onceHandler = props2[handlerName + `Once`];
  if (onceHandler) {
    if (!instance.emitted) {
      instance.emitted = {};
    } else if (instance.emitted[handlerName]) {
      return;
    }
    instance.emitted[handlerName] = true;
    callWithAsyncErrorHandling(
      onceHandler,
      instance,
      6,
      args
    );
  }
}
function normalizeEmitsOptions(comp, appContext, asMixin = false) {
  const cache = appContext.emitsCache;
  const cached = cache.get(comp);
  if (cached !== void 0) {
    return cached;
  }
  const raw = comp.emits;
  let normalized = {};
  let hasExtends = false;
  if (!isFunction(comp)) {
    const extendEmits = (raw2) => {
      const normalizedFromExtend = normalizeEmitsOptions(raw2, appContext, true);
      if (normalizedFromExtend) {
        hasExtends = true;
        extend(normalized, normalizedFromExtend);
      }
    };
    if (!asMixin && appContext.mixins.length) {
      appContext.mixins.forEach(extendEmits);
    }
    if (comp.extends) {
      extendEmits(comp.extends);
    }
    if (comp.mixins) {
      comp.mixins.forEach(extendEmits);
    }
  }
  if (!raw && !hasExtends) {
    if (isObject$1(comp)) {
      cache.set(comp, null);
    }
    return null;
  }
  if (isArray$2(raw)) {
    raw.forEach((key) => normalized[key] = null);
  } else {
    extend(normalized, raw);
  }
  if (isObject$1(comp)) {
    cache.set(comp, normalized);
  }
  return normalized;
}
function isEmitListener(options, key) {
  if (!options || !isOn(key)) {
    return false;
  }
  key = key.slice(2).replace(/Once$/, "");
  return hasOwn(options, key[0].toLowerCase() + key.slice(1)) || hasOwn(options, hyphenate(key)) || hasOwn(options, key);
}
function markAttrsAccessed() {
}
function renderComponentRoot(instance) {
  const {
    type: Component,
    vnode,
    proxy,
    withProxy,
    propsOptions: [propsOptions],
    slots,
    attrs,
    emit: emit2,
    render,
    renderCache,
    props: props2,
    data,
    setupState,
    ctx,
    inheritAttrs
  } = instance;
  const prev = setCurrentRenderingInstance(instance);
  let result;
  let fallthroughAttrs;
  try {
    if (vnode.shapeFlag & 4) {
      const proxyToUse = withProxy || proxy;
      const thisProxy = false ? new Proxy(proxyToUse, {
        get(target2, key, receiver) {
          warn$1(
            `Property '${String(
              key
            )}' was accessed via 'this'. Avoid using 'this' in templates.`
          );
          return Reflect.get(target2, key, receiver);
        }
      }) : proxyToUse;
      result = normalizeVNode(
        render.call(
          thisProxy,
          proxyToUse,
          renderCache,
          false ? shallowReadonly(props2) : props2,
          setupState,
          data,
          ctx
        )
      );
      fallthroughAttrs = attrs;
    } else {
      const render2 = Component;
      if (false) ;
      result = normalizeVNode(
        render2.length > 1 ? render2(
          false ? shallowReadonly(props2) : props2,
          false ? {
            get attrs() {
              markAttrsAccessed();
              return shallowReadonly(attrs);
            },
            slots,
            emit: emit2
          } : { attrs, slots, emit: emit2 }
        ) : render2(
          false ? shallowReadonly(props2) : props2,
          null
        )
      );
      fallthroughAttrs = Component.props ? attrs : getFunctionalFallthrough(attrs);
    }
  } catch (err) {
    blockStack.length = 0;
    handleError(err, instance, 1);
    result = createVNode(Comment);
  }
  let root = result;
  if (fallthroughAttrs && inheritAttrs !== false) {
    const keys = Object.keys(fallthroughAttrs);
    const { shapeFlag } = root;
    if (keys.length) {
      if (shapeFlag & (1 | 6)) {
        if (propsOptions && keys.some(isModelListener)) {
          fallthroughAttrs = filterModelListeners(
            fallthroughAttrs,
            propsOptions
          );
        }
        root = cloneVNode(root, fallthroughAttrs, false, true);
      }
    }
  }
  if (vnode.dirs) {
    root = cloneVNode(root, null, false, true);
    root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;
  }
  if (vnode.transition) {
    setTransitionHooks(root, vnode.transition);
  }
  {
    result = root;
  }
  setCurrentRenderingInstance(prev);
  return result;
}
const getFunctionalFallthrough = (attrs) => {
  let res;
  for (const key in attrs) {
    if (key === "class" || key === "style" || isOn(key)) {
      (res || (res = {}))[key] = attrs[key];
    }
  }
  return res;
};
const filterModelListeners = (attrs, props2) => {
  const res = {};
  for (const key in attrs) {
    if (!isModelListener(key) || !(key.slice(9) in props2)) {
      res[key] = attrs[key];
    }
  }
  return res;
};
function shouldUpdateComponent(prevVNode, nextVNode, optimized) {
  const { props: prevProps, children: prevChildren, component } = prevVNode;
  const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;
  const emits = component.emitsOptions;
  if (nextVNode.dirs || nextVNode.transition) {
    return true;
  }
  if (optimized && patchFlag >= 0) {
    if (patchFlag & 1024) {
      return true;
    }
    if (patchFlag & 16) {
      if (!prevProps) {
        return !!nextProps;
      }
      return hasPropsChanged(prevProps, nextProps, emits);
    } else if (patchFlag & 8) {
      const dynamicProps = nextVNode.dynamicProps;
      for (let i = 0; i < dynamicProps.length; i++) {
        const key = dynamicProps[i];
        if (nextProps[key] !== prevProps[key] && !isEmitListener(emits, key)) {
          return true;
        }
      }
    }
  } else {
    if (prevChildren || nextChildren) {
      if (!nextChildren || !nextChildren.$stable) {
        return true;
      }
    }
    if (prevProps === nextProps) {
      return false;
    }
    if (!prevProps) {
      return !!nextProps;
    }
    if (!nextProps) {
      return true;
    }
    return hasPropsChanged(prevProps, nextProps, emits);
  }
  return false;
}
function hasPropsChanged(prevProps, nextProps, emitsOptions) {
  const nextKeys = Object.keys(nextProps);
  if (nextKeys.length !== Object.keys(prevProps).length) {
    return true;
  }
  for (let i = 0; i < nextKeys.length; i++) {
    const key = nextKeys[i];
    if (nextProps[key] !== prevProps[key] && !isEmitListener(emitsOptions, key)) {
      return true;
    }
  }
  return false;
}
function updateHOCHostEl({ vnode, parent }, el) {
  while (parent) {
    const root = parent.subTree;
    if (root.suspense && root.suspense.activeBranch === vnode) {
      root.el = vnode.el;
    }
    if (root === vnode) {
      (vnode = parent.vnode).el = el;
      parent = parent.parent;
    } else {
      break;
    }
  }
}
const isSuspense = (type) => type.__isSuspense;
function queueEffectWithSuspense(fn, suspense) {
  if (suspense && suspense.pendingBranch) {
    if (isArray$2(fn)) {
      suspense.effects.push(...fn);
    } else {
      suspense.effects.push(fn);
    }
  } else {
    queuePostFlushCb(fn);
  }
}
const Fragment = Symbol.for("v-fgt");
const Text = Symbol.for("v-txt");
const Comment = Symbol.for("v-cmt");
const Static = Symbol.for("v-stc");
const blockStack = [];
let currentBlock = null;
function openBlock(disableTracking = false) {
  blockStack.push(currentBlock = disableTracking ? null : []);
}
function closeBlock() {
  blockStack.pop();
  currentBlock = blockStack[blockStack.length - 1] || null;
}
let isBlockTreeEnabled = 1;
function setBlockTracking(value, inVOnce = false) {
  isBlockTreeEnabled += value;
  if (value < 0 && currentBlock && inVOnce) {
    currentBlock.hasOnce = true;
  }
}
function setupBlock(vnode) {
  vnode.dynamicChildren = isBlockTreeEnabled > 0 ? currentBlock || EMPTY_ARR : null;
  closeBlock();
  if (isBlockTreeEnabled > 0 && currentBlock) {
    currentBlock.push(vnode);
  }
  return vnode;
}
function createElementBlock(type, props2, children, patchFlag, dynamicProps, shapeFlag) {
  return setupBlock(
    createBaseVNode(
      type,
      props2,
      children,
      patchFlag,
      dynamicProps,
      shapeFlag,
      true
    )
  );
}
function createBlock(type, props2, children, patchFlag, dynamicProps) {
  return setupBlock(
    createVNode(
      type,
      props2,
      children,
      patchFlag,
      dynamicProps,
      true
    )
  );
}
function isVNode(value) {
  return value ? value.__v_isVNode === true : false;
}
function isSameVNodeType(n1, n2) {
  return n1.type === n2.type && n1.key === n2.key;
}
const normalizeKey = ({ key }) => key != null ? key : null;
const normalizeRef = ({
  ref: ref3,
  ref_key,
  ref_for
}) => {
  if (typeof ref3 === "number") {
    ref3 = "" + ref3;
  }
  return ref3 != null ? isString$1(ref3) || isRef$1(ref3) || isFunction(ref3) ? { i: currentRenderingInstance, r: ref3, k: ref_key, f: !!ref_for } : ref3 : null;
};
function createBaseVNode(type, props2 = null, children = null, patchFlag = 0, dynamicProps = null, shapeFlag = type === Fragment ? 0 : 1, isBlockNode = false, needFullChildrenNormalization = false) {
  const vnode = {
    __v_isVNode: true,
    __v_skip: true,
    type,
    props: props2,
    key: props2 && normalizeKey(props2),
    ref: props2 && normalizeRef(props2),
    scopeId: currentScopeId,
    slotScopeIds: null,
    children,
    component: null,
    suspense: null,
    ssContent: null,
    ssFallback: null,
    dirs: null,
    transition: null,
    el: null,
    anchor: null,
    target: null,
    targetStart: null,
    targetAnchor: null,
    staticCount: 0,
    shapeFlag,
    patchFlag,
    dynamicProps,
    dynamicChildren: null,
    appContext: null,
    ctx: currentRenderingInstance
  };
  if (needFullChildrenNormalization) {
    normalizeChildren(vnode, children);
    if (shapeFlag & 128) {
      type.normalize(vnode);
    }
  } else if (children) {
    vnode.shapeFlag |= isString$1(children) ? 8 : 16;
  }
  if (isBlockTreeEnabled > 0 && // avoid a block node from tracking itself
  !isBlockNode && // has current parent block
  currentBlock && // presence of a patch flag indicates this node needs patching on updates.
  // component nodes also should always be patched, because even if the
  // component doesn't need to update, it needs to persist the instance on to
  // the next vnode so that it can be properly unmounted later.
  (vnode.patchFlag > 0 || shapeFlag & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the
  // vnode should not be considered dynamic due to handler caching.
  vnode.patchFlag !== 32) {
    currentBlock.push(vnode);
  }
  return vnode;
}
const createVNode = _createVNode;
function _createVNode(type, props2 = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {
  if (!type || type === NULL_DYNAMIC_COMPONENT) {
    type = Comment;
  }
  if (isVNode(type)) {
    const cloned = cloneVNode(
      type,
      props2,
      true
      /* mergeRef: true */
    );
    if (children) {
      normalizeChildren(cloned, children);
    }
    if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock) {
      if (cloned.shapeFlag & 6) {
        currentBlock[currentBlock.indexOf(type)] = cloned;
      } else {
        currentBlock.push(cloned);
      }
    }
    cloned.patchFlag = -2;
    return cloned;
  }
  if (isClassComponent(type)) {
    type = type.__vccOpts;
  }
  if (props2) {
    props2 = guardReactiveProps(props2);
    let { class: klass, style } = props2;
    if (klass && !isString$1(klass)) {
      props2.class = normalizeClass(klass);
    }
    if (isObject$1(style)) {
      if (isProxy(style) && !isArray$2(style)) {
        style = extend({}, style);
      }
      props2.style = normalizeStyle(style);
    }
  }
  const shapeFlag = isString$1(type) ? 1 : isSuspense(type) ? 128 : isTeleport(type) ? 64 : isObject$1(type) ? 4 : isFunction(type) ? 2 : 0;
  return createBaseVNode(
    type,
    props2,
    children,
    patchFlag,
    dynamicProps,
    shapeFlag,
    isBlockNode,
    true
  );
}
function guardReactiveProps(props2) {
  if (!props2) return null;
  return isProxy(props2) || isInternalObject(props2) ? extend({}, props2) : props2;
}
function cloneVNode(vnode, extraProps, mergeRef = false, cloneTransition = false) {
  const { props: props2, ref: ref3, patchFlag, children, transition } = vnode;
  const mergedProps = extraProps ? mergeProps(props2 || {}, extraProps) : props2;
  const cloned = {
    __v_isVNode: true,
    __v_skip: true,
    type: vnode.type,
    props: mergedProps,
    key: mergedProps && normalizeKey(mergedProps),
    ref: extraProps && extraProps.ref ? (
      // #2078 in the case of <component :is="vnode" ref="extra"/>
      // if the vnode itself already has a ref, cloneVNode will need to merge
      // the refs so the single vnode can be set on multiple refs
      mergeRef && ref3 ? isArray$2(ref3) ? ref3.concat(normalizeRef(extraProps)) : [ref3, normalizeRef(extraProps)] : normalizeRef(extraProps)
    ) : ref3,
    scopeId: vnode.scopeId,
    slotScopeIds: vnode.slotScopeIds,
    children,
    target: vnode.target,
    targetStart: vnode.targetStart,
    targetAnchor: vnode.targetAnchor,
    staticCount: vnode.staticCount,
    shapeFlag: vnode.shapeFlag,
    // if the vnode is cloned with extra props, we can no longer assume its
    // existing patch flag to be reliable and need to add the FULL_PROPS flag.
    // note: preserve flag for fragments since they use the flag for children
    // fast paths only.
    patchFlag: extraProps && vnode.type !== Fragment ? patchFlag === -1 ? 16 : patchFlag | 16 : patchFlag,
    dynamicProps: vnode.dynamicProps,
    dynamicChildren: vnode.dynamicChildren,
    appContext: vnode.appContext,
    dirs: vnode.dirs,
    transition,
    // These should technically only be non-null on mounted VNodes. However,
    // they *should* be copied for kept-alive vnodes. So we just always copy
    // them since them being non-null during a mount doesn't affect the logic as
    // they will simply be overwritten.
    component: vnode.component,
    suspense: vnode.suspense,
    ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),
    ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),
    el: vnode.el,
    anchor: vnode.anchor,
    ctx: vnode.ctx,
    ce: vnode.ce
  };
  if (transition && cloneTransition) {
    setTransitionHooks(
      cloned,
      transition.clone(cloned)
    );
  }
  return cloned;
}
function createTextVNode(text = " ", flag = 0) {
  return createVNode(Text, null, text, flag);
}
function createCommentVNode(text = "", asBlock = false) {
  return asBlock ? (openBlock(), createBlock(Comment, null, text)) : createVNode(Comment, null, text);
}
function normalizeVNode(child) {
  if (child == null || typeof child === "boolean") {
    return createVNode(Comment);
  } else if (isArray$2(child)) {
    return createVNode(
      Fragment,
      null,
      // #3666, avoid reference pollution when reusing vnode
      child.slice()
    );
  } else if (isVNode(child)) {
    return cloneIfMounted(child);
  } else {
    return createVNode(Text, null, String(child));
  }
}
function cloneIfMounted(child) {
  return child.el === null && child.patchFlag !== -1 || child.memo ? child : cloneVNode(child);
}
function normalizeChildren(vnode, children) {
  let type = 0;
  const { shapeFlag } = vnode;
  if (children == null) {
    children = null;
  } else if (isArray$2(children)) {
    type = 16;
  } else if (typeof children === "object") {
    if (shapeFlag & (1 | 64)) {
      const slot = children.default;
      if (slot) {
        slot._c && (slot._d = false);
        normalizeChildren(vnode, slot());
        slot._c && (slot._d = true);
      }
      return;
    } else {
      type = 32;
      const slotFlag = children._;
      if (!slotFlag && !isInternalObject(children)) {
        children._ctx = currentRenderingInstance;
      } else if (slotFlag === 3 && currentRenderingInstance) {
        if (currentRenderingInstance.slots._ === 1) {
          children._ = 1;
        } else {
          children._ = 2;
          vnode.patchFlag |= 1024;
        }
      }
    }
  } else if (isFunction(children)) {
    children = { default: children, _ctx: currentRenderingInstance };
    type = 32;
  } else {
    children = String(children);
    if (shapeFlag & 64) {
      type = 16;
      children = [createTextVNode(children)];
    } else {
      type = 8;
    }
  }
  vnode.children = children;
  vnode.shapeFlag |= type;
}
function mergeProps(...args) {
  const ret = {};
  for (let i = 0; i < args.length; i++) {
    const toMerge = args[i];
    for (const key in toMerge) {
      if (key === "class") {
        if (ret.class !== toMerge.class) {
          ret.class = normalizeClass([ret.class, toMerge.class]);
        }
      } else if (key === "style") {
        ret.style = normalizeStyle([ret.style, toMerge.style]);
      } else if (isOn(key)) {
        const existing = ret[key];
        const incoming = toMerge[key];
        if (incoming && existing !== incoming && !(isArray$2(existing) && existing.includes(incoming))) {
          ret[key] = existing ? [].concat(existing, incoming) : incoming;
        }
      } else if (key !== "") {
        ret[key] = toMerge[key];
      }
    }
  }
  return ret;
}
function invokeVNodeHook(hook2, instance, vnode, prevVNode = null) {
  callWithAsyncErrorHandling(hook2, instance, 7, [
    vnode,
    prevVNode
  ]);
}
const emptyAppContext = createAppContext();
let uid$3 = 0;
function createComponentInstance(vnode, parent, suspense) {
  const type = vnode.type;
  const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;
  const instance = {
    uid: uid$3++,
    vnode,
    type,
    parent,
    appContext,
    root: null,
    // to be immediately set
    next: null,
    subTree: null,
    // will be set synchronously right after creation
    effect: null,
    update: null,
    // will be set synchronously right after creation
    job: null,
    scope: new EffectScope(
      true
      /* detached */
    ),
    render: null,
    proxy: null,
    exposed: null,
    exposeProxy: null,
    withProxy: null,
    provides: parent ? parent.provides : Object.create(appContext.provides),
    ids: parent ? parent.ids : ["", 0, 0],
    accessCache: null,
    renderCache: [],
    // local resolved assets
    components: null,
    directives: null,
    // resolved props and emits options
    propsOptions: normalizePropsOptions(type, appContext),
    emitsOptions: normalizeEmitsOptions(type, appContext),
    // emit
    emit: null,
    // to be set immediately
    emitted: null,
    // props default value
    propsDefaults: EMPTY_OBJ,
    // inheritAttrs
    inheritAttrs: type.inheritAttrs,
    // state
    ctx: EMPTY_OBJ,
    data: EMPTY_OBJ,
    props: EMPTY_OBJ,
    attrs: EMPTY_OBJ,
    slots: EMPTY_OBJ,
    refs: EMPTY_OBJ,
    setupState: EMPTY_OBJ,
    setupContext: null,
    // suspense related
    suspense,
    suspenseId: suspense ? suspense.pendingId : 0,
    asyncDep: null,
    asyncResolved: false,
    // lifecycle hooks
    // not using enums here because it results in computed properties
    isMounted: false,
    isUnmounted: false,
    isDeactivated: false,
    bc: null,
    c: null,
    bm: null,
    m: null,
    bu: null,
    u: null,
    um: null,
    bum: null,
    da: null,
    a: null,
    rtg: null,
    rtc: null,
    ec: null,
    sp: null
  };
  {
    instance.ctx = { _: instance };
  }
  instance.root = parent ? parent.root : instance;
  instance.emit = emit.bind(null, instance);
  if (vnode.ce) {
    vnode.ce(instance);
  }
  return instance;
}
let currentInstance = null;
const getCurrentInstance = () => currentInstance || currentRenderingInstance;
let internalSetCurrentInstance;
let setInSSRSetupState;
{
  const g = getGlobalThis();
  const registerGlobalSetter = (key, setter) => {
    let setters;
    if (!(setters = g[key])) setters = g[key] = [];
    setters.push(setter);
    return (v) => {
      if (setters.length > 1) setters.forEach((set) => set(v));
      else setters[0](v);
    };
  };
  internalSetCurrentInstance = registerGlobalSetter(
    `__VUE_INSTANCE_SETTERS__`,
    (v) => currentInstance = v
  );
  setInSSRSetupState = registerGlobalSetter(
    `__VUE_SSR_SETTERS__`,
    (v) => isInSSRComponentSetup = v
  );
}
const setCurrentInstance = (instance) => {
  const prev = currentInstance;
  internalSetCurrentInstance(instance);
  instance.scope.on();
  return () => {
    instance.scope.off();
    internalSetCurrentInstance(prev);
  };
};
const unsetCurrentInstance = () => {
  currentInstance && currentInstance.scope.off();
  internalSetCurrentInstance(null);
};
function isStatefulComponent(instance) {
  return instance.vnode.shapeFlag & 4;
}
let isInSSRComponentSetup = false;
function setupComponent(instance, isSSR = false, optimized = false) {
  isSSR && setInSSRSetupState(isSSR);
  const { props: props2, children } = instance.vnode;
  const isStateful = isStatefulComponent(instance);
  initProps(instance, props2, isStateful, isSSR);
  initSlots(instance, children, optimized);
  const setupResult = isStateful ? setupStatefulComponent(instance, isSSR) : void 0;
  isSSR && setInSSRSetupState(false);
  return setupResult;
}
function setupStatefulComponent(instance, isSSR) {
  const Component = instance.type;
  instance.accessCache = /* @__PURE__ */ Object.create(null);
  instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers);
  const { setup } = Component;
  if (setup) {
    pauseTracking();
    const setupContext = instance.setupContext = setup.length > 1 ? createSetupContext(instance) : null;
    const reset = setCurrentInstance(instance);
    const setupResult = callWithErrorHandling(
      setup,
      instance,
      0,
      [
        instance.props,
        setupContext
      ]
    );
    const isAsyncSetup = isPromise(setupResult);
    resetTracking();
    reset();
    if ((isAsyncSetup || instance.sp) && !isAsyncWrapper(instance)) {
      markAsyncBoundary(instance);
    }
    if (isAsyncSetup) {
      setupResult.then(unsetCurrentInstance, unsetCurrentInstance);
      if (isSSR) {
        return setupResult.then((resolvedResult) => {
          handleSetupResult(instance, resolvedResult);
        }).catch((e) => {
          handleError(e, instance, 0);
        });
      } else {
        instance.asyncDep = setupResult;
      }
    } else {
      handleSetupResult(instance, setupResult);
    }
  } else {
    finishComponentSetup(instance);
  }
}
function handleSetupResult(instance, setupResult, isSSR) {
  if (isFunction(setupResult)) {
    if (instance.type.__ssrInlineRender) {
      instance.ssrRender = setupResult;
    } else {
      instance.render = setupResult;
    }
  } else if (isObject$1(setupResult)) {
    {
      instance.devtoolsRawSetupState = setupResult;
    }
    instance.setupState = proxyRefs(setupResult);
  } else ;
  finishComponentSetup(instance);
}
function finishComponentSetup(instance, isSSR, skipOptions) {
  const Component = instance.type;
  if (!instance.render) {
    instance.render = Component.render || NOOP;
  }
  {
    const reset = setCurrentInstance(instance);
    pauseTracking();
    try {
      applyOptions(instance);
    } finally {
      resetTracking();
      reset();
    }
  }
}
const attrsProxyHandlers = {
  get(target2, key) {
    track(target2, "get", "");
    return target2[key];
  }
};
function createSetupContext(instance) {
  const expose = (exposed) => {
    instance.exposed = exposed || {};
  };
  {
    return {
      attrs: new Proxy(instance.attrs, attrsProxyHandlers),
      slots: instance.slots,
      emit: instance.emit,
      expose
    };
  }
}
function getComponentPublicInstance(instance) {
  if (instance.exposed) {
    return instance.exposeProxy || (instance.exposeProxy = new Proxy(proxyRefs(markRaw(instance.exposed)), {
      get(target2, key) {
        if (key in target2) {
          return target2[key];
        } else if (key in publicPropertiesMap) {
          return publicPropertiesMap[key](instance);
        }
      },
      has(target2, key) {
        return key in target2 || key in publicPropertiesMap;
      }
    }));
  } else {
    return instance.proxy;
  }
}
const classifyRE$1 = /(?:^|[-_])(\w)/g;
const classify$1 = (str) => str.replace(classifyRE$1, (c) => c.toUpperCase()).replace(/[-_]/g, "");
function getComponentName(Component, includeInferred = true) {
  return isFunction(Component) ? Component.displayName || Component.name : Component.name || includeInferred && Component.__name;
}
function formatComponentName(instance, Component, isRoot = false) {
  let name = getComponentName(Component);
  if (!name && Component.__file) {
    const match = Component.__file.match(/([^/\\]+)\.\w+$/);
    if (match) {
      name = match[1];
    }
  }
  if (!name && instance && instance.parent) {
    const inferFromRegistry = (registry) => {
      for (const key in registry) {
        if (registry[key] === Component) {
          return key;
        }
      }
    };
    name = inferFromRegistry(
      instance.components || instance.parent.type.components
    ) || inferFromRegistry(instance.appContext.components);
  }
  return name ? classify$1(name) : isRoot ? `App` : `Anonymous`;
}
function isClassComponent(value) {
  return isFunction(value) && "__vccOpts" in value;
}
const computed = (getterOrOptions, debugOptions) => {
  const c = computed$1(getterOrOptions, debugOptions, isInSSRComponentSetup);
  return c;
};
function h(type, propsOrChildren, children) {
  const l = arguments.length;
  if (l === 2) {
    if (isObject$1(propsOrChildren) && !isArray$2(propsOrChildren)) {
      if (isVNode(propsOrChildren)) {
        return createVNode(type, null, [propsOrChildren]);
      }
      return createVNode(type, propsOrChildren);
    } else {
      return createVNode(type, null, propsOrChildren);
    }
  } else {
    if (l > 3) {
      children = Array.prototype.slice.call(arguments, 2);
    } else if (l === 3 && isVNode(children)) {
      children = [children];
    }
    return createVNode(type, propsOrChildren, children);
  }
}
const version = "3.5.13";
/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let policy = void 0;
const tt = typeof window !== "undefined" && window.trustedTypes;
if (tt) {
  try {
    policy = /* @__PURE__ */ tt.createPolicy("vue", {
      createHTML: (val) => val
    });
  } catch (e) {
  }
}
const unsafeToTrustedHTML = policy ? (val) => policy.createHTML(val) : (val) => val;
const svgNS = "http://www.w3.org/2000/svg";
const mathmlNS = "http://www.w3.org/1998/Math/MathML";
const doc = typeof document !== "undefined" ? document : null;
const templateContainer = doc && /* @__PURE__ */ doc.createElement("template");
const nodeOps = {
  insert: (child, parent, anchor) => {
    parent.insertBefore(child, anchor || null);
  },
  remove: (child) => {
    const parent = child.parentNode;
    if (parent) {
      parent.removeChild(child);
    }
  },
  createElement: (tag, namespace, is, props2) => {
    const el = namespace === "svg" ? doc.createElementNS(svgNS, tag) : namespace === "mathml" ? doc.createElementNS(mathmlNS, tag) : is ? doc.createElement(tag, { is }) : doc.createElement(tag);
    if (tag === "select" && props2 && props2.multiple != null) {
      el.setAttribute("multiple", props2.multiple);
    }
    return el;
  },
  createText: (text) => doc.createTextNode(text),
  createComment: (text) => doc.createComment(text),
  setText: (node, text) => {
    node.nodeValue = text;
  },
  setElementText: (el, text) => {
    el.textContent = text;
  },
  parentNode: (node) => node.parentNode,
  nextSibling: (node) => node.nextSibling,
  querySelector: (selector) => doc.querySelector(selector),
  setScopeId(el, id) {
    el.setAttribute(id, "");
  },
  // __UNSAFE__
  // Reason: innerHTML.
  // Static content here can only come from compiled templates.
  // As long as the user only uses trusted templates, this is safe.
  insertStaticContent(content, parent, anchor, namespace, start2, end) {
    const before = anchor ? anchor.previousSibling : parent.lastChild;
    if (start2 && (start2 === end || start2.nextSibling)) {
      while (true) {
        parent.insertBefore(start2.cloneNode(true), anchor);
        if (start2 === end || !(start2 = start2.nextSibling)) break;
      }
    } else {
      templateContainer.innerHTML = unsafeToTrustedHTML(
        namespace === "svg" ? `<svg>${content}</svg>` : namespace === "mathml" ? `<math>${content}</math>` : content
      );
      const template = templateContainer.content;
      if (namespace === "svg" || namespace === "mathml") {
        const wrapper2 = template.firstChild;
        while (wrapper2.firstChild) {
          template.appendChild(wrapper2.firstChild);
        }
        template.removeChild(wrapper2);
      }
      parent.insertBefore(template, anchor);
    }
    return [
      // first
      before ? before.nextSibling : parent.firstChild,
      // last
      anchor ? anchor.previousSibling : parent.lastChild
    ];
  }
};
const TRANSITION = "transition";
const ANIMATION = "animation";
const vtcKey = Symbol("_vtc");
const DOMTransitionPropsValidators = {
  name: String,
  type: String,
  css: {
    type: Boolean,
    default: true
  },
  duration: [String, Number, Object],
  enterFromClass: String,
  enterActiveClass: String,
  enterToClass: String,
  appearFromClass: String,
  appearActiveClass: String,
  appearToClass: String,
  leaveFromClass: String,
  leaveActiveClass: String,
  leaveToClass: String
};
const TransitionPropsValidators = /* @__PURE__ */ extend(
  {},
  BaseTransitionPropsValidators,
  DOMTransitionPropsValidators
);
const decorate$1 = (t) => {
  t.displayName = "Transition";
  t.props = TransitionPropsValidators;
  return t;
};
const Transition = /* @__PURE__ */ decorate$1(
  (props2, { slots }) => h(BaseTransition, resolveTransitionProps(props2), slots)
);
const callHook = (hook2, args = []) => {
  if (isArray$2(hook2)) {
    hook2.forEach((h2) => h2(...args));
  } else if (hook2) {
    hook2(...args);
  }
};
const hasExplicitCallback = (hook2) => {
  return hook2 ? isArray$2(hook2) ? hook2.some((h2) => h2.length > 1) : hook2.length > 1 : false;
};
function resolveTransitionProps(rawProps) {
  const baseProps = {};
  for (const key in rawProps) {
    if (!(key in DOMTransitionPropsValidators)) {
      baseProps[key] = rawProps[key];
    }
  }
  if (rawProps.css === false) {
    return baseProps;
  }
  const {
    name = "v",
    type,
    duration,
    enterFromClass = `${name}-enter-from`,
    enterActiveClass = `${name}-enter-active`,
    enterToClass = `${name}-enter-to`,
    appearFromClass = enterFromClass,
    appearActiveClass = enterActiveClass,
    appearToClass = enterToClass,
    leaveFromClass = `${name}-leave-from`,
    leaveActiveClass = `${name}-leave-active`,
    leaveToClass = `${name}-leave-to`
  } = rawProps;
  const durations = normalizeDuration(duration);
  const enterDuration = durations && durations[0];
  const leaveDuration = durations && durations[1];
  const {
    onBeforeEnter,
    onEnter,
    onEnterCancelled,
    onLeave,
    onLeaveCancelled,
    onBeforeAppear = onBeforeEnter,
    onAppear = onEnter,
    onAppearCancelled = onEnterCancelled
  } = baseProps;
  const finishEnter = (el, isAppear, done, isCancelled) => {
    el._enterCancelled = isCancelled;
    removeTransitionClass(el, isAppear ? appearToClass : enterToClass);
    removeTransitionClass(el, isAppear ? appearActiveClass : enterActiveClass);
    done && done();
  };
  const finishLeave = (el, done) => {
    el._isLeaving = false;
    removeTransitionClass(el, leaveFromClass);
    removeTransitionClass(el, leaveToClass);
    removeTransitionClass(el, leaveActiveClass);
    done && done();
  };
  const makeEnterHook = (isAppear) => {
    return (el, done) => {
      const hook2 = isAppear ? onAppear : onEnter;
      const resolve2 = () => finishEnter(el, isAppear, done);
      callHook(hook2, [el, resolve2]);
      nextFrame(() => {
        removeTransitionClass(el, isAppear ? appearFromClass : enterFromClass);
        addTransitionClass(el, isAppear ? appearToClass : enterToClass);
        if (!hasExplicitCallback(hook2)) {
          whenTransitionEnds(el, type, enterDuration, resolve2);
        }
      });
    };
  };
  return extend(baseProps, {
    onBeforeEnter(el) {
      callHook(onBeforeEnter, [el]);
      addTransitionClass(el, enterFromClass);
      addTransitionClass(el, enterActiveClass);
    },
    onBeforeAppear(el) {
      callHook(onBeforeAppear, [el]);
      addTransitionClass(el, appearFromClass);
      addTransitionClass(el, appearActiveClass);
    },
    onEnter: makeEnterHook(false),
    onAppear: makeEnterHook(true),
    onLeave(el, done) {
      el._isLeaving = true;
      const resolve2 = () => finishLeave(el, done);
      addTransitionClass(el, leaveFromClass);
      if (!el._enterCancelled) {
        forceReflow();
        addTransitionClass(el, leaveActiveClass);
      } else {
        addTransitionClass(el, leaveActiveClass);
        forceReflow();
      }
      nextFrame(() => {
        if (!el._isLeaving) {
          return;
        }
        removeTransitionClass(el, leaveFromClass);
        addTransitionClass(el, leaveToClass);
        if (!hasExplicitCallback(onLeave)) {
          whenTransitionEnds(el, type, leaveDuration, resolve2);
        }
      });
      callHook(onLeave, [el, resolve2]);
    },
    onEnterCancelled(el) {
      finishEnter(el, false, void 0, true);
      callHook(onEnterCancelled, [el]);
    },
    onAppearCancelled(el) {
      finishEnter(el, true, void 0, true);
      callHook(onAppearCancelled, [el]);
    },
    onLeaveCancelled(el) {
      finishLeave(el);
      callHook(onLeaveCancelled, [el]);
    }
  });
}
function normalizeDuration(duration) {
  if (duration == null) {
    return null;
  } else if (isObject$1(duration)) {
    return [NumberOf(duration.enter), NumberOf(duration.leave)];
  } else {
    const n = NumberOf(duration);
    return [n, n];
  }
}
function NumberOf(val) {
  const res = toNumber(val);
  return res;
}
function addTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c) => c && el.classList.add(c));
  (el[vtcKey] || (el[vtcKey] = /* @__PURE__ */ new Set())).add(cls);
}
function removeTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c) => c && el.classList.remove(c));
  const _vtc = el[vtcKey];
  if (_vtc) {
    _vtc.delete(cls);
    if (!_vtc.size) {
      el[vtcKey] = void 0;
    }
  }
}
function nextFrame(cb) {
  requestAnimationFrame(() => {
    requestAnimationFrame(cb);
  });
}
let endId = 0;
function whenTransitionEnds(el, expectedType, explicitTimeout, resolve2) {
  const id = el._endId = ++endId;
  const resolveIfNotStale = () => {
    if (id === el._endId) {
      resolve2();
    }
  };
  if (explicitTimeout != null) {
    return setTimeout(resolveIfNotStale, explicitTimeout);
  }
  const { type, timeout: timeout2, propCount } = getTransitionInfo(el, expectedType);
  if (!type) {
    return resolve2();
  }
  const endEvent = type + "end";
  let ended = 0;
  const end = () => {
    el.removeEventListener(endEvent, onEnd);
    resolveIfNotStale();
  };
  const onEnd = (e) => {
    if (e.target === el && ++ended >= propCount) {
      end();
    }
  };
  setTimeout(() => {
    if (ended < propCount) {
      end();
    }
  }, timeout2 + 1);
  el.addEventListener(endEvent, onEnd);
}
function getTransitionInfo(el, expectedType) {
  const styles = window.getComputedStyle(el);
  const getStyleProperties = (key) => (styles[key] || "").split(", ");
  const transitionDelays = getStyleProperties(`${TRANSITION}Delay`);
  const transitionDurations = getStyleProperties(`${TRANSITION}Duration`);
  const transitionTimeout = getTimeout(transitionDelays, transitionDurations);
  const animationDelays = getStyleProperties(`${ANIMATION}Delay`);
  const animationDurations = getStyleProperties(`${ANIMATION}Duration`);
  const animationTimeout = getTimeout(animationDelays, animationDurations);
  let type = null;
  let timeout2 = 0;
  let propCount = 0;
  if (expectedType === TRANSITION) {
    if (transitionTimeout > 0) {
      type = TRANSITION;
      timeout2 = transitionTimeout;
      propCount = transitionDurations.length;
    }
  } else if (expectedType === ANIMATION) {
    if (animationTimeout > 0) {
      type = ANIMATION;
      timeout2 = animationTimeout;
      propCount = animationDurations.length;
    }
  } else {
    timeout2 = Math.max(transitionTimeout, animationTimeout);
    type = timeout2 > 0 ? transitionTimeout > animationTimeout ? TRANSITION : ANIMATION : null;
    propCount = type ? type === TRANSITION ? transitionDurations.length : animationDurations.length : 0;
  }
  const hasTransform = type === TRANSITION && /\b(transform|all)(,|$)/.test(
    getStyleProperties(`${TRANSITION}Property`).toString()
  );
  return {
    type,
    timeout: timeout2,
    propCount,
    hasTransform
  };
}
function getTimeout(delays, durations) {
  while (delays.length < durations.length) {
    delays = delays.concat(delays);
  }
  return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));
}
function toMs(s) {
  if (s === "auto") return 0;
  return Number(s.slice(0, -1).replace(",", ".")) * 1e3;
}
function forceReflow() {
  return document.body.offsetHeight;
}
function patchClass(el, value, isSVG) {
  const transitionClasses = el[vtcKey];
  if (transitionClasses) {
    value = (value ? [value, ...transitionClasses] : [...transitionClasses]).join(" ");
  }
  if (value == null) {
    el.removeAttribute("class");
  } else if (isSVG) {
    el.setAttribute("class", value);
  } else {
    el.className = value;
  }
}
const vShowOriginalDisplay = Symbol("_vod");
const vShowHidden = Symbol("_vsh");
const vShow = {
  beforeMount(el, { value }, { transition }) {
    el[vShowOriginalDisplay] = el.style.display === "none" ? "" : el.style.display;
    if (transition && value) {
      transition.beforeEnter(el);
    } else {
      setDisplay(el, value);
    }
  },
  mounted(el, { value }, { transition }) {
    if (transition && value) {
      transition.enter(el);
    }
  },
  updated(el, { value, oldValue }, { transition }) {
    if (!value === !oldValue) return;
    if (transition) {
      if (value) {
        transition.beforeEnter(el);
        setDisplay(el, true);
        transition.enter(el);
      } else {
        transition.leave(el, () => {
          setDisplay(el, false);
        });
      }
    } else {
      setDisplay(el, value);
    }
  },
  beforeUnmount(el, { value }) {
    setDisplay(el, value);
  }
};
function setDisplay(el, value) {
  el.style.display = value ? el[vShowOriginalDisplay] : "none";
  el[vShowHidden] = !value;
}
const CSS_VAR_TEXT = Symbol("");
const displayRE = /(^|;)\s*display\s*:/;
function patchStyle(el, prev, next) {
  const style = el.style;
  const isCssString = isString$1(next);
  let hasControlledDisplay = false;
  if (next && !isCssString) {
    if (prev) {
      if (!isString$1(prev)) {
        for (const key in prev) {
          if (next[key] == null) {
            setStyle(style, key, "");
          }
        }
      } else {
        for (const prevStyle of prev.split(";")) {
          const key = prevStyle.slice(0, prevStyle.indexOf(":")).trim();
          if (next[key] == null) {
            setStyle(style, key, "");
          }
        }
      }
    }
    for (const key in next) {
      if (key === "display") {
        hasControlledDisplay = true;
      }
      setStyle(style, key, next[key]);
    }
  } else {
    if (isCssString) {
      if (prev !== next) {
        const cssVarText = style[CSS_VAR_TEXT];
        if (cssVarText) {
          next += ";" + cssVarText;
        }
        style.cssText = next;
        hasControlledDisplay = displayRE.test(next);
      }
    } else if (prev) {
      el.removeAttribute("style");
    }
  }
  if (vShowOriginalDisplay in el) {
    el[vShowOriginalDisplay] = hasControlledDisplay ? style.display : "";
    if (el[vShowHidden]) {
      style.display = "none";
    }
  }
}
const importantRE = /\s*!important$/;
function setStyle(style, name, val) {
  if (isArray$2(val)) {
    val.forEach((v) => setStyle(style, name, v));
  } else {
    if (val == null) val = "";
    if (name.startsWith("--")) {
      style.setProperty(name, val);
    } else {
      const prefixed = autoPrefix(style, name);
      if (importantRE.test(val)) {
        style.setProperty(
          hyphenate(prefixed),
          val.replace(importantRE, ""),
          "important"
        );
      } else {
        style[prefixed] = val;
      }
    }
  }
}
const prefixes = ["Webkit", "Moz", "ms"];
const prefixCache = {};
function autoPrefix(style, rawName) {
  const cached = prefixCache[rawName];
  if (cached) {
    return cached;
  }
  let name = camelize(rawName);
  if (name !== "filter" && name in style) {
    return prefixCache[rawName] = name;
  }
  name = capitalize(name);
  for (let i = 0; i < prefixes.length; i++) {
    const prefixed = prefixes[i] + name;
    if (prefixed in style) {
      return prefixCache[rawName] = prefixed;
    }
  }
  return rawName;
}
const xlinkNS = "http://www.w3.org/1999/xlink";
function patchAttr(el, key, value, isSVG, instance, isBoolean2 = isSpecialBooleanAttr(key)) {
  if (isSVG && key.startsWith("xlink:")) {
    if (value == null) {
      el.removeAttributeNS(xlinkNS, key.slice(6, key.length));
    } else {
      el.setAttributeNS(xlinkNS, key, value);
    }
  } else {
    if (value == null || isBoolean2 && !includeBooleanAttr(value)) {
      el.removeAttribute(key);
    } else {
      el.setAttribute(
        key,
        isBoolean2 ? "" : isSymbol$1(value) ? String(value) : value
      );
    }
  }
}
function patchDOMProp(el, key, value, parentComponent, attrName) {
  if (key === "innerHTML" || key === "textContent") {
    if (value != null) {
      el[key] = key === "innerHTML" ? unsafeToTrustedHTML(value) : value;
    }
    return;
  }
  const tag = el.tagName;
  if (key === "value" && tag !== "PROGRESS" && // custom elements may use _value internally
  !tag.includes("-")) {
    const oldValue = tag === "OPTION" ? el.getAttribute("value") || "" : el.value;
    const newValue = value == null ? (
      // #11647: value should be set as empty string for null and undefined,
      // but <input type="checkbox"> should be set as 'on'.
      el.type === "checkbox" ? "on" : ""
    ) : String(value);
    if (oldValue !== newValue || !("_value" in el)) {
      el.value = newValue;
    }
    if (value == null) {
      el.removeAttribute(key);
    }
    el._value = value;
    return;
  }
  let needRemove = false;
  if (value === "" || value == null) {
    const type = typeof el[key];
    if (type === "boolean") {
      value = includeBooleanAttr(value);
    } else if (value == null && type === "string") {
      value = "";
      needRemove = true;
    } else if (type === "number") {
      value = 0;
      needRemove = true;
    }
  }
  try {
    el[key] = value;
  } catch (e) {
  }
  needRemove && el.removeAttribute(attrName || key);
}
function addEventListener(el, event, handler, options) {
  el.addEventListener(event, handler, options);
}
function removeEventListener(el, event, handler, options) {
  el.removeEventListener(event, handler, options);
}
const veiKey = Symbol("_vei");
function patchEvent(el, rawName, prevValue, nextValue, instance = null) {
  const invokers = el[veiKey] || (el[veiKey] = {});
  const existingInvoker = invokers[rawName];
  if (nextValue && existingInvoker) {
    existingInvoker.value = nextValue;
  } else {
    const [name, options] = parseName(rawName);
    if (nextValue) {
      const invoker = invokers[rawName] = createInvoker(
        nextValue,
        instance
      );
      addEventListener(el, name, invoker, options);
    } else if (existingInvoker) {
      removeEventListener(el, name, existingInvoker, options);
      invokers[rawName] = void 0;
    }
  }
}
const optionsModifierRE = /(?:Once|Passive|Capture)$/;
function parseName(name) {
  let options;
  if (optionsModifierRE.test(name)) {
    options = {};
    let m;
    while (m = name.match(optionsModifierRE)) {
      name = name.slice(0, name.length - m[0].length);
      options[m[0].toLowerCase()] = true;
    }
  }
  const event = name[2] === ":" ? name.slice(3) : hyphenate(name.slice(2));
  return [event, options];
}
let cachedNow = 0;
const p = /* @__PURE__ */ Promise.resolve();
const getNow = () => cachedNow || (p.then(() => cachedNow = 0), cachedNow = Date.now());
function createInvoker(initialValue, instance) {
  const invoker = (e) => {
    if (!e._vts) {
      e._vts = Date.now();
    } else if (e._vts <= invoker.attached) {
      return;
    }
    callWithAsyncErrorHandling(
      patchStopImmediatePropagation(e, invoker.value),
      instance,
      5,
      [e]
    );
  };
  invoker.value = initialValue;
  invoker.attached = getNow();
  return invoker;
}
function patchStopImmediatePropagation(e, value) {
  if (isArray$2(value)) {
    const originalStop = e.stopImmediatePropagation;
    e.stopImmediatePropagation = () => {
      originalStop.call(e);
      e._stopped = true;
    };
    return value.map(
      (fn) => (e2) => !e2._stopped && fn && fn(e2)
    );
  } else {
    return value;
  }
}
const isNativeOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // lowercase letter
key.charCodeAt(2) > 96 && key.charCodeAt(2) < 123;
const patchProp = (el, key, prevValue, nextValue, namespace, parentComponent) => {
  const isSVG = namespace === "svg";
  if (key === "class") {
    patchClass(el, nextValue, isSVG);
  } else if (key === "style") {
    patchStyle(el, prevValue, nextValue);
  } else if (isOn(key)) {
    if (!isModelListener(key)) {
      patchEvent(el, key, prevValue, nextValue, parentComponent);
    }
  } else if (key[0] === "." ? (key = key.slice(1), true) : key[0] === "^" ? (key = key.slice(1), false) : shouldSetAsProp(el, key, nextValue, isSVG)) {
    patchDOMProp(el, key, nextValue);
    if (!el.tagName.includes("-") && (key === "value" || key === "checked" || key === "selected")) {
      patchAttr(el, key, nextValue, isSVG, parentComponent, key !== "value");
    }
  } else if (
    // #11081 force set props for possible async custom element
    el._isVueCE && (/[A-Z]/.test(key) || !isString$1(nextValue))
  ) {
    patchDOMProp(el, camelize(key), nextValue, parentComponent, key);
  } else {
    if (key === "true-value") {
      el._trueValue = nextValue;
    } else if (key === "false-value") {
      el._falseValue = nextValue;
    }
    patchAttr(el, key, nextValue, isSVG);
  }
};
function shouldSetAsProp(el, key, value, isSVG) {
  if (isSVG) {
    if (key === "innerHTML" || key === "textContent") {
      return true;
    }
    if (key in el && isNativeOn(key) && isFunction(value)) {
      return true;
    }
    return false;
  }
  if (key === "spellcheck" || key === "draggable" || key === "translate") {
    return false;
  }
  if (key === "form") {
    return false;
  }
  if (key === "list" && el.tagName === "INPUT") {
    return false;
  }
  if (key === "type" && el.tagName === "TEXTAREA") {
    return false;
  }
  if (key === "width" || key === "height") {
    const tag = el.tagName;
    if (tag === "IMG" || tag === "VIDEO" || tag === "CANVAS" || tag === "SOURCE") {
      return false;
    }
  }
  if (isNativeOn(key) && isString$1(value)) {
    return false;
  }
  return key in el;
}
const positionMap = /* @__PURE__ */ new WeakMap();
const newPositionMap = /* @__PURE__ */ new WeakMap();
const moveCbKey = Symbol("_moveCb");
const enterCbKey = Symbol("_enterCb");
const decorate = (t) => {
  delete t.props.mode;
  return t;
};
const TransitionGroupImpl = /* @__PURE__ */ decorate({
  name: "TransitionGroup",
  props: /* @__PURE__ */ extend({}, TransitionPropsValidators, {
    tag: String,
    moveClass: String
  }),
  setup(props2, { slots }) {
    const instance = getCurrentInstance();
    const state = useTransitionState();
    let prevChildren;
    let children;
    onUpdated(() => {
      if (!prevChildren.length) {
        return;
      }
      const moveClass = props2.moveClass || `${props2.name || "v"}-move`;
      if (!hasCSSTransform(
        prevChildren[0].el,
        instance.vnode.el,
        moveClass
      )) {
        return;
      }
      prevChildren.forEach(callPendingCbs);
      prevChildren.forEach(recordPosition);
      const movedChildren = prevChildren.filter(applyTranslation);
      forceReflow();
      movedChildren.forEach((c) => {
        const el = c.el;
        const style = el.style;
        addTransitionClass(el, moveClass);
        style.transform = style.webkitTransform = style.transitionDuration = "";
        const cb = el[moveCbKey] = (e) => {
          if (e && e.target !== el) {
            return;
          }
          if (!e || /transform$/.test(e.propertyName)) {
            el.removeEventListener("transitionend", cb);
            el[moveCbKey] = null;
            removeTransitionClass(el, moveClass);
          }
        };
        el.addEventListener("transitionend", cb);
      });
    });
    return () => {
      const rawProps = toRaw$1(props2);
      const cssTransitionProps = resolveTransitionProps(rawProps);
      let tag = rawProps.tag || Fragment;
      prevChildren = [];
      if (children) {
        for (let i = 0; i < children.length; i++) {
          const child = children[i];
          if (child.el && child.el instanceof Element) {
            prevChildren.push(child);
            setTransitionHooks(
              child,
              resolveTransitionHooks(
                child,
                cssTransitionProps,
                state,
                instance
              )
            );
            positionMap.set(
              child,
              child.el.getBoundingClientRect()
            );
          }
        }
      }
      children = slots.default ? getTransitionRawChildren(slots.default()) : [];
      for (let i = 0; i < children.length; i++) {
        const child = children[i];
        if (child.key != null) {
          setTransitionHooks(
            child,
            resolveTransitionHooks(child, cssTransitionProps, state, instance)
          );
        }
      }
      return createVNode(tag, null, children);
    };
  }
});
const TransitionGroup = TransitionGroupImpl;
function callPendingCbs(c) {
  const el = c.el;
  if (el[moveCbKey]) {
    el[moveCbKey]();
  }
  if (el[enterCbKey]) {
    el[enterCbKey]();
  }
}
function recordPosition(c) {
  newPositionMap.set(c, c.el.getBoundingClientRect());
}
function applyTranslation(c) {
  const oldPos = positionMap.get(c);
  const newPos = newPositionMap.get(c);
  const dx = oldPos.left - newPos.left;
  const dy = oldPos.top - newPos.top;
  if (dx || dy) {
    const s = c.el.style;
    s.transform = s.webkitTransform = `translate(${dx}px,${dy}px)`;
    s.transitionDuration = "0s";
    return c;
  }
}
function hasCSSTransform(el, root, moveClass) {
  const clone = el.cloneNode();
  const _vtc = el[vtcKey];
  if (_vtc) {
    _vtc.forEach((cls) => {
      cls.split(/\s+/).forEach((c) => c && clone.classList.remove(c));
    });
  }
  moveClass.split(/\s+/).forEach((c) => c && clone.classList.add(c));
  clone.style.display = "none";
  const container = root.nodeType === 1 ? root : root.parentNode;
  container.appendChild(clone);
  const { hasTransform } = getTransitionInfo(clone);
  container.removeChild(clone);
  return hasTransform;
}
const systemModifiers = ["ctrl", "shift", "alt", "meta"];
const modifierGuards = {
  stop: (e) => e.stopPropagation(),
  prevent: (e) => e.preventDefault(),
  self: (e) => e.target !== e.currentTarget,
  ctrl: (e) => !e.ctrlKey,
  shift: (e) => !e.shiftKey,
  alt: (e) => !e.altKey,
  meta: (e) => !e.metaKey,
  left: (e) => "button" in e && e.button !== 0,
  middle: (e) => "button" in e && e.button !== 1,
  right: (e) => "button" in e && e.button !== 2,
  exact: (e, modifiers) => systemModifiers.some((m) => e[`${m}Key`] && !modifiers.includes(m))
};
const withModifiers = (fn, modifiers) => {
  const cache = fn._withMods || (fn._withMods = {});
  const cacheKey = modifiers.join(".");
  return cache[cacheKey] || (cache[cacheKey] = (event, ...args) => {
    for (let i = 0; i < modifiers.length; i++) {
      const guard = modifierGuards[modifiers[i]];
      if (guard && guard(event, modifiers)) return;
    }
    return fn(event, ...args);
  });
};
const rendererOptions = /* @__PURE__ */ extend({ patchProp }, nodeOps);
let renderer;
function ensureRenderer() {
  return renderer || (renderer = createRenderer(rendererOptions));
}
const createApp = (...args) => {
  const app2 = ensureRenderer().createApp(...args);
  const { mount } = app2;
  app2.mount = (containerOrSelector) => {
    const container = normalizeContainer(containerOrSelector);
    if (!container) return;
    const component = app2._component;
    if (!isFunction(component) && !component.render && !component.template) {
      component.template = container.innerHTML;
    }
    if (container.nodeType === 1) {
      container.textContent = "";
    }
    const proxy = mount(container, false, resolveRootNamespace(container));
    if (container instanceof Element) {
      container.removeAttribute("v-cloak");
      container.setAttribute("data-v-app", "");
    }
    return proxy;
  };
  return app2;
};
function resolveRootNamespace(container) {
  if (container instanceof SVGElement) {
    return "svg";
  }
  if (typeof MathMLElement === "function" && container instanceof MathMLElement) {
    return "mathml";
  }
}
function normalizeContainer(container) {
  if (isString$1(container)) {
    const res = document.querySelector(container);
    return res;
  }
  return container;
}
function injectProp(target2, propName, get, set) {
  Object.defineProperty(target2, propName, {
    get,
    set,
    enumerable: true
  });
  return target2;
}
function injectMultipleProps(target2, props2) {
  for (const key in props2) {
    injectProp(target2, key, props2[key]);
  }
  return target2;
}
const isRuntimeSsrPreHydration = ref(
  false
);
let preHydrationBrowser;
function getMatch(userAgent2, platformMatch) {
  const match = /(edg|edge|edga|edgios)\/([\w.]+)/.exec(userAgent2) || /(opr)[\/]([\w.]+)/.exec(userAgent2) || /(vivaldi)[\/]([\w.]+)/.exec(userAgent2) || /(chrome|crios)[\/]([\w.]+)/.exec(userAgent2) || /(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(userAgent2) || /(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(userAgent2) || /(firefox|fxios)[\/]([\w.]+)/.exec(userAgent2) || /(webkit)[\/]([\w.]+)/.exec(userAgent2) || /(opera)(?:.*version|)[\/]([\w.]+)/.exec(userAgent2) || [];
  return {
    browser: match[5] || match[3] || match[1] || "",
    version: match[4] || match[2] || "0",
    platform: platformMatch[0] || ""
  };
}
function getPlatformMatch(userAgent2) {
  return /(ipad)/.exec(userAgent2) || /(ipod)/.exec(userAgent2) || /(windows phone)/.exec(userAgent2) || /(iphone)/.exec(userAgent2) || /(kindle)/.exec(userAgent2) || /(silk)/.exec(userAgent2) || /(android)/.exec(userAgent2) || /(win)/.exec(userAgent2) || /(mac)/.exec(userAgent2) || /(linux)/.exec(userAgent2) || /(cros)/.exec(userAgent2) || /(playbook)/.exec(userAgent2) || /(bb)/.exec(userAgent2) || /(blackberry)/.exec(userAgent2) || [];
}
const hasTouch = "ontouchstart" in window || window.navigator.maxTouchPoints > 0;
function getPlatform(UA) {
  const userAgent2 = UA.toLowerCase();
  const platformMatch = getPlatformMatch(userAgent2);
  const matched = getMatch(userAgent2, platformMatch);
  const browser = {
    mobile: false,
    desktop: false,
    cordova: false,
    capacitor: false,
    nativeMobile: false,
    // nativeMobileWrapper: void 0,
    electron: false,
    bex: false,
    linux: false,
    mac: false,
    win: false,
    cros: false,
    chrome: false,
    firefox: false,
    opera: false,
    safari: false,
    vivaldi: false,
    edge: false,
    edgeChromium: false,
    ie: false,
    webkit: false,
    android: false,
    ios: false,
    ipad: false,
    iphone: false,
    ipod: false,
    kindle: false,
    winphone: false,
    blackberry: false,
    playbook: false,
    silk: false
  };
  if (matched.browser) {
    browser[matched.browser] = true;
    browser.version = matched.version;
    browser.versionNumber = parseInt(matched.version, 10);
  }
  if (matched.platform) {
    browser[matched.platform] = true;
  }
  const knownMobiles = browser.android || browser.ios || browser.bb || browser.blackberry || browser.ipad || browser.iphone || browser.ipod || browser.kindle || browser.playbook || browser.silk || browser["windows phone"];
  if (knownMobiles === true || userAgent2.indexOf("mobile") !== -1) {
    browser.mobile = true;
  } else {
    browser.desktop = true;
  }
  if (browser["windows phone"]) {
    browser.winphone = true;
    delete browser["windows phone"];
  }
  if (browser.edga || browser.edgios || browser.edg) {
    browser.edge = true;
    matched.browser = "edge";
  } else if (browser.crios) {
    browser.chrome = true;
    matched.browser = "chrome";
  } else if (browser.fxios) {
    browser.firefox = true;
    matched.browser = "firefox";
  }
  if (browser.ipod || browser.ipad || browser.iphone) {
    browser.ios = true;
  }
  if (browser.vivaldi) {
    matched.browser = "vivaldi";
    browser.vivaldi = true;
  }
  if (
    // Chrome, Opera 15+, Vivaldi and Safari are webkit based browsers
    browser.chrome || browser.opr || browser.safari || browser.vivaldi || browser.mobile === true && browser.ios !== true && knownMobiles !== true
  ) {
    browser.webkit = true;
  }
  if (browser.opr) {
    matched.browser = "opera";
    browser.opera = true;
  }
  if (browser.safari) {
    if (browser.blackberry || browser.bb) {
      matched.browser = "blackberry";
      browser.blackberry = true;
    } else if (browser.playbook) {
      matched.browser = "playbook";
      browser.playbook = true;
    } else if (browser.android) {
      matched.browser = "android";
      browser.android = true;
    } else if (browser.kindle) {
      matched.browser = "kindle";
      browser.kindle = true;
    } else if (browser.silk) {
      matched.browser = "silk";
      browser.silk = true;
    }
  }
  browser.name = matched.browser;
  browser.platform = matched.platform;
  {
    if (userAgent2.indexOf("electron") !== -1) {
      browser.electron = true;
    } else if (document.location.href.indexOf("-extension://") !== -1) {
      browser.bex = true;
    } else {
      if (window.Capacitor !== void 0) {
        browser.capacitor = true;
        browser.nativeMobile = true;
        browser.nativeMobileWrapper = "capacitor";
      } else if (window._cordovaNative !== void 0 || window.cordova !== void 0) {
        browser.cordova = true;
        browser.nativeMobile = true;
        browser.nativeMobileWrapper = "cordova";
      }
      if (isRuntimeSsrPreHydration.value === true) {
        preHydrationBrowser = { is: { ...browser } };
      }
      if (hasTouch === true && browser.mac === true && (browser.desktop === true && browser.safari === true || browser.nativeMobile === true && browser.android !== true && browser.ios !== true && browser.ipad !== true)) {
        delete browser.mac;
        delete browser.desktop;
        const platform = Math.min(window.innerHeight, window.innerWidth) > 414 ? "ipad" : "iphone";
        Object.assign(browser, {
          mobile: true,
          ios: true,
          platform,
          [platform]: true
        });
      }
      if (browser.mobile !== true && window.navigator.userAgentData && window.navigator.userAgentData.mobile) {
        delete browser.desktop;
        browser.mobile = true;
      }
    }
  }
  return browser;
}
const userAgent = navigator.userAgent || navigator.vendor || window.opera;
const ssrClient = {
  has: {
    touch: false,
    webStorage: false
  },
  within: { iframe: false }
};
const client = {
  userAgent,
  is: getPlatform(userAgent),
  has: {
    touch: hasTouch
  },
  within: {
    iframe: window.self !== window.top
  }
};
const Platform = {
  install(opts) {
    const { $q } = opts;
    if (isRuntimeSsrPreHydration.value === true) {
      opts.onSSRHydrated.push(() => {
        Object.assign($q.platform, client);
        isRuntimeSsrPreHydration.value = false;
      });
      $q.platform = reactive(this);
    } else {
      $q.platform = this;
    }
  }
};
{
  let hasWebStorage;
  injectProp(client.has, "webStorage", () => {
    if (hasWebStorage !== void 0) {
      return hasWebStorage;
    }
    try {
      if (window.localStorage) {
        hasWebStorage = true;
        return true;
      }
    } catch (_) {
    }
    hasWebStorage = false;
    return false;
  });
  Object.assign(Platform, client);
  if (isRuntimeSsrPreHydration.value === true) {
    Object.assign(Platform, preHydrationBrowser, ssrClient);
    preHydrationBrowser = null;
  }
}
function createComponent(raw) {
  return markRaw(/* @__PURE__ */ defineComponent(raw));
}
function createDirective(raw) {
  return markRaw(raw);
}
const createReactivePlugin = (state, plugin) => {
  const reactiveState = reactive(state);
  for (const name in state) {
    injectProp(
      plugin,
      name,
      () => reactiveState[name],
      (val) => {
        reactiveState[name] = val;
      }
    );
  }
  return plugin;
};
const listenOpts = {
  hasPassive: false,
  passiveCapture: true,
  notPassiveCapture: true
};
try {
  const opts = Object.defineProperty({}, "passive", {
    get() {
      Object.assign(listenOpts, {
        hasPassive: true,
        passive: { passive: true },
        notPassive: { passive: false },
        passiveCapture: { passive: true, capture: true },
        notPassiveCapture: { passive: false, capture: true }
      });
    }
  });
  window.addEventListener("qtest", null, opts);
  window.removeEventListener("qtest", null, opts);
} catch (_) {
}
function noop$2() {
}
function leftClick(e) {
  return e.button === 0;
}
function position(e) {
  if (e.touches && e.touches[0]) {
    e = e.touches[0];
  } else if (e.changedTouches && e.changedTouches[0]) {
    e = e.changedTouches[0];
  } else if (e.targetTouches && e.targetTouches[0]) {
    e = e.targetTouches[0];
  }
  return {
    top: e.clientY,
    left: e.clientX
  };
}
function getEventPath(e) {
  if (e.path) {
    return e.path;
  }
  if (e.composedPath) {
    return e.composedPath();
  }
  const path = [];
  let el = e.target;
  while (el) {
    path.push(el);
    if (el.tagName === "HTML") {
      path.push(document);
      path.push(window);
      return path;
    }
    el = el.parentElement;
  }
}
function stop(e) {
  e.stopPropagation();
}
function prevent(e) {
  e.cancelable !== false && e.preventDefault();
}
function stopAndPrevent(e) {
  e.cancelable !== false && e.preventDefault();
  e.stopPropagation();
}
function preventDraggable(el, status) {
  if (el === void 0 || status === true && el.__dragPrevented === true) {
    return;
  }
  const fn = status === true ? (el2) => {
    el2.__dragPrevented = true;
    el2.addEventListener("dragstart", prevent, listenOpts.notPassiveCapture);
  } : (el2) => {
    delete el2.__dragPrevented;
    el2.removeEventListener("dragstart", prevent, listenOpts.notPassiveCapture);
  };
  el.querySelectorAll("a, img").forEach(fn);
}
function addEvt(ctx, targetName, events) {
  const name = `__q_${targetName}_evt`;
  ctx[name] = ctx[name] !== void 0 ? ctx[name].concat(events) : events;
  events.forEach((evt) => {
    evt[0].addEventListener(evt[1], ctx[evt[2]], listenOpts[evt[3]]);
  });
}
function cleanEvt(ctx, targetName) {
  const name = `__q_${targetName}_evt`;
  if (ctx[name] !== void 0) {
    ctx[name].forEach((evt) => {
      evt[0].removeEventListener(evt[1], ctx[evt[2]], listenOpts[evt[3]]);
    });
    ctx[name] = void 0;
  }
}
function debounce$1(fn, wait = 250, immediate) {
  let timer = null;
  function debounced() {
    const args = arguments;
    const later = () => {
      timer = null;
      {
        fn.apply(this, args);
      }
    };
    if (timer !== null) {
      clearTimeout(timer);
    }
    timer = setTimeout(later, wait);
  }
  debounced.cancel = () => {
    timer !== null && clearTimeout(timer);
  };
  return debounced;
}
const SIZE_LIST = ["sm", "md", "lg", "xl"];
const { passive } = listenOpts;
const Screen = createReactivePlugin({
  width: 0,
  height: 0,
  name: "xs",
  sizes: {
    sm: 600,
    md: 1024,
    lg: 1440,
    xl: 1920
  },
  lt: {
    sm: true,
    md: true,
    lg: true,
    xl: true
  },
  gt: {
    xs: false,
    sm: false,
    md: false,
    lg: false
  },
  xs: true,
  sm: false,
  md: false,
  lg: false,
  xl: false
}, {
  setSizes: noop$2,
  setDebounce: noop$2,
  install({ $q, onSSRHydrated }) {
    $q.screen = this;
    if (this.__installed === true) {
      if ($q.config.screen !== void 0) {
        if ($q.config.screen.bodyClasses === false) {
          document.body.classList.remove(`screen--${this.name}`);
        } else {
          this.__update(true);
        }
      }
      return;
    }
    const { visualViewport } = window;
    const target2 = visualViewport || window;
    const scrollingElement = document.scrollingElement || document.documentElement;
    const getSize = visualViewport === void 0 || client.is.mobile === true ? () => [
      Math.max(window.innerWidth, scrollingElement.clientWidth),
      Math.max(window.innerHeight, scrollingElement.clientHeight)
    ] : () => [
      visualViewport.width * visualViewport.scale + window.innerWidth - scrollingElement.clientWidth,
      visualViewport.height * visualViewport.scale + window.innerHeight - scrollingElement.clientHeight
    ];
    const classes = $q.config.screen?.bodyClasses === true;
    this.__update = (force) => {
      const [w, h2] = getSize();
      if (h2 !== this.height) {
        this.height = h2;
      }
      if (w !== this.width) {
        this.width = w;
      } else if (force !== true) {
        return;
      }
      let s = this.sizes;
      this.gt.xs = w >= s.sm;
      this.gt.sm = w >= s.md;
      this.gt.md = w >= s.lg;
      this.gt.lg = w >= s.xl;
      this.lt.sm = w < s.sm;
      this.lt.md = w < s.md;
      this.lt.lg = w < s.lg;
      this.lt.xl = w < s.xl;
      this.xs = this.lt.sm;
      this.sm = this.gt.xs === true && this.lt.md === true;
      this.md = this.gt.sm === true && this.lt.lg === true;
      this.lg = this.gt.md === true && this.lt.xl === true;
      this.xl = this.gt.lg;
      s = this.xs === true && "xs" || this.sm === true && "sm" || this.md === true && "md" || this.lg === true && "lg" || "xl";
      if (s !== this.name) {
        if (classes === true) {
          document.body.classList.remove(`screen--${this.name}`);
          document.body.classList.add(`screen--${s}`);
        }
        this.name = s;
      }
    };
    let updateEvt, updateSizes = {}, updateDebounce = 16;
    this.setSizes = (sizes) => {
      SIZE_LIST.forEach((name) => {
        if (sizes[name] !== void 0) {
          updateSizes[name] = sizes[name];
        }
      });
    };
    this.setDebounce = (deb) => {
      updateDebounce = deb;
    };
    const start2 = () => {
      const style = getComputedStyle(document.body);
      if (style.getPropertyValue("--q-size-sm")) {
        SIZE_LIST.forEach((name) => {
          this.sizes[name] = parseInt(style.getPropertyValue(`--q-size-${name}`), 10);
        });
      }
      this.setSizes = (sizes) => {
        SIZE_LIST.forEach((name) => {
          if (sizes[name]) {
            this.sizes[name] = sizes[name];
          }
        });
        this.__update(true);
      };
      this.setDebounce = (delay) => {
        updateEvt !== void 0 && target2.removeEventListener("resize", updateEvt, passive);
        updateEvt = delay > 0 ? debounce$1(this.__update, delay) : this.__update;
        target2.addEventListener("resize", updateEvt, passive);
      };
      this.setDebounce(updateDebounce);
      if (Object.keys(updateSizes).length !== 0) {
        this.setSizes(updateSizes);
        updateSizes = void 0;
      } else {
        this.__update();
      }
      classes === true && this.name === "xs" && document.body.classList.add("screen--xs");
    };
    if (isRuntimeSsrPreHydration.value === true) {
      onSSRHydrated.push(start2);
    } else {
      start2();
    }
  }
});
const Plugin$5 = createReactivePlugin({
  isActive: false,
  mode: false
}, {
  __media: void 0,
  set(val) {
    Plugin$5.mode = val;
    if (val === "auto") {
      if (Plugin$5.__media === void 0) {
        Plugin$5.__media = window.matchMedia("(prefers-color-scheme: dark)");
        Plugin$5.__updateMedia = () => {
          Plugin$5.set("auto");
        };
        Plugin$5.__media.addListener(Plugin$5.__updateMedia);
      }
      val = Plugin$5.__media.matches;
    } else if (Plugin$5.__media !== void 0) {
      Plugin$5.__media.removeListener(Plugin$5.__updateMedia);
      Plugin$5.__media = void 0;
    }
    Plugin$5.isActive = val === true;
    document.body.classList.remove(`body--${val === true ? "light" : "dark"}`);
    document.body.classList.add(`body--${val === true ? "dark" : "light"}`);
  },
  toggle() {
    {
      Plugin$5.set(Plugin$5.isActive === false);
    }
  },
  install({ $q, ssrContext }) {
    const { dark } = $q.config;
    $q.dark = this;
    if (this.__installed !== true) {
      this.set(dark !== void 0 ? dark : false);
    }
  }
});
function setCssVar(propName, value, element = document.body) {
  if (typeof propName !== "string") {
    throw new TypeError("Expected a string as propName");
  }
  if (typeof value !== "string") {
    throw new TypeError("Expected a string as value");
  }
  if (!(element instanceof Element)) {
    throw new TypeError("Expected a DOM element");
  }
  element.style.setProperty(`--q-${propName}`, value);
}
let lastKeyCompositionStatus = false;
function onKeyDownComposition(evt) {
  lastKeyCompositionStatus = evt.isComposing === true;
}
function shouldIgnoreKey(evt) {
  return lastKeyCompositionStatus === true || evt !== Object(evt) || evt.isComposing === true || evt.qKeyEvent === true;
}
function isKeyCode(evt, keyCodes) {
  return shouldIgnoreKey(evt) === true ? false : [].concat(keyCodes).includes(evt.keyCode);
}
function getMobilePlatform(is) {
  if (is.ios === true) return "ios";
  if (is.android === true) return "android";
}
function getBodyClasses({ is, has, within }, cfg) {
  const cls = [
    is.desktop === true ? "desktop" : "mobile",
    `${has.touch === false ? "no-" : ""}touch`
  ];
  if (is.mobile === true) {
    const mobile = getMobilePlatform(is);
    mobile !== void 0 && cls.push("platform-" + mobile);
  }
  if (is.nativeMobile === true) {
    const type = is.nativeMobileWrapper;
    cls.push(type);
    cls.push("native-mobile");
    if (is.ios === true && (cfg[type] === void 0 || cfg[type].iosStatusBarPadding !== false)) {
      cls.push("q-ios-padding");
    }
  } else if (is.electron === true) {
    cls.push("electron");
  } else if (is.bex === true) {
    cls.push("bex");
  }
  within.iframe === true && cls.push("within-iframe");
  return cls;
}
function applyClientSsrCorrections() {
  const { is } = client;
  const classes = document.body.className;
  const classList = new Set(classes.replace(/ {2}/g, " ").split(" "));
  if (is.nativeMobile !== true && is.electron !== true && is.bex !== true) {
    if (is.desktop === true) {
      classList.delete("mobile");
      classList.delete("platform-ios");
      classList.delete("platform-android");
      classList.add("desktop");
    } else if (is.mobile === true) {
      classList.delete("desktop");
      classList.add("mobile");
      classList.delete("platform-ios");
      classList.delete("platform-android");
      const mobile = getMobilePlatform(is);
      if (mobile !== void 0) {
        classList.add(`platform-${mobile}`);
      }
    }
  }
  if (client.has.touch === true) {
    classList.delete("no-touch");
    classList.add("touch");
  }
  if (client.within.iframe === true) {
    classList.add("within-iframe");
  }
  const newCls = Array.from(classList).join(" ");
  if (classes !== newCls) {
    document.body.className = newCls;
  }
}
function setColors(brand) {
  for (const color in brand) {
    setCssVar(color, brand[color]);
  }
}
const Body = {
  install(opts) {
    if (this.__installed === true) return;
    if (isRuntimeSsrPreHydration.value === true) {
      applyClientSsrCorrections();
    } else {
      const { $q } = opts;
      $q.config.brand !== void 0 && setColors($q.config.brand);
      const cls = getBodyClasses(client, $q.config);
      document.body.classList.add.apply(document.body.classList, cls);
    }
    if (client.is.ios === true) {
      document.body.addEventListener("touchstart", noop$2);
    }
    window.addEventListener("keydown", onKeyDownComposition, true);
  }
};
const getTrue = () => true;
function filterInvalidPath(path) {
  return typeof path === "string" && path !== "" && path !== "/" && path !== "#/";
}
function normalizeExitPath(path) {
  path.startsWith("#") === true && (path = path.substring(1));
  path.startsWith("/") === false && (path = "/" + path);
  path.endsWith("/") === true && (path = path.substring(0, path.length - 1));
  return "#" + path;
}
function getShouldExitFn(cfg) {
  if (cfg.backButtonExit === false) {
    return () => false;
  }
  if (cfg.backButtonExit === "*") {
    return getTrue;
  }
  const exitPaths = ["#/"];
  Array.isArray(cfg.backButtonExit) === true && exitPaths.push(
    ...cfg.backButtonExit.filter(filterInvalidPath).map(normalizeExitPath)
  );
  return () => exitPaths.includes(window.location.hash);
}
const History = {
  __history: [],
  add: noop$2,
  remove: noop$2,
  install({ $q }) {
    if (this.__installed === true) return;
    const { cordova, capacitor } = client.is;
    if (cordova !== true && capacitor !== true) return;
    const qConf = $q.config[cordova === true ? "cordova" : "capacitor"];
    if (qConf?.backButton === false) return;
    if (
      // if we're on Capacitor mode
      capacitor === true && (window.Capacitor === void 0 || window.Capacitor.Plugins.App === void 0)
    ) return;
    this.add = (entry) => {
      if (entry.condition === void 0) {
        entry.condition = getTrue;
      }
      this.__history.push(entry);
    };
    this.remove = (entry) => {
      const index = this.__history.indexOf(entry);
      if (index >= 0) {
        this.__history.splice(index, 1);
      }
    };
    const shouldExit = getShouldExitFn(
      Object.assign(
        { backButtonExit: true },
        qConf
      )
    );
    const backHandler = () => {
      if (this.__history.length) {
        const entry = this.__history[this.__history.length - 1];
        if (entry.condition() === true) {
          this.__history.pop();
          entry.handler();
        }
      } else if (shouldExit() === true) {
        navigator.app.exitApp();
      } else {
        window.history.back();
      }
    };
    if (cordova === true) {
      document.addEventListener("deviceready", () => {
        document.addEventListener("backbutton", backHandler, false);
      });
    } else {
      window.Capacitor.Plugins.App.addListener("backButton", backHandler);
    }
  }
};
const defaultLang = {
  isoName: "en-US",
  nativeName: "English (US)",
  label: {
    clear: "Clear",
    ok: "OK",
    cancel: "Cancel",
    close: "Close",
    set: "Set",
    select: "Select",
    reset: "Reset",
    remove: "Remove",
    update: "Update",
    create: "Create",
    search: "Search",
    filter: "Filter",
    refresh: "Refresh",
    expand: (label) => label ? `Expand "${label}"` : "Expand",
    collapse: (label) => label ? `Collapse "${label}"` : "Collapse"
  },
  date: {
    days: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
    daysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
    months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
    monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
    firstDayOfWeek: 0,
    // 0-6, 0 - Sunday, 1 Monday, ...
    format24h: false,
    pluralDay: "days",
    prevMonth: "Previous month",
    nextMonth: "Next month",
    prevYear: "Previous year",
    nextYear: "Next year",
    today: "Today",
    prevRangeYears: (range2) => `Previous ${range2} years`,
    nextRangeYears: (range2) => `Next ${range2} years`
  },
  table: {
    noData: "No data available",
    noResults: "No matching records found",
    loading: "Loading...",
    selectedRecords: (rows) => rows === 1 ? "1 record selected." : (rows === 0 ? "No" : rows) + " records selected.",
    recordsPerPage: "Records per page:",
    allRows: "All",
    pagination: (start2, end, total) => start2 + "-" + end + " of " + total,
    columns: "Columns"
  },
  pagination: {
    first: "First page",
    prev: "Previous page",
    next: "Next page",
    last: "Last page"
  },
  editor: {
    url: "URL",
    bold: "Bold",
    italic: "Italic",
    strikethrough: "Strikethrough",
    underline: "Underline",
    unorderedList: "Unordered List",
    orderedList: "Ordered List",
    subscript: "Subscript",
    superscript: "Superscript",
    hyperlink: "Hyperlink",
    toggleFullscreen: "Toggle Fullscreen",
    quote: "Quote",
    left: "Left align",
    center: "Center align",
    right: "Right align",
    justify: "Justify align",
    print: "Print",
    outdent: "Decrease indentation",
    indent: "Increase indentation",
    removeFormat: "Remove formatting",
    formatting: "Formatting",
    fontSize: "Font Size",
    align: "Align",
    hr: "Insert Horizontal Rule",
    undo: "Undo",
    redo: "Redo",
    heading1: "Heading 1",
    heading2: "Heading 2",
    heading3: "Heading 3",
    heading4: "Heading 4",
    heading5: "Heading 5",
    heading6: "Heading 6",
    paragraph: "Paragraph",
    code: "Code",
    size1: "Very small",
    size2: "A bit small",
    size3: "Normal",
    size4: "Medium-large",
    size5: "Big",
    size6: "Very big",
    size7: "Maximum",
    defaultFont: "Default Font",
    viewSource: "View Source"
  },
  tree: {
    noNodes: "No nodes available",
    noResults: "No matching nodes found"
  }
};
function getLocale() {
  const val = Array.isArray(navigator.languages) === true && navigator.languages.length !== 0 ? navigator.languages[0] : navigator.language;
  if (typeof val === "string") {
    return val.split(/[-_]/).map((v, i) => i === 0 ? v.toLowerCase() : i > 1 || v.length < 4 ? v.toUpperCase() : v[0].toUpperCase() + v.slice(1).toLowerCase()).join("-");
  }
}
const Plugin$4 = createReactivePlugin({
  __qLang: {}
}, {
  // props: object
  // __langConfig: object
  getLocale,
  set(langObject = defaultLang, ssrContext) {
    const lang = {
      ...langObject,
      rtl: langObject.rtl === true,
      getLocale
    };
    {
      lang.set = Plugin$4.set;
      if (Plugin$4.__langConfig === void 0 || Plugin$4.__langConfig.noHtmlAttrs !== true) {
        const el = document.documentElement;
        el.setAttribute("dir", lang.rtl === true ? "rtl" : "ltr");
        el.setAttribute("lang", lang.isoName);
      }
      Object.assign(Plugin$4.__qLang, lang);
    }
  },
  install({ $q, lang, ssrContext }) {
    {
      $q.lang = Plugin$4.__qLang;
      Plugin$4.__langConfig = $q.config.lang;
      if (this.__installed === true) {
        lang !== void 0 && this.set(lang);
      } else {
        this.props = new Proxy(this.__qLang, {
          get() {
            return Reflect.get(...arguments);
          },
          ownKeys(target2) {
            return Reflect.ownKeys(target2).filter((key) => key !== "set" && key !== "getLocale");
          }
        });
        this.set(lang || defaultLang);
      }
    }
  }
});
const materialIcons = {
  name: "material-icons",
  type: {
    positive: "check_circle",
    negative: "warning",
    info: "info",
    warning: "priority_high"
  },
  arrow: {
    up: "arrow_upward",
    right: "arrow_forward",
    down: "arrow_downward",
    left: "arrow_back",
    dropdown: "arrow_drop_down"
  },
  chevron: {
    left: "chevron_left",
    right: "chevron_right"
  },
  colorPicker: {
    spectrum: "gradient",
    tune: "tune",
    palette: "style"
  },
  pullToRefresh: {
    icon: "refresh"
  },
  carousel: {
    left: "chevron_left",
    right: "chevron_right",
    up: "keyboard_arrow_up",
    down: "keyboard_arrow_down",
    navigationIcon: "lens"
  },
  chip: {
    remove: "cancel",
    selected: "check"
  },
  datetime: {
    arrowLeft: "chevron_left",
    arrowRight: "chevron_right",
    now: "access_time",
    today: "today"
  },
  editor: {
    bold: "format_bold",
    italic: "format_italic",
    strikethrough: "strikethrough_s",
    underline: "format_underlined",
    unorderedList: "format_list_bulleted",
    orderedList: "format_list_numbered",
    subscript: "vertical_align_bottom",
    superscript: "vertical_align_top",
    hyperlink: "link",
    toggleFullscreen: "fullscreen",
    quote: "format_quote",
    left: "format_align_left",
    center: "format_align_center",
    right: "format_align_right",
    justify: "format_align_justify",
    print: "print",
    outdent: "format_indent_decrease",
    indent: "format_indent_increase",
    removeFormat: "format_clear",
    formatting: "text_format",
    fontSize: "format_size",
    align: "format_align_left",
    hr: "remove",
    undo: "undo",
    redo: "redo",
    heading: "format_size",
    code: "code",
    size: "format_size",
    font: "font_download",
    viewSource: "code"
  },
  expansionItem: {
    icon: "keyboard_arrow_down",
    denseIcon: "arrow_drop_down"
  },
  fab: {
    icon: "add",
    activeIcon: "close"
  },
  field: {
    clear: "cancel",
    error: "error"
  },
  pagination: {
    first: "first_page",
    prev: "keyboard_arrow_left",
    next: "keyboard_arrow_right",
    last: "last_page"
  },
  rating: {
    icon: "grade"
  },
  stepper: {
    done: "check",
    active: "edit",
    error: "warning"
  },
  tabs: {
    left: "chevron_left",
    right: "chevron_right",
    up: "keyboard_arrow_up",
    down: "keyboard_arrow_down"
  },
  table: {
    arrowUp: "arrow_upward",
    warning: "warning",
    firstPage: "first_page",
    prevPage: "chevron_left",
    nextPage: "chevron_right",
    lastPage: "last_page"
  },
  tree: {
    icon: "play_arrow"
  },
  uploader: {
    done: "done",
    clear: "clear",
    add: "add_box",
    upload: "cloud_upload",
    removeQueue: "clear_all",
    removeUploaded: "done_all"
  }
};
const Plugin$3 = createReactivePlugin({
  iconMapFn: null,
  __qIconSet: {}
}, {
  // props: object
  set(setObject, ssrContext) {
    const def2 = { ...setObject };
    {
      def2.set = Plugin$3.set;
      Object.assign(Plugin$3.__qIconSet, def2);
    }
  },
  install({ $q, iconSet, ssrContext }) {
    {
      if ($q.config.iconMapFn !== void 0) {
        this.iconMapFn = $q.config.iconMapFn;
      }
      $q.iconSet = this.__qIconSet;
      injectProp($q, "iconMapFn", () => this.iconMapFn, (val) => {
        this.iconMapFn = val;
      });
      if (this.__installed === true) {
        iconSet !== void 0 && this.set(iconSet);
      } else {
        this.props = new Proxy(this.__qIconSet, {
          get() {
            return Reflect.get(...arguments);
          },
          ownKeys(target2) {
            return Reflect.ownKeys(target2).filter((key) => key !== "set");
          }
        });
        this.set(iconSet || materialIcons);
      }
    }
  }
});
const quasarKey = "_q_";
const timelineKey = "_q_t_";
const layoutKey = "_q_l_";
const pageContainerKey = "_q_pc_";
const formKey = "_q_fo_";
function emptyRenderFn() {
}
const globalConfig = {};
let globalConfigIsFrozen = false;
function freezeGlobalConfig() {
  globalConfigIsFrozen = true;
}
function isDeepEqual(a, b) {
  if (a === b) {
    return true;
  }
  if (a !== null && b !== null && typeof a === "object" && typeof b === "object") {
    if (a.constructor !== b.constructor) {
      return false;
    }
    let length, i;
    if (a.constructor === Array) {
      length = a.length;
      if (length !== b.length) {
        return false;
      }
      for (i = length; i-- !== 0; ) {
        if (isDeepEqual(a[i], b[i]) !== true) {
          return false;
        }
      }
      return true;
    }
    if (a.constructor === Map) {
      if (a.size !== b.size) {
        return false;
      }
      let iter = a.entries();
      i = iter.next();
      while (i.done !== true) {
        if (b.has(i.value[0]) !== true) {
          return false;
        }
        i = iter.next();
      }
      iter = a.entries();
      i = iter.next();
      while (i.done !== true) {
        if (isDeepEqual(i.value[1], b.get(i.value[0])) !== true) {
          return false;
        }
        i = iter.next();
      }
      return true;
    }
    if (a.constructor === Set) {
      if (a.size !== b.size) {
        return false;
      }
      const iter = a.entries();
      i = iter.next();
      while (i.done !== true) {
        if (b.has(i.value[0]) !== true) {
          return false;
        }
        i = iter.next();
      }
      return true;
    }
    if (a.buffer != null && a.buffer.constructor === ArrayBuffer) {
      length = a.length;
      if (length !== b.length) {
        return false;
      }
      for (i = length; i-- !== 0; ) {
        if (a[i] !== b[i]) {
          return false;
        }
      }
      return true;
    }
    if (a.constructor === RegExp) {
      return a.source === b.source && a.flags === b.flags;
    }
    if (a.valueOf !== Object.prototype.valueOf) {
      return a.valueOf() === b.valueOf();
    }
    if (a.toString !== Object.prototype.toString) {
      return a.toString() === b.toString();
    }
    const keys = Object.keys(a).filter((key) => a[key] !== void 0);
    length = keys.length;
    if (length !== Object.keys(b).filter((key) => b[key] !== void 0).length) {
      return false;
    }
    for (i = length; i-- !== 0; ) {
      const key = keys[i];
      if (isDeepEqual(a[key], b[key]) !== true) {
        return false;
      }
    }
    return true;
  }
  return a !== a && b !== b;
}
function isObject(v) {
  return v !== null && typeof v === "object" && Array.isArray(v) !== true;
}
function isDate$1(v) {
  return Object.prototype.toString.call(v) === "[object Date]";
}
function isRegexp(v) {
  return Object.prototype.toString.call(v) === "[object RegExp]";
}
function isNumber$1(v) {
  return typeof v === "number" && isFinite(v);
}
const autoInstalledPlugins = [
  Platform,
  Body,
  Plugin$5,
  Screen,
  History,
  Plugin$4,
  Plugin$3
];
function createChildApp(appCfg, parentApp) {
  const app2 = createApp(appCfg);
  app2.config.globalProperties = parentApp.config.globalProperties;
  const { reload, ...appContext } = parentApp._context;
  Object.assign(app2._context, appContext);
  return app2;
}
function installPlugins(pluginOpts, pluginList) {
  pluginList.forEach((Plugin2) => {
    Plugin2.install(pluginOpts);
    Plugin2.__installed = true;
  });
}
function prepareApp(app2, uiOpts, pluginOpts) {
  app2.config.globalProperties.$q = pluginOpts.$q;
  app2.provide(quasarKey, pluginOpts.$q);
  installPlugins(pluginOpts, autoInstalledPlugins);
  uiOpts.components !== void 0 && Object.values(uiOpts.components).forEach((c) => {
    if (isObject(c) === true && c.name !== void 0) {
      app2.component(c.name, c);
    }
  });
  uiOpts.directives !== void 0 && Object.values(uiOpts.directives).forEach((d) => {
    if (isObject(d) === true && d.name !== void 0) {
      app2.directive(d.name, d);
    }
  });
  uiOpts.plugins !== void 0 && installPlugins(
    pluginOpts,
    Object.values(uiOpts.plugins).filter(
      (p2) => typeof p2.install === "function" && autoInstalledPlugins.includes(p2) === false
    )
  );
  if (isRuntimeSsrPreHydration.value === true) {
    pluginOpts.$q.onSSRHydrated = () => {
      pluginOpts.onSSRHydrated.forEach((fn) => {
        fn();
      });
      pluginOpts.$q.onSSRHydrated = () => {
      };
    };
  }
}
const installQuasar = function(parentApp, opts = {}) {
  const $q = { version: "2.18.1" };
  if (globalConfigIsFrozen === false) {
    if (opts.config !== void 0) {
      Object.assign(globalConfig, opts.config);
    }
    $q.config = { ...globalConfig };
    freezeGlobalConfig();
  } else {
    $q.config = opts.config || {};
  }
  prepareApp(parentApp, opts, {
    parentApp,
    $q,
    lang: opts.lang,
    iconSet: opts.iconSet,
    onSSRHydrated: []
  });
};
const Quasar = {
  name: "Quasar",
  version: "2.18.1",
  install: installQuasar,
  // TODO: remove in Qv3 (should only be used through the plugin)
  // We provide a deprecated fallback here
  lang: Plugin$4,
  // TODO: remove in Qv3 (should only be used through the plugin)
  // We provide a deprecated fallback here
  iconSet: Plugin$3
};
function getDevtoolsGlobalHook() {
  return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__;
}
function getTarget() {
  return typeof navigator !== "undefined" && typeof window !== "undefined" ? window : typeof globalThis !== "undefined" ? globalThis : {};
}
const isProxyAvailable = typeof Proxy === "function";
const HOOK_SETUP = "devtools-plugin:setup";
const HOOK_PLUGIN_SETTINGS_SET = "plugin:settings:set";
let supported;
let perf;
function isPerformanceSupported() {
  var _a25;
  if (supported !== void 0) {
    return supported;
  }
  if (typeof window !== "undefined" && window.performance) {
    supported = true;
    perf = window.performance;
  } else if (typeof globalThis !== "undefined" && ((_a25 = globalThis.perf_hooks) === null || _a25 === void 0 ? void 0 : _a25.performance)) {
    supported = true;
    perf = globalThis.perf_hooks.performance;
  } else {
    supported = false;
  }
  return supported;
}
function now() {
  return isPerformanceSupported() ? perf.now() : Date.now();
}
class ApiProxy {
  constructor(plugin, hook2) {
    this.target = null;
    this.targetQueue = [];
    this.onQueue = [];
    this.plugin = plugin;
    this.hook = hook2;
    const defaultSettings = {};
    if (plugin.settings) {
      for (const id in plugin.settings) {
        const item = plugin.settings[id];
        defaultSettings[id] = item.defaultValue;
      }
    }
    const localSettingsSaveId = `__vue-devtools-plugin-settings__${plugin.id}`;
    let currentSettings = Object.assign({}, defaultSettings);
    try {
      const raw = localStorage.getItem(localSettingsSaveId);
      const data = JSON.parse(raw);
      Object.assign(currentSettings, data);
    } catch (e) {
    }
    this.fallbacks = {
      getSettings() {
        return currentSettings;
      },
      setSettings(value) {
        try {
          localStorage.setItem(localSettingsSaveId, JSON.stringify(value));
        } catch (e) {
        }
        currentSettings = value;
      },
      now() {
        return now();
      }
    };
    if (hook2) {
      hook2.on(HOOK_PLUGIN_SETTINGS_SET, (pluginId, value) => {
        if (pluginId === this.plugin.id) {
          this.fallbacks.setSettings(value);
        }
      });
    }
    this.proxiedOn = new Proxy({}, {
      get: (_target, prop) => {
        if (this.target) {
          return this.target.on[prop];
        } else {
          return (...args) => {
            this.onQueue.push({
              method: prop,
              args
            });
          };
        }
      }
    });
    this.proxiedTarget = new Proxy({}, {
      get: (_target, prop) => {
        if (this.target) {
          return this.target[prop];
        } else if (prop === "on") {
          return this.proxiedOn;
        } else if (Object.keys(this.fallbacks).includes(prop)) {
          return (...args) => {
            this.targetQueue.push({
              method: prop,
              args,
              resolve: () => {
              }
            });
            return this.fallbacks[prop](...args);
          };
        } else {
          return (...args) => {
            return new Promise((resolve2) => {
              this.targetQueue.push({
                method: prop,
                args,
                resolve: resolve2
              });
            });
          };
        }
      }
    });
  }
  async setRealTarget(target2) {
    this.target = target2;
    for (const item of this.onQueue) {
      this.target.on[item.method](...item.args);
    }
    for (const item of this.targetQueue) {
      item.resolve(await this.target[item.method](...item.args));
    }
  }
}
function setupDevtoolsPlugin(pluginDescriptor, setupFn) {
  const descriptor = pluginDescriptor;
  const target2 = getTarget();
  const hook2 = getDevtoolsGlobalHook();
  const enableProxy = isProxyAvailable && descriptor.enableEarlyProxy;
  if (hook2 && (target2.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !enableProxy)) {
    hook2.emit(HOOK_SETUP, pluginDescriptor, setupFn);
  } else {
    const proxy = enableProxy ? new ApiProxy(descriptor, hook2) : null;
    const list = target2.__VUE_DEVTOOLS_PLUGINS__ = target2.__VUE_DEVTOOLS_PLUGINS__ || [];
    list.push({
      pluginDescriptor: descriptor,
      setupFn,
      proxy
    });
    if (proxy) {
      setupFn(proxy.proxiedTarget);
    }
  }
}
/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */
const isBrowser$1 = typeof document !== "undefined";
function isRouteComponent(component) {
  return typeof component === "object" || "displayName" in component || "props" in component || "__vccOpts" in component;
}
function isESModule(obj) {
  return obj.__esModule || obj[Symbol.toStringTag] === "Module" || // support CF with dynamic imports that do not
  // add the Module string tag
  obj.default && isRouteComponent(obj.default);
}
const assign$2 = Object.assign;
function applyToParams(fn, params) {
  const newParams = {};
  for (const key in params) {
    const value = params[key];
    newParams[key] = isArray$1(value) ? value.map(fn) : fn(value);
  }
  return newParams;
}
const noop$1 = () => {
};
const isArray$1 = Array.isArray;
const HASH_RE = /#/g;
const AMPERSAND_RE = /&/g;
const SLASH_RE = /\//g;
const EQUAL_RE = /=/g;
const IM_RE = /\?/g;
const PLUS_RE = /\+/g;
const ENC_BRACKET_OPEN_RE = /%5B/g;
const ENC_BRACKET_CLOSE_RE = /%5D/g;
const ENC_CARET_RE = /%5E/g;
const ENC_BACKTICK_RE = /%60/g;
const ENC_CURLY_OPEN_RE = /%7B/g;
const ENC_PIPE_RE = /%7C/g;
const ENC_CURLY_CLOSE_RE = /%7D/g;
const ENC_SPACE_RE = /%20/g;
function commonEncode(text) {
  return encodeURI("" + text).replace(ENC_PIPE_RE, "|").replace(ENC_BRACKET_OPEN_RE, "[").replace(ENC_BRACKET_CLOSE_RE, "]");
}
function encodeHash(text) {
  return commonEncode(text).replace(ENC_CURLY_OPEN_RE, "{").replace(ENC_CURLY_CLOSE_RE, "}").replace(ENC_CARET_RE, "^");
}
function encodeQueryValue(text) {
  return commonEncode(text).replace(PLUS_RE, "%2B").replace(ENC_SPACE_RE, "+").replace(HASH_RE, "%23").replace(AMPERSAND_RE, "%26").replace(ENC_BACKTICK_RE, "`").replace(ENC_CURLY_OPEN_RE, "{").replace(ENC_CURLY_CLOSE_RE, "}").replace(ENC_CARET_RE, "^");
}
function encodeQueryKey(text) {
  return encodeQueryValue(text).replace(EQUAL_RE, "%3D");
}
function encodePath(text) {
  return commonEncode(text).replace(HASH_RE, "%23").replace(IM_RE, "%3F");
}
function encodeParam(text) {
  return text == null ? "" : encodePath(text).replace(SLASH_RE, "%2F");
}
function decode$1(text) {
  try {
    return decodeURIComponent("" + text);
  } catch (err) {
  }
  return "" + text;
}
const TRAILING_SLASH_RE = /\/$/;
const removeTrailingSlash = (path) => path.replace(TRAILING_SLASH_RE, "");
function parseURL(parseQuery2, location2, currentLocation = "/") {
  let path, query = {}, searchString = "", hash = "";
  const hashPos = location2.indexOf("#");
  let searchPos = location2.indexOf("?");
  if (hashPos < searchPos && hashPos >= 0) {
    searchPos = -1;
  }
  if (searchPos > -1) {
    path = location2.slice(0, searchPos);
    searchString = location2.slice(searchPos + 1, hashPos > -1 ? hashPos : location2.length);
    query = parseQuery2(searchString);
  }
  if (hashPos > -1) {
    path = path || location2.slice(0, hashPos);
    hash = location2.slice(hashPos, location2.length);
  }
  path = resolveRelativePath(path != null ? path : location2, currentLocation);
  return {
    fullPath: path + (searchString && "?") + searchString + hash,
    path,
    query,
    hash: decode$1(hash)
  };
}
function stringifyURL(stringifyQuery2, location2) {
  const query = location2.query ? stringifyQuery2(location2.query) : "";
  return location2.path + (query && "?") + query + (location2.hash || "");
}
function stripBase(pathname, base) {
  if (!base || !pathname.toLowerCase().startsWith(base.toLowerCase()))
    return pathname;
  return pathname.slice(base.length) || "/";
}
function isSameRouteLocation(stringifyQuery2, a, b) {
  const aLastIndex = a.matched.length - 1;
  const bLastIndex = b.matched.length - 1;
  return aLastIndex > -1 && aLastIndex === bLastIndex && isSameRouteRecord$1(a.matched[aLastIndex], b.matched[bLastIndex]) && isSameRouteLocationParams$1(a.params, b.params) && stringifyQuery2(a.query) === stringifyQuery2(b.query) && a.hash === b.hash;
}
function isSameRouteRecord$1(a, b) {
  return (a.aliasOf || a) === (b.aliasOf || b);
}
function isSameRouteLocationParams$1(a, b) {
  if (Object.keys(a).length !== Object.keys(b).length)
    return false;
  for (const key in a) {
    if (!isSameRouteLocationParamsValue$1(a[key], b[key]))
      return false;
  }
  return true;
}
function isSameRouteLocationParamsValue$1(a, b) {
  return isArray$1(a) ? isEquivalentArray$1(a, b) : isArray$1(b) ? isEquivalentArray$1(b, a) : a === b;
}
function isEquivalentArray$1(a, b) {
  return isArray$1(b) ? a.length === b.length && a.every((value, i) => value === b[i]) : a.length === 1 && a[0] === b;
}
function resolveRelativePath(to, from) {
  if (to.startsWith("/"))
    return to;
  if (!to)
    return from;
  const fromSegments = from.split("/");
  const toSegments = to.split("/");
  const lastToSegment = toSegments[toSegments.length - 1];
  if (lastToSegment === ".." || lastToSegment === ".") {
    toSegments.push("");
  }
  let position2 = fromSegments.length - 1;
  let toPosition;
  let segment;
  for (toPosition = 0; toPosition < toSegments.length; toPosition++) {
    segment = toSegments[toPosition];
    if (segment === ".")
      continue;
    if (segment === "..") {
      if (position2 > 1)
        position2--;
    } else
      break;
  }
  return fromSegments.slice(0, position2).join("/") + "/" + toSegments.slice(toPosition).join("/");
}
const START_LOCATION_NORMALIZED = {
  path: "/",
  // TODO: could we use a symbol in the future?
  name: void 0,
  params: {},
  query: {},
  hash: "",
  fullPath: "/",
  matched: [],
  meta: {},
  redirectedFrom: void 0
};
var NavigationType;
(function(NavigationType2) {
  NavigationType2["pop"] = "pop";
  NavigationType2["push"] = "push";
})(NavigationType || (NavigationType = {}));
var NavigationDirection;
(function(NavigationDirection2) {
  NavigationDirection2["back"] = "back";
  NavigationDirection2["forward"] = "forward";
  NavigationDirection2["unknown"] = "";
})(NavigationDirection || (NavigationDirection = {}));
function normalizeBase(base) {
  if (!base) {
    if (isBrowser$1) {
      const baseEl = document.querySelector("base");
      base = baseEl && baseEl.getAttribute("href") || "/";
      base = base.replace(/^\w+:\/\/[^\/]+/, "");
    } else {
      base = "/";
    }
  }
  if (base[0] !== "/" && base[0] !== "#")
    base = "/" + base;
  return removeTrailingSlash(base);
}
const BEFORE_HASH_RE = /^[^#]+#/;
function createHref(base, location2) {
  return base.replace(BEFORE_HASH_RE, "#") + location2;
}
function getElementPosition(el, offset) {
  const docRect = document.documentElement.getBoundingClientRect();
  const elRect = el.getBoundingClientRect();
  return {
    behavior: offset.behavior,
    left: elRect.left - docRect.left - (offset.left || 0),
    top: elRect.top - docRect.top - (offset.top || 0)
  };
}
const computeScrollPosition = () => ({
  left: window.scrollX,
  top: window.scrollY
});
function scrollToPosition(position2) {
  let scrollToOptions;
  if ("el" in position2) {
    const positionEl = position2.el;
    const isIdSelector = typeof positionEl === "string" && positionEl.startsWith("#");
    const el = typeof positionEl === "string" ? isIdSelector ? document.getElementById(positionEl.slice(1)) : document.querySelector(positionEl) : positionEl;
    if (!el) {
      return;
    }
    scrollToOptions = getElementPosition(el, position2);
  } else {
    scrollToOptions = position2;
  }
  if ("scrollBehavior" in document.documentElement.style)
    window.scrollTo(scrollToOptions);
  else {
    window.scrollTo(scrollToOptions.left != null ? scrollToOptions.left : window.scrollX, scrollToOptions.top != null ? scrollToOptions.top : window.scrollY);
  }
}
function getScrollKey(path, delta) {
  const position2 = history.state ? history.state.position - delta : -1;
  return position2 + path;
}
const scrollPositions = /* @__PURE__ */ new Map();
function saveScrollPosition(key, scrollPosition) {
  scrollPositions.set(key, scrollPosition);
}
function getSavedScrollPosition(key) {
  const scroll = scrollPositions.get(key);
  scrollPositions.delete(key);
  return scroll;
}
let createBaseLocation = () => location.protocol + "//" + location.host;
function createCurrentLocation(base, location2) {
  const { pathname, search, hash } = location2;
  const hashPos = base.indexOf("#");
  if (hashPos > -1) {
    let slicePos = hash.includes(base.slice(hashPos)) ? base.slice(hashPos).length : 1;
    let pathFromHash = hash.slice(slicePos);
    if (pathFromHash[0] !== "/")
      pathFromHash = "/" + pathFromHash;
    return stripBase(pathFromHash, "");
  }
  const path = stripBase(pathname, base);
  return path + search + hash;
}
function useHistoryListeners(base, historyState, currentLocation, replace) {
  let listeners = [];
  let teardowns = [];
  let pauseState = null;
  const popStateHandler = ({ state }) => {
    const to = createCurrentLocation(base, location);
    const from = currentLocation.value;
    const fromState = historyState.value;
    let delta = 0;
    if (state) {
      currentLocation.value = to;
      historyState.value = state;
      if (pauseState && pauseState === from) {
        pauseState = null;
        return;
      }
      delta = fromState ? state.position - fromState.position : 0;
    } else {
      replace(to);
    }
    listeners.forEach((listener) => {
      listener(currentLocation.value, from, {
        delta,
        type: NavigationType.pop,
        direction: delta ? delta > 0 ? NavigationDirection.forward : NavigationDirection.back : NavigationDirection.unknown
      });
    });
  };
  function pauseListeners() {
    pauseState = currentLocation.value;
  }
  function listen(callback) {
    listeners.push(callback);
    const teardown = () => {
      const index = listeners.indexOf(callback);
      if (index > -1)
        listeners.splice(index, 1);
    };
    teardowns.push(teardown);
    return teardown;
  }
  function beforeUnloadListener() {
    const { history: history2 } = window;
    if (!history2.state)
      return;
    history2.replaceState(assign$2({}, history2.state, { scroll: computeScrollPosition() }), "");
  }
  function destroy() {
    for (const teardown of teardowns)
      teardown();
    teardowns = [];
    window.removeEventListener("popstate", popStateHandler);
    window.removeEventListener("beforeunload", beforeUnloadListener);
  }
  window.addEventListener("popstate", popStateHandler);
  window.addEventListener("beforeunload", beforeUnloadListener, {
    passive: true
  });
  return {
    pauseListeners,
    listen,
    destroy
  };
}
function buildState(back, current, forward, replaced = false, computeScroll = false) {
  return {
    back,
    current,
    forward,
    replaced,
    position: window.history.length,
    scroll: computeScroll ? computeScrollPosition() : null
  };
}
function useHistoryStateNavigation(base) {
  const { history: history2, location: location2 } = window;
  const currentLocation = {
    value: createCurrentLocation(base, location2)
  };
  const historyState = { value: history2.state };
  if (!historyState.value) {
    changeLocation(currentLocation.value, {
      back: null,
      current: currentLocation.value,
      forward: null,
      // the length is off by one, we need to decrease it
      position: history2.length - 1,
      replaced: true,
      // don't add a scroll as the user may have an anchor, and we want
      // scrollBehavior to be triggered without a saved position
      scroll: null
    }, true);
  }
  function changeLocation(to, state, replace2) {
    const hashIndex = base.indexOf("#");
    const url = hashIndex > -1 ? (location2.host && document.querySelector("base") ? base : base.slice(hashIndex)) + to : createBaseLocation() + base + to;
    try {
      history2[replace2 ? "replaceState" : "pushState"](state, "", url);
      historyState.value = state;
    } catch (err) {
      {
        console.error(err);
      }
      location2[replace2 ? "replace" : "assign"](url);
    }
  }
  function replace(to, data) {
    const state = assign$2({}, history2.state, buildState(
      historyState.value.back,
      // keep back and forward entries but override current position
      to,
      historyState.value.forward,
      true
    ), data, { position: historyState.value.position });
    changeLocation(to, state, true);
    currentLocation.value = to;
  }
  function push(to, data) {
    const currentState = assign$2(
      {},
      // use current history state to gracefully handle a wrong call to
      // history.replaceState
      // https://github.com/vuejs/router/issues/366
      historyState.value,
      history2.state,
      {
        forward: to,
        scroll: computeScrollPosition()
      }
    );
    changeLocation(currentState.current, currentState, true);
    const state = assign$2({}, buildState(currentLocation.value, to, null), { position: currentState.position + 1 }, data);
    changeLocation(to, state, false);
    currentLocation.value = to;
  }
  return {
    location: currentLocation,
    state: historyState,
    push,
    replace
  };
}
function createWebHistory(base) {
  base = normalizeBase(base);
  const historyNavigation = useHistoryStateNavigation(base);
  const historyListeners = useHistoryListeners(base, historyNavigation.state, historyNavigation.location, historyNavigation.replace);
  function go(delta, triggerListeners = true) {
    if (!triggerListeners)
      historyListeners.pauseListeners();
    history.go(delta);
  }
  const routerHistory = assign$2({
    // it's overridden right after
    location: "",
    base,
    go,
    createHref: createHref.bind(null, base)
  }, historyNavigation, historyListeners);
  Object.defineProperty(routerHistory, "location", {
    enumerable: true,
    get: () => historyNavigation.location.value
  });
  Object.defineProperty(routerHistory, "state", {
    enumerable: true,
    get: () => historyNavigation.state.value
  });
  return routerHistory;
}
function createWebHashHistory(base) {
  base = location.host ? base || location.pathname + location.search : "";
  if (!base.includes("#"))
    base += "#";
  return createWebHistory(base);
}
function isRouteLocation(route) {
  return typeof route === "string" || route && typeof route === "object";
}
function isRouteName(name) {
  return typeof name === "string" || typeof name === "symbol";
}
const NavigationFailureSymbol = Symbol("");
var NavigationFailureType;
(function(NavigationFailureType2) {
  NavigationFailureType2[NavigationFailureType2["aborted"] = 4] = "aborted";
  NavigationFailureType2[NavigationFailureType2["cancelled"] = 8] = "cancelled";
  NavigationFailureType2[NavigationFailureType2["duplicated"] = 16] = "duplicated";
})(NavigationFailureType || (NavigationFailureType = {}));
function createRouterError(type, params) {
  {
    return assign$2(new Error(), {
      type,
      [NavigationFailureSymbol]: true
    }, params);
  }
}
function isNavigationFailure(error, type) {
  return error instanceof Error && NavigationFailureSymbol in error && (type == null || !!(error.type & type));
}
const BASE_PARAM_PATTERN = "[^/]+?";
const BASE_PATH_PARSER_OPTIONS = {
  sensitive: false,
  strict: false,
  start: true,
  end: true
};
const REGEX_CHARS_RE = /[.+*?^${}()[\]/\\]/g;
function tokensToParser(segments, extraOptions) {
  const options = assign$2({}, BASE_PATH_PARSER_OPTIONS, extraOptions);
  const score = [];
  let pattern = options.start ? "^" : "";
  const keys = [];
  for (const segment of segments) {
    const segmentScores = segment.length ? [] : [
      90
      /* PathScore.Root */
    ];
    if (options.strict && !segment.length)
      pattern += "/";
    for (let tokenIndex = 0; tokenIndex < segment.length; tokenIndex++) {
      const token = segment[tokenIndex];
      let subSegmentScore = 40 + (options.sensitive ? 0.25 : 0);
      if (token.type === 0) {
        if (!tokenIndex)
          pattern += "/";
        pattern += token.value.replace(REGEX_CHARS_RE, "\\$&");
        subSegmentScore += 40;
      } else if (token.type === 1) {
        const { value, repeatable, optional, regexp } = token;
        keys.push({
          name: value,
          repeatable,
          optional
        });
        const re2 = regexp ? regexp : BASE_PARAM_PATTERN;
        if (re2 !== BASE_PARAM_PATTERN) {
          subSegmentScore += 10;
          try {
            new RegExp(`(${re2})`);
          } catch (err) {
            throw new Error(`Invalid custom RegExp for param "${value}" (${re2}): ` + err.message);
          }
        }
        let subPattern = repeatable ? `((?:${re2})(?:/(?:${re2}))*)` : `(${re2})`;
        if (!tokenIndex)
          subPattern = // avoid an optional / if there are more segments e.g. /:p?-static
          // or /:p?-:p2
          optional && segment.length < 2 ? `(?:/${subPattern})` : "/" + subPattern;
        if (optional)
          subPattern += "?";
        pattern += subPattern;
        subSegmentScore += 20;
        if (optional)
          subSegmentScore += -8;
        if (repeatable)
          subSegmentScore += -20;
        if (re2 === ".*")
          subSegmentScore += -50;
      }
      segmentScores.push(subSegmentScore);
    }
    score.push(segmentScores);
  }
  if (options.strict && options.end) {
    const i = score.length - 1;
    score[i][score[i].length - 1] += 0.7000000000000001;
  }
  if (!options.strict)
    pattern += "/?";
  if (options.end)
    pattern += "$";
  else if (options.strict && !pattern.endsWith("/"))
    pattern += "(?:/|$)";
  const re = new RegExp(pattern, options.sensitive ? "" : "i");
  function parse(path) {
    const match = path.match(re);
    const params = {};
    if (!match)
      return null;
    for (let i = 1; i < match.length; i++) {
      const value = match[i] || "";
      const key = keys[i - 1];
      params[key.name] = value && key.repeatable ? value.split("/") : value;
    }
    return params;
  }
  function stringify(params) {
    let path = "";
    let avoidDuplicatedSlash = false;
    for (const segment of segments) {
      if (!avoidDuplicatedSlash || !path.endsWith("/"))
        path += "/";
      avoidDuplicatedSlash = false;
      for (const token of segment) {
        if (token.type === 0) {
          path += token.value;
        } else if (token.type === 1) {
          const { value, repeatable, optional } = token;
          const param = value in params ? params[value] : "";
          if (isArray$1(param) && !repeatable) {
            throw new Error(`Provided param "${value}" is an array but it is not repeatable (* or + modifiers)`);
          }
          const text = isArray$1(param) ? param.join("/") : param;
          if (!text) {
            if (optional) {
              if (segment.length < 2) {
                if (path.endsWith("/"))
                  path = path.slice(0, -1);
                else
                  avoidDuplicatedSlash = true;
              }
            } else
              throw new Error(`Missing required param "${value}"`);
          }
          path += text;
        }
      }
    }
    return path || "/";
  }
  return {
    re,
    score,
    keys,
    parse,
    stringify
  };
}
function compareScoreArray(a, b) {
  let i = 0;
  while (i < a.length && i < b.length) {
    const diff = b[i] - a[i];
    if (diff)
      return diff;
    i++;
  }
  if (a.length < b.length) {
    return a.length === 1 && a[0] === 40 + 40 ? -1 : 1;
  } else if (a.length > b.length) {
    return b.length === 1 && b[0] === 40 + 40 ? 1 : -1;
  }
  return 0;
}
function comparePathParserScore(a, b) {
  let i = 0;
  const aScore = a.score;
  const bScore = b.score;
  while (i < aScore.length && i < bScore.length) {
    const comp = compareScoreArray(aScore[i], bScore[i]);
    if (comp)
      return comp;
    i++;
  }
  if (Math.abs(bScore.length - aScore.length) === 1) {
    if (isLastScoreNegative(aScore))
      return 1;
    if (isLastScoreNegative(bScore))
      return -1;
  }
  return bScore.length - aScore.length;
}
function isLastScoreNegative(score) {
  const last = score[score.length - 1];
  return score.length > 0 && last[last.length - 1] < 0;
}
const ROOT_TOKEN = {
  type: 0,
  value: ""
};
const VALID_PARAM_RE = /[a-zA-Z0-9_]/;
function tokenizePath(path) {
  if (!path)
    return [[]];
  if (path === "/")
    return [[ROOT_TOKEN]];
  if (!path.startsWith("/")) {
    throw new Error(`Invalid path "${path}"`);
  }
  function crash(message) {
    throw new Error(`ERR (${state})/"${buffer2}": ${message}`);
  }
  let state = 0;
  let previousState = state;
  const tokens = [];
  let segment;
  function finalizeSegment() {
    if (segment)
      tokens.push(segment);
    segment = [];
  }
  let i = 0;
  let char;
  let buffer2 = "";
  let customRe = "";
  function consumeBuffer() {
    if (!buffer2)
      return;
    if (state === 0) {
      segment.push({
        type: 0,
        value: buffer2
      });
    } else if (state === 1 || state === 2 || state === 3) {
      if (segment.length > 1 && (char === "*" || char === "+"))
        crash(`A repeatable param (${buffer2}) must be alone in its segment. eg: '/:ids+.`);
      segment.push({
        type: 1,
        value: buffer2,
        regexp: customRe,
        repeatable: char === "*" || char === "+",
        optional: char === "*" || char === "?"
      });
    } else {
      crash("Invalid state to consume buffer");
    }
    buffer2 = "";
  }
  function addCharToBuffer() {
    buffer2 += char;
  }
  while (i < path.length) {
    char = path[i++];
    if (char === "\\" && state !== 2) {
      previousState = state;
      state = 4;
      continue;
    }
    switch (state) {
      case 0:
        if (char === "/") {
          if (buffer2) {
            consumeBuffer();
          }
          finalizeSegment();
        } else if (char === ":") {
          consumeBuffer();
          state = 1;
        } else {
          addCharToBuffer();
        }
        break;
      case 4:
        addCharToBuffer();
        state = previousState;
        break;
      case 1:
        if (char === "(") {
          state = 2;
        } else if (VALID_PARAM_RE.test(char)) {
          addCharToBuffer();
        } else {
          consumeBuffer();
          state = 0;
          if (char !== "*" && char !== "?" && char !== "+")
            i--;
        }
        break;
      case 2:
        if (char === ")") {
          if (customRe[customRe.length - 1] == "\\")
            customRe = customRe.slice(0, -1) + char;
          else
            state = 3;
        } else {
          customRe += char;
        }
        break;
      case 3:
        consumeBuffer();
        state = 0;
        if (char !== "*" && char !== "?" && char !== "+")
          i--;
        customRe = "";
        break;
      default:
        crash("Unknown state");
        break;
    }
  }
  if (state === 2)
    crash(`Unfinished custom RegExp for param "${buffer2}"`);
  consumeBuffer();
  finalizeSegment();
  return tokens;
}
function createRouteRecordMatcher(record, parent, options) {
  const parser = tokensToParser(tokenizePath(record.path), options);
  const matcher = assign$2(parser, {
    record,
    parent,
    // these needs to be populated by the parent
    children: [],
    alias: []
  });
  if (parent) {
    if (!matcher.record.aliasOf === !parent.record.aliasOf)
      parent.children.push(matcher);
  }
  return matcher;
}
function createRouterMatcher(routes2, globalOptions) {
  const matchers = [];
  const matcherMap = /* @__PURE__ */ new Map();
  globalOptions = mergeOptions({ strict: false, end: true, sensitive: false }, globalOptions);
  function getRecordMatcher(name) {
    return matcherMap.get(name);
  }
  function addRoute(record, parent, originalRecord) {
    const isRootAdd = !originalRecord;
    const mainNormalizedRecord = normalizeRouteRecord(record);
    mainNormalizedRecord.aliasOf = originalRecord && originalRecord.record;
    const options = mergeOptions(globalOptions, record);
    const normalizedRecords = [mainNormalizedRecord];
    if ("alias" in record) {
      const aliases = typeof record.alias === "string" ? [record.alias] : record.alias;
      for (const alias of aliases) {
        normalizedRecords.push(
          // we need to normalize again to ensure the `mods` property
          // being non enumerable
          normalizeRouteRecord(assign$2({}, mainNormalizedRecord, {
            // this allows us to hold a copy of the `components` option
            // so that async components cache is hold on the original record
            components: originalRecord ? originalRecord.record.components : mainNormalizedRecord.components,
            path: alias,
            // we might be the child of an alias
            aliasOf: originalRecord ? originalRecord.record : mainNormalizedRecord
            // the aliases are always of the same kind as the original since they
            // are defined on the same record
          }))
        );
      }
    }
    let matcher;
    let originalMatcher;
    for (const normalizedRecord of normalizedRecords) {
      const { path } = normalizedRecord;
      if (parent && path[0] !== "/") {
        const parentPath = parent.record.path;
        const connectingSlash = parentPath[parentPath.length - 1] === "/" ? "" : "/";
        normalizedRecord.path = parent.record.path + (path && connectingSlash + path);
      }
      matcher = createRouteRecordMatcher(normalizedRecord, parent, options);
      if (originalRecord) {
        originalRecord.alias.push(matcher);
      } else {
        originalMatcher = originalMatcher || matcher;
        if (originalMatcher !== matcher)
          originalMatcher.alias.push(matcher);
        if (isRootAdd && record.name && !isAliasRecord(matcher)) {
          removeRoute(record.name);
        }
      }
      if (isMatchable(matcher)) {
        insertMatcher(matcher);
      }
      if (mainNormalizedRecord.children) {
        const children = mainNormalizedRecord.children;
        for (let i = 0; i < children.length; i++) {
          addRoute(children[i], matcher, originalRecord && originalRecord.children[i]);
        }
      }
      originalRecord = originalRecord || matcher;
    }
    return originalMatcher ? () => {
      removeRoute(originalMatcher);
    } : noop$1;
  }
  function removeRoute(matcherRef) {
    if (isRouteName(matcherRef)) {
      const matcher = matcherMap.get(matcherRef);
      if (matcher) {
        matcherMap.delete(matcherRef);
        matchers.splice(matchers.indexOf(matcher), 1);
        matcher.children.forEach(removeRoute);
        matcher.alias.forEach(removeRoute);
      }
    } else {
      const index = matchers.indexOf(matcherRef);
      if (index > -1) {
        matchers.splice(index, 1);
        if (matcherRef.record.name)
          matcherMap.delete(matcherRef.record.name);
        matcherRef.children.forEach(removeRoute);
        matcherRef.alias.forEach(removeRoute);
      }
    }
  }
  function getRoutes2() {
    return matchers;
  }
  function insertMatcher(matcher) {
    const index = findInsertionIndex(matcher, matchers);
    matchers.splice(index, 0, matcher);
    if (matcher.record.name && !isAliasRecord(matcher))
      matcherMap.set(matcher.record.name, matcher);
  }
  function resolve2(location2, currentLocation) {
    let matcher;
    let params = {};
    let path;
    let name;
    if ("name" in location2 && location2.name) {
      matcher = matcherMap.get(location2.name);
      if (!matcher)
        throw createRouterError(1, {
          location: location2
        });
      name = matcher.record.name;
      params = assign$2(
        // paramsFromLocation is a new object
        paramsFromLocation(
          currentLocation.params,
          // only keep params that exist in the resolved location
          // only keep optional params coming from a parent record
          matcher.keys.filter((k) => !k.optional).concat(matcher.parent ? matcher.parent.keys.filter((k) => k.optional) : []).map((k) => k.name)
        ),
        // discard any existing params in the current location that do not exist here
        // #1497 this ensures better active/exact matching
        location2.params && paramsFromLocation(location2.params, matcher.keys.map((k) => k.name))
      );
      path = matcher.stringify(params);
    } else if (location2.path != null) {
      path = location2.path;
      matcher = matchers.find((m) => m.re.test(path));
      if (matcher) {
        params = matcher.parse(path);
        name = matcher.record.name;
      }
    } else {
      matcher = currentLocation.name ? matcherMap.get(currentLocation.name) : matchers.find((m) => m.re.test(currentLocation.path));
      if (!matcher)
        throw createRouterError(1, {
          location: location2,
          currentLocation
        });
      name = matcher.record.name;
      params = assign$2({}, currentLocation.params, location2.params);
      path = matcher.stringify(params);
    }
    const matched = [];
    let parentMatcher = matcher;
    while (parentMatcher) {
      matched.unshift(parentMatcher.record);
      parentMatcher = parentMatcher.parent;
    }
    return {
      name,
      path,
      params,
      matched,
      meta: mergeMetaFields(matched)
    };
  }
  routes2.forEach((route) => addRoute(route));
  function clearRoutes() {
    matchers.length = 0;
    matcherMap.clear();
  }
  return {
    addRoute,
    resolve: resolve2,
    removeRoute,
    clearRoutes,
    getRoutes: getRoutes2,
    getRecordMatcher
  };
}
function paramsFromLocation(params, keys) {
  const newParams = {};
  for (const key of keys) {
    if (key in params)
      newParams[key] = params[key];
  }
  return newParams;
}
function normalizeRouteRecord(record) {
  const normalized = {
    path: record.path,
    redirect: record.redirect,
    name: record.name,
    meta: record.meta || {},
    aliasOf: record.aliasOf,
    beforeEnter: record.beforeEnter,
    props: normalizeRecordProps(record),
    children: record.children || [],
    instances: {},
    leaveGuards: /* @__PURE__ */ new Set(),
    updateGuards: /* @__PURE__ */ new Set(),
    enterCallbacks: {},
    // must be declared afterwards
    // mods: {},
    components: "components" in record ? record.components || null : record.component && { default: record.component }
  };
  Object.defineProperty(normalized, "mods", {
    value: {}
  });
  return normalized;
}
function normalizeRecordProps(record) {
  const propsObject = {};
  const props2 = record.props || false;
  if ("component" in record) {
    propsObject.default = props2;
  } else {
    for (const name in record.components)
      propsObject[name] = typeof props2 === "object" ? props2[name] : props2;
  }
  return propsObject;
}
function isAliasRecord(record) {
  while (record) {
    if (record.record.aliasOf)
      return true;
    record = record.parent;
  }
  return false;
}
function mergeMetaFields(matched) {
  return matched.reduce((meta, record) => assign$2(meta, record.meta), {});
}
function mergeOptions(defaults2, partialOptions) {
  const options = {};
  for (const key in defaults2) {
    options[key] = key in partialOptions ? partialOptions[key] : defaults2[key];
  }
  return options;
}
function findInsertionIndex(matcher, matchers) {
  let lower = 0;
  let upper = matchers.length;
  while (lower !== upper) {
    const mid = lower + upper >> 1;
    const sortOrder = comparePathParserScore(matcher, matchers[mid]);
    if (sortOrder < 0) {
      upper = mid;
    } else {
      lower = mid + 1;
    }
  }
  const insertionAncestor = getInsertionAncestor(matcher);
  if (insertionAncestor) {
    upper = matchers.lastIndexOf(insertionAncestor, upper - 1);
  }
  return upper;
}
function getInsertionAncestor(matcher) {
  let ancestor = matcher;
  while (ancestor = ancestor.parent) {
    if (isMatchable(ancestor) && comparePathParserScore(matcher, ancestor) === 0) {
      return ancestor;
    }
  }
  return;
}
function isMatchable({ record }) {
  return !!(record.name || record.components && Object.keys(record.components).length || record.redirect);
}
function parseQuery(search) {
  const query = {};
  if (search === "" || search === "?")
    return query;
  const hasLeadingIM = search[0] === "?";
  const searchParams = (hasLeadingIM ? search.slice(1) : search).split("&");
  for (let i = 0; i < searchParams.length; ++i) {
    const searchParam = searchParams[i].replace(PLUS_RE, " ");
    const eqPos = searchParam.indexOf("=");
    const key = decode$1(eqPos < 0 ? searchParam : searchParam.slice(0, eqPos));
    const value = eqPos < 0 ? null : decode$1(searchParam.slice(eqPos + 1));
    if (key in query) {
      let currentValue = query[key];
      if (!isArray$1(currentValue)) {
        currentValue = query[key] = [currentValue];
      }
      currentValue.push(value);
    } else {
      query[key] = value;
    }
  }
  return query;
}
function stringifyQuery(query) {
  let search = "";
  for (let key in query) {
    const value = query[key];
    key = encodeQueryKey(key);
    if (value == null) {
      if (value !== void 0) {
        search += (search.length ? "&" : "") + key;
      }
      continue;
    }
    const values = isArray$1(value) ? value.map((v) => v && encodeQueryValue(v)) : [value && encodeQueryValue(value)];
    values.forEach((value2) => {
      if (value2 !== void 0) {
        search += (search.length ? "&" : "") + key;
        if (value2 != null)
          search += "=" + value2;
      }
    });
  }
  return search;
}
function normalizeQuery(query) {
  const normalizedQuery = {};
  for (const key in query) {
    const value = query[key];
    if (value !== void 0) {
      normalizedQuery[key] = isArray$1(value) ? value.map((v) => v == null ? null : "" + v) : value == null ? value : "" + value;
    }
  }
  return normalizedQuery;
}
const matchedRouteKey = Symbol("");
const viewDepthKey = Symbol("");
const routerKey = Symbol("");
const routeLocationKey = Symbol("");
const routerViewLocationKey = Symbol("");
function useCallbacks() {
  let handlers2 = [];
  function add(handler) {
    handlers2.push(handler);
    return () => {
      const i = handlers2.indexOf(handler);
      if (i > -1)
        handlers2.splice(i, 1);
    };
  }
  function reset() {
    handlers2 = [];
  }
  return {
    add,
    list: () => handlers2.slice(),
    reset
  };
}
function guardToPromiseFn(guard, to, from, record, name, runWithContext = (fn) => fn()) {
  const enterCallbackArray = record && // name is defined if record is because of the function overload
  (record.enterCallbacks[name] = record.enterCallbacks[name] || []);
  return () => new Promise((resolve2, reject) => {
    const next = (valid) => {
      if (valid === false) {
        reject(createRouterError(4, {
          from,
          to
        }));
      } else if (valid instanceof Error) {
        reject(valid);
      } else if (isRouteLocation(valid)) {
        reject(createRouterError(2, {
          from: to,
          to: valid
        }));
      } else {
        if (enterCallbackArray && // since enterCallbackArray is truthy, both record and name also are
        record.enterCallbacks[name] === enterCallbackArray && typeof valid === "function") {
          enterCallbackArray.push(valid);
        }
        resolve2();
      }
    };
    const guardReturn = runWithContext(() => guard.call(record && record.instances[name], to, from, next));
    let guardCall = Promise.resolve(guardReturn);
    if (guard.length < 3)
      guardCall = guardCall.then(next);
    guardCall.catch((err) => reject(err));
  });
}
function extractComponentsGuards(matched, guardType, to, from, runWithContext = (fn) => fn()) {
  const guards = [];
  for (const record of matched) {
    for (const name in record.components) {
      let rawComponent = record.components[name];
      if (guardType !== "beforeRouteEnter" && !record.instances[name])
        continue;
      if (isRouteComponent(rawComponent)) {
        const options = rawComponent.__vccOpts || rawComponent;
        const guard = options[guardType];
        guard && guards.push(guardToPromiseFn(guard, to, from, record, name, runWithContext));
      } else {
        let componentPromise = rawComponent();
        guards.push(() => componentPromise.then((resolved) => {
          if (!resolved)
            throw new Error(`Couldn't resolve component "${name}" at "${record.path}"`);
          const resolvedComponent = isESModule(resolved) ? resolved.default : resolved;
          record.mods[name] = resolved;
          record.components[name] = resolvedComponent;
          const options = resolvedComponent.__vccOpts || resolvedComponent;
          const guard = options[guardType];
          return guard && guardToPromiseFn(guard, to, from, record, name, runWithContext)();
        }));
      }
    }
  }
  return guards;
}
function useLink(props2) {
  const router = inject(routerKey);
  const currentRoute = inject(routeLocationKey);
  const route = computed(() => {
    const to = unref(props2.to);
    return router.resolve(to);
  });
  const activeRecordIndex = computed(() => {
    const { matched } = route.value;
    const { length } = matched;
    const routeMatched = matched[length - 1];
    const currentMatched = currentRoute.matched;
    if (!routeMatched || !currentMatched.length)
      return -1;
    const index = currentMatched.findIndex(isSameRouteRecord$1.bind(null, routeMatched));
    if (index > -1)
      return index;
    const parentRecordPath = getOriginalPath$1(matched[length - 2]);
    return (
      // we are dealing with nested routes
      length > 1 && // if the parent and matched route have the same path, this link is
      // referring to the empty child. Or we currently are on a different
      // child of the same parent
      getOriginalPath$1(routeMatched) === parentRecordPath && // avoid comparing the child with its parent
      currentMatched[currentMatched.length - 1].path !== parentRecordPath ? currentMatched.findIndex(isSameRouteRecord$1.bind(null, matched[length - 2])) : index
    );
  });
  const isActive = computed(() => activeRecordIndex.value > -1 && includesParams$1(currentRoute.params, route.value.params));
  const isExactActive = computed(() => activeRecordIndex.value > -1 && activeRecordIndex.value === currentRoute.matched.length - 1 && isSameRouteLocationParams$1(currentRoute.params, route.value.params));
  function navigate(e = {}) {
    if (guardEvent(e)) {
      const p2 = router[unref(props2.replace) ? "replace" : "push"](
        unref(props2.to)
        // avoid uncaught errors are they are logged anyway
      ).catch(noop$1);
      if (props2.viewTransition && typeof document !== "undefined" && "startViewTransition" in document) {
        document.startViewTransition(() => p2);
      }
      return p2;
    }
    return Promise.resolve();
  }
  if (isBrowser$1) {
    const instance = getCurrentInstance();
    if (instance) {
      const linkContextDevtools = {
        route: route.value,
        isActive: isActive.value,
        isExactActive: isExactActive.value,
        error: null
      };
      instance.__vrl_devtools = instance.__vrl_devtools || [];
      instance.__vrl_devtools.push(linkContextDevtools);
      watchEffect(() => {
        linkContextDevtools.route = route.value;
        linkContextDevtools.isActive = isActive.value;
        linkContextDevtools.isExactActive = isExactActive.value;
        linkContextDevtools.error = isRouteLocation(unref(props2.to)) ? null : 'Invalid "to" value';
      }, { flush: "post" });
    }
  }
  return {
    route,
    href: computed(() => route.value.href),
    isActive,
    isExactActive,
    navigate
  };
}
function preferSingleVNode(vnodes) {
  return vnodes.length === 1 ? vnodes[0] : vnodes;
}
const RouterLinkImpl = /* @__PURE__ */ defineComponent({
  name: "RouterLink",
  compatConfig: { MODE: 3 },
  props: {
    to: {
      type: [String, Object],
      required: true
    },
    replace: Boolean,
    activeClass: String,
    // inactiveClass: String,
    exactActiveClass: String,
    custom: Boolean,
    ariaCurrentValue: {
      type: String,
      default: "page"
    },
    viewTransition: Boolean
  },
  useLink,
  setup(props2, { slots }) {
    const link = reactive(useLink(props2));
    const { options } = inject(routerKey);
    const elClass = computed(() => ({
      [getLinkClass(props2.activeClass, options.linkActiveClass, "router-link-active")]: link.isActive,
      // [getLinkClass(
      //   props.inactiveClass,
      //   options.linkInactiveClass,
      //   'router-link-inactive'
      // )]: !link.isExactActive,
      [getLinkClass(props2.exactActiveClass, options.linkExactActiveClass, "router-link-exact-active")]: link.isExactActive
    }));
    return () => {
      const children = slots.default && preferSingleVNode(slots.default(link));
      return props2.custom ? children : h("a", {
        "aria-current": link.isExactActive ? props2.ariaCurrentValue : null,
        href: link.href,
        // this would override user added attrs but Vue will still add
        // the listener, so we end up triggering both
        onClick: link.navigate,
        class: elClass.value
      }, children);
    };
  }
});
const RouterLink = RouterLinkImpl;
function guardEvent(e) {
  if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)
    return;
  if (e.defaultPrevented)
    return;
  if (e.button !== void 0 && e.button !== 0)
    return;
  if (e.currentTarget && e.currentTarget.getAttribute) {
    const target2 = e.currentTarget.getAttribute("target");
    if (/\b_blank\b/i.test(target2))
      return;
  }
  if (e.preventDefault)
    e.preventDefault();
  return true;
}
function includesParams$1(outer, inner) {
  for (const key in inner) {
    const innerValue = inner[key];
    const outerValue = outer[key];
    if (typeof innerValue === "string") {
      if (innerValue !== outerValue)
        return false;
    } else {
      if (!isArray$1(outerValue) || outerValue.length !== innerValue.length || innerValue.some((value, i) => value !== outerValue[i]))
        return false;
    }
  }
  return true;
}
function getOriginalPath$1(record) {
  return record ? record.aliasOf ? record.aliasOf.path : record.path : "";
}
const getLinkClass = (propClass, globalClass, defaultClass) => propClass != null ? propClass : globalClass != null ? globalClass : defaultClass;
const RouterViewImpl = /* @__PURE__ */ defineComponent({
  name: "RouterView",
  // #674 we manually inherit them
  inheritAttrs: false,
  props: {
    name: {
      type: String,
      default: "default"
    },
    route: Object
  },
  // Better compat for @vue/compat users
  // https://github.com/vuejs/router/issues/1315
  compatConfig: { MODE: 3 },
  setup(props2, { attrs, slots }) {
    const injectedRoute = inject(routerViewLocationKey);
    const routeToDisplay = computed(() => props2.route || injectedRoute.value);
    const injectedDepth = inject(viewDepthKey, 0);
    const depth = computed(() => {
      let initialDepth = unref(injectedDepth);
      const { matched } = routeToDisplay.value;
      let matchedRoute;
      while ((matchedRoute = matched[initialDepth]) && !matchedRoute.components) {
        initialDepth++;
      }
      return initialDepth;
    });
    const matchedRouteRef = computed(() => routeToDisplay.value.matched[depth.value]);
    provide(viewDepthKey, computed(() => depth.value + 1));
    provide(matchedRouteKey, matchedRouteRef);
    provide(routerViewLocationKey, routeToDisplay);
    const viewRef = ref();
    watch(() => [viewRef.value, matchedRouteRef.value, props2.name], ([instance, to, name], [oldInstance, from, oldName]) => {
      if (to) {
        to.instances[name] = instance;
        if (from && from !== to && instance && instance === oldInstance) {
          if (!to.leaveGuards.size) {
            to.leaveGuards = from.leaveGuards;
          }
          if (!to.updateGuards.size) {
            to.updateGuards = from.updateGuards;
          }
        }
      }
      if (instance && to && // if there is no instance but to and from are the same this might be
      // the first visit
      (!from || !isSameRouteRecord$1(to, from) || !oldInstance)) {
        (to.enterCallbacks[name] || []).forEach((callback) => callback(instance));
      }
    }, { flush: "post" });
    return () => {
      const route = routeToDisplay.value;
      const currentName = props2.name;
      const matchedRoute = matchedRouteRef.value;
      const ViewComponent = matchedRoute && matchedRoute.components[currentName];
      if (!ViewComponent) {
        return normalizeSlot(slots.default, { Component: ViewComponent, route });
      }
      const routePropsOption = matchedRoute.props[currentName];
      const routeProps = routePropsOption ? routePropsOption === true ? route.params : typeof routePropsOption === "function" ? routePropsOption(route) : routePropsOption : null;
      const onVnodeUnmounted = (vnode) => {
        if (vnode.component.isUnmounted) {
          matchedRoute.instances[currentName] = null;
        }
      };
      const component = h(ViewComponent, assign$2({}, routeProps, attrs, {
        onVnodeUnmounted,
        ref: viewRef
      }));
      if (isBrowser$1 && component.ref) {
        const info = {
          depth: depth.value,
          name: matchedRoute.name,
          path: matchedRoute.path,
          meta: matchedRoute.meta
        };
        const internalInstances = isArray$1(component.ref) ? component.ref.map((r) => r.i) : [component.ref.i];
        internalInstances.forEach((instance) => {
          instance.__vrv_devtools = info;
        });
      }
      return (
        // pass the vnode to the slot as a prop.
        // h and <component :is="..."> both accept vnodes
        normalizeSlot(slots.default, { Component: component, route }) || component
      );
    };
  }
});
function normalizeSlot(slot, data) {
  if (!slot)
    return null;
  const slotContent = slot(data);
  return slotContent.length === 1 ? slotContent[0] : slotContent;
}
const RouterView = RouterViewImpl;
function formatRouteLocation(routeLocation, tooltip) {
  const copy2 = assign$2({}, routeLocation, {
    // remove variables that can contain vue instances
    matched: routeLocation.matched.map((matched) => omit(matched, ["instances", "children", "aliasOf"]))
  });
  return {
    _custom: {
      type: null,
      readOnly: true,
      display: routeLocation.fullPath,
      tooltip,
      value: copy2
    }
  };
}
function formatDisplay$1(display) {
  return {
    _custom: {
      display
    }
  };
}
let routerId = 0;
function addDevtools(app2, router, matcher) {
  if (router.__hasDevtools)
    return;
  router.__hasDevtools = true;
  const id = routerId++;
  setupDevtoolsPlugin({
    id: "org.vuejs.router" + (id ? "." + id : ""),
    label: "Vue Router",
    packageName: "vue-router",
    homepage: "https://router.vuejs.org",
    logo: "https://router.vuejs.org/logo.png",
    componentStateTypes: ["Routing"],
    app: app2
  }, (api) => {
    if (typeof api.now !== "function") {
      console.warn("[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.");
    }
    api.on.inspectComponent((payload, ctx) => {
      if (payload.instanceData) {
        payload.instanceData.state.push({
          type: "Routing",
          key: "$route",
          editable: false,
          value: formatRouteLocation(router.currentRoute.value, "Current Route")
        });
      }
    });
    api.on.visitComponentTree(({ treeNode: node, componentInstance }) => {
      if (componentInstance.__vrv_devtools) {
        const info = componentInstance.__vrv_devtools;
        node.tags.push({
          label: (info.name ? `${info.name.toString()}: ` : "") + info.path,
          textColor: 0,
          tooltip: "This component is rendered by &lt;router-view&gt;",
          backgroundColor: PINK_500
        });
      }
      if (isArray$1(componentInstance.__vrl_devtools)) {
        componentInstance.__devtoolsApi = api;
        componentInstance.__vrl_devtools.forEach((devtoolsData) => {
          let label = devtoolsData.route.path;
          let backgroundColor = ORANGE_400;
          let tooltip = "";
          let textColor = 0;
          if (devtoolsData.error) {
            label = devtoolsData.error;
            backgroundColor = RED_100;
            textColor = RED_700;
          } else if (devtoolsData.isExactActive) {
            backgroundColor = LIME_500;
            tooltip = "This is exactly active";
          } else if (devtoolsData.isActive) {
            backgroundColor = BLUE_600;
            tooltip = "This link is active";
          }
          node.tags.push({
            label,
            textColor,
            tooltip,
            backgroundColor
          });
        });
      }
    });
    watch(router.currentRoute, () => {
      refreshRoutesView();
      api.notifyComponentUpdate();
      api.sendInspectorTree(routerInspectorId);
      api.sendInspectorState(routerInspectorId);
    });
    const navigationsLayerId = "router:navigations:" + id;
    api.addTimelineLayer({
      id: navigationsLayerId,
      label: `Router${id ? " " + id : ""} Navigations`,
      color: 4237508
    });
    router.onError((error, to) => {
      api.addTimelineEvent({
        layerId: navigationsLayerId,
        event: {
          title: "Error during Navigation",
          subtitle: to.fullPath,
          logType: "error",
          time: api.now(),
          data: { error },
          groupId: to.meta.__navigationId
        }
      });
    });
    let navigationId = 0;
    router.beforeEach((to, from) => {
      const data = {
        guard: formatDisplay$1("beforeEach"),
        from: formatRouteLocation(from, "Current Location during this navigation"),
        to: formatRouteLocation(to, "Target location")
      };
      Object.defineProperty(to.meta, "__navigationId", {
        value: navigationId++
      });
      api.addTimelineEvent({
        layerId: navigationsLayerId,
        event: {
          time: api.now(),
          title: "Start of navigation",
          subtitle: to.fullPath,
          data,
          groupId: to.meta.__navigationId
        }
      });
    });
    router.afterEach((to, from, failure) => {
      const data = {
        guard: formatDisplay$1("afterEach")
      };
      if (failure) {
        data.failure = {
          _custom: {
            type: Error,
            readOnly: true,
            display: failure ? failure.message : "",
            tooltip: "Navigation Failure",
            value: failure
          }
        };
        data.status = formatDisplay$1("❌");
      } else {
        data.status = formatDisplay$1("✅");
      }
      data.from = formatRouteLocation(from, "Current Location during this navigation");
      data.to = formatRouteLocation(to, "Target location");
      api.addTimelineEvent({
        layerId: navigationsLayerId,
        event: {
          title: "End of navigation",
          subtitle: to.fullPath,
          time: api.now(),
          data,
          logType: failure ? "warning" : "default",
          groupId: to.meta.__navigationId
        }
      });
    });
    const routerInspectorId = "router-inspector:" + id;
    api.addInspector({
      id: routerInspectorId,
      label: "Routes" + (id ? " " + id : ""),
      icon: "book",
      treeFilterPlaceholder: "Search routes"
    });
    function refreshRoutesView() {
      if (!activeRoutesPayload)
        return;
      const payload = activeRoutesPayload;
      let routes2 = matcher.getRoutes().filter((route) => !route.parent || // these routes have a parent with no component which will not appear in the view
      // therefore we still need to include them
      !route.parent.record.components);
      routes2.forEach(resetMatchStateOnRouteRecord);
      if (payload.filter) {
        routes2 = routes2.filter((route) => (
          // save matches state based on the payload
          isRouteMatching(route, payload.filter.toLowerCase())
        ));
      }
      routes2.forEach((route) => markRouteRecordActive(route, router.currentRoute.value));
      payload.rootNodes = routes2.map(formatRouteRecordForInspector);
    }
    let activeRoutesPayload;
    api.on.getInspectorTree((payload) => {
      activeRoutesPayload = payload;
      if (payload.app === app2 && payload.inspectorId === routerInspectorId) {
        refreshRoutesView();
      }
    });
    api.on.getInspectorState((payload) => {
      if (payload.app === app2 && payload.inspectorId === routerInspectorId) {
        const routes2 = matcher.getRoutes();
        const route = routes2.find((route2) => route2.record.__vd_id === payload.nodeId);
        if (route) {
          payload.state = {
            options: formatRouteRecordMatcherForStateInspector(route)
          };
        }
      }
    });
    api.sendInspectorTree(routerInspectorId);
    api.sendInspectorState(routerInspectorId);
  });
}
function modifierForKey(key) {
  if (key.optional) {
    return key.repeatable ? "*" : "?";
  } else {
    return key.repeatable ? "+" : "";
  }
}
function formatRouteRecordMatcherForStateInspector(route) {
  const { record } = route;
  const fields = [
    { editable: false, key: "path", value: record.path }
  ];
  if (record.name != null) {
    fields.push({
      editable: false,
      key: "name",
      value: record.name
    });
  }
  fields.push({ editable: false, key: "regexp", value: route.re });
  if (route.keys.length) {
    fields.push({
      editable: false,
      key: "keys",
      value: {
        _custom: {
          type: null,
          readOnly: true,
          display: route.keys.map((key) => `${key.name}${modifierForKey(key)}`).join(" "),
          tooltip: "Param keys",
          value: route.keys
        }
      }
    });
  }
  if (record.redirect != null) {
    fields.push({
      editable: false,
      key: "redirect",
      value: record.redirect
    });
  }
  if (route.alias.length) {
    fields.push({
      editable: false,
      key: "aliases",
      value: route.alias.map((alias) => alias.record.path)
    });
  }
  if (Object.keys(route.record.meta).length) {
    fields.push({
      editable: false,
      key: "meta",
      value: route.record.meta
    });
  }
  fields.push({
    key: "score",
    editable: false,
    value: {
      _custom: {
        type: null,
        readOnly: true,
        display: route.score.map((score) => score.join(", ")).join(" | "),
        tooltip: "Score used to sort routes",
        value: route.score
      }
    }
  });
  return fields;
}
const PINK_500 = 15485081;
const BLUE_600 = 2450411;
const LIME_500 = 8702998;
const CYAN_400 = 2282478;
const ORANGE_400 = 16486972;
const DARK = 6710886;
const RED_100 = 16704226;
const RED_700 = 12131356;
function formatRouteRecordForInspector(route) {
  const tags = [];
  const { record } = route;
  if (record.name != null) {
    tags.push({
      label: String(record.name),
      textColor: 0,
      backgroundColor: CYAN_400
    });
  }
  if (record.aliasOf) {
    tags.push({
      label: "alias",
      textColor: 0,
      backgroundColor: ORANGE_400
    });
  }
  if (route.__vd_match) {
    tags.push({
      label: "matches",
      textColor: 0,
      backgroundColor: PINK_500
    });
  }
  if (route.__vd_exactActive) {
    tags.push({
      label: "exact",
      textColor: 0,
      backgroundColor: LIME_500
    });
  }
  if (route.__vd_active) {
    tags.push({
      label: "active",
      textColor: 0,
      backgroundColor: BLUE_600
    });
  }
  if (record.redirect) {
    tags.push({
      label: typeof record.redirect === "string" ? `redirect: ${record.redirect}` : "redirects",
      textColor: 16777215,
      backgroundColor: DARK
    });
  }
  let id = record.__vd_id;
  if (id == null) {
    id = String(routeRecordId++);
    record.__vd_id = id;
  }
  return {
    id,
    label: record.path,
    tags,
    children: route.children.map(formatRouteRecordForInspector)
  };
}
let routeRecordId = 0;
const EXTRACT_REGEXP_RE = /^\/(.*)\/([a-z]*)$/;
function markRouteRecordActive(route, currentRoute) {
  const isExactActive = currentRoute.matched.length && isSameRouteRecord$1(currentRoute.matched[currentRoute.matched.length - 1], route.record);
  route.__vd_exactActive = route.__vd_active = isExactActive;
  if (!isExactActive) {
    route.__vd_active = currentRoute.matched.some((match) => isSameRouteRecord$1(match, route.record));
  }
  route.children.forEach((childRoute) => markRouteRecordActive(childRoute, currentRoute));
}
function resetMatchStateOnRouteRecord(route) {
  route.__vd_match = false;
  route.children.forEach(resetMatchStateOnRouteRecord);
}
function isRouteMatching(route, filter) {
  const found = String(route.re).match(EXTRACT_REGEXP_RE);
  route.__vd_match = false;
  if (!found || found.length < 3) {
    return false;
  }
  const nonEndingRE = new RegExp(found[1].replace(/\$$/, ""), found[2]);
  if (nonEndingRE.test(filter)) {
    route.children.forEach((child) => isRouteMatching(child, filter));
    if (route.record.path !== "/" || filter === "/") {
      route.__vd_match = route.re.test(filter);
      return true;
    }
    return false;
  }
  const path = route.record.path.toLowerCase();
  const decodedPath = decode$1(path);
  if (!filter.startsWith("/") && (decodedPath.includes(filter) || path.includes(filter)))
    return true;
  if (decodedPath.startsWith(filter) || path.startsWith(filter))
    return true;
  if (route.record.name && String(route.record.name).includes(filter))
    return true;
  return route.children.some((child) => isRouteMatching(child, filter));
}
function omit(obj, keys) {
  const ret = {};
  for (const key in obj) {
    if (!keys.includes(key)) {
      ret[key] = obj[key];
    }
  }
  return ret;
}
function createRouter$1(options) {
  const matcher = createRouterMatcher(options.routes, options);
  const parseQuery$1 = options.parseQuery || parseQuery;
  const stringifyQuery$1 = options.stringifyQuery || stringifyQuery;
  const routerHistory = options.history;
  const beforeGuards = useCallbacks();
  const beforeResolveGuards = useCallbacks();
  const afterGuards = useCallbacks();
  const currentRoute = shallowRef(START_LOCATION_NORMALIZED);
  let pendingLocation = START_LOCATION_NORMALIZED;
  if (isBrowser$1 && options.scrollBehavior && "scrollRestoration" in history) {
    history.scrollRestoration = "manual";
  }
  const normalizeParams = applyToParams.bind(null, (paramValue) => "" + paramValue);
  const encodeParams = applyToParams.bind(null, encodeParam);
  const decodeParams = (
    // @ts-expect-error: intentionally avoid the type check
    applyToParams.bind(null, decode$1)
  );
  function addRoute(parentOrRoute, route) {
    let parent;
    let record;
    if (isRouteName(parentOrRoute)) {
      parent = matcher.getRecordMatcher(parentOrRoute);
      record = route;
    } else {
      record = parentOrRoute;
    }
    return matcher.addRoute(record, parent);
  }
  function removeRoute(name) {
    const recordMatcher = matcher.getRecordMatcher(name);
    if (recordMatcher) {
      matcher.removeRoute(recordMatcher);
    }
  }
  function getRoutes2() {
    return matcher.getRoutes().map((routeMatcher) => routeMatcher.record);
  }
  function hasRoute(name) {
    return !!matcher.getRecordMatcher(name);
  }
  function resolve2(rawLocation, currentLocation) {
    currentLocation = assign$2({}, currentLocation || currentRoute.value);
    if (typeof rawLocation === "string") {
      const locationNormalized = parseURL(parseQuery$1, rawLocation, currentLocation.path);
      const matchedRoute2 = matcher.resolve({ path: locationNormalized.path }, currentLocation);
      const href22 = routerHistory.createHref(locationNormalized.fullPath);
      return assign$2(locationNormalized, matchedRoute2, {
        params: decodeParams(matchedRoute2.params),
        hash: decode$1(locationNormalized.hash),
        redirectedFrom: void 0,
        href: href22
      });
    }
    let matcherLocation;
    if (rawLocation.path != null) {
      matcherLocation = assign$2({}, rawLocation, {
        path: parseURL(parseQuery$1, rawLocation.path, currentLocation.path).path
      });
    } else {
      const targetParams = assign$2({}, rawLocation.params);
      for (const key in targetParams) {
        if (targetParams[key] == null) {
          delete targetParams[key];
        }
      }
      matcherLocation = assign$2({}, rawLocation, {
        params: encodeParams(targetParams)
      });
      currentLocation.params = encodeParams(currentLocation.params);
    }
    const matchedRoute = matcher.resolve(matcherLocation, currentLocation);
    const hash = rawLocation.hash || "";
    matchedRoute.params = normalizeParams(decodeParams(matchedRoute.params));
    const fullPath = stringifyURL(stringifyQuery$1, assign$2({}, rawLocation, {
      hash: encodeHash(hash),
      path: matchedRoute.path
    }));
    const href2 = routerHistory.createHref(fullPath);
    return assign$2({
      fullPath,
      // keep the hash encoded so fullPath is effectively path + encodedQuery +
      // hash
      hash,
      query: (
        // if the user is using a custom query lib like qs, we might have
        // nested objects, so we keep the query as is, meaning it can contain
        // numbers at `$route.query`, but at the point, the user will have to
        // use their own type anyway.
        // https://github.com/vuejs/router/issues/328#issuecomment-649481567
        stringifyQuery$1 === stringifyQuery ? normalizeQuery(rawLocation.query) : rawLocation.query || {}
      )
    }, matchedRoute, {
      redirectedFrom: void 0,
      href: href2
    });
  }
  function locationAsObject(to) {
    return typeof to === "string" ? parseURL(parseQuery$1, to, currentRoute.value.path) : assign$2({}, to);
  }
  function checkCanceledNavigation(to, from) {
    if (pendingLocation !== to) {
      return createRouterError(8, {
        from,
        to
      });
    }
  }
  function push(to) {
    return pushWithRedirect(to);
  }
  function replace(to) {
    return push(assign$2(locationAsObject(to), { replace: true }));
  }
  function handleRedirectRecord(to) {
    const lastMatched = to.matched[to.matched.length - 1];
    if (lastMatched && lastMatched.redirect) {
      const { redirect } = lastMatched;
      let newTargetLocation = typeof redirect === "function" ? redirect(to) : redirect;
      if (typeof newTargetLocation === "string") {
        newTargetLocation = newTargetLocation.includes("?") || newTargetLocation.includes("#") ? newTargetLocation = locationAsObject(newTargetLocation) : (
          // force empty params
          { path: newTargetLocation }
        );
        newTargetLocation.params = {};
      }
      return assign$2({
        query: to.query,
        hash: to.hash,
        // avoid transferring params if the redirect has a path
        params: newTargetLocation.path != null ? {} : to.params
      }, newTargetLocation);
    }
  }
  function pushWithRedirect(to, redirectedFrom) {
    const targetLocation = pendingLocation = resolve2(to);
    const from = currentRoute.value;
    const data = to.state;
    const force = to.force;
    const replace2 = to.replace === true;
    const shouldRedirect = handleRedirectRecord(targetLocation);
    if (shouldRedirect)
      return pushWithRedirect(
        assign$2(locationAsObject(shouldRedirect), {
          state: typeof shouldRedirect === "object" ? assign$2({}, data, shouldRedirect.state) : data,
          force,
          replace: replace2
        }),
        // keep original redirectedFrom if it exists
        redirectedFrom || targetLocation
      );
    const toLocation = targetLocation;
    toLocation.redirectedFrom = redirectedFrom;
    let failure;
    if (!force && isSameRouteLocation(stringifyQuery$1, from, targetLocation)) {
      failure = createRouterError(16, { to: toLocation, from });
      handleScroll(
        from,
        from,
        // this is a push, the only way for it to be triggered from a
        // history.listen is with a redirect, which makes it become a push
        true,
        // This cannot be the first navigation because the initial location
        // cannot be manually navigated to
        false
      );
    }
    return (failure ? Promise.resolve(failure) : navigate(toLocation, from)).catch((error) => isNavigationFailure(error) ? (
      // navigation redirects still mark the router as ready
      isNavigationFailure(
        error,
        2
        /* ErrorTypes.NAVIGATION_GUARD_REDIRECT */
      ) ? error : markAsReady(error)
    ) : (
      // reject any unknown error
      triggerError(error, toLocation, from)
    )).then((failure2) => {
      if (failure2) {
        if (isNavigationFailure(
          failure2,
          2
          /* ErrorTypes.NAVIGATION_GUARD_REDIRECT */
        )) {
          return pushWithRedirect(
            // keep options
            assign$2({
              // preserve an existing replacement but allow the redirect to override it
              replace: replace2
            }, locationAsObject(failure2.to), {
              state: typeof failure2.to === "object" ? assign$2({}, data, failure2.to.state) : data,
              force
            }),
            // preserve the original redirectedFrom if any
            redirectedFrom || toLocation
          );
        }
      } else {
        failure2 = finalizeNavigation(toLocation, from, true, replace2, data);
      }
      triggerAfterEach(toLocation, from, failure2);
      return failure2;
    });
  }
  function checkCanceledNavigationAndReject(to, from) {
    const error = checkCanceledNavigation(to, from);
    return error ? Promise.reject(error) : Promise.resolve();
  }
  function runWithContext(fn) {
    const app2 = installedApps.values().next().value;
    return app2 && typeof app2.runWithContext === "function" ? app2.runWithContext(fn) : fn();
  }
  function navigate(to, from) {
    let guards;
    const [leavingRecords, updatingRecords, enteringRecords] = extractChangingRecords(to, from);
    guards = extractComponentsGuards(leavingRecords.reverse(), "beforeRouteLeave", to, from);
    for (const record of leavingRecords) {
      record.leaveGuards.forEach((guard) => {
        guards.push(guardToPromiseFn(guard, to, from));
      });
    }
    const canceledNavigationCheck = checkCanceledNavigationAndReject.bind(null, to, from);
    guards.push(canceledNavigationCheck);
    return runGuardQueue(guards).then(() => {
      guards = [];
      for (const guard of beforeGuards.list()) {
        guards.push(guardToPromiseFn(guard, to, from));
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      guards = extractComponentsGuards(updatingRecords, "beforeRouteUpdate", to, from);
      for (const record of updatingRecords) {
        record.updateGuards.forEach((guard) => {
          guards.push(guardToPromiseFn(guard, to, from));
        });
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      guards = [];
      for (const record of enteringRecords) {
        if (record.beforeEnter) {
          if (isArray$1(record.beforeEnter)) {
            for (const beforeEnter of record.beforeEnter)
              guards.push(guardToPromiseFn(beforeEnter, to, from));
          } else {
            guards.push(guardToPromiseFn(record.beforeEnter, to, from));
          }
        }
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      to.matched.forEach((record) => record.enterCallbacks = {});
      guards = extractComponentsGuards(enteringRecords, "beforeRouteEnter", to, from, runWithContext);
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).then(() => {
      guards = [];
      for (const guard of beforeResolveGuards.list()) {
        guards.push(guardToPromiseFn(guard, to, from));
      }
      guards.push(canceledNavigationCheck);
      return runGuardQueue(guards);
    }).catch((err) => isNavigationFailure(
      err,
      8
      /* ErrorTypes.NAVIGATION_CANCELLED */
    ) ? err : Promise.reject(err));
  }
  function triggerAfterEach(to, from, failure) {
    afterGuards.list().forEach((guard) => runWithContext(() => guard(to, from, failure)));
  }
  function finalizeNavigation(toLocation, from, isPush, replace2, data) {
    const error = checkCanceledNavigation(toLocation, from);
    if (error)
      return error;
    const isFirstNavigation = from === START_LOCATION_NORMALIZED;
    const state = !isBrowser$1 ? {} : history.state;
    if (isPush) {
      if (replace2 || isFirstNavigation)
        routerHistory.replace(toLocation.fullPath, assign$2({
          scroll: isFirstNavigation && state && state.scroll
        }, data));
      else
        routerHistory.push(toLocation.fullPath, data);
    }
    currentRoute.value = toLocation;
    handleScroll(toLocation, from, isPush, isFirstNavigation);
    markAsReady();
  }
  let removeHistoryListener;
  function setupListeners() {
    if (removeHistoryListener)
      return;
    removeHistoryListener = routerHistory.listen((to, _from, info) => {
      if (!router.listening)
        return;
      const toLocation = resolve2(to);
      const shouldRedirect = handleRedirectRecord(toLocation);
      if (shouldRedirect) {
        pushWithRedirect(assign$2(shouldRedirect, { replace: true, force: true }), toLocation).catch(noop$1);
        return;
      }
      pendingLocation = toLocation;
      const from = currentRoute.value;
      if (isBrowser$1) {
        saveScrollPosition(getScrollKey(from.fullPath, info.delta), computeScrollPosition());
      }
      navigate(toLocation, from).catch((error) => {
        if (isNavigationFailure(
          error,
          4 | 8
          /* ErrorTypes.NAVIGATION_CANCELLED */
        )) {
          return error;
        }
        if (isNavigationFailure(
          error,
          2
          /* ErrorTypes.NAVIGATION_GUARD_REDIRECT */
        )) {
          pushWithRedirect(
            assign$2(locationAsObject(error.to), {
              force: true
            }),
            toLocation
            // avoid an uncaught rejection, let push call triggerError
          ).then((failure) => {
            if (isNavigationFailure(
              failure,
              4 | 16
              /* ErrorTypes.NAVIGATION_DUPLICATED */
            ) && !info.delta && info.type === NavigationType.pop) {
              routerHistory.go(-1, false);
            }
          }).catch(noop$1);
          return Promise.reject();
        }
        if (info.delta) {
          routerHistory.go(-info.delta, false);
        }
        return triggerError(error, toLocation, from);
      }).then((failure) => {
        failure = failure || finalizeNavigation(
          // after navigation, all matched components are resolved
          toLocation,
          from,
          false
        );
        if (failure) {
          if (info.delta && // a new navigation has been triggered, so we do not want to revert, that will change the current history
          // entry while a different route is displayed
          !isNavigationFailure(
            failure,
            8
            /* ErrorTypes.NAVIGATION_CANCELLED */
          )) {
            routerHistory.go(-info.delta, false);
          } else if (info.type === NavigationType.pop && isNavigationFailure(
            failure,
            4 | 16
            /* ErrorTypes.NAVIGATION_DUPLICATED */
          )) {
            routerHistory.go(-1, false);
          }
        }
        triggerAfterEach(toLocation, from, failure);
      }).catch(noop$1);
    });
  }
  let readyHandlers = useCallbacks();
  let errorListeners = useCallbacks();
  let ready;
  function triggerError(error, to, from) {
    markAsReady(error);
    const list = errorListeners.list();
    if (list.length) {
      list.forEach((handler) => handler(error, to, from));
    } else {
      console.error(error);
    }
    return Promise.reject(error);
  }
  function isReady() {
    if (ready && currentRoute.value !== START_LOCATION_NORMALIZED)
      return Promise.resolve();
    return new Promise((resolve22, reject) => {
      readyHandlers.add([resolve22, reject]);
    });
  }
  function markAsReady(err) {
    if (!ready) {
      ready = !err;
      setupListeners();
      readyHandlers.list().forEach(([resolve22, reject]) => err ? reject(err) : resolve22());
      readyHandlers.reset();
    }
    return err;
  }
  function handleScroll(to, from, isPush, isFirstNavigation) {
    const { scrollBehavior } = options;
    if (!isBrowser$1 || !scrollBehavior)
      return Promise.resolve();
    const scrollPosition = !isPush && getSavedScrollPosition(getScrollKey(to.fullPath, 0)) || (isFirstNavigation || !isPush) && history.state && history.state.scroll || null;
    return nextTick().then(() => scrollBehavior(to, from, scrollPosition)).then((position2) => position2 && scrollToPosition(position2)).catch((err) => triggerError(err, to, from));
  }
  const go = (delta) => routerHistory.go(delta);
  let started;
  const installedApps = /* @__PURE__ */ new Set();
  const router = {
    currentRoute,
    listening: true,
    addRoute,
    removeRoute,
    clearRoutes: matcher.clearRoutes,
    hasRoute,
    getRoutes: getRoutes2,
    resolve: resolve2,
    options,
    push,
    replace,
    go,
    back: () => go(-1),
    forward: () => go(1),
    beforeEach: beforeGuards.add,
    beforeResolve: beforeResolveGuards.add,
    afterEach: afterGuards.add,
    onError: errorListeners.add,
    isReady,
    install(app2) {
      const router2 = this;
      app2.component("RouterLink", RouterLink);
      app2.component("RouterView", RouterView);
      app2.config.globalProperties.$router = router2;
      Object.defineProperty(app2.config.globalProperties, "$route", {
        enumerable: true,
        get: () => unref(currentRoute)
      });
      if (isBrowser$1 && // used for the initial navigation client side to avoid pushing
      // multiple times when the router is used in multiple apps
      !started && currentRoute.value === START_LOCATION_NORMALIZED) {
        started = true;
        push(routerHistory.location).catch((err) => {
        });
      }
      const reactiveRoute = {};
      for (const key in START_LOCATION_NORMALIZED) {
        Object.defineProperty(reactiveRoute, key, {
          get: () => currentRoute.value[key],
          enumerable: true
        });
      }
      app2.provide(routerKey, router2);
      app2.provide(routeLocationKey, shallowReactive(reactiveRoute));
      app2.provide(routerViewLocationKey, currentRoute);
      const unmountApp = app2.unmount;
      installedApps.add(app2);
      app2.unmount = function() {
        installedApps.delete(app2);
        if (installedApps.size < 1) {
          pendingLocation = START_LOCATION_NORMALIZED;
          removeHistoryListener && removeHistoryListener();
          removeHistoryListener = null;
          currentRoute.value = START_LOCATION_NORMALIZED;
          started = false;
          ready = false;
        }
        unmountApp();
      };
      if (isBrowser$1) {
        addDevtools(app2, router2, matcher);
      }
    }
  };
  function runGuardQueue(guards) {
    return guards.reduce((promise, guard) => promise.then(() => runWithContext(guard)), Promise.resolve());
  }
  return router;
}
function extractChangingRecords(to, from) {
  const leavingRecords = [];
  const updatingRecords = [];
  const enteringRecords = [];
  const len = Math.max(from.matched.length, to.matched.length);
  for (let i = 0; i < len; i++) {
    const recordFrom = from.matched[i];
    if (recordFrom) {
      if (to.matched.find((record) => isSameRouteRecord$1(record, recordFrom)))
        updatingRecords.push(recordFrom);
      else
        leavingRecords.push(recordFrom);
    }
    const recordTo = to.matched[i];
    if (recordTo) {
      if (!from.matched.find((record) => isSameRouteRecord$1(record, recordTo))) {
        enteringRecords.push(recordTo);
      }
    }
  }
  return [leavingRecords, updatingRecords, enteringRecords];
}
function useRoute(_name) {
  return inject(routeLocationKey);
}
const _export_sfc = (sfc, props2) => {
  const target2 = sfc.__vccOpts || sfc;
  for (const [key, val] of props2) {
    target2[key] = val;
  }
  return target2;
};
const _sfc_main = {
  __name: "App",
  setup(__props, { expose: __expose }) {
    __expose();
    const route = useRoute();
    watch(
      () => route.meta.title,
      (title) => {
        document.title = title || "Styllus Controle";
      },
      { immediate: true }
    );
    const __returned__ = { route, watch, get useRoute() {
      return useRoute;
    } };
    Object.defineProperty(__returned__, "__isScriptSetup", { enumerable: false, value: true });
    return __returned__;
  }
};
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_router_view = resolveComponent("router-view");
  return openBlock(), createBlock(_component_router_view);
}
const RootComponent = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render], ["__file", "App.vue"]]);
var __create$1 = Object.create;
var __defProp$1 = Object.defineProperty;
var __getOwnPropDesc$1 = Object.getOwnPropertyDescriptor;
var __getOwnPropNames$1 = Object.getOwnPropertyNames;
var __getProtoOf$1 = Object.getPrototypeOf;
var __hasOwnProp$1 = Object.prototype.hasOwnProperty;
var __esm$1 = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames$1(fn)[0]])(fn = 0)), res;
};
var __commonJS$1 = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames$1(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps$1 = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames$1(from))
      if (!__hasOwnProp$1.call(to, key) && key !== except)
        __defProp$1(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc$1(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM$1 = (mod, isNodeMode, target2) => (target2 = mod != null ? __create$1(__getProtoOf$1(mod)) : {}, __copyProps$1(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  __defProp$1(target2, "default", { value: mod, enumerable: true }),
  mod
));
var init_esm_shims$1 = __esm$1({
  "../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js"() {
  }
});
var require_rfdc = __commonJS$1({
  "../../node_modules/.pnpm/rfdc@1.4.1/node_modules/rfdc/index.js"(exports, module) {
    init_esm_shims$1();
    module.exports = rfdc2;
    function copyBuffer(cur) {
      if (cur instanceof Buffer) {
        return Buffer.from(cur);
      }
      return new cur.constructor(cur.buffer.slice(), cur.byteOffset, cur.length);
    }
    function rfdc2(opts) {
      opts = opts || {};
      if (opts.circles) return rfdcCircles(opts);
      const constructorHandlers = /* @__PURE__ */ new Map();
      constructorHandlers.set(Date, (o) => new Date(o));
      constructorHandlers.set(Map, (o, fn) => new Map(cloneArray(Array.from(o), fn)));
      constructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)));
      if (opts.constructorHandlers) {
        for (const handler2 of opts.constructorHandlers) {
          constructorHandlers.set(handler2[0], handler2[1]);
        }
      }
      let handler = null;
      return opts.proto ? cloneProto : clone;
      function cloneArray(a, fn) {
        const keys = Object.keys(a);
        const a2 = new Array(keys.length);
        for (let i = 0; i < keys.length; i++) {
          const k = keys[i];
          const cur = a[k];
          if (typeof cur !== "object" || cur === null) {
            a2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            a2[k] = handler(cur, fn);
          } else if (ArrayBuffer.isView(cur)) {
            a2[k] = copyBuffer(cur);
          } else {
            a2[k] = fn(cur);
          }
        }
        return a2;
      }
      function clone(o) {
        if (typeof o !== "object" || o === null) return o;
        if (Array.isArray(o)) return cloneArray(o, clone);
        if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {
          return handler(o, clone);
        }
        const o2 = {};
        for (const k in o) {
          if (Object.hasOwnProperty.call(o, k) === false) continue;
          const cur = o[k];
          if (typeof cur !== "object" || cur === null) {
            o2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            o2[k] = handler(cur, clone);
          } else if (ArrayBuffer.isView(cur)) {
            o2[k] = copyBuffer(cur);
          } else {
            o2[k] = clone(cur);
          }
        }
        return o2;
      }
      function cloneProto(o) {
        if (typeof o !== "object" || o === null) return o;
        if (Array.isArray(o)) return cloneArray(o, cloneProto);
        if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {
          return handler(o, cloneProto);
        }
        const o2 = {};
        for (const k in o) {
          const cur = o[k];
          if (typeof cur !== "object" || cur === null) {
            o2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            o2[k] = handler(cur, cloneProto);
          } else if (ArrayBuffer.isView(cur)) {
            o2[k] = copyBuffer(cur);
          } else {
            o2[k] = cloneProto(cur);
          }
        }
        return o2;
      }
    }
    function rfdcCircles(opts) {
      const refs = [];
      const refsNew = [];
      const constructorHandlers = /* @__PURE__ */ new Map();
      constructorHandlers.set(Date, (o) => new Date(o));
      constructorHandlers.set(Map, (o, fn) => new Map(cloneArray(Array.from(o), fn)));
      constructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)));
      if (opts.constructorHandlers) {
        for (const handler2 of opts.constructorHandlers) {
          constructorHandlers.set(handler2[0], handler2[1]);
        }
      }
      let handler = null;
      return opts.proto ? cloneProto : clone;
      function cloneArray(a, fn) {
        const keys = Object.keys(a);
        const a2 = new Array(keys.length);
        for (let i = 0; i < keys.length; i++) {
          const k = keys[i];
          const cur = a[k];
          if (typeof cur !== "object" || cur === null) {
            a2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            a2[k] = handler(cur, fn);
          } else if (ArrayBuffer.isView(cur)) {
            a2[k] = copyBuffer(cur);
          } else {
            const index = refs.indexOf(cur);
            if (index !== -1) {
              a2[k] = refsNew[index];
            } else {
              a2[k] = fn(cur);
            }
          }
        }
        return a2;
      }
      function clone(o) {
        if (typeof o !== "object" || o === null) return o;
        if (Array.isArray(o)) return cloneArray(o, clone);
        if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {
          return handler(o, clone);
        }
        const o2 = {};
        refs.push(o);
        refsNew.push(o2);
        for (const k in o) {
          if (Object.hasOwnProperty.call(o, k) === false) continue;
          const cur = o[k];
          if (typeof cur !== "object" || cur === null) {
            o2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            o2[k] = handler(cur, clone);
          } else if (ArrayBuffer.isView(cur)) {
            o2[k] = copyBuffer(cur);
          } else {
            const i = refs.indexOf(cur);
            if (i !== -1) {
              o2[k] = refsNew[i];
            } else {
              o2[k] = clone(cur);
            }
          }
        }
        refs.pop();
        refsNew.pop();
        return o2;
      }
      function cloneProto(o) {
        if (typeof o !== "object" || o === null) return o;
        if (Array.isArray(o)) return cloneArray(o, cloneProto);
        if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {
          return handler(o, cloneProto);
        }
        const o2 = {};
        refs.push(o);
        refsNew.push(o2);
        for (const k in o) {
          const cur = o[k];
          if (typeof cur !== "object" || cur === null) {
            o2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            o2[k] = handler(cur, cloneProto);
          } else if (ArrayBuffer.isView(cur)) {
            o2[k] = copyBuffer(cur);
          } else {
            const i = refs.indexOf(cur);
            if (i !== -1) {
              o2[k] = refsNew[i];
            } else {
              o2[k] = cloneProto(cur);
            }
          }
        }
        refs.pop();
        refsNew.pop();
        return o2;
      }
    }
  }
});
init_esm_shims$1();
init_esm_shims$1();
init_esm_shims$1();
var isBrowser = typeof navigator !== "undefined";
var target$1 = typeof window !== "undefined" ? window : typeof globalThis !== "undefined" ? globalThis : typeof global !== "undefined" ? global : {};
typeof target$1.chrome !== "undefined" && !!target$1.chrome.devtools;
isBrowser && target$1.self !== target$1.top;
var _a$1;
typeof navigator !== "undefined" && ((_a$1 = navigator.userAgent) == null ? void 0 : _a$1.toLowerCase().includes("electron"));
init_esm_shims$1();
var import_rfdc = __toESM$1(require_rfdc());
var classifyRE = /(?:^|[-_/])(\w)/g;
function toUpper(_, c) {
  return c ? c.toUpperCase() : "";
}
function classify(str) {
  return str && `${str}`.replace(classifyRE, toUpper);
}
function basename(filename, ext) {
  let normalizedFilename = filename.replace(/^[a-z]:/i, "").replace(/\\/g, "/");
  if (normalizedFilename.endsWith(`index${ext}`)) {
    normalizedFilename = normalizedFilename.replace(`/index${ext}`, ext);
  }
  const lastSlashIndex = normalizedFilename.lastIndexOf("/");
  const baseNameWithExt = normalizedFilename.substring(lastSlashIndex + 1);
  {
    const extIndex = baseNameWithExt.lastIndexOf(ext);
    return baseNameWithExt.substring(0, extIndex);
  }
}
var deepClone = (0, import_rfdc.default)({ circles: true });
const DEBOUNCE_DEFAULTS = {
  trailing: true
};
function debounce(fn, wait = 25, options = {}) {
  options = { ...DEBOUNCE_DEFAULTS, ...options };
  if (!Number.isFinite(wait)) {
    throw new TypeError("Expected `wait` to be a finite number");
  }
  let leadingValue;
  let timeout2;
  let resolveList = [];
  let currentPromise;
  let trailingArgs;
  const applyFn = (_this, args) => {
    currentPromise = _applyPromised(fn, _this, args);
    currentPromise.finally(() => {
      currentPromise = null;
      if (options.trailing && trailingArgs && !timeout2) {
        const promise = applyFn(_this, trailingArgs);
        trailingArgs = null;
        return promise;
      }
    });
    return currentPromise;
  };
  return function(...args) {
    if (currentPromise) {
      if (options.trailing) {
        trailingArgs = args;
      }
      return currentPromise;
    }
    return new Promise((resolve2) => {
      const shouldCallNow = !timeout2 && options.leading;
      clearTimeout(timeout2);
      timeout2 = setTimeout(() => {
        timeout2 = null;
        const promise = options.leading ? leadingValue : applyFn(this, args);
        for (const _resolve of resolveList) {
          _resolve(promise);
        }
        resolveList = [];
      }, wait);
      if (shouldCallNow) {
        leadingValue = applyFn(this, args);
        resolve2(leadingValue);
      } else {
        resolveList.push(resolve2);
      }
    });
  };
}
async function _applyPromised(fn, _this, args) {
  return await fn.apply(_this, args);
}
function flatHooks(configHooks, hooks2 = {}, parentName) {
  for (const key in configHooks) {
    const subHook = configHooks[key];
    const name = parentName ? `${parentName}:${key}` : key;
    if (typeof subHook === "object" && subHook !== null) {
      flatHooks(subHook, hooks2, name);
    } else if (typeof subHook === "function") {
      hooks2[name] = subHook;
    }
  }
  return hooks2;
}
const defaultTask = { run: (function_) => function_() };
const _createTask = () => defaultTask;
const createTask = typeof console.createTask !== "undefined" ? console.createTask : _createTask;
function serialTaskCaller(hooks2, args) {
  const name = args.shift();
  const task = createTask(name);
  return hooks2.reduce(
    (promise, hookFunction) => promise.then(() => task.run(() => hookFunction(...args))),
    Promise.resolve()
  );
}
function parallelTaskCaller(hooks2, args) {
  const name = args.shift();
  const task = createTask(name);
  return Promise.all(hooks2.map((hook2) => task.run(() => hook2(...args))));
}
function callEachWith(callbacks, arg0) {
  for (const callback of [...callbacks]) {
    callback(arg0);
  }
}
class Hookable {
  constructor() {
    this._hooks = {};
    this._before = void 0;
    this._after = void 0;
    this._deprecatedMessages = void 0;
    this._deprecatedHooks = {};
    this.hook = this.hook.bind(this);
    this.callHook = this.callHook.bind(this);
    this.callHookWith = this.callHookWith.bind(this);
  }
  hook(name, function_, options = {}) {
    if (!name || typeof function_ !== "function") {
      return () => {
      };
    }
    const originalName = name;
    let dep;
    while (this._deprecatedHooks[name]) {
      dep = this._deprecatedHooks[name];
      name = dep.to;
    }
    if (dep && !options.allowDeprecated) {
      let message = dep.message;
      if (!message) {
        message = `${originalName} hook has been deprecated` + (dep.to ? `, please use ${dep.to}` : "");
      }
      if (!this._deprecatedMessages) {
        this._deprecatedMessages = /* @__PURE__ */ new Set();
      }
      if (!this._deprecatedMessages.has(message)) {
        console.warn(message);
        this._deprecatedMessages.add(message);
      }
    }
    if (!function_.name) {
      try {
        Object.defineProperty(function_, "name", {
          get: () => "_" + name.replace(/\W+/g, "_") + "_hook_cb",
          configurable: true
        });
      } catch {
      }
    }
    this._hooks[name] = this._hooks[name] || [];
    this._hooks[name].push(function_);
    return () => {
      if (function_) {
        this.removeHook(name, function_);
        function_ = void 0;
      }
    };
  }
  hookOnce(name, function_) {
    let _unreg;
    let _function = (...arguments_) => {
      if (typeof _unreg === "function") {
        _unreg();
      }
      _unreg = void 0;
      _function = void 0;
      return function_(...arguments_);
    };
    _unreg = this.hook(name, _function);
    return _unreg;
  }
  removeHook(name, function_) {
    if (this._hooks[name]) {
      const index = this._hooks[name].indexOf(function_);
      if (index !== -1) {
        this._hooks[name].splice(index, 1);
      }
      if (this._hooks[name].length === 0) {
        delete this._hooks[name];
      }
    }
  }
  deprecateHook(name, deprecated) {
    this._deprecatedHooks[name] = typeof deprecated === "string" ? { to: deprecated } : deprecated;
    const _hooks = this._hooks[name] || [];
    delete this._hooks[name];
    for (const hook2 of _hooks) {
      this.hook(name, hook2);
    }
  }
  deprecateHooks(deprecatedHooks) {
    Object.assign(this._deprecatedHooks, deprecatedHooks);
    for (const name in deprecatedHooks) {
      this.deprecateHook(name, deprecatedHooks[name]);
    }
  }
  addHooks(configHooks) {
    const hooks2 = flatHooks(configHooks);
    const removeFns = Object.keys(hooks2).map(
      (key) => this.hook(key, hooks2[key])
    );
    return () => {
      for (const unreg of removeFns.splice(0, removeFns.length)) {
        unreg();
      }
    };
  }
  removeHooks(configHooks) {
    const hooks2 = flatHooks(configHooks);
    for (const key in hooks2) {
      this.removeHook(key, hooks2[key]);
    }
  }
  removeAllHooks() {
    for (const key in this._hooks) {
      delete this._hooks[key];
    }
  }
  callHook(name, ...arguments_) {
    arguments_.unshift(name);
    return this.callHookWith(serialTaskCaller, name, ...arguments_);
  }
  callHookParallel(name, ...arguments_) {
    arguments_.unshift(name);
    return this.callHookWith(parallelTaskCaller, name, ...arguments_);
  }
  callHookWith(caller, name, ...arguments_) {
    const event = this._before || this._after ? { name, args: arguments_, context: {} } : void 0;
    if (this._before) {
      callEachWith(this._before, event);
    }
    const result = caller(
      name in this._hooks ? [...this._hooks[name]] : [],
      arguments_
    );
    if (result instanceof Promise) {
      return result.finally(() => {
        if (this._after && event) {
          callEachWith(this._after, event);
        }
      });
    }
    if (this._after && event) {
      callEachWith(this._after, event);
    }
    return result;
  }
  beforeEach(function_) {
    this._before = this._before || [];
    this._before.push(function_);
    return () => {
      if (this._before !== void 0) {
        const index = this._before.indexOf(function_);
        if (index !== -1) {
          this._before.splice(index, 1);
        }
      }
    };
  }
  afterEach(function_) {
    this._after = this._after || [];
    this._after.push(function_);
    return () => {
      if (this._after !== void 0) {
        const index = this._after.indexOf(function_);
        if (index !== -1) {
          this._after.splice(index, 1);
        }
      }
    };
  }
}
function createHooks() {
  return new Hookable();
}
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target22) => (target22 = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  __defProp(target22, "default", { value: mod, enumerable: true }),
  mod
));
var init_esm_shims = __esm({
  "../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js"() {
  }
});
var require_speakingurl = __commonJS({
  "../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/lib/speakingurl.js"(exports, module) {
    init_esm_shims();
    (function(root) {
      var charMap = {
        // latin
        "À": "A",
        "Á": "A",
        "Â": "A",
        "Ã": "A",
        "Ä": "Ae",
        "Å": "A",
        "Æ": "AE",
        "Ç": "C",
        "È": "E",
        "É": "E",
        "Ê": "E",
        "Ë": "E",
        "Ì": "I",
        "Í": "I",
        "Î": "I",
        "Ï": "I",
        "Ð": "D",
        "Ñ": "N",
        "Ò": "O",
        "Ó": "O",
        "Ô": "O",
        "Õ": "O",
        "Ö": "Oe",
        "Ő": "O",
        "Ø": "O",
        "Ù": "U",
        "Ú": "U",
        "Û": "U",
        "Ü": "Ue",
        "Ű": "U",
        "Ý": "Y",
        "Þ": "TH",
        "ß": "ss",
        "à": "a",
        "á": "a",
        "â": "a",
        "ã": "a",
        "ä": "ae",
        "å": "a",
        "æ": "ae",
        "ç": "c",
        "è": "e",
        "é": "e",
        "ê": "e",
        "ë": "e",
        "ì": "i",
        "í": "i",
        "î": "i",
        "ï": "i",
        "ð": "d",
        "ñ": "n",
        "ò": "o",
        "ó": "o",
        "ô": "o",
        "õ": "o",
        "ö": "oe",
        "ő": "o",
        "ø": "o",
        "ù": "u",
        "ú": "u",
        "û": "u",
        "ü": "ue",
        "ű": "u",
        "ý": "y",
        "þ": "th",
        "ÿ": "y",
        "ẞ": "SS",
        // language specific
        // Arabic
        "ا": "a",
        "أ": "a",
        "إ": "i",
        "آ": "aa",
        "ؤ": "u",
        "ئ": "e",
        "ء": "a",
        "ب": "b",
        "ت": "t",
        "ث": "th",
        "ج": "j",
        "ح": "h",
        "خ": "kh",
        "د": "d",
        "ذ": "th",
        "ر": "r",
        "ز": "z",
        "س": "s",
        "ش": "sh",
        "ص": "s",
        "ض": "dh",
        "ط": "t",
        "ظ": "z",
        "ع": "a",
        "غ": "gh",
        "ف": "f",
        "ق": "q",
        "ك": "k",
        "ل": "l",
        "م": "m",
        "ن": "n",
        "ه": "h",
        "و": "w",
        "ي": "y",
        "ى": "a",
        "ة": "h",
        "ﻻ": "la",
        "ﻷ": "laa",
        "ﻹ": "lai",
        "ﻵ": "laa",
        // Persian additional characters than Arabic
        "گ": "g",
        "چ": "ch",
        "پ": "p",
        "ژ": "zh",
        "ک": "k",
        "ی": "y",
        // Arabic diactrics
        "َ": "a",
        "ً": "an",
        "ِ": "e",
        "ٍ": "en",
        "ُ": "u",
        "ٌ": "on",
        "ْ": "",
        // Arabic numbers
        "٠": "0",
        "١": "1",
        "٢": "2",
        "٣": "3",
        "٤": "4",
        "٥": "5",
        "٦": "6",
        "٧": "7",
        "٨": "8",
        "٩": "9",
        // Persian numbers
        "۰": "0",
        "۱": "1",
        "۲": "2",
        "۳": "3",
        "۴": "4",
        "۵": "5",
        "۶": "6",
        "۷": "7",
        "۸": "8",
        "۹": "9",
        // Burmese consonants
        "က": "k",
        "ခ": "kh",
        "ဂ": "g",
        "ဃ": "ga",
        "င": "ng",
        "စ": "s",
        "ဆ": "sa",
        "ဇ": "z",
        "စျ": "za",
        "ည": "ny",
        "ဋ": "t",
        "ဌ": "ta",
        "ဍ": "d",
        "ဎ": "da",
        "ဏ": "na",
        "တ": "t",
        "ထ": "ta",
        "ဒ": "d",
        "ဓ": "da",
        "န": "n",
        "ပ": "p",
        "ဖ": "pa",
        "ဗ": "b",
        "ဘ": "ba",
        "မ": "m",
        "ယ": "y",
        "ရ": "ya",
        "လ": "l",
        "ဝ": "w",
        "သ": "th",
        "ဟ": "h",
        "ဠ": "la",
        "အ": "a",
        // consonant character combos
        "ြ": "y",
        "ျ": "ya",
        "ွ": "w",
        "ြွ": "yw",
        "ျွ": "ywa",
        "ှ": "h",
        // independent vowels
        "ဧ": "e",
        "၏": "-e",
        "ဣ": "i",
        "ဤ": "-i",
        "ဉ": "u",
        "ဦ": "-u",
        "ဩ": "aw",
        "သြော": "aw",
        "ဪ": "aw",
        // numbers
        "၀": "0",
        "၁": "1",
        "၂": "2",
        "၃": "3",
        "၄": "4",
        "၅": "5",
        "၆": "6",
        "၇": "7",
        "၈": "8",
        "၉": "9",
        // virama and tone marks which are silent in transliteration
        "္": "",
        "့": "",
        "း": "",
        // Czech
        "č": "c",
        "ď": "d",
        "ě": "e",
        "ň": "n",
        "ř": "r",
        "š": "s",
        "ť": "t",
        "ů": "u",
        "ž": "z",
        "Č": "C",
        "Ď": "D",
        "Ě": "E",
        "Ň": "N",
        "Ř": "R",
        "Š": "S",
        "Ť": "T",
        "Ů": "U",
        "Ž": "Z",
        // Dhivehi
        "ހ": "h",
        "ށ": "sh",
        "ނ": "n",
        "ރ": "r",
        "ބ": "b",
        "ޅ": "lh",
        "ކ": "k",
        "އ": "a",
        "ވ": "v",
        "މ": "m",
        "ފ": "f",
        "ދ": "dh",
        "ތ": "th",
        "ލ": "l",
        "ގ": "g",
        "ޏ": "gn",
        "ސ": "s",
        "ޑ": "d",
        "ޒ": "z",
        "ޓ": "t",
        "ޔ": "y",
        "ޕ": "p",
        "ޖ": "j",
        "ޗ": "ch",
        "ޘ": "tt",
        "ޙ": "hh",
        "ޚ": "kh",
        "ޛ": "th",
        "ޜ": "z",
        "ޝ": "sh",
        "ޞ": "s",
        "ޟ": "d",
        "ޠ": "t",
        "ޡ": "z",
        "ޢ": "a",
        "ޣ": "gh",
        "ޤ": "q",
        "ޥ": "w",
        "ަ": "a",
        "ާ": "aa",
        "ި": "i",
        "ީ": "ee",
        "ު": "u",
        "ޫ": "oo",
        "ެ": "e",
        "ޭ": "ey",
        "ޮ": "o",
        "ޯ": "oa",
        "ް": "",
        // Georgian https://en.wikipedia.org/wiki/Romanization_of_Georgian
        // National system (2002)
        "ა": "a",
        "ბ": "b",
        "გ": "g",
        "დ": "d",
        "ე": "e",
        "ვ": "v",
        "ზ": "z",
        "თ": "t",
        "ი": "i",
        "კ": "k",
        "ლ": "l",
        "მ": "m",
        "ნ": "n",
        "ო": "o",
        "პ": "p",
        "ჟ": "zh",
        "რ": "r",
        "ს": "s",
        "ტ": "t",
        "უ": "u",
        "ფ": "p",
        "ქ": "k",
        "ღ": "gh",
        "ყ": "q",
        "შ": "sh",
        "ჩ": "ch",
        "ც": "ts",
        "ძ": "dz",
        "წ": "ts",
        "ჭ": "ch",
        "ხ": "kh",
        "ჯ": "j",
        "ჰ": "h",
        // Greek
        "α": "a",
        "β": "v",
        "γ": "g",
        "δ": "d",
        "ε": "e",
        "ζ": "z",
        "η": "i",
        "θ": "th",
        "ι": "i",
        "κ": "k",
        "λ": "l",
        "μ": "m",
        "ν": "n",
        "ξ": "ks",
        "ο": "o",
        "π": "p",
        "ρ": "r",
        "σ": "s",
        "τ": "t",
        "υ": "y",
        "φ": "f",
        "χ": "x",
        "ψ": "ps",
        "ω": "o",
        "ά": "a",
        "έ": "e",
        "ί": "i",
        "ό": "o",
        "ύ": "y",
        "ή": "i",
        "ώ": "o",
        "ς": "s",
        "ϊ": "i",
        "ΰ": "y",
        "ϋ": "y",
        "ΐ": "i",
        "Α": "A",
        "Β": "B",
        "Γ": "G",
        "Δ": "D",
        "Ε": "E",
        "Ζ": "Z",
        "Η": "I",
        "Θ": "TH",
        "Ι": "I",
        "Κ": "K",
        "Λ": "L",
        "Μ": "M",
        "Ν": "N",
        "Ξ": "KS",
        "Ο": "O",
        "Π": "P",
        "Ρ": "R",
        "Σ": "S",
        "Τ": "T",
        "Υ": "Y",
        "Φ": "F",
        "Χ": "X",
        "Ψ": "PS",
        "Ω": "O",
        "Ά": "A",
        "Έ": "E",
        "Ί": "I",
        "Ό": "O",
        "Ύ": "Y",
        "Ή": "I",
        "Ώ": "O",
        "Ϊ": "I",
        "Ϋ": "Y",
        // Latvian
        "ā": "a",
        // 'č': 'c', // duplicate
        "ē": "e",
        "ģ": "g",
        "ī": "i",
        "ķ": "k",
        "ļ": "l",
        "ņ": "n",
        // 'š': 's', // duplicate
        "ū": "u",
        // 'ž': 'z', // duplicate
        "Ā": "A",
        // 'Č': 'C', // duplicate
        "Ē": "E",
        "Ģ": "G",
        "Ī": "I",
        "Ķ": "k",
        "Ļ": "L",
        "Ņ": "N",
        // 'Š': 'S', // duplicate
        "Ū": "U",
        // 'Ž': 'Z', // duplicate
        // Macedonian
        "Ќ": "Kj",
        "ќ": "kj",
        "Љ": "Lj",
        "љ": "lj",
        "Њ": "Nj",
        "њ": "nj",
        "Тс": "Ts",
        "тс": "ts",
        // Polish
        "ą": "a",
        "ć": "c",
        "ę": "e",
        "ł": "l",
        "ń": "n",
        // 'ó': 'o', // duplicate
        "ś": "s",
        "ź": "z",
        "ż": "z",
        "Ą": "A",
        "Ć": "C",
        "Ę": "E",
        "Ł": "L",
        "Ń": "N",
        "Ś": "S",
        "Ź": "Z",
        "Ż": "Z",
        // Ukranian
        "Є": "Ye",
        "І": "I",
        "Ї": "Yi",
        "Ґ": "G",
        "є": "ye",
        "і": "i",
        "ї": "yi",
        "ґ": "g",
        // Romanian
        "ă": "a",
        "Ă": "A",
        "ș": "s",
        "Ș": "S",
        // 'ş': 's', // duplicate
        // 'Ş': 'S', // duplicate
        "ț": "t",
        "Ț": "T",
        "ţ": "t",
        "Ţ": "T",
        // Russian https://en.wikipedia.org/wiki/Romanization_of_Russian
        // ICAO
        "а": "a",
        "б": "b",
        "в": "v",
        "г": "g",
        "д": "d",
        "е": "e",
        "ё": "yo",
        "ж": "zh",
        "з": "z",
        "и": "i",
        "й": "i",
        "к": "k",
        "л": "l",
        "м": "m",
        "н": "n",
        "о": "o",
        "п": "p",
        "р": "r",
        "с": "s",
        "т": "t",
        "у": "u",
        "ф": "f",
        "х": "kh",
        "ц": "c",
        "ч": "ch",
        "ш": "sh",
        "щ": "sh",
        "ъ": "",
        "ы": "y",
        "ь": "",
        "э": "e",
        "ю": "yu",
        "я": "ya",
        "А": "A",
        "Б": "B",
        "В": "V",
        "Г": "G",
        "Д": "D",
        "Е": "E",
        "Ё": "Yo",
        "Ж": "Zh",
        "З": "Z",
        "И": "I",
        "Й": "I",
        "К": "K",
        "Л": "L",
        "М": "M",
        "Н": "N",
        "О": "O",
        "П": "P",
        "Р": "R",
        "С": "S",
        "Т": "T",
        "У": "U",
        "Ф": "F",
        "Х": "Kh",
        "Ц": "C",
        "Ч": "Ch",
        "Ш": "Sh",
        "Щ": "Sh",
        "Ъ": "",
        "Ы": "Y",
        "Ь": "",
        "Э": "E",
        "Ю": "Yu",
        "Я": "Ya",
        // Serbian
        "ђ": "dj",
        "ј": "j",
        // 'љ': 'lj',  // duplicate
        // 'њ': 'nj', // duplicate
        "ћ": "c",
        "џ": "dz",
        "Ђ": "Dj",
        "Ј": "j",
        // 'Љ': 'Lj', // duplicate
        // 'Њ': 'Nj', // duplicate
        "Ћ": "C",
        "Џ": "Dz",
        // Slovak
        "ľ": "l",
        "ĺ": "l",
        "ŕ": "r",
        "Ľ": "L",
        "Ĺ": "L",
        "Ŕ": "R",
        // Turkish
        "ş": "s",
        "Ş": "S",
        "ı": "i",
        "İ": "I",
        // 'ç': 'c', // duplicate
        // 'Ç': 'C', // duplicate
        // 'ü': 'u', // duplicate, see langCharMap
        // 'Ü': 'U', // duplicate, see langCharMap
        // 'ö': 'o', // duplicate, see langCharMap
        // 'Ö': 'O', // duplicate, see langCharMap
        "ğ": "g",
        "Ğ": "G",
        // Vietnamese
        "ả": "a",
        "Ả": "A",
        "ẳ": "a",
        "Ẳ": "A",
        "ẩ": "a",
        "Ẩ": "A",
        "đ": "d",
        "Đ": "D",
        "ẹ": "e",
        "Ẹ": "E",
        "ẽ": "e",
        "Ẽ": "E",
        "ẻ": "e",
        "Ẻ": "E",
        "ế": "e",
        "Ế": "E",
        "ề": "e",
        "Ề": "E",
        "ệ": "e",
        "Ệ": "E",
        "ễ": "e",
        "Ễ": "E",
        "ể": "e",
        "Ể": "E",
        "ỏ": "o",
        "ọ": "o",
        "Ọ": "o",
        "ố": "o",
        "Ố": "O",
        "ồ": "o",
        "Ồ": "O",
        "ổ": "o",
        "Ổ": "O",
        "ộ": "o",
        "Ộ": "O",
        "ỗ": "o",
        "Ỗ": "O",
        "ơ": "o",
        "Ơ": "O",
        "ớ": "o",
        "Ớ": "O",
        "ờ": "o",
        "Ờ": "O",
        "ợ": "o",
        "Ợ": "O",
        "ỡ": "o",
        "Ỡ": "O",
        "Ở": "o",
        "ở": "o",
        "ị": "i",
        "Ị": "I",
        "ĩ": "i",
        "Ĩ": "I",
        "ỉ": "i",
        "Ỉ": "i",
        "ủ": "u",
        "Ủ": "U",
        "ụ": "u",
        "Ụ": "U",
        "ũ": "u",
        "Ũ": "U",
        "ư": "u",
        "Ư": "U",
        "ứ": "u",
        "Ứ": "U",
        "ừ": "u",
        "Ừ": "U",
        "ự": "u",
        "Ự": "U",
        "ữ": "u",
        "Ữ": "U",
        "ử": "u",
        "Ử": "ư",
        "ỷ": "y",
        "Ỷ": "y",
        "ỳ": "y",
        "Ỳ": "Y",
        "ỵ": "y",
        "Ỵ": "Y",
        "ỹ": "y",
        "Ỹ": "Y",
        "ạ": "a",
        "Ạ": "A",
        "ấ": "a",
        "Ấ": "A",
        "ầ": "a",
        "Ầ": "A",
        "ậ": "a",
        "Ậ": "A",
        "ẫ": "a",
        "Ẫ": "A",
        // 'ă': 'a', // duplicate
        // 'Ă': 'A', // duplicate
        "ắ": "a",
        "Ắ": "A",
        "ằ": "a",
        "Ằ": "A",
        "ặ": "a",
        "Ặ": "A",
        "ẵ": "a",
        "Ẵ": "A",
        "⓪": "0",
        "①": "1",
        "②": "2",
        "③": "3",
        "④": "4",
        "⑤": "5",
        "⑥": "6",
        "⑦": "7",
        "⑧": "8",
        "⑨": "9",
        "⑩": "10",
        "⑪": "11",
        "⑫": "12",
        "⑬": "13",
        "⑭": "14",
        "⑮": "15",
        "⑯": "16",
        "⑰": "17",
        "⑱": "18",
        "⑲": "18",
        "⑳": "18",
        "⓵": "1",
        "⓶": "2",
        "⓷": "3",
        "⓸": "4",
        "⓹": "5",
        "⓺": "6",
        "⓻": "7",
        "⓼": "8",
        "⓽": "9",
        "⓾": "10",
        "⓿": "0",
        "⓫": "11",
        "⓬": "12",
        "⓭": "13",
        "⓮": "14",
        "⓯": "15",
        "⓰": "16",
        "⓱": "17",
        "⓲": "18",
        "⓳": "19",
        "⓴": "20",
        "Ⓐ": "A",
        "Ⓑ": "B",
        "Ⓒ": "C",
        "Ⓓ": "D",
        "Ⓔ": "E",
        "Ⓕ": "F",
        "Ⓖ": "G",
        "Ⓗ": "H",
        "Ⓘ": "I",
        "Ⓙ": "J",
        "Ⓚ": "K",
        "Ⓛ": "L",
        "Ⓜ": "M",
        "Ⓝ": "N",
        "Ⓞ": "O",
        "Ⓟ": "P",
        "Ⓠ": "Q",
        "Ⓡ": "R",
        "Ⓢ": "S",
        "Ⓣ": "T",
        "Ⓤ": "U",
        "Ⓥ": "V",
        "Ⓦ": "W",
        "Ⓧ": "X",
        "Ⓨ": "Y",
        "Ⓩ": "Z",
        "ⓐ": "a",
        "ⓑ": "b",
        "ⓒ": "c",
        "ⓓ": "d",
        "ⓔ": "e",
        "ⓕ": "f",
        "ⓖ": "g",
        "ⓗ": "h",
        "ⓘ": "i",
        "ⓙ": "j",
        "ⓚ": "k",
        "ⓛ": "l",
        "ⓜ": "m",
        "ⓝ": "n",
        "ⓞ": "o",
        "ⓟ": "p",
        "ⓠ": "q",
        "ⓡ": "r",
        "ⓢ": "s",
        "ⓣ": "t",
        "ⓤ": "u",
        "ⓦ": "v",
        "ⓥ": "w",
        "ⓧ": "x",
        "ⓨ": "y",
        "ⓩ": "z",
        // symbols
        "“": '"',
        "”": '"',
        "‘": "'",
        "’": "'",
        "∂": "d",
        "ƒ": "f",
        "™": "(TM)",
        "©": "(C)",
        "œ": "oe",
        "Œ": "OE",
        "®": "(R)",
        "†": "+",
        "℠": "(SM)",
        "…": "...",
        "˚": "o",
        "º": "o",
        "ª": "a",
        "•": "*",
        "၊": ",",
        "။": ".",
        // currency
        "$": "USD",
        "€": "EUR",
        "₢": "BRN",
        "₣": "FRF",
        "£": "GBP",
        "₤": "ITL",
        "₦": "NGN",
        "₧": "ESP",
        "₩": "KRW",
        "₪": "ILS",
        "₫": "VND",
        "₭": "LAK",
        "₮": "MNT",
        "₯": "GRD",
        "₱": "ARS",
        "₲": "PYG",
        "₳": "ARA",
        "₴": "UAH",
        "₵": "GHS",
        "¢": "cent",
        "¥": "CNY",
        "元": "CNY",
        "円": "YEN",
        "﷼": "IRR",
        "₠": "EWE",
        "฿": "THB",
        "₨": "INR",
        "₹": "INR",
        "₰": "PF",
        "₺": "TRY",
        "؋": "AFN",
        "₼": "AZN",
        "лв": "BGN",
        "៛": "KHR",
        "₡": "CRC",
        "₸": "KZT",
        "ден": "MKD",
        "zł": "PLN",
        "₽": "RUB",
        "₾": "GEL"
      };
      var lookAheadCharArray = [
        // burmese
        "်",
        // Dhivehi
        "ް"
      ];
      var diatricMap = {
        // Burmese
        // dependent vowels
        "ာ": "a",
        "ါ": "a",
        "ေ": "e",
        "ဲ": "e",
        "ိ": "i",
        "ီ": "i",
        "ို": "o",
        "ု": "u",
        "ူ": "u",
        "ေါင်": "aung",
        "ော": "aw",
        "ော်": "aw",
        "ေါ": "aw",
        "ေါ်": "aw",
        "်": "်",
        // this is special case but the character will be converted to latin in the code
        "က်": "et",
        "ိုက်": "aik",
        "ောက်": "auk",
        "င်": "in",
        "ိုင်": "aing",
        "ောင်": "aung",
        "စ်": "it",
        "ည်": "i",
        "တ်": "at",
        "ိတ်": "eik",
        "ုတ်": "ok",
        "ွတ်": "ut",
        "ေတ်": "it",
        "ဒ်": "d",
        "ိုဒ်": "ok",
        "ုဒ်": "ait",
        "န်": "an",
        "ာန်": "an",
        "ိန်": "ein",
        "ုန်": "on",
        "ွန်": "un",
        "ပ်": "at",
        "ိပ်": "eik",
        "ုပ်": "ok",
        "ွပ်": "ut",
        "န်ုပ်": "nub",
        "မ်": "an",
        "ိမ်": "ein",
        "ုမ်": "on",
        "ွမ်": "un",
        "ယ်": "e",
        "ိုလ်": "ol",
        "ဉ်": "in",
        "ံ": "an",
        "ိံ": "ein",
        "ုံ": "on",
        // Dhivehi
        "ައް": "ah",
        "ަށް": "ah"
      };
      var langCharMap = {
        "en": {},
        // default language
        "az": {
          // Azerbaijani
          "ç": "c",
          "ə": "e",
          "ğ": "g",
          "ı": "i",
          "ö": "o",
          "ş": "s",
          "ü": "u",
          "Ç": "C",
          "Ə": "E",
          "Ğ": "G",
          "İ": "I",
          "Ö": "O",
          "Ş": "S",
          "Ü": "U"
        },
        "cs": {
          // Czech
          "č": "c",
          "ď": "d",
          "ě": "e",
          "ň": "n",
          "ř": "r",
          "š": "s",
          "ť": "t",
          "ů": "u",
          "ž": "z",
          "Č": "C",
          "Ď": "D",
          "Ě": "E",
          "Ň": "N",
          "Ř": "R",
          "Š": "S",
          "Ť": "T",
          "Ů": "U",
          "Ž": "Z"
        },
        "fi": {
          // Finnish
          // 'å': 'a', duplicate see charMap/latin
          // 'Å': 'A', duplicate see charMap/latin
          "ä": "a",
          // ok
          "Ä": "A",
          // ok
          "ö": "o",
          // ok
          "Ö": "O"
          // ok
        },
        "hu": {
          // Hungarian
          "ä": "a",
          // ok
          "Ä": "A",
          // ok
          // 'á': 'a', duplicate see charMap/latin
          // 'Á': 'A', duplicate see charMap/latin
          "ö": "o",
          // ok
          "Ö": "O",
          // ok
          // 'ő': 'o', duplicate see charMap/latin
          // 'Ő': 'O', duplicate see charMap/latin
          "ü": "u",
          "Ü": "U",
          "ű": "u",
          "Ű": "U"
        },
        "lt": {
          // Lithuanian
          "ą": "a",
          "č": "c",
          "ę": "e",
          "ė": "e",
          "į": "i",
          "š": "s",
          "ų": "u",
          "ū": "u",
          "ž": "z",
          "Ą": "A",
          "Č": "C",
          "Ę": "E",
          "Ė": "E",
          "Į": "I",
          "Š": "S",
          "Ų": "U",
          "Ū": "U"
        },
        "lv": {
          // Latvian
          "ā": "a",
          "č": "c",
          "ē": "e",
          "ģ": "g",
          "ī": "i",
          "ķ": "k",
          "ļ": "l",
          "ņ": "n",
          "š": "s",
          "ū": "u",
          "ž": "z",
          "Ā": "A",
          "Č": "C",
          "Ē": "E",
          "Ģ": "G",
          "Ī": "i",
          "Ķ": "k",
          "Ļ": "L",
          "Ņ": "N",
          "Š": "S",
          "Ū": "u",
          "Ž": "Z"
        },
        "pl": {
          // Polish
          "ą": "a",
          "ć": "c",
          "ę": "e",
          "ł": "l",
          "ń": "n",
          "ó": "o",
          "ś": "s",
          "ź": "z",
          "ż": "z",
          "Ą": "A",
          "Ć": "C",
          "Ę": "e",
          "Ł": "L",
          "Ń": "N",
          "Ó": "O",
          "Ś": "S",
          "Ź": "Z",
          "Ż": "Z"
        },
        "sv": {
          // Swedish
          // 'å': 'a', duplicate see charMap/latin
          // 'Å': 'A', duplicate see charMap/latin
          "ä": "a",
          // ok
          "Ä": "A",
          // ok
          "ö": "o",
          // ok
          "Ö": "O"
          // ok
        },
        "sk": {
          // Slovak
          "ä": "a",
          "Ä": "A"
        },
        "sr": {
          // Serbian
          "љ": "lj",
          "њ": "nj",
          "Љ": "Lj",
          "Њ": "Nj",
          "đ": "dj",
          "Đ": "Dj"
        },
        "tr": {
          // Turkish
          "Ü": "U",
          "Ö": "O",
          "ü": "u",
          "ö": "o"
        }
      };
      var symbolMap = {
        "ar": {
          "∆": "delta",
          "∞": "la-nihaya",
          "♥": "hob",
          "&": "wa",
          "|": "aw",
          "<": "aqal-men",
          ">": "akbar-men",
          "∑": "majmou",
          "¤": "omla"
        },
        "az": {},
        "ca": {
          "∆": "delta",
          "∞": "infinit",
          "♥": "amor",
          "&": "i",
          "|": "o",
          "<": "menys que",
          ">": "mes que",
          "∑": "suma dels",
          "¤": "moneda"
        },
        "cs": {
          "∆": "delta",
          "∞": "nekonecno",
          "♥": "laska",
          "&": "a",
          "|": "nebo",
          "<": "mensi nez",
          ">": "vetsi nez",
          "∑": "soucet",
          "¤": "mena"
        },
        "de": {
          "∆": "delta",
          "∞": "unendlich",
          "♥": "Liebe",
          "&": "und",
          "|": "oder",
          "<": "kleiner als",
          ">": "groesser als",
          "∑": "Summe von",
          "¤": "Waehrung"
        },
        "dv": {
          "∆": "delta",
          "∞": "kolunulaa",
          "♥": "loabi",
          "&": "aai",
          "|": "noonee",
          "<": "ah vure kuda",
          ">": "ah vure bodu",
          "∑": "jumula",
          "¤": "faisaa"
        },
        "en": {
          "∆": "delta",
          "∞": "infinity",
          "♥": "love",
          "&": "and",
          "|": "or",
          "<": "less than",
          ">": "greater than",
          "∑": "sum",
          "¤": "currency"
        },
        "es": {
          "∆": "delta",
          "∞": "infinito",
          "♥": "amor",
          "&": "y",
          "|": "u",
          "<": "menos que",
          ">": "mas que",
          "∑": "suma de los",
          "¤": "moneda"
        },
        "fa": {
          "∆": "delta",
          "∞": "bi-nahayat",
          "♥": "eshgh",
          "&": "va",
          "|": "ya",
          "<": "kamtar-az",
          ">": "bishtar-az",
          "∑": "majmooe",
          "¤": "vahed"
        },
        "fi": {
          "∆": "delta",
          "∞": "aarettomyys",
          "♥": "rakkaus",
          "&": "ja",
          "|": "tai",
          "<": "pienempi kuin",
          ">": "suurempi kuin",
          "∑": "summa",
          "¤": "valuutta"
        },
        "fr": {
          "∆": "delta",
          "∞": "infiniment",
          "♥": "Amour",
          "&": "et",
          "|": "ou",
          "<": "moins que",
          ">": "superieure a",
          "∑": "somme des",
          "¤": "monnaie"
        },
        "ge": {
          "∆": "delta",
          "∞": "usasruloba",
          "♥": "siqvaruli",
          "&": "da",
          "|": "an",
          "<": "naklebi",
          ">": "meti",
          "∑": "jami",
          "¤": "valuta"
        },
        "gr": {},
        "hu": {
          "∆": "delta",
          "∞": "vegtelen",
          "♥": "szerelem",
          "&": "es",
          "|": "vagy",
          "<": "kisebb mint",
          ">": "nagyobb mint",
          "∑": "szumma",
          "¤": "penznem"
        },
        "it": {
          "∆": "delta",
          "∞": "infinito",
          "♥": "amore",
          "&": "e",
          "|": "o",
          "<": "minore di",
          ">": "maggiore di",
          "∑": "somma",
          "¤": "moneta"
        },
        "lt": {
          "∆": "delta",
          "∞": "begalybe",
          "♥": "meile",
          "&": "ir",
          "|": "ar",
          "<": "maziau nei",
          ">": "daugiau nei",
          "∑": "suma",
          "¤": "valiuta"
        },
        "lv": {
          "∆": "delta",
          "∞": "bezgaliba",
          "♥": "milestiba",
          "&": "un",
          "|": "vai",
          "<": "mazak neka",
          ">": "lielaks neka",
          "∑": "summa",
          "¤": "valuta"
        },
        "my": {
          "∆": "kwahkhyaet",
          "∞": "asaonasme",
          "♥": "akhyait",
          "&": "nhin",
          "|": "tho",
          "<": "ngethaw",
          ">": "kyithaw",
          "∑": "paungld",
          "¤": "ngwekye"
        },
        "mk": {},
        "nl": {
          "∆": "delta",
          "∞": "oneindig",
          "♥": "liefde",
          "&": "en",
          "|": "of",
          "<": "kleiner dan",
          ">": "groter dan",
          "∑": "som",
          "¤": "valuta"
        },
        "pl": {
          "∆": "delta",
          "∞": "nieskonczonosc",
          "♥": "milosc",
          "&": "i",
          "|": "lub",
          "<": "mniejsze niz",
          ">": "wieksze niz",
          "∑": "suma",
          "¤": "waluta"
        },
        "pt": {
          "∆": "delta",
          "∞": "infinito",
          "♥": "amor",
          "&": "e",
          "|": "ou",
          "<": "menor que",
          ">": "maior que",
          "∑": "soma",
          "¤": "moeda"
        },
        "ro": {
          "∆": "delta",
          "∞": "infinit",
          "♥": "dragoste",
          "&": "si",
          "|": "sau",
          "<": "mai mic ca",
          ">": "mai mare ca",
          "∑": "suma",
          "¤": "valuta"
        },
        "ru": {
          "∆": "delta",
          "∞": "beskonechno",
          "♥": "lubov",
          "&": "i",
          "|": "ili",
          "<": "menshe",
          ">": "bolshe",
          "∑": "summa",
          "¤": "valjuta"
        },
        "sk": {
          "∆": "delta",
          "∞": "nekonecno",
          "♥": "laska",
          "&": "a",
          "|": "alebo",
          "<": "menej ako",
          ">": "viac ako",
          "∑": "sucet",
          "¤": "mena"
        },
        "sr": {},
        "tr": {
          "∆": "delta",
          "∞": "sonsuzluk",
          "♥": "ask",
          "&": "ve",
          "|": "veya",
          "<": "kucuktur",
          ">": "buyuktur",
          "∑": "toplam",
          "¤": "para birimi"
        },
        "uk": {
          "∆": "delta",
          "∞": "bezkinechnist",
          "♥": "lubov",
          "&": "i",
          "|": "abo",
          "<": "menshe",
          ">": "bilshe",
          "∑": "suma",
          "¤": "valjuta"
        },
        "vn": {
          "∆": "delta",
          "∞": "vo cuc",
          "♥": "yeu",
          "&": "va",
          "|": "hoac",
          "<": "nho hon",
          ">": "lon hon",
          "∑": "tong",
          "¤": "tien te"
        }
      };
      var uricChars = [";", "?", ":", "@", "&", "=", "+", "$", ",", "/"].join("");
      var uricNoSlashChars = [";", "?", ":", "@", "&", "=", "+", "$", ","].join("");
      var markChars = [".", "!", "~", "*", "'", "(", ")"].join("");
      var getSlug = function getSlug2(input, opts) {
        var separator = "-";
        var result = "";
        var diatricString = "";
        var convertSymbols = true;
        var customReplacements = {};
        var maintainCase;
        var titleCase;
        var truncate;
        var uricFlag;
        var uricNoSlashFlag;
        var markFlag;
        var symbol;
        var langChar;
        var lucky;
        var i;
        var ch;
        var l;
        var lastCharWasSymbol;
        var lastCharWasDiatric;
        var allowedChars = "";
        if (typeof input !== "string") {
          return "";
        }
        if (typeof opts === "string") {
          separator = opts;
        }
        symbol = symbolMap.en;
        langChar = langCharMap.en;
        if (typeof opts === "object") {
          maintainCase = opts.maintainCase || false;
          customReplacements = opts.custom && typeof opts.custom === "object" ? opts.custom : customReplacements;
          truncate = +opts.truncate > 1 && opts.truncate || false;
          uricFlag = opts.uric || false;
          uricNoSlashFlag = opts.uricNoSlash || false;
          markFlag = opts.mark || false;
          convertSymbols = opts.symbols === false || opts.lang === false ? false : true;
          separator = opts.separator || separator;
          if (uricFlag) {
            allowedChars += uricChars;
          }
          if (uricNoSlashFlag) {
            allowedChars += uricNoSlashChars;
          }
          if (markFlag) {
            allowedChars += markChars;
          }
          symbol = opts.lang && symbolMap[opts.lang] && convertSymbols ? symbolMap[opts.lang] : convertSymbols ? symbolMap.en : {};
          langChar = opts.lang && langCharMap[opts.lang] ? langCharMap[opts.lang] : opts.lang === false || opts.lang === true ? {} : langCharMap.en;
          if (opts.titleCase && typeof opts.titleCase.length === "number" && Array.prototype.toString.call(opts.titleCase)) {
            opts.titleCase.forEach(function(v) {
              customReplacements[v + ""] = v + "";
            });
            titleCase = true;
          } else {
            titleCase = !!opts.titleCase;
          }
          if (opts.custom && typeof opts.custom.length === "number" && Array.prototype.toString.call(opts.custom)) {
            opts.custom.forEach(function(v) {
              customReplacements[v + ""] = v + "";
            });
          }
          Object.keys(customReplacements).forEach(function(v) {
            var r;
            if (v.length > 1) {
              r = new RegExp("\\b" + escapeChars(v) + "\\b", "gi");
            } else {
              r = new RegExp(escapeChars(v), "gi");
            }
            input = input.replace(r, customReplacements[v]);
          });
          for (ch in customReplacements) {
            allowedChars += ch;
          }
        }
        allowedChars += separator;
        allowedChars = escapeChars(allowedChars);
        input = input.replace(/(^\s+|\s+$)/g, "");
        lastCharWasSymbol = false;
        lastCharWasDiatric = false;
        for (i = 0, l = input.length; i < l; i++) {
          ch = input[i];
          if (isReplacedCustomChar(ch, customReplacements)) {
            lastCharWasSymbol = false;
          } else if (langChar[ch]) {
            ch = lastCharWasSymbol && langChar[ch].match(/[A-Za-z0-9]/) ? " " + langChar[ch] : langChar[ch];
            lastCharWasSymbol = false;
          } else if (ch in charMap) {
            if (i + 1 < l && lookAheadCharArray.indexOf(input[i + 1]) >= 0) {
              diatricString += ch;
              ch = "";
            } else if (lastCharWasDiatric === true) {
              ch = diatricMap[diatricString] + charMap[ch];
              diatricString = "";
            } else {
              ch = lastCharWasSymbol && charMap[ch].match(/[A-Za-z0-9]/) ? " " + charMap[ch] : charMap[ch];
            }
            lastCharWasSymbol = false;
            lastCharWasDiatric = false;
          } else if (ch in diatricMap) {
            diatricString += ch;
            ch = "";
            if (i === l - 1) {
              ch = diatricMap[diatricString];
            }
            lastCharWasDiatric = true;
          } else if (
            // process symbol chars
            symbol[ch] && !(uricFlag && uricChars.indexOf(ch) !== -1) && !(uricNoSlashFlag && uricNoSlashChars.indexOf(ch) !== -1)
          ) {
            ch = lastCharWasSymbol || result.substr(-1).match(/[A-Za-z0-9]/) ? separator + symbol[ch] : symbol[ch];
            ch += input[i + 1] !== void 0 && input[i + 1].match(/[A-Za-z0-9]/) ? separator : "";
            lastCharWasSymbol = true;
          } else {
            if (lastCharWasDiatric === true) {
              ch = diatricMap[diatricString] + ch;
              diatricString = "";
              lastCharWasDiatric = false;
            } else if (lastCharWasSymbol && (/[A-Za-z0-9]/.test(ch) || result.substr(-1).match(/A-Za-z0-9]/))) {
              ch = " " + ch;
            }
            lastCharWasSymbol = false;
          }
          result += ch.replace(new RegExp("[^\\w\\s" + allowedChars + "_-]", "g"), separator);
        }
        if (titleCase) {
          result = result.replace(/(\w)(\S*)/g, function(_, i2, r) {
            var j = i2.toUpperCase() + (r !== null ? r : "");
            return Object.keys(customReplacements).indexOf(j.toLowerCase()) < 0 ? j : j.toLowerCase();
          });
        }
        result = result.replace(/\s+/g, separator).replace(new RegExp("\\" + separator + "+", "g"), separator).replace(new RegExp("(^\\" + separator + "+|\\" + separator + "+$)", "g"), "");
        if (truncate && result.length > truncate) {
          lucky = result.charAt(truncate) === separator;
          result = result.slice(0, truncate);
          if (!lucky) {
            result = result.slice(0, result.lastIndexOf(separator));
          }
        }
        if (!maintainCase && !titleCase) {
          result = result.toLowerCase();
        }
        return result;
      };
      var createSlug = function createSlug2(opts) {
        return function getSlugWithConfig(input) {
          return getSlug(input, opts);
        };
      };
      var escapeChars = function escapeChars2(input) {
        return input.replace(/[-\\^$*+?.()|[\]{}\/]/g, "\\$&");
      };
      var isReplacedCustomChar = function(ch, customReplacements) {
        for (var c in customReplacements) {
          if (customReplacements[c] === ch) {
            return true;
          }
        }
      };
      if (typeof module !== "undefined" && module.exports) {
        module.exports = getSlug;
        module.exports.createSlug = createSlug;
      } else if (typeof define !== "undefined" && define.amd) {
        define([], function() {
          return getSlug;
        });
      } else {
        try {
          if (root.getSlug || root.createSlug) {
            throw "speakingurl: globals exists /(getSlug|createSlug)/";
          } else {
            root.getSlug = getSlug;
            root.createSlug = createSlug;
          }
        } catch (e) {
        }
      }
    })(exports);
  }
});
var require_speakingurl2 = __commonJS({
  "../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/index.js"(exports, module) {
    init_esm_shims();
    module.exports = require_speakingurl();
  }
});
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
function getComponentTypeName(options) {
  var _a25;
  const name = options.name || options._componentTag || options.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__ || options.__name;
  if (name === "index" && ((_a25 = options.__file) == null ? void 0 : _a25.endsWith("index.vue"))) {
    return "";
  }
  return name;
}
function getComponentFileName(options) {
  const file = options.__file;
  if (file)
    return classify(basename(file, ".vue"));
}
function saveComponentGussedName(instance, name) {
  instance.type.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__ = name;
  return name;
}
function getAppRecord(instance) {
  if (instance.__VUE_DEVTOOLS_NEXT_APP_RECORD__)
    return instance.__VUE_DEVTOOLS_NEXT_APP_RECORD__;
  else if (instance.root)
    return instance.appContext.app.__VUE_DEVTOOLS_NEXT_APP_RECORD__;
}
function isFragment(instance) {
  var _a25, _b25;
  const subTreeType = (_a25 = instance.subTree) == null ? void 0 : _a25.type;
  const appRecord = getAppRecord(instance);
  if (appRecord) {
    return ((_b25 = appRecord == null ? void 0 : appRecord.types) == null ? void 0 : _b25.Fragment) === subTreeType;
  }
  return false;
}
function getInstanceName(instance) {
  var _a25, _b25, _c;
  const name = getComponentTypeName((instance == null ? void 0 : instance.type) || {});
  if (name)
    return name;
  if ((instance == null ? void 0 : instance.root) === instance)
    return "Root";
  for (const key in (_b25 = (_a25 = instance.parent) == null ? void 0 : _a25.type) == null ? void 0 : _b25.components) {
    if (instance.parent.type.components[key] === (instance == null ? void 0 : instance.type))
      return saveComponentGussedName(instance, key);
  }
  for (const key in (_c = instance.appContext) == null ? void 0 : _c.components) {
    if (instance.appContext.components[key] === (instance == null ? void 0 : instance.type))
      return saveComponentGussedName(instance, key);
  }
  const fileName = getComponentFileName((instance == null ? void 0 : instance.type) || {});
  if (fileName)
    return fileName;
  return "Anonymous Component";
}
function getUniqueComponentId(instance) {
  var _a25, _b25, _c;
  const appId = (_c = (_b25 = (_a25 = instance == null ? void 0 : instance.appContext) == null ? void 0 : _a25.app) == null ? void 0 : _b25.__VUE_DEVTOOLS_NEXT_APP_RECORD_ID__) != null ? _c : 0;
  const instanceId = instance === (instance == null ? void 0 : instance.root) ? "root" : instance.uid;
  return `${appId}:${instanceId}`;
}
function getComponentInstance(appRecord, instanceId) {
  instanceId = instanceId || `${appRecord.id}:root`;
  const instance = appRecord.instanceMap.get(instanceId);
  return instance || appRecord.instanceMap.get(":root");
}
function createRect() {
  const rect = {
    top: 0,
    bottom: 0,
    left: 0,
    right: 0,
    get width() {
      return rect.right - rect.left;
    },
    get height() {
      return rect.bottom - rect.top;
    }
  };
  return rect;
}
var range;
function getTextRect(node) {
  if (!range)
    range = document.createRange();
  range.selectNode(node);
  return range.getBoundingClientRect();
}
function getFragmentRect(vnode) {
  const rect = createRect();
  if (!vnode.children)
    return rect;
  for (let i = 0, l = vnode.children.length; i < l; i++) {
    const childVnode = vnode.children[i];
    let childRect;
    if (childVnode.component) {
      childRect = getComponentBoundingRect(childVnode.component);
    } else if (childVnode.el) {
      const el = childVnode.el;
      if (el.nodeType === 1 || el.getBoundingClientRect)
        childRect = el.getBoundingClientRect();
      else if (el.nodeType === 3 && el.data.trim())
        childRect = getTextRect(el);
    }
    if (childRect)
      mergeRects(rect, childRect);
  }
  return rect;
}
function mergeRects(a, b) {
  if (!a.top || b.top < a.top)
    a.top = b.top;
  if (!a.bottom || b.bottom > a.bottom)
    a.bottom = b.bottom;
  if (!a.left || b.left < a.left)
    a.left = b.left;
  if (!a.right || b.right > a.right)
    a.right = b.right;
  return a;
}
var DEFAULT_RECT = {
  top: 0,
  left: 0,
  right: 0,
  bottom: 0,
  width: 0,
  height: 0
};
function getComponentBoundingRect(instance) {
  const el = instance.subTree.el;
  if (typeof window === "undefined") {
    return DEFAULT_RECT;
  }
  if (isFragment(instance))
    return getFragmentRect(instance.subTree);
  else if ((el == null ? void 0 : el.nodeType) === 1)
    return el == null ? void 0 : el.getBoundingClientRect();
  else if (instance.subTree.component)
    return getComponentBoundingRect(instance.subTree.component);
  else
    return DEFAULT_RECT;
}
init_esm_shims();
function getRootElementsFromComponentInstance(instance) {
  if (isFragment(instance))
    return getFragmentRootElements(instance.subTree);
  if (!instance.subTree)
    return [];
  return [instance.subTree.el];
}
function getFragmentRootElements(vnode) {
  if (!vnode.children)
    return [];
  const list = [];
  vnode.children.forEach((childVnode) => {
    if (childVnode.component)
      list.push(...getRootElementsFromComponentInstance(childVnode.component));
    else if (childVnode == null ? void 0 : childVnode.el)
      list.push(childVnode.el);
  });
  return list;
}
var CONTAINER_ELEMENT_ID = "__vue-devtools-component-inspector__";
var CARD_ELEMENT_ID = "__vue-devtools-component-inspector__card__";
var COMPONENT_NAME_ELEMENT_ID = "__vue-devtools-component-inspector__name__";
var INDICATOR_ELEMENT_ID = "__vue-devtools-component-inspector__indicator__";
var containerStyles = {
  display: "block",
  zIndex: 2147483640,
  position: "fixed",
  backgroundColor: "#42b88325",
  border: "1px solid #42b88350",
  borderRadius: "5px",
  transition: "all 0.1s ease-in",
  pointerEvents: "none"
};
var cardStyles = {
  fontFamily: "Arial, Helvetica, sans-serif",
  padding: "5px 8px",
  borderRadius: "4px",
  textAlign: "left",
  position: "absolute",
  left: 0,
  color: "#e9e9e9",
  fontSize: "14px",
  fontWeight: 600,
  lineHeight: "24px",
  backgroundColor: "#42b883",
  boxShadow: "0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"
};
var indicatorStyles = {
  display: "inline-block",
  fontWeight: 400,
  fontStyle: "normal",
  fontSize: "12px",
  opacity: 0.7
};
function getContainerElement() {
  return document.getElementById(CONTAINER_ELEMENT_ID);
}
function getCardElement() {
  return document.getElementById(CARD_ELEMENT_ID);
}
function getIndicatorElement() {
  return document.getElementById(INDICATOR_ELEMENT_ID);
}
function getNameElement() {
  return document.getElementById(COMPONENT_NAME_ELEMENT_ID);
}
function getStyles(bounds) {
  return {
    left: `${Math.round(bounds.left * 100) / 100}px`,
    top: `${Math.round(bounds.top * 100) / 100}px`,
    width: `${Math.round(bounds.width * 100) / 100}px`,
    height: `${Math.round(bounds.height * 100) / 100}px`
  };
}
function create(options) {
  var _a25;
  const containerEl = document.createElement("div");
  containerEl.id = (_a25 = options.elementId) != null ? _a25 : CONTAINER_ELEMENT_ID;
  Object.assign(containerEl.style, {
    ...containerStyles,
    ...getStyles(options.bounds),
    ...options.style
  });
  const cardEl = document.createElement("span");
  cardEl.id = CARD_ELEMENT_ID;
  Object.assign(cardEl.style, {
    ...cardStyles,
    top: options.bounds.top < 35 ? 0 : "-35px"
  });
  const nameEl = document.createElement("span");
  nameEl.id = COMPONENT_NAME_ELEMENT_ID;
  nameEl.innerHTML = `&lt;${options.name}&gt;&nbsp;&nbsp;`;
  const indicatorEl = document.createElement("i");
  indicatorEl.id = INDICATOR_ELEMENT_ID;
  indicatorEl.innerHTML = `${Math.round(options.bounds.width * 100) / 100} x ${Math.round(options.bounds.height * 100) / 100}`;
  Object.assign(indicatorEl.style, indicatorStyles);
  cardEl.appendChild(nameEl);
  cardEl.appendChild(indicatorEl);
  containerEl.appendChild(cardEl);
  document.body.appendChild(containerEl);
  return containerEl;
}
function update$1(options) {
  const containerEl = getContainerElement();
  const cardEl = getCardElement();
  const nameEl = getNameElement();
  const indicatorEl = getIndicatorElement();
  if (containerEl) {
    Object.assign(containerEl.style, {
      ...containerStyles,
      ...getStyles(options.bounds)
    });
    Object.assign(cardEl.style, {
      top: options.bounds.top < 35 ? 0 : "-35px"
    });
    nameEl.innerHTML = `&lt;${options.name}&gt;&nbsp;&nbsp;`;
    indicatorEl.innerHTML = `${Math.round(options.bounds.width * 100) / 100} x ${Math.round(options.bounds.height * 100) / 100}`;
  }
}
function highlight(instance) {
  const bounds = getComponentBoundingRect(instance);
  if (!bounds.width && !bounds.height)
    return;
  const name = getInstanceName(instance);
  const container = getContainerElement();
  container ? update$1({ bounds, name }) : create({ bounds, name });
}
function unhighlight() {
  const el = getContainerElement();
  if (el)
    el.style.display = "none";
}
var inspectInstance = null;
function inspectFn(e) {
  const target22 = e.target;
  if (target22) {
    const instance = target22.__vueParentComponent;
    if (instance) {
      inspectInstance = instance;
      const el = instance.vnode.el;
      if (el) {
        const bounds = getComponentBoundingRect(instance);
        const name = getInstanceName(instance);
        const container = getContainerElement();
        container ? update$1({ bounds, name }) : create({ bounds, name });
      }
    }
  }
}
function selectComponentFn(e, cb) {
  e.preventDefault();
  e.stopPropagation();
  if (inspectInstance) {
    const uniqueComponentId = getUniqueComponentId(inspectInstance);
    cb(uniqueComponentId);
  }
}
var inspectComponentHighLighterSelectFn = null;
function cancelInspectComponentHighLighter() {
  unhighlight();
  window.removeEventListener("mouseover", inspectFn);
  window.removeEventListener("click", inspectComponentHighLighterSelectFn, true);
  inspectComponentHighLighterSelectFn = null;
}
function inspectComponentHighLighter() {
  window.addEventListener("mouseover", inspectFn);
  return new Promise((resolve2) => {
    function onSelect(e) {
      e.preventDefault();
      e.stopPropagation();
      selectComponentFn(e, (id) => {
        window.removeEventListener("click", onSelect, true);
        inspectComponentHighLighterSelectFn = null;
        window.removeEventListener("mouseover", inspectFn);
        const el = getContainerElement();
        if (el)
          el.style.display = "none";
        resolve2(JSON.stringify({ id }));
      });
    }
    inspectComponentHighLighterSelectFn = onSelect;
    window.addEventListener("click", onSelect, true);
  });
}
function scrollToComponent(options) {
  const instance = getComponentInstance(activeAppRecord.value, options.id);
  if (instance) {
    const [el] = getRootElementsFromComponentInstance(instance);
    if (typeof el.scrollIntoView === "function") {
      el.scrollIntoView({
        behavior: "smooth"
      });
    } else {
      const bounds = getComponentBoundingRect(instance);
      const scrollTarget = document.createElement("div");
      const styles = {
        ...getStyles(bounds),
        position: "absolute"
      };
      Object.assign(scrollTarget.style, styles);
      document.body.appendChild(scrollTarget);
      scrollTarget.scrollIntoView({
        behavior: "smooth"
      });
      setTimeout(() => {
        document.body.removeChild(scrollTarget);
      }, 2e3);
    }
    setTimeout(() => {
      const bounds = getComponentBoundingRect(instance);
      if (bounds.width || bounds.height) {
        const name = getInstanceName(instance);
        const el2 = getContainerElement();
        el2 ? update$1({ ...options, name, bounds }) : create({ ...options, name, bounds });
        setTimeout(() => {
          if (el2)
            el2.style.display = "none";
        }, 1500);
      }
    }, 1200);
  }
}
init_esm_shims();
var _a, _b;
(_b = (_a = target$1).__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__) != null ? _b : _a.__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__ = true;
function waitForInspectorInit(cb) {
  let total = 0;
  const timer = setInterval(() => {
    if (target$1.__VUE_INSPECTOR__) {
      clearInterval(timer);
      total += 30;
      cb();
    }
    if (total >= /* 5s */
    5e3)
      clearInterval(timer);
  }, 30);
}
function setupInspector() {
  const inspector = target$1.__VUE_INSPECTOR__;
  const _openInEditor = inspector.openInEditor;
  inspector.openInEditor = async (...params) => {
    inspector.disable();
    _openInEditor(...params);
  };
}
function getComponentInspector() {
  return new Promise((resolve2) => {
    function setup() {
      setupInspector();
      resolve2(target$1.__VUE_INSPECTOR__);
    }
    if (!target$1.__VUE_INSPECTOR__) {
      waitForInspectorInit(() => {
        setup();
      });
    } else {
      setup();
    }
  });
}
init_esm_shims();
init_esm_shims();
function isReadonly(value) {
  return !!(value && value[
    "__v_isReadonly"
    /* IS_READONLY */
  ]);
}
function isReactive(value) {
  if (isReadonly(value)) {
    return isReactive(value[
      "__v_raw"
      /* RAW */
    ]);
  }
  return !!(value && value[
    "__v_isReactive"
    /* IS_REACTIVE */
  ]);
}
function isRef(r) {
  return !!(r && r.__v_isRef === true);
}
function toRaw(observed) {
  const raw = observed && observed[
    "__v_raw"
    /* RAW */
  ];
  return raw ? toRaw(raw) : observed;
}
var StateEditor = class {
  constructor() {
    this.refEditor = new RefStateEditor();
  }
  set(object, path, value, cb) {
    const sections = Array.isArray(path) ? path : path.split(".");
    while (sections.length > 1) {
      const section = sections.shift();
      if (object instanceof Map)
        object = object.get(section);
      else if (object instanceof Set)
        object = Array.from(object.values())[section];
      else object = object[section];
      if (this.refEditor.isRef(object))
        object = this.refEditor.get(object);
    }
    const field = sections[0];
    const item = this.refEditor.get(object)[field];
    if (cb) {
      cb(object, field, value);
    } else {
      if (this.refEditor.isRef(item))
        this.refEditor.set(item, value);
      else object[field] = value;
    }
  }
  get(object, path) {
    const sections = Array.isArray(path) ? path : path.split(".");
    for (let i = 0; i < sections.length; i++) {
      if (object instanceof Map)
        object = object.get(sections[i]);
      else
        object = object[sections[i]];
      if (this.refEditor.isRef(object))
        object = this.refEditor.get(object);
      if (!object)
        return void 0;
    }
    return object;
  }
  has(object, path, parent = false) {
    if (typeof object === "undefined")
      return false;
    const sections = Array.isArray(path) ? path.slice() : path.split(".");
    const size2 = !parent ? 1 : 2;
    while (object && sections.length > size2) {
      const section = sections.shift();
      object = object[section];
      if (this.refEditor.isRef(object))
        object = this.refEditor.get(object);
    }
    return object != null && Object.prototype.hasOwnProperty.call(object, sections[0]);
  }
  createDefaultSetCallback(state) {
    return (object, field, value) => {
      if (state.remove || state.newKey) {
        if (Array.isArray(object))
          object.splice(field, 1);
        else if (toRaw(object) instanceof Map)
          object.delete(field);
        else if (toRaw(object) instanceof Set)
          object.delete(Array.from(object.values())[field]);
        else Reflect.deleteProperty(object, field);
      }
      if (!state.remove) {
        const target22 = object[state.newKey || field];
        if (this.refEditor.isRef(target22))
          this.refEditor.set(target22, value);
        else if (toRaw(object) instanceof Map)
          object.set(state.newKey || field, value);
        else if (toRaw(object) instanceof Set)
          object.add(value);
        else
          object[state.newKey || field] = value;
      }
    };
  }
};
var RefStateEditor = class {
  set(ref2, value) {
    if (isRef(ref2)) {
      ref2.value = value;
    } else {
      if (ref2 instanceof Set && Array.isArray(value)) {
        ref2.clear();
        value.forEach((v) => ref2.add(v));
        return;
      }
      const currentKeys = Object.keys(value);
      if (ref2 instanceof Map) {
        const previousKeysSet2 = new Set(ref2.keys());
        currentKeys.forEach((key) => {
          ref2.set(key, Reflect.get(value, key));
          previousKeysSet2.delete(key);
        });
        previousKeysSet2.forEach((key) => ref2.delete(key));
        return;
      }
      const previousKeysSet = new Set(Object.keys(ref2));
      currentKeys.forEach((key) => {
        Reflect.set(ref2, key, Reflect.get(value, key));
        previousKeysSet.delete(key);
      });
      previousKeysSet.forEach((key) => Reflect.deleteProperty(ref2, key));
    }
  }
  get(ref2) {
    return isRef(ref2) ? ref2.value : ref2;
  }
  isRef(ref2) {
    return isRef(ref2) || isReactive(ref2);
  }
};
init_esm_shims();
init_esm_shims();
init_esm_shims();
var TIMELINE_LAYERS_STATE_STORAGE_ID = "__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS_STATE__";
function getTimelineLayersStateFromStorage() {
  if (!isBrowser || typeof localStorage === "undefined" || localStorage === null) {
    return {
      recordingState: false,
      mouseEventEnabled: false,
      keyboardEventEnabled: false,
      componentEventEnabled: false,
      performanceEventEnabled: false,
      selected: ""
    };
  }
  const state = localStorage.getItem(TIMELINE_LAYERS_STATE_STORAGE_ID);
  return state ? JSON.parse(state) : {
    recordingState: false,
    mouseEventEnabled: false,
    keyboardEventEnabled: false,
    componentEventEnabled: false,
    performanceEventEnabled: false,
    selected: ""
  };
}
init_esm_shims();
init_esm_shims();
init_esm_shims();
var _a2, _b2;
(_b2 = (_a2 = target$1).__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS) != null ? _b2 : _a2.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS = [];
var devtoolsTimelineLayers = new Proxy(target$1.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS, {
  get(target22, prop, receiver) {
    return Reflect.get(target22, prop, receiver);
  }
});
function addTimelineLayer(options, descriptor) {
  devtoolsState.timelineLayersState[descriptor.id] = false;
  devtoolsTimelineLayers.push({
    ...options,
    descriptorId: descriptor.id,
    appRecord: getAppRecord(descriptor.app)
  });
}
var _a3, _b3;
(_b3 = (_a3 = target$1).__VUE_DEVTOOLS_KIT_INSPECTOR__) != null ? _b3 : _a3.__VUE_DEVTOOLS_KIT_INSPECTOR__ = [];
var devtoolsInspector = new Proxy(target$1.__VUE_DEVTOOLS_KIT_INSPECTOR__, {
  get(target22, prop, receiver) {
    return Reflect.get(target22, prop, receiver);
  }
});
var callInspectorUpdatedHook = debounce(() => {
  devtoolsContext.hooks.callHook("sendInspectorToClient", getActiveInspectors());
});
function addInspector(inspector, descriptor) {
  var _a25, _b25;
  devtoolsInspector.push({
    options: inspector,
    descriptor,
    treeFilterPlaceholder: (_a25 = inspector.treeFilterPlaceholder) != null ? _a25 : "Search tree...",
    stateFilterPlaceholder: (_b25 = inspector.stateFilterPlaceholder) != null ? _b25 : "Search state...",
    treeFilter: "",
    selectedNodeId: "",
    appRecord: getAppRecord(descriptor.app)
  });
  callInspectorUpdatedHook();
}
function getActiveInspectors() {
  return devtoolsInspector.filter((inspector) => inspector.descriptor.app === activeAppRecord.value.app).filter((inspector) => inspector.descriptor.id !== "components").map((inspector) => {
    var _a25;
    const descriptor = inspector.descriptor;
    const options = inspector.options;
    return {
      id: options.id,
      label: options.label,
      logo: descriptor.logo,
      icon: `custom-ic-baseline-${(_a25 = options == null ? void 0 : options.icon) == null ? void 0 : _a25.replace(/_/g, "-")}`,
      packageName: descriptor.packageName,
      homepage: descriptor.homepage,
      pluginId: descriptor.id
    };
  });
}
function getInspector(id, app2) {
  return devtoolsInspector.find((inspector) => inspector.options.id === id && (app2 ? inspector.descriptor.app === app2 : true));
}
function createDevToolsCtxHooks() {
  const hooks2 = createHooks();
  hooks2.hook("addInspector", ({ inspector, plugin }) => {
    addInspector(inspector, plugin.descriptor);
  });
  const debounceSendInspectorTree = debounce(async ({ inspectorId, plugin }) => {
    var _a25;
    if (!inspectorId || !((_a25 = plugin == null ? void 0 : plugin.descriptor) == null ? void 0 : _a25.app) || devtoolsState.highPerfModeEnabled)
      return;
    const inspector = getInspector(inspectorId, plugin.descriptor.app);
    const _payload = {
      app: plugin.descriptor.app,
      inspectorId,
      filter: (inspector == null ? void 0 : inspector.treeFilter) || "",
      rootNodes: []
    };
    await new Promise((resolve2) => {
      hooks2.callHookWith(
        async (callbacks) => {
          await Promise.all(callbacks.map((cb) => cb(_payload)));
          resolve2();
        },
        "getInspectorTree"
        /* GET_INSPECTOR_TREE */
      );
    });
    hooks2.callHookWith(
      async (callbacks) => {
        await Promise.all(callbacks.map((cb) => cb({
          inspectorId,
          rootNodes: _payload.rootNodes
        })));
      },
      "sendInspectorTreeToClient"
      /* SEND_INSPECTOR_TREE_TO_CLIENT */
    );
  }, 120);
  hooks2.hook("sendInspectorTree", debounceSendInspectorTree);
  const debounceSendInspectorState = debounce(async ({ inspectorId, plugin }) => {
    var _a25;
    if (!inspectorId || !((_a25 = plugin == null ? void 0 : plugin.descriptor) == null ? void 0 : _a25.app) || devtoolsState.highPerfModeEnabled)
      return;
    const inspector = getInspector(inspectorId, plugin.descriptor.app);
    const _payload = {
      app: plugin.descriptor.app,
      inspectorId,
      nodeId: (inspector == null ? void 0 : inspector.selectedNodeId) || "",
      state: null
    };
    const ctx = {
      currentTab: `custom-inspector:${inspectorId}`
    };
    if (_payload.nodeId) {
      await new Promise((resolve2) => {
        hooks2.callHookWith(
          async (callbacks) => {
            await Promise.all(callbacks.map((cb) => cb(_payload, ctx)));
            resolve2();
          },
          "getInspectorState"
          /* GET_INSPECTOR_STATE */
        );
      });
    }
    hooks2.callHookWith(
      async (callbacks) => {
        await Promise.all(callbacks.map((cb) => cb({
          inspectorId,
          nodeId: _payload.nodeId,
          state: _payload.state
        })));
      },
      "sendInspectorStateToClient"
      /* SEND_INSPECTOR_STATE_TO_CLIENT */
    );
  }, 120);
  hooks2.hook("sendInspectorState", debounceSendInspectorState);
  hooks2.hook("customInspectorSelectNode", ({ inspectorId, nodeId, plugin }) => {
    const inspector = getInspector(inspectorId, plugin.descriptor.app);
    if (!inspector)
      return;
    inspector.selectedNodeId = nodeId;
  });
  hooks2.hook("timelineLayerAdded", ({ options, plugin }) => {
    addTimelineLayer(options, plugin.descriptor);
  });
  hooks2.hook("timelineEventAdded", ({ options, plugin }) => {
    var _a25;
    const internalLayerIds = ["performance", "component-event", "keyboard", "mouse"];
    if (devtoolsState.highPerfModeEnabled || !((_a25 = devtoolsState.timelineLayersState) == null ? void 0 : _a25[plugin.descriptor.id]) && !internalLayerIds.includes(options.layerId))
      return;
    hooks2.callHookWith(
      async (callbacks) => {
        await Promise.all(callbacks.map((cb) => cb(options)));
      },
      "sendTimelineEventToClient"
      /* SEND_TIMELINE_EVENT_TO_CLIENT */
    );
  });
  hooks2.hook("getComponentInstances", async ({ app: app2 }) => {
    const appRecord = app2.__VUE_DEVTOOLS_NEXT_APP_RECORD__;
    if (!appRecord)
      return null;
    const appId = appRecord.id.toString();
    const instances = [...appRecord.instanceMap].filter(([key]) => key.split(":")[0] === appId).map(([, instance]) => instance);
    return instances;
  });
  hooks2.hook("getComponentBounds", async ({ instance }) => {
    const bounds = getComponentBoundingRect(instance);
    return bounds;
  });
  hooks2.hook("getComponentName", ({ instance }) => {
    const name = getInstanceName(instance);
    return name;
  });
  hooks2.hook("componentHighlight", ({ uid: uid2 }) => {
    const instance = activeAppRecord.value.instanceMap.get(uid2);
    if (instance) {
      highlight(instance);
    }
  });
  hooks2.hook("componentUnhighlight", () => {
    unhighlight();
  });
  return hooks2;
}
var _a4, _b4;
(_b4 = (_a4 = target$1).__VUE_DEVTOOLS_KIT_APP_RECORDS__) != null ? _b4 : _a4.__VUE_DEVTOOLS_KIT_APP_RECORDS__ = [];
var _a5, _b5;
(_b5 = (_a5 = target$1).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__) != null ? _b5 : _a5.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__ = {};
var _a6, _b6;
(_b6 = (_a6 = target$1).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__) != null ? _b6 : _a6.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__ = "";
var _a7, _b7;
(_b7 = (_a7 = target$1).__VUE_DEVTOOLS_KIT_CUSTOM_TABS__) != null ? _b7 : _a7.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__ = [];
var _a8, _b8;
(_b8 = (_a8 = target$1).__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__) != null ? _b8 : _a8.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__ = [];
var STATE_KEY = "__VUE_DEVTOOLS_KIT_GLOBAL_STATE__";
function initStateFactory() {
  return {
    connected: false,
    clientConnected: false,
    vitePluginDetected: true,
    appRecords: [],
    activeAppRecordId: "",
    tabs: [],
    commands: [],
    highPerfModeEnabled: true,
    devtoolsClientDetected: {},
    perfUniqueGroupId: 0,
    timelineLayersState: getTimelineLayersStateFromStorage()
  };
}
var _a9, _b9;
(_b9 = (_a9 = target$1)[STATE_KEY]) != null ? _b9 : _a9[STATE_KEY] = initStateFactory();
var callStateUpdatedHook = debounce((state) => {
  devtoolsContext.hooks.callHook("devtoolsStateUpdated", { state });
});
debounce((state, oldState) => {
  devtoolsContext.hooks.callHook("devtoolsConnectedUpdated", { state, oldState });
});
var devtoolsAppRecords = new Proxy(target$1.__VUE_DEVTOOLS_KIT_APP_RECORDS__, {
  get(_target, prop, receiver) {
    if (prop === "value")
      return target$1.__VUE_DEVTOOLS_KIT_APP_RECORDS__;
    return target$1.__VUE_DEVTOOLS_KIT_APP_RECORDS__[prop];
  }
});
var activeAppRecord = new Proxy(target$1.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__, {
  get(_target, prop, receiver) {
    if (prop === "value")
      return target$1.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__;
    else if (prop === "id")
      return target$1.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__;
    return target$1.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__[prop];
  }
});
function updateAllStates() {
  callStateUpdatedHook({
    ...target$1[STATE_KEY],
    appRecords: devtoolsAppRecords.value,
    activeAppRecordId: activeAppRecord.id,
    tabs: target$1.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__,
    commands: target$1.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__
  });
}
function setActiveAppRecord(app2) {
  target$1.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__ = app2;
  updateAllStates();
}
function setActiveAppRecordId(id) {
  target$1.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__ = id;
  updateAllStates();
}
var devtoolsState = new Proxy(target$1[STATE_KEY], {
  get(target22, property) {
    if (property === "appRecords") {
      return devtoolsAppRecords;
    } else if (property === "activeAppRecordId") {
      return activeAppRecord.id;
    } else if (property === "tabs") {
      return target$1.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__;
    } else if (property === "commands") {
      return target$1.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__;
    }
    return target$1[STATE_KEY][property];
  },
  deleteProperty(target22, property) {
    delete target22[property];
    return true;
  },
  set(target22, property, value) {
    ({ ...target$1[STATE_KEY] });
    target22[property] = value;
    target$1[STATE_KEY][property] = value;
    return true;
  }
});
function openInEditor(options = {}) {
  var _a25, _b25, _c;
  const { file, host, baseUrl = window.location.origin, line = 0, column = 0 } = options;
  if (file) {
    if (host === "chrome-extension") {
      const fileName = file.replace(/\\/g, "\\\\");
      const _baseUrl = (_b25 = (_a25 = window.VUE_DEVTOOLS_CONFIG) == null ? void 0 : _a25.openInEditorHost) != null ? _b25 : "/";
      fetch(`${_baseUrl}__open-in-editor?file=${encodeURI(file)}`).then((response) => {
        if (!response.ok) {
          const msg = `Opening component ${fileName} failed`;
          console.log(`%c${msg}`, "color:red");
        }
      });
    } else if (devtoolsState.vitePluginDetected) {
      const _baseUrl = (_c = target$1.__VUE_DEVTOOLS_OPEN_IN_EDITOR_BASE_URL__) != null ? _c : baseUrl;
      target$1.__VUE_INSPECTOR__.openInEditor(_baseUrl, file, line, column);
    }
  }
}
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
var _a10, _b10;
(_b10 = (_a10 = target$1).__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__) != null ? _b10 : _a10.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__ = [];
var devtoolsPluginBuffer = new Proxy(target$1.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__, {
  get(target22, prop, receiver) {
    return Reflect.get(target22, prop, receiver);
  }
});
function _getSettings(settings) {
  const _settings = {};
  Object.keys(settings).forEach((key) => {
    _settings[key] = settings[key].defaultValue;
  });
  return _settings;
}
function getPluginLocalKey(pluginId) {
  return `__VUE_DEVTOOLS_NEXT_PLUGIN_SETTINGS__${pluginId}__`;
}
function getPluginSettingsOptions(pluginId) {
  var _a25, _b25, _c;
  const item = (_b25 = (_a25 = devtoolsPluginBuffer.find((item2) => {
    var _a26;
    return item2[0].id === pluginId && !!((_a26 = item2[0]) == null ? void 0 : _a26.settings);
  })) == null ? void 0 : _a25[0]) != null ? _b25 : null;
  return (_c = item == null ? void 0 : item.settings) != null ? _c : null;
}
function getPluginSettings(pluginId, fallbackValue) {
  var _a25, _b25, _c;
  const localKey = getPluginLocalKey(pluginId);
  if (localKey) {
    const localSettings = localStorage.getItem(localKey);
    if (localSettings) {
      return JSON.parse(localSettings);
    }
  }
  if (pluginId) {
    const item = (_b25 = (_a25 = devtoolsPluginBuffer.find((item2) => item2[0].id === pluginId)) == null ? void 0 : _a25[0]) != null ? _b25 : null;
    return _getSettings((_c = item == null ? void 0 : item.settings) != null ? _c : {});
  }
  return _getSettings(fallbackValue);
}
function initPluginSettings(pluginId, settings) {
  const localKey = getPluginLocalKey(pluginId);
  const localSettings = localStorage.getItem(localKey);
  if (!localSettings) {
    localStorage.setItem(localKey, JSON.stringify(_getSettings(settings)));
  }
}
function setPluginSettings(pluginId, key, value) {
  const localKey = getPluginLocalKey(pluginId);
  const localSettings = localStorage.getItem(localKey);
  const parsedLocalSettings = JSON.parse(localSettings || "{}");
  const updated = {
    ...parsedLocalSettings,
    [key]: value
  };
  localStorage.setItem(localKey, JSON.stringify(updated));
  devtoolsContext.hooks.callHookWith(
    (callbacks) => {
      callbacks.forEach((cb) => cb({
        pluginId,
        key,
        oldValue: parsedLocalSettings[key],
        newValue: value,
        settings: updated
      }));
    },
    "setPluginSettings"
    /* SET_PLUGIN_SETTINGS */
  );
}
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
var _a11, _b11;
var devtoolsHooks = (_b11 = (_a11 = target$1).__VUE_DEVTOOLS_HOOK) != null ? _b11 : _a11.__VUE_DEVTOOLS_HOOK = createHooks();
var on = {
  vueAppInit(fn) {
    devtoolsHooks.hook("app:init", fn);
  },
  vueAppUnmount(fn) {
    devtoolsHooks.hook("app:unmount", fn);
  },
  vueAppConnected(fn) {
    devtoolsHooks.hook("app:connected", fn);
  },
  componentAdded(fn) {
    return devtoolsHooks.hook("component:added", fn);
  },
  componentEmit(fn) {
    return devtoolsHooks.hook("component:emit", fn);
  },
  componentUpdated(fn) {
    return devtoolsHooks.hook("component:updated", fn);
  },
  componentRemoved(fn) {
    return devtoolsHooks.hook("component:removed", fn);
  },
  setupDevtoolsPlugin(fn) {
    devtoolsHooks.hook("devtools-plugin:setup", fn);
  },
  perfStart(fn) {
    return devtoolsHooks.hook("perf:start", fn);
  },
  perfEnd(fn) {
    return devtoolsHooks.hook("perf:end", fn);
  }
};
var hook = {
  on,
  setupDevToolsPlugin(pluginDescriptor, setupFn) {
    return devtoolsHooks.callHook("devtools-plugin:setup", pluginDescriptor, setupFn);
  }
};
var DevToolsV6PluginAPI = class {
  constructor({ plugin, ctx }) {
    this.hooks = ctx.hooks;
    this.plugin = plugin;
  }
  get on() {
    return {
      // component inspector
      visitComponentTree: (handler) => {
        this.hooks.hook("visitComponentTree", handler);
      },
      inspectComponent: (handler) => {
        this.hooks.hook("inspectComponent", handler);
      },
      editComponentState: (handler) => {
        this.hooks.hook("editComponentState", handler);
      },
      // custom inspector
      getInspectorTree: (handler) => {
        this.hooks.hook("getInspectorTree", handler);
      },
      getInspectorState: (handler) => {
        this.hooks.hook("getInspectorState", handler);
      },
      editInspectorState: (handler) => {
        this.hooks.hook("editInspectorState", handler);
      },
      // timeline
      inspectTimelineEvent: (handler) => {
        this.hooks.hook("inspectTimelineEvent", handler);
      },
      timelineCleared: (handler) => {
        this.hooks.hook("timelineCleared", handler);
      },
      // settings
      setPluginSettings: (handler) => {
        this.hooks.hook("setPluginSettings", handler);
      }
    };
  }
  // component inspector
  notifyComponentUpdate(instance) {
    var _a25;
    if (devtoolsState.highPerfModeEnabled) {
      return;
    }
    const inspector = getActiveInspectors().find((i) => i.packageName === this.plugin.descriptor.packageName);
    if (inspector == null ? void 0 : inspector.id) {
      if (instance) {
        const args = [
          instance.appContext.app,
          instance.uid,
          (_a25 = instance.parent) == null ? void 0 : _a25.uid,
          instance
        ];
        devtoolsHooks.callHook("component:updated", ...args);
      } else {
        devtoolsHooks.callHook(
          "component:updated"
          /* COMPONENT_UPDATED */
        );
      }
      this.hooks.callHook("sendInspectorState", { inspectorId: inspector.id, plugin: this.plugin });
    }
  }
  // custom inspector
  addInspector(options) {
    this.hooks.callHook("addInspector", { inspector: options, plugin: this.plugin });
    if (this.plugin.descriptor.settings) {
      initPluginSettings(options.id, this.plugin.descriptor.settings);
    }
  }
  sendInspectorTree(inspectorId) {
    if (devtoolsState.highPerfModeEnabled) {
      return;
    }
    this.hooks.callHook("sendInspectorTree", { inspectorId, plugin: this.plugin });
  }
  sendInspectorState(inspectorId) {
    if (devtoolsState.highPerfModeEnabled) {
      return;
    }
    this.hooks.callHook("sendInspectorState", { inspectorId, plugin: this.plugin });
  }
  selectInspectorNode(inspectorId, nodeId) {
    this.hooks.callHook("customInspectorSelectNode", { inspectorId, nodeId, plugin: this.plugin });
  }
  visitComponentTree(payload) {
    return this.hooks.callHook("visitComponentTree", payload);
  }
  // timeline
  now() {
    if (devtoolsState.highPerfModeEnabled) {
      return 0;
    }
    return Date.now();
  }
  addTimelineLayer(options) {
    this.hooks.callHook("timelineLayerAdded", { options, plugin: this.plugin });
  }
  addTimelineEvent(options) {
    if (devtoolsState.highPerfModeEnabled) {
      return;
    }
    this.hooks.callHook("timelineEventAdded", { options, plugin: this.plugin });
  }
  // settings
  getSettings(pluginId) {
    return getPluginSettings(pluginId != null ? pluginId : this.plugin.descriptor.id, this.plugin.descriptor.settings);
  }
  // utilities
  getComponentInstances(app2) {
    return this.hooks.callHook("getComponentInstances", { app: app2 });
  }
  getComponentBounds(instance) {
    return this.hooks.callHook("getComponentBounds", { instance });
  }
  getComponentName(instance) {
    return this.hooks.callHook("getComponentName", { instance });
  }
  highlightElement(instance) {
    const uid2 = instance.__VUE_DEVTOOLS_NEXT_UID__;
    return this.hooks.callHook("componentHighlight", { uid: uid2 });
  }
  unhighlightElement() {
    return this.hooks.callHook(
      "componentUnhighlight"
      /* COMPONENT_UNHIGHLIGHT */
    );
  }
};
var DevToolsPluginAPI = DevToolsV6PluginAPI;
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
var UNDEFINED = "__vue_devtool_undefined__";
var INFINITY = "__vue_devtool_infinity__";
var NEGATIVE_INFINITY = "__vue_devtool_negative_infinity__";
var NAN = "__vue_devtool_nan__";
init_esm_shims();
init_esm_shims();
var tokenMap = {
  [UNDEFINED]: "undefined",
  [NAN]: "NaN",
  [INFINITY]: "Infinity",
  [NEGATIVE_INFINITY]: "-Infinity"
};
Object.entries(tokenMap).reduce((acc, [key, value]) => {
  acc[value] = key;
  return acc;
}, {});
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
var _a12, _b12;
(_b12 = (_a12 = target$1).__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__) != null ? _b12 : _a12.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__ = /* @__PURE__ */ new Set();
function setupDevToolsPlugin(pluginDescriptor, setupFn) {
  return hook.setupDevToolsPlugin(pluginDescriptor, setupFn);
}
function callDevToolsPluginSetupFn(plugin, app2) {
  const [pluginDescriptor, setupFn] = plugin;
  if (pluginDescriptor.app !== app2)
    return;
  const api = new DevToolsPluginAPI({
    plugin: {
      setupFn,
      descriptor: pluginDescriptor
    },
    ctx: devtoolsContext
  });
  if (pluginDescriptor.packageName === "vuex") {
    api.on.editInspectorState((payload) => {
      api.sendInspectorState(payload.inspectorId);
    });
  }
  setupFn(api);
}
function registerDevToolsPlugin(app2, options) {
  if (target$1.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.has(app2)) {
    return;
  }
  if (devtoolsState.highPerfModeEnabled && !(options == null ? void 0 : options.inspectingComponent)) {
    return;
  }
  target$1.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.add(app2);
  devtoolsPluginBuffer.forEach((plugin) => {
    callDevToolsPluginSetupFn(plugin, app2);
  });
}
init_esm_shims();
init_esm_shims();
var ROUTER_KEY = "__VUE_DEVTOOLS_ROUTER__";
var ROUTER_INFO_KEY = "__VUE_DEVTOOLS_ROUTER_INFO__";
var _a13, _b13;
(_b13 = (_a13 = target$1)[ROUTER_INFO_KEY]) != null ? _b13 : _a13[ROUTER_INFO_KEY] = {
  currentRoute: null,
  routes: []
};
var _a14, _b14;
(_b14 = (_a14 = target$1)[ROUTER_KEY]) != null ? _b14 : _a14[ROUTER_KEY] = {};
new Proxy(target$1[ROUTER_INFO_KEY], {
  get(target22, property) {
    return target$1[ROUTER_INFO_KEY][property];
  }
});
new Proxy(target$1[ROUTER_KEY], {
  get(target22, property) {
    if (property === "value") {
      return target$1[ROUTER_KEY];
    }
  }
});
function getRoutes(router) {
  const routesMap = /* @__PURE__ */ new Map();
  return ((router == null ? void 0 : router.getRoutes()) || []).filter((i) => !routesMap.has(i.path) && routesMap.set(i.path, 1));
}
function filterRoutes(routes2) {
  return routes2.map((item) => {
    let { path, name, children, meta } = item;
    if (children == null ? void 0 : children.length)
      children = filterRoutes(children);
    return {
      path,
      name,
      children,
      meta
    };
  });
}
function filterCurrentRoute(route) {
  if (route) {
    const { fullPath, hash, href: href2, path, name, matched, params, query } = route;
    return {
      fullPath,
      hash,
      href: href2,
      path,
      name,
      params,
      query,
      matched: filterRoutes(matched)
    };
  }
  return route;
}
function normalizeRouterInfo(appRecord, activeAppRecord2) {
  function init() {
    var _a25;
    const router = (_a25 = appRecord.app) == null ? void 0 : _a25.config.globalProperties.$router;
    const currentRoute = filterCurrentRoute(router == null ? void 0 : router.currentRoute.value);
    const routes2 = filterRoutes(getRoutes(router));
    const c = console.warn;
    console.warn = () => {
    };
    target$1[ROUTER_INFO_KEY] = {
      currentRoute: currentRoute ? deepClone(currentRoute) : {},
      routes: deepClone(routes2)
    };
    target$1[ROUTER_KEY] = router;
    console.warn = c;
  }
  init();
  hook.on.componentUpdated(debounce(() => {
    var _a25;
    if (((_a25 = activeAppRecord2.value) == null ? void 0 : _a25.app) !== appRecord.app)
      return;
    init();
    if (devtoolsState.highPerfModeEnabled)
      return;
    devtoolsContext.hooks.callHook("routerInfoUpdated", { state: target$1[ROUTER_INFO_KEY] });
  }, 200));
}
function createDevToolsApi(hooks2) {
  return {
    // get inspector tree
    async getInspectorTree(payload) {
      const _payload = {
        ...payload,
        app: activeAppRecord.value.app,
        rootNodes: []
      };
      await new Promise((resolve2) => {
        hooks2.callHookWith(
          async (callbacks) => {
            await Promise.all(callbacks.map((cb) => cb(_payload)));
            resolve2();
          },
          "getInspectorTree"
          /* GET_INSPECTOR_TREE */
        );
      });
      return _payload.rootNodes;
    },
    // get inspector state
    async getInspectorState(payload) {
      const _payload = {
        ...payload,
        app: activeAppRecord.value.app,
        state: null
      };
      const ctx = {
        currentTab: `custom-inspector:${payload.inspectorId}`
      };
      await new Promise((resolve2) => {
        hooks2.callHookWith(
          async (callbacks) => {
            await Promise.all(callbacks.map((cb) => cb(_payload, ctx)));
            resolve2();
          },
          "getInspectorState"
          /* GET_INSPECTOR_STATE */
        );
      });
      return _payload.state;
    },
    // edit inspector state
    editInspectorState(payload) {
      const stateEditor2 = new StateEditor();
      const _payload = {
        ...payload,
        app: activeAppRecord.value.app,
        set: (obj, path = payload.path, value = payload.state.value, cb) => {
          stateEditor2.set(obj, path, value, cb || stateEditor2.createDefaultSetCallback(payload.state));
        }
      };
      hooks2.callHookWith(
        (callbacks) => {
          callbacks.forEach((cb) => cb(_payload));
        },
        "editInspectorState"
        /* EDIT_INSPECTOR_STATE */
      );
    },
    // send inspector state
    sendInspectorState(inspectorId) {
      const inspector = getInspector(inspectorId);
      hooks2.callHook("sendInspectorState", { inspectorId, plugin: {
        descriptor: inspector.descriptor,
        setupFn: () => ({})
      } });
    },
    // inspect component inspector
    inspectComponentInspector() {
      return inspectComponentHighLighter();
    },
    // cancel inspect component inspector
    cancelInspectComponentInspector() {
      return cancelInspectComponentHighLighter();
    },
    // get component render code
    getComponentRenderCode(id) {
      const instance = getComponentInstance(activeAppRecord.value, id);
      if (instance)
        return !(typeof (instance == null ? void 0 : instance.type) === "function") ? instance.render.toString() : instance.type.toString();
    },
    // scroll to component
    scrollToComponent(id) {
      return scrollToComponent({ id });
    },
    // open in editor
    openInEditor,
    // get vue inspector
    getVueInspector: getComponentInspector,
    // toggle app
    toggleApp(id, options) {
      const appRecord = devtoolsAppRecords.value.find((record) => record.id === id);
      if (appRecord) {
        setActiveAppRecordId(id);
        setActiveAppRecord(appRecord);
        normalizeRouterInfo(appRecord, activeAppRecord);
        callInspectorUpdatedHook();
        registerDevToolsPlugin(appRecord.app, options);
      }
    },
    // inspect dom
    inspectDOM(instanceId) {
      const instance = getComponentInstance(activeAppRecord.value, instanceId);
      if (instance) {
        const [el] = getRootElementsFromComponentInstance(instance);
        if (el) {
          target$1.__VUE_DEVTOOLS_INSPECT_DOM_TARGET__ = el;
        }
      }
    },
    updatePluginSettings(pluginId, key, value) {
      setPluginSettings(pluginId, key, value);
    },
    getPluginSettings(pluginId) {
      return {
        options: getPluginSettingsOptions(pluginId),
        values: getPluginSettings(pluginId)
      };
    }
  };
}
init_esm_shims();
var _a15, _b15;
(_b15 = (_a15 = target$1).__VUE_DEVTOOLS_ENV__) != null ? _b15 : _a15.__VUE_DEVTOOLS_ENV__ = {
  vitePluginDetected: false
};
var hooks = createDevToolsCtxHooks();
var _a16, _b16;
(_b16 = (_a16 = target$1).__VUE_DEVTOOLS_KIT_CONTEXT__) != null ? _b16 : _a16.__VUE_DEVTOOLS_KIT_CONTEXT__ = {
  hooks,
  get state() {
    return {
      ...devtoolsState,
      activeAppRecordId: activeAppRecord.id,
      activeAppRecord: activeAppRecord.value,
      appRecords: devtoolsAppRecords.value
    };
  },
  api: createDevToolsApi(hooks)
};
var devtoolsContext = target$1.__VUE_DEVTOOLS_KIT_CONTEXT__;
init_esm_shims();
__toESM(require_speakingurl2());
var _a17, _b17;
(_b17 = (_a17 = target$1).__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__) != null ? _b17 : _a17.__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__ = {
  id: 0,
  appIds: /* @__PURE__ */ new Set()
};
init_esm_shims();
function toggleHighPerfMode(state) {
  devtoolsState.highPerfModeEnabled = state != null ? state : !devtoolsState.highPerfModeEnabled;
  if (!state && activeAppRecord.value) {
    registerDevToolsPlugin(activeAppRecord.value.app);
  }
}
init_esm_shims();
init_esm_shims();
init_esm_shims();
function updateDevToolsClientDetected(params) {
  devtoolsState.devtoolsClientDetected = {
    ...devtoolsState.devtoolsClientDetected,
    ...params
  };
  const devtoolsClientVisible = Object.values(devtoolsState.devtoolsClientDetected).some(Boolean);
  toggleHighPerfMode(!devtoolsClientVisible);
}
var _a18, _b18;
(_b18 = (_a18 = target$1).__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__) != null ? _b18 : _a18.__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__ = updateDevToolsClientDetected;
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
var DoubleIndexedKV = class {
  constructor() {
    this.keyToValue = /* @__PURE__ */ new Map();
    this.valueToKey = /* @__PURE__ */ new Map();
  }
  set(key, value) {
    this.keyToValue.set(key, value);
    this.valueToKey.set(value, key);
  }
  getByKey(key) {
    return this.keyToValue.get(key);
  }
  getByValue(value) {
    return this.valueToKey.get(value);
  }
  clear() {
    this.keyToValue.clear();
    this.valueToKey.clear();
  }
};
var Registry = class {
  constructor(generateIdentifier) {
    this.generateIdentifier = generateIdentifier;
    this.kv = new DoubleIndexedKV();
  }
  register(value, identifier) {
    if (this.kv.getByValue(value)) {
      return;
    }
    if (!identifier) {
      identifier = this.generateIdentifier(value);
    }
    this.kv.set(identifier, value);
  }
  clear() {
    this.kv.clear();
  }
  getIdentifier(value) {
    return this.kv.getByValue(value);
  }
  getValue(identifier) {
    return this.kv.getByKey(identifier);
  }
};
var ClassRegistry = class extends Registry {
  constructor() {
    super((c) => c.name);
    this.classToAllowedProps = /* @__PURE__ */ new Map();
  }
  register(value, options) {
    if (typeof options === "object") {
      if (options.allowProps) {
        this.classToAllowedProps.set(value, options.allowProps);
      }
      super.register(value, options.identifier);
    } else {
      super.register(value, options);
    }
  }
  getAllowedProps(value) {
    return this.classToAllowedProps.get(value);
  }
};
init_esm_shims();
init_esm_shims();
function valuesOfObj(record) {
  if ("values" in Object) {
    return Object.values(record);
  }
  const values = [];
  for (const key in record) {
    if (record.hasOwnProperty(key)) {
      values.push(record[key]);
    }
  }
  return values;
}
function find(record, predicate) {
  const values = valuesOfObj(record);
  if ("find" in values) {
    return values.find(predicate);
  }
  const valuesNotNever = values;
  for (let i = 0; i < valuesNotNever.length; i++) {
    const value = valuesNotNever[i];
    if (predicate(value)) {
      return value;
    }
  }
  return void 0;
}
function forEach(record, run) {
  Object.entries(record).forEach(([key, value]) => run(value, key));
}
function includes(arr, value) {
  return arr.indexOf(value) !== -1;
}
function findArr(record, predicate) {
  for (let i = 0; i < record.length; i++) {
    const value = record[i];
    if (predicate(value)) {
      return value;
    }
  }
  return void 0;
}
var CustomTransformerRegistry = class {
  constructor() {
    this.transfomers = {};
  }
  register(transformer) {
    this.transfomers[transformer.name] = transformer;
  }
  findApplicable(v) {
    return find(this.transfomers, (transformer) => transformer.isApplicable(v));
  }
  findByName(name) {
    return this.transfomers[name];
  }
};
init_esm_shims();
init_esm_shims();
var getType = (payload) => Object.prototype.toString.call(payload).slice(8, -1);
var isUndefined = (payload) => typeof payload === "undefined";
var isNull = (payload) => payload === null;
var isPlainObject2 = (payload) => {
  if (typeof payload !== "object" || payload === null)
    return false;
  if (payload === Object.prototype)
    return false;
  if (Object.getPrototypeOf(payload) === null)
    return true;
  return Object.getPrototypeOf(payload) === Object.prototype;
};
var isEmptyObject = (payload) => isPlainObject2(payload) && Object.keys(payload).length === 0;
var isArray = (payload) => Array.isArray(payload);
var isString = (payload) => typeof payload === "string";
var isNumber = (payload) => typeof payload === "number" && !isNaN(payload);
var isBoolean = (payload) => typeof payload === "boolean";
var isRegExp = (payload) => payload instanceof RegExp;
var isMap = (payload) => payload instanceof Map;
var isSet = (payload) => payload instanceof Set;
var isSymbol = (payload) => getType(payload) === "Symbol";
var isDate = (payload) => payload instanceof Date && !isNaN(payload.valueOf());
var isError = (payload) => payload instanceof Error;
var isNaNValue = (payload) => typeof payload === "number" && isNaN(payload);
var isPrimitive2 = (payload) => isBoolean(payload) || isNull(payload) || isUndefined(payload) || isNumber(payload) || isString(payload) || isSymbol(payload);
var isBigint = (payload) => typeof payload === "bigint";
var isInfinite = (payload) => payload === Infinity || payload === -Infinity;
var isTypedArray = (payload) => ArrayBuffer.isView(payload) && !(payload instanceof DataView);
var isURL = (payload) => payload instanceof URL;
init_esm_shims();
var escapeKey = (key) => key.replace(/\./g, "\\.");
var stringifyPath = (path) => path.map(String).map(escapeKey).join(".");
var parsePath = (string) => {
  const result = [];
  let segment = "";
  for (let i = 0; i < string.length; i++) {
    let char = string.charAt(i);
    const isEscapedDot = char === "\\" && string.charAt(i + 1) === ".";
    if (isEscapedDot) {
      segment += ".";
      i++;
      continue;
    }
    const isEndOfSegment = char === ".";
    if (isEndOfSegment) {
      result.push(segment);
      segment = "";
      continue;
    }
    segment += char;
  }
  const lastSegment = segment;
  result.push(lastSegment);
  return result;
};
init_esm_shims();
function simpleTransformation(isApplicable, annotation, transform, untransform) {
  return {
    isApplicable,
    annotation,
    transform,
    untransform
  };
}
var simpleRules = [
  simpleTransformation(isUndefined, "undefined", () => null, () => void 0),
  simpleTransformation(isBigint, "bigint", (v) => v.toString(), (v) => {
    if (typeof BigInt !== "undefined") {
      return BigInt(v);
    }
    console.error("Please add a BigInt polyfill.");
    return v;
  }),
  simpleTransformation(isDate, "Date", (v) => v.toISOString(), (v) => new Date(v)),
  simpleTransformation(isError, "Error", (v, superJson) => {
    const baseError = {
      name: v.name,
      message: v.message
    };
    superJson.allowedErrorProps.forEach((prop) => {
      baseError[prop] = v[prop];
    });
    return baseError;
  }, (v, superJson) => {
    const e = new Error(v.message);
    e.name = v.name;
    e.stack = v.stack;
    superJson.allowedErrorProps.forEach((prop) => {
      e[prop] = v[prop];
    });
    return e;
  }),
  simpleTransformation(isRegExp, "regexp", (v) => "" + v, (regex) => {
    const body = regex.slice(1, regex.lastIndexOf("/"));
    const flags = regex.slice(regex.lastIndexOf("/") + 1);
    return new RegExp(body, flags);
  }),
  simpleTransformation(
    isSet,
    "set",
    // (sets only exist in es6+)
    // eslint-disable-next-line es5/no-es6-methods
    (v) => [...v.values()],
    (v) => new Set(v)
  ),
  simpleTransformation(isMap, "map", (v) => [...v.entries()], (v) => new Map(v)),
  simpleTransformation((v) => isNaNValue(v) || isInfinite(v), "number", (v) => {
    if (isNaNValue(v)) {
      return "NaN";
    }
    if (v > 0) {
      return "Infinity";
    } else {
      return "-Infinity";
    }
  }, Number),
  simpleTransformation((v) => v === 0 && 1 / v === -Infinity, "number", () => {
    return "-0";
  }, Number),
  simpleTransformation(isURL, "URL", (v) => v.toString(), (v) => new URL(v))
];
function compositeTransformation(isApplicable, annotation, transform, untransform) {
  return {
    isApplicable,
    annotation,
    transform,
    untransform
  };
}
var symbolRule = compositeTransformation((s, superJson) => {
  if (isSymbol(s)) {
    const isRegistered = !!superJson.symbolRegistry.getIdentifier(s);
    return isRegistered;
  }
  return false;
}, (s, superJson) => {
  const identifier = superJson.symbolRegistry.getIdentifier(s);
  return ["symbol", identifier];
}, (v) => v.description, (_, a, superJson) => {
  const value = superJson.symbolRegistry.getValue(a[1]);
  if (!value) {
    throw new Error("Trying to deserialize unknown symbol");
  }
  return value;
});
var constructorToName = [
  Int8Array,
  Uint8Array,
  Int16Array,
  Uint16Array,
  Int32Array,
  Uint32Array,
  Float32Array,
  Float64Array,
  Uint8ClampedArray
].reduce((obj, ctor) => {
  obj[ctor.name] = ctor;
  return obj;
}, {});
var typedArrayRule = compositeTransformation(isTypedArray, (v) => ["typed-array", v.constructor.name], (v) => [...v], (v, a) => {
  const ctor = constructorToName[a[1]];
  if (!ctor) {
    throw new Error("Trying to deserialize unknown typed array");
  }
  return new ctor(v);
});
function isInstanceOfRegisteredClass(potentialClass, superJson) {
  if (potentialClass == null ? void 0 : potentialClass.constructor) {
    const isRegistered = !!superJson.classRegistry.getIdentifier(potentialClass.constructor);
    return isRegistered;
  }
  return false;
}
var classRule = compositeTransformation(isInstanceOfRegisteredClass, (clazz, superJson) => {
  const identifier = superJson.classRegistry.getIdentifier(clazz.constructor);
  return ["class", identifier];
}, (clazz, superJson) => {
  const allowedProps = superJson.classRegistry.getAllowedProps(clazz.constructor);
  if (!allowedProps) {
    return { ...clazz };
  }
  const result = {};
  allowedProps.forEach((prop) => {
    result[prop] = clazz[prop];
  });
  return result;
}, (v, a, superJson) => {
  const clazz = superJson.classRegistry.getValue(a[1]);
  if (!clazz) {
    throw new Error(`Trying to deserialize unknown class '${a[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);
  }
  return Object.assign(Object.create(clazz.prototype), v);
});
var customRule = compositeTransformation((value, superJson) => {
  return !!superJson.customTransformerRegistry.findApplicable(value);
}, (value, superJson) => {
  const transformer = superJson.customTransformerRegistry.findApplicable(value);
  return ["custom", transformer.name];
}, (value, superJson) => {
  const transformer = superJson.customTransformerRegistry.findApplicable(value);
  return transformer.serialize(value);
}, (v, a, superJson) => {
  const transformer = superJson.customTransformerRegistry.findByName(a[1]);
  if (!transformer) {
    throw new Error("Trying to deserialize unknown custom value");
  }
  return transformer.deserialize(v);
});
var compositeRules = [classRule, symbolRule, customRule, typedArrayRule];
var transformValue = (value, superJson) => {
  const applicableCompositeRule = findArr(compositeRules, (rule) => rule.isApplicable(value, superJson));
  if (applicableCompositeRule) {
    return {
      value: applicableCompositeRule.transform(value, superJson),
      type: applicableCompositeRule.annotation(value, superJson)
    };
  }
  const applicableSimpleRule = findArr(simpleRules, (rule) => rule.isApplicable(value, superJson));
  if (applicableSimpleRule) {
    return {
      value: applicableSimpleRule.transform(value, superJson),
      type: applicableSimpleRule.annotation
    };
  }
  return void 0;
};
var simpleRulesByAnnotation = {};
simpleRules.forEach((rule) => {
  simpleRulesByAnnotation[rule.annotation] = rule;
});
var untransformValue = (json, type, superJson) => {
  if (isArray(type)) {
    switch (type[0]) {
      case "symbol":
        return symbolRule.untransform(json, type, superJson);
      case "class":
        return classRule.untransform(json, type, superJson);
      case "custom":
        return customRule.untransform(json, type, superJson);
      case "typed-array":
        return typedArrayRule.untransform(json, type, superJson);
      default:
        throw new Error("Unknown transformation: " + type);
    }
  } else {
    const transformation = simpleRulesByAnnotation[type];
    if (!transformation) {
      throw new Error("Unknown transformation: " + type);
    }
    return transformation.untransform(json, superJson);
  }
};
init_esm_shims();
var getNthKey = (value, n) => {
  if (n > value.size)
    throw new Error("index out of bounds");
  const keys = value.keys();
  while (n > 0) {
    keys.next();
    n--;
  }
  return keys.next().value;
};
function validatePath(path) {
  if (includes(path, "__proto__")) {
    throw new Error("__proto__ is not allowed as a property");
  }
  if (includes(path, "prototype")) {
    throw new Error("prototype is not allowed as a property");
  }
  if (includes(path, "constructor")) {
    throw new Error("constructor is not allowed as a property");
  }
}
var getDeep = (object, path) => {
  validatePath(path);
  for (let i = 0; i < path.length; i++) {
    const key = path[i];
    if (isSet(object)) {
      object = getNthKey(object, +key);
    } else if (isMap(object)) {
      const row = +key;
      const type = +path[++i] === 0 ? "key" : "value";
      const keyOfRow = getNthKey(object, row);
      switch (type) {
        case "key":
          object = keyOfRow;
          break;
        case "value":
          object = object.get(keyOfRow);
          break;
      }
    } else {
      object = object[key];
    }
  }
  return object;
};
var setDeep = (object, path, mapper) => {
  validatePath(path);
  if (path.length === 0) {
    return mapper(object);
  }
  let parent = object;
  for (let i = 0; i < path.length - 1; i++) {
    const key = path[i];
    if (isArray(parent)) {
      const index = +key;
      parent = parent[index];
    } else if (isPlainObject2(parent)) {
      parent = parent[key];
    } else if (isSet(parent)) {
      const row = +key;
      parent = getNthKey(parent, row);
    } else if (isMap(parent)) {
      const isEnd = i === path.length - 2;
      if (isEnd) {
        break;
      }
      const row = +key;
      const type = +path[++i] === 0 ? "key" : "value";
      const keyOfRow = getNthKey(parent, row);
      switch (type) {
        case "key":
          parent = keyOfRow;
          break;
        case "value":
          parent = parent.get(keyOfRow);
          break;
      }
    }
  }
  const lastKey = path[path.length - 1];
  if (isArray(parent)) {
    parent[+lastKey] = mapper(parent[+lastKey]);
  } else if (isPlainObject2(parent)) {
    parent[lastKey] = mapper(parent[lastKey]);
  }
  if (isSet(parent)) {
    const oldValue = getNthKey(parent, +lastKey);
    const newValue = mapper(oldValue);
    if (oldValue !== newValue) {
      parent.delete(oldValue);
      parent.add(newValue);
    }
  }
  if (isMap(parent)) {
    const row = +path[path.length - 2];
    const keyToRow = getNthKey(parent, row);
    const type = +lastKey === 0 ? "key" : "value";
    switch (type) {
      case "key": {
        const newKey = mapper(keyToRow);
        parent.set(newKey, parent.get(keyToRow));
        if (newKey !== keyToRow) {
          parent.delete(keyToRow);
        }
        break;
      }
      case "value": {
        parent.set(keyToRow, mapper(parent.get(keyToRow)));
        break;
      }
    }
  }
  return object;
};
function traverse(tree, walker2, origin = []) {
  if (!tree) {
    return;
  }
  if (!isArray(tree)) {
    forEach(tree, (subtree, key) => traverse(subtree, walker2, [...origin, ...parsePath(key)]));
    return;
  }
  const [nodeValue, children] = tree;
  if (children) {
    forEach(children, (child, key) => {
      traverse(child, walker2, [...origin, ...parsePath(key)]);
    });
  }
  walker2(nodeValue, origin);
}
function applyValueAnnotations(plain, annotations, superJson) {
  traverse(annotations, (type, path) => {
    plain = setDeep(plain, path, (v) => untransformValue(v, type, superJson));
  });
  return plain;
}
function applyReferentialEqualityAnnotations(plain, annotations) {
  function apply2(identicalPaths, path) {
    const object = getDeep(plain, parsePath(path));
    identicalPaths.map(parsePath).forEach((identicalObjectPath) => {
      plain = setDeep(plain, identicalObjectPath, () => object);
    });
  }
  if (isArray(annotations)) {
    const [root, other] = annotations;
    root.forEach((identicalPath) => {
      plain = setDeep(plain, parsePath(identicalPath), () => plain);
    });
    if (other) {
      forEach(other, apply2);
    }
  } else {
    forEach(annotations, apply2);
  }
  return plain;
}
var isDeep = (object, superJson) => isPlainObject2(object) || isArray(object) || isMap(object) || isSet(object) || isInstanceOfRegisteredClass(object, superJson);
function addIdentity(object, path, identities) {
  const existingSet = identities.get(object);
  if (existingSet) {
    existingSet.push(path);
  } else {
    identities.set(object, [path]);
  }
}
function generateReferentialEqualityAnnotations(identitites, dedupe) {
  const result = {};
  let rootEqualityPaths = void 0;
  identitites.forEach((paths) => {
    if (paths.length <= 1) {
      return;
    }
    if (!dedupe) {
      paths = paths.map((path) => path.map(String)).sort((a, b) => a.length - b.length);
    }
    const [representativePath, ...identicalPaths] = paths;
    if (representativePath.length === 0) {
      rootEqualityPaths = identicalPaths.map(stringifyPath);
    } else {
      result[stringifyPath(representativePath)] = identicalPaths.map(stringifyPath);
    }
  });
  if (rootEqualityPaths) {
    if (isEmptyObject(result)) {
      return [rootEqualityPaths];
    } else {
      return [rootEqualityPaths, result];
    }
  } else {
    return isEmptyObject(result) ? void 0 : result;
  }
}
var walker = (object, identities, superJson, dedupe, path = [], objectsInThisPath = [], seenObjects = /* @__PURE__ */ new Map()) => {
  var _a25;
  const primitive = isPrimitive2(object);
  if (!primitive) {
    addIdentity(object, path, identities);
    const seen2 = seenObjects.get(object);
    if (seen2) {
      return dedupe ? {
        transformedValue: null
      } : seen2;
    }
  }
  if (!isDeep(object, superJson)) {
    const transformed2 = transformValue(object, superJson);
    const result2 = transformed2 ? {
      transformedValue: transformed2.value,
      annotations: [transformed2.type]
    } : {
      transformedValue: object
    };
    if (!primitive) {
      seenObjects.set(object, result2);
    }
    return result2;
  }
  if (includes(objectsInThisPath, object)) {
    return {
      transformedValue: null
    };
  }
  const transformationResult = transformValue(object, superJson);
  const transformed = (_a25 = transformationResult == null ? void 0 : transformationResult.value) != null ? _a25 : object;
  const transformedValue = isArray(transformed) ? [] : {};
  const innerAnnotations = {};
  forEach(transformed, (value, index) => {
    if (index === "__proto__" || index === "constructor" || index === "prototype") {
      throw new Error(`Detected property ${index}. This is a prototype pollution risk, please remove it from your object.`);
    }
    const recursiveResult = walker(value, identities, superJson, dedupe, [...path, index], [...objectsInThisPath, object], seenObjects);
    transformedValue[index] = recursiveResult.transformedValue;
    if (isArray(recursiveResult.annotations)) {
      innerAnnotations[index] = recursiveResult.annotations;
    } else if (isPlainObject2(recursiveResult.annotations)) {
      forEach(recursiveResult.annotations, (tree, key) => {
        innerAnnotations[escapeKey(index) + "." + key] = tree;
      });
    }
  });
  const result = isEmptyObject(innerAnnotations) ? {
    transformedValue,
    annotations: !!transformationResult ? [transformationResult.type] : void 0
  } : {
    transformedValue,
    annotations: !!transformationResult ? [transformationResult.type, innerAnnotations] : innerAnnotations
  };
  if (!primitive) {
    seenObjects.set(object, result);
  }
  return result;
};
init_esm_shims();
init_esm_shims();
function getType2(payload) {
  return Object.prototype.toString.call(payload).slice(8, -1);
}
function isArray2(payload) {
  return getType2(payload) === "Array";
}
function isPlainObject3(payload) {
  if (getType2(payload) !== "Object")
    return false;
  const prototype = Object.getPrototypeOf(payload);
  return !!prototype && prototype.constructor === Object && prototype === Object.prototype;
}
function assignProp(carry, key, newVal, originalObject, includeNonenumerable) {
  const propType = {}.propertyIsEnumerable.call(originalObject, key) ? "enumerable" : "nonenumerable";
  if (propType === "enumerable")
    carry[key] = newVal;
  if (includeNonenumerable && propType === "nonenumerable") {
    Object.defineProperty(carry, key, {
      value: newVal,
      enumerable: false,
      writable: true,
      configurable: true
    });
  }
}
function copy(target22, options = {}) {
  if (isArray2(target22)) {
    return target22.map((item) => copy(item, options));
  }
  if (!isPlainObject3(target22)) {
    return target22;
  }
  const props2 = Object.getOwnPropertyNames(target22);
  const symbols = Object.getOwnPropertySymbols(target22);
  return [...props2, ...symbols].reduce((carry, key) => {
    if (isArray2(options.props) && !options.props.includes(key)) {
      return carry;
    }
    const val = target22[key];
    const newVal = copy(val, options);
    assignProp(carry, key, newVal, target22, options.nonenumerable);
    return carry;
  }, {});
}
var SuperJSON = class {
  /**
   * @param dedupeReferentialEqualities  If true, SuperJSON will make sure only one instance of referentially equal objects are serialized and the rest are replaced with `null`.
   */
  constructor({ dedupe = false } = {}) {
    this.classRegistry = new ClassRegistry();
    this.symbolRegistry = new Registry((s) => {
      var _a25;
      return (_a25 = s.description) != null ? _a25 : "";
    });
    this.customTransformerRegistry = new CustomTransformerRegistry();
    this.allowedErrorProps = [];
    this.dedupe = dedupe;
  }
  serialize(object) {
    const identities = /* @__PURE__ */ new Map();
    const output = walker(object, identities, this, this.dedupe);
    const res = {
      json: output.transformedValue
    };
    if (output.annotations) {
      res.meta = {
        ...res.meta,
        values: output.annotations
      };
    }
    const equalityAnnotations = generateReferentialEqualityAnnotations(identities, this.dedupe);
    if (equalityAnnotations) {
      res.meta = {
        ...res.meta,
        referentialEqualities: equalityAnnotations
      };
    }
    return res;
  }
  deserialize(payload) {
    const { json, meta } = payload;
    let result = copy(json);
    if (meta == null ? void 0 : meta.values) {
      result = applyValueAnnotations(result, meta.values, this);
    }
    if (meta == null ? void 0 : meta.referentialEqualities) {
      result = applyReferentialEqualityAnnotations(result, meta.referentialEqualities);
    }
    return result;
  }
  stringify(object) {
    return JSON.stringify(this.serialize(object));
  }
  parse(string) {
    return this.deserialize(JSON.parse(string));
  }
  registerClass(v, options) {
    this.classRegistry.register(v, options);
  }
  registerSymbol(v, identifier) {
    this.symbolRegistry.register(v, identifier);
  }
  registerCustom(transformer, name) {
    this.customTransformerRegistry.register({
      name,
      ...transformer
    });
  }
  allowErrorProps(...props2) {
    this.allowedErrorProps.push(...props2);
  }
};
SuperJSON.defaultInstance = new SuperJSON();
SuperJSON.serialize = SuperJSON.defaultInstance.serialize.bind(SuperJSON.defaultInstance);
SuperJSON.deserialize = SuperJSON.defaultInstance.deserialize.bind(SuperJSON.defaultInstance);
SuperJSON.stringify = SuperJSON.defaultInstance.stringify.bind(SuperJSON.defaultInstance);
SuperJSON.parse = SuperJSON.defaultInstance.parse.bind(SuperJSON.defaultInstance);
SuperJSON.registerClass = SuperJSON.defaultInstance.registerClass.bind(SuperJSON.defaultInstance);
SuperJSON.registerSymbol = SuperJSON.defaultInstance.registerSymbol.bind(SuperJSON.defaultInstance);
SuperJSON.registerCustom = SuperJSON.defaultInstance.registerCustom.bind(SuperJSON.defaultInstance);
SuperJSON.allowErrorProps = SuperJSON.defaultInstance.allowErrorProps.bind(SuperJSON.defaultInstance);
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
var _a19, _b19;
(_b19 = (_a19 = target$1).__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__) != null ? _b19 : _a19.__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__ = [];
var _a20, _b20;
(_b20 = (_a20 = target$1).__VUE_DEVTOOLS_KIT_RPC_CLIENT__) != null ? _b20 : _a20.__VUE_DEVTOOLS_KIT_RPC_CLIENT__ = null;
var _a21, _b21;
(_b21 = (_a21 = target$1).__VUE_DEVTOOLS_KIT_RPC_SERVER__) != null ? _b21 : _a21.__VUE_DEVTOOLS_KIT_RPC_SERVER__ = null;
var _a22, _b22;
(_b22 = (_a22 = target$1).__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__) != null ? _b22 : _a22.__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__ = null;
var _a23, _b23;
(_b23 = (_a23 = target$1).__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__) != null ? _b23 : _a23.__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__ = null;
var _a24, _b24;
(_b24 = (_a24 = target$1).__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__) != null ? _b24 : _a24.__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__ = null;
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
init_esm_shims();
/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */
let activePinia;
const setActivePinia = (pinia) => activePinia = pinia;
const piniaSymbol = (
  /* istanbul ignore next */
  Symbol()
);
function isPlainObject(o) {
  return o && typeof o === "object" && Object.prototype.toString.call(o) === "[object Object]" && typeof o.toJSON !== "function";
}
var MutationType;
(function(MutationType2) {
  MutationType2["direct"] = "direct";
  MutationType2["patchObject"] = "patch object";
  MutationType2["patchFunction"] = "patch function";
})(MutationType || (MutationType = {}));
const IS_CLIENT = typeof window !== "undefined";
const _global = /* @__PURE__ */ (() => typeof window === "object" && window.window === window ? window : typeof self === "object" && self.self === self ? self : typeof global === "object" && global.global === global ? global : typeof globalThis === "object" ? globalThis : { HTMLElement: null })();
function bom(blob, { autoBom = false } = {}) {
  if (autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
    return new Blob([String.fromCharCode(65279), blob], { type: blob.type });
  }
  return blob;
}
function download(url, name, opts) {
  const xhr = new XMLHttpRequest();
  xhr.open("GET", url);
  xhr.responseType = "blob";
  xhr.onload = function() {
    saveAs(xhr.response, name, opts);
  };
  xhr.onerror = function() {
    console.error("could not download file");
  };
  xhr.send();
}
function corsEnabled(url) {
  const xhr = new XMLHttpRequest();
  xhr.open("HEAD", url, false);
  try {
    xhr.send();
  } catch (e) {
  }
  return xhr.status >= 200 && xhr.status <= 299;
}
function click(node) {
  try {
    node.dispatchEvent(new MouseEvent("click"));
  } catch (e) {
    const evt = new MouseEvent("click", {
      bubbles: true,
      cancelable: true,
      view: window,
      detail: 0,
      screenX: 80,
      screenY: 20,
      clientX: 80,
      clientY: 20,
      ctrlKey: false,
      altKey: false,
      shiftKey: false,
      metaKey: false,
      button: 0,
      relatedTarget: null
    });
    node.dispatchEvent(evt);
  }
}
const _navigator = typeof navigator === "object" ? navigator : { userAgent: "" };
const isMacOSWebView = /* @__PURE__ */ (() => /Macintosh/.test(_navigator.userAgent) && /AppleWebKit/.test(_navigator.userAgent) && !/Safari/.test(_navigator.userAgent))();
const saveAs = !IS_CLIENT ? () => {
} : (
  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView or mini program
  typeof HTMLAnchorElement !== "undefined" && "download" in HTMLAnchorElement.prototype && !isMacOSWebView ? downloadSaveAs : (
    // Use msSaveOrOpenBlob as a second approach
    "msSaveOrOpenBlob" in _navigator ? msSaveAs : (
      // Fallback to using FileReader and a popup
      fileSaverSaveAs
    )
  )
);
function downloadSaveAs(blob, name = "download", opts) {
  const a = document.createElement("a");
  a.download = name;
  a.rel = "noopener";
  if (typeof blob === "string") {
    a.href = blob;
    if (a.origin !== location.origin) {
      if (corsEnabled(a.href)) {
        download(blob, name, opts);
      } else {
        a.target = "_blank";
        click(a);
      }
    } else {
      click(a);
    }
  } else {
    a.href = URL.createObjectURL(blob);
    setTimeout(function() {
      URL.revokeObjectURL(a.href);
    }, 4e4);
    setTimeout(function() {
      click(a);
    }, 0);
  }
}
function msSaveAs(blob, name = "download", opts) {
  if (typeof blob === "string") {
    if (corsEnabled(blob)) {
      download(blob, name, opts);
    } else {
      const a = document.createElement("a");
      a.href = blob;
      a.target = "_blank";
      setTimeout(function() {
        click(a);
      });
    }
  } else {
    navigator.msSaveOrOpenBlob(bom(blob, opts), name);
  }
}
function fileSaverSaveAs(blob, name, opts, popup) {
  popup = popup || open("", "_blank");
  if (popup) {
    popup.document.title = popup.document.body.innerText = "downloading...";
  }
  if (typeof blob === "string")
    return download(blob, name, opts);
  const force = blob.type === "application/octet-stream";
  const isSafari = /constructor/i.test(String(_global.HTMLElement)) || "safari" in _global;
  const isChromeIOS = /CriOS\/[\d]+/.test(navigator.userAgent);
  if ((isChromeIOS || force && isSafari || isMacOSWebView) && typeof FileReader !== "undefined") {
    const reader = new FileReader();
    reader.onloadend = function() {
      let url = reader.result;
      if (typeof url !== "string") {
        popup = null;
        throw new Error("Wrong reader.result type");
      }
      url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, "data:attachment/file;");
      if (popup) {
        popup.location.href = url;
      } else {
        location.assign(url);
      }
      popup = null;
    };
    reader.readAsDataURL(blob);
  } else {
    const url = URL.createObjectURL(blob);
    if (popup)
      popup.location.assign(url);
    else
      location.href = url;
    popup = null;
    setTimeout(function() {
      URL.revokeObjectURL(url);
    }, 4e4);
  }
}
function toastMessage(message, type) {
  const piniaMessage = "🍍 " + message;
  if (typeof __VUE_DEVTOOLS_TOAST__ === "function") {
    __VUE_DEVTOOLS_TOAST__(piniaMessage, type);
  } else if (type === "error") {
    console.error(piniaMessage);
  } else if (type === "warn") {
    console.warn(piniaMessage);
  } else {
    console.log(piniaMessage);
  }
}
function isPinia(o) {
  return "_a" in o && "install" in o;
}
function checkClipboardAccess() {
  if (!("clipboard" in navigator)) {
    toastMessage(`Your browser doesn't support the Clipboard API`, "error");
    return true;
  }
}
function checkNotFocusedError(error) {
  if (error instanceof Error && error.message.toLowerCase().includes("document is not focused")) {
    toastMessage('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.', "warn");
    return true;
  }
  return false;
}
async function actionGlobalCopyState(pinia) {
  if (checkClipboardAccess())
    return;
  try {
    await navigator.clipboard.writeText(JSON.stringify(pinia.state.value));
    toastMessage("Global state copied to clipboard.");
  } catch (error) {
    if (checkNotFocusedError(error))
      return;
    toastMessage(`Failed to serialize the state. Check the console for more details.`, "error");
    console.error(error);
  }
}
async function actionGlobalPasteState(pinia) {
  if (checkClipboardAccess())
    return;
  try {
    loadStoresState(pinia, JSON.parse(await navigator.clipboard.readText()));
    toastMessage("Global state pasted from clipboard.");
  } catch (error) {
    if (checkNotFocusedError(error))
      return;
    toastMessage(`Failed to deserialize the state from clipboard. Check the console for more details.`, "error");
    console.error(error);
  }
}
async function actionGlobalSaveState(pinia) {
  try {
    saveAs(new Blob([JSON.stringify(pinia.state.value)], {
      type: "text/plain;charset=utf-8"
    }), "pinia-state.json");
  } catch (error) {
    toastMessage(`Failed to export the state as JSON. Check the console for more details.`, "error");
    console.error(error);
  }
}
let fileInput;
function getFileOpener() {
  if (!fileInput) {
    fileInput = document.createElement("input");
    fileInput.type = "file";
    fileInput.accept = ".json";
  }
  function openFile() {
    return new Promise((resolve2, reject) => {
      fileInput.onchange = async () => {
        const files = fileInput.files;
        if (!files)
          return resolve2(null);
        const file = files.item(0);
        if (!file)
          return resolve2(null);
        return resolve2({ text: await file.text(), file });
      };
      fileInput.oncancel = () => resolve2(null);
      fileInput.onerror = reject;
      fileInput.click();
    });
  }
  return openFile;
}
async function actionGlobalOpenStateFile(pinia) {
  try {
    const open2 = getFileOpener();
    const result = await open2();
    if (!result)
      return;
    const { text, file } = result;
    loadStoresState(pinia, JSON.parse(text));
    toastMessage(`Global state imported from "${file.name}".`);
  } catch (error) {
    toastMessage(`Failed to import the state from JSON. Check the console for more details.`, "error");
    console.error(error);
  }
}
function loadStoresState(pinia, state) {
  for (const key in state) {
    const storeState = pinia.state.value[key];
    if (storeState) {
      Object.assign(storeState, state[key]);
    } else {
      pinia.state.value[key] = state[key];
    }
  }
}
function formatDisplay(display) {
  return {
    _custom: {
      display
    }
  };
}
const PINIA_ROOT_LABEL = "🍍 Pinia (root)";
const PINIA_ROOT_ID = "_root";
function formatStoreForInspectorTree(store) {
  return isPinia(store) ? {
    id: PINIA_ROOT_ID,
    label: PINIA_ROOT_LABEL
  } : {
    id: store.$id,
    label: store.$id
  };
}
function formatStoreForInspectorState(store) {
  if (isPinia(store)) {
    const storeNames = Array.from(store._s.keys());
    const storeMap = store._s;
    const state2 = {
      state: storeNames.map((storeId) => ({
        editable: true,
        key: storeId,
        value: store.state.value[storeId]
      })),
      getters: storeNames.filter((id) => storeMap.get(id)._getters).map((id) => {
        const store2 = storeMap.get(id);
        return {
          editable: false,
          key: id,
          value: store2._getters.reduce((getters, key) => {
            getters[key] = store2[key];
            return getters;
          }, {})
        };
      })
    };
    return state2;
  }
  const state = {
    state: Object.keys(store.$state).map((key) => ({
      editable: true,
      key,
      value: store.$state[key]
    }))
  };
  if (store._getters && store._getters.length) {
    state.getters = store._getters.map((getterName) => ({
      editable: false,
      key: getterName,
      value: store[getterName]
    }));
  }
  if (store._customProperties.size) {
    state.customProperties = Array.from(store._customProperties).map((key) => ({
      editable: true,
      key,
      value: store[key]
    }));
  }
  return state;
}
function formatEventData(events) {
  if (!events)
    return {};
  if (Array.isArray(events)) {
    return events.reduce((data, event) => {
      data.keys.push(event.key);
      data.operations.push(event.type);
      data.oldValue[event.key] = event.oldValue;
      data.newValue[event.key] = event.newValue;
      return data;
    }, {
      oldValue: {},
      keys: [],
      operations: [],
      newValue: {}
    });
  } else {
    return {
      operation: formatDisplay(events.type),
      key: formatDisplay(events.key),
      oldValue: events.oldValue,
      newValue: events.newValue
    };
  }
}
function formatMutationType(type) {
  switch (type) {
    case MutationType.direct:
      return "mutation";
    case MutationType.patchFunction:
      return "$patch";
    case MutationType.patchObject:
      return "$patch";
    default:
      return "unknown";
  }
}
let isTimelineActive = true;
const componentStateTypes = [];
const MUTATIONS_LAYER_ID = "pinia:mutations";
const INSPECTOR_ID = "pinia";
const { assign: assign$1 } = Object;
const getStoreType = (id) => "🍍 " + id;
function registerPiniaDevtools(app2, pinia) {
  setupDevToolsPlugin({
    id: "dev.esm.pinia",
    label: "Pinia 🍍",
    logo: "https://pinia.vuejs.org/logo.svg",
    packageName: "pinia",
    homepage: "https://pinia.vuejs.org",
    componentStateTypes,
    app: app2
  }, (api) => {
    if (typeof api.now !== "function") {
      toastMessage("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.");
    }
    api.addTimelineLayer({
      id: MUTATIONS_LAYER_ID,
      label: `Pinia 🍍`,
      color: 15064968
    });
    api.addInspector({
      id: INSPECTOR_ID,
      label: "Pinia 🍍",
      icon: "storage",
      treeFilterPlaceholder: "Search stores",
      actions: [
        {
          icon: "content_copy",
          action: () => {
            actionGlobalCopyState(pinia);
          },
          tooltip: "Serialize and copy the state"
        },
        {
          icon: "content_paste",
          action: async () => {
            await actionGlobalPasteState(pinia);
            api.sendInspectorTree(INSPECTOR_ID);
            api.sendInspectorState(INSPECTOR_ID);
          },
          tooltip: "Replace the state with the content of your clipboard"
        },
        {
          icon: "save",
          action: () => {
            actionGlobalSaveState(pinia);
          },
          tooltip: "Save the state as a JSON file"
        },
        {
          icon: "folder_open",
          action: async () => {
            await actionGlobalOpenStateFile(pinia);
            api.sendInspectorTree(INSPECTOR_ID);
            api.sendInspectorState(INSPECTOR_ID);
          },
          tooltip: "Import the state from a JSON file"
        }
      ],
      nodeActions: [
        {
          icon: "restore",
          tooltip: 'Reset the state (with "$reset")',
          action: (nodeId) => {
            const store = pinia._s.get(nodeId);
            if (!store) {
              toastMessage(`Cannot reset "${nodeId}" store because it wasn't found.`, "warn");
            } else if (typeof store.$reset !== "function") {
              toastMessage(`Cannot reset "${nodeId}" store because it doesn't have a "$reset" method implemented.`, "warn");
            } else {
              store.$reset();
              toastMessage(`Store "${nodeId}" reset.`);
            }
          }
        }
      ]
    });
    api.on.inspectComponent((payload) => {
      const proxy = payload.componentInstance && payload.componentInstance.proxy;
      if (proxy && proxy._pStores) {
        const piniaStores = payload.componentInstance.proxy._pStores;
        Object.values(piniaStores).forEach((store) => {
          payload.instanceData.state.push({
            type: getStoreType(store.$id),
            key: "state",
            editable: true,
            value: store._isOptionsAPI ? {
              _custom: {
                value: toRaw$1(store.$state),
                actions: [
                  {
                    icon: "restore",
                    tooltip: "Reset the state of this store",
                    action: () => store.$reset()
                  }
                ]
              }
            } : (
              // NOTE: workaround to unwrap transferred refs
              Object.keys(store.$state).reduce((state, key) => {
                state[key] = store.$state[key];
                return state;
              }, {})
            )
          });
          if (store._getters && store._getters.length) {
            payload.instanceData.state.push({
              type: getStoreType(store.$id),
              key: "getters",
              editable: false,
              value: store._getters.reduce((getters, key) => {
                try {
                  getters[key] = store[key];
                } catch (error) {
                  getters[key] = error;
                }
                return getters;
              }, {})
            });
          }
        });
      }
    });
    api.on.getInspectorTree((payload) => {
      if (payload.app === app2 && payload.inspectorId === INSPECTOR_ID) {
        let stores = [pinia];
        stores = stores.concat(Array.from(pinia._s.values()));
        payload.rootNodes = (payload.filter ? stores.filter((store) => "$id" in store ? store.$id.toLowerCase().includes(payload.filter.toLowerCase()) : PINIA_ROOT_LABEL.toLowerCase().includes(payload.filter.toLowerCase())) : stores).map(formatStoreForInspectorTree);
      }
    });
    globalThis.$pinia = pinia;
    api.on.getInspectorState((payload) => {
      if (payload.app === app2 && payload.inspectorId === INSPECTOR_ID) {
        const inspectedStore = payload.nodeId === PINIA_ROOT_ID ? pinia : pinia._s.get(payload.nodeId);
        if (!inspectedStore) {
          return;
        }
        if (inspectedStore) {
          if (payload.nodeId !== PINIA_ROOT_ID)
            globalThis.$store = toRaw$1(inspectedStore);
          payload.state = formatStoreForInspectorState(inspectedStore);
        }
      }
    });
    api.on.editInspectorState((payload) => {
      if (payload.app === app2 && payload.inspectorId === INSPECTOR_ID) {
        const inspectedStore = payload.nodeId === PINIA_ROOT_ID ? pinia : pinia._s.get(payload.nodeId);
        if (!inspectedStore) {
          return toastMessage(`store "${payload.nodeId}" not found`, "error");
        }
        const { path } = payload;
        if (!isPinia(inspectedStore)) {
          if (path.length !== 1 || !inspectedStore._customProperties.has(path[0]) || path[0] in inspectedStore.$state) {
            path.unshift("$state");
          }
        } else {
          path.unshift("state");
        }
        isTimelineActive = false;
        payload.set(inspectedStore, path, payload.state.value);
        isTimelineActive = true;
      }
    });
    api.on.editComponentState((payload) => {
      if (payload.type.startsWith("🍍")) {
        const storeId = payload.type.replace(/^🍍\s*/, "");
        const store = pinia._s.get(storeId);
        if (!store) {
          return toastMessage(`store "${storeId}" not found`, "error");
        }
        const { path } = payload;
        if (path[0] !== "state") {
          return toastMessage(`Invalid path for store "${storeId}":
${path}
Only state can be modified.`);
        }
        path[0] = "$state";
        isTimelineActive = false;
        payload.set(store, path, payload.state.value);
        isTimelineActive = true;
      }
    });
  });
}
function addStoreToDevtools(app2, store) {
  if (!componentStateTypes.includes(getStoreType(store.$id))) {
    componentStateTypes.push(getStoreType(store.$id));
  }
  setupDevToolsPlugin({
    id: "dev.esm.pinia",
    label: "Pinia 🍍",
    logo: "https://pinia.vuejs.org/logo.svg",
    packageName: "pinia",
    homepage: "https://pinia.vuejs.org",
    componentStateTypes,
    app: app2,
    settings: {
      logStoreChanges: {
        label: "Notify about new/deleted stores",
        type: "boolean",
        defaultValue: true
      }
      // useEmojis: {
      //   label: 'Use emojis in messages ⚡️',
      //   type: 'boolean',
      //   defaultValue: true,
      // },
    }
  }, (api) => {
    const now2 = typeof api.now === "function" ? api.now.bind(api) : Date.now;
    store.$onAction(({ after, onError, name, args }) => {
      const groupId = runningActionId++;
      api.addTimelineEvent({
        layerId: MUTATIONS_LAYER_ID,
        event: {
          time: now2(),
          title: "🛫 " + name,
          subtitle: "start",
          data: {
            store: formatDisplay(store.$id),
            action: formatDisplay(name),
            args
          },
          groupId
        }
      });
      after((result) => {
        activeAction = void 0;
        api.addTimelineEvent({
          layerId: MUTATIONS_LAYER_ID,
          event: {
            time: now2(),
            title: "🛬 " + name,
            subtitle: "end",
            data: {
              store: formatDisplay(store.$id),
              action: formatDisplay(name),
              args,
              result
            },
            groupId
          }
        });
      });
      onError((error) => {
        activeAction = void 0;
        api.addTimelineEvent({
          layerId: MUTATIONS_LAYER_ID,
          event: {
            time: now2(),
            logType: "error",
            title: "💥 " + name,
            subtitle: "end",
            data: {
              store: formatDisplay(store.$id),
              action: formatDisplay(name),
              args,
              error
            },
            groupId
          }
        });
      });
    }, true);
    store._customProperties.forEach((name) => {
      watch(() => unref(store[name]), (newValue, oldValue) => {
        api.notifyComponentUpdate();
        api.sendInspectorState(INSPECTOR_ID);
        if (isTimelineActive) {
          api.addTimelineEvent({
            layerId: MUTATIONS_LAYER_ID,
            event: {
              time: now2(),
              title: "Change",
              subtitle: name,
              data: {
                newValue,
                oldValue
              },
              groupId: activeAction
            }
          });
        }
      }, { deep: true });
    });
    store.$subscribe(({ events, type }, state) => {
      api.notifyComponentUpdate();
      api.sendInspectorState(INSPECTOR_ID);
      if (!isTimelineActive)
        return;
      const eventData = {
        time: now2(),
        title: formatMutationType(type),
        data: assign$1({ store: formatDisplay(store.$id) }, formatEventData(events)),
        groupId: activeAction
      };
      if (type === MutationType.patchFunction) {
        eventData.subtitle = "⤵️";
      } else if (type === MutationType.patchObject) {
        eventData.subtitle = "🧩";
      } else if (events && !Array.isArray(events)) {
        eventData.subtitle = events.type;
      }
      if (events) {
        eventData.data["rawEvent(s)"] = {
          _custom: {
            display: "DebuggerEvent",
            type: "object",
            tooltip: "raw DebuggerEvent[]",
            value: events
          }
        };
      }
      api.addTimelineEvent({
        layerId: MUTATIONS_LAYER_ID,
        event: eventData
      });
    }, { detached: true, flush: "sync" });
    const hotUpdate = store._hotUpdate;
    store._hotUpdate = markRaw((newStore) => {
      hotUpdate(newStore);
      api.addTimelineEvent({
        layerId: MUTATIONS_LAYER_ID,
        event: {
          time: now2(),
          title: "🔥 " + store.$id,
          subtitle: "HMR update",
          data: {
            store: formatDisplay(store.$id),
            info: formatDisplay(`HMR update`)
          }
        }
      });
      api.notifyComponentUpdate();
      api.sendInspectorTree(INSPECTOR_ID);
      api.sendInspectorState(INSPECTOR_ID);
    });
    const { $dispose } = store;
    store.$dispose = () => {
      $dispose();
      api.notifyComponentUpdate();
      api.sendInspectorTree(INSPECTOR_ID);
      api.sendInspectorState(INSPECTOR_ID);
      api.getSettings().logStoreChanges && toastMessage(`Disposed "${store.$id}" store 🗑`);
    };
    api.notifyComponentUpdate();
    api.sendInspectorTree(INSPECTOR_ID);
    api.sendInspectorState(INSPECTOR_ID);
    api.getSettings().logStoreChanges && toastMessage(`"${store.$id}" store installed 🆕`);
  });
}
let runningActionId = 0;
let activeAction;
function patchActionForGrouping(store, actionNames, wrapWithProxy) {
  const actions = actionNames.reduce((storeActions, actionName) => {
    storeActions[actionName] = toRaw$1(store)[actionName];
    return storeActions;
  }, {});
  for (const actionName in actions) {
    store[actionName] = function() {
      const _actionId = runningActionId;
      const trackedStore = wrapWithProxy ? new Proxy(store, {
        get(...args) {
          activeAction = _actionId;
          return Reflect.get(...args);
        },
        set(...args) {
          activeAction = _actionId;
          return Reflect.set(...args);
        }
      }) : store;
      activeAction = _actionId;
      const retValue = actions[actionName].apply(trackedStore, arguments);
      activeAction = void 0;
      return retValue;
    };
  }
}
function devtoolsPlugin({ app: app2, store, options }) {
  if (store.$id.startsWith("__hot:")) {
    return;
  }
  store._isOptionsAPI = !!options.state;
  if (!store._p._testing) {
    patchActionForGrouping(store, Object.keys(options.actions), store._isOptionsAPI);
    const originalHotUpdate = store._hotUpdate;
    toRaw$1(store)._hotUpdate = function(newStore) {
      originalHotUpdate.apply(this, arguments);
      patchActionForGrouping(store, Object.keys(newStore._hmrPayload.actions), !!store._isOptionsAPI);
    };
  }
  addStoreToDevtools(
    app2,
    // FIXME: is there a way to allow the assignment from Store<Id, S, G, A> to StoreGeneric?
    store
  );
}
function createPinia() {
  const scope = effectScope(true);
  const state = scope.run(() => ref({}));
  let _p = [];
  let toBeInstalled = [];
  const pinia = markRaw({
    install(app2) {
      setActivePinia(pinia);
      pinia._a = app2;
      app2.provide(piniaSymbol, pinia);
      app2.config.globalProperties.$pinia = pinia;
      if (IS_CLIENT) {
        registerPiniaDevtools(app2, pinia);
      }
      toBeInstalled.forEach((plugin) => _p.push(plugin));
      toBeInstalled = [];
    },
    use(plugin) {
      if (!this._a) {
        toBeInstalled.push(plugin);
      } else {
        _p.push(plugin);
      }
      return this;
    },
    _p,
    // it's actually undefined here
    // @ts-expect-error
    _a: null,
    _e: scope,
    _s: /* @__PURE__ */ new Map(),
    state
  });
  if (IS_CLIENT && typeof Proxy !== "undefined") {
    pinia.use(devtoolsPlugin);
  }
  return pinia;
}
const noop = () => {
};
function addSubscription(subscriptions, callback, detached, onCleanup = noop) {
  subscriptions.push(callback);
  const removeSubscription = () => {
    const idx = subscriptions.indexOf(callback);
    if (idx > -1) {
      subscriptions.splice(idx, 1);
      onCleanup();
    }
  };
  if (!detached && getCurrentScope()) {
    onScopeDispose(removeSubscription);
  }
  return removeSubscription;
}
function triggerSubscriptions(subscriptions, ...args) {
  subscriptions.slice().forEach((callback) => {
    callback(...args);
  });
}
const fallbackRunWithContext = (fn) => fn();
const ACTION_MARKER = Symbol();
const ACTION_NAME = Symbol();
function mergeReactiveObjects(target2, patchToApply) {
  if (target2 instanceof Map && patchToApply instanceof Map) {
    patchToApply.forEach((value, key) => target2.set(key, value));
  } else if (target2 instanceof Set && patchToApply instanceof Set) {
    patchToApply.forEach(target2.add, target2);
  }
  for (const key in patchToApply) {
    if (!patchToApply.hasOwnProperty(key))
      continue;
    const subPatch = patchToApply[key];
    const targetValue = target2[key];
    if (isPlainObject(targetValue) && isPlainObject(subPatch) && target2.hasOwnProperty(key) && !isRef$1(subPatch) && !isReactive$1(subPatch)) {
      target2[key] = mergeReactiveObjects(targetValue, subPatch);
    } else {
      target2[key] = subPatch;
    }
  }
  return target2;
}
const skipHydrateSymbol = (
  /* istanbul ignore next */
  Symbol()
);
function shouldHydrate(obj) {
  return !isPlainObject(obj) || !Object.prototype.hasOwnProperty.call(obj, skipHydrateSymbol);
}
const { assign } = Object;
function isComputed(o) {
  return !!(isRef$1(o) && o.effect);
}
function createOptionsStore(id, options, pinia, hot) {
  const { state, actions, getters } = options;
  const initialState = pinia.state.value[id];
  let store;
  function setup() {
    if (!initialState && true) {
      pinia.state.value[id] = state ? state() : {};
    }
    const localState = toRefs(pinia.state.value[id]);
    return assign(localState, actions, Object.keys(getters || {}).reduce((computedGetters, name) => {
      computedGetters[name] = markRaw(computed(() => {
        setActivePinia(pinia);
        const store2 = pinia._s.get(id);
        return getters[name].call(store2, store2);
      }));
      return computedGetters;
    }, {}));
  }
  store = createSetupStore(id, setup, options, pinia, hot, true);
  return store;
}
function createSetupStore($id, setup, options = {}, pinia, hot, isOptionsStore) {
  let scope;
  const optionsForPlugin = assign({ actions: {} }, options);
  const $subscribeOptions = { deep: true };
  let isListening;
  let isSyncListening;
  let subscriptions = [];
  let actionSubscriptions = [];
  let debuggerEvents;
  const initialState = pinia.state.value[$id];
  if (!isOptionsStore && !initialState && true) {
    pinia.state.value[$id] = {};
  }
  const hotState = ref({});
  let activeListener;
  function $patch(partialStateOrMutator) {
    let subscriptionMutation;
    isListening = isSyncListening = false;
    if (typeof partialStateOrMutator === "function") {
      partialStateOrMutator(pinia.state.value[$id]);
      subscriptionMutation = {
        type: MutationType.patchFunction,
        storeId: $id,
        events: debuggerEvents
      };
    } else {
      mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator);
      subscriptionMutation = {
        type: MutationType.patchObject,
        payload: partialStateOrMutator,
        storeId: $id,
        events: debuggerEvents
      };
    }
    const myListenerId = activeListener = Symbol();
    nextTick().then(() => {
      if (activeListener === myListenerId) {
        isListening = true;
      }
    });
    isSyncListening = true;
    triggerSubscriptions(subscriptions, subscriptionMutation, pinia.state.value[$id]);
  }
  const $reset = isOptionsStore ? function $reset2() {
    const { state } = options;
    const newState = state ? state() : {};
    this.$patch(($state) => {
      assign($state, newState);
    });
  } : (
    /* istanbul ignore next */
    noop
  );
  function $dispose() {
    scope.stop();
    subscriptions = [];
    actionSubscriptions = [];
    pinia._s.delete($id);
  }
  const action = (fn, name = "") => {
    if (ACTION_MARKER in fn) {
      fn[ACTION_NAME] = name;
      return fn;
    }
    const wrappedAction = function() {
      setActivePinia(pinia);
      const args = Array.from(arguments);
      const afterCallbackList = [];
      const onErrorCallbackList = [];
      function after(callback) {
        afterCallbackList.push(callback);
      }
      function onError(callback) {
        onErrorCallbackList.push(callback);
      }
      triggerSubscriptions(actionSubscriptions, {
        args,
        name: wrappedAction[ACTION_NAME],
        store,
        after,
        onError
      });
      let ret;
      try {
        ret = fn.apply(this && this.$id === $id ? this : store, args);
      } catch (error) {
        triggerSubscriptions(onErrorCallbackList, error);
        throw error;
      }
      if (ret instanceof Promise) {
        return ret.then((value) => {
          triggerSubscriptions(afterCallbackList, value);
          return value;
        }).catch((error) => {
          triggerSubscriptions(onErrorCallbackList, error);
          return Promise.reject(error);
        });
      }
      triggerSubscriptions(afterCallbackList, ret);
      return ret;
    };
    wrappedAction[ACTION_MARKER] = true;
    wrappedAction[ACTION_NAME] = name;
    return wrappedAction;
  };
  const _hmrPayload = /* @__PURE__ */ markRaw({
    actions: {},
    getters: {},
    state: [],
    hotState
  });
  const partialStore = {
    _p: pinia,
    // _s: scope,
    $id,
    $onAction: addSubscription.bind(null, actionSubscriptions),
    $patch,
    $reset,
    $subscribe(callback, options2 = {}) {
      const removeSubscription = addSubscription(subscriptions, callback, options2.detached, () => stopWatcher());
      const stopWatcher = scope.run(() => watch(() => pinia.state.value[$id], (state) => {
        if (options2.flush === "sync" ? isSyncListening : isListening) {
          callback({
            storeId: $id,
            type: MutationType.direct,
            events: debuggerEvents
          }, state);
        }
      }, assign({}, $subscribeOptions, options2)));
      return removeSubscription;
    },
    $dispose
  };
  const store = reactive(IS_CLIENT ? assign(
    {
      _hmrPayload,
      _customProperties: markRaw(/* @__PURE__ */ new Set())
      // devtools custom properties
    },
    partialStore
    // must be added later
    // setupStore
  ) : partialStore);
  pinia._s.set($id, store);
  const runWithContext = pinia._a && pinia._a.runWithContext || fallbackRunWithContext;
  const setupStore = runWithContext(() => pinia._e.run(() => (scope = effectScope()).run(() => setup({ action }))));
  for (const key in setupStore) {
    const prop = setupStore[key];
    if (isRef$1(prop) && !isComputed(prop) || isReactive$1(prop)) {
      if (!isOptionsStore) {
        if (initialState && shouldHydrate(prop)) {
          if (isRef$1(prop)) {
            prop.value = initialState[key];
          } else {
            mergeReactiveObjects(prop, initialState[key]);
          }
        }
        pinia.state.value[$id][key] = prop;
      }
    } else if (typeof prop === "function") {
      const actionValue = action(prop, key);
      setupStore[key] = actionValue;
      optionsForPlugin.actions[key] = prop;
    } else ;
  }
  assign(store, setupStore);
  assign(toRaw$1(store), setupStore);
  Object.defineProperty(store, "$state", {
    get: () => pinia.state.value[$id],
    set: (state) => {
      $patch(($state) => {
        assign($state, state);
      });
    }
  });
  if (IS_CLIENT) {
    const nonEnumerable = {
      writable: true,
      configurable: true,
      // avoid warning on devtools trying to display this property
      enumerable: false
    };
    ["_p", "_hmrPayload", "_getters", "_customProperties"].forEach((p2) => {
      Object.defineProperty(store, p2, assign({ value: store[p2] }, nonEnumerable));
    });
  }
  pinia._p.forEach((extender) => {
    if (IS_CLIENT) {
      const extensions = scope.run(() => extender({
        store,
        app: pinia._a,
        pinia,
        options: optionsForPlugin
      }));
      Object.keys(extensions || {}).forEach((key) => store._customProperties.add(key));
      assign(store, extensions);
    } else {
      assign(store, scope.run(() => extender({
        store,
        app: pinia._a,
        pinia,
        options: optionsForPlugin
      })));
    }
  });
  if (initialState && isOptionsStore && options.hydrate) {
    options.hydrate(store.$state, initialState);
  }
  isListening = true;
  isSyncListening = true;
  return store;
}
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function defineStore(id, setup, setupOptions) {
  let options;
  const isSetupStore = typeof setup === "function";
  options = isSetupStore ? setupOptions : setup;
  function useStore(pinia, hot) {
    const hasContext = hasInjectionContext();
    pinia = // in test mode, ignore the argument provided as we can always retrieve a
    // pinia instance with getActivePinia()
    pinia || (hasContext ? inject(piniaSymbol, null) : null);
    if (pinia)
      setActivePinia(pinia);
    pinia = activePinia;
    if (!pinia._s.has(id)) {
      if (isSetupStore) {
        createSetupStore(id, setup, options, pinia);
      } else {
        createOptionsStore(id, options, pinia);
      }
    }
    const store = pinia._s.get(id);
    return store;
  }
  useStore.$id = id;
  return useStore;
}
const wrapper = (callback) => callback;
const defineBoot = wrapper;
const defineRouter = wrapper;
const routes = [
  {
    path: "/",
    component: () => __vitePreload(() => import("./MainLayout-BN3R6Al1.js"), true ? __vite__mapDeps([0,1,2,3,4,5]) : void 0),
    children: [
      {
        path: "",
        name: "Index",
        component: () => __vitePreload(() => import("./IndexPage-B6r2GPcq.js"), true ? __vite__mapDeps([6,7,8,9,10,11,12]) : void 0),
        meta: { title: "Início" }
      },
      {
        path: "products",
        name: "Products",
        component: () => __vitePreload(() => import("./ProductsPage-DTEQEyDL.js"), true ? __vite__mapDeps([13,14,15,1,3,16,2,7,8,9,17]) : void 0),
        meta: { title: "Produtos" }
      },
      {
        path: "sales",
        name: "Sales",
        component: () => __vitePreload(() => import("./SalesPage--hmMT62r.js"), true ? __vite__mapDeps([18,1,7,9,19]) : void 0),
        meta: { title: "Nova Venda" }
      },
      {
        path: "sales/history",
        name: "sales-history",
        component: () => __vitePreload(() => import("./SalesHistoryPage-CXHjMs-N.js"), true ? __vite__mapDeps([20,14,7,9,21]) : void 0)
      },
      {
        path: "meta",
        name: "meta",
        component: () => __vitePreload(() => import("./MetaPage-DV1XsV-E.js"), true ? __vite__mapDeps([22,1,7,4,23]) : void 0)
      },
      {
        path: "reports",
        name: "Reports",
        component: () => __vitePreload(() => import("./ReportsPage-DRiOUYAb.js"), true ? __vite__mapDeps([24,3,15,1,25,7,10,26]) : void 0),
        meta: { title: "Relatórios" }
      },
      {
        path: "investments",
        name: "Investments",
        component: () => __vitePreload(() => import("./InvestmentsPage-BDoSakfN.js"), true ? __vite__mapDeps([27,1,14,16,7,11,28]) : void 0),
        meta: { title: "Investimentos" }
      },
      {
        path: "payment",
        name: "Payment",
        component: () => __vitePreload(() => import("./PaymentPage-BuRhHm6L.js"), true ? __vite__mapDeps([29,25,1,15,3,7,10,30]) : void 0),
        meta: { title: "Pagamento" }
      }
    ]
  },
  {
    path: "/:catchAll(.*)*",
    component: () => __vitePreload(() => import("./ErrorNotFound-B5qW6acC.js"), true ? [] : void 0),
    meta: { title: "Erro 404" }
  }
];
const createRouter = defineRouter(function() {
  const createHistory = createWebHashHistory;
  const Router = createRouter$1({
    scrollBehavior: () => ({ left: 0, top: 0 }),
    routes,
    // Leave this as is and make changes in quasar.conf.js instead!
    // quasar.conf.js -> build -> vueRouterMode
    // quasar.conf.js -> build -> publicPath
    history: createHistory("/styllus_controle/")
  });
  return Router;
});
async function createQuasarApp(createAppFn, quasarUserOptions2) {
  const app2 = createAppFn(RootComponent);
  app2.config.performance = true;
  app2.use(Quasar, quasarUserOptions2);
  const store = typeof createPinia === "function" ? await createPinia() : createPinia;
  app2.use(store);
  const router = markRaw(
    typeof createRouter === "function" ? await createRouter({ store }) : createRouter
  );
  store.use(({ store: store2 }) => {
    store2.router = router;
  });
  return {
    app: app2,
    store,
    router
  };
}
const useSizeDefaults = {
  xs: 18,
  sm: 24,
  md: 32,
  lg: 38,
  xl: 46
};
const useSizeProps = {
  size: String
};
function useSize(props2, sizes = useSizeDefaults) {
  return computed(() => props2.size !== void 0 ? { fontSize: props2.size in sizes ? `${sizes[props2.size]}px` : props2.size } : null);
}
function hSlot(slot, otherwise) {
  return slot !== void 0 ? slot() || otherwise : otherwise;
}
function hUniqueSlot(slot, otherwise) {
  if (slot !== void 0) {
    const vnode = slot();
    if (vnode !== void 0 && vnode !== null) {
      return vnode.slice();
    }
  }
  return otherwise;
}
function hMergeSlot(slot, source) {
  return slot !== void 0 ? source.concat(slot()) : source;
}
function hMergeSlotSafely(slot, source) {
  if (slot === void 0) {
    return source;
  }
  return source !== void 0 ? source.concat(slot()) : slot();
}
function hDir(tag, data, children, key, condition, getDirsFn) {
  data.key = key + condition;
  const vnode = h(tag, data, children);
  return condition === true ? withDirectives(vnode, getDirsFn()) : vnode;
}
const defaultViewBox = "0 0 24 24";
const sameFn = (i) => i;
const ionFn = (i) => `ionicons ${i}`;
const libMap = {
  "mdi-": (i) => `mdi ${i}`,
  "icon-": sameFn,
  // fontawesome equiv
  "bt-": (i) => `bt ${i}`,
  "eva-": (i) => `eva ${i}`,
  "ion-md": ionFn,
  "ion-ios": ionFn,
  "ion-logo": ionFn,
  "iconfont ": sameFn,
  "ti-": (i) => `themify-icon ${i}`,
  "bi-": (i) => `bootstrap-icons ${i}`,
  "i-": sameFn
  // UnoCSS pure icons
};
const matMap = {
  o_: "-outlined",
  r_: "-round",
  s_: "-sharp"
};
const symMap = {
  sym_o_: "-outlined",
  sym_r_: "-rounded",
  sym_s_: "-sharp"
};
const libRE = new RegExp("^(" + Object.keys(libMap).join("|") + ")");
const matRE = new RegExp("^(" + Object.keys(matMap).join("|") + ")");
const symRE = new RegExp("^(" + Object.keys(symMap).join("|") + ")");
const mRE = /^[Mm]\s?[-+]?\.?\d/;
const imgRE = /^img:/;
const svgUseRE = /^svguse:/;
const ionRE = /^ion-/;
const faRE = /^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;
const QIcon = createComponent({
  name: "QIcon",
  props: {
    ...useSizeProps,
    tag: {
      type: String,
      default: "i"
    },
    name: String,
    color: String,
    left: Boolean,
    right: Boolean
  },
  setup(props2, { slots }) {
    const { proxy: { $q } } = getCurrentInstance();
    const sizeStyle = useSize(props2);
    const classes = computed(
      () => "q-icon" + (props2.left === true ? " on-left" : "") + (props2.right === true ? " on-right" : "") + (props2.color !== void 0 ? ` text-${props2.color}` : "")
    );
    const type = computed(() => {
      let cls;
      let icon = props2.name;
      if (icon === "none" || !icon) {
        return { none: true };
      }
      if ($q.iconMapFn !== null) {
        const res = $q.iconMapFn(icon);
        if (res !== void 0) {
          if (res.icon !== void 0) {
            icon = res.icon;
            if (icon === "none" || !icon) {
              return { none: true };
            }
          } else {
            return {
              cls: res.cls,
              content: res.content !== void 0 ? res.content : " "
            };
          }
        }
      }
      if (mRE.test(icon) === true) {
        const [def2, viewBox = defaultViewBox] = icon.split("|");
        return {
          svg: true,
          viewBox,
          nodes: def2.split("&&").map((path) => {
            const [d, style, transform] = path.split("@@");
            return h("path", { style, d, transform });
          })
        };
      }
      if (imgRE.test(icon) === true) {
        return {
          img: true,
          src: icon.substring(4)
        };
      }
      if (svgUseRE.test(icon) === true) {
        const [def2, viewBox = defaultViewBox] = icon.split("|");
        return {
          svguse: true,
          src: def2.substring(7),
          viewBox
        };
      }
      let content = " ";
      const matches = icon.match(libRE);
      if (matches !== null) {
        cls = libMap[matches[1]](icon);
      } else if (faRE.test(icon) === true) {
        cls = icon;
      } else if (ionRE.test(icon) === true) {
        cls = `ionicons ion-${$q.platform.is.ios === true ? "ios" : "md"}${icon.substring(3)}`;
      } else if (symRE.test(icon) === true) {
        cls = "notranslate material-symbols";
        const matches2 = icon.match(symRE);
        if (matches2 !== null) {
          icon = icon.substring(6);
          cls += symMap[matches2[1]];
        }
        content = icon;
      } else {
        cls = "notranslate material-icons";
        const matches2 = icon.match(matRE);
        if (matches2 !== null) {
          icon = icon.substring(2);
          cls += matMap[matches2[1]];
        }
        content = icon;
      }
      return {
        cls,
        content
      };
    });
    return () => {
      const data = {
        class: classes.value,
        style: sizeStyle.value,
        "aria-hidden": "true"
      };
      if (type.value.none === true) {
        return h(props2.tag, data, hSlot(slots.default));
      }
      if (type.value.img === true) {
        return h(props2.tag, data, hMergeSlot(slots.default, [
          h("img", { src: type.value.src })
        ]));
      }
      if (type.value.svg === true) {
        return h(props2.tag, data, hMergeSlot(slots.default, [
          h("svg", {
            viewBox: type.value.viewBox || "0 0 24 24"
          }, type.value.nodes)
        ]));
      }
      if (type.value.svguse === true) {
        return h(props2.tag, data, hMergeSlot(slots.default, [
          h("svg", {
            viewBox: type.value.viewBox
          }, [
            h("use", { "xlink:href": type.value.src })
          ])
        ]));
      }
      if (type.value.cls !== void 0) {
        data.class += " " + type.value.cls;
      }
      return h(props2.tag, data, hMergeSlot(slots.default, [
        type.value.content
      ]));
    };
  }
});
const QAvatar = createComponent({
  name: "QAvatar",
  props: {
    ...useSizeProps,
    fontSize: String,
    color: String,
    textColor: String,
    icon: String,
    square: Boolean,
    rounded: Boolean
  },
  setup(props2, { slots }) {
    const sizeStyle = useSize(props2);
    const classes = computed(
      () => "q-avatar" + (props2.color ? ` bg-${props2.color}` : "") + (props2.textColor ? ` text-${props2.textColor} q-chip--colored` : "") + (props2.square === true ? " q-avatar--square" : props2.rounded === true ? " rounded-borders" : "")
    );
    const contentStyle = computed(() => props2.fontSize ? { fontSize: props2.fontSize } : null);
    return () => {
      const icon = props2.icon !== void 0 ? [h(QIcon, { name: props2.icon })] : void 0;
      return h("div", {
        class: classes.value,
        style: sizeStyle.value
      }, [
        h("div", {
          class: "q-avatar__content row flex-center overflow-hidden",
          style: contentStyle.value
        }, hMergeSlotSafely(slots.default, icon))
      ]);
    };
  }
});
const useSpinnerProps = {
  size: {
    type: [String, Number],
    default: "1em"
  },
  color: String
};
function useSpinner(props2) {
  return {
    cSize: computed(() => props2.size in useSizeDefaults ? `${useSizeDefaults[props2.size]}px` : props2.size),
    classes: computed(
      () => "q-spinner" + (props2.color ? ` text-${props2.color}` : "")
    )
  };
}
const QSpinner = createComponent({
  name: "QSpinner",
  props: {
    ...useSpinnerProps,
    thickness: {
      type: Number,
      default: 5
    }
  },
  setup(props2) {
    const { cSize, classes } = useSpinner(props2);
    return () => h("svg", {
      class: classes.value + " q-spinner-mat",
      width: cSize.value,
      height: cSize.value,
      viewBox: "25 25 50 50"
    }, [
      h("circle", {
        class: "path",
        cx: "50",
        cy: "50",
        r: "20",
        fill: "none",
        stroke: "currentColor",
        "stroke-width": props2.thickness,
        "stroke-miterlimit": "10"
      })
    ]);
  }
});
function css(element, css2) {
  const style = element.style;
  for (const prop in css2) {
    style[prop] = css2[prop];
  }
}
function getElement(el) {
  if (el === void 0 || el === null) {
    return void 0;
  }
  if (typeof el === "string") {
    try {
      return document.querySelector(el) || void 0;
    } catch (err) {
      return void 0;
    }
  }
  const target2 = unref(el);
  if (target2) {
    return target2.$el || target2;
  }
}
function childHasFocus(el, focusedEl) {
  if (el === void 0 || el === null || el.contains(focusedEl) === true) {
    return true;
  }
  for (let next = el.nextElementSibling; next !== null; next = next.nextElementSibling) {
    if (next.contains(focusedEl)) {
      return true;
    }
  }
  return false;
}
function throttle(fn, limit = 250) {
  let wait = false, result;
  return function() {
    if (wait === false) {
      wait = true;
      setTimeout(() => {
        wait = false;
      }, limit);
      result = fn.apply(this, arguments);
    }
    return result;
  };
}
function showRipple(evt, el, ctx, forceCenter) {
  ctx.modifiers.stop === true && stop(evt);
  const color = ctx.modifiers.color;
  let center = ctx.modifiers.center;
  center = center === true || forceCenter === true;
  const node = document.createElement("span"), innerNode = document.createElement("span"), pos = position(evt), { left, top, width, height } = el.getBoundingClientRect(), diameter = Math.sqrt(width * width + height * height), radius = diameter / 2, centerX = `${(width - diameter) / 2}px`, x = center ? centerX : `${pos.left - left - radius}px`, centerY = `${(height - diameter) / 2}px`, y = center ? centerY : `${pos.top - top - radius}px`;
  innerNode.className = "q-ripple__inner";
  css(innerNode, {
    height: `${diameter}px`,
    width: `${diameter}px`,
    transform: `translate3d(${x},${y},0) scale3d(.2,.2,1)`,
    opacity: 0
  });
  node.className = `q-ripple${color ? " text-" + color : ""}`;
  node.setAttribute("dir", "ltr");
  node.appendChild(innerNode);
  el.appendChild(node);
  const abort = () => {
    node.remove();
    clearTimeout(timer);
  };
  ctx.abort.push(abort);
  let timer = setTimeout(() => {
    innerNode.classList.add("q-ripple__inner--enter");
    innerNode.style.transform = `translate3d(${centerX},${centerY},0) scale3d(1,1,1)`;
    innerNode.style.opacity = 0.2;
    timer = setTimeout(() => {
      innerNode.classList.remove("q-ripple__inner--enter");
      innerNode.classList.add("q-ripple__inner--leave");
      innerNode.style.opacity = 0;
      timer = setTimeout(() => {
        node.remove();
        ctx.abort.splice(ctx.abort.indexOf(abort), 1);
      }, 275);
    }, 250);
  }, 50);
}
function updateModifiers(ctx, { modifiers, value, arg }) {
  const cfg = Object.assign({}, ctx.cfg.ripple, modifiers, value);
  ctx.modifiers = {
    early: cfg.early === true,
    stop: cfg.stop === true,
    center: cfg.center === true,
    color: cfg.color || arg,
    keyCodes: [].concat(cfg.keyCodes || 13)
  };
}
const Ripple = createDirective(
  {
    name: "ripple",
    beforeMount(el, binding) {
      const cfg = binding.instance.$.appContext.config.globalProperties.$q.config || {};
      if (cfg.ripple === false) return;
      const ctx = {
        cfg,
        enabled: binding.value !== false,
        modifiers: {},
        abort: [],
        start(evt) {
          if (ctx.enabled === true && evt.qSkipRipple !== true && evt.type === (ctx.modifiers.early === true ? "pointerdown" : "click")) {
            showRipple(evt, el, ctx, evt.qKeyEvent === true);
          }
        },
        keystart: throttle((evt) => {
          if (ctx.enabled === true && evt.qSkipRipple !== true && isKeyCode(evt, ctx.modifiers.keyCodes) === true && evt.type === `key${ctx.modifiers.early === true ? "down" : "up"}`) {
            showRipple(evt, el, ctx, true);
          }
        }, 300)
      };
      updateModifiers(ctx, binding);
      el.__qripple = ctx;
      addEvt(ctx, "main", [
        [el, "pointerdown", "start", "passive"],
        [el, "click", "start", "passive"],
        [el, "keydown", "keystart", "passive"],
        [el, "keyup", "keystart", "passive"]
      ]);
    },
    updated(el, binding) {
      if (binding.oldValue !== binding.value) {
        const ctx = el.__qripple;
        if (ctx !== void 0) {
          ctx.enabled = binding.value !== false;
          if (ctx.enabled === true && Object(binding.value) === binding.value) {
            updateModifiers(ctx, binding);
          }
        }
      }
    },
    beforeUnmount(el) {
      const ctx = el.__qripple;
      if (ctx !== void 0) {
        ctx.abort.forEach((fn) => {
          fn();
        });
        cleanEvt(ctx, "main");
        delete el._qripple;
      }
    }
  }
);
const alignMap = {
  left: "start",
  center: "center",
  right: "end",
  between: "between",
  around: "around",
  evenly: "evenly",
  stretch: "stretch"
};
const alignValues = Object.keys(alignMap);
const useAlignProps = {
  align: {
    type: String,
    validator: (v) => alignValues.includes(v)
  }
};
function useAlign(props2) {
  return computed(() => {
    const align = props2.align === void 0 ? props2.vertical === true ? "stretch" : "left" : props2.align;
    return `${props2.vertical === true ? "items" : "justify"}-${alignMap[align]}`;
  });
}
function getParentProxy(proxy) {
  if (Object(proxy.$parent) === proxy.$parent) {
    return proxy.$parent;
  }
  let { parent } = proxy.$;
  while (Object(parent) === parent) {
    if (Object(parent.proxy) === parent.proxy) {
      return parent.proxy;
    }
    parent = parent.parent;
  }
}
function vmHasRouter(vm2) {
  return vm2.appContext.config.globalProperties.$router !== void 0;
}
function vmIsDestroyed(vm2) {
  return vm2.isUnmounted === true || vm2.isDeactivated === true;
}
function getOriginalPath(record) {
  return record ? record.aliasOf ? record.aliasOf.path : record.path : "";
}
function isSameRouteRecord(a, b) {
  return (a.aliasOf || a) === (b.aliasOf || b);
}
function includesParams(outer, inner) {
  for (const key in inner) {
    const innerValue = inner[key], outerValue = outer[key];
    if (typeof innerValue === "string") {
      if (innerValue !== outerValue) {
        return false;
      }
    } else if (Array.isArray(outerValue) === false || outerValue.length !== innerValue.length || innerValue.some((value, i) => value !== outerValue[i])) {
      return false;
    }
  }
  return true;
}
function isEquivalentArray(a, b) {
  return Array.isArray(b) === true ? a.length === b.length && a.every((value, i) => value === b[i]) : a.length === 1 && a[0] === b;
}
function isSameRouteLocationParamsValue(a, b) {
  return Array.isArray(a) === true ? isEquivalentArray(a, b) : Array.isArray(b) === true ? isEquivalentArray(b, a) : a === b;
}
function isSameRouteLocationParams(a, b) {
  if (Object.keys(a).length !== Object.keys(b).length) {
    return false;
  }
  for (const key in a) {
    if (isSameRouteLocationParamsValue(a[key], b[key]) === false) {
      return false;
    }
  }
  return true;
}
const useRouterLinkNonMatchingProps = {
  // router-link
  to: [String, Object],
  replace: Boolean,
  // regular <a> link
  href: String,
  target: String,
  // state
  disable: Boolean
};
const useRouterLinkProps = {
  ...useRouterLinkNonMatchingProps,
  // router-link
  exact: Boolean,
  activeClass: {
    type: String,
    default: "q-router-link--active"
  },
  exactActiveClass: {
    type: String,
    default: "q-router-link--exact-active"
  }
};
function useRouterLink({ fallbackTag, useDisableForRouterLinkProps = true } = {}) {
  const vm2 = getCurrentInstance();
  const { props: props2, proxy, emit: emit2 } = vm2;
  const hasRouter = vmHasRouter(vm2);
  const hasHrefLink = computed(() => props2.disable !== true && props2.href !== void 0);
  const hasRouterLinkProps = useDisableForRouterLinkProps === true ? computed(
    () => hasRouter === true && props2.disable !== true && hasHrefLink.value !== true && props2.to !== void 0 && props2.to !== null && props2.to !== ""
  ) : computed(
    () => hasRouter === true && hasHrefLink.value !== true && props2.to !== void 0 && props2.to !== null && props2.to !== ""
  );
  const resolvedLink = computed(() => hasRouterLinkProps.value === true ? getLink(props2.to) : null);
  const hasRouterLink = computed(() => resolvedLink.value !== null);
  const hasLink = computed(() => hasHrefLink.value === true || hasRouterLink.value === true);
  const linkTag = computed(() => props2.type === "a" || hasLink.value === true ? "a" : props2.tag || fallbackTag || "div");
  const linkAttrs = computed(() => hasHrefLink.value === true ? {
    href: props2.href,
    target: props2.target
  } : hasRouterLink.value === true ? {
    href: resolvedLink.value.href,
    target: props2.target
  } : {});
  const linkActiveIndex = computed(() => {
    if (hasRouterLink.value === false) {
      return -1;
    }
    const { matched } = resolvedLink.value, { length } = matched, routeMatched = matched[length - 1];
    if (routeMatched === void 0) {
      return -1;
    }
    const currentMatched = proxy.$route.matched;
    if (currentMatched.length === 0) {
      return -1;
    }
    const index = currentMatched.findIndex(
      isSameRouteRecord.bind(null, routeMatched)
    );
    if (index !== -1) {
      return index;
    }
    const parentRecordPath = getOriginalPath(matched[length - 2]);
    return (
      // we are dealing with nested routes
      length > 1 && getOriginalPath(routeMatched) === parentRecordPath && currentMatched[currentMatched.length - 1].path !== parentRecordPath ? currentMatched.findIndex(
        isSameRouteRecord.bind(null, matched[length - 2])
      ) : index
    );
  });
  const linkIsActive = computed(
    () => hasRouterLink.value === true && linkActiveIndex.value !== -1 && includesParams(proxy.$route.params, resolvedLink.value.params)
  );
  const linkIsExactActive = computed(
    () => linkIsActive.value === true && linkActiveIndex.value === proxy.$route.matched.length - 1 && isSameRouteLocationParams(proxy.$route.params, resolvedLink.value.params)
  );
  const linkClass = computed(() => hasRouterLink.value === true ? linkIsExactActive.value === true ? ` ${props2.exactActiveClass} ${props2.activeClass}` : props2.exact === true ? "" : linkIsActive.value === true ? ` ${props2.activeClass}` : "" : "");
  function getLink(to) {
    try {
      return proxy.$router.resolve(to);
    } catch (_) {
    }
    return null;
  }
  function navigateToRouterLink(e, { returnRouterError, to = props2.to, replace = props2.replace } = {}) {
    if (props2.disable === true) {
      e.preventDefault();
      return Promise.resolve(false);
    }
    if (
      // don't redirect with control keys;
      // should match RouterLink from Vue Router
      e.metaKey || e.altKey || e.ctrlKey || e.shiftKey || e.button !== void 0 && e.button !== 0 || props2.target === "_blank"
    ) {
      return Promise.resolve(false);
    }
    e.preventDefault();
    const promise = proxy.$router[replace === true ? "replace" : "push"](to);
    return returnRouterError === true ? promise : promise.then(() => {
    }).catch(() => {
    });
  }
  function navigateOnClick(e) {
    if (hasRouterLink.value === true) {
      const go = (opts) => navigateToRouterLink(e, opts);
      emit2("click", e, go);
      e.defaultPrevented !== true && go();
    } else {
      emit2("click", e);
    }
  }
  return {
    hasRouterLink,
    hasHrefLink,
    hasLink,
    linkTag,
    resolvedLink,
    linkIsActive,
    linkIsExactActive,
    linkClass,
    linkAttrs,
    getLink,
    navigateToRouterLink,
    navigateOnClick
  };
}
const btnPadding = {
  none: 0,
  xs: 4,
  sm: 8,
  md: 16,
  lg: 24,
  xl: 32
};
const defaultSizes = {
  xs: 8,
  sm: 10,
  md: 14,
  lg: 20,
  xl: 24
};
const formTypes = ["button", "submit", "reset"];
const mediaTypeRE = /[^\s]\/[^\s]/;
const btnDesignOptions = ["flat", "outline", "push", "unelevated"];
function getBtnDesign(props2, defaultValue) {
  if (props2.flat === true) return "flat";
  if (props2.outline === true) return "outline";
  if (props2.push === true) return "push";
  if (props2.unelevated === true) return "unelevated";
  return defaultValue;
}
const nonRoundBtnProps = {
  ...useSizeProps,
  ...useRouterLinkNonMatchingProps,
  type: {
    type: String,
    default: "button"
  },
  label: [Number, String],
  icon: String,
  iconRight: String,
  ...btnDesignOptions.reduce(
    (acc, val) => (acc[val] = Boolean) && acc,
    {}
  ),
  square: Boolean,
  rounded: Boolean,
  glossy: Boolean,
  size: String,
  fab: Boolean,
  fabMini: Boolean,
  padding: String,
  color: String,
  textColor: String,
  noCaps: Boolean,
  noWrap: Boolean,
  dense: Boolean,
  tabindex: [Number, String],
  ripple: {
    type: [Boolean, Object],
    default: true
  },
  align: {
    ...useAlignProps.align,
    default: "center"
  },
  stack: Boolean,
  stretch: Boolean,
  loading: {
    type: Boolean,
    default: null
  },
  disable: Boolean
};
const useBtnProps = {
  ...nonRoundBtnProps,
  round: Boolean
};
function useBtn(props2) {
  const sizeStyle = useSize(props2, defaultSizes);
  const alignClass = useAlign(props2);
  const { hasRouterLink, hasLink, linkTag, linkAttrs, navigateOnClick } = useRouterLink({
    fallbackTag: "button"
  });
  const style = computed(() => {
    const obj = props2.fab === false && props2.fabMini === false ? sizeStyle.value : {};
    return props2.padding !== void 0 ? Object.assign({}, obj, {
      padding: props2.padding.split(/\s+/).map((v) => v in btnPadding ? btnPadding[v] + "px" : v).join(" "),
      minWidth: "0",
      minHeight: "0"
    }) : obj;
  });
  const isRounded = computed(
    () => props2.rounded === true || props2.fab === true || props2.fabMini === true
  );
  const isActionable = computed(
    () => props2.disable !== true && props2.loading !== true
  );
  const tabIndex = computed(() => isActionable.value === true ? props2.tabindex || 0 : -1);
  const design = computed(() => getBtnDesign(props2, "standard"));
  const attributes = computed(() => {
    const acc = { tabindex: tabIndex.value };
    if (hasLink.value === true) {
      Object.assign(acc, linkAttrs.value);
    } else if (formTypes.includes(props2.type) === true) {
      acc.type = props2.type;
    }
    if (linkTag.value === "a") {
      if (props2.disable === true) {
        acc["aria-disabled"] = "true";
      } else if (acc.href === void 0) {
        acc.role = "button";
      }
      if (hasRouterLink.value !== true && mediaTypeRE.test(props2.type) === true) {
        acc.type = props2.type;
      }
    } else if (props2.disable === true) {
      acc.disabled = "";
      acc["aria-disabled"] = "true";
    }
    if (props2.loading === true && props2.percentage !== void 0) {
      Object.assign(acc, {
        role: "progressbar",
        "aria-valuemin": 0,
        "aria-valuemax": 100,
        "aria-valuenow": props2.percentage
      });
    }
    return acc;
  });
  const classes = computed(() => {
    let colors;
    if (props2.color !== void 0) {
      if (props2.flat === true || props2.outline === true) {
        colors = `text-${props2.textColor || props2.color}`;
      } else {
        colors = `bg-${props2.color} text-${props2.textColor || "white"}`;
      }
    } else if (props2.textColor) {
      colors = `text-${props2.textColor}`;
    }
    const shape = props2.round === true ? "round" : `rectangle${isRounded.value === true ? " q-btn--rounded" : props2.square === true ? " q-btn--square" : ""}`;
    return `q-btn--${design.value} q-btn--${shape}` + (colors !== void 0 ? " " + colors : "") + (isActionable.value === true ? " q-btn--actionable q-focusable q-hoverable" : props2.disable === true ? " disabled" : "") + (props2.fab === true ? " q-btn--fab" : props2.fabMini === true ? " q-btn--fab-mini" : "") + (props2.noCaps === true ? " q-btn--no-uppercase" : "") + (props2.dense === true ? " q-btn--dense" : "") + (props2.stretch === true ? " no-border-radius self-stretch" : "") + (props2.glossy === true ? " glossy" : "") + (props2.square ? " q-btn--square" : "");
  });
  const innerClasses = computed(
    () => alignClass.value + (props2.stack === true ? " column" : " row") + (props2.noWrap === true ? " no-wrap text-no-wrap" : "") + (props2.loading === true ? " q-btn__content--hidden" : "")
  );
  return {
    classes,
    style,
    innerClasses,
    attributes,
    hasLink,
    linkTag,
    navigateOnClick,
    isActionable
  };
}
const { passiveCapture } = listenOpts;
let touchTarget = null, keyboardTarget = null, mouseTarget = null;
const QBtn = createComponent({
  name: "QBtn",
  props: {
    ...useBtnProps,
    percentage: Number,
    darkPercentage: Boolean,
    onTouchstart: [Function, Array]
  },
  emits: ["click", "keydown", "mousedown", "keyup"],
  setup(props2, { slots, emit: emit2 }) {
    const { proxy } = getCurrentInstance();
    const {
      classes,
      style,
      innerClasses,
      attributes,
      hasLink,
      linkTag,
      navigateOnClick,
      isActionable
    } = useBtn(props2);
    const rootRef = ref(null);
    const blurTargetRef = ref(null);
    let localTouchTargetEl = null, avoidMouseRipple, mouseTimer = null;
    const hasLabel = computed(
      () => props2.label !== void 0 && props2.label !== null && props2.label !== ""
    );
    const ripple = computed(() => props2.disable === true || props2.ripple === false ? false : {
      keyCodes: hasLink.value === true ? [13, 32] : [13],
      ...props2.ripple === true ? {} : props2.ripple
    });
    const rippleProps = computed(() => ({ center: props2.round }));
    const percentageStyle = computed(() => {
      const val = Math.max(0, Math.min(100, props2.percentage));
      return val > 0 ? { transition: "transform 0.6s", transform: `translateX(${val - 100}%)` } : {};
    });
    const onEvents = computed(() => {
      if (props2.loading === true) {
        return {
          onMousedown: onLoadingEvt,
          onTouchstart: onLoadingEvt,
          onClick: onLoadingEvt,
          onKeydown: onLoadingEvt,
          onKeyup: onLoadingEvt
        };
      }
      if (isActionable.value === true) {
        const acc = {
          onClick,
          onKeydown: onKeydown2,
          onMousedown
        };
        if (proxy.$q.platform.has.touch === true) {
          const suffix = props2.onTouchstart !== void 0 ? "" : "Passive";
          acc[`onTouchstart${suffix}`] = onTouchstart;
        }
        return acc;
      }
      return {
        // needed; especially for disabled <a> tags
        onClick: stopAndPrevent
      };
    });
    const nodeProps = computed(() => ({
      ref: rootRef,
      class: "q-btn q-btn-item non-selectable no-outline " + classes.value,
      style: style.value,
      ...attributes.value,
      ...onEvents.value
    }));
    function onClick(e) {
      if (rootRef.value === null) return;
      if (e !== void 0) {
        if (e.defaultPrevented === true) return;
        const el = document.activeElement;
        if (props2.type === "submit" && el !== document.body && rootRef.value.contains(el) === false && el.contains(rootRef.value) === false) {
          e.qAvoidFocus !== true && rootRef.value.focus();
          const onClickCleanup = () => {
            document.removeEventListener("keydown", stopAndPrevent, true);
            document.removeEventListener("keyup", onClickCleanup, passiveCapture);
            rootRef.value?.removeEventListener("blur", onClickCleanup, passiveCapture);
          };
          document.addEventListener("keydown", stopAndPrevent, true);
          document.addEventListener("keyup", onClickCleanup, passiveCapture);
          rootRef.value.addEventListener("blur", onClickCleanup, passiveCapture);
        }
      }
      navigateOnClick(e);
    }
    function onKeydown2(e) {
      if (rootRef.value === null) return;
      emit2("keydown", e);
      if (isKeyCode(e, [13, 32]) === true && keyboardTarget !== rootRef.value) {
        keyboardTarget !== null && cleanup();
        if (e.defaultPrevented !== true) {
          e.qAvoidFocus !== true && rootRef.value.focus();
          keyboardTarget = rootRef.value;
          rootRef.value.classList.add("q-btn--active");
          document.addEventListener("keyup", onPressEnd, true);
          rootRef.value.addEventListener("blur", onPressEnd, passiveCapture);
        }
        stopAndPrevent(e);
      }
    }
    function onTouchstart(e) {
      if (rootRef.value === null) return;
      emit2("touchstart", e);
      if (e.defaultPrevented === true) return;
      if (touchTarget !== rootRef.value) {
        touchTarget !== null && cleanup();
        touchTarget = rootRef.value;
        localTouchTargetEl = e.target;
        localTouchTargetEl.addEventListener("touchcancel", onPressEnd, passiveCapture);
        localTouchTargetEl.addEventListener("touchend", onPressEnd, passiveCapture);
      }
      avoidMouseRipple = true;
      mouseTimer !== null && clearTimeout(mouseTimer);
      mouseTimer = setTimeout(() => {
        mouseTimer = null;
        avoidMouseRipple = false;
      }, 200);
    }
    function onMousedown(e) {
      if (rootRef.value === null) return;
      e.qSkipRipple = avoidMouseRipple === true;
      emit2("mousedown", e);
      if (e.defaultPrevented !== true && mouseTarget !== rootRef.value) {
        mouseTarget !== null && cleanup();
        mouseTarget = rootRef.value;
        rootRef.value.classList.add("q-btn--active");
        document.addEventListener("mouseup", onPressEnd, passiveCapture);
      }
    }
    function onPressEnd(e) {
      if (rootRef.value === null) return;
      if (e?.type === "blur" && document.activeElement === rootRef.value) return;
      if (e?.type === "keyup") {
        if (keyboardTarget === rootRef.value && isKeyCode(e, [13, 32]) === true) {
          const evt = new MouseEvent("click", e);
          evt.qKeyEvent = true;
          e.defaultPrevented === true && prevent(evt);
          e.cancelBubble === true && stop(evt);
          rootRef.value.dispatchEvent(evt);
          stopAndPrevent(e);
          e.qKeyEvent = true;
        }
        emit2("keyup", e);
      }
      cleanup();
    }
    function cleanup(destroying) {
      const blurTarget = blurTargetRef.value;
      if (destroying !== true && (touchTarget === rootRef.value || mouseTarget === rootRef.value) && blurTarget !== null && blurTarget !== document.activeElement) {
        blurTarget.setAttribute("tabindex", -1);
        blurTarget.focus();
      }
      if (touchTarget === rootRef.value) {
        if (localTouchTargetEl !== null) {
          localTouchTargetEl.removeEventListener("touchcancel", onPressEnd, passiveCapture);
          localTouchTargetEl.removeEventListener("touchend", onPressEnd, passiveCapture);
        }
        touchTarget = localTouchTargetEl = null;
      }
      if (mouseTarget === rootRef.value) {
        document.removeEventListener("mouseup", onPressEnd, passiveCapture);
        mouseTarget = null;
      }
      if (keyboardTarget === rootRef.value) {
        document.removeEventListener("keyup", onPressEnd, true);
        rootRef.value?.removeEventListener("blur", onPressEnd, passiveCapture);
        keyboardTarget = null;
      }
      rootRef.value?.classList.remove("q-btn--active");
    }
    function onLoadingEvt(evt) {
      stopAndPrevent(evt);
      evt.qSkipRipple = true;
    }
    onBeforeUnmount(() => {
      cleanup(true);
    });
    Object.assign(proxy, {
      click: (e) => {
        if (isActionable.value === true) {
          onClick(e);
        }
      }
    });
    return () => {
      let inner = [];
      props2.icon !== void 0 && inner.push(
        h(QIcon, {
          name: props2.icon,
          left: props2.stack !== true && hasLabel.value === true,
          role: "img"
        })
      );
      hasLabel.value === true && inner.push(
        h("span", { class: "block" }, [props2.label])
      );
      inner = hMergeSlot(slots.default, inner);
      if (props2.iconRight !== void 0 && props2.round === false) {
        inner.push(
          h(QIcon, {
            name: props2.iconRight,
            right: props2.stack !== true && hasLabel.value === true,
            role: "img"
          })
        );
      }
      const child = [
        h("span", {
          class: "q-focus-helper",
          ref: blurTargetRef
        })
      ];
      if (props2.loading === true && props2.percentage !== void 0) {
        child.push(
          h("span", {
            class: "q-btn__progress absolute-full overflow-hidden" + (props2.darkPercentage === true ? " q-btn__progress--dark" : "")
          }, [
            h("span", {
              class: "q-btn__progress-indicator fit block",
              style: percentageStyle.value
            })
          ])
        );
      }
      child.push(
        h("span", {
          class: "q-btn__content text-center col items-center q-anchor--skip " + innerClasses.value
        }, inner)
      );
      props2.loading !== null && child.push(
        h(Transition, {
          name: "q-transition--fade"
        }, () => props2.loading === true ? [
          h("span", {
            key: "loading",
            class: "absolute-full flex flex-center"
          }, slots.loading !== void 0 ? slots.loading() : [h(QSpinner)])
        ] : null)
      );
      return withDirectives(
        h(
          linkTag.value,
          nodeProps.value,
          child
        ),
        [[
          Ripple,
          ripple.value,
          void 0,
          rippleProps.value
        ]]
      );
    };
  }
});
let portalIndex = 1;
let target = document.body;
function createGlobalNode(id, portalType) {
  const el = document.createElement("div");
  el.id = portalType !== void 0 ? `q-portal--${portalType}--${portalIndex++}` : id;
  if (globalConfig.globalNodes !== void 0) {
    const cls = globalConfig.globalNodes.class;
    if (cls !== void 0) {
      el.className = cls;
    }
  }
  target.appendChild(el);
  return el;
}
function removeGlobalNode(el) {
  el.remove();
}
let uid$2 = 0;
const defaults$1 = {};
const groups = {};
const notificationsList = {};
const positionClass$1 = {};
const emptyRE = /^\s*$/;
const notifRefs = [];
const invalidTimeoutValues = [void 0, null, true, false, ""];
const positionList = [
  "top-left",
  "top-right",
  "bottom-left",
  "bottom-right",
  "top",
  "bottom",
  "left",
  "right",
  "center"
];
const badgePositions = [
  "top-left",
  "top-right",
  "bottom-left",
  "bottom-right"
];
const notifTypes = {
  positive: {
    icon: ($q) => $q.iconSet.type.positive,
    color: "positive"
  },
  negative: {
    icon: ($q) => $q.iconSet.type.negative,
    color: "negative"
  },
  warning: {
    icon: ($q) => $q.iconSet.type.warning,
    color: "warning",
    textColor: "dark"
  },
  info: {
    icon: ($q) => $q.iconSet.type.info,
    color: "info"
  },
  ongoing: {
    group: false,
    timeout: 0,
    spinner: true,
    color: "grey-8"
  }
};
function addNotification(config, $q, originalApi) {
  if (!config) {
    return logError("parameter required");
  }
  let Api;
  const notif = { textColor: "white" };
  if (config.ignoreDefaults !== true) {
    Object.assign(notif, defaults$1);
  }
  if (isObject(config) === false) {
    if (notif.type) {
      Object.assign(notif, notifTypes[notif.type]);
    }
    config = { message: config };
  }
  Object.assign(notif, notifTypes[config.type || notif.type], config);
  if (typeof notif.icon === "function") {
    notif.icon = notif.icon($q);
  }
  if (!notif.spinner) {
    notif.spinner = false;
  } else {
    if (notif.spinner === true) {
      notif.spinner = QSpinner;
    }
    notif.spinner = markRaw(notif.spinner);
  }
  notif.meta = {
    hasMedia: Boolean(notif.spinner !== false || notif.icon || notif.avatar),
    hasText: hasContent(notif.message) || hasContent(notif.caption)
  };
  if (notif.position) {
    if (positionList.includes(notif.position) === false) {
      return logError("wrong position", config);
    }
  } else {
    notif.position = "bottom";
  }
  if (invalidTimeoutValues.includes(notif.timeout) === true) {
    notif.timeout = 5e3;
  } else {
    const t = Number(notif.timeout);
    if (isNaN(t) || t < 0) {
      return logError("wrong timeout", config);
    }
    notif.timeout = Number.isFinite(t) ? t : 0;
  }
  if (notif.timeout === 0) {
    notif.progress = false;
  } else if (notif.progress === true) {
    notif.meta.progressClass = "q-notification__progress" + (notif.progressClass ? ` ${notif.progressClass}` : "");
    notif.meta.progressStyle = {
      animationDuration: `${notif.timeout + 1e3}ms`
    };
  }
  const actions = (Array.isArray(config.actions) === true ? config.actions : []).concat(
    config.ignoreDefaults !== true && Array.isArray(defaults$1.actions) === true ? defaults$1.actions : []
  ).concat(
    Array.isArray(notifTypes[config.type]?.actions) === true ? notifTypes[config.type].actions : []
  );
  const { closeBtn } = notif;
  closeBtn && actions.push({
    label: typeof closeBtn === "string" ? closeBtn : $q.lang.label.close
  });
  notif.actions = actions.map(({ handler, noDismiss, ...item }) => ({
    flat: true,
    ...item,
    onClick: typeof handler === "function" ? () => {
      handler();
      noDismiss !== true && dismiss();
    } : () => {
      dismiss();
    }
  }));
  if (notif.multiLine === void 0) {
    notif.multiLine = notif.actions.length > 1;
  }
  Object.assign(notif.meta, {
    class: `q-notification row items-stretch q-notification--${notif.multiLine === true ? "multi-line" : "standard"}` + (notif.color !== void 0 ? ` bg-${notif.color}` : "") + (notif.textColor !== void 0 ? ` text-${notif.textColor}` : "") + (notif.classes !== void 0 ? ` ${notif.classes}` : ""),
    wrapperClass: "q-notification__wrapper col relative-position border-radius-inherit " + (notif.multiLine === true ? "column no-wrap justify-center" : "row items-center"),
    contentClass: "q-notification__content row items-center" + (notif.multiLine === true ? "" : " col"),
    leftClass: notif.meta.hasText === true ? "additional" : "single",
    attrs: {
      role: "alert",
      ...notif.attrs
    }
  });
  if (notif.group === false) {
    notif.group = void 0;
    notif.meta.group = void 0;
  } else {
    if (notif.group === void 0 || notif.group === true) {
      notif.group = [
        notif.message,
        notif.caption,
        notif.multiline
      ].concat(
        notif.actions.map((props2) => `${props2.label}*${props2.icon}`)
      ).join("|");
    }
    notif.meta.group = notif.group + "|" + notif.position;
  }
  if (notif.actions.length === 0) {
    notif.actions = void 0;
  } else {
    notif.meta.actionsClass = "q-notification__actions row items-center " + (notif.multiLine === true ? "justify-end" : "col-auto") + (notif.meta.hasMedia === true ? " q-notification__actions--with-media" : "");
  }
  if (originalApi !== void 0) {
    if (originalApi.notif.meta.timer) {
      clearTimeout(originalApi.notif.meta.timer);
      originalApi.notif.meta.timer = void 0;
    }
    notif.meta.uid = originalApi.notif.meta.uid;
    const index = notificationsList[notif.position].value.indexOf(originalApi.notif);
    notificationsList[notif.position].value[index] = notif;
  } else {
    const original = groups[notif.meta.group];
    if (original === void 0) {
      notif.meta.uid = uid$2++;
      notif.meta.badge = 1;
      if (["left", "right", "center"].indexOf(notif.position) !== -1) {
        notificationsList[notif.position].value.splice(
          Math.floor(notificationsList[notif.position].value.length / 2),
          0,
          notif
        );
      } else {
        const action = notif.position.indexOf("top") !== -1 ? "unshift" : "push";
        notificationsList[notif.position].value[action](notif);
      }
      if (notif.group !== void 0) {
        groups[notif.meta.group] = notif;
      }
    } else {
      if (original.meta.timer) {
        clearTimeout(original.meta.timer);
        original.meta.timer = void 0;
      }
      if (notif.badgePosition !== void 0) {
        if (badgePositions.includes(notif.badgePosition) === false) {
          return logError("wrong badgePosition", config);
        }
      } else {
        notif.badgePosition = `top-${notif.position.indexOf("left") !== -1 ? "right" : "left"}`;
      }
      notif.meta.uid = original.meta.uid;
      notif.meta.badge = original.meta.badge + 1;
      notif.meta.badgeClass = `q-notification__badge q-notification__badge--${notif.badgePosition}` + (notif.badgeColor !== void 0 ? ` bg-${notif.badgeColor}` : "") + (notif.badgeTextColor !== void 0 ? ` text-${notif.badgeTextColor}` : "") + (notif.badgeClass ? ` ${notif.badgeClass}` : "");
      const index = notificationsList[notif.position].value.indexOf(original);
      notificationsList[notif.position].value[index] = groups[notif.meta.group] = notif;
    }
  }
  const dismiss = () => {
    removeNotification(notif);
    Api = void 0;
  };
  if (notif.timeout > 0) {
    notif.meta.timer = setTimeout(() => {
      notif.meta.timer = void 0;
      dismiss();
    }, notif.timeout + /* show duration */
    1e3);
  }
  if (notif.group !== void 0) {
    return (props2) => {
      if (props2 !== void 0) {
        logError("trying to update a grouped one which is forbidden", config);
      } else {
        dismiss();
      }
    };
  }
  Api = {
    dismiss,
    config,
    notif
  };
  if (originalApi !== void 0) {
    Object.assign(originalApi, Api);
    return;
  }
  return (props2) => {
    if (Api !== void 0) {
      if (props2 === void 0) {
        Api.dismiss();
      } else {
        const newNotif = Object.assign({}, Api.config, props2, {
          group: false,
          position: notif.position
        });
        addNotification(newNotif, $q, Api);
      }
    }
  };
}
function removeNotification(notif) {
  if (notif.meta.timer) {
    clearTimeout(notif.meta.timer);
    notif.meta.timer = void 0;
  }
  const index = notificationsList[notif.position].value.indexOf(notif);
  if (index !== -1) {
    if (notif.group !== void 0) {
      delete groups[notif.meta.group];
    }
    const el = notifRefs["" + notif.meta.uid];
    if (el) {
      const { width, height } = getComputedStyle(el);
      el.style.left = `${el.offsetLeft}px`;
      el.style.width = width;
      el.style.height = height;
    }
    notificationsList[notif.position].value.splice(index, 1);
    if (typeof notif.onDismiss === "function") {
      notif.onDismiss();
    }
  }
}
function hasContent(str) {
  return str !== void 0 && str !== null && emptyRE.test(str) !== true;
}
function logError(error, config) {
  console.error(`Notify: ${error}`, config);
  return false;
}
function getComponent() {
  return createComponent({
    name: "QNotifications",
    // hide App from Vue devtools
    devtools: { hide: true },
    setup() {
      return () => h("div", { class: "q-notifications" }, positionList.map((pos) => {
        return h(TransitionGroup, {
          key: pos,
          class: positionClass$1[pos],
          tag: "div",
          name: `q-notification--${pos}`
        }, () => notificationsList[pos].value.map((notif) => {
          const meta = notif.meta;
          const mainChild = [];
          if (meta.hasMedia === true) {
            if (notif.spinner !== false) {
              mainChild.push(
                h(notif.spinner, {
                  class: "q-notification__spinner q-notification__spinner--" + meta.leftClass,
                  color: notif.spinnerColor,
                  size: notif.spinnerSize
                })
              );
            } else if (notif.icon) {
              mainChild.push(
                h(QIcon, {
                  class: "q-notification__icon q-notification__icon--" + meta.leftClass,
                  name: notif.icon,
                  color: notif.iconColor,
                  size: notif.iconSize,
                  role: "img"
                })
              );
            } else if (notif.avatar) {
              mainChild.push(
                h(QAvatar, {
                  class: "q-notification__avatar q-notification__avatar--" + meta.leftClass
                }, () => h("img", { src: notif.avatar, "aria-hidden": "true" }))
              );
            }
          }
          if (meta.hasText === true) {
            let msgChild;
            const msgData = { class: "q-notification__message col" };
            if (notif.html === true) {
              msgData.innerHTML = notif.caption ? `<div>${notif.message}</div><div class="q-notification__caption">${notif.caption}</div>` : notif.message;
            } else {
              const msgNode = [notif.message];
              msgChild = notif.caption ? [
                h("div", msgNode),
                h("div", { class: "q-notification__caption" }, [notif.caption])
              ] : msgNode;
            }
            mainChild.push(
              h("div", msgData, msgChild)
            );
          }
          const child = [
            h("div", { class: meta.contentClass }, mainChild)
          ];
          notif.progress === true && child.push(
            h("div", {
              key: `${meta.uid}|p|${meta.badge}`,
              class: meta.progressClass,
              style: meta.progressStyle
            })
          );
          notif.actions !== void 0 && child.push(
            h("div", {
              class: meta.actionsClass
            }, notif.actions.map((props2) => h(QBtn, props2)))
          );
          meta.badge > 1 && child.push(
            h("div", {
              key: `${meta.uid}|${meta.badge}`,
              class: notif.meta.badgeClass,
              style: notif.badgeStyle
            }, [meta.badge])
          );
          return h("div", {
            ref: (el) => {
              notifRefs["" + meta.uid] = el;
            },
            key: meta.uid,
            class: meta.class,
            ...meta.attrs
          }, [
            h("div", { class: meta.wrapperClass }, child)
          ]);
        }));
      }));
    }
  });
}
const Notify = {
  setDefaults(opts) {
    {
      isObject(opts) === true && Object.assign(defaults$1, opts);
    }
  },
  registerType(typeName, typeOpts) {
    if (isObject(typeOpts) === true) {
      notifTypes[typeName] = typeOpts;
    }
  },
  install({ $q, parentApp }) {
    $q.notify = this.create = (opts) => addNotification(opts, $q);
    $q.notify.setDefaults = this.setDefaults;
    $q.notify.registerType = this.registerType;
    if ($q.config.notify !== void 0) {
      this.setDefaults($q.config.notify);
    }
    if (this.__installed !== true) {
      positionList.forEach((pos) => {
        notificationsList[pos] = ref([]);
        const vert = ["left", "center", "right"].includes(pos) === true ? "center" : pos.indexOf("top") !== -1 ? "top" : "bottom", align = pos.indexOf("left") !== -1 ? "start" : pos.indexOf("right") !== -1 ? "end" : "center", classes = ["left", "right"].includes(pos) ? `items-${pos === "left" ? "start" : "end"} justify-center` : pos === "center" ? "flex-center" : `items-${align}`;
        positionClass$1[pos] = `q-notifications__list q-notifications__list--${vert} fixed column no-wrap ${classes}`;
      });
      const el = createGlobalNode("q-notify");
      createChildApp(getComponent(), parentApp).mount(el);
    }
  }
};
function useHistory(showing, hide, hideOnRouteChange) {
  let historyEntry;
  function removeFromHistory() {
    if (historyEntry !== void 0) {
      History.remove(historyEntry);
      historyEntry = void 0;
    }
  }
  onBeforeUnmount(() => {
    showing.value === true && removeFromHistory();
  });
  return {
    removeFromHistory,
    addToHistory() {
      historyEntry = {
        condition: () => hideOnRouteChange.value === true,
        handler: hide
      };
      History.add(historyEntry);
    }
  };
}
function useTimeout() {
  let timer = null;
  const vm2 = getCurrentInstance();
  function removeTimeout() {
    if (timer !== null) {
      clearTimeout(timer);
      timer = null;
    }
  }
  onDeactivated(removeTimeout);
  onBeforeUnmount(removeTimeout);
  return {
    removeTimeout,
    registerTimeout(fn, delay) {
      removeTimeout();
      if (vmIsDestroyed(vm2) === false) {
        timer = setTimeout(() => {
          timer = null;
          fn();
        }, delay);
      }
    }
  };
}
function useTick() {
  let tickFn;
  const vm2 = getCurrentInstance();
  function removeTick() {
    tickFn = void 0;
  }
  onDeactivated(removeTick);
  onBeforeUnmount(removeTick);
  return {
    removeTick,
    registerTick(fn) {
      tickFn = fn;
      nextTick(() => {
        if (tickFn === fn) {
          vmIsDestroyed(vm2) === false && tickFn();
          tickFn = void 0;
        }
      });
    }
  };
}
const useModelToggleProps = {
  modelValue: {
    type: Boolean,
    default: null
  },
  "onUpdate:modelValue": [Function, Array]
};
const useModelToggleEmits = [
  "beforeShow",
  "show",
  "beforeHide",
  "hide"
];
function useModelToggle({
  showing,
  canShow,
  // optional
  hideOnRouteChange,
  // optional
  handleShow,
  // optional
  handleHide,
  // optional
  processOnMount
  // optional
}) {
  const vm2 = getCurrentInstance();
  const { props: props2, emit: emit2, proxy } = vm2;
  let payload;
  function toggle(evt) {
    if (showing.value === true) {
      hide(evt);
    } else {
      show(evt);
    }
  }
  function show(evt) {
    if (props2.disable === true || evt?.qAnchorHandled === true || canShow !== void 0 && canShow(evt) !== true) return;
    const listener = props2["onUpdate:modelValue"] !== void 0;
    if (listener === true && true) {
      emit2("update:modelValue", true);
      payload = evt;
      nextTick(() => {
        if (payload === evt) {
          payload = void 0;
        }
      });
    }
    if (props2.modelValue === null || listener === false || false) {
      processShow(evt);
    }
  }
  function processShow(evt) {
    if (showing.value === true) return;
    showing.value = true;
    emit2("beforeShow", evt);
    if (handleShow !== void 0) {
      handleShow(evt);
    } else {
      emit2("show", evt);
    }
  }
  function hide(evt) {
    if (props2.disable === true) return;
    const listener = props2["onUpdate:modelValue"] !== void 0;
    if (listener === true && true) {
      emit2("update:modelValue", false);
      payload = evt;
      nextTick(() => {
        if (payload === evt) {
          payload = void 0;
        }
      });
    }
    if (props2.modelValue === null || listener === false || false) {
      processHide(evt);
    }
  }
  function processHide(evt) {
    if (showing.value === false) return;
    showing.value = false;
    emit2("beforeHide", evt);
    if (handleHide !== void 0) {
      handleHide(evt);
    } else {
      emit2("hide", evt);
    }
  }
  function processModelChange(val) {
    if (props2.disable === true && val === true) {
      if (props2["onUpdate:modelValue"] !== void 0) {
        emit2("update:modelValue", false);
      }
    } else if (val === true !== showing.value) {
      const fn = val === true ? processShow : processHide;
      fn(payload);
    }
  }
  watch(() => props2.modelValue, processModelChange);
  if (hideOnRouteChange !== void 0 && vmHasRouter(vm2) === true) {
    watch(() => proxy.$route.fullPath, () => {
      if (hideOnRouteChange.value === true && showing.value === true) {
        hide();
      }
    });
  }
  processOnMount === true && onMounted(() => {
    processModelChange(props2.modelValue);
  });
  const publicMethods = { show, hide, toggle };
  Object.assign(proxy, publicMethods);
  return publicMethods;
}
const useTransitionProps = {
  transitionShow: {
    type: String,
    default: "fade"
  },
  transitionHide: {
    type: String,
    default: "fade"
  },
  transitionDuration: {
    type: [String, Number],
    default: 300
  }
};
function useTransition(props2, defaultShowFn = () => {
}, defaultHideFn = () => {
}) {
  return {
    transitionProps: computed(() => {
      const show = `q-transition--${props2.transitionShow || defaultShowFn()}`;
      const hide = `q-transition--${props2.transitionHide || defaultHideFn()}`;
      return {
        appear: true,
        enterFromClass: `${show}-enter-from`,
        enterActiveClass: `${show}-enter-active`,
        enterToClass: `${show}-enter-to`,
        leaveFromClass: `${hide}-leave-from`,
        leaveActiveClass: `${hide}-leave-active`,
        leaveToClass: `${hide}-leave-to`
      };
    }),
    transitionStyle: computed(() => `--q-transition-duration: ${props2.transitionDuration}ms`)
  };
}
let queue = [];
let waitFlags = [];
function clearFlag(flag) {
  waitFlags = waitFlags.filter((entry) => entry !== flag);
}
function addFocusWaitFlag(flag) {
  clearFlag(flag);
  waitFlags.push(flag);
}
function removeFocusWaitFlag(flag) {
  clearFlag(flag);
  if (waitFlags.length === 0 && queue.length !== 0) {
    queue[queue.length - 1]();
    queue = [];
  }
}
function addFocusFn(fn) {
  if (waitFlags.length === 0) {
    fn();
  } else {
    queue.push(fn);
  }
}
function removeFocusFn(fn) {
  queue = queue.filter((entry) => entry !== fn);
}
const portalProxyList = [];
function getPortalProxy(el) {
  return portalProxyList.find(
    (proxy) => proxy.contentEl !== null && proxy.contentEl.contains(el)
  );
}
function closePortalMenus(proxy, evt) {
  do {
    if (proxy.$options.name === "QMenu") {
      proxy.hide(evt);
      if (proxy.$props.separateClosePopup === true) {
        return getParentProxy(proxy);
      }
    } else if (proxy.__qPortal === true) {
      const parent = getParentProxy(proxy);
      if (parent?.$options.name === "QPopupProxy") {
        proxy.hide(evt);
        return parent;
      } else {
        return proxy;
      }
    }
    proxy = getParentProxy(proxy);
  } while (proxy !== void 0 && proxy !== null);
}
function closePortals(proxy, evt, depth) {
  while (depth !== 0 && proxy !== void 0 && proxy !== null) {
    if (proxy.__qPortal === true) {
      depth--;
      if (proxy.$options.name === "QMenu") {
        proxy = closePortalMenus(proxy, evt);
        continue;
      }
      proxy.hide(evt);
    }
    proxy = getParentProxy(proxy);
  }
}
const QPortal = createComponent({
  name: "QPortal",
  setup(_, { slots }) {
    return () => slots.default();
  }
});
function isOnGlobalDialog(vm2) {
  vm2 = vm2.parent;
  while (vm2 !== void 0 && vm2 !== null) {
    if (vm2.type.name === "QGlobalDialog") {
      return true;
    }
    if (vm2.type.name === "QDialog" || vm2.type.name === "QMenu") {
      return false;
    }
    vm2 = vm2.parent;
  }
  return false;
}
function usePortal(vm2, innerRef, renderPortalContent, type) {
  const portalIsActive = ref(false);
  const portalIsAccessible = ref(false);
  let portalEl = null;
  const focusObj = {};
  const onGlobalDialog = type === "dialog" && isOnGlobalDialog(vm2);
  function showPortal(isReady) {
    if (isReady === true) {
      removeFocusWaitFlag(focusObj);
      portalIsAccessible.value = true;
      return;
    }
    portalIsAccessible.value = false;
    if (portalIsActive.value === false) {
      if (onGlobalDialog === false && portalEl === null) {
        portalEl = createGlobalNode(false, type);
      }
      portalIsActive.value = true;
      portalProxyList.push(vm2.proxy);
      addFocusWaitFlag(focusObj);
    }
  }
  function hidePortal(isReady) {
    portalIsAccessible.value = false;
    if (isReady !== true) return;
    removeFocusWaitFlag(focusObj);
    portalIsActive.value = false;
    const index = portalProxyList.indexOf(vm2.proxy);
    if (index !== -1) {
      portalProxyList.splice(index, 1);
    }
    if (portalEl !== null) {
      removeGlobalNode(portalEl);
      portalEl = null;
    }
  }
  onUnmounted(() => {
    hidePortal(true);
  });
  vm2.proxy.__qPortal = true;
  injectProp(vm2.proxy, "contentEl", () => innerRef.value);
  return {
    showPortal,
    hidePortal,
    portalIsActive,
    portalIsAccessible,
    renderPortal: () => onGlobalDialog === true ? renderPortalContent() : portalIsActive.value === true ? [h(Teleport, { to: portalEl }, h(QPortal, renderPortalContent))] : void 0
  };
}
const scrollTargetProp = [Element, String];
const scrollTargets = [null, document, document.body, document.scrollingElement, document.documentElement];
function getScrollTarget(el, targetEl) {
  let target2 = getElement(targetEl);
  if (target2 === void 0) {
    if (el === void 0 || el === null) {
      return window;
    }
    target2 = el.closest(".scroll,.scroll-y,.overflow-auto");
  }
  return scrollTargets.includes(target2) ? window : target2;
}
function getVerticalScrollPosition(scrollTarget) {
  return scrollTarget === window ? window.pageYOffset || window.scrollY || document.body.scrollTop || 0 : scrollTarget.scrollTop;
}
function getHorizontalScrollPosition(scrollTarget) {
  return scrollTarget === window ? window.pageXOffset || window.scrollX || document.body.scrollLeft || 0 : scrollTarget.scrollLeft;
}
let size;
function getScrollbarWidth() {
  if (size !== void 0) {
    return size;
  }
  const inner = document.createElement("p"), outer = document.createElement("div");
  css(inner, {
    width: "100%",
    height: "200px"
  });
  css(outer, {
    position: "absolute",
    top: "0px",
    left: "0px",
    visibility: "hidden",
    width: "200px",
    height: "150px",
    overflow: "hidden"
  });
  outer.appendChild(inner);
  document.body.appendChild(outer);
  const w1 = inner.offsetWidth;
  outer.style.overflow = "scroll";
  let w2 = inner.offsetWidth;
  if (w1 === w2) {
    w2 = outer.clientWidth;
  }
  outer.remove();
  size = w1 - w2;
  return size;
}
function hasScrollbar(el, onY = true) {
  if (!el || el.nodeType !== Node.ELEMENT_NODE) {
    return false;
  }
  return onY ? el.scrollHeight > el.clientHeight && (el.classList.contains("scroll") || el.classList.contains("overflow-auto") || ["auto", "scroll"].includes(window.getComputedStyle(el)["overflow-y"])) : el.scrollWidth > el.clientWidth && (el.classList.contains("scroll") || el.classList.contains("overflow-auto") || ["auto", "scroll"].includes(window.getComputedStyle(el)["overflow-x"]));
}
let registered = 0, scrollPositionX, scrollPositionY, maxScrollTop, vpPendingUpdate = false, bodyLeft, bodyTop, href, closeTimer = null;
function onWheel(e) {
  if (shouldPreventScroll(e)) {
    stopAndPrevent(e);
  }
}
function shouldPreventScroll(e) {
  if (e.target === document.body || e.target.classList.contains("q-layout__backdrop")) {
    return true;
  }
  const path = getEventPath(e), shift = e.shiftKey && !e.deltaX, scrollY = !shift && Math.abs(e.deltaX) <= Math.abs(e.deltaY), delta = shift || scrollY ? e.deltaY : e.deltaX;
  for (let index = 0; index < path.length; index++) {
    const el = path[index];
    if (hasScrollbar(el, scrollY)) {
      return scrollY ? delta < 0 && el.scrollTop === 0 ? true : delta > 0 && el.scrollTop + el.clientHeight === el.scrollHeight : delta < 0 && el.scrollLeft === 0 ? true : delta > 0 && el.scrollLeft + el.clientWidth === el.scrollWidth;
    }
  }
  return true;
}
function onAppleScroll(e) {
  if (e.target === document) {
    document.scrollingElement.scrollTop = document.scrollingElement.scrollTop;
  }
}
function onAppleResize(evt) {
  if (vpPendingUpdate === true) return;
  vpPendingUpdate = true;
  requestAnimationFrame(() => {
    vpPendingUpdate = false;
    const { height } = evt.target, { clientHeight, scrollTop } = document.scrollingElement;
    if (maxScrollTop === void 0 || height !== window.innerHeight) {
      maxScrollTop = clientHeight - height;
      document.scrollingElement.scrollTop = scrollTop;
    }
    if (scrollTop > maxScrollTop) {
      document.scrollingElement.scrollTop -= Math.ceil((scrollTop - maxScrollTop) / 8);
    }
  });
}
function apply(action) {
  const body = document.body, hasViewport = window.visualViewport !== void 0;
  if (action === "add") {
    const { overflowY, overflowX } = window.getComputedStyle(body);
    scrollPositionX = getHorizontalScrollPosition(window);
    scrollPositionY = getVerticalScrollPosition(window);
    bodyLeft = body.style.left;
    bodyTop = body.style.top;
    href = window.location.href;
    body.style.left = `-${scrollPositionX}px`;
    body.style.top = `-${scrollPositionY}px`;
    if (overflowX !== "hidden" && (overflowX === "scroll" || body.scrollWidth > window.innerWidth)) {
      body.classList.add("q-body--force-scrollbar-x");
    }
    if (overflowY !== "hidden" && (overflowY === "scroll" || body.scrollHeight > window.innerHeight)) {
      body.classList.add("q-body--force-scrollbar-y");
    }
    body.classList.add("q-body--prevent-scroll");
    document.qScrollPrevented = true;
    if (client.is.ios === true) {
      if (hasViewport === true) {
        window.scrollTo(0, 0);
        window.visualViewport.addEventListener("resize", onAppleResize, listenOpts.passiveCapture);
        window.visualViewport.addEventListener("scroll", onAppleResize, listenOpts.passiveCapture);
        window.scrollTo(0, 0);
      } else {
        window.addEventListener("scroll", onAppleScroll, listenOpts.passiveCapture);
      }
    }
  }
  if (client.is.desktop === true && client.is.mac === true) {
    window[`${action}EventListener`]("wheel", onWheel, listenOpts.notPassive);
  }
  if (action === "remove") {
    if (client.is.ios === true) {
      if (hasViewport === true) {
        window.visualViewport.removeEventListener("resize", onAppleResize, listenOpts.passiveCapture);
        window.visualViewport.removeEventListener("scroll", onAppleResize, listenOpts.passiveCapture);
      } else {
        window.removeEventListener("scroll", onAppleScroll, listenOpts.passiveCapture);
      }
    }
    body.classList.remove("q-body--prevent-scroll");
    body.classList.remove("q-body--force-scrollbar-x");
    body.classList.remove("q-body--force-scrollbar-y");
    document.qScrollPrevented = false;
    body.style.left = bodyLeft;
    body.style.top = bodyTop;
    if (window.location.href === href) {
      window.scrollTo(scrollPositionX, scrollPositionY);
    }
    maxScrollTop = void 0;
  }
}
function preventScroll(state) {
  let action = "add";
  if (state === true) {
    registered++;
    if (closeTimer !== null) {
      clearTimeout(closeTimer);
      closeTimer = null;
      return;
    }
    if (registered > 1) return;
  } else {
    if (registered === 0) return;
    registered--;
    if (registered > 0) return;
    action = "remove";
    if (client.is.ios === true && client.is.nativeMobile === true) {
      closeTimer !== null && clearTimeout(closeTimer);
      closeTimer = setTimeout(() => {
        apply(action);
        closeTimer = null;
      }, 100);
      return;
    }
  }
  apply(action);
}
function usePreventScroll() {
  let currentState;
  return {
    preventBodyScroll(state) {
      if (state !== currentState && (currentState !== void 0 || state === true)) {
        currentState = state;
        preventScroll(state);
      }
    }
  };
}
const handlers$1 = [];
let escDown;
function onKeydown(evt) {
  escDown = evt.keyCode === 27;
}
function onBlur() {
  if (escDown === true) {
    escDown = false;
  }
}
function onKeyup(evt) {
  if (escDown === true) {
    escDown = false;
    if (isKeyCode(evt, 27) === true) {
      handlers$1[handlers$1.length - 1](evt);
    }
  }
}
function update(action) {
  window[action]("keydown", onKeydown);
  window[action]("blur", onBlur);
  window[action]("keyup", onKeyup);
  escDown = false;
}
function addEscapeKey(fn) {
  if (client.is.desktop === true) {
    handlers$1.push(fn);
    if (handlers$1.length === 1) {
      update("addEventListener");
    }
  }
}
function removeEscapeKey(fn) {
  const index = handlers$1.indexOf(fn);
  if (index !== -1) {
    handlers$1.splice(index, 1);
    if (handlers$1.length === 0) {
      update("removeEventListener");
    }
  }
}
const handlers = [];
function trigger(e) {
  handlers[handlers.length - 1](e);
}
function addFocusout(fn) {
  if (client.is.desktop === true) {
    handlers.push(fn);
    if (handlers.length === 1) {
      document.body.addEventListener("focusin", trigger);
    }
  }
}
function removeFocusout(fn) {
  const index = handlers.indexOf(fn);
  if (index !== -1) {
    handlers.splice(index, 1);
    if (handlers.length === 0) {
      document.body.removeEventListener("focusin", trigger);
    }
  }
}
let maximizedModals = 0;
const positionClass = {
  standard: "fixed-full flex-center",
  top: "fixed-top justify-center",
  bottom: "fixed-bottom justify-center",
  right: "fixed-right items-center",
  left: "fixed-left items-center"
};
const defaultTransitions = {
  standard: ["scale", "scale"],
  top: ["slide-down", "slide-up"],
  bottom: ["slide-up", "slide-down"],
  right: ["slide-left", "slide-right"],
  left: ["slide-right", "slide-left"]
};
const QDialog = createComponent({
  name: "QDialog",
  inheritAttrs: false,
  props: {
    ...useModelToggleProps,
    ...useTransitionProps,
    transitionShow: String,
    // override useTransitionProps
    transitionHide: String,
    // override useTransitionProps
    persistent: Boolean,
    autoClose: Boolean,
    allowFocusOutside: Boolean,
    noEscDismiss: Boolean,
    noBackdropDismiss: Boolean,
    noRouteDismiss: Boolean,
    noRefocus: Boolean,
    noFocus: Boolean,
    noShake: Boolean,
    seamless: Boolean,
    maximized: Boolean,
    fullWidth: Boolean,
    fullHeight: Boolean,
    square: Boolean,
    backdropFilter: String,
    position: {
      type: String,
      default: "standard",
      validator: (val) => ["standard", "top", "bottom", "left", "right"].includes(val)
    }
  },
  emits: [
    ...useModelToggleEmits,
    "shake",
    "click",
    "escapeKey"
  ],
  setup(props2, { slots, emit: emit2, attrs }) {
    const vm2 = getCurrentInstance();
    const innerRef = ref(null);
    const showing = ref(false);
    const animating = ref(false);
    let shakeTimeout = null, refocusTarget = null, isMaximized, avoidAutoClose;
    const hideOnRouteChange = computed(
      () => props2.persistent !== true && props2.noRouteDismiss !== true && props2.seamless !== true
    );
    const { preventBodyScroll } = usePreventScroll();
    const { registerTimeout } = useTimeout();
    const { registerTick, removeTick } = useTick();
    const { transitionProps, transitionStyle } = useTransition(
      props2,
      () => defaultTransitions[props2.position][0],
      () => defaultTransitions[props2.position][1]
    );
    const backdropStyle = computed(() => transitionStyle.value + (props2.backdropFilter !== void 0 ? `;backdrop-filter:${props2.backdropFilter};-webkit-backdrop-filter:${props2.backdropFilter}` : ""));
    const { showPortal, hidePortal, portalIsAccessible, renderPortal } = usePortal(
      vm2,
      innerRef,
      renderPortalContent,
      "dialog"
    );
    const { hide } = useModelToggle({
      showing,
      hideOnRouteChange,
      handleShow,
      handleHide,
      processOnMount: true
    });
    const { addToHistory, removeFromHistory } = useHistory(showing, hide, hideOnRouteChange);
    const classes = computed(
      () => `q-dialog__inner flex no-pointer-events q-dialog__inner--${props2.maximized === true ? "maximized" : "minimized"} q-dialog__inner--${props2.position} ${positionClass[props2.position]}` + (animating.value === true ? " q-dialog__inner--animating" : "") + (props2.fullWidth === true ? " q-dialog__inner--fullwidth" : "") + (props2.fullHeight === true ? " q-dialog__inner--fullheight" : "") + (props2.square === true ? " q-dialog__inner--square" : "")
    );
    const useBackdrop = computed(() => showing.value === true && props2.seamless !== true);
    const onEvents = computed(() => props2.autoClose === true ? { onClick: onAutoClose } : {});
    const rootClasses = computed(() => [
      `q-dialog fullscreen no-pointer-events q-dialog--${useBackdrop.value === true ? "modal" : "seamless"}`,
      attrs.class
    ]);
    watch(() => props2.maximized, (state) => {
      showing.value === true && updateMaximized(state);
    });
    watch(useBackdrop, (val) => {
      preventBodyScroll(val);
      if (val === true) {
        addFocusout(onFocusChange);
        addEscapeKey(onEscapeKey);
      } else {
        removeFocusout(onFocusChange);
        removeEscapeKey(onEscapeKey);
      }
    });
    function handleShow(evt) {
      addToHistory();
      refocusTarget = props2.noRefocus === false && document.activeElement !== null ? document.activeElement : null;
      updateMaximized(props2.maximized);
      showPortal();
      animating.value = true;
      if (props2.noFocus !== true) {
        document.activeElement?.blur();
        registerTick(focus);
      } else {
        removeTick();
      }
      registerTimeout(() => {
        if (vm2.proxy.$q.platform.is.ios === true) {
          if (props2.seamless !== true && document.activeElement) {
            const { top, bottom } = document.activeElement.getBoundingClientRect(), { innerHeight } = window, height = window.visualViewport !== void 0 ? window.visualViewport.height : innerHeight;
            if (top > 0 && bottom > height / 2) {
              document.scrollingElement.scrollTop = Math.min(
                document.scrollingElement.scrollHeight - height,
                bottom >= innerHeight ? Infinity : Math.ceil(document.scrollingElement.scrollTop + bottom - height / 2)
              );
            }
            document.activeElement.scrollIntoView();
          }
          avoidAutoClose = true;
          innerRef.value.click();
          avoidAutoClose = false;
        }
        showPortal(true);
        animating.value = false;
        emit2("show", evt);
      }, props2.transitionDuration);
    }
    function handleHide(evt) {
      removeTick();
      removeFromHistory();
      cleanup(true);
      animating.value = true;
      hidePortal();
      if (refocusTarget !== null) {
        ((evt?.type.indexOf("key") === 0 ? refocusTarget.closest('[tabindex]:not([tabindex^="-"])') : void 0) || refocusTarget).focus();
        refocusTarget = null;
      }
      registerTimeout(() => {
        hidePortal(true);
        animating.value = false;
        emit2("hide", evt);
      }, props2.transitionDuration);
    }
    function focus(selector) {
      addFocusFn(() => {
        let node = innerRef.value;
        if (node === null) return;
        if (selector !== void 0) {
          const target2 = node.querySelector(selector);
          if (target2 !== null) {
            target2.focus({ preventScroll: true });
            return;
          }
        }
        if (node.contains(document.activeElement) !== true) {
          node = node.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]") || node.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]") || node.querySelector("[autofocus], [data-autofocus]") || node;
          node.focus({ preventScroll: true });
        }
      });
    }
    function shake(focusTarget) {
      if (focusTarget && typeof focusTarget.focus === "function") {
        focusTarget.focus({ preventScroll: true });
      } else {
        focus();
      }
      emit2("shake");
      const node = innerRef.value;
      if (node !== null) {
        node.classList.remove("q-animate--scale");
        node.classList.add("q-animate--scale");
        shakeTimeout !== null && clearTimeout(shakeTimeout);
        shakeTimeout = setTimeout(() => {
          shakeTimeout = null;
          if (innerRef.value !== null) {
            node.classList.remove("q-animate--scale");
            focus();
          }
        }, 170);
      }
    }
    function onEscapeKey() {
      if (props2.seamless !== true) {
        if (props2.persistent === true || props2.noEscDismiss === true) {
          props2.maximized !== true && props2.noShake !== true && shake();
        } else {
          emit2("escapeKey");
          hide();
        }
      }
    }
    function cleanup(hiding) {
      if (shakeTimeout !== null) {
        clearTimeout(shakeTimeout);
        shakeTimeout = null;
      }
      if (hiding === true || showing.value === true) {
        updateMaximized(false);
        if (props2.seamless !== true) {
          preventBodyScroll(false);
          removeFocusout(onFocusChange);
          removeEscapeKey(onEscapeKey);
        }
      }
      if (hiding !== true) {
        refocusTarget = null;
      }
    }
    function updateMaximized(active) {
      if (active === true) {
        if (isMaximized !== true) {
          maximizedModals < 1 && document.body.classList.add("q-body--dialog");
          maximizedModals++;
          isMaximized = true;
        }
      } else if (isMaximized === true) {
        if (maximizedModals < 2) {
          document.body.classList.remove("q-body--dialog");
        }
        maximizedModals--;
        isMaximized = false;
      }
    }
    function onAutoClose(e) {
      if (avoidAutoClose !== true) {
        hide(e);
        emit2("click", e);
      }
    }
    function onBackdropClick(e) {
      if (props2.persistent !== true && props2.noBackdropDismiss !== true) {
        hide(e);
      } else if (props2.noShake !== true) {
        shake();
      }
    }
    function onFocusChange(evt) {
      if (props2.allowFocusOutside !== true && portalIsAccessible.value === true && childHasFocus(innerRef.value, evt.target) !== true) {
        focus('[tabindex]:not([tabindex="-1"])');
      }
    }
    Object.assign(vm2.proxy, {
      // expose public methods
      focus,
      shake,
      // private but needed by QSelect
      __updateRefocusTarget(target2) {
        refocusTarget = target2 || null;
      }
    });
    onBeforeUnmount(cleanup);
    function renderPortalContent() {
      return h("div", {
        role: "dialog",
        "aria-modal": useBackdrop.value === true ? "true" : "false",
        ...attrs,
        class: rootClasses.value
      }, [
        h(Transition, {
          name: "q-transition--fade",
          appear: true
        }, () => useBackdrop.value === true ? h("div", {
          class: "q-dialog__backdrop fixed-full",
          style: backdropStyle.value,
          "aria-hidden": "true",
          tabindex: -1,
          onClick: onBackdropClick
        }) : null),
        h(
          Transition,
          transitionProps.value,
          () => showing.value === true ? h("div", {
            ref: innerRef,
            class: classes.value,
            style: transitionStyle.value,
            tabindex: -1,
            ...onEvents.value
          }, hSlot(slots.default)) : null
        )
      ]);
    }
    return renderPortal;
  }
});
const useDarkProps = {
  dark: {
    type: Boolean,
    default: null
  }
};
function useDark(props2, $q) {
  return computed(() => props2.dark === null ? $q.dark.isActive : props2.dark);
}
const QCard = createComponent({
  name: "QCard",
  props: {
    ...useDarkProps,
    tag: {
      type: String,
      default: "div"
    },
    square: Boolean,
    flat: Boolean,
    bordered: Boolean
  },
  setup(props2, { slots }) {
    const { proxy: { $q } } = getCurrentInstance();
    const isDark = useDark(props2, $q);
    const classes = computed(
      () => "q-card" + (isDark.value === true ? " q-card--dark q-dark" : "") + (props2.bordered === true ? " q-card--bordered" : "") + (props2.square === true ? " q-card--square no-border-radius" : "") + (props2.flat === true ? " q-card--flat no-shadow" : "")
    );
    return () => h(props2.tag, { class: classes.value }, hSlot(slots.default));
  }
});
const QCardSection = createComponent({
  name: "QCardSection",
  props: {
    tag: {
      type: String,
      default: "div"
    },
    horizontal: Boolean
  },
  setup(props2, { slots }) {
    const classes = computed(
      () => `q-card__section q-card__section--${props2.horizontal === true ? "horiz row no-wrap" : "vert"}`
    );
    return () => h(props2.tag, { class: classes.value }, hSlot(slots.default));
  }
});
const QCardActions = createComponent({
  name: "QCardActions",
  props: {
    ...useAlignProps,
    vertical: Boolean
  },
  setup(props2, { slots }) {
    const alignClass = useAlign(props2);
    const classes = computed(
      () => `q-card__actions ${alignClass.value} q-card__actions--${props2.vertical === true ? "vert column" : "horiz row"}`
    );
    return () => h("div", { class: classes.value }, hSlot(slots.default));
  }
});
const insetMap = {
  true: "inset",
  item: "item-inset",
  "item-thumbnail": "item-thumbnail-inset"
};
const margins = {
  xs: 2,
  sm: 4,
  md: 8,
  lg: 16,
  xl: 24
};
const QSeparator = createComponent({
  name: "QSeparator",
  props: {
    ...useDarkProps,
    spaced: [Boolean, String],
    inset: [Boolean, String],
    vertical: Boolean,
    color: String,
    size: String
  },
  setup(props2) {
    const vm2 = getCurrentInstance();
    const isDark = useDark(props2, vm2.proxy.$q);
    const orientation = computed(() => props2.vertical === true ? "vertical" : "horizontal");
    const orientClass = computed(() => ` q-separator--${orientation.value}`);
    const insetClass = computed(() => props2.inset !== false ? `${orientClass.value}-${insetMap[props2.inset]}` : "");
    const classes = computed(
      () => `q-separator${orientClass.value}${insetClass.value}` + (props2.color !== void 0 ? ` bg-${props2.color}` : "") + (isDark.value === true ? " q-separator--dark" : "")
    );
    const style = computed(() => {
      const acc = {};
      if (props2.size !== void 0) {
        acc[props2.vertical === true ? "width" : "height"] = props2.size;
      }
      if (props2.spaced !== false) {
        const size2 = props2.spaced === true ? `${margins.md}px` : props2.spaced in margins ? `${margins[props2.spaced]}px` : props2.spaced;
        const dir = props2.vertical === true ? ["Left", "Right"] : ["Top", "Bottom"];
        acc[`margin${dir[0]}`] = acc[`margin${dir[1]}`] = size2;
      }
      return acc;
    });
    return () => h("hr", {
      class: classes.value,
      style: style.value,
      "aria-orientation": orientation.value
    });
  }
});
let buf, bufIdx = 0;
const hexBytes = new Array(256);
for (let i = 0; i < 256; i++) {
  hexBytes[i] = (i + 256).toString(16).substring(1);
}
const randomBytes = (() => {
  const lib = typeof crypto !== "undefined" ? crypto : typeof window !== "undefined" ? window.crypto || window.msCrypto : void 0;
  if (lib !== void 0) {
    if (lib.randomBytes !== void 0) {
      return lib.randomBytes;
    }
    if (lib.getRandomValues !== void 0) {
      return (n) => {
        const bytes = new Uint8Array(n);
        lib.getRandomValues(bytes);
        return bytes;
      };
    }
  }
  return (n) => {
    const r = [];
    for (let i = n; i > 0; i--) {
      r.push(Math.floor(Math.random() * 256));
    }
    return r;
  };
})();
const BUFFER_SIZE = 4096;
function uid$1() {
  if (buf === void 0 || bufIdx + 16 > BUFFER_SIZE) {
    bufIdx = 0;
    buf = randomBytes(BUFFER_SIZE);
  }
  const b = Array.prototype.slice.call(buf, bufIdx, bufIdx += 16);
  b[6] = b[6] & 15 | 64;
  b[8] = b[8] & 63 | 128;
  return hexBytes[b[0]] + hexBytes[b[1]] + hexBytes[b[2]] + hexBytes[b[3]] + "-" + hexBytes[b[4]] + hexBytes[b[5]] + "-" + hexBytes[b[6]] + hexBytes[b[7]] + "-" + hexBytes[b[8]] + hexBytes[b[9]] + "-" + hexBytes[b[10]] + hexBytes[b[11]] + hexBytes[b[12]] + hexBytes[b[13]] + hexBytes[b[14]] + hexBytes[b[15]];
}
function parseValue(val) {
  return val === void 0 || val === null ? null : val;
}
function getId(val, required) {
  return val === void 0 || val === null ? required === true ? `f_${uid$1()}` : null : val;
}
function useId({ getValue, required = true } = {}) {
  if (isRuntimeSsrPreHydration.value === true) {
    const id = getValue !== void 0 ? ref(parseValue(getValue())) : ref(null);
    if (required === true && id.value === null) {
      onMounted(() => {
        id.value = `f_${uid$1()}`;
      });
    }
    if (getValue !== void 0) {
      watch(getValue, (newId) => {
        id.value = getId(newId, required);
      });
    }
    return id;
  }
  return getValue !== void 0 ? computed(() => getId(getValue(), required)) : ref(`f_${uid$1()}`);
}
const listenerRE = /^on[A-Z]/;
function useSplitAttrs() {
  const { attrs, vnode } = getCurrentInstance();
  const acc = {
    listeners: ref({}),
    attributes: ref({})
  };
  function update2() {
    const attributes = {};
    const listeners = {};
    for (const key in attrs) {
      if (key !== "class" && key !== "style" && listenerRE.test(key) === false) {
        attributes[key] = attrs[key];
      }
    }
    for (const key in vnode.props) {
      if (listenerRE.test(key) === true) {
        listeners[key] = vnode.props[key];
      }
    }
    acc.attributes.value = attributes;
    acc.listeners.value = listeners;
  }
  onBeforeUpdate(update2);
  update2();
  return acc;
}
function useFormChild({ validate, resetValidation, requiresQForm }) {
  const $form = inject(formKey, false);
  if ($form !== false) {
    const { props: props2, proxy } = getCurrentInstance();
    Object.assign(proxy, { validate, resetValidation });
    watch(() => props2.disable, (val) => {
      if (val === true) {
        typeof resetValidation === "function" && resetValidation();
        $form.unbindComponent(proxy);
      } else {
        $form.bindComponent(proxy);
      }
    });
    onMounted(() => {
      props2.disable !== true && $form.bindComponent(proxy);
    });
    onBeforeUnmount(() => {
      props2.disable !== true && $form.unbindComponent(proxy);
    });
  } else if (requiresQForm === true) {
    console.error("Parent QForm not found on useFormChild()!");
  }
}
const hex = /^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/, hexa = /^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/, hexOrHexa = /^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/, rgb = /^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/, rgba = /^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/;
const testPattern = {
  date: (v) => /^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(v),
  time: (v) => /^([0-1]?\d|2[0-3]):[0-5]\d$/.test(v),
  fulltime: (v) => /^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(v),
  timeOrFulltime: (v) => /^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(v),
  // -- RFC 5322 --
  // -- Added in v2.6.6 --
  // This is a basic helper validation.
  // For something more complex (like RFC 822) you should write and use your own rule.
  // We won't be accepting PRs to enhance the one below because of the reason above.
  // eslint-disable-next-line
  email: (v) => /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(v),
  hexColor: (v) => hex.test(v),
  hexaColor: (v) => hexa.test(v),
  hexOrHexaColor: (v) => hexOrHexa.test(v),
  rgbColor: (v) => rgb.test(v),
  rgbaColor: (v) => rgba.test(v),
  rgbOrRgbaColor: (v) => rgb.test(v) || rgba.test(v),
  hexOrRgbColor: (v) => hex.test(v) || rgb.test(v),
  hexaOrRgbaColor: (v) => hexa.test(v) || rgba.test(v),
  anyColor: (v) => hexOrHexa.test(v) || rgb.test(v) || rgba.test(v)
};
const lazyRulesValues = [true, false, "ondemand"];
const useValidateProps = {
  modelValue: {},
  error: {
    type: Boolean,
    default: null
  },
  errorMessage: String,
  noErrorIcon: Boolean,
  rules: Array,
  reactiveRules: Boolean,
  lazyRules: {
    type: [Boolean, String],
    default: false,
    // statement unneeded but avoids future vue implementation changes
    validator: (v) => lazyRulesValues.includes(v)
  }
};
function useValidate(focused, innerLoading) {
  const { props: props2, proxy } = getCurrentInstance();
  const innerError = ref(false);
  const innerErrorMessage = ref(null);
  const isDirtyModel = ref(false);
  useFormChild({ validate, resetValidation });
  let validateIndex = 0, unwatchRules;
  const hasRules = computed(
    () => props2.rules !== void 0 && props2.rules !== null && props2.rules.length !== 0
  );
  const canDebounceValidate = computed(() => props2.disable !== true && hasRules.value === true && innerLoading.value === false);
  const hasError = computed(
    () => props2.error === true || innerError.value === true
  );
  const errorMessage = computed(() => typeof props2.errorMessage === "string" && props2.errorMessage.length !== 0 ? props2.errorMessage : innerErrorMessage.value);
  watch(() => props2.modelValue, () => {
    isDirtyModel.value = true;
    if (canDebounceValidate.value === true && props2.lazyRules === false) {
      debouncedValidate();
    }
  });
  function onRulesChange() {
    if (props2.lazyRules !== "ondemand" && canDebounceValidate.value === true && isDirtyModel.value === true) {
      debouncedValidate();
    }
  }
  watch(() => props2.reactiveRules, (val) => {
    if (val === true) {
      if (unwatchRules === void 0) {
        unwatchRules = watch(() => props2.rules, onRulesChange, { immediate: true, deep: true });
      }
    } else if (unwatchRules !== void 0) {
      unwatchRules();
      unwatchRules = void 0;
    }
  }, { immediate: true });
  watch(() => props2.lazyRules, onRulesChange);
  watch(focused, (val) => {
    if (val === true) {
      isDirtyModel.value = true;
    } else if (canDebounceValidate.value === true && props2.lazyRules !== "ondemand") {
      debouncedValidate();
    }
  });
  function resetValidation() {
    validateIndex++;
    innerLoading.value = false;
    isDirtyModel.value = false;
    innerError.value = false;
    innerErrorMessage.value = null;
    debouncedValidate.cancel();
  }
  function validate(val = props2.modelValue) {
    if (props2.disable === true || hasRules.value === false) {
      return true;
    }
    const index = ++validateIndex;
    const setDirty = innerLoading.value !== true ? () => {
      isDirtyModel.value = true;
    } : () => {
    };
    const update2 = (err, msg) => {
      err === true && setDirty();
      innerError.value = err;
      innerErrorMessage.value = msg || null;
      innerLoading.value = false;
    };
    const promises = [];
    for (let i = 0; i < props2.rules.length; i++) {
      const rule = props2.rules[i];
      let res;
      if (typeof rule === "function") {
        res = rule(val, testPattern);
      } else if (typeof rule === "string" && testPattern[rule] !== void 0) {
        res = testPattern[rule](val);
      }
      if (res === false || typeof res === "string") {
        update2(true, res);
        return false;
      } else if (res !== true && res !== void 0) {
        promises.push(res);
      }
    }
    if (promises.length === 0) {
      update2(false);
      return true;
    }
    innerLoading.value = true;
    return Promise.all(promises).then(
      (res) => {
        if (res === void 0 || Array.isArray(res) === false || res.length === 0) {
          index === validateIndex && update2(false);
          return true;
        }
        const msg = res.find((r) => r === false || typeof r === "string");
        index === validateIndex && update2(msg !== void 0, msg);
        return msg === void 0;
      },
      (e) => {
        if (index === validateIndex) {
          console.error(e);
          update2(true);
        }
        return false;
      }
    );
  }
  const debouncedValidate = debounce$1(validate, 0);
  onBeforeUnmount(() => {
    unwatchRules?.();
    debouncedValidate.cancel();
  });
  Object.assign(proxy, { resetValidation, validate });
  injectProp(proxy, "hasError", () => hasError.value);
  return {
    isDirtyModel,
    hasRules,
    hasError,
    errorMessage,
    validate,
    resetValidation
  };
}
function fieldValueIsFilled(val) {
  return val !== void 0 && val !== null && ("" + val).length !== 0;
}
const useNonInputFieldProps = {
  ...useDarkProps,
  ...useValidateProps,
  label: String,
  stackLabel: Boolean,
  hint: String,
  hideHint: Boolean,
  prefix: String,
  suffix: String,
  labelColor: String,
  color: String,
  bgColor: String,
  filled: Boolean,
  outlined: Boolean,
  borderless: Boolean,
  standout: [Boolean, String],
  square: Boolean,
  loading: Boolean,
  labelSlot: Boolean,
  bottomSlots: Boolean,
  hideBottomSpace: Boolean,
  rounded: Boolean,
  dense: Boolean,
  itemAligned: Boolean,
  counter: Boolean,
  clearable: Boolean,
  clearIcon: String,
  disable: Boolean,
  readonly: Boolean,
  autofocus: Boolean,
  for: String
};
const useFieldProps = {
  ...useNonInputFieldProps,
  maxlength: [Number, String]
};
const useFieldEmits = ["update:modelValue", "clear", "focus", "blur"];
function useFieldState({ requiredForAttr = true, tagProp, changeEvent = false } = {}) {
  const { props: props2, proxy } = getCurrentInstance();
  const isDark = useDark(props2, proxy.$q);
  const targetUid = useId({
    required: requiredForAttr,
    getValue: () => props2.for
  });
  return {
    requiredForAttr,
    changeEvent,
    tag: tagProp === true ? computed(() => props2.tag) : { value: "label" },
    isDark,
    editable: computed(
      () => props2.disable !== true && props2.readonly !== true
    ),
    innerLoading: ref(false),
    focused: ref(false),
    hasPopupOpen: false,
    splitAttrs: useSplitAttrs(),
    targetUid,
    rootRef: ref(null),
    targetRef: ref(null),
    controlRef: ref(null)
    /**
         * user supplied additionals:
    
         * innerValue - computed
         * floatingLabel - computed
         * inputRef - computed
    
         * fieldClass - computed
         * hasShadow - computed
    
         * controlEvents - Object with fn(e)
    
         * getControl - fn
         * getInnerAppend - fn
         * getControlChild - fn
         * getShadowControl - fn
         * showPopup - fn
         */
  };
}
function useField(state) {
  const { props: props2, emit: emit2, slots, attrs, proxy } = getCurrentInstance();
  const { $q } = proxy;
  let focusoutTimer = null;
  if (state.hasValue === void 0) {
    state.hasValue = computed(() => fieldValueIsFilled(props2.modelValue));
  }
  if (state.emitValue === void 0) {
    state.emitValue = (value) => {
      emit2("update:modelValue", value);
    };
  }
  if (state.controlEvents === void 0) {
    state.controlEvents = {
      onFocusin: onControlFocusin,
      onFocusout: onControlFocusout
    };
  }
  Object.assign(state, {
    clearValue,
    onControlFocusin,
    onControlFocusout,
    focus
  });
  if (state.computedCounter === void 0) {
    state.computedCounter = computed(() => {
      if (props2.counter !== false) {
        const len = typeof props2.modelValue === "string" || typeof props2.modelValue === "number" ? ("" + props2.modelValue).length : Array.isArray(props2.modelValue) === true ? props2.modelValue.length : 0;
        const max = props2.maxlength !== void 0 ? props2.maxlength : props2.maxValues;
        return len + (max !== void 0 ? " / " + max : "");
      }
    });
  }
  const {
    isDirtyModel,
    hasRules,
    hasError,
    errorMessage,
    resetValidation
  } = useValidate(state.focused, state.innerLoading);
  const floatingLabel = state.floatingLabel !== void 0 ? computed(() => props2.stackLabel === true || state.focused.value === true || state.floatingLabel.value === true) : computed(() => props2.stackLabel === true || state.focused.value === true || state.hasValue.value === true);
  const shouldRenderBottom = computed(
    () => props2.bottomSlots === true || props2.hint !== void 0 || hasRules.value === true || props2.counter === true || props2.error !== null
  );
  const styleType = computed(() => {
    if (props2.filled === true) {
      return "filled";
    }
    if (props2.outlined === true) {
      return "outlined";
    }
    if (props2.borderless === true) {
      return "borderless";
    }
    if (props2.standout) {
      return "standout";
    }
    return "standard";
  });
  const classes = computed(
    () => `q-field row no-wrap items-start q-field--${styleType.value}` + (state.fieldClass !== void 0 ? ` ${state.fieldClass.value}` : "") + (props2.rounded === true ? " q-field--rounded" : "") + (props2.square === true ? " q-field--square" : "") + (floatingLabel.value === true ? " q-field--float" : "") + (hasLabel.value === true ? " q-field--labeled" : "") + (props2.dense === true ? " q-field--dense" : "") + (props2.itemAligned === true ? " q-field--item-aligned q-item-type" : "") + (state.isDark.value === true ? " q-field--dark" : "") + (state.getControl === void 0 ? " q-field--auto-height" : "") + (state.focused.value === true ? " q-field--focused" : "") + (hasError.value === true ? " q-field--error" : "") + (hasError.value === true || state.focused.value === true ? " q-field--highlighted" : "") + (props2.hideBottomSpace !== true && shouldRenderBottom.value === true ? " q-field--with-bottom" : "") + (props2.disable === true ? " q-field--disabled" : props2.readonly === true ? " q-field--readonly" : "")
  );
  const contentClass = computed(
    () => "q-field__control relative-position row no-wrap" + (props2.bgColor !== void 0 ? ` bg-${props2.bgColor}` : "") + (hasError.value === true ? " text-negative" : typeof props2.standout === "string" && props2.standout.length !== 0 && state.focused.value === true ? ` ${props2.standout}` : props2.color !== void 0 ? ` text-${props2.color}` : "")
  );
  const hasLabel = computed(
    () => props2.labelSlot === true || props2.label !== void 0
  );
  const labelClass = computed(
    () => "q-field__label no-pointer-events absolute ellipsis" + (props2.labelColor !== void 0 && hasError.value !== true ? ` text-${props2.labelColor}` : "")
  );
  const controlSlotScope = computed(() => ({
    id: state.targetUid.value,
    editable: state.editable.value,
    focused: state.focused.value,
    floatingLabel: floatingLabel.value,
    modelValue: props2.modelValue,
    emitValue: state.emitValue
  }));
  const attributes = computed(() => {
    const acc = {};
    if (state.targetUid.value) {
      acc.for = state.targetUid.value;
    }
    if (props2.disable === true) {
      acc["aria-disabled"] = "true";
    }
    return acc;
  });
  function focusHandler() {
    const el = document.activeElement;
    let target2 = state.targetRef?.value;
    if (target2 && (el === null || el.id !== state.targetUid.value)) {
      target2.hasAttribute("tabindex") === true || (target2 = target2.querySelector("[tabindex]"));
      if (target2 !== el) {
        target2?.focus({ preventScroll: true });
      }
    }
  }
  function focus() {
    addFocusFn(focusHandler);
  }
  function blur() {
    removeFocusFn(focusHandler);
    const el = document.activeElement;
    if (el !== null && state.rootRef.value.contains(el)) {
      el.blur();
    }
  }
  function onControlFocusin(e) {
    if (focusoutTimer !== null) {
      clearTimeout(focusoutTimer);
      focusoutTimer = null;
    }
    if (state.editable.value === true && state.focused.value === false) {
      state.focused.value = true;
      emit2("focus", e);
    }
  }
  function onControlFocusout(e, then) {
    focusoutTimer !== null && clearTimeout(focusoutTimer);
    focusoutTimer = setTimeout(() => {
      focusoutTimer = null;
      if (document.hasFocus() === true && (state.hasPopupOpen === true || state.controlRef === void 0 || state.controlRef.value === null || state.controlRef.value.contains(document.activeElement) !== false)) return;
      if (state.focused.value === true) {
        state.focused.value = false;
        emit2("blur", e);
      }
      then?.();
    });
  }
  function clearValue(e) {
    stopAndPrevent(e);
    if ($q.platform.is.mobile !== true) {
      const el = state.targetRef?.value || state.rootRef.value;
      el.focus();
    } else if (state.rootRef.value.contains(document.activeElement) === true) {
      document.activeElement.blur();
    }
    if (props2.type === "file") {
      state.inputRef.value.value = null;
    }
    emit2("update:modelValue", null);
    state.changeEvent === true && emit2("change", null);
    emit2("clear", props2.modelValue);
    nextTick(() => {
      const isDirty2 = isDirtyModel.value;
      resetValidation();
      isDirtyModel.value = isDirty2;
    });
  }
  function onClearableKeyup(evt) {
    [13, 32].includes(evt.keyCode) && clearValue(evt);
  }
  function getContent() {
    const node = [];
    slots.prepend !== void 0 && node.push(
      h("div", {
        class: "q-field__prepend q-field__marginal row no-wrap items-center",
        key: "prepend",
        onClick: prevent
      }, slots.prepend())
    );
    node.push(
      h("div", {
        class: "q-field__control-container col relative-position row no-wrap q-anchor--skip"
      }, getControlContainer())
    );
    hasError.value === true && props2.noErrorIcon === false && node.push(
      getInnerAppendNode("error", [
        h(QIcon, { name: $q.iconSet.field.error, color: "negative" })
      ])
    );
    if (props2.loading === true || state.innerLoading.value === true) {
      node.push(
        getInnerAppendNode(
          "inner-loading-append",
          slots.loading !== void 0 ? slots.loading() : [h(QSpinner, { color: props2.color })]
        )
      );
    } else if (props2.clearable === true && state.hasValue.value === true && state.editable.value === true) {
      node.push(
        getInnerAppendNode("inner-clearable-append", [
          h(QIcon, {
            class: "q-field__focusable-action",
            name: props2.clearIcon || $q.iconSet.field.clear,
            tabindex: 0,
            role: "button",
            "aria-hidden": "false",
            "aria-label": $q.lang.label.clear,
            onKeyup: onClearableKeyup,
            onClick: clearValue
          })
        ])
      );
    }
    slots.append !== void 0 && node.push(
      h("div", {
        class: "q-field__append q-field__marginal row no-wrap items-center",
        key: "append",
        onClick: prevent
      }, slots.append())
    );
    state.getInnerAppend !== void 0 && node.push(
      getInnerAppendNode("inner-append", state.getInnerAppend())
    );
    state.getControlChild !== void 0 && node.push(
      state.getControlChild()
    );
    return node;
  }
  function getControlContainer() {
    const node = [];
    props2.prefix !== void 0 && props2.prefix !== null && node.push(
      h("div", {
        class: "q-field__prefix no-pointer-events row items-center"
      }, props2.prefix)
    );
    if (state.getShadowControl !== void 0 && state.hasShadow.value === true) {
      node.push(
        state.getShadowControl()
      );
    }
    if (state.getControl !== void 0) {
      node.push(state.getControl());
    } else if (slots.rawControl !== void 0) {
      node.push(slots.rawControl());
    } else if (slots.control !== void 0) {
      node.push(
        h("div", {
          ref: state.targetRef,
          class: "q-field__native row",
          tabindex: -1,
          ...state.splitAttrs.attributes.value,
          "data-autofocus": props2.autofocus === true || void 0
        }, slots.control(controlSlotScope.value))
      );
    }
    hasLabel.value === true && node.push(
      h("div", {
        class: labelClass.value
      }, hSlot(slots.label, props2.label))
    );
    props2.suffix !== void 0 && props2.suffix !== null && node.push(
      h("div", {
        class: "q-field__suffix no-pointer-events row items-center"
      }, props2.suffix)
    );
    return node.concat(hSlot(slots.default));
  }
  function getBottom() {
    let msg, key;
    if (hasError.value === true) {
      if (errorMessage.value !== null) {
        msg = [h("div", { role: "alert" }, errorMessage.value)];
        key = `q--slot-error-${errorMessage.value}`;
      } else {
        msg = hSlot(slots.error);
        key = "q--slot-error";
      }
    } else if (props2.hideHint !== true || state.focused.value === true) {
      if (props2.hint !== void 0) {
        msg = [h("div", props2.hint)];
        key = `q--slot-hint-${props2.hint}`;
      } else {
        msg = hSlot(slots.hint);
        key = "q--slot-hint";
      }
    }
    const hasCounter = props2.counter === true || slots.counter !== void 0;
    if (props2.hideBottomSpace === true && hasCounter === false && msg === void 0) return;
    const main = h("div", {
      key,
      class: "q-field__messages col"
    }, msg);
    return h("div", {
      class: "q-field__bottom row items-start q-field__bottom--" + (props2.hideBottomSpace !== true ? "animated" : "stale"),
      onClick: prevent
    }, [
      props2.hideBottomSpace === true ? main : h(Transition, { name: "q-transition--field-message" }, () => main),
      hasCounter === true ? h("div", {
        class: "q-field__counter"
      }, slots.counter !== void 0 ? slots.counter() : state.computedCounter.value) : null
    ]);
  }
  function getInnerAppendNode(key, content) {
    return content === null ? null : h("div", {
      key,
      class: "q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"
    }, content);
  }
  let shouldActivate = false;
  onDeactivated(() => {
    shouldActivate = true;
  });
  onActivated(() => {
    shouldActivate === true && props2.autofocus === true && proxy.focus();
  });
  props2.autofocus === true && onMounted(() => {
    proxy.focus();
  });
  onBeforeUnmount(() => {
    focusoutTimer !== null && clearTimeout(focusoutTimer);
  });
  Object.assign(proxy, { focus, blur });
  return function renderField() {
    const labelAttrs = state.getControl === void 0 && slots.control === void 0 ? {
      ...state.splitAttrs.attributes.value,
      "data-autofocus": props2.autofocus === true || void 0,
      ...attributes.value
    } : attributes.value;
    return h(state.tag.value, {
      ref: state.rootRef,
      class: [
        classes.value,
        attrs.class
      ],
      style: attrs.style,
      ...labelAttrs
    }, [
      slots.before !== void 0 ? h("div", {
        class: "q-field__before q-field__marginal row no-wrap items-center",
        onClick: prevent
      }, slots.before()) : null,
      h("div", {
        class: "q-field__inner relative-position col self-stretch"
      }, [
        h("div", {
          ref: state.controlRef,
          class: contentClass.value,
          tabindex: -1,
          ...state.controlEvents
        }, getContent()),
        shouldRenderBottom.value === true ? getBottom() : null
      ]),
      slots.after !== void 0 ? h("div", {
        class: "q-field__after q-field__marginal row no-wrap items-center",
        onClick: prevent
      }, slots.after()) : null
    ]);
  };
}
const NAMED_MASKS = {
  date: "####/##/##",
  datetime: "####/##/## ##:##",
  time: "##:##",
  fulltime: "##:##:##",
  phone: "(###) ### - ####",
  card: "#### #### #### ####"
};
const TOKENS = {
  "#": { pattern: "[\\d]", negate: "[^\\d]" },
  S: { pattern: "[a-zA-Z]", negate: "[^a-zA-Z]" },
  N: { pattern: "[0-9a-zA-Z]", negate: "[^0-9a-zA-Z]" },
  A: { pattern: "[a-zA-Z]", negate: "[^a-zA-Z]", transform: (v) => v.toLocaleUpperCase() },
  a: { pattern: "[a-zA-Z]", negate: "[^a-zA-Z]", transform: (v) => v.toLocaleLowerCase() },
  X: { pattern: "[0-9a-zA-Z]", negate: "[^0-9a-zA-Z]", transform: (v) => v.toLocaleUpperCase() },
  x: { pattern: "[0-9a-zA-Z]", negate: "[^0-9a-zA-Z]", transform: (v) => v.toLocaleLowerCase() }
};
const KEYS = Object.keys(TOKENS);
KEYS.forEach((key) => {
  TOKENS[key].regex = new RegExp(TOKENS[key].pattern);
});
const tokenRegexMask = new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|([" + KEYS.join("") + "])|(.)", "g"), escRegex = /[.*+?^${}()|[\]\\]/g;
const MARKER = String.fromCharCode(1);
const useMaskProps = {
  mask: String,
  reverseFillMask: Boolean,
  fillMask: [Boolean, String],
  unmaskedValue: Boolean
};
function useMask(props2, emit2, emitValue, inputRef) {
  let maskMarked, maskReplaced, computedMask, computedUnmask, pastedTextStart, selectionAnchor;
  const hasMask = ref(null);
  const innerValue = ref(getInitialMaskedValue());
  function getIsTypeText() {
    return props2.autogrow === true || ["textarea", "text", "search", "url", "tel", "password"].includes(props2.type);
  }
  watch(() => props2.type + props2.autogrow, updateMaskInternals);
  watch(() => props2.mask, (v) => {
    if (v !== void 0) {
      updateMaskValue(innerValue.value, true);
    } else {
      const val = unmaskValue(innerValue.value);
      updateMaskInternals();
      props2.modelValue !== val && emit2("update:modelValue", val);
    }
  });
  watch(() => props2.fillMask + props2.reverseFillMask, () => {
    hasMask.value === true && updateMaskValue(innerValue.value, true);
  });
  watch(() => props2.unmaskedValue, () => {
    hasMask.value === true && updateMaskValue(innerValue.value);
  });
  function getInitialMaskedValue() {
    updateMaskInternals();
    if (hasMask.value === true) {
      const masked = maskValue(unmaskValue(props2.modelValue));
      return props2.fillMask !== false ? fillWithMask(masked) : masked;
    }
    return props2.modelValue;
  }
  function getPaddedMaskMarked(size2) {
    if (size2 < maskMarked.length) {
      return maskMarked.slice(-size2);
    }
    let pad = "", localMaskMarked = maskMarked;
    const padPos = localMaskMarked.indexOf(MARKER);
    if (padPos !== -1) {
      for (let i = size2 - localMaskMarked.length; i > 0; i--) {
        pad += MARKER;
      }
      localMaskMarked = localMaskMarked.slice(0, padPos) + pad + localMaskMarked.slice(padPos);
    }
    return localMaskMarked;
  }
  function updateMaskInternals() {
    hasMask.value = props2.mask !== void 0 && props2.mask.length !== 0 && getIsTypeText();
    if (hasMask.value === false) {
      computedUnmask = void 0;
      maskMarked = "";
      maskReplaced = "";
      return;
    }
    const localComputedMask = NAMED_MASKS[props2.mask] === void 0 ? props2.mask : NAMED_MASKS[props2.mask], fillChar = typeof props2.fillMask === "string" && props2.fillMask.length !== 0 ? props2.fillMask.slice(0, 1) : "_", fillCharEscaped = fillChar.replace(escRegex, "\\$&"), unmask = [], extract = [], mask = [];
    let firstMatch = props2.reverseFillMask === true, unmaskChar = "", negateChar = "";
    localComputedMask.replace(tokenRegexMask, (_, char1, esc, token, char2) => {
      if (token !== void 0) {
        const c = TOKENS[token];
        mask.push(c);
        negateChar = c.negate;
        if (firstMatch === true) {
          extract.push("(?:" + negateChar + "+)?(" + c.pattern + "+)?(?:" + negateChar + "+)?(" + c.pattern + "+)?");
          firstMatch = false;
        }
        extract.push("(?:" + negateChar + "+)?(" + c.pattern + ")?");
      } else if (esc !== void 0) {
        unmaskChar = "\\" + (esc === "\\" ? "" : esc);
        mask.push(esc);
        unmask.push("([^" + unmaskChar + "]+)?" + unmaskChar + "?");
      } else {
        const c = char1 !== void 0 ? char1 : char2;
        unmaskChar = c === "\\" ? "\\\\\\\\" : c.replace(escRegex, "\\\\$&");
        mask.push(c);
        unmask.push("([^" + unmaskChar + "]+)?" + unmaskChar + "?");
      }
    });
    const unmaskMatcher = new RegExp(
      "^" + unmask.join("") + "(" + (unmaskChar === "" ? "." : "[^" + unmaskChar + "]") + "+)?" + (unmaskChar === "" ? "" : "[" + unmaskChar + "]*") + "$"
    ), extractLast = extract.length - 1, extractMatcher = extract.map((re, index) => {
      if (index === 0 && props2.reverseFillMask === true) {
        return new RegExp("^" + fillCharEscaped + "*" + re);
      } else if (index === extractLast) {
        return new RegExp(
          "^" + re + "(" + (negateChar === "" ? "." : negateChar) + "+)?" + (props2.reverseFillMask === true ? "$" : fillCharEscaped + "*")
        );
      }
      return new RegExp("^" + re);
    });
    computedMask = mask;
    computedUnmask = (val) => {
      const unmaskMatch = unmaskMatcher.exec(props2.reverseFillMask === true ? val : val.slice(0, mask.length + 1));
      if (unmaskMatch !== null) {
        val = unmaskMatch.slice(1).join("");
      }
      const extractMatch = [], extractMatcherLength = extractMatcher.length;
      for (let i = 0, str = val; i < extractMatcherLength; i++) {
        const m = extractMatcher[i].exec(str);
        if (m === null) {
          break;
        }
        str = str.slice(m.shift().length);
        extractMatch.push(...m);
      }
      if (extractMatch.length !== 0) {
        return extractMatch.join("");
      }
      return val;
    };
    maskMarked = mask.map((v) => typeof v === "string" ? v : MARKER).join("");
    maskReplaced = maskMarked.split(MARKER).join(fillChar);
  }
  function updateMaskValue(rawVal, updateMaskInternalsFlag, inputType) {
    const inp = inputRef.value, end = inp.selectionEnd, endReverse = inp.value.length - end, unmasked = unmaskValue(rawVal);
    updateMaskInternalsFlag === true && updateMaskInternals();
    const preMasked = maskValue(unmasked), masked = props2.fillMask !== false ? fillWithMask(preMasked) : preMasked, changed = innerValue.value !== masked;
    inp.value !== masked && (inp.value = masked);
    changed === true && (innerValue.value = masked);
    document.activeElement === inp && nextTick(() => {
      if (masked === maskReplaced) {
        const cursor = props2.reverseFillMask === true ? maskReplaced.length : 0;
        inp.setSelectionRange(cursor, cursor, "forward");
        return;
      }
      if (inputType === "insertFromPaste" && props2.reverseFillMask !== true) {
        const maxEnd = inp.selectionEnd;
        let cursor = end - 1;
        for (let i = pastedTextStart; i <= cursor && i < maxEnd; i++) {
          if (maskMarked[i] !== MARKER) {
            cursor++;
          }
        }
        moveCursor.right(inp, cursor);
        return;
      }
      if (["deleteContentBackward", "deleteContentForward"].indexOf(inputType) !== -1) {
        const cursor = props2.reverseFillMask === true ? end === 0 ? masked.length > preMasked.length ? 1 : 0 : Math.max(0, masked.length - (masked === maskReplaced ? 0 : Math.min(preMasked.length, endReverse) + 1)) + 1 : end;
        inp.setSelectionRange(cursor, cursor, "forward");
        return;
      }
      if (props2.reverseFillMask === true) {
        if (changed === true) {
          const cursor = Math.max(0, masked.length - (masked === maskReplaced ? 0 : Math.min(preMasked.length, endReverse + 1)));
          if (cursor === 1 && end === 1) {
            inp.setSelectionRange(cursor, cursor, "forward");
          } else {
            moveCursor.rightReverse(inp, cursor);
          }
        } else {
          const cursor = masked.length - endReverse;
          inp.setSelectionRange(cursor, cursor, "backward");
        }
      } else {
        if (changed === true) {
          const cursor = Math.max(0, maskMarked.indexOf(MARKER), Math.min(preMasked.length, end) - 1);
          moveCursor.right(inp, cursor);
        } else {
          const cursor = end - 1;
          moveCursor.right(inp, cursor);
        }
      }
    });
    const val = props2.unmaskedValue === true ? unmaskValue(masked) : masked;
    if (String(props2.modelValue) !== val && (props2.modelValue !== null || val !== "")) {
      emitValue(val, true);
    }
  }
  function moveCursorForPaste(inp, start2, end) {
    const preMasked = maskValue(unmaskValue(inp.value));
    start2 = Math.max(0, maskMarked.indexOf(MARKER), Math.min(preMasked.length, start2));
    pastedTextStart = start2;
    inp.setSelectionRange(start2, end, "forward");
  }
  const moveCursor = {
    left(inp, cursor) {
      const noMarkBefore = maskMarked.slice(cursor - 1).indexOf(MARKER) === -1;
      let i = Math.max(0, cursor - 1);
      for (; i >= 0; i--) {
        if (maskMarked[i] === MARKER) {
          cursor = i;
          noMarkBefore === true && cursor++;
          break;
        }
      }
      if (i < 0 && maskMarked[cursor] !== void 0 && maskMarked[cursor] !== MARKER) {
        return moveCursor.right(inp, 0);
      }
      cursor >= 0 && inp.setSelectionRange(cursor, cursor, "backward");
    },
    right(inp, cursor) {
      const limit = inp.value.length;
      let i = Math.min(limit, cursor + 1);
      for (; i <= limit; i++) {
        if (maskMarked[i] === MARKER) {
          cursor = i;
          break;
        } else if (maskMarked[i - 1] === MARKER) {
          cursor = i;
        }
      }
      if (i > limit && maskMarked[cursor - 1] !== void 0 && maskMarked[cursor - 1] !== MARKER) {
        return moveCursor.left(inp, limit);
      }
      inp.setSelectionRange(cursor, cursor, "forward");
    },
    leftReverse(inp, cursor) {
      const localMaskMarked = getPaddedMaskMarked(inp.value.length);
      let i = Math.max(0, cursor - 1);
      for (; i >= 0; i--) {
        if (localMaskMarked[i - 1] === MARKER) {
          cursor = i;
          break;
        } else if (localMaskMarked[i] === MARKER) {
          cursor = i;
          if (i === 0) {
            break;
          }
        }
      }
      if (i < 0 && localMaskMarked[cursor] !== void 0 && localMaskMarked[cursor] !== MARKER) {
        return moveCursor.rightReverse(inp, 0);
      }
      cursor >= 0 && inp.setSelectionRange(cursor, cursor, "backward");
    },
    rightReverse(inp, cursor) {
      const limit = inp.value.length, localMaskMarked = getPaddedMaskMarked(limit), noMarkBefore = localMaskMarked.slice(0, cursor + 1).indexOf(MARKER) === -1;
      let i = Math.min(limit, cursor + 1);
      for (; i <= limit; i++) {
        if (localMaskMarked[i - 1] === MARKER) {
          cursor = i;
          cursor > 0 && noMarkBefore === true && cursor--;
          break;
        }
      }
      if (i > limit && localMaskMarked[cursor - 1] !== void 0 && localMaskMarked[cursor - 1] !== MARKER) {
        return moveCursor.leftReverse(inp, limit);
      }
      inp.setSelectionRange(cursor, cursor, "forward");
    }
  };
  function onMaskedClick(e) {
    emit2("click", e);
    selectionAnchor = void 0;
  }
  function onMaskedKeydown(e) {
    emit2("keydown", e);
    if (shouldIgnoreKey(e) === true || e.altKey === true) return;
    const inp = inputRef.value, start2 = inp.selectionStart, end = inp.selectionEnd;
    if (!e.shiftKey) {
      selectionAnchor = void 0;
    }
    if (e.keyCode === 37 || e.keyCode === 39) {
      if (e.shiftKey && selectionAnchor === void 0) {
        selectionAnchor = inp.selectionDirection === "forward" ? start2 : end;
      }
      const fn = moveCursor[(e.keyCode === 39 ? "right" : "left") + (props2.reverseFillMask === true ? "Reverse" : "")];
      e.preventDefault();
      fn(inp, selectionAnchor === start2 ? end : start2);
      if (e.shiftKey) {
        const cursor = inp.selectionStart;
        inp.setSelectionRange(Math.min(selectionAnchor, cursor), Math.max(selectionAnchor, cursor), "forward");
      }
    } else if (e.keyCode === 8 && props2.reverseFillMask !== true && start2 === end) {
      moveCursor.left(inp, start2);
      inp.setSelectionRange(inp.selectionStart, end, "backward");
    } else if (e.keyCode === 46 && props2.reverseFillMask === true && start2 === end) {
      moveCursor.rightReverse(inp, end);
      inp.setSelectionRange(start2, inp.selectionEnd, "forward");
    }
  }
  function maskValue(val) {
    if (val === void 0 || val === null || val === "") {
      return "";
    }
    if (props2.reverseFillMask === true) {
      return maskValueReverse(val);
    }
    const mask = computedMask;
    let valIndex = 0, output = "";
    for (let maskIndex = 0; maskIndex < mask.length; maskIndex++) {
      const valChar = val[valIndex], maskDef = mask[maskIndex];
      if (typeof maskDef === "string") {
        output += maskDef;
        valChar === maskDef && valIndex++;
      } else if (valChar !== void 0 && maskDef.regex.test(valChar)) {
        output += maskDef.transform !== void 0 ? maskDef.transform(valChar) : valChar;
        valIndex++;
      } else {
        return output;
      }
    }
    return output;
  }
  function maskValueReverse(val) {
    const mask = computedMask, firstTokenIndex = maskMarked.indexOf(MARKER);
    let valIndex = val.length - 1, output = "";
    for (let maskIndex = mask.length - 1; maskIndex >= 0 && valIndex !== -1; maskIndex--) {
      const maskDef = mask[maskIndex];
      let valChar = val[valIndex];
      if (typeof maskDef === "string") {
        output = maskDef + output;
        valChar === maskDef && valIndex--;
      } else if (valChar !== void 0 && maskDef.regex.test(valChar)) {
        do {
          output = (maskDef.transform !== void 0 ? maskDef.transform(valChar) : valChar) + output;
          valIndex--;
          valChar = val[valIndex];
        } while (firstTokenIndex === maskIndex && valChar !== void 0 && maskDef.regex.test(valChar));
      } else {
        return output;
      }
    }
    return output;
  }
  function unmaskValue(val) {
    return typeof val !== "string" || computedUnmask === void 0 ? typeof val === "number" ? computedUnmask("" + val) : val : computedUnmask(val);
  }
  function fillWithMask(val) {
    if (maskReplaced.length - val.length <= 0) {
      return val;
    }
    return props2.reverseFillMask === true && val.length !== 0 ? maskReplaced.slice(0, -val.length) + val : val + maskReplaced.slice(val.length);
  }
  return {
    innerValue,
    hasMask,
    moveCursorForPaste,
    updateMaskValue,
    onMaskedKeydown,
    onMaskedClick
  };
}
const useFormProps = {
  name: String
};
function useFormAttrs(props2) {
  return computed(() => ({
    type: "hidden",
    name: props2.name,
    value: props2.modelValue
  }));
}
function useFormInject(formAttrs = {}) {
  return (child, action, className) => {
    child[action](
      h("input", {
        class: "hidden" + (className || ""),
        ...formAttrs.value
      })
    );
  };
}
function useFormInputNameAttr(props2) {
  return computed(() => props2.name || props2.for);
}
function useFileFormDomProps(props2, typeGuard) {
  function getFormDomProps() {
    const model = props2.modelValue;
    try {
      const dt = "DataTransfer" in window ? new DataTransfer() : "ClipboardEvent" in window ? new ClipboardEvent("").clipboardData : void 0;
      if (Object(model) === model) {
        ("length" in model ? Array.from(model) : [model]).forEach((file) => {
          dt.items.add(file);
        });
      }
      return {
        files: dt.files
      };
    } catch (e) {
      return {
        files: void 0
      };
    }
  }
  return computed(() => {
    if (props2.type !== "file") return;
    return getFormDomProps();
  });
}
const isJapanese = /[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/;
const isChinese = /[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u;
const isKorean = /[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/;
const isPlainText = /[a-z0-9_ -]$/i;
function useKeyComposition(onInput) {
  return function onComposition(e) {
    if (e.type === "compositionend" || e.type === "change") {
      if (e.target.qComposing !== true) return;
      e.target.qComposing = false;
      onInput(e);
    } else if (e.type === "compositionupdate" && e.target.qComposing !== true && typeof e.data === "string") {
      const isComposing = client.is.firefox === true ? isPlainText.test(e.data) === false : isJapanese.test(e.data) === true || isChinese.test(e.data) === true || isKorean.test(e.data) === true;
      if (isComposing === true) {
        e.target.qComposing = true;
      }
    }
  };
}
const QInput = createComponent({
  name: "QInput",
  inheritAttrs: false,
  props: {
    ...useFieldProps,
    ...useMaskProps,
    ...useFormProps,
    // override of useFieldProps > modelValue
    modelValue: [String, Number, FileList],
    shadowText: String,
    type: {
      type: String,
      default: "text"
    },
    debounce: [String, Number],
    autogrow: Boolean,
    // makes a textarea
    inputClass: [Array, String, Object],
    inputStyle: [Array, String, Object]
  },
  emits: [
    ...useFieldEmits,
    "paste",
    "change",
    "keydown",
    "click",
    "animationend"
  ],
  setup(props2, { emit: emit2, attrs }) {
    const { proxy } = getCurrentInstance();
    const { $q } = proxy;
    const temp = {};
    let emitCachedValue = NaN, typedNumber, stopValueWatcher, emitTimer = null, emitValueFn;
    const inputRef = ref(null);
    const nameProp = useFormInputNameAttr(props2);
    const {
      innerValue,
      hasMask,
      moveCursorForPaste,
      updateMaskValue,
      onMaskedKeydown,
      onMaskedClick
    } = useMask(props2, emit2, emitValue, inputRef);
    const formDomProps = useFileFormDomProps(
      props2
    );
    const hasValue = computed(() => fieldValueIsFilled(innerValue.value));
    const onComposition = useKeyComposition(onInput);
    const state = useFieldState({ changeEvent: true });
    const isTextarea = computed(
      () => props2.type === "textarea" || props2.autogrow === true
    );
    const isTypeText = computed(
      () => isTextarea.value === true || ["text", "search", "url", "tel", "password"].includes(props2.type)
    );
    const onEvents = computed(() => {
      const evt = {
        ...state.splitAttrs.listeners.value,
        onInput,
        onPaste,
        // Safari < 10.2 & UIWebView doesn't fire compositionend when
        // switching focus before confirming composition choice
        // this also fixes the issue where some browsers e.g. iOS Chrome
        // fires "change" instead of "input" on autocomplete.
        onChange,
        onBlur: onFinishEditing,
        onFocus: stop
      };
      evt.onCompositionstart = evt.onCompositionupdate = evt.onCompositionend = onComposition;
      if (hasMask.value === true) {
        evt.onKeydown = onMaskedKeydown;
        evt.onClick = onMaskedClick;
      }
      if (props2.autogrow === true) {
        evt.onAnimationend = onAnimationend;
      }
      return evt;
    });
    const inputAttrs = computed(() => {
      const attrs2 = {
        tabindex: 0,
        "data-autofocus": props2.autofocus === true || void 0,
        rows: props2.type === "textarea" ? 6 : void 0,
        "aria-label": props2.label,
        name: nameProp.value,
        ...state.splitAttrs.attributes.value,
        id: state.targetUid.value,
        maxlength: props2.maxlength,
        disabled: props2.disable === true,
        readonly: props2.readonly === true
      };
      if (isTextarea.value === false) {
        attrs2.type = props2.type;
      }
      if (props2.autogrow === true) {
        attrs2.rows = 1;
      }
      return attrs2;
    });
    watch(() => props2.type, () => {
      if (inputRef.value) {
        inputRef.value.value = props2.modelValue;
      }
    });
    watch(() => props2.modelValue, (v) => {
      if (hasMask.value === true) {
        if (stopValueWatcher === true) {
          stopValueWatcher = false;
          if (String(v) === emitCachedValue) return;
        }
        updateMaskValue(v);
      } else if (innerValue.value !== v) {
        innerValue.value = v;
        if (props2.type === "number" && temp.hasOwnProperty("value") === true) {
          if (typedNumber === true) {
            typedNumber = false;
          } else {
            delete temp.value;
          }
        }
      }
      props2.autogrow === true && nextTick(adjustHeight);
    });
    watch(() => props2.autogrow, (val) => {
      if (val === true) {
        nextTick(adjustHeight);
      } else if (inputRef.value !== null && attrs.rows > 0) {
        inputRef.value.style.height = "auto";
      }
    });
    watch(() => props2.dense, () => {
      props2.autogrow === true && nextTick(adjustHeight);
    });
    function focus() {
      addFocusFn(() => {
        const el = document.activeElement;
        if (inputRef.value !== null && inputRef.value !== el && (el === null || el.id !== state.targetUid.value)) {
          inputRef.value.focus({ preventScroll: true });
        }
      });
    }
    function select() {
      inputRef.value?.select();
    }
    function onPaste(e) {
      if (hasMask.value === true && props2.reverseFillMask !== true) {
        const inp = e.target;
        moveCursorForPaste(inp, inp.selectionStart, inp.selectionEnd);
      }
      emit2("paste", e);
    }
    function onInput(e) {
      if (!e || !e.target) return;
      if (props2.type === "file") {
        emit2("update:modelValue", e.target.files);
        return;
      }
      const val = e.target.value;
      if (e.target.qComposing === true) {
        temp.value = val;
        return;
      }
      if (hasMask.value === true) {
        updateMaskValue(val, false, e.inputType);
      } else {
        emitValue(val);
        if (isTypeText.value === true && e.target === document.activeElement) {
          const { selectionStart, selectionEnd } = e.target;
          if (selectionStart !== void 0 && selectionEnd !== void 0) {
            nextTick(() => {
              if (e.target === document.activeElement && val.indexOf(e.target.value) === 0) {
                e.target.setSelectionRange(selectionStart, selectionEnd);
              }
            });
          }
        }
      }
      props2.autogrow === true && adjustHeight();
    }
    function onAnimationend(e) {
      emit2("animationend", e);
      adjustHeight();
    }
    function emitValue(val, stopWatcher) {
      emitValueFn = () => {
        emitTimer = null;
        if (props2.type !== "number" && temp.hasOwnProperty("value") === true) {
          delete temp.value;
        }
        if (props2.modelValue !== val && emitCachedValue !== val) {
          emitCachedValue = val;
          stopWatcher === true && (stopValueWatcher = true);
          emit2("update:modelValue", val);
          nextTick(() => {
            emitCachedValue === val && (emitCachedValue = NaN);
          });
        }
        emitValueFn = void 0;
      };
      if (props2.type === "number") {
        typedNumber = true;
        temp.value = val;
      }
      if (props2.debounce !== void 0) {
        emitTimer !== null && clearTimeout(emitTimer);
        temp.value = val;
        emitTimer = setTimeout(emitValueFn, props2.debounce);
      } else {
        emitValueFn();
      }
    }
    function adjustHeight() {
      requestAnimationFrame(() => {
        const inp = inputRef.value;
        if (inp !== null) {
          const parentStyle = inp.parentNode.style;
          const { scrollTop } = inp;
          const { overflowY, maxHeight } = $q.platform.is.firefox === true ? {} : window.getComputedStyle(inp);
          const changeOverflow = overflowY !== void 0 && overflowY !== "scroll";
          changeOverflow === true && (inp.style.overflowY = "hidden");
          parentStyle.marginBottom = inp.scrollHeight - 1 + "px";
          inp.style.height = "1px";
          inp.style.height = inp.scrollHeight + "px";
          changeOverflow === true && (inp.style.overflowY = parseInt(maxHeight, 10) < inp.scrollHeight ? "auto" : "hidden");
          parentStyle.marginBottom = "";
          inp.scrollTop = scrollTop;
        }
      });
    }
    function onChange(e) {
      onComposition(e);
      if (emitTimer !== null) {
        clearTimeout(emitTimer);
        emitTimer = null;
      }
      emitValueFn?.();
      emit2("change", e.target.value);
    }
    function onFinishEditing(e) {
      e !== void 0 && stop(e);
      if (emitTimer !== null) {
        clearTimeout(emitTimer);
        emitTimer = null;
      }
      emitValueFn?.();
      typedNumber = false;
      stopValueWatcher = false;
      delete temp.value;
      props2.type !== "file" && setTimeout(() => {
        if (inputRef.value !== null) {
          inputRef.value.value = innerValue.value !== void 0 ? innerValue.value : "";
        }
      });
    }
    function getCurValue() {
      return temp.hasOwnProperty("value") === true ? temp.value : innerValue.value !== void 0 ? innerValue.value : "";
    }
    onBeforeUnmount(() => {
      onFinishEditing();
    });
    onMounted(() => {
      props2.autogrow === true && adjustHeight();
    });
    Object.assign(state, {
      innerValue,
      fieldClass: computed(
        () => `q-${isTextarea.value === true ? "textarea" : "input"}` + (props2.autogrow === true ? " q-textarea--autogrow" : "")
      ),
      hasShadow: computed(
        () => props2.type !== "file" && typeof props2.shadowText === "string" && props2.shadowText.length !== 0
      ),
      inputRef,
      emitValue,
      hasValue,
      floatingLabel: computed(
        () => hasValue.value === true && (props2.type !== "number" || isNaN(innerValue.value) === false) || fieldValueIsFilled(props2.displayValue)
      ),
      getControl: () => {
        return h(isTextarea.value === true ? "textarea" : "input", {
          ref: inputRef,
          class: [
            "q-field__native q-placeholder",
            props2.inputClass
          ],
          style: props2.inputStyle,
          ...inputAttrs.value,
          ...onEvents.value,
          ...props2.type !== "file" ? { value: getCurValue() } : formDomProps.value
        });
      },
      getShadowControl: () => {
        return h("div", {
          class: "q-field__native q-field__shadow absolute-bottom no-pointer-events" + (isTextarea.value === true ? "" : " text-no-wrap")
        }, [
          h("span", { class: "invisible" }, getCurValue()),
          h("span", props2.shadowText)
        ]);
      }
    });
    const renderFn = useField(state);
    Object.assign(proxy, {
      focus,
      select,
      getNativeElement: () => inputRef.value
      // deprecated
    });
    injectProp(proxy, "nativeEl", () => inputRef.value);
    return renderFn;
  }
});
function useRefocusTarget(props2, rootRef) {
  const refocusRef = ref(null);
  const refocusTargetEl = computed(() => {
    if (props2.disable === true) {
      return null;
    }
    return h("span", {
      ref: refocusRef,
      class: "no-outline",
      tabindex: -1
    });
  });
  function refocusTarget(e) {
    const root = rootRef.value;
    if (e?.qAvoidFocus === true) return;
    if (e?.type.indexOf("key") === 0) {
      if (document.activeElement !== root && root?.contains(document.activeElement) === true) {
        root.focus();
      }
    } else if (refocusRef.value !== null && (e === void 0 || root?.contains(e.target) === true)) {
      refocusRef.value.focus();
    }
  }
  return {
    refocusTargetEl,
    refocusTarget
  };
}
const optionSizes = {
  xs: 30,
  sm: 35,
  md: 40,
  lg: 50,
  xl: 60
};
const createSvg = () => h("svg", {
  key: "svg",
  class: "q-radio__bg absolute non-selectable",
  viewBox: "0 0 24 24"
}, [
  h("path", {
    d: "M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"
  }),
  h("path", {
    class: "q-radio__check",
    d: "M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"
  })
]);
const QRadio = createComponent({
  name: "QRadio",
  props: {
    ...useDarkProps,
    ...useSizeProps,
    ...useFormProps,
    modelValue: { required: true },
    val: { required: true },
    label: String,
    leftLabel: Boolean,
    checkedIcon: String,
    uncheckedIcon: String,
    color: String,
    keepColor: Boolean,
    dense: Boolean,
    disable: Boolean,
    tabindex: [String, Number]
  },
  emits: ["update:modelValue"],
  setup(props2, { slots, emit: emit2 }) {
    const { proxy } = getCurrentInstance();
    const isDark = useDark(props2, proxy.$q);
    const sizeStyle = useSize(props2, optionSizes);
    const rootRef = ref(null);
    const { refocusTargetEl, refocusTarget } = useRefocusTarget(props2, rootRef);
    const isTrue = computed(() => toRaw$1(props2.modelValue) === toRaw$1(props2.val));
    const classes = computed(
      () => "q-radio cursor-pointer no-outline row inline no-wrap items-center" + (props2.disable === true ? " disabled" : "") + (isDark.value === true ? " q-radio--dark" : "") + (props2.dense === true ? " q-radio--dense" : "") + (props2.leftLabel === true ? " reverse" : "")
    );
    const innerClass = computed(() => {
      const color = props2.color !== void 0 && (props2.keepColor === true || isTrue.value === true) ? ` text-${props2.color}` : "";
      return `q-radio__inner relative-position q-radio__inner--${isTrue.value === true ? "truthy" : "falsy"}${color}`;
    });
    const icon = computed(
      () => (isTrue.value === true ? props2.checkedIcon : props2.uncheckedIcon) || null
    );
    const tabindex = computed(() => props2.disable === true ? -1 : props2.tabindex || 0);
    const formAttrs = computed(() => {
      const prop = { type: "radio" };
      props2.name !== void 0 && Object.assign(prop, {
        // see https://vuejs.org/guide/extras/render-function.html#creating-vnodes (.prop)
        ".checked": isTrue.value === true,
        "^checked": isTrue.value === true ? "checked" : void 0,
        name: props2.name,
        value: props2.val
      });
      return prop;
    });
    const injectFormInput = useFormInject(formAttrs);
    function onClick(e) {
      if (e !== void 0) {
        stopAndPrevent(e);
        refocusTarget(e);
      }
      if (props2.disable !== true && isTrue.value !== true) {
        emit2("update:modelValue", props2.val, e);
      }
    }
    function onKeydown2(e) {
      if (e.keyCode === 13 || e.keyCode === 32) {
        stopAndPrevent(e);
      }
    }
    function onKeyup2(e) {
      if (e.keyCode === 13 || e.keyCode === 32) {
        onClick(e);
      }
    }
    Object.assign(proxy, { set: onClick });
    const svg = createSvg();
    return () => {
      const content = icon.value !== null ? [
        h("div", {
          key: "icon",
          class: "q-radio__icon-container absolute-full flex flex-center no-wrap"
        }, [
          h(QIcon, {
            class: "q-radio__icon",
            name: icon.value
          })
        ])
      ] : [svg];
      props2.disable !== true && injectFormInput(
        content,
        "unshift",
        " q-radio__native q-ma-none q-pa-none"
      );
      const child = [
        h("div", {
          class: innerClass.value,
          style: sizeStyle.value,
          "aria-hidden": "true"
        }, content)
      ];
      if (refocusTargetEl.value !== null) {
        child.push(refocusTargetEl.value);
      }
      const label = props2.label !== void 0 ? hMergeSlot(slots.default, [props2.label]) : hSlot(slots.default);
      label !== void 0 && child.push(
        h("div", {
          class: "q-radio__label q-anchor--skip"
        }, label)
      );
      return h("div", {
        ref: rootRef,
        class: classes.value,
        tabindex: tabindex.value,
        role: "radio",
        "aria-label": props2.label,
        "aria-checked": isTrue.value === true ? "true" : "false",
        "aria-disabled": props2.disable === true ? "true" : void 0,
        onClick,
        onKeydown: onKeydown2,
        onKeyup: onKeyup2
      }, child);
    };
  }
});
const useCheckboxProps = {
  ...useDarkProps,
  ...useSizeProps,
  ...useFormProps,
  modelValue: {
    required: true,
    default: null
  },
  val: {},
  trueValue: { default: true },
  falseValue: { default: false },
  indeterminateValue: { default: null },
  checkedIcon: String,
  uncheckedIcon: String,
  indeterminateIcon: String,
  toggleOrder: {
    type: String,
    validator: (v) => v === "tf" || v === "ft"
  },
  toggleIndeterminate: Boolean,
  label: String,
  leftLabel: Boolean,
  color: String,
  keepColor: Boolean,
  dense: Boolean,
  disable: Boolean,
  tabindex: [String, Number]
};
const useCheckboxEmits = ["update:modelValue"];
function useCheckbox(type, getInner) {
  const { props: props2, slots, emit: emit2, proxy } = getCurrentInstance();
  const { $q } = proxy;
  const isDark = useDark(props2, $q);
  const rootRef = ref(null);
  const { refocusTargetEl, refocusTarget } = useRefocusTarget(props2, rootRef);
  const sizeStyle = useSize(props2, optionSizes);
  const modelIsArray = computed(
    () => props2.val !== void 0 && Array.isArray(props2.modelValue)
  );
  const index = computed(() => {
    const val = toRaw$1(props2.val);
    return modelIsArray.value === true ? props2.modelValue.findIndex((opt) => toRaw$1(opt) === val) : -1;
  });
  const isTrue = computed(() => modelIsArray.value === true ? index.value !== -1 : toRaw$1(props2.modelValue) === toRaw$1(props2.trueValue));
  const isFalse = computed(() => modelIsArray.value === true ? index.value === -1 : toRaw$1(props2.modelValue) === toRaw$1(props2.falseValue));
  const isIndeterminate = computed(
    () => isTrue.value === false && isFalse.value === false
  );
  const tabindex = computed(() => props2.disable === true ? -1 : props2.tabindex || 0);
  const classes = computed(
    () => `q-${type} cursor-pointer no-outline row inline no-wrap items-center` + (props2.disable === true ? " disabled" : "") + (isDark.value === true ? ` q-${type}--dark` : "") + (props2.dense === true ? ` q-${type}--dense` : "") + (props2.leftLabel === true ? " reverse" : "")
  );
  const innerClass = computed(() => {
    const state = isTrue.value === true ? "truthy" : isFalse.value === true ? "falsy" : "indet";
    const color = props2.color !== void 0 && (props2.keepColor === true || (type === "toggle" ? isTrue.value === true : isFalse.value !== true)) ? ` text-${props2.color}` : "";
    return `q-${type}__inner relative-position non-selectable q-${type}__inner--${state}${color}`;
  });
  const formAttrs = computed(() => {
    const prop = { type: "checkbox" };
    props2.name !== void 0 && Object.assign(prop, {
      // see https://vuejs.org/guide/extras/render-function.html#creating-vnodes (.prop)
      ".checked": isTrue.value,
      "^checked": isTrue.value === true ? "checked" : void 0,
      name: props2.name,
      value: modelIsArray.value === true ? props2.val : props2.trueValue
    });
    return prop;
  });
  const injectFormInput = useFormInject(formAttrs);
  const attributes = computed(() => {
    const attrs = {
      tabindex: tabindex.value,
      role: type === "toggle" ? "switch" : "checkbox",
      "aria-label": props2.label,
      "aria-checked": isIndeterminate.value === true ? "mixed" : isTrue.value === true ? "true" : "false"
    };
    if (props2.disable === true) {
      attrs["aria-disabled"] = "true";
    }
    return attrs;
  });
  function onClick(e) {
    if (e !== void 0) {
      stopAndPrevent(e);
      refocusTarget(e);
    }
    if (props2.disable !== true) {
      emit2("update:modelValue", getNextValue(), e);
    }
  }
  function getNextValue() {
    if (modelIsArray.value === true) {
      if (isTrue.value === true) {
        const val = props2.modelValue.slice();
        val.splice(index.value, 1);
        return val;
      }
      return props2.modelValue.concat([props2.val]);
    }
    if (isTrue.value === true) {
      if (props2.toggleOrder !== "ft" || props2.toggleIndeterminate === false) {
        return props2.falseValue;
      }
    } else if (isFalse.value === true) {
      if (props2.toggleOrder === "ft" || props2.toggleIndeterminate === false) {
        return props2.trueValue;
      }
    } else {
      return props2.toggleOrder !== "ft" ? props2.trueValue : props2.falseValue;
    }
    return props2.indeterminateValue;
  }
  function onKeydown2(e) {
    if (e.keyCode === 13 || e.keyCode === 32) {
      stopAndPrevent(e);
    }
  }
  function onKeyup2(e) {
    if (e.keyCode === 13 || e.keyCode === 32) {
      onClick(e);
    }
  }
  const getInnerContent = getInner(isTrue, isIndeterminate);
  Object.assign(proxy, { toggle: onClick });
  return () => {
    const inner = getInnerContent();
    props2.disable !== true && injectFormInput(
      inner,
      "unshift",
      ` q-${type}__native absolute q-ma-none q-pa-none`
    );
    const child = [
      h("div", {
        class: innerClass.value,
        style: sizeStyle.value,
        "aria-hidden": "true"
      }, inner)
    ];
    if (refocusTargetEl.value !== null) {
      child.push(refocusTargetEl.value);
    }
    const label = props2.label !== void 0 ? hMergeSlot(slots.default, [props2.label]) : hSlot(slots.default);
    label !== void 0 && child.push(
      h("div", {
        class: `q-${type}__label q-anchor--skip`
      }, label)
    );
    return h("div", {
      ref: rootRef,
      class: classes.value,
      ...attributes.value,
      onClick,
      onKeydown: onKeydown2,
      onKeyup: onKeyup2
    }, child);
  };
}
const createBgNode = () => h("div", {
  key: "svg",
  class: "q-checkbox__bg absolute"
}, [
  h("svg", {
    class: "q-checkbox__svg fit absolute-full",
    viewBox: "0 0 24 24"
  }, [
    h("path", {
      class: "q-checkbox__truthy",
      fill: "none",
      d: "M1.73,12.91 8.1,19.28 22.79,4.59"
    }),
    h("path", {
      class: "q-checkbox__indet",
      d: "M4,14H20V10H4"
    })
  ])
]);
const QCheckbox = createComponent({
  name: "QCheckbox",
  props: useCheckboxProps,
  emits: useCheckboxEmits,
  setup(props2) {
    const bgNode = createBgNode();
    function getInner(isTrue, isIndeterminate) {
      const icon = computed(
        () => (isTrue.value === true ? props2.checkedIcon : isIndeterminate.value === true ? props2.indeterminateIcon : props2.uncheckedIcon) || null
      );
      return () => icon.value !== null ? [
        h("div", {
          key: "icon",
          class: "q-checkbox__icon-container absolute-full flex flex-center no-wrap"
        }, [
          h(QIcon, {
            class: "q-checkbox__icon",
            name: icon.value
          })
        ])
      ] : [bgNode];
    }
    return useCheckbox("checkbox", getInner);
  }
});
const QToggle = createComponent({
  name: "QToggle",
  props: {
    ...useCheckboxProps,
    icon: String,
    iconColor: String
  },
  emits: useCheckboxEmits,
  setup(props2) {
    function getInner(isTrue, isIndeterminate) {
      const icon = computed(
        () => (isTrue.value === true ? props2.checkedIcon : isIndeterminate.value === true ? props2.indeterminateIcon : props2.uncheckedIcon) || props2.icon
      );
      const color = computed(() => isTrue.value === true ? props2.iconColor : null);
      return () => [
        h("div", { class: "q-toggle__track" }),
        h(
          "div",
          {
            class: "q-toggle__thumb absolute flex flex-center no-wrap"
          },
          icon.value !== void 0 ? [
            h(QIcon, {
              name: icon.value,
              color: color.value
            })
          ] : void 0
        )
      ];
    }
    return useCheckbox("toggle", getInner);
  }
});
const components = {
  radio: QRadio,
  checkbox: QCheckbox,
  toggle: QToggle
};
const typeValues = Object.keys(components);
function getPropValueFn(userPropName, defaultPropName) {
  if (typeof userPropName === "function") return userPropName;
  const propName = userPropName !== void 0 ? userPropName : defaultPropName;
  return (opt) => opt[propName];
}
const QOptionGroup = createComponent({
  name: "QOptionGroup",
  props: {
    ...useDarkProps,
    modelValue: {
      required: true
    },
    options: {
      type: Array,
      validator: (opts) => opts.every(isObject),
      default: () => []
    },
    optionValue: [Function, String],
    optionLabel: [Function, String],
    optionDisable: [Function, String],
    name: String,
    type: {
      type: String,
      default: "radio",
      validator: (v) => typeValues.includes(v)
    },
    color: String,
    keepColor: Boolean,
    dense: Boolean,
    size: String,
    leftLabel: Boolean,
    inline: Boolean,
    disable: Boolean
  },
  emits: ["update:modelValue"],
  setup(props2, { emit: emit2, slots }) {
    const { proxy: { $q } } = getCurrentInstance();
    const arrayModel = Array.isArray(props2.modelValue);
    if (props2.type === "radio") {
      if (arrayModel === true) {
        console.error("q-option-group: model should not be array");
      }
    } else if (arrayModel === false) {
      console.error("q-option-group: model should be array in your case");
    }
    const isDark = useDark(props2, $q);
    const component = computed(() => components[props2.type]);
    const getOptionValue = computed(() => getPropValueFn(props2.optionValue, "value"));
    const getOptionLabel = computed(() => getPropValueFn(props2.optionLabel, "label"));
    const getOptionDisable = computed(() => getPropValueFn(props2.optionDisable, "disable"));
    const innerOptions = computed(() => props2.options.map((opt) => ({
      val: getOptionValue.value(opt),
      name: opt.name === void 0 ? props2.name : opt.name,
      disable: props2.disable || getOptionDisable.value(opt),
      leftLabel: opt.leftLabel === void 0 ? props2.leftLabel : opt.leftLabel,
      color: opt.color === void 0 ? props2.color : opt.color,
      checkedIcon: opt.checkedIcon,
      uncheckedIcon: opt.uncheckedIcon,
      dark: opt.dark === void 0 ? isDark.value : opt.dark,
      size: opt.size === void 0 ? props2.size : opt.size,
      dense: props2.dense,
      keepColor: opt.keepColor === void 0 ? props2.keepColor : opt.keepColor
    })));
    const classes = computed(
      () => "q-option-group q-gutter-x-sm" + (props2.inline === true ? " q-option-group--inline" : "")
    );
    const attrs = computed(() => {
      const attrs2 = { role: "group" };
      if (props2.type === "radio") {
        attrs2.role = "radiogroup";
        if (props2.disable === true) {
          attrs2["aria-disabled"] = "true";
        }
      }
      return attrs2;
    });
    function onUpdateModelValue(value) {
      emit2("update:modelValue", value);
    }
    return () => h("div", {
      class: classes.value,
      ...attrs.value
    }, props2.options.map((opt, i) => {
      const child = slots["label-" + i] !== void 0 ? () => slots["label-" + i](opt) : slots.label !== void 0 ? () => slots.label(opt) : void 0;
      return h("div", [
        h(component.value, {
          label: child === void 0 ? getOptionLabel.value(opt) : null,
          modelValue: props2.modelValue,
          "onUpdate:modelValue": onUpdateModelValue,
          ...innerOptions.value[i]
        }, child)
      ]);
    }));
  }
});
const DialogPlugin = createComponent({
  name: "DialogPluginComponent",
  props: {
    ...useDarkProps,
    title: String,
    message: String,
    prompt: Object,
    options: Object,
    progress: [Boolean, Object],
    html: Boolean,
    ok: {
      type: [String, Object, Boolean],
      default: true
    },
    cancel: [String, Object, Boolean],
    focus: {
      type: String,
      default: "ok",
      validator: (v) => ["ok", "cancel", "none"].includes(v)
    },
    stackButtons: Boolean,
    color: String,
    cardClass: [String, Array, Object],
    cardStyle: [String, Array, Object]
  },
  emits: ["ok", "hide"],
  setup(props2, { emit: emit2 }) {
    const { proxy } = getCurrentInstance();
    const { $q } = proxy;
    const isDark = useDark(props2, $q);
    const dialogRef = ref(null);
    const model = ref(
      props2.prompt !== void 0 ? props2.prompt.model : props2.options !== void 0 ? props2.options.model : void 0
    );
    const classes = computed(
      () => "q-dialog-plugin" + (isDark.value === true ? " q-dialog-plugin--dark q-dark" : "") + (props2.progress !== false ? " q-dialog-plugin--progress" : "")
    );
    const vmColor = computed(
      () => props2.color || (isDark.value === true ? "amber" : "primary")
    );
    const spinner = computed(() => props2.progress === false ? null : isObject(props2.progress) === true ? {
      component: props2.progress.spinner || QSpinner,
      props: { color: props2.progress.color || vmColor.value }
    } : {
      component: QSpinner,
      props: { color: vmColor.value }
    });
    const hasForm = computed(
      () => props2.prompt !== void 0 || props2.options !== void 0
    );
    const formProps = computed(() => {
      if (hasForm.value !== true) {
        return {};
      }
      const { model: model2, isValid, items, ...formProps2 } = props2.prompt !== void 0 ? props2.prompt : props2.options;
      return formProps2;
    });
    const okLabel = computed(() => isObject(props2.ok) === true ? $q.lang.label.ok : props2.ok === true ? $q.lang.label.ok : props2.ok);
    const cancelLabel = computed(() => isObject(props2.cancel) === true ? $q.lang.label.cancel : props2.cancel === true ? $q.lang.label.cancel : props2.cancel);
    const okDisabled = computed(() => {
      if (props2.prompt !== void 0) {
        return props2.prompt.isValid !== void 0 && props2.prompt.isValid(model.value) !== true;
      }
      if (props2.options !== void 0) {
        return props2.options.isValid !== void 0 && props2.options.isValid(model.value) !== true;
      }
      return false;
    });
    const okProps = computed(() => ({
      color: vmColor.value,
      label: okLabel.value,
      ripple: false,
      disable: okDisabled.value,
      ...isObject(props2.ok) === true ? props2.ok : { flat: true },
      "data-autofocus": props2.focus === "ok" && hasForm.value !== true || void 0,
      onClick: onOk
    }));
    const cancelProps = computed(() => ({
      color: vmColor.value,
      label: cancelLabel.value,
      ripple: false,
      ...isObject(props2.cancel) === true ? props2.cancel : { flat: true },
      "data-autofocus": props2.focus === "cancel" && hasForm.value !== true || void 0,
      onClick: onCancel
    }));
    watch(() => props2.prompt && props2.prompt.model, onUpdateModel);
    watch(() => props2.options && props2.options.model, onUpdateModel);
    function show() {
      dialogRef.value.show();
    }
    function hide() {
      dialogRef.value.hide();
    }
    function onOk() {
      emit2("ok", toRaw$1(model.value));
      hide();
    }
    function onCancel() {
      hide();
    }
    function onDialogHide() {
      emit2("hide");
    }
    function onUpdateModel(val) {
      model.value = val;
    }
    function onInputKeyup(evt) {
      if (okDisabled.value !== true && props2.prompt.type !== "textarea" && isKeyCode(evt, 13) === true) {
        onOk();
      }
    }
    function getSection(classes2, text) {
      return props2.html === true ? h(QCardSection, {
        class: classes2,
        innerHTML: text
      }) : h(QCardSection, { class: classes2 }, () => text);
    }
    function getPrompt() {
      return [
        h(QInput, {
          color: vmColor.value,
          dense: true,
          autofocus: true,
          dark: isDark.value,
          ...formProps.value,
          modelValue: model.value,
          "onUpdate:modelValue": onUpdateModel,
          onKeyup: onInputKeyup
        })
      ];
    }
    function getOptions() {
      return [
        h(QOptionGroup, {
          color: vmColor.value,
          options: props2.options.items,
          dark: isDark.value,
          ...formProps.value,
          modelValue: model.value,
          "onUpdate:modelValue": onUpdateModel
        })
      ];
    }
    function getButtons() {
      const child = [];
      props2.cancel && child.push(
        h(QBtn, cancelProps.value)
      );
      props2.ok && child.push(
        h(QBtn, okProps.value)
      );
      return h(QCardActions, {
        class: props2.stackButtons === true ? "items-end" : "",
        vertical: props2.stackButtons,
        align: "right"
      }, () => child);
    }
    function getCardContent() {
      const child = [];
      props2.title && child.push(
        getSection("q-dialog__title", props2.title)
      );
      props2.progress !== false && child.push(
        h(
          QCardSection,
          { class: "q-dialog__progress" },
          () => h(spinner.value.component, spinner.value.props)
        )
      );
      props2.message && child.push(
        getSection("q-dialog__message", props2.message)
      );
      if (props2.prompt !== void 0) {
        child.push(
          h(
            QCardSection,
            { class: "scroll q-dialog-plugin__form" },
            getPrompt
          )
        );
      } else if (props2.options !== void 0) {
        child.push(
          h(QSeparator, { dark: isDark.value }),
          h(
            QCardSection,
            { class: "scroll q-dialog-plugin__form" },
            getOptions
          ),
          h(QSeparator, { dark: isDark.value })
        );
      }
      if (props2.ok || props2.cancel) {
        child.push(getButtons());
      }
      return child;
    }
    function getContent() {
      return [
        h(QCard, {
          class: [
            classes.value,
            props2.cardClass
          ],
          style: props2.cardStyle,
          dark: isDark.value
        }, getCardContent)
      ];
    }
    Object.assign(proxy, { show, hide });
    return () => h(QDialog, {
      ref: dialogRef,
      onHide: onDialogHide
    }, getContent);
  }
});
function merge(target2, source) {
  for (const key in source) {
    if (key !== "spinner" && Object(source[key]) === source[key]) {
      target2[key] = Object(target2[key]) !== target2[key] ? {} : { ...target2[key] };
      merge(target2[key], source[key]);
    } else {
      target2[key] = source[key];
    }
  }
}
function globalDialog(DefaultComponent, supportsCustomComponent, parentApp) {
  return (pluginProps) => {
    let DialogComponent, props2;
    const isCustom = pluginProps.component !== void 0;
    if (isCustom === true) {
      const { component, componentProps } = pluginProps;
      DialogComponent = typeof component === "string" ? parentApp.component(component) : component;
      props2 = componentProps || {};
    } else {
      const { class: klass, style, ...otherProps } = pluginProps;
      DialogComponent = DefaultComponent;
      props2 = otherProps;
      klass !== void 0 && (otherProps.cardClass = klass);
      style !== void 0 && (otherProps.cardStyle = style);
    }
    let vm2, emittedOK = false;
    const dialogRef = ref(null);
    const el = createGlobalNode(false, "dialog");
    const applyState = (cmd) => {
      if (dialogRef.value?.[cmd] !== void 0) {
        dialogRef.value[cmd]();
        return;
      }
      const target2 = vm2.$.subTree;
      if (target2?.component) {
        if (target2.component.proxy && target2.component.proxy[cmd]) {
          target2.component.proxy[cmd]();
          return;
        }
        if (target2.component.subTree && target2.component.subTree.component && target2.component.subTree.component.proxy && target2.component.subTree.component.proxy[cmd]) {
          target2.component.subTree.component.proxy[cmd]();
          return;
        }
      }
      console.error("[Quasar] Incorrectly defined Dialog component");
    };
    const okFns = [], cancelFns = [], API = {
      onOk(fn) {
        okFns.push(fn);
        return API;
      },
      onCancel(fn) {
        cancelFns.push(fn);
        return API;
      },
      onDismiss(fn) {
        okFns.push(fn);
        cancelFns.push(fn);
        return API;
      },
      hide() {
        applyState("hide");
        return API;
      },
      update(componentProps) {
        if (vm2 !== null) {
          if (isCustom === true) {
            Object.assign(props2, componentProps);
          } else {
            const { class: klass, style, ...cfg } = componentProps;
            klass !== void 0 && (cfg.cardClass = klass);
            style !== void 0 && (cfg.cardStyle = style);
            merge(props2, cfg);
          }
          vm2.$forceUpdate();
        }
        return API;
      }
    };
    const onOk = (data) => {
      emittedOK = true;
      okFns.forEach((fn) => {
        fn(data);
      });
    };
    const onHide = () => {
      app2.unmount(el);
      removeGlobalNode(el);
      app2 = null;
      vm2 = null;
      if (emittedOK !== true) {
        cancelFns.forEach((fn) => {
          fn();
        });
      }
    };
    let app2 = createChildApp({
      name: "QGlobalDialog",
      setup: () => () => h(DialogComponent, {
        ...props2,
        ref: dialogRef,
        onOk,
        onHide,
        onVnodeMounted(...args) {
          if (typeof props2.onVnodeMounted === "function") {
            props2.onVnodeMounted(...args);
          }
          nextTick(() => applyState("show"));
        }
      })
    }, parentApp);
    vm2 = app2.mount(el);
    return API;
  };
}
const Dialog = {
  install({ $q, parentApp }) {
    $q.dialog = this.create = globalDialog(DialogPlugin, true, parentApp);
  }
};
let app, vm, uid = 0, timeout = null, props = {}, activeGroups = {};
const originalDefaults = {
  group: "__default_quasar_group__",
  delay: 0,
  message: false,
  html: false,
  spinnerSize: 80,
  spinnerColor: "",
  messageColor: "",
  backgroundColor: "",
  boxClass: "",
  spinner: QSpinner,
  customClass: ""
};
const defaults = { ...originalDefaults };
function registerProps(opts) {
  if (opts?.group !== void 0 && activeGroups[opts.group] !== void 0) {
    return Object.assign(activeGroups[opts.group], opts);
  }
  const newProps = isObject(opts) === true && opts.ignoreDefaults === true ? { ...originalDefaults, ...opts } : { ...defaults, ...opts };
  activeGroups[newProps.group] = newProps;
  return newProps;
}
const Plugin$2 = createReactivePlugin({
  isActive: false
}, {
  show(opts) {
    props = registerProps(opts);
    const { group } = props;
    Plugin$2.isActive = true;
    if (app !== void 0) {
      props.uid = uid;
      vm.$forceUpdate();
    } else {
      props.uid = ++uid;
      timeout !== null && clearTimeout(timeout);
      timeout = setTimeout(() => {
        timeout = null;
        const el = createGlobalNode("q-loading");
        app = createChildApp({
          name: "QLoading",
          setup() {
            onMounted(() => {
              preventScroll(true);
            });
            function onAfterLeave() {
              if (Plugin$2.isActive !== true && app !== void 0) {
                preventScroll(false);
                app.unmount(el);
                removeGlobalNode(el);
                app = void 0;
                vm = void 0;
              }
            }
            function getContent() {
              if (Plugin$2.isActive !== true) {
                return null;
              }
              const content = [
                h(props.spinner, {
                  class: "q-loading__spinner",
                  color: props.spinnerColor,
                  size: props.spinnerSize
                })
              ];
              props.message && content.push(
                h("div", {
                  class: "q-loading__message" + (props.messageColor ? ` text-${props.messageColor}` : ""),
                  [props.html === true ? "innerHTML" : "textContent"]: props.message
                })
              );
              return h("div", {
                class: "q-loading fullscreen flex flex-center z-max " + props.customClass.trim(),
                key: props.uid
              }, [
                h("div", {
                  class: "q-loading__backdrop" + (props.backgroundColor ? ` bg-${props.backgroundColor}` : "")
                }),
                h("div", {
                  class: "q-loading__box column items-center " + props.boxClass
                }, content)
              ]);
            }
            return () => h(Transition, {
              name: "q-transition--fade",
              appear: true,
              onAfterLeave
            }, getContent);
          }
        }, Plugin$2.__parentApp);
        vm = app.mount(el);
      }, props.delay);
    }
    return (paramProps) => {
      if (paramProps === void 0 || Object(paramProps) !== paramProps) {
        Plugin$2.hide(group);
        return;
      }
      Plugin$2.show({ ...paramProps, group });
    };
  },
  hide(group) {
    if (Plugin$2.isActive === true) {
      if (group === void 0) {
        activeGroups = {};
      } else if (activeGroups[group] === void 0) {
        return;
      } else {
        delete activeGroups[group];
        const keys = Object.keys(activeGroups);
        if (keys.length !== 0) {
          const lastGroup = keys[keys.length - 1];
          Plugin$2.show({ group: lastGroup });
          return;
        }
      }
      if (timeout !== null) {
        clearTimeout(timeout);
        timeout = null;
      }
      Plugin$2.isActive = false;
    }
  },
  setDefaults(opts) {
    {
      isObject(opts) === true && Object.assign(defaults, opts);
    }
  },
  install({ $q, parentApp }) {
    $q.loading = this;
    {
      Plugin$2.__parentApp = parentApp;
      if ($q.config.loading !== void 0) {
        this.setDefaults($q.config.loading);
      }
    }
  }
});
function encode(value) {
  if (isDate$1(value) === true) {
    return "__q_date|" + value.getTime();
  }
  if (isRegexp(value) === true) {
    return "__q_expr|" + value.source;
  }
  if (typeof value === "number") {
    return "__q_numb|" + value;
  }
  if (typeof value === "boolean") {
    return "__q_bool|" + (value ? "1" : "0");
  }
  if (typeof value === "string") {
    return "__q_strn|" + value;
  }
  if (typeof value === "function") {
    return "__q_strn|" + value.toString();
  }
  if (value === Object(value)) {
    return "__q_objt|" + JSON.stringify(value);
  }
  return value;
}
function decode(value) {
  const length = value.length;
  if (length < 9) {
    return value;
  }
  const type = value.substring(0, 8);
  const source = value.substring(9);
  switch (type) {
    case "__q_date":
      const number = Number(source);
      return new Date(Number.isNaN(number) === true ? source : number);
    case "__q_expr":
      return new RegExp(source);
    case "__q_numb":
      return Number(source);
    case "__q_bool":
      return Boolean(source === "1");
    case "__q_strn":
      return "" + source;
    case "__q_objt":
      return JSON.parse(source);
    default:
      return value;
  }
}
function getEmptyStorage() {
  const getVal = () => null;
  return {
    has: () => false,
    // alias for hasItem; TODO: remove in Qv3
    hasItem: () => false,
    getLength: () => 0,
    getItem: getVal,
    getIndex: getVal,
    getKey: getVal,
    getAll: () => {
    },
    getAllKeys: () => [],
    set: noop$2,
    // alias for setItem; TODO: remove in Qv3
    setItem: noop$2,
    remove: noop$2,
    // alias for removeItem; TODO: remove in Qv3
    removeItem: noop$2,
    clear: noop$2,
    isEmpty: () => true
  };
}
function getStorage(type) {
  const webStorage = window[type + "Storage"], get = (key) => {
    const item = webStorage.getItem(key);
    return item ? decode(item) : null;
  };
  const hasItem = (key) => webStorage.getItem(key) !== null;
  const setItem = (key, value) => {
    webStorage.setItem(key, encode(value));
  };
  const removeItem = (key) => {
    webStorage.removeItem(key);
  };
  return {
    has: hasItem,
    // TODO: remove in Qv3
    hasItem,
    getLength: () => webStorage.length,
    getItem: get,
    getIndex: (index) => {
      return index < webStorage.length ? get(webStorage.key(index)) : null;
    },
    getKey: (index) => {
      return index < webStorage.length ? webStorage.key(index) : null;
    },
    getAll: () => {
      let key;
      const result = {}, len = webStorage.length;
      for (let i = 0; i < len; i++) {
        key = webStorage.key(i);
        result[key] = get(key);
      }
      return result;
    },
    getAllKeys: () => {
      const result = [], len = webStorage.length;
      for (let i = 0; i < len; i++) {
        result.push(webStorage.key(i));
      }
      return result;
    },
    set: setItem,
    // TODO: remove in Qv3
    setItem,
    remove: removeItem,
    // TODO: remove in Qv3
    removeItem,
    clear: () => {
      webStorage.clear();
    },
    isEmpty: () => webStorage.length === 0
  };
}
const storage$1 = client.has.webStorage === false ? getEmptyStorage() : getStorage("local");
const Plugin$1 = {
  install({ $q }) {
    $q.localStorage = storage$1;
  }
};
Object.assign(Plugin$1, storage$1);
const storage = client.has.webStorage === false ? getEmptyStorage() : getStorage("session");
const Plugin = {
  install({ $q }) {
    $q.sessionStorage = storage;
  }
};
Object.assign(Plugin, storage);
const quasarUserOptions = { config: {}, plugins: { Notify, Dialog, Loading: Plugin$2, LocalStorage: Plugin$1, SessionStorage: Plugin } };
const publicPath = `/styllus_controle/`;
async function start({
  app: app2,
  router,
  store
}, bootFiles) {
  let hasRedirected = false;
  const getRedirectUrl = (url) => {
    try {
      return router.resolve(url).href;
    } catch (err) {
    }
    return Object(url) === url ? null : url;
  };
  const redirect = (url) => {
    hasRedirected = true;
    if (typeof url === "string" && /^https?:\/\//.test(url)) {
      window.location.href = url;
      return;
    }
    const href2 = getRedirectUrl(url);
    if (href2 !== null) {
      window.location.href = href2;
      window.location.reload();
    }
  };
  const urlPath = window.location.href.replace(window.location.origin, "");
  for (let i = 0; hasRedirected === false && i < bootFiles.length; i++) {
    try {
      await bootFiles[i]({
        app: app2,
        router,
        store,
        ssrContext: null,
        redirect,
        urlPath,
        publicPath
      });
    } catch (err) {
      if (err && err.url) {
        redirect(err.url);
        return;
      }
      console.error("[Quasar] boot error:", err);
      return;
    }
  }
  if (hasRedirected === true) return;
  app2.use(router);
  app2.mount("#q-app");
}
createQuasarApp(createApp, quasarUserOptions).then((app2) => {
  const [method, mapFn] = Promise.allSettled !== void 0 ? [
    "allSettled",
    (bootFiles) => bootFiles.map((result) => {
      if (result.status === "rejected") {
        console.error("[Quasar] boot error:", result.reason);
        return;
      }
      return result.value.default;
    })
  ] : [
    "all",
    (bootFiles) => bootFiles.map((entry) => entry.default)
  ];
  return Promise[method]([
    __vitePreload(() => import("./axios-x7U8OA1M.js"), true ? __vite__mapDeps([31,9]) : void 0)
  ]).then((bootFiles) => {
    const boot = mapFn(bootFiles).filter((entry) => typeof entry === "function");
    start(app2, boot);
  });
});
export {
  createVNode as $,
  stopAndPrevent as A,
  useModelToggleEmits as B,
  useDarkProps as C,
  useModelToggleProps as D,
  useDark as E,
  useTimeout as F,
  useModelToggle as G,
  useHistory as H,
  usePreventScroll as I,
  withDirectives as J,
  hDir as K,
  hSlot as L,
  provide as M,
  pageContainerKey as N,
  scrollTargetProp as O,
  getScrollTarget as P,
  getVerticalScrollPosition as Q,
  getHorizontalScrollPosition as R,
  getScrollbarWidth as S,
  reactive as T,
  onUnmounted as U,
  hMergeSlot as V,
  resolveComponent as W,
  createBlock as X,
  openBlock as Y,
  withCtx as Z,
  _export_sfc as _,
  onBeforeUnmount as a,
  useTransition as a$,
  createBaseVNode as a0,
  QBtn as a1,
  createTextVNode as a2,
  createElementBlock as a3,
  Fragment as a4,
  renderList as a5,
  QIcon as a6,
  toDisplayString as a7,
  useRoute as a8,
  defineStore as a9,
  useFormAttrs as aA,
  isObject as aB,
  useFormInject as aC,
  injectProp as aD,
  Plugin$5 as aE,
  onDeactivated as aF,
  onActivated as aG,
  vmIsDestroyed as aH,
  addFocusFn as aI,
  formKey as aJ,
  onBeforeMount as aK,
  useSizeProps as aL,
  useSize as aM,
  vmHasRouter as aN,
  History as aO,
  isNumber$1 as aP,
  injectMultipleProps as aQ,
  QCheckbox as aR,
  useFieldEmits as aS,
  useFieldProps as aT,
  useField as aU,
  useFieldState as aV,
  Ripple as aW,
  hMergeSlotSafely as aX,
  portalProxyList as aY,
  useTransitionProps as aZ,
  useTick as a_,
  QCard as aa,
  QCardSection as ab,
  createCommentVNode as ac,
  QInput as ad,
  withModifiers as ae,
  normalizeClass as af,
  QSeparator as ag,
  QCardActions as ah,
  Dialog as ai,
  Notify as aj,
  Transition as ak,
  shallowReactive as al,
  useRouterLinkProps as am,
  useId as an,
  uid$1 as ao,
  vShow as ap,
  timelineKey as aq,
  isKeyCode as ar,
  getPortalProxy as as,
  closePortals as at,
  QDialog as au,
  quasarKey as av,
  Plugin$4 as aw,
  isDate$1 as ax,
  defaultLang as ay,
  useFormProps as az,
  nextTick as b,
  usePortal as b0,
  addEscapeKey as b1,
  removeEscapeKey as b2,
  addFocusout as b3,
  removeFocusout as b4,
  closePortalMenus as b5,
  childHasFocus as b6,
  debounce$1 as b7,
  useFormInputNameAttr as b8,
  fieldValueIsFilled as b9,
  useKeyComposition as ba,
  isDeepEqual as bb,
  shouldIgnoreKey as bc,
  onBeforeUpdate as bd,
  onUpdated as be,
  Platform as bf,
  useRouterLink as bg,
  createComponent as c,
  defineBoot as d,
  inject as e,
  emptyRenderFn as f,
  getCurrentInstance as g,
  h,
  isRuntimeSsrPreHydration as i,
  layoutKey as j,
  computed as k,
  listenOpts as l,
  hUniqueSlot as m,
  noop$2 as n,
  onMounted as o,
  createDirective as p,
  cleanEvt as q,
  ref as r,
  client as s,
  preventDraggable as t,
  addEvt as u,
  position as v,
  watch as w,
  prevent as x,
  stop as y,
  leftClick as z
};


//# sourceMappingURL=data:application/json;base64,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LFVBQUksVUFBVTtBQUFBO0FBQUEsUUFFWixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFVO0FBQUEsUUFDVixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFVO0FBQUEsUUFDVixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFVO0FBQUEsUUFDVixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFVO0FBQUEsUUFDVixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFRO0FBQUEsUUFDUixLQUFVO0FBQUE7QUFBQTtBQUFBLFFBR1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUE7QUFBQSxRQUVWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBLFFBRVYsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUE7QUFBQSxRQUVWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLE1BQWdCO0FBQUEsUUFDaEIsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixNQUFnQjtBQUFBLFFBQ2hCLE1BQWdCO0FBQUEsUUFDaEIsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixRQUE0QjtBQUFBLFFBQzVCLEtBQVU7QUFBQTtBQUFBLFFBRVYsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUE7QUFBQSxRQUVWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBLFFBRVYsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUE7QUFBQSxRQUdWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBLFFBRVYsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUE7QUFBQSxRQUVWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBLFFBRVYsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUE7QUFBQSxRQUVWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBLFFBRVYsS0FBVTtBQUFBO0FBQUE7QUFBQSxRQUdWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLE1BQWdCO0FBQUEsUUFDaEIsTUFBZ0I7QUFBQTtBQUFBLFFBRWhCLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBLFFBRVYsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUE7QUFBQSxRQUVWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBO0FBQUEsUUFHVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUE7QUFBQTtBQUFBLFFBR1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUE7QUFBQTtBQUFBLFFBR1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUE7QUFBQSxRQUdWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBLFFBRVYsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBO0FBQUEsUUFFVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsUUFPVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUE7QUFBQSxRQUVWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBO0FBQUEsUUFHVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUE7QUFBQSxRQUVWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVE7QUFBQSxRQUNSLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVE7QUFBQSxRQUNSLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVE7QUFBQSxRQUNSLEtBQVE7QUFBQSxRQUNSLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQTtBQUFBLFFBRVYsS0FBSztBQUFBLFFBQ0wsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBUTtBQUFBLFFBQ1IsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBUTtBQUFBLFFBQ1IsS0FBUTtBQUFBLFFBQ1IsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsTUFBZ0I7QUFBQSxRQUNoQixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixLQUFVO0FBQUEsUUFDVixPQUFzQjtBQUFBLFFBQ3RCLE1BQVc7QUFBQSxRQUNYLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxNQUNYO0FBQ0QsVUFBSSxxQkFBcUI7QUFBQTtBQUFBLFFBRXZCO0FBQUE7QUFBQSxRQUVBO0FBQUEsTUFDRDtBQUNELFVBQUksYUFBYTtBQUFBO0FBQUE7QUFBQSxRQUdmLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLEtBQVU7QUFBQSxRQUNWLE1BQWdCO0FBQUEsUUFDaEIsS0FBVTtBQUFBLFFBQ1YsS0FBVTtBQUFBLFFBQ1YsUUFBNEI7QUFBQSxRQUM1QixNQUFnQjtBQUFBLFFBQ2hCLE9BQXNCO0FBQUEsUUFDdEIsTUFBZ0I7QUFBQSxRQUNoQixPQUFzQjtBQUFBLFFBQ3RCLEtBQVU7QUFBQTtBQUFBLFFBRVYsTUFBZ0I7QUFBQSxRQUNoQixRQUE0QjtBQUFBLFFBQzVCLFFBQTRCO0FBQUEsUUFDNUIsTUFBZ0I7QUFBQSxRQUNoQixRQUE0QjtBQUFBLFFBQzVCLFFBQTRCO0FBQUEsUUFDNUIsTUFBZ0I7QUFBQSxRQUNoQixNQUFnQjtBQUFBLFFBQ2hCLE1BQWdCO0FBQUEsUUFDaEIsT0FBc0I7QUFBQSxRQUN0QixPQUFzQjtBQUFBLFFBQ3RCLE9BQXNCO0FBQUEsUUFDdEIsT0FBc0I7QUFBQSxRQUN0QixNQUFnQjtBQUFBLFFBQ2hCLFFBQTRCO0FBQUEsUUFDNUIsT0FBc0I7QUFBQSxRQUN0QixNQUFnQjtBQUFBLFFBQ2hCLE9BQXNCO0FBQUEsUUFDdEIsT0FBc0I7QUFBQSxRQUN0QixPQUFzQjtBQUFBLFFBQ3RCLE9BQXNCO0FBQUEsUUFDdEIsTUFBZ0I7QUFBQSxRQUNoQixPQUFzQjtBQUFBLFFBQ3RCLE9BQXNCO0FBQUEsUUFDdEIsT0FBc0I7QUFBQSxRQUN0QixTQUFrQztBQUFBLFFBQ2xDLE1BQWdCO0FBQUEsUUFDaEIsT0FBc0I7QUFBQSxRQUN0QixPQUFzQjtBQUFBLFFBQ3RCLE9BQXNCO0FBQUEsUUFDdEIsTUFBZ0I7QUFBQSxRQUNoQixRQUE0QjtBQUFBLFFBQzVCLE1BQWdCO0FBQUEsUUFDaEIsS0FBVTtBQUFBLFFBQ1YsTUFBZ0I7QUFBQSxRQUNoQixNQUFnQjtBQUFBO0FBQUEsUUFFaEIsT0FBc0I7QUFBQSxRQUN0QixPQUFzQjtBQUFBLE1BQ3ZCO0FBQ0QsVUFBSSxjQUFjO0FBQUEsUUFDaEIsTUFBTSxDQUFFO0FBQUE7QUFBQSxRQUVSLE1BQU07QUFBQTtBQUFBLFVBRUosS0FBUTtBQUFBLFVBQ1IsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFVBQ1IsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFVBQ1IsS0FBUTtBQUFBLFVBQ1IsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFVBQ1IsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFFBQ1Q7QUFBQSxRQUNELE1BQU07QUFBQTtBQUFBLFVBRUosS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFFBQ1g7QUFBQSxRQUNELE1BQU07QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUlKLEtBQVE7QUFBQTtBQUFBLFVBRVIsS0FBUTtBQUFBO0FBQUEsVUFFUixLQUFRO0FBQUE7QUFBQSxVQUVSLEtBQVE7QUFBQTtBQUFBLFFBRVQ7QUFBQSxRQUNELE1BQU07QUFBQTtBQUFBLFVBRUosS0FBUTtBQUFBO0FBQUEsVUFFUixLQUFRO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFJUixLQUFRO0FBQUE7QUFBQSxVQUVSLEtBQVE7QUFBQTtBQUFBO0FBQUE7QUFBQSxVQUlSLEtBQVE7QUFBQSxVQUNSLEtBQVE7QUFBQSxVQUNSLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxRQUNYO0FBQUEsUUFDRCxNQUFNO0FBQUE7QUFBQSxVQUVKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxRQUNYO0FBQUEsUUFDRCxNQUFNO0FBQUE7QUFBQSxVQUVKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxRQUNYO0FBQUEsUUFDRCxNQUFNO0FBQUE7QUFBQSxVQUVKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxVQUNSLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxVQUNSLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxRQUNYO0FBQUEsUUFDRCxNQUFNO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFJSixLQUFRO0FBQUE7QUFBQSxVQUVSLEtBQVE7QUFBQTtBQUFBLFVBRVIsS0FBUTtBQUFBO0FBQUEsVUFFUixLQUFRO0FBQUE7QUFBQSxRQUVUO0FBQUEsUUFDRCxNQUFNO0FBQUE7QUFBQSxVQUVKLEtBQVE7QUFBQSxVQUNSLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNO0FBQUE7QUFBQSxVQUVKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxRQUNYO0FBQUEsUUFDRCxNQUFNO0FBQUE7QUFBQSxVQUVKLEtBQVE7QUFBQSxVQUNSLEtBQVE7QUFBQSxVQUNSLEtBQVE7QUFBQSxVQUNSLEtBQVE7QUFBQSxRQUNsQjtBQUFBLE1BQ087QUFDRCxVQUFJLFlBQVk7QUFBQSxRQUNkLE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNLENBQUU7QUFBQSxRQUNSLE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNO0FBQUEsVUFDSixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFVO0FBQUEsVUFDVixLQUFRO0FBQUEsUUFDVDtBQUFBLFFBQ0QsTUFBTTtBQUFBLFVBQ0osS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFFBQ1Q7QUFBQSxRQUNELE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNO0FBQUEsVUFDSixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFVO0FBQUEsVUFDVixLQUFRO0FBQUEsUUFDVDtBQUFBLFFBQ0QsTUFBTTtBQUFBLFVBQ0osS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFFBQ1Q7QUFBQSxRQUNELE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNO0FBQUEsVUFDSixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFVO0FBQUEsVUFDVixLQUFRO0FBQUEsUUFDVDtBQUFBLFFBQ0QsTUFBTTtBQUFBLFVBQ0osS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFFBQ1Q7QUFBQSxRQUNELE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNLENBQUU7QUFBQSxRQUNSLE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNO0FBQUEsVUFDSixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFVO0FBQUEsVUFDVixLQUFRO0FBQUEsUUFDVDtBQUFBLFFBQ0QsTUFBTTtBQUFBLFVBQ0osS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFFBQ1Q7QUFBQSxRQUNELE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNO0FBQUEsVUFDSixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFVO0FBQUEsVUFDVixLQUFRO0FBQUEsUUFDVDtBQUFBLFFBQ0QsTUFBTSxDQUFFO0FBQUEsUUFDUixNQUFNO0FBQUEsVUFDSixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFVO0FBQUEsVUFDVixLQUFRO0FBQUEsUUFDVDtBQUFBLFFBQ0QsTUFBTTtBQUFBLFVBQ0osS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFFBQ1Q7QUFBQSxRQUNELE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNO0FBQUEsVUFDSixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFVO0FBQUEsVUFDVixLQUFRO0FBQUEsUUFDVDtBQUFBLFFBQ0QsTUFBTTtBQUFBLFVBQ0osS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBVTtBQUFBLFVBQ1YsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBVTtBQUFBLFVBQ1YsS0FBUTtBQUFBLFFBQ1Q7QUFBQSxRQUNELE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNLENBQUU7QUFBQSxRQUNSLE1BQU07QUFBQSxVQUNKLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQVU7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQVU7QUFBQSxVQUNWLEtBQVE7QUFBQSxRQUNUO0FBQUEsUUFDRCxNQUFNO0FBQUEsVUFDSixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFVO0FBQUEsVUFDVixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFVO0FB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Q2hCO0FBQUEsTUFDUjtBQUVNLGNBQVEsTUFBTSx3QkFBd0IsR0FBRztBQUN6QztBQUFBLElBQ047QUFBQSxFQUNBO0FBRUUsTUFBSSxrQkFBa0IsS0FBTTtBQUc1QixFQUFBQSxLQUFJLElBQUksTUFBTTtBQU9WLEVBQUFBLEtBQUksTUFBTSxRQUFRO0FBSXhCO0FBRUEsZ0JBQWdCLFdBQVcsaUJBQWlCLEVBRXpDLEtBQUssQ0FBQUEsU0FBTztBQUVYLFFBQU0sQ0FBRSxRQUFRLFNBQVUsUUFBUSxlQUFlLFNBQzdDO0FBQUEsSUFDQTtBQUFBLElBQ0EsZUFBYSxVQUFVLElBQUksWUFBVTtBQUNuQyxVQUFJLE9BQU8sV0FBVyxZQUFZO0FBQ2hDLGdCQUFRLE1BQU0sd0JBQXdCLE9BQU8sTUFBTTtBQUNuRDtBQUFBLE1BQ1o7QUFDVSxhQUFPLE9BQU8sTUFBTTtBQUFBLElBQ3JCO0FBQUEsRUFDVCxJQUNRO0FBQUEsSUFDQTtBQUFBLElBQ0EsZUFBYSxVQUFVLElBQUksV0FBUyxNQUFNLE9BQU87QUFBQSxFQUN6RDtBQUVJLFNBQU8sUUFBUyxRQUFTO0FBQUEsSUFFeEIsb0JBQUMsT0FBTyxxQkFBWTtBQUFBLEVBRXpCLENBQUssRUFBRSxLQUFLLGVBQWE7QUFDbkIsVUFBTSxPQUFPLE1BQU0sU0FBUyxFQUFFLE9BQU8sV0FBUyxPQUFPLFVBQVUsVUFBVTtBQUN6RSxVQUFNQSxNQUFLLElBQUk7QUFBQSxFQUNoQjtBQUNGIiwibmFtZXMiOlsiaGFzT3duUHJvcGVydHkiLCJpc0FycmF5IiwiaXNNYXAiLCJpc1NldCIsImlzU3RyaW5nIiwiaXNTeW1ib2wiLCJpc09iamVjdCIsImlzUGxhaW5PYmplY3QiLCJpc1JlZiIsIl9hIiwiaXNDb21wdXRlZCIsImNvbXB1dGVkIiwidGFyZ2V0IiwidHJpZ2dlciIsInRvUmF3IiwiYXBwbHkiLCJzZWxmIiwiaXNSZWFkb25seSIsInJlYWRvbmx5IiwiaXNSZWFjdGl2ZSIsIndhdGNoIiwidHJhdmVyc2UiLCJlZmZlY3QiLCJzZWVuIiwiX2IiLCJvcGVuIiwicHJvcHMiLCJsb2dFcnJvciIsInF1ZXVlIiwicCIsImZpbmRJbnNlcnRpb25JbmRleCIsInN0YXJ0IiwiZ2V0SWQiLCJob29rIiwiYXBwIiwidmVyc2lvbiIsImVudGVyQ2JLZXkiLCJob29rcyIsImNhbGxIb29rIiwiaG9vazIiLCJyZW1vdmUiLCJob29rczIiLCJyZWYiLCJjb21wb25lbnRzIiwiaCIsIm1lcmdlT3B0aW9ucyIsInVpZCQxIiwiY3JlYXRlQXBwIiwibm9ybWFsaXplU2xvdCIsInVwZGF0ZSIsInJlbW92ZTIiLCJpc01vZGVsTGlzdGVuZXIiLCJlbWl0IiwidWlkIiwiY2xhc3NpZnlSRSIsImNsYXNzaWZ5Iiwid3JhcHBlciIsInJlc29sdmUiLCJ0aW1lb3V0IiwiaXNCb29sZWFuIiwiY2FtZWxpemUkMSIsInVzZXJBZ2VudCIsIm5vb3AiLCJlbCIsImRlYm91bmNlIiwiUGx1Z2luIiwicmFuZ2UiLCJkZWYiLCJpc0RhdGUiLCJpc051bWJlciIsIkRhcmsiLCJMYW5nIiwiSWNvblNldCIsImlzQnJvd3NlciIsImFzc2lnbiIsImRlY29kZSIsInBhcnNlUXVlcnkiLCJsb2NhdGlvbiIsInN0cmluZ2lmeVF1ZXJ5IiwiaXNTYW1lUm91dGVSZWNvcmQiLCJpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zIiwiaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtc1ZhbHVlIiwiaXNFcXVpdmFsZW50QXJyYXkiLCJwb3NpdGlvbiIsIk5hdmlnYXRpb25UeXBlIiwiTmF2aWdhdGlvbkRpcmVjdGlvbiIsImhpc3RvcnkiLCJyZXBsYWNlIiwiTmF2aWdhdGlvbkZhaWx1cmVUeXBlIiwicmUiLCJidWZmZXIiLCJyb3V0ZXMiLCJnZXRSb3V0ZXMiLCJkZWZhdWx0cyIsInZhbHVlIiwiaGFuZGxlcnMiLCJnZXRPcmlnaW5hbFBhdGgiLCJpbmNsdWRlc1BhcmFtcyIsImNvcHkiLCJmb3JtYXREaXNwbGF5Iiwicm91dGUiLCJjcmVhdGVSb3V0ZXIiLCJtYXRjaGVkUm91dGUiLCJocmVmIiwiZmFpbHVyZSIsInJvdXRlciIsIl9jcmVhdGVCbG9jayIsIl9fY3JlYXRlIiwiX19kZWZQcm9wIiwiX19nZXRPd25Qcm9wRGVzYyIsIl9fZ2V0T3duUHJvcE5hbWVzIiwiX19nZXRQcm90b09mIiwiX19oYXNPd25Qcm9wIiwiX19lc20iLCJfX2NvbW1vbkpTIiwiX19jb3B5UHJvcHMiLCJfX3RvRVNNIiwiaW5pdF9lc21fc2hpbXMiLCJ0YXJnZXQyIiwic2l6ZSIsInRhcmdldDMiLCJ0YXJnZXQ0IiwiZGVib3VuY2UyIiwiZ2xvYmFsIiwiZGVib3VuY2UzIiwidGFyZ2V0NSIsInRhcmdldDYiLCJ0YXJnZXQ3IiwiY3JlYXRlSG9va3MyIiwidGFyZ2V0OCIsImdsb2JhbDIiLCJnbG9iYWwzIiwiZGVib3VuY2U1IiwidGFyZ2V0OSIsInRhcmdldDEwIiwidGFyZ2V0MTEiLCJ0YXJnZXQxMiIsInRhcmdldDE1IiwidGFyZ2V0MjEiLCJNdXRhdGlvblR5cGUiLCJzdGF0ZSIsInN0b3JlIiwic2V0dXBEZXZ0b29sc1BsdWdpbiIsIm5vdyIsIiRyZXNldCIsIm9wdGlvbnMiLCJxdWFzYXJVc2VyT3B0aW9ucyIsImNyZWF0ZVN0b3JlIiwibWF0Y2hlcyIsImNzcyIsInZtIiwib25LZXlkb3duIiwicG9zaXRpb25DbGFzcyIsImlzRGlydHkiLCJhdHRycyIsIm9uS2V5dXAiLCJtb2RlbCIsImZvcm1Qcm9wcyIsImNsYXNzZXMiLCJzdG9yYWdlIiwiTG9hZGluZyIsIkxvY2FsU3RvcmFnZSIsIlNlc3Npb25TdG9yYWdlIl0sImlnbm9yZUxpc3QiOlswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMxLDMyLDMzLDM0LDM1LDM2LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxLDUyLDUzLDU0LDU1LDU2LDU3LDU4LDU5LDYwLDYxLDYyLDYzLDY0LDY1LDY2LDY3LDY4LDY5LDcwLDcxLDcyLDczLDc0LDc1LDc2LDc3LDc4LDc5LDgwLDgxLDgyLDgzLDg0LDg1LDg2LDg3LDg4LDg5LDkwLDkxLDkyLDkzLDk0LDk1LDk2LDk3LDk4LDk5LDEwMF0sInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvc2hhcmVkL2Rpc3Qvc2hhcmVkLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvcmVhY3Rpdml0eS9kaXN0L3JlYWN0aXZpdHkuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9ydW50aW1lLWNvcmUvZGlzdC9ydW50aW1lLWNvcmUuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9ydW50aW1lLWRvbS9kaXN0L3J1bnRpbWUtZG9tLmVzbS1idW5kbGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS5pbmplY3Qtb2JqLXByb3AvaW5qZWN0LW9iai1wcm9wLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvcGx1Z2lucy9wbGF0Zm9ybS9QbGF0Zm9ybS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUuY3JlYXRlL2NyZWF0ZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL2V2ZW50L2V2ZW50LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvZGVib3VuY2UvZGVib3VuY2UuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL3NjcmVlbi9TY3JlZW4uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL2RhcmsvRGFyay5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL2Nzcy12YXIvc2V0LWNzcy12YXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlLmtleWJvYXJkL2tleS1jb21wb3NpdGlvbi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvcHJpdmF0ZS5ib2R5L0JvZHkuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL3ByaXZhdGUuaGlzdG9yeS9IaXN0b3J5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9sYW5nL2VuLVVTLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvcGx1Z2lucy9sYW5nL0xhbmcuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL2ljb24tc2V0L21hdGVyaWFsLWljb25zLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvcGx1Z2lucy9pY29uLXNldC9JY29uU2V0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS5zeW1ib2xzL3N5bWJvbHMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlLmNvbmZpZy9pbnN0YW5jZS1jb25maWcuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9pcy9pcy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2luc3RhbGwtcXVhc2FyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdnVlLXBsdWdpbi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtcm91dGVyL25vZGVfbW9kdWxlcy9AdnVlL2RldnRvb2xzLWFwaS9saWIvZXNtL2Vudi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtcm91dGVyL25vZGVfbW9kdWxlcy9AdnVlL2RldnRvb2xzLWFwaS9saWIvZXNtL2NvbnN0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1yb3V0ZXIvbm9kZV9tb2R1bGVzL0B2dWUvZGV2dG9vbHMtYXBpL2xpYi9lc20vdGltZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtcm91dGVyL25vZGVfbW9kdWxlcy9AdnVlL2RldnRvb2xzLWFwaS9saWIvZXNtL3Byb3h5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1yb3V0ZXIvbm9kZV9tb2R1bGVzL0B2dWUvZGV2dG9vbHMtYXBpL2xpYi9lc20vaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXJvdXRlci9kaXN0L3Z1ZS1yb3V0ZXIubWpzIiwiLi4vLi4vLi4vc3JjL0FwcC52dWUiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9kZXZ0b29scy1zaGFyZWQvZGlzdC9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wZXJmZWN0LWRlYm91bmNlL2Rpc3QvaW5kZXgubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2hvb2thYmxlL2Rpc3QvaW5kZXgubWpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvZGV2dG9vbHMta2l0L2Rpc3QvaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcGluaWEvZGlzdC9waW5pYS5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHF1YXNhci9hcHAtdml0ZS9leHBvcnRzL3dyYXBwZXJzL3dyYXBwZXJzLmpzIiwiLi4vLi4vLi4vc3JjL3JvdXRlci9yb3V0ZXMuanMiLCIuLi8uLi8uLi9zcmMvcm91dGVyL2luZGV4LmpzIiwiLi4vLi4vLi4vLnF1YXNhci9wcm9kLXNwYS9hcHAuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1zaXplL3VzZS1zaXplLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS5yZW5kZXIvcmVuZGVyLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9pY29uL1FJY29uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9hdmF0YXIvUUF2YXRhci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvc3Bpbm5lci91c2Utc3Bpbm5lci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9RU3Bpbm5lci5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL2RvbS9kb20uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy90aHJvdHRsZS90aHJvdHRsZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2RpcmVjdGl2ZXMvcmlwcGxlL1JpcHBsZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWFsaWduL3VzZS1hbGlnbi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUudm0vdm0uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1yb3V0ZXItbGluay91c2Utcm91dGVyLWxpbmsuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2J0bi91c2UtYnRuLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9idG4vUUJ0bi5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUuY29uZmlnL25vZGVzLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvcGx1Z2lucy9ub3RpZnkvTm90aWZ5LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS51c2UtaGlzdG9yeS91c2UtaGlzdG9yeS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3VzZS10aW1lb3V0L3VzZS10aW1lb3V0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvdXNlLXRpY2svdXNlLXRpY2suanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1tb2RlbC10b2dnbGUvdXNlLW1vZGVsLXRvZ2dsZS5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLXRyYW5zaXRpb24vdXNlLXRyYW5zaXRpb24uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlLmZvY3VzL2ZvY3VzLW1hbmFnZXIuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlLnBvcnRhbC9wb3J0YWwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1wb3J0YWwvdXNlLXBvcnRhbC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3Njcm9sbC9zY3JvbGwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9zY3JvbGwvcHJldmVudC1zY3JvbGwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1wcmV2ZW50LXNjcm9sbC91c2UtcHJldmVudC1zY3JvbGwuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlLmtleWJvYXJkL2VzY2FwZS1rZXkuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlLmZvY3VzL2ZvY3Vzb3V0LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9kaWFsb2cvUURpYWxvZy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWRhcmsvdXNlLWRhcmsuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2NhcmQvUUNhcmQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2NhcmQvUUNhcmRTZWN0aW9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9jYXJkL1FDYXJkQWN0aW9ucy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvc2VwYXJhdG9yL1FTZXBhcmF0b3IuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy91aWQvdWlkLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvdXNlLWlkL3VzZS1pZC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3VzZS1zcGxpdC1hdHRycy91c2Utc3BsaXQtYXR0cnMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy91c2UtZm9ybS91c2UtZm9ybS1jaGlsZC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3BhdHRlcm5zL3BhdHRlcm5zLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS51c2UtdmFsaWRhdGUvdXNlLXZhbGlkYXRlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS51c2UtZmllbGQvdXNlLWZpZWxkLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9pbnB1dC91c2UtbWFzay5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3VzZS1mb3JtL3ByaXZhdGUudXNlLWZvcm0uanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1maWxlL3VzZS1maWxlLWRvbS1wcm9wcy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWtleS1jb21wb3NpdGlvbi91c2Uta2V5LWNvbXBvc2l0aW9uLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9pbnB1dC9RSW5wdXQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1yZWZvY3VzLXRhcmdldC91c2UtcmVmb2N1cy10YXJnZXQuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlLm9wdGlvbi1zaXplcy9vcHRpb24tc2l6ZXMuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL3JhZGlvL1FSYWRpby5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvY2hlY2tib3gvdXNlLWNoZWNrYm94LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9jaGVja2JveC9RQ2hlY2tib3guanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL3RvZ2dsZS9RVG9nZ2xlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9vcHRpb24tZ3JvdXAvUU9wdGlvbkdyb3VwLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvcGx1Z2lucy9kaWFsb2cvY29tcG9uZW50L0RpYWxvZ1BsdWdpbkNvbXBvbmVudC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUuZGlhbG9nL2NyZWF0ZS1kaWFsb2cuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL2RpYWxvZy9EaWFsb2cuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL2xvYWRpbmcvTG9hZGluZy5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvc3RvcmFnZS9lbmdpbmUvd2ViLXN0b3JhZ2UuanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL3N0b3JhZ2UvTG9jYWxTdG9yYWdlLmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvcGx1Z2lucy9zdG9yYWdlL1Nlc3Npb25TdG9yYWdlLmpzIiwiLi4vLi4vLi4vLnF1YXNhci9wcm9kLXNwYS9xdWFzYXItdXNlci1vcHRpb25zLmpzIiwiLi4vLi4vLi4vLnF1YXNhci9wcm9kLXNwYS9jbGllbnQtZW50cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4qIEB2dWUvc2hhcmVkIHYzLjUuMTNcbiogKGMpIDIwMTgtcHJlc2VudCBZdXhpIChFdmFuKSBZb3UgYW5kIFZ1ZSBjb250cmlidXRvcnNcbiogQGxpY2Vuc2UgTUlUXG4qKi9cbi8qISAjX19OT19TSURFX0VGRkVDVFNfXyAqL1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIG1ha2VNYXAoc3RyKSB7XG4gIGNvbnN0IG1hcCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBmb3IgKGNvbnN0IGtleSBvZiBzdHIuc3BsaXQoXCIsXCIpKSBtYXBba2V5XSA9IDE7XG4gIHJldHVybiAodmFsKSA9PiB2YWwgaW4gbWFwO1xufVxuXG5jb25zdCBFTVBUWV9PQkogPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gT2JqZWN0LmZyZWV6ZSh7fSkgOiB7fTtcbmNvbnN0IEVNUFRZX0FSUiA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBPYmplY3QuZnJlZXplKFtdKSA6IFtdO1xuY29uc3QgTk9PUCA9ICgpID0+IHtcbn07XG5jb25zdCBOTyA9ICgpID0+IGZhbHNlO1xuY29uc3QgaXNPbiA9IChrZXkpID0+IGtleS5jaGFyQ29kZUF0KDApID09PSAxMTEgJiYga2V5LmNoYXJDb2RlQXQoMSkgPT09IDExMCAmJiAvLyB1cHBlcmNhc2UgbGV0dGVyXG4oa2V5LmNoYXJDb2RlQXQoMikgPiAxMjIgfHwga2V5LmNoYXJDb2RlQXQoMikgPCA5Nyk7XG5jb25zdCBpc01vZGVsTGlzdGVuZXIgPSAoa2V5KSA9PiBrZXkuc3RhcnRzV2l0aChcIm9uVXBkYXRlOlwiKTtcbmNvbnN0IGV4dGVuZCA9IE9iamVjdC5hc3NpZ247XG5jb25zdCByZW1vdmUgPSAoYXJyLCBlbCkgPT4ge1xuICBjb25zdCBpID0gYXJyLmluZGV4T2YoZWwpO1xuICBpZiAoaSA+IC0xKSB7XG4gICAgYXJyLnNwbGljZShpLCAxKTtcbiAgfVxufTtcbmNvbnN0IGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmNvbnN0IGhhc093biA9ICh2YWwsIGtleSkgPT4gaGFzT3duUHJvcGVydHkuY2FsbCh2YWwsIGtleSk7XG5jb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmNvbnN0IGlzTWFwID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09IFwiW29iamVjdCBNYXBdXCI7XG5jb25zdCBpc1NldCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSBcIltvYmplY3QgU2V0XVwiO1xuY29uc3QgaXNEYXRlID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09IFwiW29iamVjdCBEYXRlXVwiO1xuY29uc3QgaXNSZWdFeHAgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gXCJbb2JqZWN0IFJlZ0V4cF1cIjtcbmNvbnN0IGlzRnVuY3Rpb24gPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCI7XG5jb25zdCBpc1N0cmluZyA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCI7XG5jb25zdCBpc1N5bWJvbCA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwic3ltYm9sXCI7XG5jb25zdCBpc09iamVjdCA9ICh2YWwpID0+IHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiO1xuY29uc3QgaXNQcm9taXNlID0gKHZhbCkgPT4ge1xuICByZXR1cm4gKGlzT2JqZWN0KHZhbCkgfHwgaXNGdW5jdGlvbih2YWwpKSAmJiBpc0Z1bmN0aW9uKHZhbC50aGVuKSAmJiBpc0Z1bmN0aW9uKHZhbC5jYXRjaCk7XG59O1xuY29uc3Qgb2JqZWN0VG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3QgdG9UeXBlU3RyaW5nID0gKHZhbHVlKSA9PiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbmNvbnN0IHRvUmF3VHlwZSA9ICh2YWx1ZSkgPT4ge1xuICByZXR1cm4gdG9UeXBlU3RyaW5nKHZhbHVlKS5zbGljZSg4LCAtMSk7XG59O1xuY29uc3QgaXNQbGFpbk9iamVjdCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSBcIltvYmplY3QgT2JqZWN0XVwiO1xuY29uc3QgaXNJbnRlZ2VyS2V5ID0gKGtleSkgPT4gaXNTdHJpbmcoa2V5KSAmJiBrZXkgIT09IFwiTmFOXCIgJiYga2V5WzBdICE9PSBcIi1cIiAmJiBcIlwiICsgcGFyc2VJbnQoa2V5LCAxMCkgPT09IGtleTtcbmNvbnN0IGlzUmVzZXJ2ZWRQcm9wID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXG4gIC8vIHRoZSBsZWFkaW5nIGNvbW1hIGlzIGludGVudGlvbmFsIHNvIGVtcHR5IHN0cmluZyBcIlwiIGlzIGFsc28gaW5jbHVkZWRcbiAgXCIsa2V5LHJlZixyZWZfZm9yLHJlZl9rZXksb25Wbm9kZUJlZm9yZU1vdW50LG9uVm5vZGVNb3VudGVkLG9uVm5vZGVCZWZvcmVVcGRhdGUsb25Wbm9kZVVwZGF0ZWQsb25Wbm9kZUJlZm9yZVVubW91bnQsb25Wbm9kZVVubW91bnRlZFwiXG4pO1xuY29uc3QgaXNCdWlsdEluRGlyZWN0aXZlID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXG4gIFwiYmluZCxjbG9hayxlbHNlLWlmLGVsc2UsZm9yLGh0bWwsaWYsbW9kZWwsb24sb25jZSxwcmUsc2hvdyxzbG90LHRleHQsbWVtb1wiXG4pO1xuY29uc3QgY2FjaGVTdHJpbmdGdW5jdGlvbiA9IChmbikgPT4ge1xuICBjb25zdCBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gKHN0cikgPT4ge1xuICAgIGNvbnN0IGhpdCA9IGNhY2hlW3N0cl07XG4gICAgcmV0dXJuIGhpdCB8fCAoY2FjaGVbc3RyXSA9IGZuKHN0cikpO1xuICB9O1xufTtcbmNvbnN0IGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG5jb25zdCBjYW1lbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oXG4gIChzdHIpID0+IHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgKF8sIGMpID0+IGMgPyBjLnRvVXBwZXJDYXNlKCkgOiBcIlwiKTtcbiAgfVxuKTtcbmNvbnN0IGh5cGhlbmF0ZVJFID0gL1xcQihbQS1aXSkvZztcbmNvbnN0IGh5cGhlbmF0ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oXG4gIChzdHIpID0+IHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCBcIi0kMVwiKS50b0xvd2VyQ2FzZSgpXG4pO1xuY29uc3QgY2FwaXRhbGl6ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4ge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufSk7XG5jb25zdCB0b0hhbmRsZXJLZXkgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKFxuICAoc3RyKSA9PiB7XG4gICAgY29uc3QgcyA9IHN0ciA/IGBvbiR7Y2FwaXRhbGl6ZShzdHIpfWAgOiBgYDtcbiAgICByZXR1cm4gcztcbiAgfVxuKTtcbmNvbnN0IGhhc0NoYW5nZWQgPSAodmFsdWUsIG9sZFZhbHVlKSA9PiAhT2JqZWN0LmlzKHZhbHVlLCBvbGRWYWx1ZSk7XG5jb25zdCBpbnZva2VBcnJheUZucyA9IChmbnMsIC4uLmFyZykgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGZucy5sZW5ndGg7IGkrKykge1xuICAgIGZuc1tpXSguLi5hcmcpO1xuICB9XG59O1xuY29uc3QgZGVmID0gKG9iaiwga2V5LCB2YWx1ZSwgd3JpdGFibGUgPSBmYWxzZSkgPT4ge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgd3JpdGFibGUsXG4gICAgdmFsdWVcbiAgfSk7XG59O1xuY29uc3QgbG9vc2VUb051bWJlciA9ICh2YWwpID0+IHtcbiAgY29uc3QgbiA9IHBhcnNlRmxvYXQodmFsKTtcbiAgcmV0dXJuIGlzTmFOKG4pID8gdmFsIDogbjtcbn07XG5jb25zdCB0b051bWJlciA9ICh2YWwpID0+IHtcbiAgY29uc3QgbiA9IGlzU3RyaW5nKHZhbCkgPyBOdW1iZXIodmFsKSA6IE5hTjtcbiAgcmV0dXJuIGlzTmFOKG4pID8gdmFsIDogbjtcbn07XG5sZXQgX2dsb2JhbFRoaXM7XG5jb25zdCBnZXRHbG9iYWxUaGlzID0gKCkgPT4ge1xuICByZXR1cm4gX2dsb2JhbFRoaXMgfHwgKF9nbG9iYWxUaGlzID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB7fSk7XG59O1xuY29uc3QgaWRlbnRSRSA9IC9eW18kYS16QS1aXFx4QTAtXFx1RkZGRl1bXyRhLXpBLVowLTlcXHhBMC1cXHVGRkZGXSokLztcbmZ1bmN0aW9uIGdlblByb3BzQWNjZXNzRXhwKG5hbWUpIHtcbiAgcmV0dXJuIGlkZW50UkUudGVzdChuYW1lKSA/IGBfX3Byb3BzLiR7bmFtZX1gIDogYF9fcHJvcHNbJHtKU09OLnN0cmluZ2lmeShuYW1lKX1dYDtcbn1cbmZ1bmN0aW9uIGdlbkNhY2hlS2V5KHNvdXJjZSwgb3B0aW9ucykge1xuICByZXR1cm4gc291cmNlICsgSlNPTi5zdHJpbmdpZnkoXG4gICAgb3B0aW9ucyxcbiAgICAoXywgdmFsKSA9PiB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCIgPyB2YWwudG9TdHJpbmcoKSA6IHZhbFxuICApO1xufVxuXG5jb25zdCBQYXRjaEZsYWdzID0ge1xuICBcIlRFWFRcIjogMSxcbiAgXCIxXCI6IFwiVEVYVFwiLFxuICBcIkNMQVNTXCI6IDIsXG4gIFwiMlwiOiBcIkNMQVNTXCIsXG4gIFwiU1RZTEVcIjogNCxcbiAgXCI0XCI6IFwiU1RZTEVcIixcbiAgXCJQUk9QU1wiOiA4LFxuICBcIjhcIjogXCJQUk9QU1wiLFxuICBcIkZVTExfUFJPUFNcIjogMTYsXG4gIFwiMTZcIjogXCJGVUxMX1BST1BTXCIsXG4gIFwiTkVFRF9IWURSQVRJT05cIjogMzIsXG4gIFwiMzJcIjogXCJORUVEX0hZRFJBVElPTlwiLFxuICBcIlNUQUJMRV9GUkFHTUVOVFwiOiA2NCxcbiAgXCI2NFwiOiBcIlNUQUJMRV9GUkFHTUVOVFwiLFxuICBcIktFWUVEX0ZSQUdNRU5UXCI6IDEyOCxcbiAgXCIxMjhcIjogXCJLRVlFRF9GUkFHTUVOVFwiLFxuICBcIlVOS0VZRURfRlJBR01FTlRcIjogMjU2LFxuICBcIjI1NlwiOiBcIlVOS0VZRURfRlJBR01FTlRcIixcbiAgXCJORUVEX1BBVENIXCI6IDUxMixcbiAgXCI1MTJcIjogXCJORUVEX1BBVENIXCIsXG4gIFwiRFlOQU1JQ19TTE9UU1wiOiAxMDI0LFxuICBcIjEwMjRcIjogXCJEWU5BTUlDX1NMT1RTXCIsXG4gIFwiREVWX1JPT1RfRlJBR01FTlRcIjogMjA0OCxcbiAgXCIyMDQ4XCI6IFwiREVWX1JPT1RfRlJBR01FTlRcIixcbiAgXCJDQUNIRURcIjogLTEsXG4gIFwiLTFcIjogXCJDQUNIRURcIixcbiAgXCJCQUlMXCI6IC0yLFxuICBcIi0yXCI6IFwiQkFJTFwiXG59O1xuY29uc3QgUGF0Y2hGbGFnTmFtZXMgPSB7XG4gIFsxXTogYFRFWFRgLFxuICBbMl06IGBDTEFTU2AsXG4gIFs0XTogYFNUWUxFYCxcbiAgWzhdOiBgUFJPUFNgLFxuICBbMTZdOiBgRlVMTF9QUk9QU2AsXG4gIFszMl06IGBORUVEX0hZRFJBVElPTmAsXG4gIFs2NF06IGBTVEFCTEVfRlJBR01FTlRgLFxuICBbMTI4XTogYEtFWUVEX0ZSQUdNRU5UYCxcbiAgWzI1Nl06IGBVTktFWUVEX0ZSQUdNRU5UYCxcbiAgWzUxMl06IGBORUVEX1BBVENIYCxcbiAgWzEwMjRdOiBgRFlOQU1JQ19TTE9UU2AsXG4gIFsyMDQ4XTogYERFVl9ST09UX0ZSQUdNRU5UYCxcbiAgWy0xXTogYEhPSVNURURgLFxuICBbLTJdOiBgQkFJTGBcbn07XG5cbmNvbnN0IFNoYXBlRmxhZ3MgPSB7XG4gIFwiRUxFTUVOVFwiOiAxLFxuICBcIjFcIjogXCJFTEVNRU5UXCIsXG4gIFwiRlVOQ1RJT05BTF9DT01QT05FTlRcIjogMixcbiAgXCIyXCI6IFwiRlVOQ1RJT05BTF9DT01QT05FTlRcIixcbiAgXCJTVEFURUZVTF9DT01QT05FTlRcIjogNCxcbiAgXCI0XCI6IFwiU1RBVEVGVUxfQ09NUE9ORU5UXCIsXG4gIFwiVEVYVF9DSElMRFJFTlwiOiA4LFxuICBcIjhcIjogXCJURVhUX0NISUxEUkVOXCIsXG4gIFwiQVJSQVlfQ0hJTERSRU5cIjogMTYsXG4gIFwiMTZcIjogXCJBUlJBWV9DSElMRFJFTlwiLFxuICBcIlNMT1RTX0NISUxEUkVOXCI6IDMyLFxuICBcIjMyXCI6IFwiU0xPVFNfQ0hJTERSRU5cIixcbiAgXCJURUxFUE9SVFwiOiA2NCxcbiAgXCI2NFwiOiBcIlRFTEVQT1JUXCIsXG4gIFwiU1VTUEVOU0VcIjogMTI4LFxuICBcIjEyOFwiOiBcIlNVU1BFTlNFXCIsXG4gIFwiQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFXCI6IDI1NixcbiAgXCIyNTZcIjogXCJDT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkVcIixcbiAgXCJDT01QT05FTlRfS0VQVF9BTElWRVwiOiA1MTIsXG4gIFwiNTEyXCI6IFwiQ09NUE9ORU5UX0tFUFRfQUxJVkVcIixcbiAgXCJDT01QT05FTlRcIjogNixcbiAgXCI2XCI6IFwiQ09NUE9ORU5UXCJcbn07XG5cbmNvbnN0IFNsb3RGbGFncyA9IHtcbiAgXCJTVEFCTEVcIjogMSxcbiAgXCIxXCI6IFwiU1RBQkxFXCIsXG4gIFwiRFlOQU1JQ1wiOiAyLFxuICBcIjJcIjogXCJEWU5BTUlDXCIsXG4gIFwiRk9SV0FSREVEXCI6IDMsXG4gIFwiM1wiOiBcIkZPUldBUkRFRFwiXG59O1xuY29uc3Qgc2xvdEZsYWdzVGV4dCA9IHtcbiAgWzFdOiBcIlNUQUJMRVwiLFxuICBbMl06IFwiRFlOQU1JQ1wiLFxuICBbM106IFwiRk9SV0FSREVEXCJcbn07XG5cbmNvbnN0IEdMT0JBTFNfQUxMT1dFRCA9IFwiSW5maW5pdHksdW5kZWZpbmVkLE5hTixpc0Zpbml0ZSxpc05hTixwYXJzZUZsb2F0LHBhcnNlSW50LGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLGVuY29kZVVSSUNvbXBvbmVudCxNYXRoLE51bWJlcixEYXRlLEFycmF5LE9iamVjdCxCb29sZWFuLFN0cmluZyxSZWdFeHAsTWFwLFNldCxKU09OLEludGwsQmlnSW50LGNvbnNvbGUsRXJyb3IsU3ltYm9sXCI7XG5jb25zdCBpc0dsb2JhbGx5QWxsb3dlZCA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKEdMT0JBTFNfQUxMT1dFRCk7XG5jb25zdCBpc0dsb2JhbGx5V2hpdGVsaXN0ZWQgPSBpc0dsb2JhbGx5QWxsb3dlZDtcblxuY29uc3QgcmFuZ2UgPSAyO1xuZnVuY3Rpb24gZ2VuZXJhdGVDb2RlRnJhbWUoc291cmNlLCBzdGFydCA9IDAsIGVuZCA9IHNvdXJjZS5sZW5ndGgpIHtcbiAgc3RhcnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihzdGFydCwgc291cmNlLmxlbmd0aCkpO1xuICBlbmQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihlbmQsIHNvdXJjZS5sZW5ndGgpKTtcbiAgaWYgKHN0YXJ0ID4gZW5kKSByZXR1cm4gXCJcIjtcbiAgbGV0IGxpbmVzID0gc291cmNlLnNwbGl0KC8oXFxyP1xcbikvKTtcbiAgY29uc3QgbmV3bGluZVNlcXVlbmNlcyA9IGxpbmVzLmZpbHRlcigoXywgaWR4KSA9PiBpZHggJSAyID09PSAxKTtcbiAgbGluZXMgPSBsaW5lcy5maWx0ZXIoKF8sIGlkeCkgPT4gaWR4ICUgMiA9PT0gMCk7XG4gIGxldCBjb3VudCA9IDA7XG4gIGNvbnN0IHJlcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY291bnQgKz0gbGluZXNbaV0ubGVuZ3RoICsgKG5ld2xpbmVTZXF1ZW5jZXNbaV0gJiYgbmV3bGluZVNlcXVlbmNlc1tpXS5sZW5ndGggfHwgMCk7XG4gICAgaWYgKGNvdW50ID49IHN0YXJ0KSB7XG4gICAgICBmb3IgKGxldCBqID0gaSAtIHJhbmdlOyBqIDw9IGkgKyByYW5nZSB8fCBlbmQgPiBjb3VudDsgaisrKSB7XG4gICAgICAgIGlmIChqIDwgMCB8fCBqID49IGxpbmVzLmxlbmd0aCkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBqICsgMTtcbiAgICAgICAgcmVzLnB1c2goXG4gICAgICAgICAgYCR7bGluZX0ke1wiIFwiLnJlcGVhdChNYXRoLm1heCgzIC0gU3RyaW5nKGxpbmUpLmxlbmd0aCwgMCkpfXwgICR7bGluZXNbal19YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBsaW5lTGVuZ3RoID0gbGluZXNbal0ubGVuZ3RoO1xuICAgICAgICBjb25zdCBuZXdMaW5lU2VxTGVuZ3RoID0gbmV3bGluZVNlcXVlbmNlc1tqXSAmJiBuZXdsaW5lU2VxdWVuY2VzW2pdLmxlbmd0aCB8fCAwO1xuICAgICAgICBpZiAoaiA9PT0gaSkge1xuICAgICAgICAgIGNvbnN0IHBhZCA9IHN0YXJ0IC0gKGNvdW50IC0gKGxpbmVMZW5ndGggKyBuZXdMaW5lU2VxTGVuZ3RoKSk7XG4gICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoXG4gICAgICAgICAgICAxLFxuICAgICAgICAgICAgZW5kID4gY291bnQgPyBsaW5lTGVuZ3RoIC0gcGFkIDogZW5kIC0gc3RhcnRcbiAgICAgICAgICApO1xuICAgICAgICAgIHJlcy5wdXNoKGAgICB8ICBgICsgXCIgXCIucmVwZWF0KHBhZCkgKyBcIl5cIi5yZXBlYXQobGVuZ3RoKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaiA+IGkpIHtcbiAgICAgICAgICBpZiAoZW5kID4gY291bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KE1hdGgubWluKGVuZCAtIGNvdW50LCBsaW5lTGVuZ3RoKSwgMSk7XG4gICAgICAgICAgICByZXMucHVzaChgICAgfCAgYCArIFwiXlwiLnJlcGVhdChsZW5ndGgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY291bnQgKz0gbGluZUxlbmd0aCArIG5ld0xpbmVTZXFMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlKHZhbHVlKSB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB2YWx1ZVtpXTtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBpc1N0cmluZyhpdGVtKSA/IHBhcnNlU3RyaW5nU3R5bGUoaXRlbSkgOiBub3JtYWxpemVTdHlsZShpdGVtKTtcbiAgICAgIGlmIChub3JtYWxpemVkKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5vcm1hbGl6ZWQpIHtcbiAgICAgICAgICByZXNba2V5XSA9IG5vcm1hbGl6ZWRba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKHZhbHVlKSB8fCBpc09iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cbmNvbnN0IGxpc3REZWxpbWl0ZXJSRSA9IC87KD8hW14oXSpcXCkpL2c7XG5jb25zdCBwcm9wZXJ0eURlbGltaXRlclJFID0gLzooW15dKykvO1xuY29uc3Qgc3R5bGVDb21tZW50UkUgPSAvXFwvXFwqW15dKj9cXCpcXC8vZztcbmZ1bmN0aW9uIHBhcnNlU3RyaW5nU3R5bGUoY3NzVGV4dCkge1xuICBjb25zdCByZXQgPSB7fTtcbiAgY3NzVGV4dC5yZXBsYWNlKHN0eWxlQ29tbWVudFJFLCBcIlwiKS5zcGxpdChsaXN0RGVsaW1pdGVyUkUpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY29uc3QgdG1wID0gaXRlbS5zcGxpdChwcm9wZXJ0eURlbGltaXRlclJFKTtcbiAgICAgIHRtcC5sZW5ndGggPiAxICYmIChyZXRbdG1wWzBdLnRyaW0oKV0gPSB0bXBbMV0udHJpbSgpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5U3R5bGUoc3R5bGVzKSB7XG4gIGlmICghc3R5bGVzKSByZXR1cm4gXCJcIjtcbiAgaWYgKGlzU3RyaW5nKHN0eWxlcykpIHJldHVybiBzdHlsZXM7XG4gIGxldCByZXQgPSBcIlwiO1xuICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZXMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHN0eWxlc1trZXldO1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkgfHwgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0ga2V5LnN0YXJ0c1dpdGgoYC0tYCkgPyBrZXkgOiBoeXBoZW5hdGUoa2V5KTtcbiAgICAgIHJldCArPSBgJHtub3JtYWxpemVkS2V5fToke3ZhbHVlfTtgO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gbm9ybWFsaXplQ2xhc3ModmFsdWUpIHtcbiAgbGV0IHJlcyA9IFwiXCI7XG4gIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICByZXMgPSB2YWx1ZTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVDbGFzcyh2YWx1ZVtpXSk7XG4gICAgICBpZiAobm9ybWFsaXplZCkge1xuICAgICAgICByZXMgKz0gbm9ybWFsaXplZCArIFwiIFwiO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZVtuYW1lXSkge1xuICAgICAgICByZXMgKz0gbmFtZSArIFwiIFwiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzLnRyaW0oKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVByb3BzKHByb3BzKSB7XG4gIGlmICghcHJvcHMpIHJldHVybiBudWxsO1xuICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcbiAgaWYgKGtsYXNzICYmICFpc1N0cmluZyhrbGFzcykpIHtcbiAgICBwcm9wcy5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKGtsYXNzKTtcbiAgfVxuICBpZiAoc3R5bGUpIHtcbiAgICBwcm9wcy5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKHN0eWxlKTtcbiAgfVxuICByZXR1cm4gcHJvcHM7XG59XG5cbmNvbnN0IEhUTUxfVEFHUyA9IFwiaHRtbCxib2R5LGJhc2UsaGVhZCxsaW5rLG1ldGEsc3R5bGUsdGl0bGUsYWRkcmVzcyxhcnRpY2xlLGFzaWRlLGZvb3RlcixoZWFkZXIsaGdyb3VwLGgxLGgyLGgzLGg0LGg1LGg2LG5hdixzZWN0aW9uLGRpdixkZCxkbCxkdCxmaWdjYXB0aW9uLGZpZ3VyZSxwaWN0dXJlLGhyLGltZyxsaSxtYWluLG9sLHAscHJlLHVsLGEsYixhYmJyLGJkaSxiZG8sYnIsY2l0ZSxjb2RlLGRhdGEsZGZuLGVtLGksa2JkLG1hcmsscSxycCxydCxydWJ5LHMsc2FtcCxzbWFsbCxzcGFuLHN0cm9uZyxzdWIsc3VwLHRpbWUsdSx2YXIsd2JyLGFyZWEsYXVkaW8sbWFwLHRyYWNrLHZpZGVvLGVtYmVkLG9iamVjdCxwYXJhbSxzb3VyY2UsY2FudmFzLHNjcmlwdCxub3NjcmlwdCxkZWwsaW5zLGNhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLHRoLHRyLGJ1dHRvbixkYXRhbGlzdCxmaWVsZHNldCxmb3JtLGlucHV0LGxhYmVsLGxlZ2VuZCxtZXRlcixvcHRncm91cCxvcHRpb24sb3V0cHV0LHByb2dyZXNzLHNlbGVjdCx0ZXh0YXJlYSxkZXRhaWxzLGRpYWxvZyxtZW51LHN1bW1hcnksdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3RcIjtcbmNvbnN0IFNWR19UQUdTID0gXCJzdmcsYW5pbWF0ZSxhbmltYXRlTW90aW9uLGFuaW1hdGVUcmFuc2Zvcm0sY2lyY2xlLGNsaXBQYXRoLGNvbG9yLXByb2ZpbGUsZGVmcyxkZXNjLGRpc2NhcmQsZWxsaXBzZSxmZUJsZW5kLGZlQ29sb3JNYXRyaXgsZmVDb21wb25lbnRUcmFuc2ZlcixmZUNvbXBvc2l0ZSxmZUNvbnZvbHZlTWF0cml4LGZlRGlmZnVzZUxpZ2h0aW5nLGZlRGlzcGxhY2VtZW50TWFwLGZlRGlzdGFudExpZ2h0LGZlRHJvcFNoYWRvdyxmZUZsb29kLGZlRnVuY0EsZmVGdW5jQixmZUZ1bmNHLGZlRnVuY1IsZmVHYXVzc2lhbkJsdXIsZmVJbWFnZSxmZU1lcmdlLGZlTWVyZ2VOb2RlLGZlTW9ycGhvbG9neSxmZU9mZnNldCxmZVBvaW50TGlnaHQsZmVTcGVjdWxhckxpZ2h0aW5nLGZlU3BvdExpZ2h0LGZlVGlsZSxmZVR1cmJ1bGVuY2UsZmlsdGVyLGZvcmVpZ25PYmplY3QsZyxoYXRjaCxoYXRjaHBhdGgsaW1hZ2UsbGluZSxsaW5lYXJHcmFkaWVudCxtYXJrZXIsbWFzayxtZXNoLG1lc2hncmFkaWVudCxtZXNocGF0Y2gsbWVzaHJvdyxtZXRhZGF0YSxtcGF0aCxwYXRoLHBhdHRlcm4scG9seWdvbixwb2x5bGluZSxyYWRpYWxHcmFkaWVudCxyZWN0LHNldCxzb2xpZGNvbG9yLHN0b3Asc3dpdGNoLHN5bWJvbCx0ZXh0LHRleHRQYXRoLHRpdGxlLHRzcGFuLHVua25vd24sdXNlLHZpZXdcIjtcbmNvbnN0IE1BVEhfVEFHUyA9IFwiYW5ub3RhdGlvbixhbm5vdGF0aW9uLXhtbCxtYWN0aW9uLG1hbGlnbmdyb3VwLG1hbGlnbm1hcmssbWF0aCxtZW5jbG9zZSxtZXJyb3IsbWZlbmNlZCxtZnJhYyxtZnJhY3Rpb24sbWdseXBoLG1pLG1sYWJlbGVkdHIsbWxvbmdkaXYsbW11bHRpc2NyaXB0cyxtbixtbyxtb3ZlcixtcGFkZGVkLG1waGFudG9tLG1wcmVzY3JpcHRzLG1yb290LG1yb3csbXMsbXNjYXJyaWVzLG1zY2FycnksbXNncm91cCxtc2xpbmUsbXNwYWNlLG1zcXJ0LG1zcm93LG1zdGFjayxtc3R5bGUsbXN1Yixtc3Vic3VwLG1zdXAsbXRhYmxlLG10ZCxtdGV4dCxtdHIsbXVuZGVyLG11bmRlcm92ZXIsbm9uZSxzZW1hbnRpY3NcIjtcbmNvbnN0IFZPSURfVEFHUyA9IFwiYXJlYSxiYXNlLGJyLGNvbCxlbWJlZCxocixpbWcsaW5wdXQsbGluayxtZXRhLHBhcmFtLHNvdXJjZSx0cmFjayx3YnJcIjtcbmNvbnN0IGlzSFRNTFRhZyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKEhUTUxfVEFHUyk7XG5jb25zdCBpc1NWR1RhZyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFNWR19UQUdTKTtcbmNvbnN0IGlzTWF0aE1MVGFnID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoTUFUSF9UQUdTKTtcbmNvbnN0IGlzVm9pZFRhZyA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFZPSURfVEFHUyk7XG5cbmNvbnN0IHNwZWNpYWxCb29sZWFuQXR0cnMgPSBgaXRlbXNjb3BlLGFsbG93ZnVsbHNjcmVlbixmb3Jtbm92YWxpZGF0ZSxpc21hcCxub21vZHVsZSxub3ZhbGlkYXRlLHJlYWRvbmx5YDtcbmNvbnN0IGlzU3BlY2lhbEJvb2xlYW5BdHRyID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoc3BlY2lhbEJvb2xlYW5BdHRycyk7XG5jb25zdCBpc0Jvb2xlYW5BdHRyID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXG4gIHNwZWNpYWxCb29sZWFuQXR0cnMgKyBgLGFzeW5jLGF1dG9mb2N1cyxhdXRvcGxheSxjb250cm9scyxkZWZhdWx0LGRlZmVyLGRpc2FibGVkLGhpZGRlbixpbmVydCxsb29wLG9wZW4scmVxdWlyZWQscmV2ZXJzZWQsc2NvcGVkLHNlYW1sZXNzLGNoZWNrZWQsbXV0ZWQsbXVsdGlwbGUsc2VsZWN0ZWRgXG4pO1xuZnVuY3Rpb24gaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlIHx8IHZhbHVlID09PSBcIlwiO1xufVxuY29uc3QgdW5zYWZlQXR0ckNoYXJSRSA9IC9bPi89XCInXFx1MDAwOVxcdTAwMGFcXHUwMDBjXFx1MDAyMF0vO1xuY29uc3QgYXR0clZhbGlkYXRpb25DYWNoZSA9IHt9O1xuZnVuY3Rpb24gaXNTU1JTYWZlQXR0ck5hbWUobmFtZSkge1xuICBpZiAoYXR0clZhbGlkYXRpb25DYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgIHJldHVybiBhdHRyVmFsaWRhdGlvbkNhY2hlW25hbWVdO1xuICB9XG4gIGNvbnN0IGlzVW5zYWZlID0gdW5zYWZlQXR0ckNoYXJSRS50ZXN0KG5hbWUpO1xuICBpZiAoaXNVbnNhZmUpIHtcbiAgICBjb25zb2xlLmVycm9yKGB1bnNhZmUgYXR0cmlidXRlIG5hbWU6ICR7bmFtZX1gKTtcbiAgfVxuICByZXR1cm4gYXR0clZhbGlkYXRpb25DYWNoZVtuYW1lXSA9ICFpc1Vuc2FmZTtcbn1cbmNvbnN0IHByb3BzVG9BdHRyTWFwID0ge1xuICBhY2NlcHRDaGFyc2V0OiBcImFjY2VwdC1jaGFyc2V0XCIsXG4gIGNsYXNzTmFtZTogXCJjbGFzc1wiLFxuICBodG1sRm9yOiBcImZvclwiLFxuICBodHRwRXF1aXY6IFwiaHR0cC1lcXVpdlwiXG59O1xuY29uc3QgaXNLbm93bkh0bWxBdHRyID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXG4gIGBhY2NlcHQsYWNjZXB0LWNoYXJzZXQsYWNjZXNza2V5LGFjdGlvbixhbGlnbixhbGxvdyxhbHQsYXN5bmMsYXV0b2NhcGl0YWxpemUsYXV0b2NvbXBsZXRlLGF1dG9mb2N1cyxhdXRvcGxheSxiYWNrZ3JvdW5kLGJnY29sb3IsYm9yZGVyLGJ1ZmZlcmVkLGNhcHR1cmUsY2hhbGxlbmdlLGNoYXJzZXQsY2hlY2tlZCxjaXRlLGNsYXNzLGNvZGUsY29kZWJhc2UsY29sb3IsY29scyxjb2xzcGFuLGNvbnRlbnQsY29udGVudGVkaXRhYmxlLGNvbnRleHRtZW51LGNvbnRyb2xzLGNvb3Jkcyxjcm9zc29yaWdpbixjc3AsZGF0YSxkYXRldGltZSxkZWNvZGluZyxkZWZhdWx0LGRlZmVyLGRpcixkaXJuYW1lLGRpc2FibGVkLGRvd25sb2FkLGRyYWdnYWJsZSxkcm9wem9uZSxlbmN0eXBlLGVudGVya2V5aGludCxmb3IsZm9ybSxmb3JtYWN0aW9uLGZvcm1lbmN0eXBlLGZvcm1tZXRob2QsZm9ybW5vdmFsaWRhdGUsZm9ybXRhcmdldCxoZWFkZXJzLGhlaWdodCxoaWRkZW4saGlnaCxocmVmLGhyZWZsYW5nLGh0dHAtZXF1aXYsaWNvbixpZCxpbXBvcnRhbmNlLGluZXJ0LGludGVncml0eSxpc21hcCxpdGVtcHJvcCxrZXl0eXBlLGtpbmQsbGFiZWwsbGFuZyxsYW5ndWFnZSxsb2FkaW5nLGxpc3QsbG9vcCxsb3csbWFuaWZlc3QsbWF4LG1heGxlbmd0aCxtaW5sZW5ndGgsbWVkaWEsbWluLG11bHRpcGxlLG11dGVkLG5hbWUsbm92YWxpZGF0ZSxvcGVuLG9wdGltdW0scGF0dGVybixwaW5nLHBsYWNlaG9sZGVyLHBvc3RlcixwcmVsb2FkLHJhZGlvZ3JvdXAscmVhZG9ubHkscmVmZXJyZXJwb2xpY3kscmVsLHJlcXVpcmVkLHJldmVyc2VkLHJvd3Mscm93c3BhbixzYW5kYm94LHNjb3BlLHNjb3BlZCxzZWxlY3RlZCxzaGFwZSxzaXplLHNpemVzLHNsb3Qsc3BhbixzcGVsbGNoZWNrLHNyYyxzcmNkb2Msc3JjbGFuZyxzcmNzZXQsc3RhcnQsc3RlcCxzdHlsZSxzdW1tYXJ5LHRhYmluZGV4LHRhcmdldCx0aXRsZSx0cmFuc2xhdGUsdHlwZSx1c2VtYXAsdmFsdWUsd2lkdGgsd3JhcGBcbik7XG5jb25zdCBpc0tub3duU3ZnQXR0ciA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBgeG1sbnMsYWNjZW50LWhlaWdodCxhY2N1bXVsYXRlLGFkZGl0aXZlLGFsaWdubWVudC1iYXNlbGluZSxhbHBoYWJldGljLGFtcGxpdHVkZSxhcmFiaWMtZm9ybSxhc2NlbnQsYXR0cmlidXRlTmFtZSxhdHRyaWJ1dGVUeXBlLGF6aW11dGgsYmFzZUZyZXF1ZW5jeSxiYXNlbGluZS1zaGlmdCxiYXNlUHJvZmlsZSxiYm94LGJlZ2luLGJpYXMsYnksY2FsY01vZGUsY2FwLWhlaWdodCxjbGFzcyxjbGlwLGNsaXBQYXRoVW5pdHMsY2xpcC1wYXRoLGNsaXAtcnVsZSxjb2xvcixjb2xvci1pbnRlcnBvbGF0aW9uLGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyxjb2xvci1wcm9maWxlLGNvbG9yLXJlbmRlcmluZyxjb250ZW50U2NyaXB0VHlwZSxjb250ZW50U3R5bGVUeXBlLGNyb3Nzb3JpZ2luLGN1cnNvcixjeCxjeSxkLGRlY2VsZXJhdGUsZGVzY2VudCxkaWZmdXNlQ29uc3RhbnQsZGlyZWN0aW9uLGRpc3BsYXksZGl2aXNvcixkb21pbmFudC1iYXNlbGluZSxkdXIsZHgsZHksZWRnZU1vZGUsZWxldmF0aW9uLGVuYWJsZS1iYWNrZ3JvdW5kLGVuZCxleHBvbmVudCxmaWxsLGZpbGwtb3BhY2l0eSxmaWxsLXJ1bGUsZmlsdGVyLGZpbHRlclJlcyxmaWx0ZXJVbml0cyxmbG9vZC1jb2xvcixmbG9vZC1vcGFjaXR5LGZvbnQtZmFtaWx5LGZvbnQtc2l6ZSxmb250LXNpemUtYWRqdXN0LGZvbnQtc3RyZXRjaCxmb250LXN0eWxlLGZvbnQtdmFyaWFudCxmb250LXdlaWdodCxmb3JtYXQsZnJvbSxmcixmeCxmeSxnMSxnMixnbHlwaC1uYW1lLGdseXBoLW9yaWVudGF0aW9uLWhvcml6b250YWwsZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwsZ2x5cGhSZWYsZ3JhZGllbnRUcmFuc2Zvcm0sZ3JhZGllbnRVbml0cyxoYW5naW5nLGhlaWdodCxocmVmLGhyZWZsYW5nLGhvcml6LWFkdi14LGhvcml6LW9yaWdpbi14LGlkLGlkZW9ncmFwaGljLGltYWdlLXJlbmRlcmluZyxpbixpbjIsaW50ZXJjZXB0LGssazEsazIsazMsazQsa2VybmVsTWF0cml4LGtlcm5lbFVuaXRMZW5ndGgsa2VybmluZyxrZXlQb2ludHMsa2V5U3BsaW5lcyxrZXlUaW1lcyxsYW5nLGxlbmd0aEFkanVzdCxsZXR0ZXItc3BhY2luZyxsaWdodGluZy1jb2xvcixsaW1pdGluZ0NvbmVBbmdsZSxsb2NhbCxtYXJrZXItZW5kLG1hcmtlci1taWQsbWFya2VyLXN0YXJ0LG1hcmtlckhlaWdodCxtYXJrZXJVbml0cyxtYXJrZXJXaWR0aCxtYXNrLG1hc2tDb250ZW50VW5pdHMsbWFza1VuaXRzLG1hdGhlbWF0aWNhbCxtYXgsbWVkaWEsbWV0aG9kLG1pbixtb2RlLG5hbWUsbnVtT2N0YXZlcyxvZmZzZXQsb3BhY2l0eSxvcGVyYXRvcixvcmRlcixvcmllbnQsb3JpZW50YXRpb24sb3JpZ2luLG92ZXJmbG93LG92ZXJsaW5lLXBvc2l0aW9uLG92ZXJsaW5lLXRoaWNrbmVzcyxwYW5vc2UtMSxwYWludC1vcmRlcixwYXRoLHBhdGhMZW5ndGgscGF0dGVybkNvbnRlbnRVbml0cyxwYXR0ZXJuVHJhbnNmb3JtLHBhdHRlcm5Vbml0cyxwaW5nLHBvaW50ZXItZXZlbnRzLHBvaW50cyxwb2ludHNBdFgscG9pbnRzQXRZLHBvaW50c0F0WixwcmVzZXJ2ZUFscGhhLHByZXNlcnZlQXNwZWN0UmF0aW8scHJpbWl0aXZlVW5pdHMscixyYWRpdXMscmVmZXJyZXJQb2xpY3kscmVmWCxyZWZZLHJlbCxyZW5kZXJpbmctaW50ZW50LHJlcGVhdENvdW50LHJlcGVhdER1cixyZXF1aXJlZEV4dGVuc2lvbnMscmVxdWlyZWRGZWF0dXJlcyxyZXN0YXJ0LHJlc3VsdCxyb3RhdGUscngscnksc2NhbGUsc2VlZCxzaGFwZS1yZW5kZXJpbmcsc2xvcGUsc3BhY2luZyxzcGVjdWxhckNvbnN0YW50LHNwZWN1bGFyRXhwb25lbnQsc3BlZWQsc3ByZWFkTWV0aG9kLHN0YXJ0T2Zmc2V0LHN0ZERldmlhdGlvbixzdGVtaCxzdGVtdixzdGl0Y2hUaWxlcyxzdG9wLWNvbG9yLHN0b3Atb3BhY2l0eSxzdHJpa2V0aHJvdWdoLXBvc2l0aW9uLHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzLHN0cmluZyxzdHJva2Usc3Ryb2tlLWRhc2hhcnJheSxzdHJva2UtZGFzaG9mZnNldCxzdHJva2UtbGluZWNhcCxzdHJva2UtbGluZWpvaW4sc3Ryb2tlLW1pdGVybGltaXQsc3Ryb2tlLW9wYWNpdHksc3Ryb2tlLXdpZHRoLHN0eWxlLHN1cmZhY2VTY2FsZSxzeXN0ZW1MYW5ndWFnZSx0YWJpbmRleCx0YWJsZVZhbHVlcyx0YXJnZXQsdGFyZ2V0WCx0YXJnZXRZLHRleHQtYW5jaG9yLHRleHQtZGVjb3JhdGlvbix0ZXh0LXJlbmRlcmluZyx0ZXh0TGVuZ3RoLHRvLHRyYW5zZm9ybSx0cmFuc2Zvcm0tb3JpZ2luLHR5cGUsdTEsdTIsdW5kZXJsaW5lLXBvc2l0aW9uLHVuZGVybGluZS10aGlja25lc3MsdW5pY29kZSx1bmljb2RlLWJpZGksdW5pY29kZS1yYW5nZSx1bml0cy1wZXItZW0sdi1hbHBoYWJldGljLHYtaGFuZ2luZyx2LWlkZW9ncmFwaGljLHYtbWF0aGVtYXRpY2FsLHZhbHVlcyx2ZWN0b3ItZWZmZWN0LHZlcnNpb24sdmVydC1hZHYteSx2ZXJ0LW9yaWdpbi14LHZlcnQtb3JpZ2luLXksdmlld0JveCx2aWV3VGFyZ2V0LHZpc2liaWxpdHksd2lkdGgsd2lkdGhzLHdvcmQtc3BhY2luZyx3cml0aW5nLW1vZGUseCx4LWhlaWdodCx4MSx4Mix4Q2hhbm5lbFNlbGVjdG9yLHhsaW5rOmFjdHVhdGUseGxpbms6YXJjcm9sZSx4bGluazpocmVmLHhsaW5rOnJvbGUseGxpbms6c2hvdyx4bGluazp0aXRsZSx4bGluazp0eXBlLHhtbG5zOnhsaW5rLHhtbDpiYXNlLHhtbDpsYW5nLHhtbDpzcGFjZSx5LHkxLHkyLHlDaGFubmVsU2VsZWN0b3Iseix6b29tQW5kUGFuYFxuKTtcbmNvbnN0IGlzS25vd25NYXRoTUxBdHRyID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXG4gIGBhY2NlbnQsYWNjZW50dW5kZXIsYWN0aW9udHlwZSxhbGlnbixhbGlnbm1lbnRzY29wZSxhbHRpbWcsYWx0aW1nLWhlaWdodCxhbHRpbWctdmFsaWduLGFsdGltZy13aWR0aCxhbHR0ZXh0LGJldmVsbGVkLGNsb3NlLGNvbHVtbnNhbGlnbixjb2x1bW5saW5lcyxjb2x1bW5zcGFuLGRlbm9tYWxpZ24sZGVwdGgsZGlyLGRpc3BsYXksZGlzcGxheXN0eWxlLGVuY29kaW5nLGVxdWFsY29sdW1ucyxlcXVhbHJvd3MsZmVuY2UsZm9udHN0eWxlLGZvbnR3ZWlnaHQsZm9ybSxmcmFtZSxmcmFtZXNwYWNpbmcsZ3JvdXBhbGlnbixoZWlnaHQsaHJlZixpZCxpbmRlbnRhbGlnbixpbmRlbnRhbGlnbmZpcnN0LGluZGVudGFsaWdubGFzdCxpbmRlbnRzaGlmdCxpbmRlbnRzaGlmdGZpcnN0LGluZGVudHNoaWZ0bGFzdCxpbmRleHR5cGUsanVzdGlmeSxsYXJnZXRvcCxsYXJnZW9wLGxxdW90ZSxsc3BhY2UsbWF0aGJhY2tncm91bmQsbWF0aGNvbG9yLG1hdGhzaXplLG1hdGh2YXJpYW50LG1heHNpemUsbWlubGFiZWxzcGFjaW5nLG1vZGUsb3RoZXIsb3ZlcmZsb3cscG9zaXRpb24scm93YWxpZ24scm93bGluZXMscm93c3BhbixycXVvdGUscnNwYWNlLHNjcmlwdGxldmVsLHNjcmlwdG1pbnNpemUsc2NyaXB0c2l6ZW11bHRpcGxpZXIsc2VsZWN0aW9uLHNlcGFyYXRvcixzZXBhcmF0b3JzLHNoaWZ0LHNpZGUsc3JjLHN0YWNrYWxpZ24sc3RyZXRjaHksc3Vic2NyaXB0c2hpZnQsc3VwZXJzY3JpcHRzaGlmdCxzeW1tZXRyaWMsdm9mZnNldCx3aWR0aCx3aWR0aHMseGxpbms6aHJlZix4bGluazpzaG93LHhsaW5rOnR5cGUseG1sbnNgXG4pO1xuZnVuY3Rpb24gaXNSZW5kZXJhYmxlQXR0clZhbHVlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiB0eXBlID09PSBcInN0cmluZ1wiIHx8IHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdHlwZSA9PT0gXCJib29sZWFuXCI7XG59XG5cbmNvbnN0IGVzY2FwZVJFID0gL1tcIicmPD5dLztcbmZ1bmN0aW9uIGVzY2FwZUh0bWwoc3RyaW5nKSB7XG4gIGNvbnN0IHN0ciA9IFwiXCIgKyBzdHJpbmc7XG4gIGNvbnN0IG1hdGNoID0gZXNjYXBlUkUuZXhlYyhzdHIpO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuICBsZXQgaHRtbCA9IFwiXCI7XG4gIGxldCBlc2NhcGVkO1xuICBsZXQgaW5kZXg7XG4gIGxldCBsYXN0SW5kZXggPSAwO1xuICBmb3IgKGluZGV4ID0gbWF0Y2guaW5kZXg7IGluZGV4IDwgc3RyLmxlbmd0aDsgaW5kZXgrKykge1xuICAgIHN3aXRjaCAoc3RyLmNoYXJDb2RlQXQoaW5kZXgpKSB7XG4gICAgICBjYXNlIDM0OlxuICAgICAgICBlc2NhcGVkID0gXCImcXVvdDtcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM4OlxuICAgICAgICBlc2NhcGVkID0gXCImYW1wO1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzk6XG4gICAgICAgIGVzY2FwZWQgPSBcIiYjMzk7XCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA2MDpcbiAgICAgICAgZXNjYXBlZCA9IFwiJmx0O1wiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNjI6XG4gICAgICAgIGVzY2FwZWQgPSBcIiZndDtcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGxhc3RJbmRleCAhPT0gaW5kZXgpIHtcbiAgICAgIGh0bWwgKz0gc3RyLnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpO1xuICAgIH1cbiAgICBsYXN0SW5kZXggPSBpbmRleCArIDE7XG4gICAgaHRtbCArPSBlc2NhcGVkO1xuICB9XG4gIHJldHVybiBsYXN0SW5kZXggIT09IGluZGV4ID8gaHRtbCArIHN0ci5zbGljZShsYXN0SW5kZXgsIGluZGV4KSA6IGh0bWw7XG59XG5jb25zdCBjb21tZW50U3RyaXBSRSA9IC9eLT8+fDwhLS18LS0+fC0tIT58PCEtJC9nO1xuZnVuY3Rpb24gZXNjYXBlSHRtbENvbW1lbnQoc3JjKSB7XG4gIHJldHVybiBzcmMucmVwbGFjZShjb21tZW50U3RyaXBSRSwgXCJcIik7XG59XG5jb25zdCBjc3NWYXJOYW1lRXNjYXBlU3ltYm9sc1JFID0gL1sgIVwiIyQlJicoKSorLC4vOjs8PT4/QFtcXFxcXFxdXmB7fH1+XS9nO1xuZnVuY3Rpb24gZ2V0RXNjYXBlZENzc1Zhck5hbWUoa2V5LCBkb3VibGVFc2NhcGUpIHtcbiAgcmV0dXJuIGtleS5yZXBsYWNlKFxuICAgIGNzc1Zhck5hbWVFc2NhcGVTeW1ib2xzUkUsXG4gICAgKHMpID0+IGRvdWJsZUVzY2FwZSA/IHMgPT09ICdcIicgPyAnXFxcXFxcXFxcXFxcXCInIDogYFxcXFxcXFxcJHtzfWAgOiBgXFxcXCR7c31gXG4gICk7XG59XG5cbmZ1bmN0aW9uIGxvb3NlQ29tcGFyZUFycmF5cyhhLCBiKSB7XG4gIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgbGV0IGVxdWFsID0gdHJ1ZTtcbiAgZm9yIChsZXQgaSA9IDA7IGVxdWFsICYmIGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgZXF1YWwgPSBsb29zZUVxdWFsKGFbaV0sIGJbaV0pO1xuICB9XG4gIHJldHVybiBlcXVhbDtcbn1cbmZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikge1xuICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG4gIGxldCBhVmFsaWRUeXBlID0gaXNEYXRlKGEpO1xuICBsZXQgYlZhbGlkVHlwZSA9IGlzRGF0ZShiKTtcbiAgaWYgKGFWYWxpZFR5cGUgfHwgYlZhbGlkVHlwZSkge1xuICAgIHJldHVybiBhVmFsaWRUeXBlICYmIGJWYWxpZFR5cGUgPyBhLmdldFRpbWUoKSA9PT0gYi5nZXRUaW1lKCkgOiBmYWxzZTtcbiAgfVxuICBhVmFsaWRUeXBlID0gaXNTeW1ib2woYSk7XG4gIGJWYWxpZFR5cGUgPSBpc1N5bWJvbChiKTtcbiAgaWYgKGFWYWxpZFR5cGUgfHwgYlZhbGlkVHlwZSkge1xuICAgIHJldHVybiBhID09PSBiO1xuICB9XG4gIGFWYWxpZFR5cGUgPSBpc0FycmF5KGEpO1xuICBiVmFsaWRUeXBlID0gaXNBcnJheShiKTtcbiAgaWYgKGFWYWxpZFR5cGUgfHwgYlZhbGlkVHlwZSkge1xuICAgIHJldHVybiBhVmFsaWRUeXBlICYmIGJWYWxpZFR5cGUgPyBsb29zZUNvbXBhcmVBcnJheXMoYSwgYikgOiBmYWxzZTtcbiAgfVxuICBhVmFsaWRUeXBlID0gaXNPYmplY3QoYSk7XG4gIGJWYWxpZFR5cGUgPSBpc09iamVjdChiKTtcbiAgaWYgKGFWYWxpZFR5cGUgfHwgYlZhbGlkVHlwZSkge1xuICAgIGlmICghYVZhbGlkVHlwZSB8fCAhYlZhbGlkVHlwZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBhS2V5c0NvdW50ID0gT2JqZWN0LmtleXMoYSkubGVuZ3RoO1xuICAgIGNvbnN0IGJLZXlzQ291bnQgPSBPYmplY3Qua2V5cyhiKS5sZW5ndGg7XG4gICAgaWYgKGFLZXlzQ291bnQgIT09IGJLZXlzQ291bnQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYSkge1xuICAgICAgY29uc3QgYUhhc0tleSA9IGEuaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICAgIGNvbnN0IGJIYXNLZXkgPSBiLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICBpZiAoYUhhc0tleSAmJiAhYkhhc0tleSB8fCAhYUhhc0tleSAmJiBiSGFzS2V5IHx8ICFsb29zZUVxdWFsKGFba2V5XSwgYltrZXldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBTdHJpbmcoYSkgPT09IFN0cmluZyhiKTtcbn1cbmZ1bmN0aW9uIGxvb3NlSW5kZXhPZihhcnIsIHZhbCkge1xuICByZXR1cm4gYXJyLmZpbmRJbmRleCgoaXRlbSkgPT4gbG9vc2VFcXVhbChpdGVtLCB2YWwpKTtcbn1cblxuY29uc3QgaXNSZWYgPSAodmFsKSA9PiB7XG4gIHJldHVybiAhISh2YWwgJiYgdmFsW1wiX192X2lzUmVmXCJdID09PSB0cnVlKTtcbn07XG5jb25zdCB0b0Rpc3BsYXlTdHJpbmcgPSAodmFsKSA9PiB7XG4gIHJldHVybiBpc1N0cmluZyh2YWwpID8gdmFsIDogdmFsID09IG51bGwgPyBcIlwiIDogaXNBcnJheSh2YWwpIHx8IGlzT2JqZWN0KHZhbCkgJiYgKHZhbC50b1N0cmluZyA9PT0gb2JqZWN0VG9TdHJpbmcgfHwgIWlzRnVuY3Rpb24odmFsLnRvU3RyaW5nKSkgPyBpc1JlZih2YWwpID8gdG9EaXNwbGF5U3RyaW5nKHZhbC52YWx1ZSkgOiBKU09OLnN0cmluZ2lmeSh2YWwsIHJlcGxhY2VyLCAyKSA6IFN0cmluZyh2YWwpO1xufTtcbmNvbnN0IHJlcGxhY2VyID0gKF9rZXksIHZhbCkgPT4ge1xuICBpZiAoaXNSZWYodmFsKSkge1xuICAgIHJldHVybiByZXBsYWNlcihfa2V5LCB2YWwudmFsdWUpO1xuICB9IGVsc2UgaWYgKGlzTWFwKHZhbCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgW2BNYXAoJHt2YWwuc2l6ZX0pYF06IFsuLi52YWwuZW50cmllcygpXS5yZWR1Y2UoXG4gICAgICAgIChlbnRyaWVzLCBba2V5LCB2YWwyXSwgaSkgPT4ge1xuICAgICAgICAgIGVudHJpZXNbc3RyaW5naWZ5U3ltYm9sKGtleSwgaSkgKyBcIiA9PlwiXSA9IHZhbDI7XG4gICAgICAgICAgcmV0dXJuIGVudHJpZXM7XG4gICAgICAgIH0sXG4gICAgICAgIHt9XG4gICAgICApXG4gICAgfTtcbiAgfSBlbHNlIGlmIChpc1NldCh2YWwpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFtgU2V0KCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLnZhbHVlcygpXS5tYXAoKHYpID0+IHN0cmluZ2lmeVN5bWJvbCh2KSlcbiAgICB9O1xuICB9IGVsc2UgaWYgKGlzU3ltYm9sKHZhbCkpIHtcbiAgICByZXR1cm4gc3RyaW5naWZ5U3ltYm9sKHZhbCk7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSAmJiAhaXNBcnJheSh2YWwpICYmICFpc1BsYWluT2JqZWN0KHZhbCkpIHtcbiAgICByZXR1cm4gU3RyaW5nKHZhbCk7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn07XG5jb25zdCBzdHJpbmdpZnlTeW1ib2wgPSAodiwgaSA9IFwiXCIpID0+IHtcbiAgdmFyIF9hO1xuICByZXR1cm4gKFxuICAgIC8vIFN5bWJvbC5kZXNjcmlwdGlvbiBpbiBlczIwMTkrIHNvIHdlIG5lZWQgdG8gY2FzdCBoZXJlIHRvIHBhc3NcbiAgICAvLyB0aGUgbGliOiBlczIwMTYgY2hlY2tcbiAgICBpc1N5bWJvbCh2KSA/IGBTeW1ib2woJHsoX2EgPSB2LmRlc2NyaXB0aW9uKSAhPSBudWxsID8gX2EgOiBpfSlgIDogdlxuICApO1xufTtcblxuZXhwb3J0IHsgRU1QVFlfQVJSLCBFTVBUWV9PQkosIE5PLCBOT09QLCBQYXRjaEZsYWdOYW1lcywgUGF0Y2hGbGFncywgU2hhcGVGbGFncywgU2xvdEZsYWdzLCBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgY3NzVmFyTmFtZUVzY2FwZVN5bWJvbHNSRSwgZGVmLCBlc2NhcGVIdG1sLCBlc2NhcGVIdG1sQ29tbWVudCwgZXh0ZW5kLCBnZW5DYWNoZUtleSwgZ2VuUHJvcHNBY2Nlc3NFeHAsIGdlbmVyYXRlQ29kZUZyYW1lLCBnZXRFc2NhcGVkQ3NzVmFyTmFtZSwgZ2V0R2xvYmFsVGhpcywgaGFzQ2hhbmdlZCwgaGFzT3duLCBoeXBoZW5hdGUsIGluY2x1ZGVCb29sZWFuQXR0ciwgaW52b2tlQXJyYXlGbnMsIGlzQXJyYXksIGlzQm9vbGVhbkF0dHIsIGlzQnVpbHRJbkRpcmVjdGl2ZSwgaXNEYXRlLCBpc0Z1bmN0aW9uLCBpc0dsb2JhbGx5QWxsb3dlZCwgaXNHbG9iYWxseVdoaXRlbGlzdGVkLCBpc0hUTUxUYWcsIGlzSW50ZWdlcktleSwgaXNLbm93bkh0bWxBdHRyLCBpc0tub3duTWF0aE1MQXR0ciwgaXNLbm93blN2Z0F0dHIsIGlzTWFwLCBpc01hdGhNTFRhZywgaXNNb2RlbExpc3RlbmVyLCBpc09iamVjdCwgaXNPbiwgaXNQbGFpbk9iamVjdCwgaXNQcm9taXNlLCBpc1JlZ0V4cCwgaXNSZW5kZXJhYmxlQXR0clZhbHVlLCBpc1Jlc2VydmVkUHJvcCwgaXNTU1JTYWZlQXR0ck5hbWUsIGlzU1ZHVGFnLCBpc1NldCwgaXNTcGVjaWFsQm9vbGVhbkF0dHIsIGlzU3RyaW5nLCBpc1N5bWJvbCwgaXNWb2lkVGFnLCBsb29zZUVxdWFsLCBsb29zZUluZGV4T2YsIGxvb3NlVG9OdW1iZXIsIG1ha2VNYXAsIG5vcm1hbGl6ZUNsYXNzLCBub3JtYWxpemVQcm9wcywgbm9ybWFsaXplU3R5bGUsIG9iamVjdFRvU3RyaW5nLCBwYXJzZVN0cmluZ1N0eWxlLCBwcm9wc1RvQXR0ck1hcCwgcmVtb3ZlLCBzbG90RmxhZ3NUZXh0LCBzdHJpbmdpZnlTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXksIHRvTnVtYmVyLCB0b1Jhd1R5cGUsIHRvVHlwZVN0cmluZyB9O1xuIiwiLyoqXG4qIEB2dWUvcmVhY3Rpdml0eSB2My41LjEzXG4qIChjKSAyMDE4LXByZXNlbnQgWXV4aSAoRXZhbikgWW91IGFuZCBWdWUgY29udHJpYnV0b3JzXG4qIEBsaWNlbnNlIE1JVFxuKiovXG5pbXBvcnQgeyBoYXNDaGFuZ2VkLCBleHRlbmQsIGlzQXJyYXksIGlzSW50ZWdlcktleSwgaXNTeW1ib2wsIGlzTWFwLCBoYXNPd24sIGlzT2JqZWN0LCBtYWtlTWFwLCB0b1Jhd1R5cGUsIGNhcGl0YWxpemUsIGRlZiwgaXNGdW5jdGlvbiwgRU1QVFlfT0JKLCBpc1NldCwgaXNQbGFpbk9iamVjdCwgTk9PUCwgcmVtb3ZlIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5mdW5jdGlvbiB3YXJuKG1zZywgLi4uYXJncykge1xuICBjb25zb2xlLndhcm4oYFtWdWUgd2Fybl0gJHttc2d9YCwgLi4uYXJncyk7XG59XG5cbmxldCBhY3RpdmVFZmZlY3RTY29wZTtcbmNsYXNzIEVmZmVjdFNjb3BlIHtcbiAgY29uc3RydWN0b3IoZGV0YWNoZWQgPSBmYWxzZSkge1xuICAgIHRoaXMuZGV0YWNoZWQgPSBkZXRhY2hlZDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLl9hY3RpdmUgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuZWZmZWN0cyA9IFtdO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuY2xlYW51cHMgPSBbXTtcbiAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMucGFyZW50ID0gYWN0aXZlRWZmZWN0U2NvcGU7XG4gICAgaWYgKCFkZXRhY2hlZCAmJiBhY3RpdmVFZmZlY3RTY29wZSkge1xuICAgICAgdGhpcy5pbmRleCA9IChhY3RpdmVFZmZlY3RTY29wZS5zY29wZXMgfHwgKGFjdGl2ZUVmZmVjdFNjb3BlLnNjb3BlcyA9IFtdKSkucHVzaChcbiAgICAgICAgdGhpc1xuICAgICAgKSAtIDE7XG4gICAgfVxuICB9XG4gIGdldCBhY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGl2ZTtcbiAgfVxuICBwYXVzZSgpIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlKSB7XG4gICAgICB0aGlzLl9pc1BhdXNlZCA9IHRydWU7XG4gICAgICBsZXQgaSwgbDtcbiAgICAgIGlmICh0aGlzLnNjb3Blcykge1xuICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5zY29wZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5zY29wZXNbaV0ucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuZWZmZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5lZmZlY3RzW2ldLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXN1bWVzIHRoZSBlZmZlY3Qgc2NvcGUsIGluY2x1ZGluZyBhbGwgY2hpbGQgc2NvcGVzIGFuZCBlZmZlY3RzLlxuICAgKi9cbiAgcmVzdW1lKCkge1xuICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgIGlmICh0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgaSwgbDtcbiAgICAgICAgaWYgKHRoaXMuc2NvcGVzKSB7XG4gICAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuc2NvcGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5zY29wZXNbaV0ucmVzdW1lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmVmZmVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5lZmZlY3RzW2ldLnJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJ1bihmbikge1xuICAgIGlmICh0aGlzLl9hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRFZmZlY3RTY29wZSA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gY3VycmVudEVmZmVjdFNjb3BlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybihgY2Fubm90IHJ1biBhbiBpbmFjdGl2ZSBlZmZlY3Qgc2NvcGUuYCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgb24oKSB7XG4gICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgb2ZmKCkge1xuICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gdGhpcy5wYXJlbnQ7XG4gIH1cbiAgc3RvcChmcm9tUGFyZW50KSB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgdGhpcy5fYWN0aXZlID0gZmFsc2U7XG4gICAgICBsZXQgaSwgbDtcbiAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmVmZmVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMuZWZmZWN0c1tpXS5zdG9wKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmVmZmVjdHMubGVuZ3RoID0gMDtcbiAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNsZWFudXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLmNsZWFudXBzW2ldKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNsZWFudXBzLmxlbmd0aCA9IDA7XG4gICAgICBpZiAodGhpcy5zY29wZXMpIHtcbiAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuc2NvcGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHRoaXMuc2NvcGVzW2ldLnN0b3AodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY29wZXMubGVuZ3RoID0gMDtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5kZXRhY2hlZCAmJiB0aGlzLnBhcmVudCAmJiAhZnJvbVBhcmVudCkge1xuICAgICAgICBjb25zdCBsYXN0ID0gdGhpcy5wYXJlbnQuc2NvcGVzLnBvcCgpO1xuICAgICAgICBpZiAobGFzdCAmJiBsYXN0ICE9PSB0aGlzKSB7XG4gICAgICAgICAgdGhpcy5wYXJlbnQuc2NvcGVzW3RoaXMuaW5kZXhdID0gbGFzdDtcbiAgICAgICAgICBsYXN0LmluZGV4ID0gdGhpcy5pbmRleDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5wYXJlbnQgPSB2b2lkIDA7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBlZmZlY3RTY29wZShkZXRhY2hlZCkge1xuICByZXR1cm4gbmV3IEVmZmVjdFNjb3BlKGRldGFjaGVkKTtcbn1cbmZ1bmN0aW9uIGdldEN1cnJlbnRTY29wZSgpIHtcbiAgcmV0dXJuIGFjdGl2ZUVmZmVjdFNjb3BlO1xufVxuZnVuY3Rpb24gb25TY29wZURpc3Bvc2UoZm4sIGZhaWxTaWxlbnRseSA9IGZhbHNlKSB7XG4gIGlmIChhY3RpdmVFZmZlY3RTY29wZSkge1xuICAgIGFjdGl2ZUVmZmVjdFNjb3BlLmNsZWFudXBzLnB1c2goZm4pO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWZhaWxTaWxlbnRseSkge1xuICAgIHdhcm4oXG4gICAgICBgb25TY29wZURpc3Bvc2UoKSBpcyBjYWxsZWQgd2hlbiB0aGVyZSBpcyBubyBhY3RpdmUgZWZmZWN0IHNjb3BlIHRvIGJlIGFzc29jaWF0ZWQgd2l0aC5gXG4gICAgKTtcbiAgfVxufVxuXG5sZXQgYWN0aXZlU3ViO1xuY29uc3QgRWZmZWN0RmxhZ3MgPSB7XG4gIFwiQUNUSVZFXCI6IDEsXG4gIFwiMVwiOiBcIkFDVElWRVwiLFxuICBcIlJVTk5JTkdcIjogMixcbiAgXCIyXCI6IFwiUlVOTklOR1wiLFxuICBcIlRSQUNLSU5HXCI6IDQsXG4gIFwiNFwiOiBcIlRSQUNLSU5HXCIsXG4gIFwiTk9USUZJRURcIjogOCxcbiAgXCI4XCI6IFwiTk9USUZJRURcIixcbiAgXCJESVJUWVwiOiAxNixcbiAgXCIxNlwiOiBcIkRJUlRZXCIsXG4gIFwiQUxMT1dfUkVDVVJTRVwiOiAzMixcbiAgXCIzMlwiOiBcIkFMTE9XX1JFQ1VSU0VcIixcbiAgXCJQQVVTRURcIjogNjQsXG4gIFwiNjRcIjogXCJQQVVTRURcIlxufTtcbmNvbnN0IHBhdXNlZFF1ZXVlRWZmZWN0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuY2xhc3MgUmVhY3RpdmVFZmZlY3Qge1xuICBjb25zdHJ1Y3Rvcihmbikge1xuICAgIHRoaXMuZm4gPSBmbjtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmRlcHMgPSB2b2lkIDA7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5kZXBzVGFpbCA9IHZvaWQgMDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmZsYWdzID0gMSB8IDQ7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuY2xlYW51cCA9IHZvaWQgMDtcbiAgICB0aGlzLnNjaGVkdWxlciA9IHZvaWQgMDtcbiAgICBpZiAoYWN0aXZlRWZmZWN0U2NvcGUgJiYgYWN0aXZlRWZmZWN0U2NvcGUuYWN0aXZlKSB7XG4gICAgICBhY3RpdmVFZmZlY3RTY29wZS5lZmZlY3RzLnB1c2godGhpcyk7XG4gICAgfVxuICB9XG4gIHBhdXNlKCkge1xuICAgIHRoaXMuZmxhZ3MgfD0gNjQ7XG4gIH1cbiAgcmVzdW1lKCkge1xuICAgIGlmICh0aGlzLmZsYWdzICYgNjQpIHtcbiAgICAgIHRoaXMuZmxhZ3MgJj0gfjY0O1xuICAgICAgaWYgKHBhdXNlZFF1ZXVlRWZmZWN0cy5oYXModGhpcykpIHtcbiAgICAgICAgcGF1c2VkUXVldWVFZmZlY3RzLmRlbGV0ZSh0aGlzKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG5vdGlmeSgpIHtcbiAgICBpZiAodGhpcy5mbGFncyAmIDIgJiYgISh0aGlzLmZsYWdzICYgMzIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghKHRoaXMuZmxhZ3MgJiA4KSkge1xuICAgICAgYmF0Y2godGhpcyk7XG4gICAgfVxuICB9XG4gIHJ1bigpIHtcbiAgICBpZiAoISh0aGlzLmZsYWdzICYgMSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmZuKCk7XG4gICAgfVxuICAgIHRoaXMuZmxhZ3MgfD0gMjtcbiAgICBjbGVhbnVwRWZmZWN0KHRoaXMpO1xuICAgIHByZXBhcmVEZXBzKHRoaXMpO1xuICAgIGNvbnN0IHByZXZFZmZlY3QgPSBhY3RpdmVTdWI7XG4gICAgY29uc3QgcHJldlNob3VsZFRyYWNrID0gc2hvdWxkVHJhY2s7XG4gICAgYWN0aXZlU3ViID0gdGhpcztcbiAgICBzaG91bGRUcmFjayA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLmZuKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGFjdGl2ZVN1YiAhPT0gdGhpcykge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIFwiQWN0aXZlIGVmZmVjdCB3YXMgbm90IHJlc3RvcmVkIGNvcnJlY3RseSAtIHRoaXMgaXMgbGlrZWx5IGEgVnVlIGludGVybmFsIGJ1Zy5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY2xlYW51cERlcHModGhpcyk7XG4gICAgICBhY3RpdmVTdWIgPSBwcmV2RWZmZWN0O1xuICAgICAgc2hvdWxkVHJhY2sgPSBwcmV2U2hvdWxkVHJhY2s7XG4gICAgICB0aGlzLmZsYWdzICY9IH4yO1xuICAgIH1cbiAgfVxuICBzdG9wKCkge1xuICAgIGlmICh0aGlzLmZsYWdzICYgMSkge1xuICAgICAgZm9yIChsZXQgbGluayA9IHRoaXMuZGVwczsgbGluazsgbGluayA9IGxpbmsubmV4dERlcCkge1xuICAgICAgICByZW1vdmVTdWIobGluayk7XG4gICAgICB9XG4gICAgICB0aGlzLmRlcHMgPSB0aGlzLmRlcHNUYWlsID0gdm9pZCAwO1xuICAgICAgY2xlYW51cEVmZmVjdCh0aGlzKTtcbiAgICAgIHRoaXMub25TdG9wICYmIHRoaXMub25TdG9wKCk7XG4gICAgICB0aGlzLmZsYWdzICY9IH4xO1xuICAgIH1cbiAgfVxuICB0cmlnZ2VyKCkge1xuICAgIGlmICh0aGlzLmZsYWdzICYgNjQpIHtcbiAgICAgIHBhdXNlZFF1ZXVlRWZmZWN0cy5hZGQodGhpcyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNjaGVkdWxlcikge1xuICAgICAgdGhpcy5zY2hlZHVsZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ydW5JZkRpcnR5KCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHJ1bklmRGlydHkoKSB7XG4gICAgaWYgKGlzRGlydHkodGhpcykpIHtcbiAgICAgIHRoaXMucnVuKCk7XG4gICAgfVxuICB9XG4gIGdldCBkaXJ0eSgpIHtcbiAgICByZXR1cm4gaXNEaXJ0eSh0aGlzKTtcbiAgfVxufVxubGV0IGJhdGNoRGVwdGggPSAwO1xubGV0IGJhdGNoZWRTdWI7XG5sZXQgYmF0Y2hlZENvbXB1dGVkO1xuZnVuY3Rpb24gYmF0Y2goc3ViLCBpc0NvbXB1dGVkID0gZmFsc2UpIHtcbiAgc3ViLmZsYWdzIHw9IDg7XG4gIGlmIChpc0NvbXB1dGVkKSB7XG4gICAgc3ViLm5leHQgPSBiYXRjaGVkQ29tcHV0ZWQ7XG4gICAgYmF0Y2hlZENvbXB1dGVkID0gc3ViO1xuICAgIHJldHVybjtcbiAgfVxuICBzdWIubmV4dCA9IGJhdGNoZWRTdWI7XG4gIGJhdGNoZWRTdWIgPSBzdWI7XG59XG5mdW5jdGlvbiBzdGFydEJhdGNoKCkge1xuICBiYXRjaERlcHRoKys7XG59XG5mdW5jdGlvbiBlbmRCYXRjaCgpIHtcbiAgaWYgKC0tYmF0Y2hEZXB0aCA+IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGJhdGNoZWRDb21wdXRlZCkge1xuICAgIGxldCBlID0gYmF0Y2hlZENvbXB1dGVkO1xuICAgIGJhdGNoZWRDb21wdXRlZCA9IHZvaWQgMDtcbiAgICB3aGlsZSAoZSkge1xuICAgICAgY29uc3QgbmV4dCA9IGUubmV4dDtcbiAgICAgIGUubmV4dCA9IHZvaWQgMDtcbiAgICAgIGUuZmxhZ3MgJj0gfjg7XG4gICAgICBlID0gbmV4dDtcbiAgICB9XG4gIH1cbiAgbGV0IGVycm9yO1xuICB3aGlsZSAoYmF0Y2hlZFN1Yikge1xuICAgIGxldCBlID0gYmF0Y2hlZFN1YjtcbiAgICBiYXRjaGVkU3ViID0gdm9pZCAwO1xuICAgIHdoaWxlIChlKSB7XG4gICAgICBjb25zdCBuZXh0ID0gZS5uZXh0O1xuICAgICAgZS5uZXh0ID0gdm9pZCAwO1xuICAgICAgZS5mbGFncyAmPSB+ODtcbiAgICAgIGlmIChlLmZsYWdzICYgMSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIDtcbiAgICAgICAgICBlLnRyaWdnZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKCFlcnJvcikgZXJyb3IgPSBlcnI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGUgPSBuZXh0O1xuICAgIH1cbiAgfVxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xufVxuZnVuY3Rpb24gcHJlcGFyZURlcHMoc3ViKSB7XG4gIGZvciAobGV0IGxpbmsgPSBzdWIuZGVwczsgbGluazsgbGluayA9IGxpbmsubmV4dERlcCkge1xuICAgIGxpbmsudmVyc2lvbiA9IC0xO1xuICAgIGxpbmsucHJldkFjdGl2ZUxpbmsgPSBsaW5rLmRlcC5hY3RpdmVMaW5rO1xuICAgIGxpbmsuZGVwLmFjdGl2ZUxpbmsgPSBsaW5rO1xuICB9XG59XG5mdW5jdGlvbiBjbGVhbnVwRGVwcyhzdWIpIHtcbiAgbGV0IGhlYWQ7XG4gIGxldCB0YWlsID0gc3ViLmRlcHNUYWlsO1xuICBsZXQgbGluayA9IHRhaWw7XG4gIHdoaWxlIChsaW5rKSB7XG4gICAgY29uc3QgcHJldiA9IGxpbmsucHJldkRlcDtcbiAgICBpZiAobGluay52ZXJzaW9uID09PSAtMSkge1xuICAgICAgaWYgKGxpbmsgPT09IHRhaWwpIHRhaWwgPSBwcmV2O1xuICAgICAgcmVtb3ZlU3ViKGxpbmspO1xuICAgICAgcmVtb3ZlRGVwKGxpbmspO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFkID0gbGluaztcbiAgICB9XG4gICAgbGluay5kZXAuYWN0aXZlTGluayA9IGxpbmsucHJldkFjdGl2ZUxpbms7XG4gICAgbGluay5wcmV2QWN0aXZlTGluayA9IHZvaWQgMDtcbiAgICBsaW5rID0gcHJldjtcbiAgfVxuICBzdWIuZGVwcyA9IGhlYWQ7XG4gIHN1Yi5kZXBzVGFpbCA9IHRhaWw7XG59XG5mdW5jdGlvbiBpc0RpcnR5KHN1Yikge1xuICBmb3IgKGxldCBsaW5rID0gc3ViLmRlcHM7IGxpbms7IGxpbmsgPSBsaW5rLm5leHREZXApIHtcbiAgICBpZiAobGluay5kZXAudmVyc2lvbiAhPT0gbGluay52ZXJzaW9uIHx8IGxpbmsuZGVwLmNvbXB1dGVkICYmIChyZWZyZXNoQ29tcHV0ZWQobGluay5kZXAuY29tcHV0ZWQpIHx8IGxpbmsuZGVwLnZlcnNpb24gIT09IGxpbmsudmVyc2lvbikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBpZiAoc3ViLl9kaXJ0eSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHJlZnJlc2hDb21wdXRlZChjb21wdXRlZCkge1xuICBpZiAoY29tcHV0ZWQuZmxhZ3MgJiA0ICYmICEoY29tcHV0ZWQuZmxhZ3MgJiAxNikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29tcHV0ZWQuZmxhZ3MgJj0gfjE2O1xuICBpZiAoY29tcHV0ZWQuZ2xvYmFsVmVyc2lvbiA9PT0gZ2xvYmFsVmVyc2lvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb21wdXRlZC5nbG9iYWxWZXJzaW9uID0gZ2xvYmFsVmVyc2lvbjtcbiAgY29uc3QgZGVwID0gY29tcHV0ZWQuZGVwO1xuICBjb21wdXRlZC5mbGFncyB8PSAyO1xuICBpZiAoZGVwLnZlcnNpb24gPiAwICYmICFjb21wdXRlZC5pc1NTUiAmJiBjb21wdXRlZC5kZXBzICYmICFpc0RpcnR5KGNvbXB1dGVkKSkge1xuICAgIGNvbXB1dGVkLmZsYWdzICY9IH4yO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBwcmV2U3ViID0gYWN0aXZlU3ViO1xuICBjb25zdCBwcmV2U2hvdWxkVHJhY2sgPSBzaG91bGRUcmFjaztcbiAgYWN0aXZlU3ViID0gY29tcHV0ZWQ7XG4gIHNob3VsZFRyYWNrID0gdHJ1ZTtcbiAgdHJ5IHtcbiAgICBwcmVwYXJlRGVwcyhjb21wdXRlZCk7XG4gICAgY29uc3QgdmFsdWUgPSBjb21wdXRlZC5mbihjb21wdXRlZC5fdmFsdWUpO1xuICAgIGlmIChkZXAudmVyc2lvbiA9PT0gMCB8fCBoYXNDaGFuZ2VkKHZhbHVlLCBjb21wdXRlZC5fdmFsdWUpKSB7XG4gICAgICBjb21wdXRlZC5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgIGRlcC52ZXJzaW9uKys7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBkZXAudmVyc2lvbisrO1xuICAgIHRocm93IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICBhY3RpdmVTdWIgPSBwcmV2U3ViO1xuICAgIHNob3VsZFRyYWNrID0gcHJldlNob3VsZFRyYWNrO1xuICAgIGNsZWFudXBEZXBzKGNvbXB1dGVkKTtcbiAgICBjb21wdXRlZC5mbGFncyAmPSB+MjtcbiAgfVxufVxuZnVuY3Rpb24gcmVtb3ZlU3ViKGxpbmssIHNvZnQgPSBmYWxzZSkge1xuICBjb25zdCB7IGRlcCwgcHJldlN1YiwgbmV4dFN1YiB9ID0gbGluaztcbiAgaWYgKHByZXZTdWIpIHtcbiAgICBwcmV2U3ViLm5leHRTdWIgPSBuZXh0U3ViO1xuICAgIGxpbmsucHJldlN1YiA9IHZvaWQgMDtcbiAgfVxuICBpZiAobmV4dFN1Yikge1xuICAgIG5leHRTdWIucHJldlN1YiA9IHByZXZTdWI7XG4gICAgbGluay5uZXh0U3ViID0gdm9pZCAwO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGRlcC5zdWJzSGVhZCA9PT0gbGluaykge1xuICAgIGRlcC5zdWJzSGVhZCA9IG5leHRTdWI7XG4gIH1cbiAgaWYgKGRlcC5zdWJzID09PSBsaW5rKSB7XG4gICAgZGVwLnN1YnMgPSBwcmV2U3ViO1xuICAgIGlmICghcHJldlN1YiAmJiBkZXAuY29tcHV0ZWQpIHtcbiAgICAgIGRlcC5jb21wdXRlZC5mbGFncyAmPSB+NDtcbiAgICAgIGZvciAobGV0IGwgPSBkZXAuY29tcHV0ZWQuZGVwczsgbDsgbCA9IGwubmV4dERlcCkge1xuICAgICAgICByZW1vdmVTdWIobCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmICghc29mdCAmJiAhLS1kZXAuc2MgJiYgZGVwLm1hcCkge1xuICAgIGRlcC5tYXAuZGVsZXRlKGRlcC5rZXkpO1xuICB9XG59XG5mdW5jdGlvbiByZW1vdmVEZXAobGluaykge1xuICBjb25zdCB7IHByZXZEZXAsIG5leHREZXAgfSA9IGxpbms7XG4gIGlmIChwcmV2RGVwKSB7XG4gICAgcHJldkRlcC5uZXh0RGVwID0gbmV4dERlcDtcbiAgICBsaW5rLnByZXZEZXAgPSB2b2lkIDA7XG4gIH1cbiAgaWYgKG5leHREZXApIHtcbiAgICBuZXh0RGVwLnByZXZEZXAgPSBwcmV2RGVwO1xuICAgIGxpbmsubmV4dERlcCA9IHZvaWQgMDtcbiAgfVxufVxuZnVuY3Rpb24gZWZmZWN0KGZuLCBvcHRpb25zKSB7XG4gIGlmIChmbi5lZmZlY3QgaW5zdGFuY2VvZiBSZWFjdGl2ZUVmZmVjdCkge1xuICAgIGZuID0gZm4uZWZmZWN0LmZuO1xuICB9XG4gIGNvbnN0IGUgPSBuZXcgUmVhY3RpdmVFZmZlY3QoZm4pO1xuICBpZiAob3B0aW9ucykge1xuICAgIGV4dGVuZChlLCBvcHRpb25zKTtcbiAgfVxuICB0cnkge1xuICAgIGUucnVuKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGUuc3RvcCgpO1xuICAgIHRocm93IGVycjtcbiAgfVxuICBjb25zdCBydW5uZXIgPSBlLnJ1bi5iaW5kKGUpO1xuICBydW5uZXIuZWZmZWN0ID0gZTtcbiAgcmV0dXJuIHJ1bm5lcjtcbn1cbmZ1bmN0aW9uIHN0b3AocnVubmVyKSB7XG4gIHJ1bm5lci5lZmZlY3Quc3RvcCgpO1xufVxubGV0IHNob3VsZFRyYWNrID0gdHJ1ZTtcbmNvbnN0IHRyYWNrU3RhY2sgPSBbXTtcbmZ1bmN0aW9uIHBhdXNlVHJhY2tpbmcoKSB7XG4gIHRyYWNrU3RhY2sucHVzaChzaG91bGRUcmFjayk7XG4gIHNob3VsZFRyYWNrID0gZmFsc2U7XG59XG5mdW5jdGlvbiBlbmFibGVUcmFja2luZygpIHtcbiAgdHJhY2tTdGFjay5wdXNoKHNob3VsZFRyYWNrKTtcbiAgc2hvdWxkVHJhY2sgPSB0cnVlO1xufVxuZnVuY3Rpb24gcmVzZXRUcmFja2luZygpIHtcbiAgY29uc3QgbGFzdCA9IHRyYWNrU3RhY2sucG9wKCk7XG4gIHNob3VsZFRyYWNrID0gbGFzdCA9PT0gdm9pZCAwID8gdHJ1ZSA6IGxhc3Q7XG59XG5mdW5jdGlvbiBvbkVmZmVjdENsZWFudXAoZm4sIGZhaWxTaWxlbnRseSA9IGZhbHNlKSB7XG4gIGlmIChhY3RpdmVTdWIgaW5zdGFuY2VvZiBSZWFjdGl2ZUVmZmVjdCkge1xuICAgIGFjdGl2ZVN1Yi5jbGVhbnVwID0gZm47XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhZmFpbFNpbGVudGx5KSB7XG4gICAgd2FybihcbiAgICAgIGBvbkVmZmVjdENsZWFudXAoKSB3YXMgY2FsbGVkIHdoZW4gdGhlcmUgd2FzIG5vIGFjdGl2ZSBlZmZlY3QgdG8gYXNzb2NpYXRlIHdpdGguYFxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNsZWFudXBFZmZlY3QoZSkge1xuICBjb25zdCB7IGNsZWFudXAgfSA9IGU7XG4gIGUuY2xlYW51cCA9IHZvaWQgMDtcbiAgaWYgKGNsZWFudXApIHtcbiAgICBjb25zdCBwcmV2U3ViID0gYWN0aXZlU3ViO1xuICAgIGFjdGl2ZVN1YiA9IHZvaWQgMDtcbiAgICB0cnkge1xuICAgICAgY2xlYW51cCgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBhY3RpdmVTdWIgPSBwcmV2U3ViO1xuICAgIH1cbiAgfVxufVxuXG5sZXQgZ2xvYmFsVmVyc2lvbiA9IDA7XG5jbGFzcyBMaW5rIHtcbiAgY29uc3RydWN0b3Ioc3ViLCBkZXApIHtcbiAgICB0aGlzLnN1YiA9IHN1YjtcbiAgICB0aGlzLmRlcCA9IGRlcDtcbiAgICB0aGlzLnZlcnNpb24gPSBkZXAudmVyc2lvbjtcbiAgICB0aGlzLm5leHREZXAgPSB0aGlzLnByZXZEZXAgPSB0aGlzLm5leHRTdWIgPSB0aGlzLnByZXZTdWIgPSB0aGlzLnByZXZBY3RpdmVMaW5rID0gdm9pZCAwO1xuICB9XG59XG5jbGFzcyBEZXAge1xuICBjb25zdHJ1Y3Rvcihjb21wdXRlZCkge1xuICAgIHRoaXMuY29tcHV0ZWQgPSBjb21wdXRlZDtcbiAgICB0aGlzLnZlcnNpb24gPSAwO1xuICAgIC8qKlxuICAgICAqIExpbmsgYmV0d2VlbiB0aGlzIGRlcCBhbmQgdGhlIGN1cnJlbnQgYWN0aXZlIGVmZmVjdFxuICAgICAqL1xuICAgIHRoaXMuYWN0aXZlTGluayA9IHZvaWQgMDtcbiAgICAvKipcbiAgICAgKiBEb3VibHkgbGlua2VkIGxpc3QgcmVwcmVzZW50aW5nIHRoZSBzdWJzY3JpYmluZyBlZmZlY3RzICh0YWlsKVxuICAgICAqL1xuICAgIHRoaXMuc3VicyA9IHZvaWQgMDtcbiAgICAvKipcbiAgICAgKiBGb3Igb2JqZWN0IHByb3BlcnR5IGRlcHMgY2xlYW51cFxuICAgICAqL1xuICAgIHRoaXMubWFwID0gdm9pZCAwO1xuICAgIHRoaXMua2V5ID0gdm9pZCAwO1xuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXIgY291bnRlclxuICAgICAqL1xuICAgIHRoaXMuc2MgPSAwO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB0aGlzLnN1YnNIZWFkID0gdm9pZCAwO1xuICAgIH1cbiAgfVxuICB0cmFjayhkZWJ1Z0luZm8pIHtcbiAgICBpZiAoIWFjdGl2ZVN1YiB8fCAhc2hvdWxkVHJhY2sgfHwgYWN0aXZlU3ViID09PSB0aGlzLmNvbXB1dGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBsaW5rID0gdGhpcy5hY3RpdmVMaW5rO1xuICAgIGlmIChsaW5rID09PSB2b2lkIDAgfHwgbGluay5zdWIgIT09IGFjdGl2ZVN1Yikge1xuICAgICAgbGluayA9IHRoaXMuYWN0aXZlTGluayA9IG5ldyBMaW5rKGFjdGl2ZVN1YiwgdGhpcyk7XG4gICAgICBpZiAoIWFjdGl2ZVN1Yi5kZXBzKSB7XG4gICAgICAgIGFjdGl2ZVN1Yi5kZXBzID0gYWN0aXZlU3ViLmRlcHNUYWlsID0gbGluaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmsucHJldkRlcCA9IGFjdGl2ZVN1Yi5kZXBzVGFpbDtcbiAgICAgICAgYWN0aXZlU3ViLmRlcHNUYWlsLm5leHREZXAgPSBsaW5rO1xuICAgICAgICBhY3RpdmVTdWIuZGVwc1RhaWwgPSBsaW5rO1xuICAgICAgfVxuICAgICAgYWRkU3ViKGxpbmspO1xuICAgIH0gZWxzZSBpZiAobGluay52ZXJzaW9uID09PSAtMSkge1xuICAgICAgbGluay52ZXJzaW9uID0gdGhpcy52ZXJzaW9uO1xuICAgICAgaWYgKGxpbmsubmV4dERlcCkge1xuICAgICAgICBjb25zdCBuZXh0ID0gbGluay5uZXh0RGVwO1xuICAgICAgICBuZXh0LnByZXZEZXAgPSBsaW5rLnByZXZEZXA7XG4gICAgICAgIGlmIChsaW5rLnByZXZEZXApIHtcbiAgICAgICAgICBsaW5rLnByZXZEZXAubmV4dERlcCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgbGluay5wcmV2RGVwID0gYWN0aXZlU3ViLmRlcHNUYWlsO1xuICAgICAgICBsaW5rLm5leHREZXAgPSB2b2lkIDA7XG4gICAgICAgIGFjdGl2ZVN1Yi5kZXBzVGFpbC5uZXh0RGVwID0gbGluaztcbiAgICAgICAgYWN0aXZlU3ViLmRlcHNUYWlsID0gbGluaztcbiAgICAgICAgaWYgKGFjdGl2ZVN1Yi5kZXBzID09PSBsaW5rKSB7XG4gICAgICAgICAgYWN0aXZlU3ViLmRlcHMgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGFjdGl2ZVN1Yi5vblRyYWNrKSB7XG4gICAgICBhY3RpdmVTdWIub25UcmFjayhcbiAgICAgICAgZXh0ZW5kKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVmZmVjdDogYWN0aXZlU3ViXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWJ1Z0luZm9cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbms7XG4gIH1cbiAgdHJpZ2dlcihkZWJ1Z0luZm8pIHtcbiAgICB0aGlzLnZlcnNpb24rKztcbiAgICBnbG9iYWxWZXJzaW9uKys7XG4gICAgdGhpcy5ub3RpZnkoZGVidWdJbmZvKTtcbiAgfVxuICBub3RpZnkoZGVidWdJbmZvKSB7XG4gICAgc3RhcnRCYXRjaCgpO1xuICAgIHRyeSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBmb3IgKGxldCBoZWFkID0gdGhpcy5zdWJzSGVhZDsgaGVhZDsgaGVhZCA9IGhlYWQubmV4dFN1Yikge1xuICAgICAgICAgIGlmIChoZWFkLnN1Yi5vblRyaWdnZXIgJiYgIShoZWFkLnN1Yi5mbGFncyAmIDgpKSB7XG4gICAgICAgICAgICBoZWFkLnN1Yi5vblRyaWdnZXIoXG4gICAgICAgICAgICAgIGV4dGVuZChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBlZmZlY3Q6IGhlYWQuc3ViXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm9cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGxpbmsgPSB0aGlzLnN1YnM7IGxpbms7IGxpbmsgPSBsaW5rLnByZXZTdWIpIHtcbiAgICAgICAgaWYgKGxpbmsuc3ViLm5vdGlmeSgpKSB7XG4gICAgICAgICAgO1xuICAgICAgICAgIGxpbmsuc3ViLmRlcC5ub3RpZnkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBlbmRCYXRjaCgpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gYWRkU3ViKGxpbmspIHtcbiAgbGluay5kZXAuc2MrKztcbiAgaWYgKGxpbmsuc3ViLmZsYWdzICYgNCkge1xuICAgIGNvbnN0IGNvbXB1dGVkID0gbGluay5kZXAuY29tcHV0ZWQ7XG4gICAgaWYgKGNvbXB1dGVkICYmICFsaW5rLmRlcC5zdWJzKSB7XG4gICAgICBjb21wdXRlZC5mbGFncyB8PSA0IHwgMTY7XG4gICAgICBmb3IgKGxldCBsID0gY29tcHV0ZWQuZGVwczsgbDsgbCA9IGwubmV4dERlcCkge1xuICAgICAgICBhZGRTdWIobCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGN1cnJlbnRUYWlsID0gbGluay5kZXAuc3VicztcbiAgICBpZiAoY3VycmVudFRhaWwgIT09IGxpbmspIHtcbiAgICAgIGxpbmsucHJldlN1YiA9IGN1cnJlbnRUYWlsO1xuICAgICAgaWYgKGN1cnJlbnRUYWlsKSBjdXJyZW50VGFpbC5uZXh0U3ViID0gbGluaztcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbGluay5kZXAuc3Vic0hlYWQgPT09IHZvaWQgMCkge1xuICAgICAgbGluay5kZXAuc3Vic0hlYWQgPSBsaW5rO1xuICAgIH1cbiAgICBsaW5rLmRlcC5zdWJzID0gbGluaztcbiAgfVxufVxuY29uc3QgdGFyZ2V0TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBJVEVSQVRFX0tFWSA9IFN5bWJvbChcbiAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IFwiT2JqZWN0IGl0ZXJhdGVcIiA6IFwiXCJcbik7XG5jb25zdCBNQVBfS0VZX0lURVJBVEVfS0VZID0gU3ltYm9sKFxuICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gXCJNYXAga2V5cyBpdGVyYXRlXCIgOiBcIlwiXG4pO1xuY29uc3QgQVJSQVlfSVRFUkFURV9LRVkgPSBTeW1ib2woXG4gICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBcIkFycmF5IGl0ZXJhdGVcIiA6IFwiXCJcbik7XG5mdW5jdGlvbiB0cmFjayh0YXJnZXQsIHR5cGUsIGtleSkge1xuICBpZiAoc2hvdWxkVHJhY2sgJiYgYWN0aXZlU3ViKSB7XG4gICAgbGV0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gICAgaWYgKCFkZXBzTWFwKSB7XG4gICAgICB0YXJnZXRNYXAuc2V0KHRhcmdldCwgZGVwc01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpO1xuICAgIH1cbiAgICBsZXQgZGVwID0gZGVwc01hcC5nZXQoa2V5KTtcbiAgICBpZiAoIWRlcCkge1xuICAgICAgZGVwc01hcC5zZXQoa2V5LCBkZXAgPSBuZXcgRGVwKCkpO1xuICAgICAgZGVwLm1hcCA9IGRlcHNNYXA7XG4gICAgICBkZXAua2V5ID0ga2V5O1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgZGVwLnRyYWNrKHtcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICB0eXBlLFxuICAgICAgICBrZXlcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZXAudHJhY2soKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHRyaWdnZXIodGFyZ2V0LCB0eXBlLCBrZXksIG5ld1ZhbHVlLCBvbGRWYWx1ZSwgb2xkVGFyZ2V0KSB7XG4gIGNvbnN0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XG4gIGlmICghZGVwc01hcCkge1xuICAgIGdsb2JhbFZlcnNpb24rKztcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcnVuID0gKGRlcCkgPT4ge1xuICAgIGlmIChkZXApIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIGRlcC50cmlnZ2VyKHtcbiAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgICAgb2xkVmFsdWUsXG4gICAgICAgICAgb2xkVGFyZ2V0XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVwLnRyaWdnZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHN0YXJ0QmF0Y2goKTtcbiAgaWYgKHR5cGUgPT09IFwiY2xlYXJcIikge1xuICAgIGRlcHNNYXAuZm9yRWFjaChydW4pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHRhcmdldElzQXJyYXkgPSBpc0FycmF5KHRhcmdldCk7XG4gICAgY29uc3QgaXNBcnJheUluZGV4ID0gdGFyZ2V0SXNBcnJheSAmJiBpc0ludGVnZXJLZXkoa2V5KTtcbiAgICBpZiAodGFyZ2V0SXNBcnJheSAmJiBrZXkgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgIGNvbnN0IG5ld0xlbmd0aCA9IE51bWJlcihuZXdWYWx1ZSk7XG4gICAgICBkZXBzTWFwLmZvckVhY2goKGRlcCwga2V5MikgPT4ge1xuICAgICAgICBpZiAoa2V5MiA9PT0gXCJsZW5ndGhcIiB8fCBrZXkyID09PSBBUlJBWV9JVEVSQVRFX0tFWSB8fCAhaXNTeW1ib2woa2V5MikgJiYga2V5MiA+PSBuZXdMZW5ndGgpIHtcbiAgICAgICAgICBydW4oZGVwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChrZXkgIT09IHZvaWQgMCB8fCBkZXBzTWFwLmhhcyh2b2lkIDApKSB7XG4gICAgICAgIHJ1bihkZXBzTWFwLmdldChrZXkpKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0FycmF5SW5kZXgpIHtcbiAgICAgICAgcnVuKGRlcHNNYXAuZ2V0KEFSUkFZX0lURVJBVEVfS0VZKSk7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcImFkZFwiOlxuICAgICAgICAgIGlmICghdGFyZ2V0SXNBcnJheSkge1xuICAgICAgICAgICAgcnVuKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgICAgICBydW4oZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheUluZGV4KSB7XG4gICAgICAgICAgICBydW4oZGVwc01hcC5nZXQoXCJsZW5ndGhcIikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImRlbGV0ZVwiOlxuICAgICAgICAgIGlmICghdGFyZ2V0SXNBcnJheSkge1xuICAgICAgICAgICAgcnVuKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XG4gICAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xuICAgICAgICAgICAgICBydW4oZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNldFwiOlxuICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XG4gICAgICAgICAgICBydW4oZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGVuZEJhdGNoKCk7XG59XG5mdW5jdGlvbiBnZXREZXBGcm9tUmVhY3RpdmUob2JqZWN0LCBrZXkpIHtcbiAgY29uc3QgZGVwTWFwID0gdGFyZ2V0TWFwLmdldChvYmplY3QpO1xuICByZXR1cm4gZGVwTWFwICYmIGRlcE1hcC5nZXQoa2V5KTtcbn1cblxuZnVuY3Rpb24gcmVhY3RpdmVSZWFkQXJyYXkoYXJyYXkpIHtcbiAgY29uc3QgcmF3ID0gdG9SYXcoYXJyYXkpO1xuICBpZiAocmF3ID09PSBhcnJheSkgcmV0dXJuIHJhdztcbiAgdHJhY2socmF3LCBcIml0ZXJhdGVcIiwgQVJSQVlfSVRFUkFURV9LRVkpO1xuICByZXR1cm4gaXNTaGFsbG93KGFycmF5KSA/IHJhdyA6IHJhdy5tYXAodG9SZWFjdGl2ZSk7XG59XG5mdW5jdGlvbiBzaGFsbG93UmVhZEFycmF5KGFycikge1xuICB0cmFjayhhcnIgPSB0b1JhdyhhcnIpLCBcIml0ZXJhdGVcIiwgQVJSQVlfSVRFUkFURV9LRVkpO1xuICByZXR1cm4gYXJyO1xufVxuY29uc3QgYXJyYXlJbnN0cnVtZW50YXRpb25zID0ge1xuICBfX3Byb3RvX186IG51bGwsXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiBpdGVyYXRvcih0aGlzLCBTeW1ib2wuaXRlcmF0b3IsIHRvUmVhY3RpdmUpO1xuICB9LFxuICBjb25jYXQoLi4uYXJncykge1xuICAgIHJldHVybiByZWFjdGl2ZVJlYWRBcnJheSh0aGlzKS5jb25jYXQoXG4gICAgICAuLi5hcmdzLm1hcCgoeCkgPT4gaXNBcnJheSh4KSA/IHJlYWN0aXZlUmVhZEFycmF5KHgpIDogeClcbiAgICApO1xuICB9LFxuICBlbnRyaWVzKCkge1xuICAgIHJldHVybiBpdGVyYXRvcih0aGlzLCBcImVudHJpZXNcIiwgKHZhbHVlKSA9PiB7XG4gICAgICB2YWx1ZVsxXSA9IHRvUmVhY3RpdmUodmFsdWVbMV0pO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0pO1xuICB9LFxuICBldmVyeShmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseSh0aGlzLCBcImV2ZXJ5XCIsIGZuLCB0aGlzQXJnLCB2b2lkIDAsIGFyZ3VtZW50cyk7XG4gIH0sXG4gIGZpbHRlcihmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseSh0aGlzLCBcImZpbHRlclwiLCBmbiwgdGhpc0FyZywgKHYpID0+IHYubWFwKHRvUmVhY3RpdmUpLCBhcmd1bWVudHMpO1xuICB9LFxuICBmaW5kKGZuLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGFwcGx5KHRoaXMsIFwiZmluZFwiLCBmbiwgdGhpc0FyZywgdG9SZWFjdGl2ZSwgYXJndW1lbnRzKTtcbiAgfSxcbiAgZmluZEluZGV4KGZuLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGFwcGx5KHRoaXMsIFwiZmluZEluZGV4XCIsIGZuLCB0aGlzQXJnLCB2b2lkIDAsIGFyZ3VtZW50cyk7XG4gIH0sXG4gIGZpbmRMYXN0KGZuLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGFwcGx5KHRoaXMsIFwiZmluZExhc3RcIiwgZm4sIHRoaXNBcmcsIHRvUmVhY3RpdmUsIGFyZ3VtZW50cyk7XG4gIH0sXG4gIGZpbmRMYXN0SW5kZXgoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gYXBwbHkodGhpcywgXCJmaW5kTGFzdEluZGV4XCIsIGZuLCB0aGlzQXJnLCB2b2lkIDAsIGFyZ3VtZW50cyk7XG4gIH0sXG4gIC8vIGZsYXQsIGZsYXRNYXAgY291bGQgYmVuZWZpdCBmcm9tIEFSUkFZX0lURVJBVEUgYnV0IGFyZSBub3Qgc3RyYWlnaHQtZm9yd2FyZCB0byBpbXBsZW1lbnRcbiAgZm9yRWFjaChmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseSh0aGlzLCBcImZvckVhY2hcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgaW5jbHVkZXMoLi4uYXJncykge1xuICAgIHJldHVybiBzZWFyY2hQcm94eSh0aGlzLCBcImluY2x1ZGVzXCIsIGFyZ3MpO1xuICB9LFxuICBpbmRleE9mKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gc2VhcmNoUHJveHkodGhpcywgXCJpbmRleE9mXCIsIGFyZ3MpO1xuICB9LFxuICBqb2luKHNlcGFyYXRvcikge1xuICAgIHJldHVybiByZWFjdGl2ZVJlYWRBcnJheSh0aGlzKS5qb2luKHNlcGFyYXRvcik7XG4gIH0sXG4gIC8vIGtleXMoKSBpdGVyYXRvciBvbmx5IHJlYWRzIGBsZW5ndGhgLCBubyBvcHRpbWlzYXRpb24gcmVxdWlyZWRcbiAgbGFzdEluZGV4T2YoLi4uYXJncykge1xuICAgIHJldHVybiBzZWFyY2hQcm94eSh0aGlzLCBcImxhc3RJbmRleE9mXCIsIGFyZ3MpO1xuICB9LFxuICBtYXAoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gYXBwbHkodGhpcywgXCJtYXBcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgcG9wKCkge1xuICAgIHJldHVybiBub1RyYWNraW5nKHRoaXMsIFwicG9wXCIpO1xuICB9LFxuICBwdXNoKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gbm9UcmFja2luZyh0aGlzLCBcInB1c2hcIiwgYXJncyk7XG4gIH0sXG4gIHJlZHVjZShmbiwgLi4uYXJncykge1xuICAgIHJldHVybiByZWR1Y2UodGhpcywgXCJyZWR1Y2VcIiwgZm4sIGFyZ3MpO1xuICB9LFxuICByZWR1Y2VSaWdodChmbiwgLi4uYXJncykge1xuICAgIHJldHVybiByZWR1Y2UodGhpcywgXCJyZWR1Y2VSaWdodFwiLCBmbiwgYXJncyk7XG4gIH0sXG4gIHNoaWZ0KCkge1xuICAgIHJldHVybiBub1RyYWNraW5nKHRoaXMsIFwic2hpZnRcIik7XG4gIH0sXG4gIC8vIHNsaWNlIGNvdWxkIHVzZSBBUlJBWV9JVEVSQVRFIGJ1dCBhbHNvIHNlZW1zIHRvIGJlZyBmb3IgcmFuZ2UgdHJhY2tpbmdcbiAgc29tZShmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBhcHBseSh0aGlzLCBcInNvbWVcIiwgZm4sIHRoaXNBcmcsIHZvaWQgMCwgYXJndW1lbnRzKTtcbiAgfSxcbiAgc3BsaWNlKC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gbm9UcmFja2luZyh0aGlzLCBcInNwbGljZVwiLCBhcmdzKTtcbiAgfSxcbiAgdG9SZXZlcnNlZCgpIHtcbiAgICByZXR1cm4gcmVhY3RpdmVSZWFkQXJyYXkodGhpcykudG9SZXZlcnNlZCgpO1xuICB9LFxuICB0b1NvcnRlZChjb21wYXJlcikge1xuICAgIHJldHVybiByZWFjdGl2ZVJlYWRBcnJheSh0aGlzKS50b1NvcnRlZChjb21wYXJlcik7XG4gIH0sXG4gIHRvU3BsaWNlZCguLi5hcmdzKSB7XG4gICAgcmV0dXJuIHJlYWN0aXZlUmVhZEFycmF5KHRoaXMpLnRvU3BsaWNlZCguLi5hcmdzKTtcbiAgfSxcbiAgdW5zaGlmdCguLi5hcmdzKSB7XG4gICAgcmV0dXJuIG5vVHJhY2tpbmcodGhpcywgXCJ1bnNoaWZ0XCIsIGFyZ3MpO1xuICB9LFxuICB2YWx1ZXMoKSB7XG4gICAgcmV0dXJuIGl0ZXJhdG9yKHRoaXMsIFwidmFsdWVzXCIsIHRvUmVhY3RpdmUpO1xuICB9XG59O1xuZnVuY3Rpb24gaXRlcmF0b3Ioc2VsZiwgbWV0aG9kLCB3cmFwVmFsdWUpIHtcbiAgY29uc3QgYXJyID0gc2hhbGxvd1JlYWRBcnJheShzZWxmKTtcbiAgY29uc3QgaXRlciA9IGFyclttZXRob2RdKCk7XG4gIGlmIChhcnIgIT09IHNlbGYgJiYgIWlzU2hhbGxvdyhzZWxmKSkge1xuICAgIGl0ZXIuX25leHQgPSBpdGVyLm5leHQ7XG4gICAgaXRlci5uZXh0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gaXRlci5fbmV4dCgpO1xuICAgICAgaWYgKHJlc3VsdC52YWx1ZSkge1xuICAgICAgICByZXN1bHQudmFsdWUgPSB3cmFwVmFsdWUocmVzdWx0LnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gaXRlcjtcbn1cbmNvbnN0IGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5mdW5jdGlvbiBhcHBseShzZWxmLCBtZXRob2QsIGZuLCB0aGlzQXJnLCB3cmFwcGVkUmV0Rm4sIGFyZ3MpIHtcbiAgY29uc3QgYXJyID0gc2hhbGxvd1JlYWRBcnJheShzZWxmKTtcbiAgY29uc3QgbmVlZHNXcmFwID0gYXJyICE9PSBzZWxmICYmICFpc1NoYWxsb3coc2VsZik7XG4gIGNvbnN0IG1ldGhvZEZuID0gYXJyW21ldGhvZF07XG4gIGlmIChtZXRob2RGbiAhPT0gYXJyYXlQcm90b1ttZXRob2RdKSB7XG4gICAgY29uc3QgcmVzdWx0MiA9IG1ldGhvZEZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIHJldHVybiBuZWVkc1dyYXAgPyB0b1JlYWN0aXZlKHJlc3VsdDIpIDogcmVzdWx0MjtcbiAgfVxuICBsZXQgd3JhcHBlZEZuID0gZm47XG4gIGlmIChhcnIgIT09IHNlbGYpIHtcbiAgICBpZiAobmVlZHNXcmFwKSB7XG4gICAgICB3cmFwcGVkRm4gPSBmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCB0b1JlYWN0aXZlKGl0ZW0pLCBpbmRleCwgc2VsZik7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoZm4ubGVuZ3RoID4gMikge1xuICAgICAgd3JhcHBlZEZuID0gZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgaXRlbSwgaW5kZXgsIHNlbGYpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgY29uc3QgcmVzdWx0ID0gbWV0aG9kRm4uY2FsbChhcnIsIHdyYXBwZWRGbiwgdGhpc0FyZyk7XG4gIHJldHVybiBuZWVkc1dyYXAgJiYgd3JhcHBlZFJldEZuID8gd3JhcHBlZFJldEZuKHJlc3VsdCkgOiByZXN1bHQ7XG59XG5mdW5jdGlvbiByZWR1Y2Uoc2VsZiwgbWV0aG9kLCBmbiwgYXJncykge1xuICBjb25zdCBhcnIgPSBzaGFsbG93UmVhZEFycmF5KHNlbGYpO1xuICBsZXQgd3JhcHBlZEZuID0gZm47XG4gIGlmIChhcnIgIT09IHNlbGYpIHtcbiAgICBpZiAoIWlzU2hhbGxvdyhzZWxmKSkge1xuICAgICAgd3JhcHBlZEZuID0gZnVuY3Rpb24oYWNjLCBpdGVtLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBhY2MsIHRvUmVhY3RpdmUoaXRlbSksIGluZGV4LCBzZWxmKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChmbi5sZW5ndGggPiAzKSB7XG4gICAgICB3cmFwcGVkRm4gPSBmdW5jdGlvbihhY2MsIGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGFjYywgaXRlbSwgaW5kZXgsIHNlbGYpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFyclttZXRob2RdKHdyYXBwZWRGbiwgLi4uYXJncyk7XG59XG5mdW5jdGlvbiBzZWFyY2hQcm94eShzZWxmLCBtZXRob2QsIGFyZ3MpIHtcbiAgY29uc3QgYXJyID0gdG9SYXcoc2VsZik7XG4gIHRyYWNrKGFyciwgXCJpdGVyYXRlXCIsIEFSUkFZX0lURVJBVEVfS0VZKTtcbiAgY29uc3QgcmVzID0gYXJyW21ldGhvZF0oLi4uYXJncyk7XG4gIGlmICgocmVzID09PSAtMSB8fCByZXMgPT09IGZhbHNlKSAmJiBpc1Byb3h5KGFyZ3NbMF0pKSB7XG4gICAgYXJnc1swXSA9IHRvUmF3KGFyZ3NbMF0pO1xuICAgIHJldHVybiBhcnJbbWV0aG9kXSguLi5hcmdzKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gbm9UcmFja2luZyhzZWxmLCBtZXRob2QsIGFyZ3MgPSBbXSkge1xuICBwYXVzZVRyYWNraW5nKCk7XG4gIHN0YXJ0QmF0Y2goKTtcbiAgY29uc3QgcmVzID0gdG9SYXcoc2VsZilbbWV0aG9kXS5hcHBseShzZWxmLCBhcmdzKTtcbiAgZW5kQmF0Y2goKTtcbiAgcmVzZXRUcmFja2luZygpO1xuICByZXR1cm4gcmVzO1xufVxuXG5jb25zdCBpc05vblRyYWNrYWJsZUtleXMgPSAvKiBAX19QVVJFX18gKi8gbWFrZU1hcChgX19wcm90b19fLF9fdl9pc1JlZixfX2lzVnVlYCk7XG5jb25zdCBidWlsdEluU3ltYm9scyA9IG5ldyBTZXQoXG4gIC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhTeW1ib2wpLmZpbHRlcigoa2V5KSA9PiBrZXkgIT09IFwiYXJndW1lbnRzXCIgJiYga2V5ICE9PSBcImNhbGxlclwiKS5tYXAoKGtleSkgPT4gU3ltYm9sW2tleV0pLmZpbHRlcihpc1N5bWJvbClcbik7XG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShrZXkpIHtcbiAgaWYgKCFpc1N5bWJvbChrZXkpKSBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgY29uc3Qgb2JqID0gdG9SYXcodGhpcyk7XG4gIHRyYWNrKG9iaiwgXCJoYXNcIiwga2V5KTtcbiAgcmV0dXJuIG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpO1xufVxuY2xhc3MgQmFzZVJlYWN0aXZlSGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKF9pc1JlYWRvbmx5ID0gZmFsc2UsIF9pc1NoYWxsb3cgPSBmYWxzZSkge1xuICAgIHRoaXMuX2lzUmVhZG9ubHkgPSBfaXNSZWFkb25seTtcbiAgICB0aGlzLl9pc1NoYWxsb3cgPSBfaXNTaGFsbG93O1xuICB9XG4gIGdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpIHtcbiAgICBpZiAoa2V5ID09PSBcIl9fdl9za2lwXCIpIHJldHVybiB0YXJnZXRbXCJfX3Zfc2tpcFwiXTtcbiAgICBjb25zdCBpc1JlYWRvbmx5MiA9IHRoaXMuX2lzUmVhZG9ubHksIGlzU2hhbGxvdzIgPSB0aGlzLl9pc1NoYWxsb3c7XG4gICAgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFjdGl2ZVwiKSB7XG4gICAgICByZXR1cm4gIWlzUmVhZG9ubHkyO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWRvbmx5XCIpIHtcbiAgICAgIHJldHVybiBpc1JlYWRvbmx5MjtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNTaGFsbG93XCIpIHtcbiAgICAgIHJldHVybiBpc1NoYWxsb3cyO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9yYXdcIikge1xuICAgICAgaWYgKHJlY2VpdmVyID09PSAoaXNSZWFkb25seTIgPyBpc1NoYWxsb3cyID8gc2hhbGxvd1JlYWRvbmx5TWFwIDogcmVhZG9ubHlNYXAgOiBpc1NoYWxsb3cyID8gc2hhbGxvd1JlYWN0aXZlTWFwIDogcmVhY3RpdmVNYXApLmdldCh0YXJnZXQpIHx8IC8vIHJlY2VpdmVyIGlzIG5vdCB0aGUgcmVhY3RpdmUgcHJveHksIGJ1dCBoYXMgdGhlIHNhbWUgcHJvdG90eXBlXG4gICAgICAvLyB0aGlzIG1lYW5zIHRoZSByZWNlaXZlciBpcyBhIHVzZXIgcHJveHkgb2YgdGhlIHJlYWN0aXZlIHByb3h5XG4gICAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KSA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHJlY2VpdmVyKSkge1xuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXRJc0FycmF5ID0gaXNBcnJheSh0YXJnZXQpO1xuICAgIGlmICghaXNSZWFkb25seTIpIHtcbiAgICAgIGxldCBmbjtcbiAgICAgIGlmICh0YXJnZXRJc0FycmF5ICYmIChmbiA9IGFycmF5SW5zdHJ1bWVudGF0aW9uc1trZXldKSkge1xuICAgICAgICByZXR1cm4gZm47XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSBcImhhc093blByb3BlcnR5XCIpIHtcbiAgICAgICAgcmV0dXJuIGhhc093blByb3BlcnR5O1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXMgPSBSZWZsZWN0LmdldChcbiAgICAgIHRhcmdldCxcbiAgICAgIGtleSxcbiAgICAgIC8vIGlmIHRoaXMgaXMgYSBwcm94eSB3cmFwcGluZyBhIHJlZiwgcmV0dXJuIG1ldGhvZHMgdXNpbmcgdGhlIHJhdyByZWZcbiAgICAgIC8vIGFzIHJlY2VpdmVyIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZSB0byBjYWxsIGB0b1Jhd2Agb24gdGhlIHJlZiBpbiBhbGxcbiAgICAgIC8vIGl0cyBjbGFzcyBtZXRob2RzXG4gICAgICBpc1JlZih0YXJnZXQpID8gdGFyZ2V0IDogcmVjZWl2ZXJcbiAgICApO1xuICAgIGlmIChpc1N5bWJvbChrZXkpID8gYnVpbHRJblN5bWJvbHMuaGFzKGtleSkgOiBpc05vblRyYWNrYWJsZUtleXMoa2V5KSkge1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgaWYgKCFpc1JlYWRvbmx5Mikge1xuICAgICAgdHJhY2sodGFyZ2V0LCBcImdldFwiLCBrZXkpO1xuICAgIH1cbiAgICBpZiAoaXNTaGFsbG93Mikge1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgaWYgKGlzUmVmKHJlcykpIHtcbiAgICAgIHJldHVybiB0YXJnZXRJc0FycmF5ICYmIGlzSW50ZWdlcktleShrZXkpID8gcmVzIDogcmVzLnZhbHVlO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3QocmVzKSkge1xuICAgICAgcmV0dXJuIGlzUmVhZG9ubHkyID8gcmVhZG9ubHkocmVzKSA6IHJlYWN0aXZlKHJlcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cbn1cbmNsYXNzIE11dGFibGVSZWFjdGl2ZUhhbmRsZXIgZXh0ZW5kcyBCYXNlUmVhY3RpdmVIYW5kbGVyIHtcbiAgY29uc3RydWN0b3IoaXNTaGFsbG93MiA9IGZhbHNlKSB7XG4gICAgc3VwZXIoZmFsc2UsIGlzU2hhbGxvdzIpO1xuICB9XG4gIHNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gICAgbGV0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgaWYgKCF0aGlzLl9pc1NoYWxsb3cpIHtcbiAgICAgIGNvbnN0IGlzT2xkVmFsdWVSZWFkb25seSA9IGlzUmVhZG9ubHkob2xkVmFsdWUpO1xuICAgICAgaWYgKCFpc1NoYWxsb3codmFsdWUpICYmICFpc1JlYWRvbmx5KHZhbHVlKSkge1xuICAgICAgICBvbGRWYWx1ZSA9IHRvUmF3KG9sZFZhbHVlKTtcbiAgICAgICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoIWlzQXJyYXkodGFyZ2V0KSAmJiBpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xuICAgICAgICBpZiAoaXNPbGRWYWx1ZVJlYWRvbmx5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9sZFZhbHVlLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaGFkS2V5ID0gaXNBcnJheSh0YXJnZXQpICYmIGlzSW50ZWdlcktleShrZXkpID8gTnVtYmVyKGtleSkgPCB0YXJnZXQubGVuZ3RoIDogaGFzT3duKHRhcmdldCwga2V5KTtcbiAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LnNldChcbiAgICAgIHRhcmdldCxcbiAgICAgIGtleSxcbiAgICAgIHZhbHVlLFxuICAgICAgaXNSZWYodGFyZ2V0KSA/IHRhcmdldCA6IHJlY2VpdmVyXG4gICAgKTtcbiAgICBpZiAodGFyZ2V0ID09PSB0b1JhdyhyZWNlaXZlcikpIHtcbiAgICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiLCBrZXksIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcInNldFwiLCBrZXksIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICBjb25zdCBoYWRLZXkgPSBoYXNPd24odGFyZ2V0LCBrZXkpO1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSk7XG4gICAgaWYgKHJlc3VsdCAmJiBoYWRLZXkpIHtcbiAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImRlbGV0ZVwiLCBrZXksIHZvaWQgMCwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGhhcyh0YXJnZXQsIGtleSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuaGFzKHRhcmdldCwga2V5KTtcbiAgICBpZiAoIWlzU3ltYm9sKGtleSkgfHwgIWJ1aWx0SW5TeW1ib2xzLmhhcyhrZXkpKSB7XG4gICAgICB0cmFjayh0YXJnZXQsIFwiaGFzXCIsIGtleSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgb3duS2V5cyh0YXJnZXQpIHtcbiAgICB0cmFjayhcbiAgICAgIHRhcmdldCxcbiAgICAgIFwiaXRlcmF0ZVwiLFxuICAgICAgaXNBcnJheSh0YXJnZXQpID8gXCJsZW5ndGhcIiA6IElURVJBVEVfS0VZXG4gICAgKTtcbiAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7XG4gIH1cbn1cbmNsYXNzIFJlYWRvbmx5UmVhY3RpdmVIYW5kbGVyIGV4dGVuZHMgQmFzZVJlYWN0aXZlSGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKGlzU2hhbGxvdzIgPSBmYWxzZSkge1xuICAgIHN1cGVyKHRydWUsIGlzU2hhbGxvdzIpO1xuICB9XG4gIHNldCh0YXJnZXQsIGtleSkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgU2V0IG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsXG4gICAgICAgIHRhcmdldFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybihcbiAgICAgICAgYERlbGV0ZSBvcGVyYXRpb24gb24ga2V5IFwiJHtTdHJpbmcoa2V5KX1cIiBmYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLFxuICAgICAgICB0YXJnZXRcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5jb25zdCBtdXRhYmxlSGFuZGxlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE11dGFibGVSZWFjdGl2ZUhhbmRsZXIoKTtcbmNvbnN0IHJlYWRvbmx5SGFuZGxlcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFJlYWRvbmx5UmVhY3RpdmVIYW5kbGVyKCk7XG5jb25zdCBzaGFsbG93UmVhY3RpdmVIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTXV0YWJsZVJlYWN0aXZlSGFuZGxlcih0cnVlKTtcbmNvbnN0IHNoYWxsb3dSZWFkb25seUhhbmRsZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBSZWFkb25seVJlYWN0aXZlSGFuZGxlcih0cnVlKTtcblxuY29uc3QgdG9TaGFsbG93ID0gKHZhbHVlKSA9PiB2YWx1ZTtcbmNvbnN0IGdldFByb3RvID0gKHYpID0+IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2Yodik7XG5mdW5jdGlvbiBjcmVhdGVJdGVyYWJsZU1ldGhvZChtZXRob2QsIGlzUmVhZG9ubHkyLCBpc1NoYWxsb3cyKSB7XG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIl07XG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcbiAgICBjb25zdCB0YXJnZXRJc01hcCA9IGlzTWFwKHJhd1RhcmdldCk7XG4gICAgY29uc3QgaXNQYWlyID0gbWV0aG9kID09PSBcImVudHJpZXNcIiB8fCBtZXRob2QgPT09IFN5bWJvbC5pdGVyYXRvciAmJiB0YXJnZXRJc01hcDtcbiAgICBjb25zdCBpc0tleU9ubHkgPSBtZXRob2QgPT09IFwia2V5c1wiICYmIHRhcmdldElzTWFwO1xuICAgIGNvbnN0IGlubmVySXRlcmF0b3IgPSB0YXJnZXRbbWV0aG9kXSguLi5hcmdzKTtcbiAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93MiA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkyID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gICAgIWlzUmVhZG9ubHkyICYmIHRyYWNrKFxuICAgICAgcmF3VGFyZ2V0LFxuICAgICAgXCJpdGVyYXRlXCIsXG4gICAgICBpc0tleU9ubHkgPyBNQVBfS0VZX0lURVJBVEVfS0VZIDogSVRFUkFURV9LRVlcbiAgICApO1xuICAgIHJldHVybiB7XG4gICAgICAvLyBpdGVyYXRvciBwcm90b2NvbFxuICAgICAgbmV4dCgpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gaW5uZXJJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIHJldHVybiBkb25lID8geyB2YWx1ZSwgZG9uZSB9IDoge1xuICAgICAgICAgIHZhbHVlOiBpc1BhaXIgPyBbd3JhcCh2YWx1ZVswXSksIHdyYXAodmFsdWVbMV0pXSA6IHdyYXAodmFsdWUpLFxuICAgICAgICAgIGRvbmVcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICAvLyBpdGVyYWJsZSBwcm90b2NvbFxuICAgICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVSZWFkb25seU1ldGhvZCh0eXBlKSB7XG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGNvbnN0IGtleSA9IGFyZ3NbMF0gPyBgb24ga2V5IFwiJHthcmdzWzBdfVwiIGAgOiBgYDtcbiAgICAgIHdhcm4oXG4gICAgICAgIGAke2NhcGl0YWxpemUodHlwZSl9IG9wZXJhdGlvbiAke2tleX1mYWlsZWQ6IHRhcmdldCBpcyByZWFkb25seS5gLFxuICAgICAgICB0b1Jhdyh0aGlzKVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGUgPT09IFwiZGVsZXRlXCIgPyBmYWxzZSA6IHR5cGUgPT09IFwiY2xlYXJcIiA/IHZvaWQgMCA6IHRoaXM7XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25zKHJlYWRvbmx5LCBzaGFsbG93KSB7XG4gIGNvbnN0IGluc3RydW1lbnRhdGlvbnMgPSB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpc1tcIl9fdl9yYXdcIl07XG4gICAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xuICAgICAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcbiAgICAgIGlmICghcmVhZG9ubHkpIHtcbiAgICAgICAgaWYgKGhhc0NoYW5nZWQoa2V5LCByYXdLZXkpKSB7XG4gICAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcImdldFwiLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJnZXRcIiwgcmF3S2V5KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgaGFzIH0gPSBnZXRQcm90byhyYXdUYXJnZXQpO1xuICAgICAgY29uc3Qgd3JhcCA9IHNoYWxsb3cgPyB0b1NoYWxsb3cgOiByZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xuICAgICAgaWYgKGhhcy5jYWxsKHJhd1RhcmdldCwga2V5KSkge1xuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXQuZ2V0KGtleSkpO1xuICAgICAgfSBlbHNlIGlmIChoYXMuY2FsbChyYXdUYXJnZXQsIHJhd0tleSkpIHtcbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0LmdldChyYXdLZXkpKTtcbiAgICAgIH0gZWxzZSBpZiAodGFyZ2V0ICE9PSByYXdUYXJnZXQpIHtcbiAgICAgICAgdGFyZ2V0LmdldChrZXkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiXTtcbiAgICAgICFyZWFkb25seSAmJiB0cmFjayh0b1Jhdyh0YXJnZXQpLCBcIml0ZXJhdGVcIiwgSVRFUkFURV9LRVkpO1xuICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgXCJzaXplXCIsIHRhcmdldCk7XG4gICAgfSxcbiAgICBoYXMoa2V5KSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiXTtcbiAgICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgICBjb25zdCByYXdLZXkgPSB0b1JhdyhrZXkpO1xuICAgICAgaWYgKCFyZWFkb25seSkge1xuICAgICAgICBpZiAoaGFzQ2hhbmdlZChrZXksIHJhd0tleSkpIHtcbiAgICAgICAgICB0cmFjayhyYXdUYXJnZXQsIFwiaGFzXCIsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2socmF3VGFyZ2V0LCBcImhhc1wiLCByYXdLZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGtleSA9PT0gcmF3S2V5ID8gdGFyZ2V0LmhhcyhrZXkpIDogdGFyZ2V0LmhhcyhrZXkpIHx8IHRhcmdldC5oYXMocmF3S2V5KTtcbiAgICB9LFxuICAgIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIGNvbnN0IG9ic2VydmVkID0gdGhpcztcbiAgICAgIGNvbnN0IHRhcmdldCA9IG9ic2VydmVkW1wiX192X3Jhd1wiXTtcbiAgICAgIGNvbnN0IHJhd1RhcmdldCA9IHRvUmF3KHRhcmdldCk7XG4gICAgICBjb25zdCB3cmFwID0gc2hhbGxvdyA/IHRvU2hhbGxvdyA6IHJlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XG4gICAgICAhcmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcIml0ZXJhdGVcIiwgSVRFUkFURV9LRVkpO1xuICAgICAgcmV0dXJuIHRhcmdldC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHdyYXAodmFsdWUpLCB3cmFwKGtleSksIG9ic2VydmVkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgZXh0ZW5kKFxuICAgIGluc3RydW1lbnRhdGlvbnMsXG4gICAgcmVhZG9ubHkgPyB7XG4gICAgICBhZGQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiYWRkXCIpLFxuICAgICAgc2V0OiBjcmVhdGVSZWFkb25seU1ldGhvZChcInNldFwiKSxcbiAgICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJkZWxldGVcIiksXG4gICAgICBjbGVhcjogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJjbGVhclwiKVxuICAgIH0gOiB7XG4gICAgICBhZGQodmFsdWUpIHtcbiAgICAgICAgaWYgKCFzaGFsbG93ICYmICFpc1NoYWxsb3codmFsdWUpICYmICFpc1JlYWRvbmx5KHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlID0gdG9SYXcodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICAgICAgICBjb25zdCBwcm90byA9IGdldFByb3RvKHRhcmdldCk7XG4gICAgICAgIGNvbnN0IGhhZEtleSA9IHByb3RvLmhhcy5jYWxsKHRhcmdldCwgdmFsdWUpO1xuICAgICAgICBpZiAoIWhhZEtleSkge1xuICAgICAgICAgIHRhcmdldC5hZGQodmFsdWUpO1xuICAgICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiLCB2YWx1ZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIHNldChrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmICghc2hhbGxvdyAmJiAhaXNTaGFsbG93KHZhbHVlKSAmJiAhaXNSZWFkb25seSh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICAgICAgY29uc3QgeyBoYXMsIGdldCB9ID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgICAgICAgbGV0IGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcbiAgICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgICBrZXkgPSB0b1JhdyhrZXkpO1xuICAgICAgICAgIGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBnZXQuY2FsbCh0YXJnZXQsIGtleSk7XG4gICAgICAgIHRhcmdldC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIGlmICghaGFkS2V5KSB7XG4gICAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIsIGtleSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGhhc0NoYW5nZWQodmFsdWUsIG9sZFZhbHVlKSkge1xuICAgICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcInNldFwiLCBrZXksIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgZGVsZXRlKGtleSkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcbiAgICAgICAgY29uc3QgeyBoYXMsIGdldCB9ID0gZ2V0UHJvdG8odGFyZ2V0KTtcbiAgICAgICAgbGV0IGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcbiAgICAgICAgaWYgKCFoYWRLZXkpIHtcbiAgICAgICAgICBrZXkgPSB0b1JhdyhrZXkpO1xuICAgICAgICAgIGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBnZXQgPyBnZXQuY2FsbCh0YXJnZXQsIGtleSkgOiB2b2lkIDA7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRhcmdldC5kZWxldGUoa2V5KTtcbiAgICAgICAgaWYgKGhhZEtleSkge1xuICAgICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImRlbGV0ZVwiLCBrZXksIHZvaWQgMCwgb2xkVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LFxuICAgICAgY2xlYXIoKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xuICAgICAgICBjb25zdCBoYWRJdGVtcyA9IHRhcmdldC5zaXplICE9PSAwO1xuICAgICAgICBjb25zdCBvbGRUYXJnZXQgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gaXNNYXAodGFyZ2V0KSA/IG5ldyBNYXAodGFyZ2V0KSA6IG5ldyBTZXQodGFyZ2V0KSA6IHZvaWQgMDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmNsZWFyKCk7XG4gICAgICAgIGlmIChoYWRJdGVtcykge1xuICAgICAgICAgIHRyaWdnZXIoXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICBcImNsZWFyXCIsXG4gICAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgICBvbGRUYXJnZXRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBjb25zdCBpdGVyYXRvck1ldGhvZHMgPSBbXG4gICAgXCJrZXlzXCIsXG4gICAgXCJ2YWx1ZXNcIixcbiAgICBcImVudHJpZXNcIixcbiAgICBTeW1ib2wuaXRlcmF0b3JcbiAgXTtcbiAgaXRlcmF0b3JNZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4ge1xuICAgIGluc3RydW1lbnRhdGlvbnNbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgcmVhZG9ubHksIHNoYWxsb3cpO1xuICB9KTtcbiAgcmV0dXJuIGluc3RydW1lbnRhdGlvbnM7XG59XG5mdW5jdGlvbiBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIoaXNSZWFkb25seTIsIHNoYWxsb3cpIHtcbiAgY29uc3QgaW5zdHJ1bWVudGF0aW9ucyA9IGNyZWF0ZUluc3RydW1lbnRhdGlvbnMoaXNSZWFkb25seTIsIHNoYWxsb3cpO1xuICByZXR1cm4gKHRhcmdldCwga2V5LCByZWNlaXZlcikgPT4ge1xuICAgIGlmIChrZXkgPT09IFwiX192X2lzUmVhY3RpdmVcIikge1xuICAgICAgcmV0dXJuICFpc1JlYWRvbmx5MjtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiKSB7XG4gICAgICByZXR1cm4gaXNSZWFkb25seTI7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICByZXR1cm4gUmVmbGVjdC5nZXQoXG4gICAgICBoYXNPd24oaW5zdHJ1bWVudGF0aW9ucywga2V5KSAmJiBrZXkgaW4gdGFyZ2V0ID8gaW5zdHJ1bWVudGF0aW9ucyA6IHRhcmdldCxcbiAgICAgIGtleSxcbiAgICAgIHJlY2VpdmVyXG4gICAgKTtcbiAgfTtcbn1cbmNvbnN0IG11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XG4gIGdldDogLyogQF9fUFVSRV9fICovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihmYWxzZSwgZmFsc2UpXG59O1xuY29uc3Qgc2hhbGxvd0NvbGxlY3Rpb25IYW5kbGVycyA9IHtcbiAgZ2V0OiAvKiBAX19QVVJFX18gKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGZhbHNlLCB0cnVlKVxufTtcbmNvbnN0IHJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICBnZXQ6IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIodHJ1ZSwgZmFsc2UpXG59O1xuY29uc3Qgc2hhbGxvd1JlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzID0ge1xuICBnZXQ6IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIodHJ1ZSwgdHJ1ZSlcbn07XG5mdW5jdGlvbiBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhcywga2V5KSB7XG4gIGNvbnN0IHJhd0tleSA9IHRvUmF3KGtleSk7XG4gIGlmIChyYXdLZXkgIT09IGtleSAmJiBoYXMuY2FsbCh0YXJnZXQsIHJhd0tleSkpIHtcbiAgICBjb25zdCB0eXBlID0gdG9SYXdUeXBlKHRhcmdldCk7XG4gICAgd2FybihcbiAgICAgIGBSZWFjdGl2ZSAke3R5cGV9IGNvbnRhaW5zIGJvdGggdGhlIHJhdyBhbmQgcmVhY3RpdmUgdmVyc2lvbnMgb2YgdGhlIHNhbWUgb2JqZWN0JHt0eXBlID09PSBgTWFwYCA/IGAgYXMga2V5c2AgOiBgYH0sIHdoaWNoIGNhbiBsZWFkIHRvIGluY29uc2lzdGVuY2llcy4gQXZvaWQgZGlmZmVyZW50aWF0aW5nIGJldHdlZW4gdGhlIHJhdyBhbmQgcmVhY3RpdmUgdmVyc2lvbnMgb2YgYW4gb2JqZWN0IGFuZCBvbmx5IHVzZSB0aGUgcmVhY3RpdmUgdmVyc2lvbiBpZiBwb3NzaWJsZS5gXG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCByZWFjdGl2ZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3Qgc2hhbGxvd1JlYWN0aXZlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZWFkb25seU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3Qgc2hhbGxvd1JlYWRvbmx5TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiB0YXJnZXRUeXBlTWFwKHJhd1R5cGUpIHtcbiAgc3dpdGNoIChyYXdUeXBlKSB7XG4gICAgY2FzZSBcIk9iamVjdFwiOlxuICAgIGNhc2UgXCJBcnJheVwiOlxuICAgICAgcmV0dXJuIDEgLyogQ09NTU9OICovO1xuICAgIGNhc2UgXCJNYXBcIjpcbiAgICBjYXNlIFwiU2V0XCI6XG4gICAgY2FzZSBcIldlYWtNYXBcIjpcbiAgICBjYXNlIFwiV2Vha1NldFwiOlxuICAgICAgcmV0dXJuIDIgLyogQ09MTEVDVElPTiAqLztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIDAgLyogSU5WQUxJRCAqLztcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VGFyZ2V0VHlwZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWVbXCJfX3Zfc2tpcFwiXSB8fCAhT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgPyAwIC8qIElOVkFMSUQgKi8gOiB0YXJnZXRUeXBlTWFwKHRvUmF3VHlwZSh2YWx1ZSkpO1xufVxuZnVuY3Rpb24gcmVhY3RpdmUodGFyZ2V0KSB7XG4gIGlmIChpc1JlYWRvbmx5KHRhcmdldCkpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdChcbiAgICB0YXJnZXQsXG4gICAgZmFsc2UsXG4gICAgbXV0YWJsZUhhbmRsZXJzLFxuICAgIG11dGFibGVDb2xsZWN0aW9uSGFuZGxlcnMsXG4gICAgcmVhY3RpdmVNYXBcbiAgKTtcbn1cbmZ1bmN0aW9uIHNoYWxsb3dSZWFjdGl2ZSh0YXJnZXQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KFxuICAgIHRhcmdldCxcbiAgICBmYWxzZSxcbiAgICBzaGFsbG93UmVhY3RpdmVIYW5kbGVycyxcbiAgICBzaGFsbG93Q29sbGVjdGlvbkhhbmRsZXJzLFxuICAgIHNoYWxsb3dSZWFjdGl2ZU1hcFxuICApO1xufVxuZnVuY3Rpb24gcmVhZG9ubHkodGFyZ2V0KSB7XG4gIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdChcbiAgICB0YXJnZXQsXG4gICAgdHJ1ZSxcbiAgICByZWFkb25seUhhbmRsZXJzLFxuICAgIHJlYWRvbmx5Q29sbGVjdGlvbkhhbmRsZXJzLFxuICAgIHJlYWRvbmx5TWFwXG4gICk7XG59XG5mdW5jdGlvbiBzaGFsbG93UmVhZG9ubHkodGFyZ2V0KSB7XG4gIHJldHVybiBjcmVhdGVSZWFjdGl2ZU9iamVjdChcbiAgICB0YXJnZXQsXG4gICAgdHJ1ZSxcbiAgICBzaGFsbG93UmVhZG9ubHlIYW5kbGVycyxcbiAgICBzaGFsbG93UmVhZG9ubHlDb2xsZWN0aW9uSGFuZGxlcnMsXG4gICAgc2hhbGxvd1JlYWRvbmx5TWFwXG4gICk7XG59XG5mdW5jdGlvbiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIGlzUmVhZG9ubHkyLCBiYXNlSGFuZGxlcnMsIGNvbGxlY3Rpb25IYW5kbGVycywgcHJveHlNYXApIHtcbiAgaWYgKCFpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGB2YWx1ZSBjYW5ub3QgYmUgbWFkZSAke2lzUmVhZG9ubHkyID8gXCJyZWFkb25seVwiIDogXCJyZWFjdGl2ZVwifTogJHtTdHJpbmcoXG4gICAgICAgICAgdGFyZ2V0XG4gICAgICAgICl9YFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICBpZiAodGFyZ2V0W1wiX192X3Jhd1wiXSAmJiAhKGlzUmVhZG9ubHkyICYmIHRhcmdldFtcIl9fdl9pc1JlYWN0aXZlXCJdKSkge1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgY29uc3QgZXhpc3RpbmdQcm94eSA9IHByb3h5TWFwLmdldCh0YXJnZXQpO1xuICBpZiAoZXhpc3RpbmdQcm94eSkge1xuICAgIHJldHVybiBleGlzdGluZ1Byb3h5O1xuICB9XG4gIGNvbnN0IHRhcmdldFR5cGUgPSBnZXRUYXJnZXRUeXBlKHRhcmdldCk7XG4gIGlmICh0YXJnZXRUeXBlID09PSAwIC8qIElOVkFMSUQgKi8pIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KFxuICAgIHRhcmdldCxcbiAgICB0YXJnZXRUeXBlID09PSAyIC8qIENPTExFQ1RJT04gKi8gPyBjb2xsZWN0aW9uSGFuZGxlcnMgOiBiYXNlSGFuZGxlcnNcbiAgKTtcbiAgcHJveHlNYXAuc2V0KHRhcmdldCwgcHJveHkpO1xuICByZXR1cm4gcHJveHk7XG59XG5mdW5jdGlvbiBpc1JlYWN0aXZlKHZhbHVlKSB7XG4gIGlmIChpc1JlYWRvbmx5KHZhbHVlKSkge1xuICAgIHJldHVybiBpc1JlYWN0aXZlKHZhbHVlW1wiX192X3Jhd1wiXSk7XG4gIH1cbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhY3RpdmVcIl0pO1xufVxuZnVuY3Rpb24gaXNSZWFkb25seSh2YWx1ZSkge1xuICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNSZWFkb25seVwiXSk7XG59XG5mdW5jdGlvbiBpc1NoYWxsb3codmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzU2hhbGxvd1wiXSk7XG59XG5mdW5jdGlvbiBpc1Byb3h5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA/ICEhdmFsdWVbXCJfX3ZfcmF3XCJdIDogZmFsc2U7XG59XG5mdW5jdGlvbiB0b1JhdyhvYnNlcnZlZCkge1xuICBjb25zdCByYXcgPSBvYnNlcnZlZCAmJiBvYnNlcnZlZFtcIl9fdl9yYXdcIl07XG4gIHJldHVybiByYXcgPyB0b1JhdyhyYXcpIDogb2JzZXJ2ZWQ7XG59XG5mdW5jdGlvbiBtYXJrUmF3KHZhbHVlKSB7XG4gIGlmICghaGFzT3duKHZhbHVlLCBcIl9fdl9za2lwXCIpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XG4gICAgZGVmKHZhbHVlLCBcIl9fdl9za2lwXCIsIHRydWUpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmNvbnN0IHRvUmVhY3RpdmUgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWN0aXZlKHZhbHVlKSA6IHZhbHVlO1xuY29uc3QgdG9SZWFkb25seSA9ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpID8gcmVhZG9ubHkodmFsdWUpIDogdmFsdWU7XG5cbmZ1bmN0aW9uIGlzUmVmKHIpIHtcbiAgcmV0dXJuIHIgPyByW1wiX192X2lzUmVmXCJdID09PSB0cnVlIDogZmFsc2U7XG59XG5mdW5jdGlvbiByZWYodmFsdWUpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlZih2YWx1ZSwgZmFsc2UpO1xufVxuZnVuY3Rpb24gc2hhbGxvd1JlZih2YWx1ZSkge1xuICByZXR1cm4gY3JlYXRlUmVmKHZhbHVlLCB0cnVlKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlZihyYXdWYWx1ZSwgc2hhbGxvdykge1xuICBpZiAoaXNSZWYocmF3VmFsdWUpKSB7XG4gICAgcmV0dXJuIHJhd1ZhbHVlO1xuICB9XG4gIHJldHVybiBuZXcgUmVmSW1wbChyYXdWYWx1ZSwgc2hhbGxvdyk7XG59XG5jbGFzcyBSZWZJbXBsIHtcbiAgY29uc3RydWN0b3IodmFsdWUsIGlzU2hhbGxvdzIpIHtcbiAgICB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcbiAgICB0aGlzW1wiX192X2lzUmVmXCJdID0gdHJ1ZTtcbiAgICB0aGlzW1wiX192X2lzU2hhbGxvd1wiXSA9IGZhbHNlO1xuICAgIHRoaXMuX3Jhd1ZhbHVlID0gaXNTaGFsbG93MiA/IHZhbHVlIDogdG9SYXcodmFsdWUpO1xuICAgIHRoaXMuX3ZhbHVlID0gaXNTaGFsbG93MiA/IHZhbHVlIDogdG9SZWFjdGl2ZSh2YWx1ZSk7XG4gICAgdGhpc1tcIl9fdl9pc1NoYWxsb3dcIl0gPSBpc1NoYWxsb3cyO1xuICB9XG4gIGdldCB2YWx1ZSgpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgdGhpcy5kZXAudHJhY2soe1xuICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgIHR5cGU6IFwiZ2V0XCIsXG4gICAgICAgIGtleTogXCJ2YWx1ZVwiXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZXAudHJhY2soKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG4gIHNldCB2YWx1ZShuZXdWYWx1ZSkge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5fcmF3VmFsdWU7XG4gICAgY29uc3QgdXNlRGlyZWN0VmFsdWUgPSB0aGlzW1wiX192X2lzU2hhbGxvd1wiXSB8fCBpc1NoYWxsb3cobmV3VmFsdWUpIHx8IGlzUmVhZG9ubHkobmV3VmFsdWUpO1xuICAgIG5ld1ZhbHVlID0gdXNlRGlyZWN0VmFsdWUgPyBuZXdWYWx1ZSA6IHRvUmF3KG5ld1ZhbHVlKTtcbiAgICBpZiAoaGFzQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICB0aGlzLl9yYXdWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgdGhpcy5fdmFsdWUgPSB1c2VEaXJlY3RWYWx1ZSA/IG5ld1ZhbHVlIDogdG9SZWFjdGl2ZShuZXdWYWx1ZSk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICB0aGlzLmRlcC50cmlnZ2VyKHtcbiAgICAgICAgICB0YXJnZXQ6IHRoaXMsXG4gICAgICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgICAgICBrZXk6IFwidmFsdWVcIixcbiAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICBvbGRWYWx1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGVwLnRyaWdnZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHRyaWdnZXJSZWYocmVmMikge1xuICBpZiAocmVmMi5kZXApIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgcmVmMi5kZXAudHJpZ2dlcih7XG4gICAgICAgIHRhcmdldDogcmVmMixcbiAgICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgICAga2V5OiBcInZhbHVlXCIsXG4gICAgICAgIG5ld1ZhbHVlOiByZWYyLl92YWx1ZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZjIuZGVwLnRyaWdnZXIoKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHVucmVmKHJlZjIpIHtcbiAgcmV0dXJuIGlzUmVmKHJlZjIpID8gcmVmMi52YWx1ZSA6IHJlZjI7XG59XG5mdW5jdGlvbiB0b1ZhbHVlKHNvdXJjZSkge1xuICByZXR1cm4gaXNGdW5jdGlvbihzb3VyY2UpID8gc291cmNlKCkgOiB1bnJlZihzb3VyY2UpO1xufVxuY29uc3Qgc2hhbGxvd1Vud3JhcEhhbmRsZXJzID0ge1xuICBnZXQ6ICh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpID0+IGtleSA9PT0gXCJfX3ZfcmF3XCIgPyB0YXJnZXQgOiB1bnJlZihSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpKSxcbiAgc2V0OiAodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikgPT4ge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XG4gICAgaWYgKGlzUmVmKG9sZFZhbHVlKSAmJiAhaXNSZWYodmFsdWUpKSB7XG4gICAgICBvbGRWYWx1ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBwcm94eVJlZnMob2JqZWN0V2l0aFJlZnMpIHtcbiAgcmV0dXJuIGlzUmVhY3RpdmUob2JqZWN0V2l0aFJlZnMpID8gb2JqZWN0V2l0aFJlZnMgOiBuZXcgUHJveHkob2JqZWN0V2l0aFJlZnMsIHNoYWxsb3dVbndyYXBIYW5kbGVycyk7XG59XG5jbGFzcyBDdXN0b21SZWZJbXBsIHtcbiAgY29uc3RydWN0b3IoZmFjdG9yeSkge1xuICAgIHRoaXNbXCJfX3ZfaXNSZWZcIl0gPSB0cnVlO1xuICAgIHRoaXMuX3ZhbHVlID0gdm9pZCAwO1xuICAgIGNvbnN0IGRlcCA9IHRoaXMuZGVwID0gbmV3IERlcCgpO1xuICAgIGNvbnN0IHsgZ2V0LCBzZXQgfSA9IGZhY3RvcnkoZGVwLnRyYWNrLmJpbmQoZGVwKSwgZGVwLnRyaWdnZXIuYmluZChkZXApKTtcbiAgICB0aGlzLl9nZXQgPSBnZXQ7XG4gICAgdGhpcy5fc2V0ID0gc2V0O1xuICB9XG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWUgPSB0aGlzLl9nZXQoKTtcbiAgfVxuICBzZXQgdmFsdWUobmV3VmFsKSB7XG4gICAgdGhpcy5fc2V0KG5ld1ZhbCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGN1c3RvbVJlZihmYWN0b3J5KSB7XG4gIHJldHVybiBuZXcgQ3VzdG9tUmVmSW1wbChmYWN0b3J5KTtcbn1cbmZ1bmN0aW9uIHRvUmVmcyhvYmplY3QpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzUHJveHkob2JqZWN0KSkge1xuICAgIHdhcm4oYHRvUmVmcygpIGV4cGVjdHMgYSByZWFjdGl2ZSBvYmplY3QgYnV0IHJlY2VpdmVkIGEgcGxhaW4gb25lLmApO1xuICB9XG4gIGNvbnN0IHJldCA9IGlzQXJyYXkob2JqZWN0KSA/IG5ldyBBcnJheShvYmplY3QubGVuZ3RoKSA6IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICByZXRba2V5XSA9IHByb3BlcnR5VG9SZWYob2JqZWN0LCBrZXkpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5jbGFzcyBPYmplY3RSZWZJbXBsIHtcbiAgY29uc3RydWN0b3IoX29iamVjdCwgX2tleSwgX2RlZmF1bHRWYWx1ZSkge1xuICAgIHRoaXMuX29iamVjdCA9IF9vYmplY3Q7XG4gICAgdGhpcy5fa2V5ID0gX2tleTtcbiAgICB0aGlzLl9kZWZhdWx0VmFsdWUgPSBfZGVmYXVsdFZhbHVlO1xuICAgIHRoaXNbXCJfX3ZfaXNSZWZcIl0gPSB0cnVlO1xuICAgIHRoaXMuX3ZhbHVlID0gdm9pZCAwO1xuICB9XG4gIGdldCB2YWx1ZSgpIHtcbiAgICBjb25zdCB2YWwgPSB0aGlzLl9vYmplY3RbdGhpcy5fa2V5XTtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWUgPSB2YWwgPT09IHZvaWQgMCA/IHRoaXMuX2RlZmF1bHRWYWx1ZSA6IHZhbDtcbiAgfVxuICBzZXQgdmFsdWUobmV3VmFsKSB7XG4gICAgdGhpcy5fb2JqZWN0W3RoaXMuX2tleV0gPSBuZXdWYWw7XG4gIH1cbiAgZ2V0IGRlcCgpIHtcbiAgICByZXR1cm4gZ2V0RGVwRnJvbVJlYWN0aXZlKHRvUmF3KHRoaXMuX29iamVjdCksIHRoaXMuX2tleSk7XG4gIH1cbn1cbmNsYXNzIEdldHRlclJlZkltcGwge1xuICBjb25zdHJ1Y3RvcihfZ2V0dGVyKSB7XG4gICAgdGhpcy5fZ2V0dGVyID0gX2dldHRlcjtcbiAgICB0aGlzW1wiX192X2lzUmVmXCJdID0gdHJ1ZTtcbiAgICB0aGlzW1wiX192X2lzUmVhZG9ubHlcIl0gPSB0cnVlO1xuICAgIHRoaXMuX3ZhbHVlID0gdm9pZCAwO1xuICB9XG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWUgPSB0aGlzLl9nZXR0ZXIoKTtcbiAgfVxufVxuZnVuY3Rpb24gdG9SZWYoc291cmNlLCBrZXksIGRlZmF1bHRWYWx1ZSkge1xuICBpZiAoaXNSZWYoc291cmNlKSkge1xuICAgIHJldHVybiBzb3VyY2U7XG4gIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihzb3VyY2UpKSB7XG4gICAgcmV0dXJuIG5ldyBHZXR0ZXJSZWZJbXBsKHNvdXJjZSk7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc291cmNlKSAmJiBhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiBwcm9wZXJ0eVRvUmVmKHNvdXJjZSwga2V5LCBkZWZhdWx0VmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZWYoc291cmNlKTtcbiAgfVxufVxuZnVuY3Rpb24gcHJvcGVydHlUb1JlZihzb3VyY2UsIGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gIGNvbnN0IHZhbCA9IHNvdXJjZVtrZXldO1xuICByZXR1cm4gaXNSZWYodmFsKSA/IHZhbCA6IG5ldyBPYmplY3RSZWZJbXBsKHNvdXJjZSwga2V5LCBkZWZhdWx0VmFsdWUpO1xufVxuXG5jbGFzcyBDb21wdXRlZFJlZkltcGwge1xuICBjb25zdHJ1Y3Rvcihmbiwgc2V0dGVyLCBpc1NTUikge1xuICAgIHRoaXMuZm4gPSBmbjtcbiAgICB0aGlzLnNldHRlciA9IHNldHRlcjtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLl92YWx1ZSA9IHZvaWQgMDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLmRlcCA9IG5ldyBEZXAodGhpcyk7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xuICAgIC8vIFRPRE8gaXNvbGF0ZWREZWNsYXJhdGlvbnMgXCJfX3ZfaXNSZWFkb25seVwiXG4gICAgLy8gQSBjb21wdXRlZCBpcyBhbHNvIGEgc3Vic2NyaWJlciB0aGF0IHRyYWNrcyBvdGhlciBkZXBzXG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5kZXBzID0gdm9pZCAwO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuZGVwc1RhaWwgPSB2b2lkIDA7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdGhpcy5mbGFncyA9IDE2O1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuZ2xvYmFsVmVyc2lvbiA9IGdsb2JhbFZlcnNpb24gLSAxO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMubmV4dCA9IHZvaWQgMDtcbiAgICAvLyBmb3IgYmFja3dhcmRzIGNvbXBhdFxuICAgIHRoaXMuZWZmZWN0ID0gdGhpcztcbiAgICB0aGlzW1wiX192X2lzUmVhZG9ubHlcIl0gPSAhc2V0dGVyO1xuICAgIHRoaXMuaXNTU1IgPSBpc1NTUjtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBub3RpZnkoKSB7XG4gICAgdGhpcy5mbGFncyB8PSAxNjtcbiAgICBpZiAoISh0aGlzLmZsYWdzICYgOCkgJiYgLy8gYXZvaWQgaW5maW5pdGUgc2VsZiByZWN1cnNpb25cbiAgICBhY3RpdmVTdWIgIT09IHRoaXMpIHtcbiAgICAgIGJhdGNoKHRoaXMsIHRydWUpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSA7XG4gIH1cbiAgZ2V0IHZhbHVlKCkge1xuICAgIGNvbnN0IGxpbmsgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gdGhpcy5kZXAudHJhY2soe1xuICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgdHlwZTogXCJnZXRcIixcbiAgICAgIGtleTogXCJ2YWx1ZVwiXG4gICAgfSkgOiB0aGlzLmRlcC50cmFjaygpO1xuICAgIHJlZnJlc2hDb21wdXRlZCh0aGlzKTtcbiAgICBpZiAobGluaykge1xuICAgICAgbGluay52ZXJzaW9uID0gdGhpcy5kZXAudmVyc2lvbjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG4gIHNldCB2YWx1ZShuZXdWYWx1ZSkge1xuICAgIGlmICh0aGlzLnNldHRlcikge1xuICAgICAgdGhpcy5zZXR0ZXIobmV3VmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybihcIldyaXRlIG9wZXJhdGlvbiBmYWlsZWQ6IGNvbXB1dGVkIHZhbHVlIGlzIHJlYWRvbmx5XCIpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY29tcHV0ZWQoZ2V0dGVyT3JPcHRpb25zLCBkZWJ1Z09wdGlvbnMsIGlzU1NSID0gZmFsc2UpIHtcbiAgbGV0IGdldHRlcjtcbiAgbGV0IHNldHRlcjtcbiAgaWYgKGlzRnVuY3Rpb24oZ2V0dGVyT3JPcHRpb25zKSkge1xuICAgIGdldHRlciA9IGdldHRlck9yT3B0aW9ucztcbiAgfSBlbHNlIHtcbiAgICBnZXR0ZXIgPSBnZXR0ZXJPck9wdGlvbnMuZ2V0O1xuICAgIHNldHRlciA9IGdldHRlck9yT3B0aW9ucy5zZXQ7XG4gIH1cbiAgY29uc3QgY1JlZiA9IG5ldyBDb21wdXRlZFJlZkltcGwoZ2V0dGVyLCBzZXR0ZXIsIGlzU1NSKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgZGVidWdPcHRpb25zICYmICFpc1NTUikge1xuICAgIGNSZWYub25UcmFjayA9IGRlYnVnT3B0aW9ucy5vblRyYWNrO1xuICAgIGNSZWYub25UcmlnZ2VyID0gZGVidWdPcHRpb25zLm9uVHJpZ2dlcjtcbiAgfVxuICByZXR1cm4gY1JlZjtcbn1cblxuY29uc3QgVHJhY2tPcFR5cGVzID0ge1xuICBcIkdFVFwiOiBcImdldFwiLFxuICBcIkhBU1wiOiBcImhhc1wiLFxuICBcIklURVJBVEVcIjogXCJpdGVyYXRlXCJcbn07XG5jb25zdCBUcmlnZ2VyT3BUeXBlcyA9IHtcbiAgXCJTRVRcIjogXCJzZXRcIixcbiAgXCJBRERcIjogXCJhZGRcIixcbiAgXCJERUxFVEVcIjogXCJkZWxldGVcIixcbiAgXCJDTEVBUlwiOiBcImNsZWFyXCJcbn07XG5jb25zdCBSZWFjdGl2ZUZsYWdzID0ge1xuICBcIlNLSVBcIjogXCJfX3Zfc2tpcFwiLFxuICBcIklTX1JFQUNUSVZFXCI6IFwiX192X2lzUmVhY3RpdmVcIixcbiAgXCJJU19SRUFET05MWVwiOiBcIl9fdl9pc1JlYWRvbmx5XCIsXG4gIFwiSVNfU0hBTExPV1wiOiBcIl9fdl9pc1NoYWxsb3dcIixcbiAgXCJSQVdcIjogXCJfX3ZfcmF3XCIsXG4gIFwiSVNfUkVGXCI6IFwiX192X2lzUmVmXCJcbn07XG5cbmNvbnN0IFdhdGNoRXJyb3JDb2RlcyA9IHtcbiAgXCJXQVRDSF9HRVRURVJcIjogMixcbiAgXCIyXCI6IFwiV0FUQ0hfR0VUVEVSXCIsXG4gIFwiV0FUQ0hfQ0FMTEJBQ0tcIjogMyxcbiAgXCIzXCI6IFwiV0FUQ0hfQ0FMTEJBQ0tcIixcbiAgXCJXQVRDSF9DTEVBTlVQXCI6IDQsXG4gIFwiNFwiOiBcIldBVENIX0NMRUFOVVBcIlxufTtcbmNvbnN0IElOSVRJQUxfV0FUQ0hFUl9WQUxVRSA9IHt9O1xuY29uc3QgY2xlYW51cE1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xubGV0IGFjdGl2ZVdhdGNoZXIgPSB2b2lkIDA7XG5mdW5jdGlvbiBnZXRDdXJyZW50V2F0Y2hlcigpIHtcbiAgcmV0dXJuIGFjdGl2ZVdhdGNoZXI7XG59XG5mdW5jdGlvbiBvbldhdGNoZXJDbGVhbnVwKGNsZWFudXBGbiwgZmFpbFNpbGVudGx5ID0gZmFsc2UsIG93bmVyID0gYWN0aXZlV2F0Y2hlcikge1xuICBpZiAob3duZXIpIHtcbiAgICBsZXQgY2xlYW51cHMgPSBjbGVhbnVwTWFwLmdldChvd25lcik7XG4gICAgaWYgKCFjbGVhbnVwcykgY2xlYW51cE1hcC5zZXQob3duZXIsIGNsZWFudXBzID0gW10pO1xuICAgIGNsZWFudXBzLnB1c2goY2xlYW51cEZuKTtcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFmYWlsU2lsZW50bHkpIHtcbiAgICB3YXJuKFxuICAgICAgYG9uV2F0Y2hlckNsZWFudXAoKSB3YXMgY2FsbGVkIHdoZW4gdGhlcmUgd2FzIG5vIGFjdGl2ZSB3YXRjaGVyIHRvIGFzc29jaWF0ZSB3aXRoLmBcbiAgICApO1xuICB9XG59XG5mdW5jdGlvbiB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zID0gRU1QVFlfT0JKKSB7XG4gIGNvbnN0IHsgaW1tZWRpYXRlLCBkZWVwLCBvbmNlLCBzY2hlZHVsZXIsIGF1Z21lbnRKb2IsIGNhbGwgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHdhcm5JbnZhbGlkU291cmNlID0gKHMpID0+IHtcbiAgICAob3B0aW9ucy5vbldhcm4gfHwgd2FybikoXG4gICAgICBgSW52YWxpZCB3YXRjaCBzb3VyY2U6IGAsXG4gICAgICBzLFxuICAgICAgYEEgd2F0Y2ggc291cmNlIGNhbiBvbmx5IGJlIGEgZ2V0dGVyL2VmZmVjdCBmdW5jdGlvbiwgYSByZWYsIGEgcmVhY3RpdmUgb2JqZWN0LCBvciBhbiBhcnJheSBvZiB0aGVzZSB0eXBlcy5gXG4gICAgKTtcbiAgfTtcbiAgY29uc3QgcmVhY3RpdmVHZXR0ZXIgPSAoc291cmNlMikgPT4ge1xuICAgIGlmIChkZWVwKSByZXR1cm4gc291cmNlMjtcbiAgICBpZiAoaXNTaGFsbG93KHNvdXJjZTIpIHx8IGRlZXAgPT09IGZhbHNlIHx8IGRlZXAgPT09IDApXG4gICAgICByZXR1cm4gdHJhdmVyc2Uoc291cmNlMiwgMSk7XG4gICAgcmV0dXJuIHRyYXZlcnNlKHNvdXJjZTIpO1xuICB9O1xuICBsZXQgZWZmZWN0O1xuICBsZXQgZ2V0dGVyO1xuICBsZXQgY2xlYW51cDtcbiAgbGV0IGJvdW5kQ2xlYW51cDtcbiAgbGV0IGZvcmNlVHJpZ2dlciA9IGZhbHNlO1xuICBsZXQgaXNNdWx0aVNvdXJjZSA9IGZhbHNlO1xuICBpZiAoaXNSZWYoc291cmNlKSkge1xuICAgIGdldHRlciA9ICgpID0+IHNvdXJjZS52YWx1ZTtcbiAgICBmb3JjZVRyaWdnZXIgPSBpc1NoYWxsb3coc291cmNlKTtcbiAgfSBlbHNlIGlmIChpc1JlYWN0aXZlKHNvdXJjZSkpIHtcbiAgICBnZXR0ZXIgPSAoKSA9PiByZWFjdGl2ZUdldHRlcihzb3VyY2UpO1xuICAgIGZvcmNlVHJpZ2dlciA9IHRydWU7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShzb3VyY2UpKSB7XG4gICAgaXNNdWx0aVNvdXJjZSA9IHRydWU7XG4gICAgZm9yY2VUcmlnZ2VyID0gc291cmNlLnNvbWUoKHMpID0+IGlzUmVhY3RpdmUocykgfHwgaXNTaGFsbG93KHMpKTtcbiAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2UubWFwKChzKSA9PiB7XG4gICAgICBpZiAoaXNSZWYocykpIHtcbiAgICAgICAgcmV0dXJuIHMudmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGlzUmVhY3RpdmUocykpIHtcbiAgICAgICAgcmV0dXJuIHJlYWN0aXZlR2V0dGVyKHMpO1xuICAgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHMpKSB7XG4gICAgICAgIHJldHVybiBjYWxsID8gY2FsbChzLCAyKSA6IHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybkludmFsaWRTb3VyY2Uocyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihzb3VyY2UpKSB7XG4gICAgaWYgKGNiKSB7XG4gICAgICBnZXR0ZXIgPSBjYWxsID8gKCkgPT4gY2FsbChzb3VyY2UsIDIpIDogc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZXR0ZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmIChjbGVhbnVwKSB7XG4gICAgICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudEVmZmVjdCA9IGFjdGl2ZVdhdGNoZXI7XG4gICAgICAgIGFjdGl2ZVdhdGNoZXIgPSBlZmZlY3Q7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGwgPyBjYWxsKHNvdXJjZSwgMywgW2JvdW5kQ2xlYW51cF0pIDogc291cmNlKGJvdW5kQ2xlYW51cCk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgYWN0aXZlV2F0Y2hlciA9IGN1cnJlbnRFZmZlY3Q7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGdldHRlciA9IE5PT1A7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuSW52YWxpZFNvdXJjZShzb3VyY2UpO1xuICB9XG4gIGlmIChjYiAmJiBkZWVwKSB7XG4gICAgY29uc3QgYmFzZUdldHRlciA9IGdldHRlcjtcbiAgICBjb25zdCBkZXB0aCA9IGRlZXAgPT09IHRydWUgPyBJbmZpbml0eSA6IGRlZXA7XG4gICAgZ2V0dGVyID0gKCkgPT4gdHJhdmVyc2UoYmFzZUdldHRlcigpLCBkZXB0aCk7XG4gIH1cbiAgY29uc3Qgc2NvcGUgPSBnZXRDdXJyZW50U2NvcGUoKTtcbiAgY29uc3Qgd2F0Y2hIYW5kbGUgPSAoKSA9PiB7XG4gICAgZWZmZWN0LnN0b3AoKTtcbiAgICBpZiAoc2NvcGUgJiYgc2NvcGUuYWN0aXZlKSB7XG4gICAgICByZW1vdmUoc2NvcGUuZWZmZWN0cywgZWZmZWN0KTtcbiAgICB9XG4gIH07XG4gIGlmIChvbmNlICYmIGNiKSB7XG4gICAgY29uc3QgX2NiID0gY2I7XG4gICAgY2IgPSAoLi4uYXJncykgPT4ge1xuICAgICAgX2NiKC4uLmFyZ3MpO1xuICAgICAgd2F0Y2hIYW5kbGUoKTtcbiAgICB9O1xuICB9XG4gIGxldCBvbGRWYWx1ZSA9IGlzTXVsdGlTb3VyY2UgPyBuZXcgQXJyYXkoc291cmNlLmxlbmd0aCkuZmlsbChJTklUSUFMX1dBVENIRVJfVkFMVUUpIDogSU5JVElBTF9XQVRDSEVSX1ZBTFVFO1xuICBjb25zdCBqb2IgPSAoaW1tZWRpYXRlRmlyc3RSdW4pID0+IHtcbiAgICBpZiAoIShlZmZlY3QuZmxhZ3MgJiAxKSB8fCAhZWZmZWN0LmRpcnR5ICYmICFpbW1lZGlhdGVGaXJzdFJ1bikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2IpIHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gZWZmZWN0LnJ1bigpO1xuICAgICAgaWYgKGRlZXAgfHwgZm9yY2VUcmlnZ2VyIHx8IChpc011bHRpU291cmNlID8gbmV3VmFsdWUuc29tZSgodiwgaSkgPT4gaGFzQ2hhbmdlZCh2LCBvbGRWYWx1ZVtpXSkpIDogaGFzQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpKSkge1xuICAgICAgICBpZiAoY2xlYW51cCkge1xuICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50V2F0Y2hlciA9IGFjdGl2ZVdhdGNoZXI7XG4gICAgICAgIGFjdGl2ZVdhdGNoZXIgPSBlZmZlY3Q7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgICAgLy8gcGFzcyB1bmRlZmluZWQgYXMgdGhlIG9sZCB2YWx1ZSB3aGVuIGl0J3MgY2hhbmdlZCBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgICAgIG9sZFZhbHVlID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUUgPyB2b2lkIDAgOiBpc011bHRpU291cmNlICYmIG9sZFZhbHVlWzBdID09PSBJTklUSUFMX1dBVENIRVJfVkFMVUUgPyBbXSA6IG9sZFZhbHVlLFxuICAgICAgICAgICAgYm91bmRDbGVhbnVwXG4gICAgICAgICAgXTtcbiAgICAgICAgICBjYWxsID8gY2FsbChjYiwgMywgYXJncykgOiAoXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICBjYiguLi5hcmdzKVxuICAgICAgICAgICk7XG4gICAgICAgICAgb2xkVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBhY3RpdmVXYXRjaGVyID0gY3VycmVudFdhdGNoZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWZmZWN0LnJ1bigpO1xuICAgIH1cbiAgfTtcbiAgaWYgKGF1Z21lbnRKb2IpIHtcbiAgICBhdWdtZW50Sm9iKGpvYik7XG4gIH1cbiAgZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGdldHRlcik7XG4gIGVmZmVjdC5zY2hlZHVsZXIgPSBzY2hlZHVsZXIgPyAoKSA9PiBzY2hlZHVsZXIoam9iLCBmYWxzZSkgOiBqb2I7XG4gIGJvdW5kQ2xlYW51cCA9IChmbikgPT4gb25XYXRjaGVyQ2xlYW51cChmbiwgZmFsc2UsIGVmZmVjdCk7XG4gIGNsZWFudXAgPSBlZmZlY3Qub25TdG9wID0gKCkgPT4ge1xuICAgIGNvbnN0IGNsZWFudXBzID0gY2xlYW51cE1hcC5nZXQoZWZmZWN0KTtcbiAgICBpZiAoY2xlYW51cHMpIHtcbiAgICAgIGlmIChjYWxsKSB7XG4gICAgICAgIGNhbGwoY2xlYW51cHMsIDQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBjbGVhbnVwMiBvZiBjbGVhbnVwcykgY2xlYW51cDIoKTtcbiAgICAgIH1cbiAgICAgIGNsZWFudXBNYXAuZGVsZXRlKGVmZmVjdCk7XG4gICAgfVxuICB9O1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGVmZmVjdC5vblRyYWNrID0gb3B0aW9ucy5vblRyYWNrO1xuICAgIGVmZmVjdC5vblRyaWdnZXIgPSBvcHRpb25zLm9uVHJpZ2dlcjtcbiAgfVxuICBpZiAoY2IpIHtcbiAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICBqb2IodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9sZFZhbHVlID0gZWZmZWN0LnJ1bigpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChzY2hlZHVsZXIpIHtcbiAgICBzY2hlZHVsZXIoam9iLmJpbmQobnVsbCwgdHJ1ZSksIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIGVmZmVjdC5ydW4oKTtcbiAgfVxuICB3YXRjaEhhbmRsZS5wYXVzZSA9IGVmZmVjdC5wYXVzZS5iaW5kKGVmZmVjdCk7XG4gIHdhdGNoSGFuZGxlLnJlc3VtZSA9IGVmZmVjdC5yZXN1bWUuYmluZChlZmZlY3QpO1xuICB3YXRjaEhhbmRsZS5zdG9wID0gd2F0Y2hIYW5kbGU7XG4gIHJldHVybiB3YXRjaEhhbmRsZTtcbn1cbmZ1bmN0aW9uIHRyYXZlcnNlKHZhbHVlLCBkZXB0aCA9IEluZmluaXR5LCBzZWVuKSB7XG4gIGlmIChkZXB0aCA8PSAwIHx8ICFpc09iamVjdCh2YWx1ZSkgfHwgdmFsdWVbXCJfX3Zfc2tpcFwiXSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBzZWVuID0gc2VlbiB8fCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBpZiAoc2Vlbi5oYXModmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHNlZW4uYWRkKHZhbHVlKTtcbiAgZGVwdGgtLTtcbiAgaWYgKGlzUmVmKHZhbHVlKSkge1xuICAgIHRyYXZlcnNlKHZhbHVlLnZhbHVlLCBkZXB0aCwgc2Vlbik7XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0cmF2ZXJzZSh2YWx1ZVtpXSwgZGVwdGgsIHNlZW4pO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc1NldCh2YWx1ZSkgfHwgaXNNYXAodmFsdWUpKSB7XG4gICAgdmFsdWUuZm9yRWFjaCgodikgPT4ge1xuICAgICAgdHJhdmVyc2UodiwgZGVwdGgsIHNlZW4pO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdmFsdWUpIHtcbiAgICAgIHRyYXZlcnNlKHZhbHVlW2tleV0sIGRlcHRoLCBzZWVuKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh2YWx1ZSkpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsIGtleSkpIHtcbiAgICAgICAgdHJhdmVyc2UodmFsdWVba2V5XSwgZGVwdGgsIHNlZW4pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCB7IEFSUkFZX0lURVJBVEVfS0VZLCBFZmZlY3RGbGFncywgRWZmZWN0U2NvcGUsIElURVJBVEVfS0VZLCBNQVBfS0VZX0lURVJBVEVfS0VZLCBSZWFjdGl2ZUVmZmVjdCwgUmVhY3RpdmVGbGFncywgVHJhY2tPcFR5cGVzLCBUcmlnZ2VyT3BUeXBlcywgV2F0Y2hFcnJvckNvZGVzLCBjb21wdXRlZCwgY3VzdG9tUmVmLCBlZmZlY3QsIGVmZmVjdFNjb3BlLCBlbmFibGVUcmFja2luZywgZ2V0Q3VycmVudFNjb3BlLCBnZXRDdXJyZW50V2F0Y2hlciwgaXNQcm94eSwgaXNSZWFjdGl2ZSwgaXNSZWFkb25seSwgaXNSZWYsIGlzU2hhbGxvdywgbWFya1Jhdywgb25FZmZlY3RDbGVhbnVwLCBvblNjb3BlRGlzcG9zZSwgb25XYXRjaGVyQ2xlYW51cCwgcGF1c2VUcmFja2luZywgcHJveHlSZWZzLCByZWFjdGl2ZSwgcmVhY3RpdmVSZWFkQXJyYXksIHJlYWRvbmx5LCByZWYsIHJlc2V0VHJhY2tpbmcsIHNoYWxsb3dSZWFjdGl2ZSwgc2hhbGxvd1JlYWRBcnJheSwgc2hhbGxvd1JlYWRvbmx5LCBzaGFsbG93UmVmLCBzdG9wLCB0b1JhdywgdG9SZWFjdGl2ZSwgdG9SZWFkb25seSwgdG9SZWYsIHRvUmVmcywgdG9WYWx1ZSwgdHJhY2ssIHRyYXZlcnNlLCB0cmlnZ2VyLCB0cmlnZ2VyUmVmLCB1bnJlZiwgd2F0Y2ggfTtcbiIsIi8qKlxuKiBAdnVlL3J1bnRpbWUtY29yZSB2My41LjEzXG4qIChjKSAyMDE4LXByZXNlbnQgWXV4aSAoRXZhbikgWW91IGFuZCBWdWUgY29udHJpYnV0b3JzXG4qIEBsaWNlbnNlIE1JVFxuKiovXG5pbXBvcnQgeyBwYXVzZVRyYWNraW5nLCByZXNldFRyYWNraW5nLCBpc1JlZiwgdG9SYXcsIHRyYXZlcnNlLCBzaGFsbG93UmVmLCByZWFkb25seSwgaXNSZWFjdGl2ZSwgcmVmLCBpc1NoYWxsb3csIHNoYWxsb3dSZWFkQXJyYXksIHRvUmVhY3RpdmUsIHNoYWxsb3dSZWFkb25seSwgdHJhY2ssIHJlYWN0aXZlLCBzaGFsbG93UmVhY3RpdmUsIHRyaWdnZXIsIFJlYWN0aXZlRWZmZWN0LCB3YXRjaCBhcyB3YXRjaCQxLCBjdXN0b21SZWYsIGlzUHJveHksIHByb3h5UmVmcywgbWFya1JhdywgRWZmZWN0U2NvcGUsIGNvbXB1dGVkIGFzIGNvbXB1dGVkJDEsIGlzUmVhZG9ubHkgfSBmcm9tICdAdnVlL3JlYWN0aXZpdHknO1xuZXhwb3J0IHsgRWZmZWN0U2NvcGUsIFJlYWN0aXZlRWZmZWN0LCBUcmFja09wVHlwZXMsIFRyaWdnZXJPcFR5cGVzLCBjdXN0b21SZWYsIGVmZmVjdCwgZWZmZWN0U2NvcGUsIGdldEN1cnJlbnRTY29wZSwgZ2V0Q3VycmVudFdhdGNoZXIsIGlzUHJveHksIGlzUmVhY3RpdmUsIGlzUmVhZG9ubHksIGlzUmVmLCBpc1NoYWxsb3csIG1hcmtSYXcsIG9uU2NvcGVEaXNwb3NlLCBvbldhdGNoZXJDbGVhbnVwLCBwcm94eVJlZnMsIHJlYWN0aXZlLCByZWFkb25seSwgcmVmLCBzaGFsbG93UmVhY3RpdmUsIHNoYWxsb3dSZWFkb25seSwgc2hhbGxvd1JlZiwgc3RvcCwgdG9SYXcsIHRvUmVmLCB0b1JlZnMsIHRvVmFsdWUsIHRyaWdnZXJSZWYsIHVucmVmIH0gZnJvbSAnQHZ1ZS9yZWFjdGl2aXR5JztcbmltcG9ydCB7IGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCBpc1Byb21pc2UsIGlzQXJyYXksIEVNUFRZX09CSiwgTk9PUCwgZ2V0R2xvYmFsVGhpcywgZXh0ZW5kLCBpc0J1aWx0SW5EaXJlY3RpdmUsIGhhc093biwgcmVtb3ZlLCBkZWYsIGlzT24sIGlzUmVzZXJ2ZWRQcm9wLCBub3JtYWxpemVDbGFzcywgc3RyaW5naWZ5U3R5bGUsIG5vcm1hbGl6ZVN0eWxlLCBpc0tub3duU3ZnQXR0ciwgaXNCb29sZWFuQXR0ciwgaXNLbm93bkh0bWxBdHRyLCBpbmNsdWRlQm9vbGVhbkF0dHIsIGlzUmVuZGVyYWJsZUF0dHJWYWx1ZSwgZ2V0RXNjYXBlZENzc1Zhck5hbWUsIGlzT2JqZWN0LCBpc1JlZ0V4cCwgaW52b2tlQXJyYXlGbnMsIHRvSGFuZGxlcktleSwgY2FwaXRhbGl6ZSwgY2FtZWxpemUsIGlzU3ltYm9sLCBpc0dsb2JhbGx5QWxsb3dlZCwgTk8sIGh5cGhlbmF0ZSwgRU1QVFlfQVJSLCB0b1Jhd1R5cGUsIG1ha2VNYXAsIGhhc0NoYW5nZWQsIGxvb3NlVG9OdW1iZXIsIGlzTW9kZWxMaXN0ZW5lciwgdG9OdW1iZXIgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5leHBvcnQgeyBjYW1lbGl6ZSwgY2FwaXRhbGl6ZSwgbm9ybWFsaXplQ2xhc3MsIG5vcm1hbGl6ZVByb3BzLCBub3JtYWxpemVTdHlsZSwgdG9EaXNwbGF5U3RyaW5nLCB0b0hhbmRsZXJLZXkgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5cbmNvbnN0IHN0YWNrID0gW107XG5mdW5jdGlvbiBwdXNoV2FybmluZ0NvbnRleHQodm5vZGUpIHtcbiAgc3RhY2sucHVzaCh2bm9kZSk7XG59XG5mdW5jdGlvbiBwb3BXYXJuaW5nQ29udGV4dCgpIHtcbiAgc3RhY2sucG9wKCk7XG59XG5sZXQgaXNXYXJuaW5nID0gZmFsc2U7XG5mdW5jdGlvbiB3YXJuJDEobXNnLCAuLi5hcmdzKSB7XG4gIGlmIChpc1dhcm5pbmcpIHJldHVybjtcbiAgaXNXYXJuaW5nID0gdHJ1ZTtcbiAgcGF1c2VUcmFja2luZygpO1xuICBjb25zdCBpbnN0YW5jZSA9IHN0YWNrLmxlbmd0aCA/IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdLmNvbXBvbmVudCA6IG51bGw7XG4gIGNvbnN0IGFwcFdhcm5IYW5kbGVyID0gaW5zdGFuY2UgJiYgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcud2FybkhhbmRsZXI7XG4gIGNvbnN0IHRyYWNlID0gZ2V0Q29tcG9uZW50VHJhY2UoKTtcbiAgaWYgKGFwcFdhcm5IYW5kbGVyKSB7XG4gICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKFxuICAgICAgYXBwV2FybkhhbmRsZXIsXG4gICAgICBpbnN0YW5jZSxcbiAgICAgIDExLFxuICAgICAgW1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcbiAgICAgICAgbXNnICsgYXJncy5tYXAoKGEpID0+IHtcbiAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSBhLnRvU3RyaW5nKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbChhKSkgIT0gbnVsbCA/IF9iIDogSlNPTi5zdHJpbmdpZnkoYSk7XG4gICAgICAgIH0pLmpvaW4oXCJcIiksXG4gICAgICAgIGluc3RhbmNlICYmIGluc3RhbmNlLnByb3h5LFxuICAgICAgICB0cmFjZS5tYXAoXG4gICAgICAgICAgKHsgdm5vZGUgfSkgPT4gYGF0IDwke2Zvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIHZub2RlLnR5cGUpfT5gXG4gICAgICAgICkuam9pbihcIlxcblwiKSxcbiAgICAgICAgdHJhY2VcbiAgICAgIF1cbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHdhcm5BcmdzID0gW2BbVnVlIHdhcm5dOiAke21zZ31gLCAuLi5hcmdzXTtcbiAgICBpZiAodHJhY2UubGVuZ3RoICYmIC8vIGF2b2lkIHNwYW1taW5nIGNvbnNvbGUgZHVyaW5nIHRlc3RzXG4gICAgdHJ1ZSkge1xuICAgICAgd2FybkFyZ3MucHVzaChgXG5gLCAuLi5mb3JtYXRUcmFjZSh0cmFjZSkpO1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4oLi4ud2FybkFyZ3MpO1xuICB9XG4gIHJlc2V0VHJhY2tpbmcoKTtcbiAgaXNXYXJuaW5nID0gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRUcmFjZSgpIHtcbiAgbGV0IGN1cnJlbnRWTm9kZSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICBpZiAoIWN1cnJlbnRWTm9kZSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBub3JtYWxpemVkU3RhY2sgPSBbXTtcbiAgd2hpbGUgKGN1cnJlbnRWTm9kZSkge1xuICAgIGNvbnN0IGxhc3QgPSBub3JtYWxpemVkU3RhY2tbMF07XG4gICAgaWYgKGxhc3QgJiYgbGFzdC52bm9kZSA9PT0gY3VycmVudFZOb2RlKSB7XG4gICAgICBsYXN0LnJlY3Vyc2VDb3VudCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBub3JtYWxpemVkU3RhY2sucHVzaCh7XG4gICAgICAgIHZub2RlOiBjdXJyZW50Vk5vZGUsXG4gICAgICAgIHJlY3Vyc2VDb3VudDogMFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudEluc3RhbmNlID0gY3VycmVudFZOb2RlLmNvbXBvbmVudCAmJiBjdXJyZW50Vk5vZGUuY29tcG9uZW50LnBhcmVudDtcbiAgICBjdXJyZW50Vk5vZGUgPSBwYXJlbnRJbnN0YW5jZSAmJiBwYXJlbnRJbnN0YW5jZS52bm9kZTtcbiAgfVxuICByZXR1cm4gbm9ybWFsaXplZFN0YWNrO1xufVxuZnVuY3Rpb24gZm9ybWF0VHJhY2UodHJhY2UpIHtcbiAgY29uc3QgbG9ncyA9IFtdO1xuICB0cmFjZS5mb3JFYWNoKChlbnRyeSwgaSkgPT4ge1xuICAgIGxvZ3MucHVzaCguLi5pID09PSAwID8gW10gOiBbYFxuYF0sIC4uLmZvcm1hdFRyYWNlRW50cnkoZW50cnkpKTtcbiAgfSk7XG4gIHJldHVybiBsb2dzO1xufVxuZnVuY3Rpb24gZm9ybWF0VHJhY2VFbnRyeSh7IHZub2RlLCByZWN1cnNlQ291bnQgfSkge1xuICBjb25zdCBwb3N0Zml4ID0gcmVjdXJzZUNvdW50ID4gMCA/IGAuLi4gKCR7cmVjdXJzZUNvdW50fSByZWN1cnNpdmUgY2FsbHMpYCA6IGBgO1xuICBjb25zdCBpc1Jvb3QgPSB2bm9kZS5jb21wb25lbnQgPyB2bm9kZS5jb21wb25lbnQucGFyZW50ID09IG51bGwgOiBmYWxzZTtcbiAgY29uc3Qgb3BlbiA9IGAgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShcbiAgICB2bm9kZS5jb21wb25lbnQsXG4gICAgdm5vZGUudHlwZSxcbiAgICBpc1Jvb3RcbiAgKX1gO1xuICBjb25zdCBjbG9zZSA9IGA+YCArIHBvc3RmaXg7XG4gIHJldHVybiB2bm9kZS5wcm9wcyA/IFtvcGVuLCAuLi5mb3JtYXRQcm9wcyh2bm9kZS5wcm9wcyksIGNsb3NlXSA6IFtvcGVuICsgY2xvc2VdO1xufVxuZnVuY3Rpb24gZm9ybWF0UHJvcHMocHJvcHMpIHtcbiAgY29uc3QgcmVzID0gW107XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG4gIGtleXMuc2xpY2UoMCwgMykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgcmVzLnB1c2goLi4uZm9ybWF0UHJvcChrZXksIHByb3BzW2tleV0pKTtcbiAgfSk7XG4gIGlmIChrZXlzLmxlbmd0aCA+IDMpIHtcbiAgICByZXMucHVzaChgIC4uLmApO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBmb3JtYXRQcm9wKGtleSwgdmFsdWUsIHJhdykge1xuICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIiB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcbiAgfSBlbHNlIGlmIChpc1JlZih2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IGZvcm1hdFByb3Aoa2V5LCB0b1Jhdyh2YWx1ZS52YWx1ZSksIHRydWUpO1xuICAgIHJldHVybiByYXcgPyB2YWx1ZSA6IFtgJHtrZXl9PVJlZjxgLCB2YWx1ZSwgYD5gXTtcbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgIHJldHVybiBbYCR7a2V5fT1mbiR7dmFsdWUubmFtZSA/IGA8JHt2YWx1ZS5uYW1lfT5gIDogYGB9YF07XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSB0b1Jhdyh2YWx1ZSk7XG4gICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09YCwgdmFsdWVdO1xuICB9XG59XG5mdW5jdGlvbiBhc3NlcnROdW1iZXIodmFsLCB0eXBlKSB7XG4gIGlmICghISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkgcmV0dXJuO1xuICBpZiAodmFsID09PSB2b2lkIDApIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCAhPT0gXCJudW1iZXJcIikge1xuICAgIHdhcm4kMShgJHt0eXBlfSBpcyBub3QgYSB2YWxpZCBudW1iZXIgLSBnb3QgJHtKU09OLnN0cmluZ2lmeSh2YWwpfS5gKTtcbiAgfSBlbHNlIGlmIChpc05hTih2YWwpKSB7XG4gICAgd2FybiQxKGAke3R5cGV9IGlzIE5hTiAtIHRoZSBkdXJhdGlvbiBleHByZXNzaW9uIG1pZ2h0IGJlIGluY29ycmVjdC5gKTtcbiAgfVxufVxuXG5jb25zdCBFcnJvckNvZGVzID0ge1xuICBcIlNFVFVQX0ZVTkNUSU9OXCI6IDAsXG4gIFwiMFwiOiBcIlNFVFVQX0ZVTkNUSU9OXCIsXG4gIFwiUkVOREVSX0ZVTkNUSU9OXCI6IDEsXG4gIFwiMVwiOiBcIlJFTkRFUl9GVU5DVElPTlwiLFxuICBcIk5BVElWRV9FVkVOVF9IQU5ETEVSXCI6IDUsXG4gIFwiNVwiOiBcIk5BVElWRV9FVkVOVF9IQU5ETEVSXCIsXG4gIFwiQ09NUE9ORU5UX0VWRU5UX0hBTkRMRVJcIjogNixcbiAgXCI2XCI6IFwiQ09NUE9ORU5UX0VWRU5UX0hBTkRMRVJcIixcbiAgXCJWTk9ERV9IT09LXCI6IDcsXG4gIFwiN1wiOiBcIlZOT0RFX0hPT0tcIixcbiAgXCJESVJFQ1RJVkVfSE9PS1wiOiA4LFxuICBcIjhcIjogXCJESVJFQ1RJVkVfSE9PS1wiLFxuICBcIlRSQU5TSVRJT05fSE9PS1wiOiA5LFxuICBcIjlcIjogXCJUUkFOU0lUSU9OX0hPT0tcIixcbiAgXCJBUFBfRVJST1JfSEFORExFUlwiOiAxMCxcbiAgXCIxMFwiOiBcIkFQUF9FUlJPUl9IQU5ETEVSXCIsXG4gIFwiQVBQX1dBUk5fSEFORExFUlwiOiAxMSxcbiAgXCIxMVwiOiBcIkFQUF9XQVJOX0hBTkRMRVJcIixcbiAgXCJGVU5DVElPTl9SRUZcIjogMTIsXG4gIFwiMTJcIjogXCJGVU5DVElPTl9SRUZcIixcbiAgXCJBU1lOQ19DT01QT05FTlRfTE9BREVSXCI6IDEzLFxuICBcIjEzXCI6IFwiQVNZTkNfQ09NUE9ORU5UX0xPQURFUlwiLFxuICBcIlNDSEVEVUxFUlwiOiAxNCxcbiAgXCIxNFwiOiBcIlNDSEVEVUxFUlwiLFxuICBcIkNPTVBPTkVOVF9VUERBVEVcIjogMTUsXG4gIFwiMTVcIjogXCJDT01QT05FTlRfVVBEQVRFXCIsXG4gIFwiQVBQX1VOTU9VTlRfQ0xFQU5VUFwiOiAxNixcbiAgXCIxNlwiOiBcIkFQUF9VTk1PVU5UX0NMRUFOVVBcIlxufTtcbmNvbnN0IEVycm9yVHlwZVN0cmluZ3MkMSA9IHtcbiAgW1wic3BcIl06IFwic2VydmVyUHJlZmV0Y2ggaG9va1wiLFxuICBbXCJiY1wiXTogXCJiZWZvcmVDcmVhdGUgaG9va1wiLFxuICBbXCJjXCJdOiBcImNyZWF0ZWQgaG9va1wiLFxuICBbXCJibVwiXTogXCJiZWZvcmVNb3VudCBob29rXCIsXG4gIFtcIm1cIl06IFwibW91bnRlZCBob29rXCIsXG4gIFtcImJ1XCJdOiBcImJlZm9yZVVwZGF0ZSBob29rXCIsXG4gIFtcInVcIl06IFwidXBkYXRlZFwiLFxuICBbXCJidW1cIl06IFwiYmVmb3JlVW5tb3VudCBob29rXCIsXG4gIFtcInVtXCJdOiBcInVubW91bnRlZCBob29rXCIsXG4gIFtcImFcIl06IFwiYWN0aXZhdGVkIGhvb2tcIixcbiAgW1wiZGFcIl06IFwiZGVhY3RpdmF0ZWQgaG9va1wiLFxuICBbXCJlY1wiXTogXCJlcnJvckNhcHR1cmVkIGhvb2tcIixcbiAgW1wicnRjXCJdOiBcInJlbmRlclRyYWNrZWQgaG9va1wiLFxuICBbXCJydGdcIl06IFwicmVuZGVyVHJpZ2dlcmVkIGhvb2tcIixcbiAgWzBdOiBcInNldHVwIGZ1bmN0aW9uXCIsXG4gIFsxXTogXCJyZW5kZXIgZnVuY3Rpb25cIixcbiAgWzJdOiBcIndhdGNoZXIgZ2V0dGVyXCIsXG4gIFszXTogXCJ3YXRjaGVyIGNhbGxiYWNrXCIsXG4gIFs0XTogXCJ3YXRjaGVyIGNsZWFudXAgZnVuY3Rpb25cIixcbiAgWzVdOiBcIm5hdGl2ZSBldmVudCBoYW5kbGVyXCIsXG4gIFs2XTogXCJjb21wb25lbnQgZXZlbnQgaGFuZGxlclwiLFxuICBbN106IFwidm5vZGUgaG9va1wiLFxuICBbOF06IFwiZGlyZWN0aXZlIGhvb2tcIixcbiAgWzldOiBcInRyYW5zaXRpb24gaG9va1wiLFxuICBbMTBdOiBcImFwcCBlcnJvckhhbmRsZXJcIixcbiAgWzExXTogXCJhcHAgd2FybkhhbmRsZXJcIixcbiAgWzEyXTogXCJyZWYgZnVuY3Rpb25cIixcbiAgWzEzXTogXCJhc3luYyBjb21wb25lbnQgbG9hZGVyXCIsXG4gIFsxNF06IFwic2NoZWR1bGVyIGZsdXNoXCIsXG4gIFsxNV06IFwiY29tcG9uZW50IHVwZGF0ZVwiLFxuICBbMTZdOiBcImFwcCB1bm1vdW50IGNsZWFudXAgZnVuY3Rpb25cIlxufTtcbmZ1bmN0aW9uIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXJncyA/IGZuKC4uLmFyZ3MpIDogZm4oKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgdHlwZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGZuLCBpbnN0YW5jZSwgdHlwZSwgYXJncykge1xuICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICBjb25zdCByZXMgPSBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKTtcbiAgICBpZiAocmVzICYmIGlzUHJvbWlzZShyZXMpKSB7XG4gICAgICByZXMuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIGlmIChpc0FycmF5KGZuKSkge1xuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlcy5wdXNoKGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGZuW2ldLCBpbnN0YW5jZSwgdHlwZSwgYXJncykpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgSW52YWxpZCB2YWx1ZSB0eXBlIHBhc3NlZCB0byBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZygpOiAke3R5cGVvZiBmbn1gXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgdHlwZSwgdGhyb3dJbkRldiA9IHRydWUpIHtcbiAgY29uc3QgY29udGV4dFZOb2RlID0gaW5zdGFuY2UgPyBpbnN0YW5jZS52bm9kZSA6IG51bGw7XG4gIGNvbnN0IHsgZXJyb3JIYW5kbGVyLCB0aHJvd1VuaGFuZGxlZEVycm9ySW5Qcm9kdWN0aW9uIH0gPSBpbnN0YW5jZSAmJiBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZyB8fCBFTVBUWV9PQko7XG4gIGlmIChpbnN0YW5jZSkge1xuICAgIGxldCBjdXIgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgY29uc3QgZXhwb3NlZEluc3RhbmNlID0gaW5zdGFuY2UucHJveHk7XG4gICAgY29uc3QgZXJyb3JJbmZvID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IEVycm9yVHlwZVN0cmluZ3MkMVt0eXBlXSA6IGBodHRwczovL3Z1ZWpzLm9yZy9lcnJvci1yZWZlcmVuY2UvI3J1bnRpbWUtJHt0eXBlfWA7XG4gICAgd2hpbGUgKGN1cikge1xuICAgICAgY29uc3QgZXJyb3JDYXB0dXJlZEhvb2tzID0gY3VyLmVjO1xuICAgICAgaWYgKGVycm9yQ2FwdHVyZWRIb29rcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVycm9yQ2FwdHVyZWRIb29rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChlcnJvckNhcHR1cmVkSG9va3NbaV0oZXJyLCBleHBvc2VkSW5zdGFuY2UsIGVycm9ySW5mbykgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjdXIgPSBjdXIucGFyZW50O1xuICAgIH1cbiAgICBpZiAoZXJyb3JIYW5kbGVyKSB7XG4gICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZXJyb3JIYW5kbGVyLCBudWxsLCAxMCwgW1xuICAgICAgICBlcnIsXG4gICAgICAgIGV4cG9zZWRJbnN0YW5jZSxcbiAgICAgICAgZXJyb3JJbmZvXG4gICAgICBdKTtcbiAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgbG9nRXJyb3IoZXJyLCB0eXBlLCBjb250ZXh0Vk5vZGUsIHRocm93SW5EZXYsIHRocm93VW5oYW5kbGVkRXJyb3JJblByb2R1Y3Rpb24pO1xufVxuZnVuY3Rpb24gbG9nRXJyb3IoZXJyLCB0eXBlLCBjb250ZXh0Vk5vZGUsIHRocm93SW5EZXYgPSB0cnVlLCB0aHJvd0luUHJvZCA9IGZhbHNlKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgY29uc3QgaW5mbyA9IEVycm9yVHlwZVN0cmluZ3MkMVt0eXBlXTtcbiAgICBpZiAoY29udGV4dFZOb2RlKSB7XG4gICAgICBwdXNoV2FybmluZ0NvbnRleHQoY29udGV4dFZOb2RlKTtcbiAgICB9XG4gICAgd2FybiQxKGBVbmhhbmRsZWQgZXJyb3Ike2luZm8gPyBgIGR1cmluZyBleGVjdXRpb24gb2YgJHtpbmZvfWAgOiBgYH1gKTtcbiAgICBpZiAoY29udGV4dFZOb2RlKSB7XG4gICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgIH1cbiAgICBpZiAodGhyb3dJbkRldikge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHRocm93SW5Qcm9kKSB7XG4gICAgdGhyb3cgZXJyO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfVxufVxuXG5jb25zdCBxdWV1ZSA9IFtdO1xubGV0IGZsdXNoSW5kZXggPSAtMTtcbmNvbnN0IHBlbmRpbmdQb3N0Rmx1c2hDYnMgPSBbXTtcbmxldCBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBudWxsO1xubGV0IHBvc3RGbHVzaEluZGV4ID0gMDtcbmNvbnN0IHJlc29sdmVkUHJvbWlzZSA9IC8qIEBfX1BVUkVfXyAqLyBQcm9taXNlLnJlc29sdmUoKTtcbmxldCBjdXJyZW50Rmx1c2hQcm9taXNlID0gbnVsbDtcbmNvbnN0IFJFQ1VSU0lPTl9MSU1JVCA9IDEwMDtcbmZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gIGNvbnN0IHAgPSBjdXJyZW50Rmx1c2hQcm9taXNlIHx8IHJlc29sdmVkUHJvbWlzZTtcbiAgcmV0dXJuIGZuID8gcC50aGVuKHRoaXMgPyBmbi5iaW5kKHRoaXMpIDogZm4pIDogcDtcbn1cbmZ1bmN0aW9uIGZpbmRJbnNlcnRpb25JbmRleChpZCkge1xuICBsZXQgc3RhcnQgPSBmbHVzaEluZGV4ICsgMTtcbiAgbGV0IGVuZCA9IHF1ZXVlLmxlbmd0aDtcbiAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG4gICAgY29uc3QgbWlkZGxlID0gc3RhcnQgKyBlbmQgPj4+IDE7XG4gICAgY29uc3QgbWlkZGxlSm9iID0gcXVldWVbbWlkZGxlXTtcbiAgICBjb25zdCBtaWRkbGVKb2JJZCA9IGdldElkKG1pZGRsZUpvYik7XG4gICAgaWYgKG1pZGRsZUpvYklkIDwgaWQgfHwgbWlkZGxlSm9iSWQgPT09IGlkICYmIG1pZGRsZUpvYi5mbGFncyAmIDIpIHtcbiAgICAgIHN0YXJ0ID0gbWlkZGxlICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5kID0gbWlkZGxlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3RhcnQ7XG59XG5mdW5jdGlvbiBxdWV1ZUpvYihqb2IpIHtcbiAgaWYgKCEoam9iLmZsYWdzICYgMSkpIHtcbiAgICBjb25zdCBqb2JJZCA9IGdldElkKGpvYik7XG4gICAgY29uc3QgbGFzdEpvYiA9IHF1ZXVlW3F1ZXVlLmxlbmd0aCAtIDFdO1xuICAgIGlmICghbGFzdEpvYiB8fCAvLyBmYXN0IHBhdGggd2hlbiB0aGUgam9iIGlkIGlzIGxhcmdlciB0aGFuIHRoZSB0YWlsXG4gICAgIShqb2IuZmxhZ3MgJiAyKSAmJiBqb2JJZCA+PSBnZXRJZChsYXN0Sm9iKSkge1xuICAgICAgcXVldWUucHVzaChqb2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWV1ZS5zcGxpY2UoZmluZEluc2VydGlvbkluZGV4KGpvYklkKSwgMCwgam9iKTtcbiAgICB9XG4gICAgam9iLmZsYWdzIHw9IDE7XG4gICAgcXVldWVGbHVzaCgpO1xuICB9XG59XG5mdW5jdGlvbiBxdWV1ZUZsdXNoKCkge1xuICBpZiAoIWN1cnJlbnRGbHVzaFByb21pc2UpIHtcbiAgICBjdXJyZW50Rmx1c2hQcm9taXNlID0gcmVzb2x2ZWRQcm9taXNlLnRoZW4oZmx1c2hKb2JzKTtcbiAgfVxufVxuZnVuY3Rpb24gcXVldWVQb3N0Rmx1c2hDYihjYikge1xuICBpZiAoIWlzQXJyYXkoY2IpKSB7XG4gICAgaWYgKGFjdGl2ZVBvc3RGbHVzaENicyAmJiBjYi5pZCA9PT0gLTEpIHtcbiAgICAgIGFjdGl2ZVBvc3RGbHVzaENicy5zcGxpY2UocG9zdEZsdXNoSW5kZXggKyAxLCAwLCBjYik7XG4gICAgfSBlbHNlIGlmICghKGNiLmZsYWdzICYgMSkpIHtcbiAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMucHVzaChjYik7XG4gICAgICBjYi5mbGFncyB8PSAxO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwZW5kaW5nUG9zdEZsdXNoQ2JzLnB1c2goLi4uY2IpO1xuICB9XG4gIHF1ZXVlRmx1c2goKTtcbn1cbmZ1bmN0aW9uIGZsdXNoUHJlRmx1c2hDYnMoaW5zdGFuY2UsIHNlZW4sIGkgPSBmbHVzaEluZGV4ICsgMSkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHNlZW4gPSBzZWVuIHx8IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIH1cbiAgZm9yICg7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNiID0gcXVldWVbaV07XG4gICAgaWYgKGNiICYmIGNiLmZsYWdzICYgMikge1xuICAgICAgaWYgKGluc3RhbmNlICYmIGNiLmlkICE9PSBpbnN0YW5jZS51aWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgY2IpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcXVldWUuc3BsaWNlKGksIDEpO1xuICAgICAgaS0tO1xuICAgICAgaWYgKGNiLmZsYWdzICYgNCkge1xuICAgICAgICBjYi5mbGFncyAmPSB+MTtcbiAgICAgIH1cbiAgICAgIGNiKCk7XG4gICAgICBpZiAoIShjYi5mbGFncyAmIDQpKSB7XG4gICAgICAgIGNiLmZsYWdzICY9IH4xO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gZmx1c2hQb3N0Rmx1c2hDYnMoc2Vlbikge1xuICBpZiAocGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGgpIHtcbiAgICBjb25zdCBkZWR1cGVkID0gWy4uLm5ldyBTZXQocGVuZGluZ1Bvc3RGbHVzaENicyldLnNvcnQoXG4gICAgICAoYSwgYikgPT4gZ2V0SWQoYSkgLSBnZXRJZChiKVxuICAgICk7XG4gICAgcGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGggPSAwO1xuICAgIGlmIChhY3RpdmVQb3N0Rmx1c2hDYnMpIHtcbiAgICAgIGFjdGl2ZVBvc3RGbHVzaENicy5wdXNoKC4uLmRlZHVwZWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBkZWR1cGVkO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBzZWVuID0gc2VlbiB8fCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBmb3IgKHBvc3RGbHVzaEluZGV4ID0gMDsgcG9zdEZsdXNoSW5kZXggPCBhY3RpdmVQb3N0Rmx1c2hDYnMubGVuZ3RoOyBwb3N0Rmx1c2hJbmRleCsrKSB7XG4gICAgICBjb25zdCBjYiA9IGFjdGl2ZVBvc3RGbHVzaENic1twb3N0Rmx1c2hJbmRleF07XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2VlbiwgY2IpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGNiLmZsYWdzICYgNCkge1xuICAgICAgICBjYi5mbGFncyAmPSB+MTtcbiAgICAgIH1cbiAgICAgIGlmICghKGNiLmZsYWdzICYgOCkpIGNiKCk7XG4gICAgICBjYi5mbGFncyAmPSB+MTtcbiAgICB9XG4gICAgYWN0aXZlUG9zdEZsdXNoQ2JzID0gbnVsbDtcbiAgICBwb3N0Rmx1c2hJbmRleCA9IDA7XG4gIH1cbn1cbmNvbnN0IGdldElkID0gKGpvYikgPT4gam9iLmlkID09IG51bGwgPyBqb2IuZmxhZ3MgJiAyID8gLTEgOiBJbmZpbml0eSA6IGpvYi5pZDtcbmZ1bmN0aW9uIGZsdXNoSm9icyhzZWVuKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgc2VlbiA9IHNlZW4gfHwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgfVxuICBjb25zdCBjaGVjayA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyAoam9iKSA9PiBjaGVja1JlY3Vyc2l2ZVVwZGF0ZXMoc2Vlbiwgam9iKSA6IE5PT1A7XG4gIHRyeSB7XG4gICAgZm9yIChmbHVzaEluZGV4ID0gMDsgZmx1c2hJbmRleCA8IHF1ZXVlLmxlbmd0aDsgZmx1c2hJbmRleCsrKSB7XG4gICAgICBjb25zdCBqb2IgPSBxdWV1ZVtmbHVzaEluZGV4XTtcbiAgICAgIGlmIChqb2IgJiYgIShqb2IuZmxhZ3MgJiA4KSkge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjaGVjayhqb2IpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGpvYi5mbGFncyAmIDQpIHtcbiAgICAgICAgICBqb2IuZmxhZ3MgJj0gfjE7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKFxuICAgICAgICAgIGpvYixcbiAgICAgICAgICBqb2IuaSxcbiAgICAgICAgICBqb2IuaSA/IDE1IDogMTRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCEoam9iLmZsYWdzICYgNCkpIHtcbiAgICAgICAgICBqb2IuZmxhZ3MgJj0gfjE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgZm9yICg7IGZsdXNoSW5kZXggPCBxdWV1ZS5sZW5ndGg7IGZsdXNoSW5kZXgrKykge1xuICAgICAgY29uc3Qgam9iID0gcXVldWVbZmx1c2hJbmRleF07XG4gICAgICBpZiAoam9iKSB7XG4gICAgICAgIGpvYi5mbGFncyAmPSB+MTtcbiAgICAgIH1cbiAgICB9XG4gICAgZmx1c2hJbmRleCA9IC0xO1xuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgZmx1c2hQb3N0Rmx1c2hDYnMoc2Vlbik7XG4gICAgY3VycmVudEZsdXNoUHJvbWlzZSA9IG51bGw7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCB8fCBwZW5kaW5nUG9zdEZsdXNoQ2JzLmxlbmd0aCkge1xuICAgICAgZmx1c2hKb2JzKHNlZW4pO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGZuKSB7XG4gIGNvbnN0IGNvdW50ID0gc2Vlbi5nZXQoZm4pIHx8IDA7XG4gIGlmIChjb3VudCA+IFJFQ1VSU0lPTl9MSU1JVCkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gZm4uaTtcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gaW5zdGFuY2UgJiYgZ2V0Q29tcG9uZW50TmFtZShpbnN0YW5jZS50eXBlKTtcbiAgICBoYW5kbGVFcnJvcihcbiAgICAgIGBNYXhpbXVtIHJlY3Vyc2l2ZSB1cGRhdGVzIGV4Y2VlZGVkJHtjb21wb25lbnROYW1lID8gYCBpbiBjb21wb25lbnQgPCR7Y29tcG9uZW50TmFtZX0+YCA6IGBgfS4gVGhpcyBtZWFucyB5b3UgaGF2ZSBhIHJlYWN0aXZlIGVmZmVjdCB0aGF0IGlzIG11dGF0aW5nIGl0cyBvd24gZGVwZW5kZW5jaWVzIGFuZCB0aHVzIHJlY3Vyc2l2ZWx5IHRyaWdnZXJpbmcgaXRzZWxmLiBQb3NzaWJsZSBzb3VyY2VzIGluY2x1ZGUgY29tcG9uZW50IHRlbXBsYXRlLCByZW5kZXIgZnVuY3Rpb24sIHVwZGF0ZWQgaG9vayBvciB3YXRjaGVyIHNvdXJjZSBmdW5jdGlvbi5gLFxuICAgICAgbnVsbCxcbiAgICAgIDEwXG4gICAgKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBzZWVuLnNldChmbiwgY291bnQgKyAxKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5sZXQgaXNIbXJVcGRhdGluZyA9IGZhbHNlO1xuY29uc3QgaG1yRGlydHlDb21wb25lbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9ITVJfUlVOVElNRV9fID0ge1xuICAgIGNyZWF0ZVJlY29yZDogdHJ5V3JhcChjcmVhdGVSZWNvcmQpLFxuICAgIHJlcmVuZGVyOiB0cnlXcmFwKHJlcmVuZGVyKSxcbiAgICByZWxvYWQ6IHRyeVdyYXAocmVsb2FkKVxuICB9O1xufVxuY29uc3QgbWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmZ1bmN0aW9uIHJlZ2lzdGVySE1SKGluc3RhbmNlKSB7XG4gIGNvbnN0IGlkID0gaW5zdGFuY2UudHlwZS5fX2htcklkO1xuICBsZXQgcmVjb3JkID0gbWFwLmdldChpZCk7XG4gIGlmICghcmVjb3JkKSB7XG4gICAgY3JlYXRlUmVjb3JkKGlkLCBpbnN0YW5jZS50eXBlKTtcbiAgICByZWNvcmQgPSBtYXAuZ2V0KGlkKTtcbiAgfVxuICByZWNvcmQuaW5zdGFuY2VzLmFkZChpbnN0YW5jZSk7XG59XG5mdW5jdGlvbiB1bnJlZ2lzdGVySE1SKGluc3RhbmNlKSB7XG4gIG1hcC5nZXQoaW5zdGFuY2UudHlwZS5fX2htcklkKS5pbnN0YW5jZXMuZGVsZXRlKGluc3RhbmNlKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlY29yZChpZCwgaW5pdGlhbERlZikge1xuICBpZiAobWFwLmhhcyhpZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgbWFwLnNldChpZCwge1xuICAgIGluaXRpYWxEZWY6IG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluaXRpYWxEZWYpLFxuICAgIGluc3RhbmNlczogLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKVxuICB9KTtcbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBub3JtYWxpemVDbGFzc0NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgcmV0dXJuIGlzQ2xhc3NDb21wb25lbnQoY29tcG9uZW50KSA/IGNvbXBvbmVudC5fX3ZjY09wdHMgOiBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiByZXJlbmRlcihpZCwgbmV3UmVuZGVyKSB7XG4gIGNvbnN0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICBpZiAoIXJlY29yZCkge1xuICAgIHJldHVybjtcbiAgfVxuICByZWNvcmQuaW5pdGlhbERlZi5yZW5kZXIgPSBuZXdSZW5kZXI7XG4gIFsuLi5yZWNvcmQuaW5zdGFuY2VzXS5mb3JFYWNoKChpbnN0YW5jZSkgPT4ge1xuICAgIGlmIChuZXdSZW5kZXIpIHtcbiAgICAgIGluc3RhbmNlLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICAgIG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluc3RhbmNlLnR5cGUpLnJlbmRlciA9IG5ld1JlbmRlcjtcbiAgICB9XG4gICAgaW5zdGFuY2UucmVuZGVyQ2FjaGUgPSBbXTtcbiAgICBpc0htclVwZGF0aW5nID0gdHJ1ZTtcbiAgICBpbnN0YW5jZS51cGRhdGUoKTtcbiAgICBpc0htclVwZGF0aW5nID0gZmFsc2U7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmVsb2FkKGlkLCBuZXdDb21wKSB7XG4gIGNvbnN0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xuICBpZiAoIXJlY29yZCkgcmV0dXJuO1xuICBuZXdDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQobmV3Q29tcCk7XG4gIHVwZGF0ZUNvbXBvbmVudERlZihyZWNvcmQuaW5pdGlhbERlZiwgbmV3Q29tcCk7XG4gIGNvbnN0IGluc3RhbmNlcyA9IFsuLi5yZWNvcmQuaW5zdGFuY2VzXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc1tpXTtcbiAgICBjb25zdCBvbGRDb21wID0gbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSk7XG4gICAgbGV0IGRpcnR5SW5zdGFuY2VzID0gaG1yRGlydHlDb21wb25lbnRzLmdldChvbGRDb21wKTtcbiAgICBpZiAoIWRpcnR5SW5zdGFuY2VzKSB7XG4gICAgICBpZiAob2xkQ29tcCAhPT0gcmVjb3JkLmluaXRpYWxEZWYpIHtcbiAgICAgICAgdXBkYXRlQ29tcG9uZW50RGVmKG9sZENvbXAsIG5ld0NvbXApO1xuICAgICAgfVxuICAgICAgaG1yRGlydHlDb21wb25lbnRzLnNldChvbGRDb21wLCBkaXJ0eUluc3RhbmNlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpO1xuICAgIH1cbiAgICBkaXJ0eUluc3RhbmNlcy5hZGQoaW5zdGFuY2UpO1xuICAgIGluc3RhbmNlLmFwcENvbnRleHQucHJvcHNDYWNoZS5kZWxldGUoaW5zdGFuY2UudHlwZSk7XG4gICAgaW5zdGFuY2UuYXBwQ29udGV4dC5lbWl0c0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcbiAgICBpbnN0YW5jZS5hcHBDb250ZXh0Lm9wdGlvbnNDYWNoZS5kZWxldGUoaW5zdGFuY2UudHlwZSk7XG4gICAgaWYgKGluc3RhbmNlLmNlUmVsb2FkKSB7XG4gICAgICBkaXJ0eUluc3RhbmNlcy5hZGQoaW5zdGFuY2UpO1xuICAgICAgaW5zdGFuY2UuY2VSZWxvYWQobmV3Q29tcC5zdHlsZXMpO1xuICAgICAgZGlydHlJbnN0YW5jZXMuZGVsZXRlKGluc3RhbmNlKTtcbiAgICB9IGVsc2UgaWYgKGluc3RhbmNlLnBhcmVudCkge1xuICAgICAgcXVldWVKb2IoKCkgPT4ge1xuICAgICAgICBpc0htclVwZGF0aW5nID0gdHJ1ZTtcbiAgICAgICAgaW5zdGFuY2UucGFyZW50LnVwZGF0ZSgpO1xuICAgICAgICBpc0htclVwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgIGRpcnR5SW5zdGFuY2VzLmRlbGV0ZShpbnN0YW5jZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGluc3RhbmNlLmFwcENvbnRleHQucmVsb2FkKSB7XG4gICAgICBpbnN0YW5jZS5hcHBDb250ZXh0LnJlbG9hZCgpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiW0hNUl0gUm9vdCBvciBtYW51YWxseSBtb3VudGVkIGluc3RhbmNlIG1vZGlmaWVkLiBGdWxsIHJlbG9hZCByZXF1aXJlZC5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGluc3RhbmNlLnJvb3QuY2UgJiYgaW5zdGFuY2UgIT09IGluc3RhbmNlLnJvb3QpIHtcbiAgICAgIGluc3RhbmNlLnJvb3QuY2UuX3JlbW92ZUNoaWxkU3R5bGUob2xkQ29tcCk7XG4gICAgfVxuICB9XG4gIHF1ZXVlUG9zdEZsdXNoQ2IoKCkgPT4ge1xuICAgIGhtckRpcnR5Q29tcG9uZW50cy5jbGVhcigpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudERlZihvbGRDb21wLCBuZXdDb21wKSB7XG4gIGV4dGVuZChvbGRDb21wLCBuZXdDb21wKTtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2xkQ29tcCkge1xuICAgIGlmIChrZXkgIT09IFwiX19maWxlXCIgJiYgIShrZXkgaW4gbmV3Q29tcCkpIHtcbiAgICAgIGRlbGV0ZSBvbGRDb21wW2tleV07XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiB0cnlXcmFwKGZuKSB7XG4gIHJldHVybiAoaWQsIGFyZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZm4oaWQsIGFyZyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFtITVJdIFNvbWV0aGluZyB3ZW50IHdyb25nIGR1cmluZyBWdWUgY29tcG9uZW50IGhvdC1yZWxvYWQuIEZ1bGwgcmVsb2FkIHJlcXVpcmVkLmBcbiAgICAgICk7XG4gICAgfVxuICB9O1xufVxuXG5sZXQgZGV2dG9vbHMkMTtcbmxldCBidWZmZXIgPSBbXTtcbmxldCBkZXZ0b29sc05vdEluc3RhbGxlZCA9IGZhbHNlO1xuZnVuY3Rpb24gZW1pdCQxKGV2ZW50LCAuLi5hcmdzKSB7XG4gIGlmIChkZXZ0b29scyQxKSB7XG4gICAgZGV2dG9vbHMkMS5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgfSBlbHNlIGlmICghZGV2dG9vbHNOb3RJbnN0YWxsZWQpIHtcbiAgICBidWZmZXIucHVzaCh7IGV2ZW50LCBhcmdzIH0pO1xuICB9XG59XG5mdW5jdGlvbiBzZXREZXZ0b29sc0hvb2skMShob29rLCB0YXJnZXQpIHtcbiAgdmFyIF9hLCBfYjtcbiAgZGV2dG9vbHMkMSA9IGhvb2s7XG4gIGlmIChkZXZ0b29scyQxKSB7XG4gICAgZGV2dG9vbHMkMS5lbmFibGVkID0gdHJ1ZTtcbiAgICBidWZmZXIuZm9yRWFjaCgoeyBldmVudCwgYXJncyB9KSA9PiBkZXZ0b29scyQxLmVtaXQoZXZlbnQsIC4uLmFyZ3MpKTtcbiAgICBidWZmZXIgPSBbXTtcbiAgfSBlbHNlIGlmIChcbiAgICAvLyBoYW5kbGUgbGF0ZSBkZXZ0b29scyBpbmplY3Rpb24gLSBvbmx5IGRvIHRoaXMgaWYgd2UgYXJlIGluIGFuIGFjdHVhbFxuICAgIC8vIGJyb3dzZXIgZW52aXJvbm1lbnQgdG8gYXZvaWQgdGhlIHRpbWVyIGhhbmRsZSBzdGFsbGluZyB0ZXN0IHJ1bm5lciBleGl0XG4gICAgLy8gKCM0ODE1KVxuICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgLy8gc29tZSBlbnZzIG1vY2sgd2luZG93IGJ1dCBub3QgZnVsbHlcbiAgICB3aW5kb3cuSFRNTEVsZW1lbnQgJiYgLy8gYWxzbyBleGNsdWRlIGpzZG9tXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgISgoX2IgPSAoX2EgPSB3aW5kb3cubmF2aWdhdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EudXNlckFnZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2IuaW5jbHVkZXMoXCJqc2RvbVwiKSlcbiAgKSB7XG4gICAgY29uc3QgcmVwbGF5ID0gdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPSB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyB8fCBbXTtcbiAgICByZXBsYXkucHVzaCgobmV3SG9vaykgPT4ge1xuICAgICAgc2V0RGV2dG9vbHNIb29rJDEobmV3SG9vaywgdGFyZ2V0KTtcbiAgICB9KTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghZGV2dG9vbHMkMSkge1xuICAgICAgICB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyA9IG51bGw7XG4gICAgICAgIGRldnRvb2xzTm90SW5zdGFsbGVkID0gdHJ1ZTtcbiAgICAgICAgYnVmZmVyID0gW107XG4gICAgICB9XG4gICAgfSwgM2UzKTtcbiAgfSBlbHNlIHtcbiAgICBkZXZ0b29sc05vdEluc3RhbGxlZCA9IHRydWU7XG4gICAgYnVmZmVyID0gW107XG4gIH1cbn1cbmZ1bmN0aW9uIGRldnRvb2xzSW5pdEFwcChhcHAsIHZlcnNpb24pIHtcbiAgZW1pdCQxKFwiYXBwOmluaXRcIiAvKiBBUFBfSU5JVCAqLywgYXBwLCB2ZXJzaW9uLCB7XG4gICAgRnJhZ21lbnQsXG4gICAgVGV4dCxcbiAgICBDb21tZW50LFxuICAgIFN0YXRpY1xuICB9KTtcbn1cbmZ1bmN0aW9uIGRldnRvb2xzVW5tb3VudEFwcChhcHApIHtcbiAgZW1pdCQxKFwiYXBwOnVubW91bnRcIiAvKiBBUFBfVU5NT1VOVCAqLywgYXBwKTtcbn1cbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50QWRkZWQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFwiY29tcG9uZW50OmFkZGVkXCIgLyogQ09NUE9ORU5UX0FEREVEICovKTtcbmNvbnN0IGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6dXBkYXRlZFwiIC8qIENPTVBPTkVOVF9VUERBVEVEICovKTtcbmNvbnN0IF9kZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFxuICBcImNvbXBvbmVudDpyZW1vdmVkXCIgLyogQ09NUE9ORU5UX1JFTU9WRUQgKi9cbik7XG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQgPSAoY29tcG9uZW50KSA9PiB7XG4gIGlmIChkZXZ0b29scyQxICYmIHR5cGVvZiBkZXZ0b29scyQxLmNsZWFudXBCdWZmZXIgPT09IFwiZnVuY3Rpb25cIiAmJiAvLyByZW1vdmUgdGhlIGNvbXBvbmVudCBpZiBpdCB3YXNuJ3QgYnVmZmVyZWRcbiAgIWRldnRvb2xzJDEuY2xlYW51cEJ1ZmZlcihjb21wb25lbnQpKSB7XG4gICAgX2RldnRvb2xzQ29tcG9uZW50UmVtb3ZlZChjb21wb25lbnQpO1xuICB9XG59O1xuLyohICNfX05PX1NJREVfRUZGRUNUU19fICovXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKGhvb2spIHtcbiAgcmV0dXJuIChjb21wb25lbnQpID0+IHtcbiAgICBlbWl0JDEoXG4gICAgICBob29rLFxuICAgICAgY29tcG9uZW50LmFwcENvbnRleHQuYXBwLFxuICAgICAgY29tcG9uZW50LnVpZCxcbiAgICAgIGNvbXBvbmVudC5wYXJlbnQgPyBjb21wb25lbnQucGFyZW50LnVpZCA6IHZvaWQgMCxcbiAgICAgIGNvbXBvbmVudFxuICAgICk7XG4gIH07XG59XG5jb25zdCBkZXZ0b29sc1BlcmZTdGFydCA9IC8qIEBfX1BVUkVfXyAqLyBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhcInBlcmY6c3RhcnRcIiAvKiBQRVJGT1JNQU5DRV9TVEFSVCAqLyk7XG5jb25zdCBkZXZ0b29sc1BlcmZFbmQgPSAvKiBAX19QVVJFX18gKi8gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soXCJwZXJmOmVuZFwiIC8qIFBFUkZPUk1BTkNFX0VORCAqLyk7XG5mdW5jdGlvbiBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhob29rKSB7XG4gIHJldHVybiAoY29tcG9uZW50LCB0eXBlLCB0aW1lKSA9PiB7XG4gICAgZW1pdCQxKGhvb2ssIGNvbXBvbmVudC5hcHBDb250ZXh0LmFwcCwgY29tcG9uZW50LnVpZCwgY29tcG9uZW50LCB0eXBlLCB0aW1lKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGRldnRvb2xzQ29tcG9uZW50RW1pdChjb21wb25lbnQsIGV2ZW50LCBwYXJhbXMpIHtcbiAgZW1pdCQxKFxuICAgIFwiY29tcG9uZW50OmVtaXRcIiAvKiBDT01QT05FTlRfRU1JVCAqLyxcbiAgICBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsXG4gICAgY29tcG9uZW50LFxuICAgIGV2ZW50LFxuICAgIHBhcmFtc1xuICApO1xufVxuXG5sZXQgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlID0gbnVsbDtcbmxldCBjdXJyZW50U2NvcGVJZCA9IG51bGw7XG5mdW5jdGlvbiBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgY29uc3QgcHJldiA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcbiAgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlID0gaW5zdGFuY2U7XG4gIGN1cnJlbnRTY29wZUlkID0gaW5zdGFuY2UgJiYgaW5zdGFuY2UudHlwZS5fX3Njb3BlSWQgfHwgbnVsbDtcbiAgcmV0dXJuIHByZXY7XG59XG5mdW5jdGlvbiBwdXNoU2NvcGVJZChpZCkge1xuICBjdXJyZW50U2NvcGVJZCA9IGlkO1xufVxuZnVuY3Rpb24gcG9wU2NvcGVJZCgpIHtcbiAgY3VycmVudFNjb3BlSWQgPSBudWxsO1xufVxuY29uc3Qgd2l0aFNjb3BlSWQgPSAoX2lkKSA9PiB3aXRoQ3R4O1xuZnVuY3Rpb24gd2l0aEN0eChmbiwgY3R4ID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLCBpc05vblNjb3BlZFNsb3QpIHtcbiAgaWYgKCFjdHgpIHJldHVybiBmbjtcbiAgaWYgKGZuLl9uKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG4gIGNvbnN0IHJlbmRlckZuV2l0aENvbnRleHQgPSAoLi4uYXJncykgPT4ge1xuICAgIGlmIChyZW5kZXJGbldpdGhDb250ZXh0Ll9kKSB7XG4gICAgICBzZXRCbG9ja1RyYWNraW5nKC0xKTtcbiAgICB9XG4gICAgY29uc3QgcHJldkluc3RhbmNlID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGN0eCk7XG4gICAgbGV0IHJlcztcbiAgICB0cnkge1xuICAgICAgcmVzID0gZm4oLi4uYXJncyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShwcmV2SW5zdGFuY2UpO1xuICAgICAgaWYgKHJlbmRlckZuV2l0aENvbnRleHQuX2QpIHtcbiAgICAgICAgc2V0QmxvY2tUcmFja2luZygxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQoY3R4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfTtcbiAgcmVuZGVyRm5XaXRoQ29udGV4dC5fbiA9IHRydWU7XG4gIHJlbmRlckZuV2l0aENvbnRleHQuX2MgPSB0cnVlO1xuICByZW5kZXJGbldpdGhDb250ZXh0Ll9kID0gdHJ1ZTtcbiAgcmV0dXJuIHJlbmRlckZuV2l0aENvbnRleHQ7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lKSB7XG4gIGlmIChpc0J1aWx0SW5EaXJlY3RpdmUobmFtZSkpIHtcbiAgICB3YXJuJDEoXCJEbyBub3QgdXNlIGJ1aWx0LWluIGRpcmVjdGl2ZSBpZHMgYXMgY3VzdG9tIGRpcmVjdGl2ZSBpZDogXCIgKyBuYW1lKTtcbiAgfVxufVxuZnVuY3Rpb24gd2l0aERpcmVjdGl2ZXModm5vZGUsIGRpcmVjdGl2ZXMpIHtcbiAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSA9PT0gbnVsbCkge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGB3aXRoRGlyZWN0aXZlcyBjYW4gb25seSBiZSB1c2VkIGluc2lkZSByZW5kZXIgZnVuY3Rpb25zLmApO1xuICAgIHJldHVybiB2bm9kZTtcbiAgfVxuICBjb25zdCBpbnN0YW5jZSA9IGdldENvbXBvbmVudFB1YmxpY0luc3RhbmNlKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSk7XG4gIGNvbnN0IGJpbmRpbmdzID0gdm5vZGUuZGlycyB8fCAodm5vZGUuZGlycyA9IFtdKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXJlY3RpdmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IFtkaXIsIHZhbHVlLCBhcmcsIG1vZGlmaWVycyA9IEVNUFRZX09CSl0gPSBkaXJlY3RpdmVzW2ldO1xuICAgIGlmIChkaXIpIHtcbiAgICAgIGlmIChpc0Z1bmN0aW9uKGRpcikpIHtcbiAgICAgICAgZGlyID0ge1xuICAgICAgICAgIG1vdW50ZWQ6IGRpcixcbiAgICAgICAgICB1cGRhdGVkOiBkaXJcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXIuZGVlcCkge1xuICAgICAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBiaW5kaW5ncy5wdXNoKHtcbiAgICAgICAgZGlyLFxuICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIG9sZFZhbHVlOiB2b2lkIDAsXG4gICAgICAgIGFyZyxcbiAgICAgICAgbW9kaWZpZXJzXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZub2RlO1xufVxuZnVuY3Rpb24gaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgcHJldlZOb2RlLCBpbnN0YW5jZSwgbmFtZSkge1xuICBjb25zdCBiaW5kaW5ncyA9IHZub2RlLmRpcnM7XG4gIGNvbnN0IG9sZEJpbmRpbmdzID0gcHJldlZOb2RlICYmIHByZXZWTm9kZS5kaXJzO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmRpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYmluZGluZyA9IGJpbmRpbmdzW2ldO1xuICAgIGlmIChvbGRCaW5kaW5ncykge1xuICAgICAgYmluZGluZy5vbGRWYWx1ZSA9IG9sZEJpbmRpbmdzW2ldLnZhbHVlO1xuICAgIH1cbiAgICBsZXQgaG9vayA9IGJpbmRpbmcuZGlyW25hbWVdO1xuICAgIGlmIChob29rKSB7XG4gICAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgOCwgW1xuICAgICAgICB2bm9kZS5lbCxcbiAgICAgICAgYmluZGluZyxcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIHByZXZWTm9kZVxuICAgICAgXSk7XG4gICAgICByZXNldFRyYWNraW5nKCk7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IFRlbGVwb3J0RW5kS2V5ID0gU3ltYm9sKFwiX3Z0ZVwiKTtcbmNvbnN0IGlzVGVsZXBvcnQgPSAodHlwZSkgPT4gdHlwZS5fX2lzVGVsZXBvcnQ7XG5jb25zdCBpc1RlbGVwb3J0RGlzYWJsZWQgPSAocHJvcHMpID0+IHByb3BzICYmIChwcm9wcy5kaXNhYmxlZCB8fCBwcm9wcy5kaXNhYmxlZCA9PT0gXCJcIik7XG5jb25zdCBpc1RlbGVwb3J0RGVmZXJyZWQgPSAocHJvcHMpID0+IHByb3BzICYmIChwcm9wcy5kZWZlciB8fCBwcm9wcy5kZWZlciA9PT0gXCJcIik7XG5jb25zdCBpc1RhcmdldFNWRyA9ICh0YXJnZXQpID0+IHR5cGVvZiBTVkdFbGVtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQ7XG5jb25zdCBpc1RhcmdldE1hdGhNTCA9ICh0YXJnZXQpID0+IHR5cGVvZiBNYXRoTUxFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIgJiYgdGFyZ2V0IGluc3RhbmNlb2YgTWF0aE1MRWxlbWVudDtcbmNvbnN0IHJlc29sdmVUYXJnZXQgPSAocHJvcHMsIHNlbGVjdCkgPT4ge1xuICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IHByb3BzICYmIHByb3BzLnRvO1xuICBpZiAoaXNTdHJpbmcodGFyZ2V0U2VsZWN0b3IpKSB7XG4gICAgaWYgKCFzZWxlY3QpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKFxuICAgICAgICBgQ3VycmVudCByZW5kZXJlciBkb2VzIG5vdCBzdXBwb3J0IHN0cmluZyB0YXJnZXQgZm9yIFRlbGVwb3J0cy4gKG1pc3NpbmcgcXVlcnlTZWxlY3RvciByZW5kZXJlciBvcHRpb24pYFxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3QodGFyZ2V0U2VsZWN0b3IpO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIXRhcmdldCAmJiAhaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYEZhaWxlZCB0byBsb2NhdGUgVGVsZXBvcnQgdGFyZ2V0IHdpdGggc2VsZWN0b3IgXCIke3RhcmdldFNlbGVjdG9yfVwiLiBOb3RlIHRoZSB0YXJnZXQgZWxlbWVudCBtdXN0IGV4aXN0IGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQgLSBpLmUuIHRoZSB0YXJnZXQgY2Fubm90IGJlIHJlbmRlcmVkIGJ5IHRoZSBjb21wb25lbnQgaXRzZWxmLCBhbmQgaWRlYWxseSBzaG91bGQgYmUgb3V0c2lkZSBvZiB0aGUgZW50aXJlIFZ1ZSBjb21wb25lbnQgdHJlZS5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhdGFyZ2V0U2VsZWN0b3IgJiYgIWlzVGVsZXBvcnREaXNhYmxlZChwcm9wcykpIHtcbiAgICAgIHdhcm4kMShgSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQ6ICR7dGFyZ2V0U2VsZWN0b3J9YCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXRTZWxlY3RvcjtcbiAgfVxufTtcbmNvbnN0IFRlbGVwb3J0SW1wbCA9IHtcbiAgbmFtZTogXCJUZWxlcG9ydFwiLFxuICBfX2lzVGVsZXBvcnQ6IHRydWUsXG4gIHByb2Nlc3MobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgaW50ZXJuYWxzKSB7XG4gICAgY29uc3Qge1xuICAgICAgbWM6IG1vdW50Q2hpbGRyZW4sXG4gICAgICBwYzogcGF0Y2hDaGlsZHJlbixcbiAgICAgIHBiYzogcGF0Y2hCbG9ja0NoaWxkcmVuLFxuICAgICAgbzogeyBpbnNlcnQsIHF1ZXJ5U2VsZWN0b3IsIGNyZWF0ZVRleHQsIGNyZWF0ZUNvbW1lbnQgfVxuICAgIH0gPSBpbnRlcm5hbHM7XG4gICAgY29uc3QgZGlzYWJsZWQgPSBpc1RlbGVwb3J0RGlzYWJsZWQobjIucHJvcHMpO1xuICAgIGxldCB7IHNoYXBlRmxhZywgY2hpbGRyZW4sIGR5bmFtaWNDaGlsZHJlbiB9ID0gbjI7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNIbXJVcGRhdGluZykge1xuICAgICAgb3B0aW1pemVkID0gZmFsc2U7XG4gICAgICBkeW5hbWljQ2hpbGRyZW4gPSBudWxsO1xuICAgIH1cbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBuMi5lbCA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBjcmVhdGVDb21tZW50KFwidGVsZXBvcnQgc3RhcnRcIikgOiBjcmVhdGVUZXh0KFwiXCIpO1xuICAgICAgY29uc3QgbWFpbkFuY2hvciA9IG4yLmFuY2hvciA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBjcmVhdGVDb21tZW50KFwidGVsZXBvcnQgZW5kXCIpIDogY3JlYXRlVGV4dChcIlwiKTtcbiAgICAgIGluc2VydChwbGFjZWhvbGRlciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgaW5zZXJ0KG1haW5BbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIGNvbnN0IG1vdW50ID0gKGNvbnRhaW5lcjIsIGFuY2hvcjIpID0+IHtcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICAgICAgaWYgKHBhcmVudENvbXBvbmVudCAmJiBwYXJlbnRDb21wb25lbnQuaXNDRSkge1xuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LmNlLl90ZWxlcG9ydFRhcmdldCA9IGNvbnRhaW5lcjI7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgICAgIGNvbnRhaW5lcjIsXG4gICAgICAgICAgICBhbmNob3IyLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29uc3QgbW91bnRUb1RhcmdldCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gbjIudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldChuMi5wcm9wcywgcXVlcnlTZWxlY3Rvcik7XG4gICAgICAgIGNvbnN0IHRhcmdldEFuY2hvciA9IHByZXBhcmVBbmNob3IodGFyZ2V0LCBuMiwgY3JlYXRlVGV4dCwgaW5zZXJ0KTtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgIGlmIChuYW1lc3BhY2UgIT09IFwic3ZnXCIgJiYgaXNUYXJnZXRTVkcodGFyZ2V0KSkge1xuICAgICAgICAgICAgbmFtZXNwYWNlID0gXCJzdmdcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5hbWVzcGFjZSAhPT0gXCJtYXRobWxcIiAmJiBpc1RhcmdldE1hdGhNTCh0YXJnZXQpKSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgPSBcIm1hdGhtbFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICAgICAgICBtb3VudCh0YXJnZXQsIHRhcmdldEFuY2hvcik7XG4gICAgICAgICAgICB1cGRhdGVDc3NWYXJzKG4yLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWRpc2FibGVkKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgXCJJbnZhbGlkIFRlbGVwb3J0IHRhcmdldCBvbiBtb3VudDpcIixcbiAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgIGAoJHt0eXBlb2YgdGFyZ2V0fSlgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICBtb3VudChjb250YWluZXIsIG1haW5BbmNob3IpO1xuICAgICAgICB1cGRhdGVDc3NWYXJzKG4yLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc1RlbGVwb3J0RGVmZXJyZWQobjIucHJvcHMpKSB7XG4gICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgbW91bnRUb1RhcmdldCgpO1xuICAgICAgICAgIG4yLmVsLl9faXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW91bnRUb1RhcmdldCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNUZWxlcG9ydERlZmVycmVkKG4yLnByb3BzKSAmJiAhbjEuZWwuX19pc01vdW50ZWQpIHtcbiAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBUZWxlcG9ydEltcGwucHJvY2VzcyhcbiAgICAgICAgICAgIG4xLFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgICAgIGludGVybmFsc1xuICAgICAgICAgICk7XG4gICAgICAgICAgZGVsZXRlIG4xLmVsLl9faXNNb3VudGVkO1xuICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICBuMi50YXJnZXRTdGFydCA9IG4xLnRhcmdldFN0YXJ0O1xuICAgICAgY29uc3QgbWFpbkFuY2hvciA9IG4yLmFuY2hvciA9IG4xLmFuY2hvcjtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG4yLnRhcmdldCA9IG4xLnRhcmdldDtcbiAgICAgIGNvbnN0IHRhcmdldEFuY2hvciA9IG4yLnRhcmdldEFuY2hvciA9IG4xLnRhcmdldEFuY2hvcjtcbiAgICAgIGNvbnN0IHdhc0Rpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKG4xLnByb3BzKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRDb250YWluZXIgPSB3YXNEaXNhYmxlZCA/IGNvbnRhaW5lciA6IHRhcmdldDtcbiAgICAgIGNvbnN0IGN1cnJlbnRBbmNob3IgPSB3YXNEaXNhYmxlZCA/IG1haW5BbmNob3IgOiB0YXJnZXRBbmNob3I7XG4gICAgICBpZiAobmFtZXNwYWNlID09PSBcInN2Z1wiIHx8IGlzVGFyZ2V0U1ZHKHRhcmdldCkpIHtcbiAgICAgICAgbmFtZXNwYWNlID0gXCJzdmdcIjtcbiAgICAgIH0gZWxzZSBpZiAobmFtZXNwYWNlID09PSBcIm1hdGhtbFwiIHx8IGlzVGFyZ2V0TWF0aE1MKHRhcmdldCkpIHtcbiAgICAgICAgbmFtZXNwYWNlID0gXCJtYXRobWxcIjtcbiAgICAgIH1cbiAgICAgIGlmIChkeW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgICAgcGF0Y2hCbG9ja0NoaWxkcmVuKFxuICAgICAgICAgIG4xLmR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgICBkeW5hbWljQ2hpbGRyZW4sXG4gICAgICAgICAgY3VycmVudENvbnRhaW5lcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkc1xuICAgICAgICApO1xuICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMiwgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKCFvcHRpbWl6ZWQpIHtcbiAgICAgICAgcGF0Y2hDaGlsZHJlbihcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjdXJyZW50Q29udGFpbmVyLFxuICAgICAgICAgIGN1cnJlbnRBbmNob3IsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICBpZiAoIXdhc0Rpc2FibGVkKSB7XG4gICAgICAgICAgbW92ZVRlbGVwb3J0KFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBtYWluQW5jaG9yLFxuICAgICAgICAgICAgaW50ZXJuYWxzLFxuICAgICAgICAgICAgMVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG4yLnByb3BzICYmIG4xLnByb3BzICYmIG4yLnByb3BzLnRvICE9PSBuMS5wcm9wcy50bykge1xuICAgICAgICAgICAgbjIucHJvcHMudG8gPSBuMS5wcm9wcy50bztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICgobjIucHJvcHMgJiYgbjIucHJvcHMudG8pICE9PSAobjEucHJvcHMgJiYgbjEucHJvcHMudG8pKSB7XG4gICAgICAgICAgY29uc3QgbmV4dFRhcmdldCA9IG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQoXG4gICAgICAgICAgICBuMi5wcm9wcyxcbiAgICAgICAgICAgIHF1ZXJ5U2VsZWN0b3JcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChuZXh0VGFyZ2V0KSB7XG4gICAgICAgICAgICBtb3ZlVGVsZXBvcnQoXG4gICAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgICBuZXh0VGFyZ2V0LFxuICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICBpbnRlcm5hbHMsXG4gICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIFwiSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQgb24gdXBkYXRlOlwiLFxuICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgIGAoJHt0eXBlb2YgdGFyZ2V0fSlgXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh3YXNEaXNhYmxlZCkge1xuICAgICAgICAgIG1vdmVUZWxlcG9ydChcbiAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgdGFyZ2V0QW5jaG9yLFxuICAgICAgICAgICAgaW50ZXJuYWxzLFxuICAgICAgICAgICAgMVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHVwZGF0ZUNzc1ZhcnMobjIsIGRpc2FibGVkKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZSh2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgeyB1bTogdW5tb3VudCwgbzogeyByZW1vdmU6IGhvc3RSZW1vdmUgfSB9LCBkb1JlbW92ZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIHNoYXBlRmxhZyxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgYW5jaG9yLFxuICAgICAgdGFyZ2V0U3RhcnQsXG4gICAgICB0YXJnZXRBbmNob3IsXG4gICAgICB0YXJnZXQsXG4gICAgICBwcm9wc1xuICAgIH0gPSB2bm9kZTtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBob3N0UmVtb3ZlKHRhcmdldFN0YXJ0KTtcbiAgICAgIGhvc3RSZW1vdmUodGFyZ2V0QW5jaG9yKTtcbiAgICB9XG4gICAgZG9SZW1vdmUgJiYgaG9zdFJlbW92ZShhbmNob3IpO1xuICAgIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlID0gZG9SZW1vdmUgfHwgIWlzVGVsZXBvcnREaXNhYmxlZChwcm9wcyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIHVubW91bnQoXG4gICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNob3VsZFJlbW92ZSxcbiAgICAgICAgICAhIWNoaWxkLmR5bmFtaWNDaGlsZHJlblxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgbW92ZTogbW92ZVRlbGVwb3J0LFxuICBoeWRyYXRlOiBoeWRyYXRlVGVsZXBvcnRcbn07XG5mdW5jdGlvbiBtb3ZlVGVsZXBvcnQodm5vZGUsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCB7IG86IHsgaW5zZXJ0IH0sIG06IG1vdmUgfSwgbW92ZVR5cGUgPSAyKSB7XG4gIGlmIChtb3ZlVHlwZSA9PT0gMCkge1xuICAgIGluc2VydCh2bm9kZS50YXJnZXRBbmNob3IsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcbiAgfVxuICBjb25zdCB7IGVsLCBhbmNob3IsIHNoYXBlRmxhZywgY2hpbGRyZW4sIHByb3BzIH0gPSB2bm9kZTtcbiAgY29uc3QgaXNSZW9yZGVyID0gbW92ZVR5cGUgPT09IDI7XG4gIGlmIChpc1Jlb3JkZXIpIHtcbiAgICBpbnNlcnQoZWwsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcbiAgfVxuICBpZiAoIWlzUmVvcmRlciB8fCBpc1RlbGVwb3J0RGlzYWJsZWQocHJvcHMpKSB7XG4gICAgaWYgKHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1vdmUoXG4gICAgICAgICAgY2hpbGRyZW5baV0sXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIHBhcmVudEFuY2hvcixcbiAgICAgICAgICAyXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChpc1Jlb3JkZXIpIHtcbiAgICBpbnNlcnQoYW5jaG9yLCBjb250YWluZXIsIHBhcmVudEFuY2hvcik7XG4gIH1cbn1cbmZ1bmN0aW9uIGh5ZHJhdGVUZWxlcG9ydChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHtcbiAgbzogeyBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcXVlcnlTZWxlY3RvciwgaW5zZXJ0LCBjcmVhdGVUZXh0IH1cbn0sIGh5ZHJhdGVDaGlsZHJlbikge1xuICBjb25zdCB0YXJnZXQgPSB2bm9kZS50YXJnZXQgPSByZXNvbHZlVGFyZ2V0KFxuICAgIHZub2RlLnByb3BzLFxuICAgIHF1ZXJ5U2VsZWN0b3JcbiAgKTtcbiAgaWYgKHRhcmdldCkge1xuICAgIGNvbnN0IGRpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKHZub2RlLnByb3BzKTtcbiAgICBjb25zdCB0YXJnZXROb2RlID0gdGFyZ2V0Ll9scGEgfHwgdGFyZ2V0LmZpcnN0Q2hpbGQ7XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgdm5vZGUuYW5jaG9yID0gaHlkcmF0ZUNoaWxkcmVuKFxuICAgICAgICAgIG5leHRTaWJsaW5nKG5vZGUpLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIHBhcmVudE5vZGUobm9kZSksXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgdm5vZGUudGFyZ2V0U3RhcnQgPSB0YXJnZXROb2RlO1xuICAgICAgICB2bm9kZS50YXJnZXRBbmNob3IgPSB0YXJnZXROb2RlICYmIG5leHRTaWJsaW5nKHRhcmdldE5vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdm5vZGUuYW5jaG9yID0gbmV4dFNpYmxpbmcobm9kZSk7XG4gICAgICAgIGxldCB0YXJnZXRBbmNob3IgPSB0YXJnZXROb2RlO1xuICAgICAgICB3aGlsZSAodGFyZ2V0QW5jaG9yKSB7XG4gICAgICAgICAgaWYgKHRhcmdldEFuY2hvciAmJiB0YXJnZXRBbmNob3Iubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXRBbmNob3IuZGF0YSA9PT0gXCJ0ZWxlcG9ydCBzdGFydCBhbmNob3JcIikge1xuICAgICAgICAgICAgICB2bm9kZS50YXJnZXRTdGFydCA9IHRhcmdldEFuY2hvcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0QW5jaG9yLmRhdGEgPT09IFwidGVsZXBvcnQgYW5jaG9yXCIpIHtcbiAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0QW5jaG9yO1xuICAgICAgICAgICAgICB0YXJnZXQuX2xwYSA9IHZub2RlLnRhcmdldEFuY2hvciAmJiBuZXh0U2libGluZyh2bm9kZS50YXJnZXRBbmNob3IpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGFyZ2V0QW5jaG9yID0gbmV4dFNpYmxpbmcodGFyZ2V0QW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXZub2RlLnRhcmdldEFuY2hvcikge1xuICAgICAgICAgIHByZXBhcmVBbmNob3IodGFyZ2V0LCB2bm9kZSwgY3JlYXRlVGV4dCwgaW5zZXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBoeWRyYXRlQ2hpbGRyZW4oXG4gICAgICAgICAgdGFyZ2V0Tm9kZSAmJiBuZXh0U2libGluZyh0YXJnZXROb2RlKSxcbiAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlQ3NzVmFycyh2bm9kZSwgZGlzYWJsZWQpO1xuICB9XG4gIHJldHVybiB2bm9kZS5hbmNob3IgJiYgbmV4dFNpYmxpbmcodm5vZGUuYW5jaG9yKTtcbn1cbmNvbnN0IFRlbGVwb3J0ID0gVGVsZXBvcnRJbXBsO1xuZnVuY3Rpb24gdXBkYXRlQ3NzVmFycyh2bm9kZSwgaXNEaXNhYmxlZCkge1xuICBjb25zdCBjdHggPSB2bm9kZS5jdHg7XG4gIGlmIChjdHggJiYgY3R4LnV0KSB7XG4gICAgbGV0IG5vZGUsIGFuY2hvcjtcbiAgICBpZiAoaXNEaXNhYmxlZCkge1xuICAgICAgbm9kZSA9IHZub2RlLmVsO1xuICAgICAgYW5jaG9yID0gdm5vZGUuYW5jaG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICBub2RlID0gdm5vZGUudGFyZ2V0U3RhcnQ7XG4gICAgICBhbmNob3IgPSB2bm9kZS50YXJnZXRBbmNob3I7XG4gICAgfVxuICAgIHdoaWxlIChub2RlICYmIG5vZGUgIT09IGFuY2hvcikge1xuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIG5vZGUuc2V0QXR0cmlidXRlKFwiZGF0YS12LW93bmVyXCIsIGN0eC51aWQpO1xuICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIGN0eC51dCgpO1xuICB9XG59XG5mdW5jdGlvbiBwcmVwYXJlQW5jaG9yKHRhcmdldCwgdm5vZGUsIGNyZWF0ZVRleHQsIGluc2VydCkge1xuICBjb25zdCB0YXJnZXRTdGFydCA9IHZub2RlLnRhcmdldFN0YXJ0ID0gY3JlYXRlVGV4dChcIlwiKTtcbiAgY29uc3QgdGFyZ2V0QW5jaG9yID0gdm5vZGUudGFyZ2V0QW5jaG9yID0gY3JlYXRlVGV4dChcIlwiKTtcbiAgdGFyZ2V0U3RhcnRbVGVsZXBvcnRFbmRLZXldID0gdGFyZ2V0QW5jaG9yO1xuICBpZiAodGFyZ2V0KSB7XG4gICAgaW5zZXJ0KHRhcmdldFN0YXJ0LCB0YXJnZXQpO1xuICAgIGluc2VydCh0YXJnZXRBbmNob3IsIHRhcmdldCk7XG4gIH1cbiAgcmV0dXJuIHRhcmdldEFuY2hvcjtcbn1cblxuY29uc3QgbGVhdmVDYktleSA9IFN5bWJvbChcIl9sZWF2ZUNiXCIpO1xuY29uc3QgZW50ZXJDYktleSA9IFN5bWJvbChcIl9lbnRlckNiXCIpO1xuZnVuY3Rpb24gdXNlVHJhbnNpdGlvblN0YXRlKCkge1xuICBjb25zdCBzdGF0ZSA9IHtcbiAgICBpc01vdW50ZWQ6IGZhbHNlLFxuICAgIGlzTGVhdmluZzogZmFsc2UsXG4gICAgaXNVbm1vdW50aW5nOiBmYWxzZSxcbiAgICBsZWF2aW5nVk5vZGVzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpXG4gIH07XG4gIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgc3RhdGUuaXNNb3VudGVkID0gdHJ1ZTtcbiAgfSk7XG4gIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgc3RhdGUuaXNVbm1vdW50aW5nID0gdHJ1ZTtcbiAgfSk7XG4gIHJldHVybiBzdGF0ZTtcbn1cbmNvbnN0IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yID0gW0Z1bmN0aW9uLCBBcnJheV07XG5jb25zdCBCYXNlVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycyA9IHtcbiAgbW9kZTogU3RyaW5nLFxuICBhcHBlYXI6IEJvb2xlYW4sXG4gIHBlcnNpc3RlZDogQm9vbGVhbixcbiAgLy8gZW50ZXJcbiAgb25CZWZvcmVFbnRlcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIG9uRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkFmdGVyRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkVudGVyQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgLy8gbGVhdmVcbiAgb25CZWZvcmVMZWF2ZTogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXG4gIG9uTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkFmdGVyTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkxlYXZlQ2FuY2VsbGVkOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgLy8gYXBwZWFyXG4gIG9uQmVmb3JlQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25BcHBlYXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxuICBvbkFmdGVyQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcbiAgb25BcHBlYXJDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yXG59O1xuY29uc3QgcmVjdXJzaXZlR2V0U3VidHJlZSA9IChpbnN0YW5jZSkgPT4ge1xuICBjb25zdCBzdWJUcmVlID0gaW5zdGFuY2Uuc3ViVHJlZTtcbiAgcmV0dXJuIHN1YlRyZWUuY29tcG9uZW50ID8gcmVjdXJzaXZlR2V0U3VidHJlZShzdWJUcmVlLmNvbXBvbmVudCkgOiBzdWJUcmVlO1xufTtcbmNvbnN0IEJhc2VUcmFuc2l0aW9uSW1wbCA9IHtcbiAgbmFtZTogYEJhc2VUcmFuc2l0aW9uYCxcbiAgcHJvcHM6IEJhc2VUcmFuc2l0aW9uUHJvcHNWYWxpZGF0b3JzLFxuICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZVRyYW5zaXRpb25TdGF0ZSgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgJiYgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKHNsb3RzLmRlZmF1bHQoKSwgdHJ1ZSk7XG4gICAgICBpZiAoIWNoaWxkcmVuIHx8ICFjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY2hpbGQgPSBmaW5kTm9uQ29tbWVudENoaWxkKGNoaWxkcmVuKTtcbiAgICAgIGNvbnN0IHJhd1Byb3BzID0gdG9SYXcocHJvcHMpO1xuICAgICAgY29uc3QgeyBtb2RlIH0gPSByYXdQcm9wcztcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG1vZGUgJiYgbW9kZSAhPT0gXCJpbi1vdXRcIiAmJiBtb2RlICE9PSBcIm91dC1pblwiICYmIG1vZGUgIT09IFwiZGVmYXVsdFwiKSB7XG4gICAgICAgIHdhcm4kMShgaW52YWxpZCA8dHJhbnNpdGlvbj4gbW9kZTogJHttb2RlfWApO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmlzTGVhdmluZykge1xuICAgICAgICByZXR1cm4gZW1wdHlQbGFjZWhvbGRlcihjaGlsZCk7XG4gICAgICB9XG4gICAgICBjb25zdCBpbm5lckNoaWxkID0gZ2V0SW5uZXJDaGlsZCQxKGNoaWxkKTtcbiAgICAgIGlmICghaW5uZXJDaGlsZCkge1xuICAgICAgICByZXR1cm4gZW1wdHlQbGFjZWhvbGRlcihjaGlsZCk7XG4gICAgICB9XG4gICAgICBsZXQgZW50ZXJIb29rcyA9IHJlc29sdmVUcmFuc2l0aW9uSG9va3MoXG4gICAgICAgIGlubmVyQ2hpbGQsXG4gICAgICAgIHJhd1Byb3BzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgIC8vICMxMTA2MSwgZW5zdXJlIGVudGVySG9va3MgaXMgZnJlc2ggYWZ0ZXIgY2xvbmVcbiAgICAgICAgKGhvb2tzKSA9PiBlbnRlckhvb2tzID0gaG9va3NcbiAgICAgICk7XG4gICAgICBpZiAoaW5uZXJDaGlsZC50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhpbm5lckNoaWxkLCBlbnRlckhvb2tzKTtcbiAgICAgIH1cbiAgICAgIGxldCBvbGRJbm5lckNoaWxkID0gaW5zdGFuY2Uuc3ViVHJlZSAmJiBnZXRJbm5lckNoaWxkJDEoaW5zdGFuY2Uuc3ViVHJlZSk7XG4gICAgICBpZiAob2xkSW5uZXJDaGlsZCAmJiBvbGRJbm5lckNoaWxkLnR5cGUgIT09IENvbW1lbnQgJiYgIWlzU2FtZVZOb2RlVHlwZShpbm5lckNoaWxkLCBvbGRJbm5lckNoaWxkKSAmJiByZWN1cnNpdmVHZXRTdWJ0cmVlKGluc3RhbmNlKS50eXBlICE9PSBDb21tZW50KSB7XG4gICAgICAgIGxldCBsZWF2aW5nSG9va3MgPSByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKFxuICAgICAgICAgIG9sZElubmVyQ2hpbGQsXG4gICAgICAgICAgcmF3UHJvcHMsXG4gICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgaW5zdGFuY2VcbiAgICAgICAgKTtcbiAgICAgICAgc2V0VHJhbnNpdGlvbkhvb2tzKG9sZElubmVyQ2hpbGQsIGxlYXZpbmdIb29rcyk7XG4gICAgICAgIGlmIChtb2RlID09PSBcIm91dC1pblwiICYmIGlubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgIHN0YXRlLmlzTGVhdmluZyA9IHRydWU7XG4gICAgICAgICAgbGVhdmluZ0hvb2tzLmFmdGVyTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5pc0xlYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghKGluc3RhbmNlLmpvYi5mbGFncyAmIDgpKSB7XG4gICAgICAgICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsZXRlIGxlYXZpbmdIb29rcy5hZnRlckxlYXZlO1xuICAgICAgICAgICAgb2xkSW5uZXJDaGlsZCA9IHZvaWQgMDtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBlbXB0eVBsYWNlaG9sZGVyKGNoaWxkKTtcbiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSBcImluLW91dFwiICYmIGlubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCkge1xuICAgICAgICAgIGxlYXZpbmdIb29rcy5kZWxheUxlYXZlID0gKGVsLCBlYXJseVJlbW92ZSwgZGVsYXllZExlYXZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKFxuICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgb2xkSW5uZXJDaGlsZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZVtTdHJpbmcob2xkSW5uZXJDaGlsZC5rZXkpXSA9IG9sZElubmVyQ2hpbGQ7XG4gICAgICAgICAgICBlbFtsZWF2ZUNiS2V5XSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgZWFybHlSZW1vdmUoKTtcbiAgICAgICAgICAgICAgZWxbbGVhdmVDYktleV0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgIGRlbGV0ZSBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICAgICAgb2xkSW5uZXJDaGlsZCA9IHZvaWQgMDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgZGVsYXllZExlYXZlKCk7XG4gICAgICAgICAgICAgIGRlbGV0ZSBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZTtcbiAgICAgICAgICAgICAgb2xkSW5uZXJDaGlsZCA9IHZvaWQgMDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbGRJbm5lckNoaWxkID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9sZElubmVyQ2hpbGQpIHtcbiAgICAgICAgb2xkSW5uZXJDaGlsZCA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9O1xuICB9XG59O1xuZnVuY3Rpb24gZmluZE5vbkNvbW1lbnRDaGlsZChjaGlsZHJlbikge1xuICBsZXQgY2hpbGQgPSBjaGlsZHJlblswXTtcbiAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICBsZXQgaGFzRm91bmQgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IGMgb2YgY2hpbGRyZW4pIHtcbiAgICAgIGlmIChjLnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaGFzRm91bmQpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBcIjx0cmFuc2l0aW9uPiBjYW4gb25seSBiZSB1c2VkIG9uIGEgc2luZ2xlIGVsZW1lbnQgb3IgY29tcG9uZW50LiBVc2UgPHRyYW5zaXRpb24tZ3JvdXA+IGZvciBsaXN0cy5cIlxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQgPSBjO1xuICAgICAgICBoYXNGb3VuZCA9IHRydWU7XG4gICAgICAgIGlmICghISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBjaGlsZDtcbn1cbmNvbnN0IEJhc2VUcmFuc2l0aW9uID0gQmFzZVRyYW5zaXRpb25JbXBsO1xuZnVuY3Rpb24gZ2V0TGVhdmluZ05vZGVzRm9yVHlwZShzdGF0ZSwgdm5vZGUpIHtcbiAgY29uc3QgeyBsZWF2aW5nVk5vZGVzIH0gPSBzdGF0ZTtcbiAgbGV0IGxlYXZpbmdWTm9kZXNDYWNoZSA9IGxlYXZpbmdWTm9kZXMuZ2V0KHZub2RlLnR5cGUpO1xuICBpZiAoIWxlYXZpbmdWTm9kZXNDYWNoZSkge1xuICAgIGxlYXZpbmdWTm9kZXNDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGxlYXZpbmdWTm9kZXMuc2V0KHZub2RlLnR5cGUsIGxlYXZpbmdWTm9kZXNDYWNoZSk7XG4gIH1cbiAgcmV0dXJuIGxlYXZpbmdWTm9kZXNDYWNoZTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uSG9va3Modm5vZGUsIHByb3BzLCBzdGF0ZSwgaW5zdGFuY2UsIHBvc3RDbG9uZSkge1xuICBjb25zdCB7XG4gICAgYXBwZWFyLFxuICAgIG1vZGUsXG4gICAgcGVyc2lzdGVkID0gZmFsc2UsXG4gICAgb25CZWZvcmVFbnRlcixcbiAgICBvbkVudGVyLFxuICAgIG9uQWZ0ZXJFbnRlcixcbiAgICBvbkVudGVyQ2FuY2VsbGVkLFxuICAgIG9uQmVmb3JlTGVhdmUsXG4gICAgb25MZWF2ZSxcbiAgICBvbkFmdGVyTGVhdmUsXG4gICAgb25MZWF2ZUNhbmNlbGxlZCxcbiAgICBvbkJlZm9yZUFwcGVhcixcbiAgICBvbkFwcGVhcixcbiAgICBvbkFmdGVyQXBwZWFyLFxuICAgIG9uQXBwZWFyQ2FuY2VsbGVkXG4gIH0gPSBwcm9wcztcbiAgY29uc3Qga2V5ID0gU3RyaW5nKHZub2RlLmtleSk7XG4gIGNvbnN0IGxlYXZpbmdWTm9kZXNDYWNoZSA9IGdldExlYXZpbmdOb2Rlc0ZvclR5cGUoc3RhdGUsIHZub2RlKTtcbiAgY29uc3QgY2FsbEhvb2sgPSAoaG9vaywgYXJncykgPT4ge1xuICAgIGhvb2sgJiYgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgICBob29rLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICA5LFxuICAgICAgYXJnc1xuICAgICk7XG4gIH07XG4gIGNvbnN0IGNhbGxBc3luY0hvb2sgPSAoaG9vaywgYXJncykgPT4ge1xuICAgIGNvbnN0IGRvbmUgPSBhcmdzWzFdO1xuICAgIGNhbGxIb29rKGhvb2ssIGFyZ3MpO1xuICAgIGlmIChpc0FycmF5KGhvb2spKSB7XG4gICAgICBpZiAoaG9vay5ldmVyeSgoaG9vazIpID0+IGhvb2syLmxlbmd0aCA8PSAxKSkgZG9uZSgpO1xuICAgIH0gZWxzZSBpZiAoaG9vay5sZW5ndGggPD0gMSkge1xuICAgICAgZG9uZSgpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaG9va3MgPSB7XG4gICAgbW9kZSxcbiAgICBwZXJzaXN0ZWQsXG4gICAgYmVmb3JlRW50ZXIoZWwpIHtcbiAgICAgIGxldCBob29rID0gb25CZWZvcmVFbnRlcjtcbiAgICAgIGlmICghc3RhdGUuaXNNb3VudGVkKSB7XG4gICAgICAgIGlmIChhcHBlYXIpIHtcbiAgICAgICAgICBob29rID0gb25CZWZvcmVBcHBlYXIgfHwgb25CZWZvcmVFbnRlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlbFtsZWF2ZUNiS2V5XSkge1xuICAgICAgICBlbFtsZWF2ZUNiS2V5XShcbiAgICAgICAgICB0cnVlXG4gICAgICAgICAgLyogY2FuY2VsbGVkICovXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBsZWF2aW5nVk5vZGUgPSBsZWF2aW5nVk5vZGVzQ2FjaGVba2V5XTtcbiAgICAgIGlmIChsZWF2aW5nVk5vZGUgJiYgaXNTYW1lVk5vZGVUeXBlKHZub2RlLCBsZWF2aW5nVk5vZGUpICYmIGxlYXZpbmdWTm9kZS5lbFtsZWF2ZUNiS2V5XSkge1xuICAgICAgICBsZWF2aW5nVk5vZGUuZWxbbGVhdmVDYktleV0oKTtcbiAgICAgIH1cbiAgICAgIGNhbGxIb29rKGhvb2ssIFtlbF0pO1xuICAgIH0sXG4gICAgZW50ZXIoZWwpIHtcbiAgICAgIGxldCBob29rID0gb25FbnRlcjtcbiAgICAgIGxldCBhZnRlckhvb2sgPSBvbkFmdGVyRW50ZXI7XG4gICAgICBsZXQgY2FuY2VsSG9vayA9IG9uRW50ZXJDYW5jZWxsZWQ7XG4gICAgICBpZiAoIXN0YXRlLmlzTW91bnRlZCkge1xuICAgICAgICBpZiAoYXBwZWFyKSB7XG4gICAgICAgICAgaG9vayA9IG9uQXBwZWFyIHx8IG9uRW50ZXI7XG4gICAgICAgICAgYWZ0ZXJIb29rID0gb25BZnRlckFwcGVhciB8fCBvbkFmdGVyRW50ZXI7XG4gICAgICAgICAgY2FuY2VsSG9vayA9IG9uQXBwZWFyQ2FuY2VsbGVkIHx8IG9uRW50ZXJDYW5jZWxsZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XG4gICAgICBjb25zdCBkb25lID0gZWxbZW50ZXJDYktleV0gPSAoY2FuY2VsbGVkKSA9PiB7XG4gICAgICAgIGlmIChjYWxsZWQpIHJldHVybjtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICAgIGNhbGxIb29rKGNhbmNlbEhvb2ssIFtlbF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxIb29rKGFmdGVySG9vaywgW2VsXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvb2tzLmRlbGF5ZWRMZWF2ZSkge1xuICAgICAgICAgIGhvb2tzLmRlbGF5ZWRMZWF2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsW2VudGVyQ2JLZXldID0gdm9pZCAwO1xuICAgICAgfTtcbiAgICAgIGlmIChob29rKSB7XG4gICAgICAgIGNhbGxBc3luY0hvb2soaG9vaywgW2VsLCBkb25lXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb25lKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBsZWF2ZShlbCwgcmVtb3ZlKSB7XG4gICAgICBjb25zdCBrZXkyID0gU3RyaW5nKHZub2RlLmtleSk7XG4gICAgICBpZiAoZWxbZW50ZXJDYktleV0pIHtcbiAgICAgICAgZWxbZW50ZXJDYktleV0oXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICAgIC8qIGNhbmNlbGxlZCAqL1xuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmlzVW5tb3VudGluZykge1xuICAgICAgICByZXR1cm4gcmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICBjYWxsSG9vayhvbkJlZm9yZUxlYXZlLCBbZWxdKTtcbiAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGRvbmUgPSBlbFtsZWF2ZUNiS2V5XSA9IChjYW5jZWxsZWQpID0+IHtcbiAgICAgICAgaWYgKGNhbGxlZCkgcmV0dXJuO1xuICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkge1xuICAgICAgICAgIGNhbGxIb29rKG9uTGVhdmVDYW5jZWxsZWQsIFtlbF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxIb29rKG9uQWZ0ZXJMZWF2ZSwgW2VsXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxbbGVhdmVDYktleV0gPSB2b2lkIDA7XG4gICAgICAgIGlmIChsZWF2aW5nVk5vZGVzQ2FjaGVba2V5Ml0gPT09IHZub2RlKSB7XG4gICAgICAgICAgZGVsZXRlIGxlYXZpbmdWTm9kZXNDYWNoZVtrZXkyXTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGxlYXZpbmdWTm9kZXNDYWNoZVtrZXkyXSA9IHZub2RlO1xuICAgICAgaWYgKG9uTGVhdmUpIHtcbiAgICAgICAgY2FsbEFzeW5jSG9vayhvbkxlYXZlLCBbZWwsIGRvbmVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNsb25lKHZub2RlMikge1xuICAgICAgY29uc3QgaG9va3MyID0gcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhcbiAgICAgICAgdm5vZGUyLFxuICAgICAgICBwcm9wcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGluc3RhbmNlLFxuICAgICAgICBwb3N0Q2xvbmVcbiAgICAgICk7XG4gICAgICBpZiAocG9zdENsb25lKSBwb3N0Q2xvbmUoaG9va3MyKTtcbiAgICAgIHJldHVybiBob29rczI7XG4gICAgfVxuICB9O1xuICByZXR1cm4gaG9va3M7XG59XG5mdW5jdGlvbiBlbXB0eVBsYWNlaG9sZGVyKHZub2RlKSB7XG4gIGlmIChpc0tlZXBBbGl2ZSh2bm9kZSkpIHtcbiAgICB2bm9kZSA9IGNsb25lVk5vZGUodm5vZGUpO1xuICAgIHZub2RlLmNoaWxkcmVuID0gbnVsbDtcbiAgICByZXR1cm4gdm5vZGU7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldElubmVyQ2hpbGQkMSh2bm9kZSkge1xuICBpZiAoIWlzS2VlcEFsaXZlKHZub2RlKSkge1xuICAgIGlmIChpc1RlbGVwb3J0KHZub2RlLnR5cGUpICYmIHZub2RlLmNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gZmluZE5vbkNvbW1lbnRDaGlsZCh2bm9kZS5jaGlsZHJlbik7XG4gICAgfVxuICAgIHJldHVybiB2bm9kZTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB2bm9kZS5jb21wb25lbnQpIHtcbiAgICByZXR1cm4gdm5vZGUuY29tcG9uZW50LnN1YlRyZWU7XG4gIH1cbiAgY29uc3QgeyBzaGFwZUZsYWcsIGNoaWxkcmVuIH0gPSB2bm9kZTtcbiAgaWYgKGNoaWxkcmVuKSB7XG4gICAgaWYgKHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICByZXR1cm4gY2hpbGRyZW5bMF07XG4gICAgfVxuICAgIGlmIChzaGFwZUZsYWcgJiAzMiAmJiBpc0Z1bmN0aW9uKGNoaWxkcmVuLmRlZmF1bHQpKSB7XG4gICAgICByZXR1cm4gY2hpbGRyZW4uZGVmYXVsdCgpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLCBob29rcykge1xuICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNiAmJiB2bm9kZS5jb21wb25lbnQpIHtcbiAgICB2bm9kZS50cmFuc2l0aW9uID0gaG9va3M7XG4gICAgc2V0VHJhbnNpdGlvbkhvb2tzKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlLCBob29rcyk7XG4gIH0gZWxzZSBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgdm5vZGUuc3NDb250ZW50LnRyYW5zaXRpb24gPSBob29rcy5jbG9uZSh2bm9kZS5zc0NvbnRlbnQpO1xuICAgIHZub2RlLnNzRmFsbGJhY2sudHJhbnNpdGlvbiA9IGhvb2tzLmNsb25lKHZub2RlLnNzRmFsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIHZub2RlLnRyYW5zaXRpb24gPSBob29rcztcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKGNoaWxkcmVuLCBrZWVwQ29tbWVudCA9IGZhbHNlLCBwYXJlbnRLZXkpIHtcbiAgbGV0IHJldCA9IFtdO1xuICBsZXQga2V5ZWRGcmFnbWVudENvdW50ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIGxldCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgIGNvbnN0IGtleSA9IHBhcmVudEtleSA9PSBudWxsID8gY2hpbGQua2V5IDogU3RyaW5nKHBhcmVudEtleSkgKyBTdHJpbmcoY2hpbGQua2V5ICE9IG51bGwgPyBjaGlsZC5rZXkgOiBpKTtcbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gRnJhZ21lbnQpIHtcbiAgICAgIGlmIChjaGlsZC5wYXRjaEZsYWcgJiAxMjgpIGtleWVkRnJhZ21lbnRDb3VudCsrO1xuICAgICAgcmV0ID0gcmV0LmNvbmNhdChcbiAgICAgICAgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKGNoaWxkLmNoaWxkcmVuLCBrZWVwQ29tbWVudCwga2V5KVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGtlZXBDb21tZW50IHx8IGNoaWxkLnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgIHJldC5wdXNoKGtleSAhPSBudWxsID8gY2xvbmVWTm9kZShjaGlsZCwgeyBrZXkgfSkgOiBjaGlsZCk7XG4gICAgfVxuICB9XG4gIGlmIChrZXllZEZyYWdtZW50Q291bnQgPiAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJldFtpXS5wYXRjaEZsYWcgPSAtMjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyohICNfX05PX1NJREVfRUZGRUNUU19fICovXG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gZGVmaW5lQ29tcG9uZW50KG9wdGlvbnMsIGV4dHJhT3B0aW9ucykge1xuICByZXR1cm4gaXNGdW5jdGlvbihvcHRpb25zKSA/IChcbiAgICAvLyAjODIzNjogZXh0ZW5kIGNhbGwgYW5kIG9wdGlvbnMubmFtZSBhY2Nlc3MgYXJlIGNvbnNpZGVyZWQgc2lkZS1lZmZlY3RzXG4gICAgLy8gYnkgUm9sbHVwLCBzbyB3ZSBoYXZlIHRvIHdyYXAgaXQgaW4gYSBwdXJlLWFubm90YXRlZCBJSUZFLlxuICAgIC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4gZXh0ZW5kKHsgbmFtZTogb3B0aW9ucy5uYW1lIH0sIGV4dHJhT3B0aW9ucywgeyBzZXR1cDogb3B0aW9ucyB9KSkoKVxuICApIDogb3B0aW9ucztcbn1cblxuZnVuY3Rpb24gdXNlSWQoKSB7XG4gIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKGkpIHtcbiAgICByZXR1cm4gKGkuYXBwQ29udGV4dC5jb25maWcuaWRQcmVmaXggfHwgXCJ2XCIpICsgXCItXCIgKyBpLmlkc1swXSArIGkuaWRzWzFdKys7XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShcbiAgICAgIGB1c2VJZCgpIGlzIGNhbGxlZCB3aGVuIHRoZXJlIGlzIG5vIGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UgdG8gYmUgYXNzb2NpYXRlZCB3aXRoLmBcbiAgICApO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuZnVuY3Rpb24gbWFya0FzeW5jQm91bmRhcnkoaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UuaWRzID0gW2luc3RhbmNlLmlkc1swXSArIGluc3RhbmNlLmlkc1syXSsrICsgXCItXCIsIDAsIDBdO1xufVxuXG5jb25zdCBrbm93blRlbXBsYXRlUmVmcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xuZnVuY3Rpb24gdXNlVGVtcGxhdGVSZWYoa2V5KSB7XG4gIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgY29uc3QgciA9IHNoYWxsb3dSZWYobnVsbCk7XG4gIGlmIChpKSB7XG4gICAgY29uc3QgcmVmcyA9IGkucmVmcyA9PT0gRU1QVFlfT0JKID8gaS5yZWZzID0ge30gOiBpLnJlZnM7XG4gICAgbGV0IGRlc2M7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgKGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHJlZnMsIGtleSkpICYmICFkZXNjLmNvbmZpZ3VyYWJsZSkge1xuICAgICAgd2FybiQxKGB1c2VUZW1wbGF0ZVJlZignJHtrZXl9JykgYWxyZWFkeSBleGlzdHMuYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWZzLCBrZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiByLnZhbHVlLFxuICAgICAgICBzZXQ6ICh2YWwpID0+IHIudmFsdWUgPSB2YWxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FybiQxKFxuICAgICAgYHVzZVRlbXBsYXRlUmVmKCkgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZSB0byBiZSBhc3NvY2lhdGVkIHdpdGguYFxuICAgICk7XG4gIH1cbiAgY29uc3QgcmV0ID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHJlYWRvbmx5KHIpIDogcjtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBrbm93blRlbXBsYXRlUmVmcy5hZGQocmV0KTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBzZXRSZWYocmF3UmVmLCBvbGRSYXdSZWYsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgaXNVbm1vdW50ID0gZmFsc2UpIHtcbiAgaWYgKGlzQXJyYXkocmF3UmVmKSkge1xuICAgIHJhd1JlZi5mb3JFYWNoKFxuICAgICAgKHIsIGkpID0+IHNldFJlZihcbiAgICAgICAgcixcbiAgICAgICAgb2xkUmF3UmVmICYmIChpc0FycmF5KG9sZFJhd1JlZikgPyBvbGRSYXdSZWZbaV0gOiBvbGRSYXdSZWYpLFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgdm5vZGUsXG4gICAgICAgIGlzVW5tb3VudFxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpc0FzeW5jV3JhcHBlcih2bm9kZSkgJiYgIWlzVW5tb3VudCkge1xuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiA1MTIgJiYgdm5vZGUudHlwZS5fX2FzeW5jUmVzb2x2ZWQgJiYgdm5vZGUuY29tcG9uZW50LnN1YlRyZWUuY29tcG9uZW50KSB7XG4gICAgICBzZXRSZWYocmF3UmVmLCBvbGRSYXdSZWYsIHBhcmVudFN1c3BlbnNlLCB2bm9kZS5jb21wb25lbnQuc3ViVHJlZSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCByZWZWYWx1ZSA9IHZub2RlLnNoYXBlRmxhZyAmIDQgPyBnZXRDb21wb25lbnRQdWJsaWNJbnN0YW5jZSh2bm9kZS5jb21wb25lbnQpIDogdm5vZGUuZWw7XG4gIGNvbnN0IHZhbHVlID0gaXNVbm1vdW50ID8gbnVsbCA6IHJlZlZhbHVlO1xuICBjb25zdCB7IGk6IG93bmVyLCByOiByZWYgfSA9IHJhd1JlZjtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIW93bmVyKSB7XG4gICAgd2FybiQxKFxuICAgICAgYE1pc3NpbmcgcmVmIG93bmVyIGNvbnRleHQuIHJlZiBjYW5ub3QgYmUgdXNlZCBvbiBob2lzdGVkIHZub2Rlcy4gQSB2bm9kZSB3aXRoIHJlZiBtdXN0IGJlIGNyZWF0ZWQgaW5zaWRlIHRoZSByZW5kZXIgZnVuY3Rpb24uYFxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9sZFJlZiA9IG9sZFJhd1JlZiAmJiBvbGRSYXdSZWYucjtcbiAgY29uc3QgcmVmcyA9IG93bmVyLnJlZnMgPT09IEVNUFRZX09CSiA/IG93bmVyLnJlZnMgPSB7fSA6IG93bmVyLnJlZnM7XG4gIGNvbnN0IHNldHVwU3RhdGUgPSBvd25lci5zZXR1cFN0YXRlO1xuICBjb25zdCByYXdTZXR1cFN0YXRlID0gdG9SYXcoc2V0dXBTdGF0ZSk7XG4gIGNvbnN0IGNhblNldFNldHVwUmVmID0gc2V0dXBTdGF0ZSA9PT0gRU1QVFlfT0JKID8gKCkgPT4gZmFsc2UgOiAoa2V5KSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGlmIChoYXNPd24ocmF3U2V0dXBTdGF0ZSwga2V5KSAmJiAhaXNSZWYocmF3U2V0dXBTdGF0ZVtrZXldKSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYFRlbXBsYXRlIHJlZiBcIiR7a2V5fVwiIHVzZWQgb24gYSBub24tcmVmIHZhbHVlLiBJdCB3aWxsIG5vdCB3b3JrIGluIHRoZSBwcm9kdWN0aW9uIGJ1aWxkLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChrbm93blRlbXBsYXRlUmVmcy5oYXMocmF3U2V0dXBTdGF0ZVtrZXldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoYXNPd24ocmF3U2V0dXBTdGF0ZSwga2V5KTtcbiAgfTtcbiAgaWYgKG9sZFJlZiAhPSBudWxsICYmIG9sZFJlZiAhPT0gcmVmKSB7XG4gICAgaWYgKGlzU3RyaW5nKG9sZFJlZikpIHtcbiAgICAgIHJlZnNbb2xkUmVmXSA9IG51bGw7XG4gICAgICBpZiAoY2FuU2V0U2V0dXBSZWYob2xkUmVmKSkge1xuICAgICAgICBzZXR1cFN0YXRlW29sZFJlZl0gPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNSZWYob2xkUmVmKSkge1xuICAgICAgb2xkUmVmLnZhbHVlID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgaWYgKGlzRnVuY3Rpb24ocmVmKSkge1xuICAgIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhyZWYsIG93bmVyLCAxMiwgW3ZhbHVlLCByZWZzXSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgX2lzU3RyaW5nID0gaXNTdHJpbmcocmVmKTtcbiAgICBjb25zdCBfaXNSZWYgPSBpc1JlZihyZWYpO1xuICAgIGlmIChfaXNTdHJpbmcgfHwgX2lzUmVmKSB7XG4gICAgICBjb25zdCBkb1NldCA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJhd1JlZi5mKSB7XG4gICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBfaXNTdHJpbmcgPyBjYW5TZXRTZXR1cFJlZihyZWYpID8gc2V0dXBTdGF0ZVtyZWZdIDogcmVmc1tyZWZdIDogcmVmLnZhbHVlO1xuICAgICAgICAgIGlmIChpc1VubW91bnQpIHtcbiAgICAgICAgICAgIGlzQXJyYXkoZXhpc3RpbmcpICYmIHJlbW92ZShleGlzdGluZywgcmVmVmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWlzQXJyYXkoZXhpc3RpbmcpKSB7XG4gICAgICAgICAgICAgIGlmIChfaXNTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICByZWZzW3JlZl0gPSBbcmVmVmFsdWVdO1xuICAgICAgICAgICAgICAgIGlmIChjYW5TZXRTZXR1cFJlZihyZWYpKSB7XG4gICAgICAgICAgICAgICAgICBzZXR1cFN0YXRlW3JlZl0gPSByZWZzW3JlZl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlZi52YWx1ZSA9IFtyZWZWYWx1ZV07XG4gICAgICAgICAgICAgICAgaWYgKHJhd1JlZi5rKSByZWZzW3Jhd1JlZi5rXSA9IHJlZi52YWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghZXhpc3RpbmcuaW5jbHVkZXMocmVmVmFsdWUpKSB7XG4gICAgICAgICAgICAgIGV4aXN0aW5nLnB1c2gocmVmVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChfaXNTdHJpbmcpIHtcbiAgICAgICAgICByZWZzW3JlZl0gPSB2YWx1ZTtcbiAgICAgICAgICBpZiAoY2FuU2V0U2V0dXBSZWYocmVmKSkge1xuICAgICAgICAgICAgc2V0dXBTdGF0ZVtyZWZdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKF9pc1JlZikge1xuICAgICAgICAgIHJlZi52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgIGlmIChyYXdSZWYuaykgcmVmc1tyYXdSZWYua10gPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgd2FybiQxKFwiSW52YWxpZCB0ZW1wbGF0ZSByZWYgdHlwZTpcIiwgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgZG9TZXQuaWQgPSAtMTtcbiAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGRvU2V0LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb1NldCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKFwiSW52YWxpZCB0ZW1wbGF0ZSByZWYgdHlwZTpcIiwgcmVmLCBgKCR7dHlwZW9mIHJlZn0pYCk7XG4gICAgfVxuICB9XG59XG5cbmxldCBoYXNMb2dnZWRNaXNtYXRjaEVycm9yID0gZmFsc2U7XG5jb25zdCBsb2dNaXNtYXRjaEVycm9yID0gKCkgPT4ge1xuICBpZiAoaGFzTG9nZ2VkTWlzbWF0Y2hFcnJvcikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLmVycm9yKFwiSHlkcmF0aW9uIGNvbXBsZXRlZCBidXQgY29udGFpbnMgbWlzbWF0Y2hlcy5cIik7XG4gIGhhc0xvZ2dlZE1pc21hdGNoRXJyb3IgPSB0cnVlO1xufTtcbmNvbnN0IGlzU1ZHQ29udGFpbmVyID0gKGNvbnRhaW5lcikgPT4gY29udGFpbmVyLm5hbWVzcGFjZVVSSS5pbmNsdWRlcyhcInN2Z1wiKSAmJiBjb250YWluZXIudGFnTmFtZSAhPT0gXCJmb3JlaWduT2JqZWN0XCI7XG5jb25zdCBpc01hdGhNTENvbnRhaW5lciA9IChjb250YWluZXIpID0+IGNvbnRhaW5lci5uYW1lc3BhY2VVUkkuaW5jbHVkZXMoXCJNYXRoTUxcIik7XG5jb25zdCBnZXRDb250YWluZXJUeXBlID0gKGNvbnRhaW5lcikgPT4ge1xuICBpZiAoY29udGFpbmVyLm5vZGVUeXBlICE9PSAxKSByZXR1cm4gdm9pZCAwO1xuICBpZiAoaXNTVkdDb250YWluZXIoY29udGFpbmVyKSkgcmV0dXJuIFwic3ZnXCI7XG4gIGlmIChpc01hdGhNTENvbnRhaW5lcihjb250YWluZXIpKSByZXR1cm4gXCJtYXRobWxcIjtcbiAgcmV0dXJuIHZvaWQgMDtcbn07XG5jb25zdCBpc0NvbW1lbnQgPSAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gODtcbmZ1bmN0aW9uIGNyZWF0ZUh5ZHJhdGlvbkZ1bmN0aW9ucyhyZW5kZXJlckludGVybmFscykge1xuICBjb25zdCB7XG4gICAgbXQ6IG1vdW50Q29tcG9uZW50LFxuICAgIHA6IHBhdGNoLFxuICAgIG86IHtcbiAgICAgIHBhdGNoUHJvcCxcbiAgICAgIGNyZWF0ZVRleHQsXG4gICAgICBuZXh0U2libGluZyxcbiAgICAgIHBhcmVudE5vZGUsXG4gICAgICByZW1vdmUsXG4gICAgICBpbnNlcnQsXG4gICAgICBjcmVhdGVDb21tZW50XG4gICAgfVxuICB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XG4gIGNvbnN0IGh5ZHJhdGUgPSAodm5vZGUsIGNvbnRhaW5lcikgPT4ge1xuICAgIGlmICghY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiB3YXJuJDEoXG4gICAgICAgIGBBdHRlbXB0aW5nIHRvIGh5ZHJhdGUgZXhpc3RpbmcgbWFya3VwIGJ1dCBjb250YWluZXIgaXMgZW1wdHkuIFBlcmZvcm1pbmcgZnVsbCBtb3VudCBpbnN0ZWFkLmBcbiAgICAgICk7XG4gICAgICBwYXRjaChudWxsLCB2bm9kZSwgY29udGFpbmVyKTtcbiAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XG4gICAgICBjb250YWluZXIuX3Zub2RlID0gdm5vZGU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGh5ZHJhdGVOb2RlKGNvbnRhaW5lci5maXJzdENoaWxkLCB2bm9kZSwgbnVsbCwgbnVsbCwgbnVsbCk7XG4gICAgZmx1c2hQb3N0Rmx1c2hDYnMoKTtcbiAgICBjb250YWluZXIuX3Zub2RlID0gdm5vZGU7XG4gIH07XG4gIGNvbnN0IGh5ZHJhdGVOb2RlID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XG4gICAgb3B0aW1pemVkID0gb3B0aW1pemVkIHx8ICEhdm5vZGUuZHluYW1pY0NoaWxkcmVuO1xuICAgIGNvbnN0IGlzRnJhZ21lbnRTdGFydCA9IGlzQ29tbWVudChub2RlKSAmJiBub2RlLmRhdGEgPT09IFwiW1wiO1xuICAgIGNvbnN0IG9uTWlzbWF0Y2ggPSAoKSA9PiBoYW5kbGVNaXNtYXRjaChcbiAgICAgIG5vZGUsXG4gICAgICB2bm9kZSxcbiAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgaXNGcmFnbWVudFN0YXJ0XG4gICAgKTtcbiAgICBjb25zdCB7IHR5cGUsIHJlZiwgc2hhcGVGbGFnLCBwYXRjaEZsYWcgfSA9IHZub2RlO1xuICAgIGxldCBkb21UeXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgICB2bm9kZS5lbCA9IG5vZGU7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBkZWYobm9kZSwgXCJfX3Zub2RlXCIsIHZub2RlLCB0cnVlKTtcbiAgICAgIGRlZihub2RlLCBcIl9fdnVlUGFyZW50Q29tcG9uZW50XCIsIHBhcmVudENvbXBvbmVudCwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChwYXRjaEZsYWcgPT09IC0yKSB7XG4gICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgfVxuICAgIGxldCBuZXh0Tm9kZSA9IG51bGw7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFRleHQ6XG4gICAgICAgIGlmIChkb21UeXBlICE9PSAzKSB7XG4gICAgICAgICAgaWYgKHZub2RlLmNoaWxkcmVuID09PSBcIlwiKSB7XG4gICAgICAgICAgICBpbnNlcnQodm5vZGUuZWwgPSBjcmVhdGVUZXh0KFwiXCIpLCBwYXJlbnROb2RlKG5vZGUpLCBub2RlKTtcbiAgICAgICAgICAgIG5leHROb2RlID0gbm9kZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChub2RlLmRhdGEgIT09IHZub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmIHdhcm4kMShcbiAgICAgICAgICAgICAgYEh5ZHJhdGlvbiB0ZXh0IG1pc21hdGNoIGluYCxcbiAgICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLFxuICAgICAgICAgICAgICBgXG4gIC0gcmVuZGVyZWQgb24gc2VydmVyOiAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgICAgIG5vZGUuZGF0YVxuICAgICAgICAgICAgICApfVxuICAtIGV4cGVjdGVkIG9uIGNsaWVudDogJHtKU09OLnN0cmluZ2lmeSh2bm9kZS5jaGlsZHJlbil9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxvZ01pc21hdGNoRXJyb3IoKTtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDb21tZW50OlxuICAgICAgICBpZiAoaXNUZW1wbGF0ZU5vZGUobm9kZSkpIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgIHJlcGxhY2VOb2RlKFxuICAgICAgICAgICAgdm5vZGUuZWwgPSBub2RlLmNvbnRlbnQuZmlyc3RDaGlsZCxcbiAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKGRvbVR5cGUgIT09IDggfHwgaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3RhdGljOlxuICAgICAgICBpZiAoaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgbm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgIGRvbVR5cGUgPSBub2RlLm5vZGVUeXBlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb21UeXBlID09PSAxIHx8IGRvbVR5cGUgPT09IDMpIHtcbiAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgY29uc3QgbmVlZFRvQWRvcHRDb250ZW50ID0gIXZub2RlLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZub2RlLnN0YXRpY0NvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGlmIChuZWVkVG9BZG9wdENvbnRlbnQpXG4gICAgICAgICAgICAgIHZub2RlLmNoaWxkcmVuICs9IG5leHROb2RlLm5vZGVUeXBlID09PSAxID8gbmV4dE5vZGUub3V0ZXJIVE1MIDogbmV4dE5vZGUuZGF0YTtcbiAgICAgICAgICAgIGlmIChpID09PSB2bm9kZS5zdGF0aWNDb3VudCAtIDEpIHtcbiAgICAgICAgICAgICAgdm5vZGUuYW5jaG9yID0gbmV4dE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5leHROb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGlzRnJhZ21lbnRTdGFydCA/IG5leHRTaWJsaW5nKG5leHROb2RlKSA6IG5leHROb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9uTWlzbWF0Y2goKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRnJhZ21lbnQ6XG4gICAgICAgIGlmICghaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dE5vZGUgPSBoeWRyYXRlRnJhZ21lbnQoXG4gICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMSkge1xuICAgICAgICAgIGlmICgoZG9tVHlwZSAhPT0gMSB8fCB2bm9kZS50eXBlLnRvTG93ZXJDYXNlKCkgIT09IG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSAmJiAhaXNUZW1wbGF0ZU5vZGUobm9kZSkpIHtcbiAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IGh5ZHJhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICB2bm9kZSxcbiAgICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNoYXBlRmxhZyAmIDYpIHtcbiAgICAgICAgICB2bm9kZS5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XG4gICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcbiAgICAgICAgICBpZiAoaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IGxvY2F0ZUNsb3NpbmdBbmNob3Iobm9kZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0NvbW1lbnQobm9kZSkgJiYgbm9kZS5kYXRhID09PSBcInRlbGVwb3J0IHN0YXJ0XCIpIHtcbiAgICAgICAgICAgIG5leHROb2RlID0gbG9jYXRlQ2xvc2luZ0FuY2hvcihub2RlLCBub2RlLmRhdGEsIFwidGVsZXBvcnQgZW5kXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb3VudENvbXBvbmVudChcbiAgICAgICAgICAgIHZub2RlLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgZ2V0Q29udGFpbmVyVHlwZShjb250YWluZXIpLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoaXNBc3luY1dyYXBwZXIodm5vZGUpICYmICF2bm9kZS50eXBlLl9fYXN5bmNSZXNvbHZlZCkge1xuICAgICAgICAgICAgbGV0IHN1YlRyZWU7XG4gICAgICAgICAgICBpZiAoaXNGcmFnbWVudFN0YXJ0KSB7XG4gICAgICAgICAgICAgIHN1YlRyZWUgPSBjcmVhdGVWTm9kZShGcmFnbWVudCk7XG4gICAgICAgICAgICAgIHN1YlRyZWUuYW5jaG9yID0gbmV4dE5vZGUgPyBuZXh0Tm9kZS5wcmV2aW91c1NpYmxpbmcgOiBjb250YWluZXIubGFzdENoaWxkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3ViVHJlZSA9IG5vZGUubm9kZVR5cGUgPT09IDMgPyBjcmVhdGVUZXh0Vk5vZGUoXCJcIikgOiBjcmVhdGVWTm9kZShcImRpdlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YlRyZWUuZWwgPSBub2RlO1xuICAgICAgICAgICAgdm5vZGUuY29tcG9uZW50LnN1YlRyZWUgPSBzdWJUcmVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiA2NCkge1xuICAgICAgICAgIGlmIChkb21UeXBlICE9PSA4KSB7XG4gICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dE5vZGUgPSB2bm9kZS50eXBlLmh5ZHJhdGUoXG4gICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgIHZub2RlLFxuICAgICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgICAgICAgcmVuZGVyZXJJbnRlcm5hbHMsXG4gICAgICAgICAgICAgIGh5ZHJhdGVDaGlsZHJlblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICAgICAgbmV4dE5vZGUgPSB2bm9kZS50eXBlLmh5ZHJhdGUoXG4gICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIGdldENvbnRhaW5lclR5cGUocGFyZW50Tm9kZShub2RlKSksXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWQsXG4gICAgICAgICAgICByZW5kZXJlckludGVybmFscyxcbiAgICAgICAgICAgIGh5ZHJhdGVOb2RlXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXykge1xuICAgICAgICAgIHdhcm4kMShcIkludmFsaWQgSG9zdFZOb2RlIHR5cGU6XCIsIHR5cGUsIGAoJHt0eXBlb2YgdHlwZX0pYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlZiAhPSBudWxsKSB7XG4gICAgICBzZXRSZWYocmVmLCBudWxsLCBwYXJlbnRTdXNwZW5zZSwgdm5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dE5vZGU7XG4gIH07XG4gIGNvbnN0IGh5ZHJhdGVFbGVtZW50ID0gKGVsLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBvcHRpbWl6ZWQgPSBvcHRpbWl6ZWQgfHwgISF2bm9kZS5keW5hbWljQ2hpbGRyZW47XG4gICAgY29uc3QgeyB0eXBlLCBwcm9wcywgcGF0Y2hGbGFnLCBzaGFwZUZsYWcsIGRpcnMsIHRyYW5zaXRpb24gfSA9IHZub2RlO1xuICAgIGNvbnN0IGZvcmNlUGF0Y2ggPSB0eXBlID09PSBcImlucHV0XCIgfHwgdHlwZSA9PT0gXCJvcHRpb25cIjtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBmb3JjZVBhdGNoIHx8IHBhdGNoRmxhZyAhPT0gLTEpIHtcbiAgICAgIGlmIChkaXJzKSB7XG4gICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJjcmVhdGVkXCIpO1xuICAgICAgfVxuICAgICAgbGV0IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gZmFsc2U7XG4gICAgICBpZiAoaXNUZW1wbGF0ZU5vZGUoZWwpKSB7XG4gICAgICAgIG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gbmVlZFRyYW5zaXRpb24oXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICAvLyBubyBuZWVkIGNoZWNrIHBhcmVudFN1c3BlbnNlIGluIGh5ZHJhdGlvblxuICAgICAgICAgIHRyYW5zaXRpb25cbiAgICAgICAgKSAmJiBwYXJlbnRDb21wb25lbnQgJiYgcGFyZW50Q29tcG9uZW50LnZub2RlLnByb3BzICYmIHBhcmVudENvbXBvbmVudC52bm9kZS5wcm9wcy5hcHBlYXI7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlbC5jb250ZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmIChuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcykge1xuICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZU5vZGUoY29udGVudCwgZWwsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgIHZub2RlLmVsID0gZWwgPSBjb250ZW50O1xuICAgICAgfVxuICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2ICYmIC8vIHNraXAgaWYgZWxlbWVudCBoYXMgaW5uZXJIVE1MIC8gdGV4dENvbnRlbnRcbiAgICAgICEocHJvcHMgJiYgKHByb3BzLmlubmVySFRNTCB8fCBwcm9wcy50ZXh0Q29udGVudCkpKSB7XG4gICAgICAgIGxldCBuZXh0ID0gaHlkcmF0ZUNoaWxkcmVuKFxuICAgICAgICAgIGVsLmZpcnN0Q2hpbGQsXG4gICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgZWwsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGhhc1dhcm5lZCA9IGZhbHNlO1xuICAgICAgICB3aGlsZSAobmV4dCkge1xuICAgICAgICAgIGlmICghaXNNaXNtYXRjaEFsbG93ZWQoZWwsIDEgLyogQ0hJTERSRU4gKi8pKSB7XG4gICAgICAgICAgICBpZiAoKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fKSAmJiAhaGFzV2FybmVkKSB7XG4gICAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgICBgSHlkcmF0aW9uIGNoaWxkcmVuIG1pc21hdGNoIG9uYCxcbiAgICAgICAgICAgICAgICBlbCxcbiAgICAgICAgICAgICAgICBgXG5TZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBtb3JlIGNoaWxkIG5vZGVzIHRoYW4gY2xpZW50IHZkb20uYFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nTWlzbWF0Y2hFcnJvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjdXIgPSBuZXh0O1xuICAgICAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICAgICAgICAgIHJlbW92ZShjdXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNoYXBlRmxhZyAmIDgpIHtcbiAgICAgICAgbGV0IGNsaWVudFRleHQgPSB2bm9kZS5jaGlsZHJlbjtcbiAgICAgICAgaWYgKGNsaWVudFRleHRbMF0gPT09IFwiXFxuXCIgJiYgKGVsLnRhZ05hbWUgPT09IFwiUFJFXCIgfHwgZWwudGFnTmFtZSA9PT0gXCJURVhUQVJFQVwiKSkge1xuICAgICAgICAgIGNsaWVudFRleHQgPSBjbGllbnRUZXh0LnNsaWNlKDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbC50ZXh0Q29udGVudCAhPT0gY2xpZW50VGV4dCkge1xuICAgICAgICAgIGlmICghaXNNaXNtYXRjaEFsbG93ZWQoZWwsIDAgLyogVEVYVCAqLykpIHtcbiAgICAgICAgICAgICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXykgJiYgd2FybiQxKFxuICAgICAgICAgICAgICBgSHlkcmF0aW9uIHRleHQgY29udGVudCBtaXNtYXRjaCBvbmAsXG4gICAgICAgICAgICAgIGVsLFxuICAgICAgICAgICAgICBgXG4gIC0gcmVuZGVyZWQgb24gc2VydmVyOiAke2VsLnRleHRDb250ZW50fVxuICAtIGV4cGVjdGVkIG9uIGNsaWVudDogJHt2bm9kZS5jaGlsZHJlbn1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbG9nTWlzbWF0Y2hFcnJvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IHZub2RlLmNoaWxkcmVuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocHJvcHMpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9IWURSQVRJT05fTUlTTUFUQ0hfREVUQUlMU19fIHx8IGZvcmNlUGF0Y2ggfHwgIW9wdGltaXplZCB8fCBwYXRjaEZsYWcgJiAoMTYgfCAzMikpIHtcbiAgICAgICAgICBjb25zdCBpc0N1c3RvbUVsZW1lbnQgPSBlbC50YWdOYW1lLmluY2x1ZGVzKFwiLVwiKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgICAgICAgICAgaWYgKCghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXykgJiYgLy8gIzExMTg5IHNraXAgaWYgdGhpcyBub2RlIGhhcyBkaXJlY3RpdmVzIHRoYXQgaGF2ZSBjcmVhdGVkIGhvb2tzXG4gICAgICAgICAgICAvLyBhcyBpdCBjb3VsZCBoYXZlIG11dGF0ZWQgdGhlIERPTSBpbiBhbnkgcG9zc2libGUgd2F5XG4gICAgICAgICAgICAhKGRpcnMgJiYgZGlycy5zb21lKChkKSA9PiBkLmRpci5jcmVhdGVkKSkgJiYgcHJvcEhhc01pc21hdGNoKGVsLCBrZXksIHByb3BzW2tleV0sIHZub2RlLCBwYXJlbnRDb21wb25lbnQpKSB7XG4gICAgICAgICAgICAgIGxvZ01pc21hdGNoRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3JjZVBhdGNoICYmIChrZXkuZW5kc1dpdGgoXCJ2YWx1ZVwiKSB8fCBrZXkgPT09IFwiaW5kZXRlcm1pbmF0ZVwiKSB8fCBpc09uKGtleSkgJiYgIWlzUmVzZXJ2ZWRQcm9wKGtleSkgfHwgLy8gZm9yY2UgaHlkcmF0ZSB2LWJpbmQgd2l0aCAucHJvcCBtb2RpZmllcnNcbiAgICAgICAgICAgIGtleVswXSA9PT0gXCIuXCIgfHwgaXNDdXN0b21FbGVtZW50KSB7XG4gICAgICAgICAgICAgIHBhdGNoUHJvcChlbCwga2V5LCBudWxsLCBwcm9wc1trZXldLCB2b2lkIDAsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHByb3BzLm9uQ2xpY2spIHtcbiAgICAgICAgICBwYXRjaFByb3AoXG4gICAgICAgICAgICBlbCxcbiAgICAgICAgICAgIFwib25DbGlja1wiLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHByb3BzLm9uQ2xpY2ssXG4gICAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHBhdGNoRmxhZyAmIDQgJiYgaXNSZWFjdGl2ZShwcm9wcy5zdHlsZSkpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcy5zdHlsZSkgcHJvcHMuc3R5bGVba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHZub2RlSG9va3M7XG4gICAgICBpZiAodm5vZGVIb29rcyA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVCZWZvcmVNb3VudCkge1xuICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rcywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICB9XG4gICAgICBpZiAoZGlycykge1xuICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIFwiYmVmb3JlTW91bnRcIik7XG4gICAgICB9XG4gICAgICBpZiAoKHZub2RlSG9va3MgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlTW91bnRlZCkgfHwgZGlycyB8fCBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcykge1xuICAgICAgICBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSgoKSA9PiB7XG4gICAgICAgICAgdm5vZGVIb29rcyAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rcywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XG4gICAgICAgICAgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MgJiYgdHJhbnNpdGlvbi5lbnRlcihlbCk7XG4gICAgICAgICAgZGlycyAmJiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIFwibW91bnRlZFwiKTtcbiAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZWwubmV4dFNpYmxpbmc7XG4gIH07XG4gIGNvbnN0IGh5ZHJhdGVDaGlsZHJlbiA9IChub2RlLCBwYXJlbnRWTm9kZSwgY29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIG9wdGltaXplZCA9IG9wdGltaXplZCB8fCAhIXBhcmVudFZOb2RlLmR5bmFtaWNDaGlsZHJlbjtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHBhcmVudFZOb2RlLmNoaWxkcmVuO1xuICAgIGNvbnN0IGwgPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgbGV0IGhhc1dhcm5lZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICBjb25zdCB2bm9kZSA9IG9wdGltaXplZCA/IGNoaWxkcmVuW2ldIDogY2hpbGRyZW5baV0gPSBub3JtYWxpemVWTm9kZShjaGlsZHJlbltpXSk7XG4gICAgICBjb25zdCBpc1RleHQgPSB2bm9kZS50eXBlID09PSBUZXh0O1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgaWYgKGlzVGV4dCAmJiAhb3B0aW1pemVkKSB7XG4gICAgICAgICAgaWYgKGkgKyAxIDwgbCAmJiBub3JtYWxpemVWTm9kZShjaGlsZHJlbltpICsgMV0pLnR5cGUgPT09IFRleHQpIHtcbiAgICAgICAgICAgIGluc2VydChcbiAgICAgICAgICAgICAgY3JlYXRlVGV4dChcbiAgICAgICAgICAgICAgICBub2RlLmRhdGEuc2xpY2Uodm5vZGUuY2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICAgIG5leHRTaWJsaW5nKG5vZGUpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gdm5vZGUuY2hpbGRyZW47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBoeWRyYXRlTm9kZShcbiAgICAgICAgICBub2RlLFxuICAgICAgICAgIHZub2RlLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGlzVGV4dCAmJiAhdm5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgaW5zZXJ0KHZub2RlLmVsID0gY3JlYXRlVGV4dChcIlwiKSwgY29udGFpbmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghaXNNaXNtYXRjaEFsbG93ZWQoY29udGFpbmVyLCAxIC8qIENISUxEUkVOICovKSkge1xuICAgICAgICAgIGlmICgoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmICFoYXNXYXJuZWQpIHtcbiAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgYEh5ZHJhdGlvbiBjaGlsZHJlbiBtaXNtYXRjaCBvbmAsXG4gICAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgICAgYFxuU2VydmVyIHJlbmRlcmVkIGVsZW1lbnQgY29udGFpbnMgZmV3ZXIgY2hpbGQgbm9kZXMgdGhhbiBjbGllbnQgdmRvbS5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaGFzV2FybmVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbG9nTWlzbWF0Y2hFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIGdldENvbnRhaW5lclR5cGUoY29udGFpbmVyKSxcbiAgICAgICAgICBzbG90U2NvcGVJZHNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG4gIGNvbnN0IGh5ZHJhdGVGcmFnbWVudCA9IChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCB7IHNsb3RTY29wZUlkczogZnJhZ21lbnRTbG90U2NvcGVJZHMgfSA9IHZub2RlO1xuICAgIGlmIChmcmFnbWVudFNsb3RTY29wZUlkcykge1xuICAgICAgc2xvdFNjb3BlSWRzID0gc2xvdFNjb3BlSWRzID8gc2xvdFNjb3BlSWRzLmNvbmNhdChmcmFnbWVudFNsb3RTY29wZUlkcykgOiBmcmFnbWVudFNsb3RTY29wZUlkcztcbiAgICB9XG4gICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcbiAgICBjb25zdCBuZXh0ID0gaHlkcmF0ZUNoaWxkcmVuKFxuICAgICAgbmV4dFNpYmxpbmcobm9kZSksXG4gICAgICB2bm9kZSxcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgb3B0aW1pemVkXG4gICAgKTtcbiAgICBpZiAobmV4dCAmJiBpc0NvbW1lbnQobmV4dCkgJiYgbmV4dC5kYXRhID09PSBcIl1cIikge1xuICAgICAgcmV0dXJuIG5leHRTaWJsaW5nKHZub2RlLmFuY2hvciA9IG5leHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dNaXNtYXRjaEVycm9yKCk7XG4gICAgICBpbnNlcnQodm5vZGUuYW5jaG9yID0gY3JlYXRlQ29tbWVudChgXWApLCBjb250YWluZXIsIG5leHQpO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfVxuICB9O1xuICBjb25zdCBoYW5kbGVNaXNtYXRjaCA9IChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBpc0ZyYWdtZW50KSA9PiB7XG4gICAgaWYgKCFpc01pc21hdGNoQWxsb3dlZChub2RlLnBhcmVudEVsZW1lbnQsIDEgLyogQ0hJTERSRU4gKi8pKSB7XG4gICAgICAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18pICYmIHdhcm4kMShcbiAgICAgICAgYEh5ZHJhdGlvbiBub2RlIG1pc21hdGNoOlxuLSByZW5kZXJlZCBvbiBzZXJ2ZXI6YCxcbiAgICAgICAgbm9kZSxcbiAgICAgICAgbm9kZS5ub2RlVHlwZSA9PT0gMyA/IGAodGV4dClgIDogaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gXCJbXCIgPyBgKHN0YXJ0IG9mIGZyYWdtZW50KWAgOiBgYCxcbiAgICAgICAgYFxuLSBleHBlY3RlZCBvbiBjbGllbnQ6YCxcbiAgICAgICAgdm5vZGUudHlwZVxuICAgICAgKTtcbiAgICAgIGxvZ01pc21hdGNoRXJyb3IoKTtcbiAgICB9XG4gICAgdm5vZGUuZWwgPSBudWxsO1xuICAgIGlmIChpc0ZyYWdtZW50KSB7XG4gICAgICBjb25zdCBlbmQgPSBsb2NhdGVDbG9zaW5nQW5jaG9yKG5vZGUpO1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgbmV4dDIgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgICAgaWYgKG5leHQyICYmIG5leHQyICE9PSBlbmQpIHtcbiAgICAgICAgICByZW1vdmUobmV4dDIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5leHQgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICBjb25zdCBjb250YWluZXIgPSBwYXJlbnROb2RlKG5vZGUpO1xuICAgIHJlbW92ZShub2RlKTtcbiAgICBwYXRjaChcbiAgICAgIG51bGwsXG4gICAgICB2bm9kZSxcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIG5leHQsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgIGdldENvbnRhaW5lclR5cGUoY29udGFpbmVyKSxcbiAgICAgIHNsb3RTY29wZUlkc1xuICAgICk7XG4gICAgaWYgKHBhcmVudENvbXBvbmVudCkge1xuICAgICAgcGFyZW50Q29tcG9uZW50LnZub2RlLmVsID0gdm5vZGUuZWw7XG4gICAgICB1cGRhdGVIT0NIb3N0RWwocGFyZW50Q29tcG9uZW50LCB2bm9kZS5lbCk7XG4gICAgfVxuICAgIHJldHVybiBuZXh0O1xuICB9O1xuICBjb25zdCBsb2NhdGVDbG9zaW5nQW5jaG9yID0gKG5vZGUsIG9wZW4gPSBcIltcIiwgY2xvc2UgPSBcIl1cIikgPT4ge1xuICAgIGxldCBtYXRjaCA9IDA7XG4gICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgIG5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcbiAgICAgIGlmIChub2RlICYmIGlzQ29tbWVudChub2RlKSkge1xuICAgICAgICBpZiAobm9kZS5kYXRhID09PSBvcGVuKSBtYXRjaCsrO1xuICAgICAgICBpZiAobm9kZS5kYXRhID09PSBjbG9zZSkge1xuICAgICAgICAgIGlmIChtYXRjaCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRTaWJsaW5nKG5vZGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXRjaC0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfTtcbiAgY29uc3QgcmVwbGFjZU5vZGUgPSAobmV3Tm9kZSwgb2xkTm9kZSwgcGFyZW50Q29tcG9uZW50KSA9PiB7XG4gICAgY29uc3QgcGFyZW50Tm9kZTIgPSBvbGROb2RlLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudE5vZGUyKSB7XG4gICAgICBwYXJlbnROb2RlMi5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7XG4gICAgfVxuICAgIGxldCBwYXJlbnQgPSBwYXJlbnRDb21wb25lbnQ7XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgaWYgKHBhcmVudC52bm9kZS5lbCA9PT0gb2xkTm9kZSkge1xuICAgICAgICBwYXJlbnQudm5vZGUuZWwgPSBwYXJlbnQuc3ViVHJlZS5lbCA9IG5ld05vZGU7XG4gICAgICB9XG4gICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaXNUZW1wbGF0ZU5vZGUgPSAobm9kZSkgPT4ge1xuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAxICYmIG5vZGUudGFnTmFtZSA9PT0gXCJURU1QTEFURVwiO1xuICB9O1xuICByZXR1cm4gW2h5ZHJhdGUsIGh5ZHJhdGVOb2RlXTtcbn1cbmZ1bmN0aW9uIHByb3BIYXNNaXNtYXRjaChlbCwga2V5LCBjbGllbnRWYWx1ZSwgdm5vZGUsIGluc3RhbmNlKSB7XG4gIGxldCBtaXNtYXRjaFR5cGU7XG4gIGxldCBtaXNtYXRjaEtleTtcbiAgbGV0IGFjdHVhbDtcbiAgbGV0IGV4cGVjdGVkO1xuICBpZiAoa2V5ID09PSBcImNsYXNzXCIpIHtcbiAgICBhY3R1YWwgPSBlbC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICBleHBlY3RlZCA9IG5vcm1hbGl6ZUNsYXNzKGNsaWVudFZhbHVlKTtcbiAgICBpZiAoIWlzU2V0RXF1YWwodG9DbGFzc1NldChhY3R1YWwgfHwgXCJcIiksIHRvQ2xhc3NTZXQoZXhwZWN0ZWQpKSkge1xuICAgICAgbWlzbWF0Y2hUeXBlID0gMiAvKiBDTEFTUyAqLztcbiAgICAgIG1pc21hdGNoS2V5ID0gYGNsYXNzYDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoa2V5ID09PSBcInN0eWxlXCIpIHtcbiAgICBhY3R1YWwgPSBlbC5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSB8fCBcIlwiO1xuICAgIGV4cGVjdGVkID0gaXNTdHJpbmcoY2xpZW50VmFsdWUpID8gY2xpZW50VmFsdWUgOiBzdHJpbmdpZnlTdHlsZShub3JtYWxpemVTdHlsZShjbGllbnRWYWx1ZSkpO1xuICAgIGNvbnN0IGFjdHVhbE1hcCA9IHRvU3R5bGVNYXAoYWN0dWFsKTtcbiAgICBjb25zdCBleHBlY3RlZE1hcCA9IHRvU3R5bGVNYXAoZXhwZWN0ZWQpO1xuICAgIGlmICh2bm9kZS5kaXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IHsgZGlyLCB2YWx1ZSB9IG9mIHZub2RlLmRpcnMpIHtcbiAgICAgICAgaWYgKGRpci5uYW1lID09PSBcInNob3dcIiAmJiAhdmFsdWUpIHtcbiAgICAgICAgICBleHBlY3RlZE1hcC5zZXQoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgIHJlc29sdmVDc3NWYXJzKGluc3RhbmNlLCB2bm9kZSwgZXhwZWN0ZWRNYXApO1xuICAgIH1cbiAgICBpZiAoIWlzTWFwRXF1YWwoYWN0dWFsTWFwLCBleHBlY3RlZE1hcCkpIHtcbiAgICAgIG1pc21hdGNoVHlwZSA9IDMgLyogU1RZTEUgKi87XG4gICAgICBtaXNtYXRjaEtleSA9IFwic3R5bGVcIjtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZWwgaW5zdGFuY2VvZiBTVkdFbGVtZW50ICYmIGlzS25vd25TdmdBdHRyKGtleSkgfHwgZWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiAoaXNCb29sZWFuQXR0cihrZXkpIHx8IGlzS25vd25IdG1sQXR0cihrZXkpKSkge1xuICAgIGlmIChpc0Jvb2xlYW5BdHRyKGtleSkpIHtcbiAgICAgIGFjdHVhbCA9IGVsLmhhc0F0dHJpYnV0ZShrZXkpO1xuICAgICAgZXhwZWN0ZWQgPSBpbmNsdWRlQm9vbGVhbkF0dHIoY2xpZW50VmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoY2xpZW50VmFsdWUgPT0gbnVsbCkge1xuICAgICAgYWN0dWFsID0gZWwuaGFzQXR0cmlidXRlKGtleSk7XG4gICAgICBleHBlY3RlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKGtleSkpIHtcbiAgICAgICAgYWN0dWFsID0gZWwuZ2V0QXR0cmlidXRlKGtleSk7XG4gICAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJ2YWx1ZVwiICYmIGVsLnRhZ05hbWUgPT09IFwiVEVYVEFSRUFcIikge1xuICAgICAgICBhY3R1YWwgPSBlbC52YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdHVhbCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgZXhwZWN0ZWQgPSBpc1JlbmRlcmFibGVBdHRyVmFsdWUoY2xpZW50VmFsdWUpID8gU3RyaW5nKGNsaWVudFZhbHVlKSA6IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkge1xuICAgICAgbWlzbWF0Y2hUeXBlID0gNCAvKiBBVFRSSUJVVEUgKi87XG4gICAgICBtaXNtYXRjaEtleSA9IGtleTtcbiAgICB9XG4gIH1cbiAgaWYgKG1pc21hdGNoVHlwZSAhPSBudWxsICYmICFpc01pc21hdGNoQWxsb3dlZChlbCwgbWlzbWF0Y2hUeXBlKSkge1xuICAgIGNvbnN0IGZvcm1hdCA9ICh2KSA9PiB2ID09PSBmYWxzZSA/IGAobm90IHJlbmRlcmVkKWAgOiBgJHttaXNtYXRjaEtleX09XCIke3Z9XCJgO1xuICAgIGNvbnN0IHByZVNlZ21lbnQgPSBgSHlkcmF0aW9uICR7TWlzbWF0Y2hUeXBlU3RyaW5nW21pc21hdGNoVHlwZV19IG1pc21hdGNoIG9uYDtcbiAgICBjb25zdCBwb3N0U2VnbWVudCA9IGBcbiAgLSByZW5kZXJlZCBvbiBzZXJ2ZXI6ICR7Zm9ybWF0KGFjdHVhbCl9XG4gIC0gZXhwZWN0ZWQgb24gY2xpZW50OiAke2Zvcm1hdChleHBlY3RlZCl9XG4gIE5vdGU6IHRoaXMgbWlzbWF0Y2ggaXMgY2hlY2stb25seS4gVGhlIERPTSB3aWxsIG5vdCBiZSByZWN0aWZpZWQgaW4gcHJvZHVjdGlvbiBkdWUgdG8gcGVyZm9ybWFuY2Ugb3ZlcmhlYWQuXG4gIFlvdSBzaG91bGQgZml4IHRoZSBzb3VyY2Ugb2YgdGhlIG1pc21hdGNoLmA7XG4gICAge1xuICAgICAgd2FybiQxKHByZVNlZ21lbnQsIGVsLCBwb3N0U2VnbWVudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHRvQ2xhc3NTZXQoc3RyKSB7XG4gIHJldHVybiBuZXcgU2V0KHN0ci50cmltKCkuc3BsaXQoL1xccysvKSk7XG59XG5mdW5jdGlvbiBpc1NldEVxdWFsKGEsIGIpIHtcbiAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAoY29uc3QgcyBvZiBhKSB7XG4gICAgaWYgKCFiLmhhcyhzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHRvU3R5bGVNYXAoc3RyKSB7XG4gIGNvbnN0IHN0eWxlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgZm9yIChjb25zdCBpdGVtIG9mIHN0ci5zcGxpdChcIjtcIikpIHtcbiAgICBsZXQgW2tleSwgdmFsdWVdID0gaXRlbS5zcGxpdChcIjpcIik7XG4gICAga2V5ID0ga2V5LnRyaW0oKTtcbiAgICB2YWx1ZSA9IHZhbHVlICYmIHZhbHVlLnRyaW0oKTtcbiAgICBpZiAoa2V5ICYmIHZhbHVlKSB7XG4gICAgICBzdHlsZU1hcC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHlsZU1hcDtcbn1cbmZ1bmN0aW9uIGlzTWFwRXF1YWwoYSwgYikge1xuICBpZiAoYS5zaXplICE9PSBiLnNpemUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgYSkge1xuICAgIGlmICh2YWx1ZSAhPT0gYi5nZXQoa2V5KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVDc3NWYXJzKGluc3RhbmNlLCB2bm9kZSwgZXhwZWN0ZWRNYXApIHtcbiAgY29uc3Qgcm9vdCA9IGluc3RhbmNlLnN1YlRyZWU7XG4gIGlmIChpbnN0YW5jZS5nZXRDc3NWYXJzICYmICh2bm9kZSA9PT0gcm9vdCB8fCByb290ICYmIHJvb3QudHlwZSA9PT0gRnJhZ21lbnQgJiYgcm9vdC5jaGlsZHJlbi5pbmNsdWRlcyh2bm9kZSkpKSB7XG4gICAgY29uc3QgY3NzVmFycyA9IGluc3RhbmNlLmdldENzc1ZhcnMoKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjc3NWYXJzKSB7XG4gICAgICBleHBlY3RlZE1hcC5zZXQoXG4gICAgICAgIGAtLSR7Z2V0RXNjYXBlZENzc1Zhck5hbWUoa2V5LCBmYWxzZSl9YCxcbiAgICAgICAgU3RyaW5nKGNzc1ZhcnNba2V5XSlcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGlmICh2bm9kZSA9PT0gcm9vdCAmJiBpbnN0YW5jZS5wYXJlbnQpIHtcbiAgICByZXNvbHZlQ3NzVmFycyhpbnN0YW5jZS5wYXJlbnQsIGluc3RhbmNlLnZub2RlLCBleHBlY3RlZE1hcCk7XG4gIH1cbn1cbmNvbnN0IGFsbG93TWlzbWF0Y2hBdHRyID0gXCJkYXRhLWFsbG93LW1pc21hdGNoXCI7XG5jb25zdCBNaXNtYXRjaFR5cGVTdHJpbmcgPSB7XG4gIFswIC8qIFRFWFQgKi9dOiBcInRleHRcIixcbiAgWzEgLyogQ0hJTERSRU4gKi9dOiBcImNoaWxkcmVuXCIsXG4gIFsyIC8qIENMQVNTICovXTogXCJjbGFzc1wiLFxuICBbMyAvKiBTVFlMRSAqL106IFwic3R5bGVcIixcbiAgWzQgLyogQVRUUklCVVRFICovXTogXCJhdHRyaWJ1dGVcIlxufTtcbmZ1bmN0aW9uIGlzTWlzbWF0Y2hBbGxvd2VkKGVsLCBhbGxvd2VkVHlwZSkge1xuICBpZiAoYWxsb3dlZFR5cGUgPT09IDAgLyogVEVYVCAqLyB8fCBhbGxvd2VkVHlwZSA9PT0gMSAvKiBDSElMRFJFTiAqLykge1xuICAgIHdoaWxlIChlbCAmJiAhZWwuaGFzQXR0cmlidXRlKGFsbG93TWlzbWF0Y2hBdHRyKSkge1xuICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgfVxuICBjb25zdCBhbGxvd2VkQXR0ciA9IGVsICYmIGVsLmdldEF0dHJpYnV0ZShhbGxvd01pc21hdGNoQXR0cik7XG4gIGlmIChhbGxvd2VkQXR0ciA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2UgaWYgKGFsbG93ZWRBdHRyID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbGlzdCA9IGFsbG93ZWRBdHRyLnNwbGl0KFwiLFwiKTtcbiAgICBpZiAoYWxsb3dlZFR5cGUgPT09IDAgLyogVEVYVCAqLyAmJiBsaXN0LmluY2x1ZGVzKFwiY2hpbGRyZW5cIikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gYWxsb3dlZEF0dHIuc3BsaXQoXCIsXCIpLmluY2x1ZGVzKE1pc21hdGNoVHlwZVN0cmluZ1thbGxvd2VkVHlwZV0pO1xuICB9XG59XG5cbmNvbnN0IHJlcXVlc3RJZGxlQ2FsbGJhY2sgPSBnZXRHbG9iYWxUaGlzKCkucmVxdWVzdElkbGVDYWxsYmFjayB8fCAoKGNiKSA9PiBzZXRUaW1lb3V0KGNiLCAxKSk7XG5jb25zdCBjYW5jZWxJZGxlQ2FsbGJhY2sgPSBnZXRHbG9iYWxUaGlzKCkuY2FuY2VsSWRsZUNhbGxiYWNrIHx8ICgoaWQpID0+IGNsZWFyVGltZW91dChpZCkpO1xuY29uc3QgaHlkcmF0ZU9uSWRsZSA9ICh0aW1lb3V0ID0gMWU0KSA9PiAoaHlkcmF0ZSkgPT4ge1xuICBjb25zdCBpZCA9IHJlcXVlc3RJZGxlQ2FsbGJhY2soaHlkcmF0ZSwgeyB0aW1lb3V0IH0pO1xuICByZXR1cm4gKCkgPT4gY2FuY2VsSWRsZUNhbGxiYWNrKGlkKTtcbn07XG5mdW5jdGlvbiBlbGVtZW50SXNWaXNpYmxlSW5WaWV3cG9ydChlbCkge1xuICBjb25zdCB7IHRvcCwgbGVmdCwgYm90dG9tLCByaWdodCB9ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IHsgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGggfSA9IHdpbmRvdztcbiAgcmV0dXJuICh0b3AgPiAwICYmIHRvcCA8IGlubmVySGVpZ2h0IHx8IGJvdHRvbSA+IDAgJiYgYm90dG9tIDwgaW5uZXJIZWlnaHQpICYmIChsZWZ0ID4gMCAmJiBsZWZ0IDwgaW5uZXJXaWR0aCB8fCByaWdodCA+IDAgJiYgcmlnaHQgPCBpbm5lcldpZHRoKTtcbn1cbmNvbnN0IGh5ZHJhdGVPblZpc2libGUgPSAob3B0cykgPT4gKGh5ZHJhdGUsIGZvckVhY2gpID0+IHtcbiAgY29uc3Qgb2IgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlLmlzSW50ZXJzZWN0aW5nKSBjb250aW51ZTtcbiAgICAgIG9iLmRpc2Nvbm5lY3QoKTtcbiAgICAgIGh5ZHJhdGUoKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSwgb3B0cyk7XG4gIGZvckVhY2goKGVsKSA9PiB7XG4gICAgaWYgKCEoZWwgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuO1xuICAgIGlmIChlbGVtZW50SXNWaXNpYmxlSW5WaWV3cG9ydChlbCkpIHtcbiAgICAgIGh5ZHJhdGUoKTtcbiAgICAgIG9iLmRpc2Nvbm5lY3QoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgb2Iub2JzZXJ2ZShlbCk7XG4gIH0pO1xuICByZXR1cm4gKCkgPT4gb2IuZGlzY29ubmVjdCgpO1xufTtcbmNvbnN0IGh5ZHJhdGVPbk1lZGlhUXVlcnkgPSAocXVlcnkpID0+IChoeWRyYXRlKSA9PiB7XG4gIGlmIChxdWVyeSkge1xuICAgIGNvbnN0IG1xbCA9IG1hdGNoTWVkaWEocXVlcnkpO1xuICAgIGlmIChtcWwubWF0Y2hlcykge1xuICAgICAgaHlkcmF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtcWwuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoeWRyYXRlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICByZXR1cm4gKCkgPT4gbXFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaHlkcmF0ZSk7XG4gICAgfVxuICB9XG59O1xuY29uc3QgaHlkcmF0ZU9uSW50ZXJhY3Rpb24gPSAoaW50ZXJhY3Rpb25zID0gW10pID0+IChoeWRyYXRlLCBmb3JFYWNoKSA9PiB7XG4gIGlmIChpc1N0cmluZyhpbnRlcmFjdGlvbnMpKSBpbnRlcmFjdGlvbnMgPSBbaW50ZXJhY3Rpb25zXTtcbiAgbGV0IGhhc0h5ZHJhdGVkID0gZmFsc2U7XG4gIGNvbnN0IGRvSHlkcmF0ZSA9IChlKSA9PiB7XG4gICAgaWYgKCFoYXNIeWRyYXRlZCkge1xuICAgICAgaGFzSHlkcmF0ZWQgPSB0cnVlO1xuICAgICAgdGVhcmRvd24oKTtcbiAgICAgIGh5ZHJhdGUoKTtcbiAgICAgIGUudGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IGUuY29uc3RydWN0b3IoZS50eXBlLCBlKSk7XG4gICAgfVxuICB9O1xuICBjb25zdCB0ZWFyZG93biA9ICgpID0+IHtcbiAgICBmb3JFYWNoKChlbCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBpIG9mIGludGVyYWN0aW9ucykge1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGksIGRvSHlkcmF0ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGZvckVhY2goKGVsKSA9PiB7XG4gICAgZm9yIChjb25zdCBpIG9mIGludGVyYWN0aW9ucykge1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihpLCBkb0h5ZHJhdGUsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gdGVhcmRvd247XG59O1xuZnVuY3Rpb24gZm9yRWFjaEVsZW1lbnQobm9kZSwgY2IpIHtcbiAgaWYgKGlzQ29tbWVudChub2RlKSAmJiBub2RlLmRhdGEgPT09IFwiW1wiKSB7XG4gICAgbGV0IGRlcHRoID0gMTtcbiAgICBsZXQgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgd2hpbGUgKG5leHQpIHtcbiAgICAgIGlmIChuZXh0Lm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGNiKG5leHQpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzQ29tbWVudChuZXh0KSkge1xuICAgICAgICBpZiAobmV4dC5kYXRhID09PSBcIl1cIikge1xuICAgICAgICAgIGlmICgtLWRlcHRoID09PSAwKSBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmIChuZXh0LmRhdGEgPT09IFwiW1wiKSB7XG4gICAgICAgICAgZGVwdGgrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNiKG5vZGUpO1xuICB9XG59XG5cbmNvbnN0IGlzQXN5bmNXcmFwcGVyID0gKGkpID0+ICEhaS50eXBlLl9fYXN5bmNMb2FkZXI7XG4vKiEgI19fTk9fU0lERV9FRkZFQ1RTX18gKi9cbi8vIEBfX05PX1NJREVfRUZGRUNUU19fXG5mdW5jdGlvbiBkZWZpbmVBc3luY0NvbXBvbmVudChzb3VyY2UpIHtcbiAgaWYgKGlzRnVuY3Rpb24oc291cmNlKSkge1xuICAgIHNvdXJjZSA9IHsgbG9hZGVyOiBzb3VyY2UgfTtcbiAgfVxuICBjb25zdCB7XG4gICAgbG9hZGVyLFxuICAgIGxvYWRpbmdDb21wb25lbnQsXG4gICAgZXJyb3JDb21wb25lbnQsXG4gICAgZGVsYXkgPSAyMDAsXG4gICAgaHlkcmF0ZTogaHlkcmF0ZVN0cmF0ZWd5LFxuICAgIHRpbWVvdXQsXG4gICAgLy8gdW5kZWZpbmVkID0gbmV2ZXIgdGltZXMgb3V0XG4gICAgc3VzcGVuc2libGUgPSB0cnVlLFxuICAgIG9uRXJyb3I6IHVzZXJPbkVycm9yXG4gIH0gPSBzb3VyY2U7XG4gIGxldCBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XG4gIGxldCByZXNvbHZlZENvbXA7XG4gIGxldCByZXRyaWVzID0gMDtcbiAgY29uc3QgcmV0cnkgPSAoKSA9PiB7XG4gICAgcmV0cmllcysrO1xuICAgIHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDtcbiAgICByZXR1cm4gbG9hZCgpO1xuICB9O1xuICBjb25zdCBsb2FkID0gKCkgPT4ge1xuICAgIGxldCB0aGlzUmVxdWVzdDtcbiAgICByZXR1cm4gcGVuZGluZ1JlcXVlc3QgfHwgKHRoaXNSZXF1ZXN0ID0gcGVuZGluZ1JlcXVlc3QgPSBsb2FkZXIoKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBlcnIgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyKSk7XG4gICAgICBpZiAodXNlck9uRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBjb25zdCB1c2VyUmV0cnkgPSAoKSA9PiByZXNvbHZlKHJldHJ5KCkpO1xuICAgICAgICAgIGNvbnN0IHVzZXJGYWlsID0gKCkgPT4gcmVqZWN0KGVycik7XG4gICAgICAgICAgdXNlck9uRXJyb3IoZXJyLCB1c2VyUmV0cnksIHVzZXJGYWlsLCByZXRyaWVzICsgMSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH0pLnRoZW4oKGNvbXApID0+IHtcbiAgICAgIGlmICh0aGlzUmVxdWVzdCAhPT0gcGVuZGluZ1JlcXVlc3QgJiYgcGVuZGluZ1JlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuIHBlbmRpbmdSZXF1ZXN0O1xuICAgICAgfVxuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWNvbXApIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBBc3luYyBjb21wb25lbnQgbG9hZGVyIHJlc29sdmVkIHRvIHVuZGVmaW5lZC4gSWYgeW91IGFyZSB1c2luZyByZXRyeSgpLCBtYWtlIHN1cmUgdG8gcmV0dXJuIGl0cyByZXR1cm4gdmFsdWUuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKGNvbXAgJiYgKGNvbXAuX19lc01vZHVsZSB8fCBjb21wW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09IFwiTW9kdWxlXCIpKSB7XG4gICAgICAgIGNvbXAgPSBjb21wLmRlZmF1bHQ7XG4gICAgICB9XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBjb21wICYmICFpc09iamVjdChjb21wKSAmJiAhaXNGdW5jdGlvbihjb21wKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXN5bmMgY29tcG9uZW50IGxvYWQgcmVzdWx0OiAke2NvbXB9YCk7XG4gICAgICB9XG4gICAgICByZXNvbHZlZENvbXAgPSBjb21wO1xuICAgICAgcmV0dXJuIGNvbXA7XG4gICAgfSkpO1xuICB9O1xuICByZXR1cm4gZGVmaW5lQ29tcG9uZW50KHtcbiAgICBuYW1lOiBcIkFzeW5jQ29tcG9uZW50V3JhcHBlclwiLFxuICAgIF9fYXN5bmNMb2FkZXI6IGxvYWQsXG4gICAgX19hc3luY0h5ZHJhdGUoZWwsIGluc3RhbmNlLCBoeWRyYXRlKSB7XG4gICAgICBjb25zdCBkb0h5ZHJhdGUgPSBoeWRyYXRlU3RyYXRlZ3kgPyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlYXJkb3duID0gaHlkcmF0ZVN0cmF0ZWd5KFxuICAgICAgICAgIGh5ZHJhdGUsXG4gICAgICAgICAgKGNiKSA9PiBmb3JFYWNoRWxlbWVudChlbCwgY2IpXG4gICAgICAgICk7XG4gICAgICAgIGlmICh0ZWFyZG93bikge1xuICAgICAgICAgIChpbnN0YW5jZS5idW0gfHwgKGluc3RhbmNlLmJ1bSA9IFtdKSkucHVzaCh0ZWFyZG93bik7XG4gICAgICAgIH1cbiAgICAgIH0gOiBoeWRyYXRlO1xuICAgICAgaWYgKHJlc29sdmVkQ29tcCkge1xuICAgICAgICBkb0h5ZHJhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWQoKS50aGVuKCgpID0+ICFpbnN0YW5jZS5pc1VubW91bnRlZCAmJiBkb0h5ZHJhdGUoKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXQgX19hc3luY1Jlc29sdmVkKCkge1xuICAgICAgcmV0dXJuIHJlc29sdmVkQ29tcDtcbiAgICB9LFxuICAgIHNldHVwKCkge1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XG4gICAgICBtYXJrQXN5bmNCb3VuZGFyeShpbnN0YW5jZSk7XG4gICAgICBpZiAocmVzb2x2ZWRDb21wKSB7XG4gICAgICAgIHJldHVybiAoKSA9PiBjcmVhdGVJbm5lckNvbXAocmVzb2x2ZWRDb21wLCBpbnN0YW5jZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBvbkVycm9yID0gKGVycikgPT4ge1xuICAgICAgICBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XG4gICAgICAgIGhhbmRsZUVycm9yKFxuICAgICAgICAgIGVycixcbiAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICAxMyxcbiAgICAgICAgICAhZXJyb3JDb21wb25lbnRcbiAgICAgICAgKTtcbiAgICAgIH07XG4gICAgICBpZiAoc3VzcGVuc2libGUgJiYgaW5zdGFuY2Uuc3VzcGVuc2UgfHwgaXNJblNTUkNvbXBvbmVudFNldHVwKSB7XG4gICAgICAgIHJldHVybiBsb2FkKCkudGhlbigoY29tcCkgPT4ge1xuICAgICAgICAgIHJldHVybiAoKSA9PiBjcmVhdGVJbm5lckNvbXAoY29tcCwgaW5zdGFuY2UpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICAgIHJldHVybiAoKSA9PiBlcnJvckNvbXBvbmVudCA/IGNyZWF0ZVZOb2RlKGVycm9yQ29tcG9uZW50LCB7XG4gICAgICAgICAgICBlcnJvcjogZXJyXG4gICAgICAgICAgfSkgOiBudWxsO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxvYWRlZCA9IHJlZihmYWxzZSk7XG4gICAgICBjb25zdCBlcnJvciA9IHJlZigpO1xuICAgICAgY29uc3QgZGVsYXllZCA9IHJlZighIWRlbGF5KTtcbiAgICAgIGlmIChkZWxheSkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBkZWxheWVkLnZhbHVlID0gZmFsc2U7XG4gICAgICAgIH0sIGRlbGF5KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lb3V0ICE9IG51bGwpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKCFsb2FkZWQudmFsdWUgJiYgIWVycm9yLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBBc3luYyBjb21wb25lbnQgdGltZWQgb3V0IGFmdGVyICR7dGltZW91dH1tcy5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBlcnI7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgIH1cbiAgICAgIGxvYWQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgbG9hZGVkLnZhbHVlID0gdHJ1ZTtcbiAgICAgICAgaWYgKGluc3RhbmNlLnBhcmVudCAmJiBpc0tlZXBBbGl2ZShpbnN0YW5jZS5wYXJlbnQudm5vZGUpKSB7XG4gICAgICAgICAgaW5zdGFuY2UucGFyZW50LnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgZXJyb3IudmFsdWUgPSBlcnI7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChsb2FkZWQudmFsdWUgJiYgcmVzb2x2ZWRDb21wKSB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUlubmVyQ29tcChyZXNvbHZlZENvbXAsIGluc3RhbmNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci52YWx1ZSAmJiBlcnJvckNvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShlcnJvckNvbXBvbmVudCwge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yLnZhbHVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAobG9hZGluZ0NvbXBvbmVudCAmJiAhZGVsYXllZC52YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZShsb2FkaW5nQ29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlSW5uZXJDb21wKGNvbXAsIHBhcmVudCkge1xuICBjb25zdCB7IHJlZjogcmVmMiwgcHJvcHMsIGNoaWxkcmVuLCBjZSB9ID0gcGFyZW50LnZub2RlO1xuICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKGNvbXAsIHByb3BzLCBjaGlsZHJlbik7XG4gIHZub2RlLnJlZiA9IHJlZjI7XG4gIHZub2RlLmNlID0gY2U7XG4gIGRlbGV0ZSBwYXJlbnQudm5vZGUuY2U7XG4gIHJldHVybiB2bm9kZTtcbn1cblxuY29uc3QgaXNLZWVwQWxpdmUgPSAodm5vZGUpID0+IHZub2RlLnR5cGUuX19pc0tlZXBBbGl2ZTtcbmNvbnN0IEtlZXBBbGl2ZUltcGwgPSB7XG4gIG5hbWU6IGBLZWVwQWxpdmVgLFxuICAvLyBNYXJrZXIgZm9yIHNwZWNpYWwgaGFuZGxpbmcgaW5zaWRlIHRoZSByZW5kZXJlci4gV2UgYXJlIG5vdCB1c2luZyBhID09PVxuICAvLyBjaGVjayBkaXJlY3RseSBvbiBLZWVwQWxpdmUgaW4gdGhlIHJlbmRlcmVyLCBiZWNhdXNlIGltcG9ydGluZyBpdCBkaXJlY3RseVxuICAvLyB3b3VsZCBwcmV2ZW50IGl0IGZyb20gYmVpbmcgdHJlZS1zaGFrZW4uXG4gIF9faXNLZWVwQWxpdmU6IHRydWUsXG4gIHByb3BzOiB7XG4gICAgaW5jbHVkZTogW1N0cmluZywgUmVnRXhwLCBBcnJheV0sXG4gICAgZXhjbHVkZTogW1N0cmluZywgUmVnRXhwLCBBcnJheV0sXG4gICAgbWF4OiBbU3RyaW5nLCBOdW1iZXJdXG4gIH0sXG4gIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGNvbnN0IHNoYXJlZENvbnRleHQgPSBpbnN0YW5jZS5jdHg7XG4gICAgaWYgKCFzaGFyZWRDb250ZXh0LnJlbmRlcmVyKSB7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gY2hpbGRyZW4gJiYgY2hpbGRyZW4ubGVuZ3RoID09PSAxID8gY2hpbGRyZW5bMF0gOiBjaGlsZHJlbjtcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBjb25zdCBrZXlzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBsZXQgY3VycmVudCA9IG51bGw7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBpbnN0YW5jZS5fX3ZfY2FjaGUgPSBjYWNoZTtcbiAgICB9XG4gICAgY29uc3QgcGFyZW50U3VzcGVuc2UgPSBpbnN0YW5jZS5zdXNwZW5zZTtcbiAgICBjb25zdCB7XG4gICAgICByZW5kZXJlcjoge1xuICAgICAgICBwOiBwYXRjaCxcbiAgICAgICAgbTogbW92ZSxcbiAgICAgICAgdW06IF91bm1vdW50LFxuICAgICAgICBvOiB7IGNyZWF0ZUVsZW1lbnQgfVxuICAgICAgfVxuICAgIH0gPSBzaGFyZWRDb250ZXh0O1xuICAgIGNvbnN0IHN0b3JhZ2VDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHNoYXJlZENvbnRleHQuYWN0aXZhdGUgPSAodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBuYW1lc3BhY2UsIG9wdGltaXplZCkgPT4ge1xuICAgICAgY29uc3QgaW5zdGFuY2UyID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgbW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIDAsIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIHBhdGNoKFxuICAgICAgICBpbnN0YW5jZTIudm5vZGUsXG4gICAgICAgIHZub2RlLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgaW5zdGFuY2UyLFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICB2bm9kZS5zbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGluc3RhbmNlMi5pc0RlYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChpbnN0YW5jZTIuYSkge1xuICAgICAgICAgIGludm9rZUFycmF5Rm5zKGluc3RhbmNlMi5hKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2bm9kZUhvb2sgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy5vblZub2RlTW91bnRlZDtcbiAgICAgICAgaWYgKHZub2RlSG9vaykge1xuICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIGluc3RhbmNlMi5wYXJlbnQsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHNoYXJlZENvbnRleHQuZGVhY3RpdmF0ZSA9ICh2bm9kZSkgPT4ge1xuICAgICAgY29uc3QgaW5zdGFuY2UyID0gdm5vZGUuY29tcG9uZW50O1xuICAgICAgaW52YWxpZGF0ZU1vdW50KGluc3RhbmNlMi5tKTtcbiAgICAgIGludmFsaWRhdGVNb3VudChpbnN0YW5jZTIuYSk7XG4gICAgICBtb3ZlKHZub2RlLCBzdG9yYWdlQ29udGFpbmVyLCBudWxsLCAxLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoaW5zdGFuY2UyLmRhKSB7XG4gICAgICAgICAgaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UyLmRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2bm9kZUhvb2sgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy5vblZub2RlVW5tb3VudGVkO1xuICAgICAgICBpZiAodm5vZGVIb29rKSB7XG4gICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgaW5zdGFuY2UyLnBhcmVudCwgdm5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlMi5pc0RlYWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlMik7XG4gICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiB1bm1vdW50KHZub2RlKSB7XG4gICAgICByZXNldFNoYXBlRmxhZyh2bm9kZSk7XG4gICAgICBfdW5tb3VudCh2bm9kZSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcHJ1bmVDYWNoZShmaWx0ZXIpIHtcbiAgICAgIGNhY2hlLmZvckVhY2goKHZub2RlLCBrZXkpID0+IHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGdldENvbXBvbmVudE5hbWUodm5vZGUudHlwZSk7XG4gICAgICAgIGlmIChuYW1lICYmICFmaWx0ZXIobmFtZSkpIHtcbiAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoa2V5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBydW5lQ2FjaGVFbnRyeShrZXkpIHtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgaWYgKGNhY2hlZCAmJiAoIWN1cnJlbnQgfHwgIWlzU2FtZVZOb2RlVHlwZShjYWNoZWQsIGN1cnJlbnQpKSkge1xuICAgICAgICB1bm1vdW50KGNhY2hlZCk7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgcmVzZXRTaGFwZUZsYWcoY3VycmVudCk7XG4gICAgICB9XG4gICAgICBjYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgIGtleXMuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIHdhdGNoKFxuICAgICAgKCkgPT4gW3Byb3BzLmluY2x1ZGUsIHByb3BzLmV4Y2x1ZGVdLFxuICAgICAgKFtpbmNsdWRlLCBleGNsdWRlXSkgPT4ge1xuICAgICAgICBpbmNsdWRlICYmIHBydW5lQ2FjaGUoKG5hbWUpID0+IG1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpO1xuICAgICAgICBleGNsdWRlICYmIHBydW5lQ2FjaGUoKG5hbWUpID0+ICFtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKTtcbiAgICAgIH0sXG4gICAgICAvLyBwcnVuZSBwb3N0LXJlbmRlciBhZnRlciBgY3VycmVudGAgaGFzIGJlZW4gdXBkYXRlZFxuICAgICAgeyBmbHVzaDogXCJwb3N0XCIsIGRlZXA6IHRydWUgfVxuICAgICk7XG4gICAgbGV0IHBlbmRpbmdDYWNoZUtleSA9IG51bGw7XG4gICAgY29uc3QgY2FjaGVTdWJ0cmVlID0gKCkgPT4ge1xuICAgICAgaWYgKHBlbmRpbmdDYWNoZUtleSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChpc1N1c3BlbnNlKGluc3RhbmNlLnN1YlRyZWUudHlwZSkpIHtcbiAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgICAgY2FjaGUuc2V0KHBlbmRpbmdDYWNoZUtleSwgZ2V0SW5uZXJDaGlsZChpbnN0YW5jZS5zdWJUcmVlKSk7XG4gICAgICAgICAgfSwgaW5zdGFuY2Uuc3ViVHJlZS5zdXNwZW5zZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FjaGUuc2V0KHBlbmRpbmdDYWNoZUtleSwgZ2V0SW5uZXJDaGlsZChpbnN0YW5jZS5zdWJUcmVlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIG9uTW91bnRlZChjYWNoZVN1YnRyZWUpO1xuICAgIG9uVXBkYXRlZChjYWNoZVN1YnRyZWUpO1xuICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgICBjYWNoZS5mb3JFYWNoKChjYWNoZWQpID0+IHtcbiAgICAgICAgY29uc3QgeyBzdWJUcmVlLCBzdXNwZW5zZSB9ID0gaW5zdGFuY2U7XG4gICAgICAgIGNvbnN0IHZub2RlID0gZ2V0SW5uZXJDaGlsZChzdWJUcmVlKTtcbiAgICAgICAgaWYgKGNhY2hlZC50eXBlID09PSB2bm9kZS50eXBlICYmIGNhY2hlZC5rZXkgPT09IHZub2RlLmtleSkge1xuICAgICAgICAgIHJlc2V0U2hhcGVGbGFnKHZub2RlKTtcbiAgICAgICAgICBjb25zdCBkYSA9IHZub2RlLmNvbXBvbmVudC5kYTtcbiAgICAgICAgICBkYSAmJiBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoZGEsIHN1c3BlbnNlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdW5tb3VudChjYWNoZWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHBlbmRpbmdDYWNoZUtleSA9IG51bGw7XG4gICAgICBpZiAoIXNsb3RzLmRlZmF1bHQpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0KCk7XG4gICAgICBjb25zdCByYXdWTm9kZSA9IGNoaWxkcmVuWzBdO1xuICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB3YXJuJDEoYEtlZXBBbGl2ZSBzaG91bGQgY29udGFpbiBleGFjdGx5IG9uZSBjb21wb25lbnQgY2hpbGQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudCA9IG51bGw7XG4gICAgICAgIHJldHVybiBjaGlsZHJlbjtcbiAgICAgIH0gZWxzZSBpZiAoIWlzVk5vZGUocmF3Vk5vZGUpIHx8ICEocmF3Vk5vZGUuc2hhcGVGbGFnICYgNCkgJiYgIShyYXdWTm9kZS5zaGFwZUZsYWcgJiAxMjgpKSB7XG4gICAgICAgIGN1cnJlbnQgPSBudWxsO1xuICAgICAgICByZXR1cm4gcmF3Vk5vZGU7XG4gICAgICB9XG4gICAgICBsZXQgdm5vZGUgPSBnZXRJbm5lckNoaWxkKHJhd1ZOb2RlKTtcbiAgICAgIGlmICh2bm9kZS50eXBlID09PSBDb21tZW50KSB7XG4gICAgICAgIGN1cnJlbnQgPSBudWxsO1xuICAgICAgICByZXR1cm4gdm5vZGU7XG4gICAgICB9XG4gICAgICBjb25zdCBjb21wID0gdm5vZGUudHlwZTtcbiAgICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKFxuICAgICAgICBpc0FzeW5jV3JhcHBlcih2bm9kZSkgPyB2bm9kZS50eXBlLl9fYXN5bmNSZXNvbHZlZCB8fCB7fSA6IGNvbXBcbiAgICAgICk7XG4gICAgICBjb25zdCB7IGluY2x1ZGUsIGV4Y2x1ZGUsIG1heCB9ID0gcHJvcHM7XG4gICAgICBpZiAoaW5jbHVkZSAmJiAoIW5hbWUgfHwgIW1hdGNoZXMoaW5jbHVkZSwgbmFtZSkpIHx8IGV4Y2x1ZGUgJiYgbmFtZSAmJiBtYXRjaGVzKGV4Y2x1ZGUsIG5hbWUpKSB7XG4gICAgICAgIHZub2RlLnNoYXBlRmxhZyAmPSB+MjU2O1xuICAgICAgICBjdXJyZW50ID0gdm5vZGU7XG4gICAgICAgIHJldHVybiByYXdWTm9kZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGtleSA9IHZub2RlLmtleSA9PSBudWxsID8gY29tcCA6IHZub2RlLmtleTtcbiAgICAgIGNvbnN0IGNhY2hlZFZOb2RlID0gY2FjaGUuZ2V0KGtleSk7XG4gICAgICBpZiAodm5vZGUuZWwpIHtcbiAgICAgICAgdm5vZGUgPSBjbG9uZVZOb2RlKHZub2RlKTtcbiAgICAgICAgaWYgKHJhd1ZOb2RlLnNoYXBlRmxhZyAmIDEyOCkge1xuICAgICAgICAgIHJhd1ZOb2RlLnNzQ29udGVudCA9IHZub2RlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBwZW5kaW5nQ2FjaGVLZXkgPSBrZXk7XG4gICAgICBpZiAoY2FjaGVkVk5vZGUpIHtcbiAgICAgICAgdm5vZGUuZWwgPSBjYWNoZWRWTm9kZS5lbDtcbiAgICAgICAgdm5vZGUuY29tcG9uZW50ID0gY2FjaGVkVk5vZGUuY29tcG9uZW50O1xuICAgICAgICBpZiAodm5vZGUudHJhbnNpdGlvbikge1xuICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZSwgdm5vZGUudHJhbnNpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdm5vZGUuc2hhcGVGbGFnIHw9IDUxMjtcbiAgICAgICAga2V5cy5kZWxldGUoa2V5KTtcbiAgICAgICAga2V5cy5hZGQoa2V5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGtleXMuYWRkKGtleSk7XG4gICAgICAgIGlmIChtYXggJiYga2V5cy5zaXplID4gcGFyc2VJbnQobWF4LCAxMCkpIHtcbiAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoa2V5cy52YWx1ZXMoKS5uZXh0KCkudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2bm9kZS5zaGFwZUZsYWcgfD0gMjU2O1xuICAgICAgY3VycmVudCA9IHZub2RlO1xuICAgICAgcmV0dXJuIGlzU3VzcGVuc2UocmF3Vk5vZGUudHlwZSkgPyByYXdWTm9kZSA6IHZub2RlO1xuICAgIH07XG4gIH1cbn07XG5jb25zdCBLZWVwQWxpdmUgPSBLZWVwQWxpdmVJbXBsO1xuZnVuY3Rpb24gbWF0Y2hlcyhwYXR0ZXJuLCBuYW1lKSB7XG4gIGlmIChpc0FycmF5KHBhdHRlcm4pKSB7XG4gICAgcmV0dXJuIHBhdHRlcm4uc29tZSgocCkgPT4gbWF0Y2hlcyhwLCBuYW1lKSk7XG4gIH0gZWxzZSBpZiAoaXNTdHJpbmcocGF0dGVybikpIHtcbiAgICByZXR1cm4gcGF0dGVybi5zcGxpdChcIixcIikuaW5jbHVkZXMobmFtZSk7XG4gIH0gZWxzZSBpZiAoaXNSZWdFeHAocGF0dGVybikpIHtcbiAgICBwYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG4gICAgcmV0dXJuIHBhdHRlcm4udGVzdChuYW1lKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBvbkFjdGl2YXRlZChob29rLCB0YXJnZXQpIHtcbiAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiYVwiLCB0YXJnZXQpO1xufVxuZnVuY3Rpb24gb25EZWFjdGl2YXRlZChob29rLCB0YXJnZXQpIHtcbiAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiZGFcIiwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHJlZ2lzdGVyS2VlcEFsaXZlSG9vayhob29rLCB0eXBlLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpIHtcbiAgY29uc3Qgd3JhcHBlZEhvb2sgPSBob29rLl9fd2RjIHx8IChob29rLl9fd2RjID0gKCkgPT4ge1xuICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0O1xuICAgIHdoaWxlIChjdXJyZW50KSB7XG4gICAgICBpZiAoY3VycmVudC5pc0RlYWN0aXZhdGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcbiAgICB9XG4gICAgcmV0dXJuIGhvb2soKTtcbiAgfSk7XG4gIGluamVjdEhvb2sodHlwZSwgd3JhcHBlZEhvb2ssIHRhcmdldCk7XG4gIGlmICh0YXJnZXQpIHtcbiAgICBsZXQgY3VycmVudCA9IHRhcmdldC5wYXJlbnQ7XG4gICAgd2hpbGUgKGN1cnJlbnQgJiYgY3VycmVudC5wYXJlbnQpIHtcbiAgICAgIGlmIChpc0tlZXBBbGl2ZShjdXJyZW50LnBhcmVudC52bm9kZSkpIHtcbiAgICAgICAgaW5qZWN0VG9LZWVwQWxpdmVSb290KHdyYXBwZWRIb29rLCB0eXBlLCB0YXJnZXQsIGN1cnJlbnQpO1xuICAgICAgfVxuICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gaW5qZWN0VG9LZWVwQWxpdmVSb290KGhvb2ssIHR5cGUsIHRhcmdldCwga2VlcEFsaXZlUm9vdCkge1xuICBjb25zdCBpbmplY3RlZCA9IGluamVjdEhvb2soXG4gICAgdHlwZSxcbiAgICBob29rLFxuICAgIGtlZXBBbGl2ZVJvb3QsXG4gICAgdHJ1ZVxuICAgIC8qIHByZXBlbmQgKi9cbiAgKTtcbiAgb25Vbm1vdW50ZWQoKCkgPT4ge1xuICAgIHJlbW92ZShrZWVwQWxpdmVSb290W3R5cGVdLCBpbmplY3RlZCk7XG4gIH0sIHRhcmdldCk7XG59XG5mdW5jdGlvbiByZXNldFNoYXBlRmxhZyh2bm9kZSkge1xuICB2bm9kZS5zaGFwZUZsYWcgJj0gfjI1NjtcbiAgdm5vZGUuc2hhcGVGbGFnICY9IH41MTI7XG59XG5mdW5jdGlvbiBnZXRJbm5lckNoaWxkKHZub2RlKSB7XG4gIHJldHVybiB2bm9kZS5zaGFwZUZsYWcgJiAxMjggPyB2bm9kZS5zc0NvbnRlbnQgOiB2bm9kZTtcbn1cblxuZnVuY3Rpb24gaW5qZWN0SG9vayh0eXBlLCBob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UsIHByZXBlbmQgPSBmYWxzZSkge1xuICBpZiAodGFyZ2V0KSB7XG4gICAgY29uc3QgaG9va3MgPSB0YXJnZXRbdHlwZV0gfHwgKHRhcmdldFt0eXBlXSA9IFtdKTtcbiAgICBjb25zdCB3cmFwcGVkSG9vayA9IGhvb2suX193ZWggfHwgKGhvb2suX193ZWggPSAoLi4uYXJncykgPT4ge1xuICAgICAgcGF1c2VUcmFja2luZygpO1xuICAgICAgY29uc3QgcmVzZXQgPSBzZXRDdXJyZW50SW5zdGFuY2UodGFyZ2V0KTtcbiAgICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhvb2ssIHRhcmdldCwgdHlwZSwgYXJncyk7XG4gICAgICByZXNldCgpO1xuICAgICAgcmVzZXRUcmFja2luZygpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9KTtcbiAgICBpZiAocHJlcGVuZCkge1xuICAgICAgaG9va3MudW5zaGlmdCh3cmFwcGVkSG9vayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhvb2tzLnB1c2god3JhcHBlZEhvb2spO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcHBlZEhvb2s7XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGNvbnN0IGFwaU5hbWUgPSB0b0hhbmRsZXJLZXkoRXJyb3JUeXBlU3RyaW5ncyQxW3R5cGVdLnJlcGxhY2UoLyBob29rJC8sIFwiXCIpKTtcbiAgICB3YXJuJDEoXG4gICAgICBgJHthcGlOYW1lfSBpcyBjYWxsZWQgd2hlbiB0aGVyZSBpcyBubyBhY3RpdmUgY29tcG9uZW50IGluc3RhbmNlIHRvIGJlIGFzc29jaWF0ZWQgd2l0aC4gTGlmZWN5Y2xlIGluamVjdGlvbiBBUElzIGNhbiBvbmx5IGJlIHVzZWQgZHVyaW5nIGV4ZWN1dGlvbiBvZiBzZXR1cCgpLmAgKyAoYCBJZiB5b3UgYXJlIHVzaW5nIGFzeW5jIHNldHVwKCksIG1ha2Ugc3VyZSB0byByZWdpc3RlciBsaWZlY3ljbGUgaG9va3MgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdCBzdGF0ZW1lbnQuYCApXG4gICAgKTtcbiAgfVxufVxuY29uc3QgY3JlYXRlSG9vayA9IChsaWZlY3ljbGUpID0+IChob29rLCB0YXJnZXQgPSBjdXJyZW50SW5zdGFuY2UpID0+IHtcbiAgaWYgKCFpc0luU1NSQ29tcG9uZW50U2V0dXAgfHwgbGlmZWN5Y2xlID09PSBcInNwXCIpIHtcbiAgICBpbmplY3RIb29rKGxpZmVjeWNsZSwgKC4uLmFyZ3MpID0+IGhvb2soLi4uYXJncyksIHRhcmdldCk7XG4gIH1cbn07XG5jb25zdCBvbkJlZm9yZU1vdW50ID0gY3JlYXRlSG9vayhcImJtXCIpO1xuY29uc3Qgb25Nb3VudGVkID0gY3JlYXRlSG9vayhcIm1cIik7XG5jb25zdCBvbkJlZm9yZVVwZGF0ZSA9IGNyZWF0ZUhvb2soXG4gIFwiYnVcIlxuKTtcbmNvbnN0IG9uVXBkYXRlZCA9IGNyZWF0ZUhvb2soXCJ1XCIpO1xuY29uc3Qgb25CZWZvcmVVbm1vdW50ID0gY3JlYXRlSG9vayhcbiAgXCJidW1cIlxuKTtcbmNvbnN0IG9uVW5tb3VudGVkID0gY3JlYXRlSG9vayhcInVtXCIpO1xuY29uc3Qgb25TZXJ2ZXJQcmVmZXRjaCA9IGNyZWF0ZUhvb2soXG4gIFwic3BcIlxuKTtcbmNvbnN0IG9uUmVuZGVyVHJpZ2dlcmVkID0gY3JlYXRlSG9vayhcInJ0Z1wiKTtcbmNvbnN0IG9uUmVuZGVyVHJhY2tlZCA9IGNyZWF0ZUhvb2soXCJydGNcIik7XG5mdW5jdGlvbiBvbkVycm9yQ2FwdHVyZWQoaG9vaywgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSB7XG4gIGluamVjdEhvb2soXCJlY1wiLCBob29rLCB0YXJnZXQpO1xufVxuXG5jb25zdCBDT01QT05FTlRTID0gXCJjb21wb25lbnRzXCI7XG5jb25zdCBESVJFQ1RJVkVTID0gXCJkaXJlY3RpdmVzXCI7XG5mdW5jdGlvbiByZXNvbHZlQ29tcG9uZW50KG5hbWUsIG1heWJlU2VsZlJlZmVyZW5jZSkge1xuICByZXR1cm4gcmVzb2x2ZUFzc2V0KENPTVBPTkVOVFMsIG5hbWUsIHRydWUsIG1heWJlU2VsZlJlZmVyZW5jZSkgfHwgbmFtZTtcbn1cbmNvbnN0IE5VTExfRFlOQU1JQ19DT01QT05FTlQgPSBTeW1ib2wuZm9yKFwidi1uZGNcIik7XG5mdW5jdGlvbiByZXNvbHZlRHluYW1pY0NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgaWYgKGlzU3RyaW5nKGNvbXBvbmVudCkpIHtcbiAgICByZXR1cm4gcmVzb2x2ZUFzc2V0KENPTVBPTkVOVFMsIGNvbXBvbmVudCwgZmFsc2UpIHx8IGNvbXBvbmVudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY29tcG9uZW50IHx8IE5VTExfRFlOQU1JQ19DT01QT05FTlQ7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlc29sdmVEaXJlY3RpdmUobmFtZSkge1xuICByZXR1cm4gcmVzb2x2ZUFzc2V0KERJUkVDVElWRVMsIG5hbWUpO1xufVxuZnVuY3Rpb24gcmVzb2x2ZUFzc2V0KHR5cGUsIG5hbWUsIHdhcm5NaXNzaW5nID0gdHJ1ZSwgbWF5YmVTZWxmUmVmZXJlbmNlID0gZmFsc2UpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgfHwgY3VycmVudEluc3RhbmNlO1xuICBpZiAoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xuICAgIGlmICh0eXBlID09PSBDT01QT05FTlRTKSB7XG4gICAgICBjb25zdCBzZWxmTmFtZSA9IGdldENvbXBvbmVudE5hbWUoXG4gICAgICAgIENvbXBvbmVudCxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgICBpZiAoc2VsZk5hbWUgJiYgKHNlbGZOYW1lID09PSBuYW1lIHx8IHNlbGZOYW1lID09PSBjYW1lbGl6ZShuYW1lKSB8fCBzZWxmTmFtZSA9PT0gY2FwaXRhbGl6ZShjYW1lbGl6ZShuYW1lKSkpKSB7XG4gICAgICAgIHJldHVybiBDb21wb25lbnQ7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IChcbiAgICAgIC8vIGxvY2FsIHJlZ2lzdHJhdGlvblxuICAgICAgLy8gY2hlY2sgaW5zdGFuY2VbdHlwZV0gZmlyc3Qgd2hpY2ggaXMgcmVzb2x2ZWQgZm9yIG9wdGlvbnMgQVBJXG4gICAgICByZXNvbHZlKGluc3RhbmNlW3R5cGVdIHx8IENvbXBvbmVudFt0eXBlXSwgbmFtZSkgfHwgLy8gZ2xvYmFsIHJlZ2lzdHJhdGlvblxuICAgICAgcmVzb2x2ZShpbnN0YW5jZS5hcHBDb250ZXh0W3R5cGVdLCBuYW1lKVxuICAgICk7XG4gICAgaWYgKCFyZXMgJiYgbWF5YmVTZWxmUmVmZXJlbmNlKSB7XG4gICAgICByZXR1cm4gQ29tcG9uZW50O1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG4gICAgICBjb25zdCBleHRyYSA9IHR5cGUgPT09IENPTVBPTkVOVFMgPyBgXG5JZiB0aGlzIGlzIGEgbmF0aXZlIGN1c3RvbSBlbGVtZW50LCBtYWtlIHN1cmUgdG8gZXhjbHVkZSBpdCBmcm9tIGNvbXBvbmVudCByZXNvbHV0aW9uIHZpYSBjb21waWxlck9wdGlvbnMuaXNDdXN0b21FbGVtZW50LmAgOiBgYDtcbiAgICAgIHdhcm4kMShgRmFpbGVkIHRvIHJlc29sdmUgJHt0eXBlLnNsaWNlKDAsIC0xKX06ICR7bmFtZX0ke2V4dHJhfWApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgcmVzb2x2ZSR7Y2FwaXRhbGl6ZSh0eXBlLnNsaWNlKDAsIC0xKSl9IGNhbiBvbmx5IGJlIHVzZWQgaW4gcmVuZGVyKCkgb3Igc2V0dXAoKS5gXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZShyZWdpc3RyeSwgbmFtZSkge1xuICByZXR1cm4gcmVnaXN0cnkgJiYgKHJlZ2lzdHJ5W25hbWVdIHx8IHJlZ2lzdHJ5W2NhbWVsaXplKG5hbWUpXSB8fCByZWdpc3RyeVtjYXBpdGFsaXplKGNhbWVsaXplKG5hbWUpKV0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJMaXN0KHNvdXJjZSwgcmVuZGVySXRlbSwgY2FjaGUsIGluZGV4KSB7XG4gIGxldCByZXQ7XG4gIGNvbnN0IGNhY2hlZCA9IGNhY2hlICYmIGNhY2hlW2luZGV4XTtcbiAgY29uc3Qgc291cmNlSXNBcnJheSA9IGlzQXJyYXkoc291cmNlKTtcbiAgaWYgKHNvdXJjZUlzQXJyYXkgfHwgaXNTdHJpbmcoc291cmNlKSkge1xuICAgIGNvbnN0IHNvdXJjZUlzUmVhY3RpdmVBcnJheSA9IHNvdXJjZUlzQXJyYXkgJiYgaXNSZWFjdGl2ZShzb3VyY2UpO1xuICAgIGxldCBuZWVkc1dyYXAgPSBmYWxzZTtcbiAgICBpZiAoc291cmNlSXNSZWFjdGl2ZUFycmF5KSB7XG4gICAgICBuZWVkc1dyYXAgPSAhaXNTaGFsbG93KHNvdXJjZSk7XG4gICAgICBzb3VyY2UgPSBzaGFsbG93UmVhZEFycmF5KHNvdXJjZSk7XG4gICAgfVxuICAgIHJldCA9IG5ldyBBcnJheShzb3VyY2UubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHNvdXJjZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oXG4gICAgICAgIG5lZWRzV3JhcCA/IHRvUmVhY3RpdmUoc291cmNlW2ldKSA6IHNvdXJjZVtpXSxcbiAgICAgICAgaSxcbiAgICAgICAgdm9pZCAwLFxuICAgICAgICBjYWNoZWQgJiYgY2FjaGVkW2ldXG4gICAgICApO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2Ygc291cmNlID09PSBcIm51bWJlclwiKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIU51bWJlci5pc0ludGVnZXIoc291cmNlKSkge1xuICAgICAgd2FybiQxKGBUaGUgdi1mb3IgcmFuZ2UgZXhwZWN0IGFuIGludGVnZXIgdmFsdWUgYnV0IGdvdCAke3NvdXJjZX0uYCk7XG4gICAgfVxuICAgIHJldCA9IG5ldyBBcnJheShzb3VyY2UpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlOyBpKyspIHtcbiAgICAgIHJldFtpXSA9IHJlbmRlckl0ZW0oaSArIDEsIGksIHZvaWQgMCwgY2FjaGVkICYmIGNhY2hlZFtpXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICBpZiAoc291cmNlW1N5bWJvbC5pdGVyYXRvcl0pIHtcbiAgICAgIHJldCA9IEFycmF5LmZyb20oXG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgKGl0ZW0sIGkpID0+IHJlbmRlckl0ZW0oaXRlbSwgaSwgdm9pZCAwLCBjYWNoZWQgJiYgY2FjaGVkW2ldKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gICAgICByZXQgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKHNvdXJjZVtrZXldLCBrZXksIGksIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXQgPSBbXTtcbiAgfVxuICBpZiAoY2FjaGUpIHtcbiAgICBjYWNoZVtpbmRleF0gPSByZXQ7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2xvdHMoc2xvdHMsIGR5bmFtaWNTbG90cykge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGR5bmFtaWNTbG90cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNsb3QgPSBkeW5hbWljU2xvdHNbaV07XG4gICAgaWYgKGlzQXJyYXkoc2xvdCkpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2xvdC5sZW5ndGg7IGorKykge1xuICAgICAgICBzbG90c1tzbG90W2pdLm5hbWVdID0gc2xvdFtqXS5mbjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNsb3QpIHtcbiAgICAgIHNsb3RzW3Nsb3QubmFtZV0gPSBzbG90LmtleSA/ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHNsb3QuZm4oLi4uYXJncyk7XG4gICAgICAgIGlmIChyZXMpIHJlcy5rZXkgPSBzbG90LmtleTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0gOiBzbG90LmZuO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2xvdHM7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclNsb3Qoc2xvdHMsIG5hbWUsIHByb3BzID0ge30sIGZhbGxiYWNrLCBub1Nsb3R0ZWQpIHtcbiAgaWYgKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5jZSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50ICYmIGlzQXN5bmNXcmFwcGVyKGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wYXJlbnQpICYmIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZS5wYXJlbnQuY2UpIHtcbiAgICBpZiAobmFtZSAhPT0gXCJkZWZhdWx0XCIpIHByb3BzLm5hbWUgPSBuYW1lO1xuICAgIHJldHVybiBvcGVuQmxvY2soKSwgY3JlYXRlQmxvY2soXG4gICAgICBGcmFnbWVudCxcbiAgICAgIG51bGwsXG4gICAgICBbY3JlYXRlVk5vZGUoXCJzbG90XCIsIHByb3BzLCBmYWxsYmFjayAmJiBmYWxsYmFjaygpKV0sXG4gICAgICA2NFxuICAgICk7XG4gIH1cbiAgbGV0IHNsb3QgPSBzbG90c1tuYW1lXTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgc2xvdCAmJiBzbG90Lmxlbmd0aCA+IDEpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgU1NSLW9wdGltaXplZCBzbG90IGZ1bmN0aW9uIGRldGVjdGVkIGluIGEgbm9uLVNTUi1vcHRpbWl6ZWQgcmVuZGVyIGZ1bmN0aW9uLiBZb3UgbmVlZCB0byBtYXJrIHRoaXMgY29tcG9uZW50IHdpdGggJGR5bmFtaWMtc2xvdHMgaW4gdGhlIHBhcmVudCB0ZW1wbGF0ZS5gXG4gICAgKTtcbiAgICBzbG90ID0gKCkgPT4gW107XG4gIH1cbiAgaWYgKHNsb3QgJiYgc2xvdC5fYykge1xuICAgIHNsb3QuX2QgPSBmYWxzZTtcbiAgfVxuICBvcGVuQmxvY2soKTtcbiAgY29uc3QgdmFsaWRTbG90Q29udGVudCA9IHNsb3QgJiYgZW5zdXJlVmFsaWRWTm9kZShzbG90KHByb3BzKSk7XG4gIGNvbnN0IHNsb3RLZXkgPSBwcm9wcy5rZXkgfHwgLy8gc2xvdCBjb250ZW50IGFycmF5IG9mIGEgZHluYW1pYyBjb25kaXRpb25hbCBzbG90IG1heSBoYXZlIGEgYnJhbmNoXG4gIC8vIGtleSBhdHRhY2hlZCBpbiB0aGUgYGNyZWF0ZVNsb3RzYCBoZWxwZXIsIHJlc3BlY3QgdGhhdFxuICB2YWxpZFNsb3RDb250ZW50ICYmIHZhbGlkU2xvdENvbnRlbnQua2V5O1xuICBjb25zdCByZW5kZXJlZCA9IGNyZWF0ZUJsb2NrKFxuICAgIEZyYWdtZW50LFxuICAgIHtcbiAgICAgIGtleTogKHNsb3RLZXkgJiYgIWlzU3ltYm9sKHNsb3RLZXkpID8gc2xvdEtleSA6IGBfJHtuYW1lfWApICsgLy8gIzcyNTYgZm9yY2UgZGlmZmVyZW50aWF0ZSBmYWxsYmFjayBjb250ZW50IGZyb20gYWN0dWFsIGNvbnRlbnRcbiAgICAgICghdmFsaWRTbG90Q29udGVudCAmJiBmYWxsYmFjayA/IFwiX2ZiXCIgOiBcIlwiKVxuICAgIH0sXG4gICAgdmFsaWRTbG90Q29udGVudCB8fCAoZmFsbGJhY2sgPyBmYWxsYmFjaygpIDogW10pLFxuICAgIHZhbGlkU2xvdENvbnRlbnQgJiYgc2xvdHMuXyA9PT0gMSA/IDY0IDogLTJcbiAgKTtcbiAgaWYgKCFub1Nsb3R0ZWQgJiYgcmVuZGVyZWQuc2NvcGVJZCkge1xuICAgIHJlbmRlcmVkLnNsb3RTY29wZUlkcyA9IFtyZW5kZXJlZC5zY29wZUlkICsgXCItc1wiXTtcbiAgfVxuICBpZiAoc2xvdCAmJiBzbG90Ll9jKSB7XG4gICAgc2xvdC5fZCA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIHJlbmRlcmVkO1xufVxuZnVuY3Rpb24gZW5zdXJlVmFsaWRWTm9kZSh2bm9kZXMpIHtcbiAgcmV0dXJuIHZub2Rlcy5zb21lKChjaGlsZCkgPT4ge1xuICAgIGlmICghaXNWTm9kZShjaGlsZCkpIHJldHVybiB0cnVlO1xuICAgIGlmIChjaGlsZC50eXBlID09PSBDb21tZW50KSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09IEZyYWdtZW50ICYmICFlbnN1cmVWYWxpZFZOb2RlKGNoaWxkLmNoaWxkcmVuKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSkgPyB2bm9kZXMgOiBudWxsO1xufVxuXG5mdW5jdGlvbiB0b0hhbmRsZXJzKG9iaiwgcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkpIHtcbiAgY29uc3QgcmV0ID0ge307XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc09iamVjdChvYmopKSB7XG4gICAgd2FybiQxKGB2LW9uIHdpdGggbm8gYXJndW1lbnQgZXhwZWN0cyBhbiBvYmplY3QgdmFsdWUuYCk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICByZXRbcHJlc2VydmVDYXNlSWZOZWNlc3NhcnkgJiYgL1tBLVpdLy50ZXN0KGtleSkgPyBgb246JHtrZXl9YCA6IHRvSGFuZGxlcktleShrZXkpXSA9IG9ialtrZXldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmNvbnN0IGdldFB1YmxpY0luc3RhbmNlID0gKGkpID0+IHtcbiAgaWYgKCFpKSByZXR1cm4gbnVsbDtcbiAgaWYgKGlzU3RhdGVmdWxDb21wb25lbnQoaSkpIHJldHVybiBnZXRDb21wb25lbnRQdWJsaWNJbnN0YW5jZShpKTtcbiAgcmV0dXJuIGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KTtcbn07XG5jb25zdCBwdWJsaWNQcm9wZXJ0aWVzTWFwID0gKFxuICAvLyBNb3ZlIFBVUkUgbWFya2VyIHRvIG5ldyBsaW5lIHRvIHdvcmthcm91bmQgY29tcGlsZXIgZGlzY2FyZGluZyBpdFxuICAvLyBkdWUgdG8gdHlwZSBhbm5vdGF0aW9uXG4gIC8qIEBfX1BVUkVfXyAqLyBleHRlbmQoLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCksIHtcbiAgICAkOiAoaSkgPT4gaSxcbiAgICAkZWw6IChpKSA9PiBpLnZub2RlLmVsLFxuICAgICRkYXRhOiAoaSkgPT4gaS5kYXRhLFxuICAgICRwcm9wczogKGkpID0+ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaS5wcm9wcykgOiBpLnByb3BzLFxuICAgICRhdHRyczogKGkpID0+ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaS5hdHRycykgOiBpLmF0dHJzLFxuICAgICRzbG90czogKGkpID0+ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkoaS5zbG90cykgOiBpLnNsb3RzLFxuICAgICRyZWZzOiAoaSkgPT4gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShpLnJlZnMpIDogaS5yZWZzLFxuICAgICRwYXJlbnQ6IChpKSA9PiBnZXRQdWJsaWNJbnN0YW5jZShpLnBhcmVudCksXG4gICAgJHJvb3Q6IChpKSA9PiBnZXRQdWJsaWNJbnN0YW5jZShpLnJvb3QpLFxuICAgICRob3N0OiAoaSkgPT4gaS5jZSxcbiAgICAkZW1pdDogKGkpID0+IGkuZW1pdCxcbiAgICAkb3B0aW9uczogKGkpID0+IF9fVlVFX09QVElPTlNfQVBJX18gPyByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpKSA6IGkudHlwZSxcbiAgICAkZm9yY2VVcGRhdGU6IChpKSA9PiBpLmYgfHwgKGkuZiA9ICgpID0+IHtcbiAgICAgIHF1ZXVlSm9iKGkudXBkYXRlKTtcbiAgICB9KSxcbiAgICAkbmV4dFRpY2s6IChpKSA9PiBpLm4gfHwgKGkubiA9IG5leHRUaWNrLmJpbmQoaS5wcm94eSkpLFxuICAgICR3YXRjaDogKGkpID0+IF9fVlVFX09QVElPTlNfQVBJX18gPyBpbnN0YW5jZVdhdGNoLmJpbmQoaSkgOiBOT09QXG4gIH0pXG4pO1xuY29uc3QgaXNSZXNlcnZlZFByZWZpeCA9IChrZXkpID0+IGtleSA9PT0gXCJfXCIgfHwga2V5ID09PSBcIiRcIjtcbmNvbnN0IGhhc1NldHVwQmluZGluZyA9IChzdGF0ZSwga2V5KSA9PiBzdGF0ZSAhPT0gRU1QVFlfT0JKICYmICFzdGF0ZS5fX2lzU2NyaXB0U2V0dXAgJiYgaGFzT3duKHN0YXRlLCBrZXkpO1xuY29uc3QgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0ge1xuICBnZXQoeyBfOiBpbnN0YW5jZSB9LCBrZXkpIHtcbiAgICBpZiAoa2V5ID09PSBcIl9fdl9za2lwXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCB7IGN0eCwgc2V0dXBTdGF0ZSwgZGF0YSwgcHJvcHMsIGFjY2Vzc0NhY2hlLCB0eXBlLCBhcHBDb250ZXh0IH0gPSBpbnN0YW5jZTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBrZXkgPT09IFwiX19pc1Z1ZVwiKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IG5vcm1hbGl6ZWRQcm9wcztcbiAgICBpZiAoa2V5WzBdICE9PSBcIiRcIikge1xuICAgICAgY29uc3QgbiA9IGFjY2Vzc0NhY2hlW2tleV07XG4gICAgICBpZiAobiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHN3aXRjaCAobikge1xuICAgICAgICAgIGNhc2UgMSAvKiBTRVRVUCAqLzpcbiAgICAgICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XG4gICAgICAgICAgY2FzZSAyIC8qIERBVEEgKi86XG4gICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgICAgIGNhc2UgNCAvKiBDT05URVhUICovOlxuICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgICAgIGNhc2UgMyAvKiBQUk9QUyAqLzpcbiAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGhhc1NldHVwQmluZGluZyhzZXR1cFN0YXRlLCBrZXkpKSB7XG4gICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAxIC8qIFNFVFVQICovO1xuICAgICAgICByZXR1cm4gc2V0dXBTdGF0ZVtrZXldO1xuICAgICAgfSBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDIgLyogREFUQSAqLztcbiAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIC8vIG9ubHkgY2FjaGUgb3RoZXIgcHJvcGVydGllcyB3aGVuIGluc3RhbmNlIGhhcyBkZWNsYXJlZCAodGh1cyBzdGFibGUpXG4gICAgICAgIC8vIHByb3BzXG4gICAgICAgIChub3JtYWxpemVkUHJvcHMgPSBpbnN0YW5jZS5wcm9wc09wdGlvbnNbMF0pICYmIGhhc093bihub3JtYWxpemVkUHJvcHMsIGtleSlcbiAgICAgICkge1xuICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMyAvKiBQUk9QUyAqLztcbiAgICAgICAgcmV0dXJuIHByb3BzW2tleV07XG4gICAgICB9IGVsc2UgaWYgKGN0eCAhPT0gRU1QVFlfT0JKICYmIGhhc093bihjdHgsIGtleSkpIHtcbiAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDQgLyogQ09OVEVYVCAqLztcbiAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xuICAgICAgfSBlbHNlIGlmICghX19WVUVfT1BUSU9OU19BUElfXyB8fCBzaG91bGRDYWNoZUFjY2Vzcykge1xuICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMCAvKiBPVEhFUiAqLztcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcHVibGljR2V0dGVyID0gcHVibGljUHJvcGVydGllc01hcFtrZXldO1xuICAgIGxldCBjc3NNb2R1bGUsIGdsb2JhbFByb3BlcnRpZXM7XG4gICAgaWYgKHB1YmxpY0dldHRlcikge1xuICAgICAgaWYgKGtleSA9PT0gXCIkYXR0cnNcIikge1xuICAgICAgICB0cmFjayhpbnN0YW5jZS5hdHRycywgXCJnZXRcIiwgXCJcIik7XG4gICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbWFya0F0dHJzQWNjZXNzZWQoKTtcbiAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBrZXkgPT09IFwiJHNsb3RzXCIpIHtcbiAgICAgICAgdHJhY2soaW5zdGFuY2UsIFwiZ2V0XCIsIGtleSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHVibGljR2V0dGVyKGluc3RhbmNlKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgLy8gY3NzIG1vZHVsZSAoaW5qZWN0ZWQgYnkgdnVlLWxvYWRlcilcbiAgICAgIChjc3NNb2R1bGUgPSB0eXBlLl9fY3NzTW9kdWxlcykgJiYgKGNzc01vZHVsZSA9IGNzc01vZHVsZVtrZXldKVxuICAgICkge1xuICAgICAgcmV0dXJuIGNzc01vZHVsZTtcbiAgICB9IGVsc2UgaWYgKGN0eCAhPT0gRU1QVFlfT0JKICYmIGhhc093bihjdHgsIGtleSkpIHtcbiAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSA0IC8qIENPTlRFWFQgKi87XG4gICAgICByZXR1cm4gY3R4W2tleV07XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIC8vIGdsb2JhbCBwcm9wZXJ0aWVzXG4gICAgICBnbG9iYWxQcm9wZXJ0aWVzID0gYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcywgaGFzT3duKGdsb2JhbFByb3BlcnRpZXMsIGtleSlcbiAgICApIHtcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFByb3BlcnRpZXNba2V5XTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlICYmICghaXNTdHJpbmcoa2V5KSB8fCAvLyAjMTA5MSBhdm9pZCBpbnRlcm5hbCBpc1JlZi9pc1ZOb2RlIGNoZWNrcyBvbiBjb21wb25lbnQgaW5zdGFuY2UgbGVhZGluZ1xuICAgIC8vIHRvIGluZmluaXRlIHdhcm5pbmcgbG9vcFxuICAgIGtleS5pbmRleE9mKFwiX192XCIpICE9PSAwKSkge1xuICAgICAgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJiBpc1Jlc2VydmVkUHJlZml4KGtleVswXSkgJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBQcm9wZXJ0eSAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAga2V5XG4gICAgICAgICAgKX0gbXVzdCBiZSBhY2Nlc3NlZCB2aWEgJGRhdGEgYmVjYXVzZSBpdCBzdGFydHMgd2l0aCBhIHJlc2VydmVkIGNoYXJhY3RlciAoXCIkXCIgb3IgXCJfXCIpIGFuZCBpcyBub3QgcHJveGllZCBvbiB0aGUgcmVuZGVyIGNvbnRleHQuYFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChpbnN0YW5jZSA9PT0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSB7XG4gICAgICAgIHdhcm4kMShcbiAgICAgICAgICBgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSB3YXMgYWNjZXNzZWQgZHVyaW5nIHJlbmRlciBidXQgaXMgbm90IGRlZmluZWQgb24gaW5zdGFuY2UuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgc2V0KHsgXzogaW5zdGFuY2UgfSwga2V5LCB2YWx1ZSkge1xuICAgIGNvbnN0IHsgZGF0YSwgc2V0dXBTdGF0ZSwgY3R4IH0gPSBpbnN0YW5jZTtcbiAgICBpZiAoaGFzU2V0dXBCaW5kaW5nKHNldHVwU3RhdGUsIGtleSkpIHtcbiAgICAgIHNldHVwU3RhdGVba2V5XSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwICYmIGhhc093bihzZXR1cFN0YXRlLCBrZXkpKSB7XG4gICAgICB3YXJuJDEoYENhbm5vdCBtdXRhdGUgPHNjcmlwdCBzZXR1cD4gYmluZGluZyBcIiR7a2V5fVwiIGZyb20gT3B0aW9ucyBBUEkuYCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcbiAgICAgIGRhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChoYXNPd24oaW5zdGFuY2UucHJvcHMsIGtleSkpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGBBdHRlbXB0aW5nIHRvIG11dGF0ZSBwcm9wIFwiJHtrZXl9XCIuIFByb3BzIGFyZSByZWFkb25seS5gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGtleVswXSA9PT0gXCIkXCIgJiYga2V5LnNsaWNlKDEpIGluIGluc3RhbmNlKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgYEF0dGVtcHRpbmcgdG8gbXV0YXRlIHB1YmxpYyBwcm9wZXJ0eSBcIiR7a2V5fVwiLiBQcm9wZXJ0aWVzIHN0YXJ0aW5nIHdpdGggJCBhcmUgcmVzZXJ2ZWQgYW5kIHJlYWRvbmx5LmBcbiAgICAgICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGtleSBpbiBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4W2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGhhcyh7XG4gICAgXzogeyBkYXRhLCBzZXR1cFN0YXRlLCBhY2Nlc3NDYWNoZSwgY3R4LCBhcHBDb250ZXh0LCBwcm9wc09wdGlvbnMgfVxuICB9LCBrZXkpIHtcbiAgICBsZXQgbm9ybWFsaXplZFByb3BzO1xuICAgIHJldHVybiAhIWFjY2Vzc0NhY2hlW2tleV0gfHwgZGF0YSAhPT0gRU1QVFlfT0JKICYmIGhhc093bihkYXRhLCBrZXkpIHx8IGhhc1NldHVwQmluZGluZyhzZXR1cFN0YXRlLCBrZXkpIHx8IChub3JtYWxpemVkUHJvcHMgPSBwcm9wc09wdGlvbnNbMF0pICYmIGhhc093bihub3JtYWxpemVkUHJvcHMsIGtleSkgfHwgaGFzT3duKGN0eCwga2V5KSB8fCBoYXNPd24ocHVibGljUHJvcGVydGllc01hcCwga2V5KSB8fCBoYXNPd24oYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcywga2V5KTtcbiAgfSxcbiAgZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgICBpZiAoZGVzY3JpcHRvci5nZXQgIT0gbnVsbCkge1xuICAgICAgdGFyZ2V0Ll8uYWNjZXNzQ2FjaGVba2V5XSA9IDA7XG4gICAgfSBlbHNlIGlmIChoYXNPd24oZGVzY3JpcHRvciwgXCJ2YWx1ZVwiKSkge1xuICAgICAgdGhpcy5zZXQodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IudmFsdWUsIG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn07XG5pZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB0cnVlKSB7XG4gIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycy5vd25LZXlzID0gKHRhcmdldCkgPT4ge1xuICAgIHdhcm4kMShcbiAgICAgIGBBdm9pZCBhcHAgbG9naWMgdGhhdCByZWxpZXMgb24gZW51bWVyYXRpbmcga2V5cyBvbiBhIGNvbXBvbmVudCBpbnN0YW5jZS4gVGhlIGtleXMgd2lsbCBiZSBlbXB0eSBpbiBwcm9kdWN0aW9uIG1vZGUgdG8gYXZvaWQgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQuYFxuICAgICk7XG4gICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xuICB9O1xufVxuY29uc3QgUnVudGltZUNvbXBpbGVkUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzID0gLyogQF9fUFVSRV9fICovIGV4dGVuZCh7fSwgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLCB7XG4gIGdldCh0YXJnZXQsIGtleSkge1xuICAgIGlmIChrZXkgPT09IFN5bWJvbC51bnNjb3BhYmxlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLmdldCh0YXJnZXQsIGtleSwgdGFyZ2V0KTtcbiAgfSxcbiAgaGFzKF8sIGtleSkge1xuICAgIGNvbnN0IGhhcyA9IGtleVswXSAhPT0gXCJfXCIgJiYgIWlzR2xvYmFsbHlBbGxvd2VkKGtleSk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWhhcyAmJiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuaGFzKF8sIGtleSkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAga2V5XG4gICAgICAgICl9IHNob3VsZCBub3Qgc3RhcnQgd2l0aCBfIHdoaWNoIGlzIGEgcmVzZXJ2ZWQgcHJlZml4IGZvciBWdWUgaW50ZXJuYWxzLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBoYXM7XG4gIH1cbn0pO1xuZnVuY3Rpb24gY3JlYXRlRGV2UmVuZGVyQ29udGV4dChpbnN0YW5jZSkge1xuICBjb25zdCB0YXJnZXQgPSB7fTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYF9gLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGdldDogKCkgPT4gaW5zdGFuY2VcbiAgfSk7XG4gIE9iamVjdC5rZXlzKHB1YmxpY1Byb3BlcnRpZXNNYXApLmZvckVhY2goKGtleSkgPT4ge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBnZXQ6ICgpID0+IHB1YmxpY1Byb3BlcnRpZXNNYXBba2V5XShpbnN0YW5jZSksXG4gICAgICAvLyBpbnRlcmNlcHRlZCBieSB0aGUgcHJveHkgc28gbm8gbmVlZCBmb3IgaW1wbGVtZW50YXRpb24sXG4gICAgICAvLyBidXQgbmVlZGVkIHRvIHByZXZlbnQgc2V0IGVycm9yc1xuICAgICAgc2V0OiBOT09QXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gZXhwb3NlUHJvcHNPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgY29uc3Qge1xuICAgIGN0eCxcbiAgICBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdXG4gIH0gPSBpbnN0YW5jZTtcbiAgaWYgKHByb3BzT3B0aW9ucykge1xuICAgIE9iamVjdC5rZXlzKHByb3BzT3B0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlLnByb3BzW2tleV0sXG4gICAgICAgIHNldDogTk9PUFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgY29uc3QgeyBjdHgsIHNldHVwU3RhdGUgfSA9IGluc3RhbmNlO1xuICBPYmplY3Qua2V5cyh0b1JhdyhzZXR1cFN0YXRlKSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKCFzZXR1cFN0YXRlLl9faXNTY3JpcHRTZXR1cCkge1xuICAgICAgaWYgKGlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSkge1xuICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgYHNldHVwKCkgcmV0dXJuIHByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICApfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXCIkXCIgb3IgXCJfXCIgd2hpY2ggYXJlIHJlc2VydmVkIHByZWZpeGVzIGZvciBWdWUgaW50ZXJuYWxzLmBcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiBzZXR1cFN0YXRlW2tleV0sXG4gICAgICAgIHNldDogTk9PUFxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn1cblxuY29uc3Qgd2FyblJ1bnRpbWVVc2FnZSA9IChtZXRob2QpID0+IHdhcm4kMShcbiAgYCR7bWV0aG9kfSgpIGlzIGEgY29tcGlsZXItaGludCBoZWxwZXIgdGhhdCBpcyBvbmx5IHVzYWJsZSBpbnNpZGUgPHNjcmlwdCBzZXR1cD4gb2YgYSBzaW5nbGUgZmlsZSBjb21wb25lbnQuIEl0cyBhcmd1bWVudHMgc2hvdWxkIGJlIGNvbXBpbGVkIGF3YXkgYW5kIHBhc3NpbmcgaXQgYXQgcnVudGltZSBoYXMgbm8gZWZmZWN0LmBcbik7XG5mdW5jdGlvbiBkZWZpbmVQcm9wcygpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuUnVudGltZVVzYWdlKGBkZWZpbmVQcm9wc2ApO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZGVmaW5lRW1pdHMoKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRW1pdHNgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGRlZmluZUV4cG9zZShleHBvc2VkKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRXhwb3NlYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlZmluZU9wdGlvbnMob3B0aW9ucykge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoYGRlZmluZU9wdGlvbnNgKTtcbiAgfVxufVxuZnVuY3Rpb24gZGVmaW5lU2xvdHMoKSB7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lU2xvdHNgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGRlZmluZU1vZGVsKCkge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoXCJkZWZpbmVNb2RlbFwiKTtcbiAgfVxufVxuZnVuY3Rpb24gd2l0aERlZmF1bHRzKHByb3BzLCBkZWZhdWx0cykge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm5SdW50aW1lVXNhZ2UoYHdpdGhEZWZhdWx0c2ApO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gdXNlU2xvdHMoKSB7XG4gIHJldHVybiBnZXRDb250ZXh0KCkuc2xvdHM7XG59XG5mdW5jdGlvbiB1c2VBdHRycygpIHtcbiAgcmV0dXJuIGdldENvbnRleHQoKS5hdHRycztcbn1cbmZ1bmN0aW9uIGdldENvbnRleHQoKSB7XG4gIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWkpIHtcbiAgICB3YXJuJDEoYHVzZUNvbnRleHQoKSBjYWxsZWQgd2l0aG91dCBhY3RpdmUgaW5zdGFuY2UuYCk7XG4gIH1cbiAgcmV0dXJuIGkuc2V0dXBDb250ZXh0IHx8IChpLnNldHVwQ29udGV4dCA9IGNyZWF0ZVNldHVwQ29udGV4dChpKSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wc09yRW1pdHMocHJvcHMpIHtcbiAgcmV0dXJuIGlzQXJyYXkocHJvcHMpID8gcHJvcHMucmVkdWNlKFxuICAgIChub3JtYWxpemVkLCBwKSA9PiAobm9ybWFsaXplZFtwXSA9IG51bGwsIG5vcm1hbGl6ZWQpLFxuICAgIHt9XG4gICkgOiBwcm9wcztcbn1cbmZ1bmN0aW9uIG1lcmdlRGVmYXVsdHMocmF3LCBkZWZhdWx0cykge1xuICBjb25zdCBwcm9wcyA9IG5vcm1hbGl6ZVByb3BzT3JFbWl0cyhyYXcpO1xuICBmb3IgKGNvbnN0IGtleSBpbiBkZWZhdWx0cykge1xuICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIl9fc2tpcFwiKSkgY29udGludWU7XG4gICAgbGV0IG9wdCA9IHByb3BzW2tleV07XG4gICAgaWYgKG9wdCkge1xuICAgICAgaWYgKGlzQXJyYXkob3B0KSB8fCBpc0Z1bmN0aW9uKG9wdCkpIHtcbiAgICAgICAgb3B0ID0gcHJvcHNba2V5XSA9IHsgdHlwZTogb3B0LCBkZWZhdWx0OiBkZWZhdWx0c1trZXldIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHQuZGVmYXVsdCA9IGRlZmF1bHRzW2tleV07XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcHQgPT09IG51bGwpIHtcbiAgICAgIG9wdCA9IHByb3BzW2tleV0gPSB7IGRlZmF1bHQ6IGRlZmF1bHRzW2tleV0gfTtcbiAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4kMShgcHJvcHMgZGVmYXVsdCBrZXkgXCIke2tleX1cIiBoYXMgbm8gY29ycmVzcG9uZGluZyBkZWNsYXJhdGlvbi5gKTtcbiAgICB9XG4gICAgaWYgKG9wdCAmJiBkZWZhdWx0c1tgX19za2lwXyR7a2V5fWBdKSB7XG4gICAgICBvcHQuc2tpcEZhY3RvcnkgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcHM7XG59XG5mdW5jdGlvbiBtZXJnZU1vZGVscyhhLCBiKSB7XG4gIGlmICghYSB8fCAhYikgcmV0dXJuIGEgfHwgYjtcbiAgaWYgKGlzQXJyYXkoYSkgJiYgaXNBcnJheShiKSkgcmV0dXJuIGEuY29uY2F0KGIpO1xuICByZXR1cm4gZXh0ZW5kKHt9LCBub3JtYWxpemVQcm9wc09yRW1pdHMoYSksIG5vcm1hbGl6ZVByb3BzT3JFbWl0cyhiKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVQcm9wc1Jlc3RQcm94eShwcm9wcywgZXhjbHVkZWRLZXlzKSB7XG4gIGNvbnN0IHJldCA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgIGlmICghZXhjbHVkZWRLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXQsIGtleSwge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IHByb3BzW2tleV1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gd2l0aEFzeW5jQ29udGV4dChnZXRBd2FpdGFibGUpIHtcbiAgY29uc3QgY3R4ID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFjdHgpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgd2l0aEFzeW5jQ29udGV4dCBjYWxsZWQgd2l0aG91dCBhY3RpdmUgY3VycmVudCBpbnN0YW5jZS4gVGhpcyBpcyBsaWtlbHkgYSBidWcuYFxuICAgICk7XG4gIH1cbiAgbGV0IGF3YWl0YWJsZSA9IGdldEF3YWl0YWJsZSgpO1xuICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xuICBpZiAoaXNQcm9taXNlKGF3YWl0YWJsZSkpIHtcbiAgICBhd2FpdGFibGUgPSBhd2FpdGFibGUuY2F0Y2goKGUpID0+IHtcbiAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShjdHgpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gW2F3YWl0YWJsZSwgKCkgPT4gc2V0Q3VycmVudEluc3RhbmNlKGN0eCldO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEdXBsaWNhdGVDaGVja2VyKCkge1xuICBjb25zdCBjYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gKHR5cGUsIGtleSkgPT4ge1xuICAgIGlmIChjYWNoZVtrZXldKSB7XG4gICAgICB3YXJuJDEoYCR7dHlwZX0gcHJvcGVydHkgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gJHtjYWNoZVtrZXldfS5gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FjaGVba2V5XSA9IHR5cGU7XG4gICAgfVxuICB9O1xufVxubGV0IHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbmZ1bmN0aW9uIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSkge1xuICBjb25zdCBvcHRpb25zID0gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaW5zdGFuY2UpO1xuICBjb25zdCBwdWJsaWNUaGlzID0gaW5zdGFuY2UucHJveHk7XG4gIGNvbnN0IGN0eCA9IGluc3RhbmNlLmN0eDtcbiAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSBmYWxzZTtcbiAgaWYgKG9wdGlvbnMuYmVmb3JlQ3JlYXRlKSB7XG4gICAgY2FsbEhvb2sob3B0aW9ucy5iZWZvcmVDcmVhdGUsIGluc3RhbmNlLCBcImJjXCIpO1xuICB9XG4gIGNvbnN0IHtcbiAgICAvLyBzdGF0ZVxuICAgIGRhdGE6IGRhdGFPcHRpb25zLFxuICAgIGNvbXB1dGVkOiBjb21wdXRlZE9wdGlvbnMsXG4gICAgbWV0aG9kcyxcbiAgICB3YXRjaDogd2F0Y2hPcHRpb25zLFxuICAgIHByb3ZpZGU6IHByb3ZpZGVPcHRpb25zLFxuICAgIGluamVjdDogaW5qZWN0T3B0aW9ucyxcbiAgICAvLyBsaWZlY3ljbGVcbiAgICBjcmVhdGVkLFxuICAgIGJlZm9yZU1vdW50LFxuICAgIG1vdW50ZWQsXG4gICAgYmVmb3JlVXBkYXRlLFxuICAgIHVwZGF0ZWQsXG4gICAgYWN0aXZhdGVkLFxuICAgIGRlYWN0aXZhdGVkLFxuICAgIGJlZm9yZURlc3Ryb3ksXG4gICAgYmVmb3JlVW5tb3VudCxcbiAgICBkZXN0cm95ZWQsXG4gICAgdW5tb3VudGVkLFxuICAgIHJlbmRlcixcbiAgICByZW5kZXJUcmFja2VkLFxuICAgIHJlbmRlclRyaWdnZXJlZCxcbiAgICBlcnJvckNhcHR1cmVkLFxuICAgIHNlcnZlclByZWZldGNoLFxuICAgIC8vIHB1YmxpYyBBUElcbiAgICBleHBvc2UsXG4gICAgaW5oZXJpdEF0dHJzLFxuICAgIC8vIGFzc2V0c1xuICAgIGNvbXBvbmVudHMsXG4gICAgZGlyZWN0aXZlcyxcbiAgICBmaWx0ZXJzXG4gIH0gPSBvcHRpb25zO1xuICBjb25zdCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIDogbnVsbDtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBjb25zdCBbcHJvcHNPcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgICBpZiAocHJvcHNPcHRpb25zKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wc09wdGlvbnMpIHtcbiAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiUHJvcHNcIiAvKiBQUk9QUyAqLywga2V5KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGluamVjdE9wdGlvbnMpIHtcbiAgICByZXNvbHZlSW5qZWN0aW9ucyhpbmplY3RPcHRpb25zLCBjdHgsIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyk7XG4gIH1cbiAgaWYgKG1ldGhvZHMpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBtZXRob2RzKSB7XG4gICAgICBjb25zdCBtZXRob2RIYW5kbGVyID0gbWV0aG9kc1trZXldO1xuICAgICAgaWYgKGlzRnVuY3Rpb24obWV0aG9kSGFuZGxlcikpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiBtZXRob2RIYW5kbGVyLmJpbmQocHVibGljVGhpcyksXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdHhba2V5XSA9IG1ldGhvZEhhbmRsZXIuYmluZChwdWJsaWNUaGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIk1ldGhvZHNcIiAvKiBNRVRIT0RTICovLCBrZXkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBNZXRob2QgXCIke2tleX1cIiBoYXMgdHlwZSBcIiR7dHlwZW9mIG1ldGhvZEhhbmRsZXJ9XCIgaW4gdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uLiBEaWQgeW91IHJlZmVyZW5jZSB0aGUgZnVuY3Rpb24gY29ycmVjdGx5P2BcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGRhdGFPcHRpb25zKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzRnVuY3Rpb24oZGF0YU9wdGlvbnMpKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBUaGUgZGF0YSBvcHRpb24gbXVzdCBiZSBhIGZ1bmN0aW9uLiBQbGFpbiBvYmplY3QgdXNhZ2UgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5gXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gZGF0YU9wdGlvbnMuY2FsbChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc1Byb21pc2UoZGF0YSkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYGRhdGEoKSByZXR1cm5lZCBhIFByb21pc2UgLSBub3RlIGRhdGEoKSBjYW5ub3QgYmUgYXN5bmM7IElmIHlvdSBpbnRlbmQgdG8gcGVyZm9ybSBkYXRhIGZldGNoaW5nIGJlZm9yZSBjb21wb25lbnQgcmVuZGVycywgdXNlIGFzeW5jIHNldHVwKCkgKyA8U3VzcGVuc2U+LmBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGBkYXRhKCkgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RhbmNlLmRhdGEgPSByZWFjdGl2ZShkYXRhKTtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJEYXRhXCIgLyogREFUQSAqLywga2V5KTtcbiAgICAgICAgICBpZiAoIWlzUmVzZXJ2ZWRQcmVmaXgoa2V5WzBdKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBkYXRhW2tleV0sXG4gICAgICAgICAgICAgIHNldDogTk9PUFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHNob3VsZENhY2hlQWNjZXNzID0gdHJ1ZTtcbiAgaWYgKGNvbXB1dGVkT3B0aW9ucykge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNvbXB1dGVkT3B0aW9ucykge1xuICAgICAgY29uc3Qgb3B0ID0gY29tcHV0ZWRPcHRpb25zW2tleV07XG4gICAgICBjb25zdCBnZXQgPSBpc0Z1bmN0aW9uKG9wdCkgPyBvcHQuYmluZChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKSA6IGlzRnVuY3Rpb24ob3B0LmdldCkgPyBvcHQuZ2V0LmJpbmQocHVibGljVGhpcywgcHVibGljVGhpcykgOiBOT09QO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgZ2V0ID09PSBOT09QKSB7XG4gICAgICAgIHdhcm4kMShgQ29tcHV0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBoYXMgbm8gZ2V0dGVyLmApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2V0ID0gIWlzRnVuY3Rpb24ob3B0KSAmJiBpc0Z1bmN0aW9uKG9wdC5zZXQpID8gb3B0LnNldC5iaW5kKHB1YmxpY1RoaXMpIDogISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/ICgpID0+IHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCBwcm9wZXJ0eSBcIiR7a2V5fVwiIGlzIHJlYWRvbmx5LmBcbiAgICAgICAgKTtcbiAgICAgIH0gOiBOT09QO1xuICAgICAgY29uc3QgYyA9IGNvbXB1dGVkKHtcbiAgICAgICAgZ2V0LFxuICAgICAgICBzZXRcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiAoKSA9PiBjLnZhbHVlLFxuICAgICAgICBzZXQ6ICh2KSA9PiBjLnZhbHVlID0gdlxuICAgICAgfSk7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJDb21wdXRlZFwiIC8qIENPTVBVVEVEICovLCBrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAod2F0Y2hPcHRpb25zKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gd2F0Y2hPcHRpb25zKSB7XG4gICAgICBjcmVhdGVXYXRjaGVyKHdhdGNoT3B0aW9uc1trZXldLCBjdHgsIHB1YmxpY1RoaXMsIGtleSk7XG4gICAgfVxuICB9XG4gIGlmIChwcm92aWRlT3B0aW9ucykge1xuICAgIGNvbnN0IHByb3ZpZGVzID0gaXNGdW5jdGlvbihwcm92aWRlT3B0aW9ucykgPyBwcm92aWRlT3B0aW9ucy5jYWxsKHB1YmxpY1RoaXMpIDogcHJvdmlkZU9wdGlvbnM7XG4gICAgUmVmbGVjdC5vd25LZXlzKHByb3ZpZGVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHByb3ZpZGUoa2V5LCBwcm92aWRlc1trZXldKTtcbiAgICB9KTtcbiAgfVxuICBpZiAoY3JlYXRlZCkge1xuICAgIGNhbGxIb29rKGNyZWF0ZWQsIGluc3RhbmNlLCBcImNcIik7XG4gIH1cbiAgZnVuY3Rpb24gcmVnaXN0ZXJMaWZlY3ljbGVIb29rKHJlZ2lzdGVyLCBob29rKSB7XG4gICAgaWYgKGlzQXJyYXkoaG9vaykpIHtcbiAgICAgIGhvb2suZm9yRWFjaCgoX2hvb2spID0+IHJlZ2lzdGVyKF9ob29rLmJpbmQocHVibGljVGhpcykpKTtcbiAgICB9IGVsc2UgaWYgKGhvb2spIHtcbiAgICAgIHJlZ2lzdGVyKGhvb2suYmluZChwdWJsaWNUaGlzKSk7XG4gICAgfVxuICB9XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZU1vdW50LCBiZWZvcmVNb3VudCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbk1vdW50ZWQsIG1vdW50ZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVVcGRhdGUsIGJlZm9yZVVwZGF0ZSk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblVwZGF0ZWQsIHVwZGF0ZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25BY3RpdmF0ZWQsIGFjdGl2YXRlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkRlYWN0aXZhdGVkLCBkZWFjdGl2YXRlZCk7XG4gIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkVycm9yQ2FwdHVyZWQsIGVycm9yQ2FwdHVyZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmFja2VkLCByZW5kZXJUcmFja2VkKTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uUmVuZGVyVHJpZ2dlcmVkLCByZW5kZXJUcmlnZ2VyZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25CZWZvcmVVbm1vdW50LCBiZWZvcmVVbm1vdW50KTtcbiAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVW5tb3VudGVkLCB1bm1vdW50ZWQpO1xuICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25TZXJ2ZXJQcmVmZXRjaCwgc2VydmVyUHJlZmV0Y2gpO1xuICBpZiAoaXNBcnJheShleHBvc2UpKSB7XG4gICAgaWYgKGV4cG9zZS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGV4cG9zZWQgPSBpbnN0YW5jZS5leHBvc2VkIHx8IChpbnN0YW5jZS5leHBvc2VkID0ge30pO1xuICAgICAgZXhwb3NlLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3NlZCwga2V5LCB7XG4gICAgICAgICAgZ2V0OiAoKSA9PiBwdWJsaWNUaGlzW2tleV0sXG4gICAgICAgICAgc2V0OiAodmFsKSA9PiBwdWJsaWNUaGlzW2tleV0gPSB2YWxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCFpbnN0YW5jZS5leHBvc2VkKSB7XG4gICAgICBpbnN0YW5jZS5leHBvc2VkID0ge307XG4gICAgfVxuICB9XG4gIGlmIChyZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QKSB7XG4gICAgaW5zdGFuY2UucmVuZGVyID0gcmVuZGVyO1xuICB9XG4gIGlmIChpbmhlcml0QXR0cnMgIT0gbnVsbCkge1xuICAgIGluc3RhbmNlLmluaGVyaXRBdHRycyA9IGluaGVyaXRBdHRycztcbiAgfVxuICBpZiAoY29tcG9uZW50cykgaW5zdGFuY2UuY29tcG9uZW50cyA9IGNvbXBvbmVudHM7XG4gIGlmIChkaXJlY3RpdmVzKSBpbnN0YW5jZS5kaXJlY3RpdmVzID0gZGlyZWN0aXZlcztcbiAgaWYgKHNlcnZlclByZWZldGNoKSB7XG4gICAgbWFya0FzeW5jQm91bmRhcnkoaW5zdGFuY2UpO1xuICB9XG59XG5mdW5jdGlvbiByZXNvbHZlSW5qZWN0aW9ucyhpbmplY3RPcHRpb25zLCBjdHgsIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyA9IE5PT1ApIHtcbiAgaWYgKGlzQXJyYXkoaW5qZWN0T3B0aW9ucykpIHtcbiAgICBpbmplY3RPcHRpb25zID0gbm9ybWFsaXplSW5qZWN0KGluamVjdE9wdGlvbnMpO1xuICB9XG4gIGZvciAoY29uc3Qga2V5IGluIGluamVjdE9wdGlvbnMpIHtcbiAgICBjb25zdCBvcHQgPSBpbmplY3RPcHRpb25zW2tleV07XG4gICAgbGV0IGluamVjdGVkO1xuICAgIGlmIChpc09iamVjdChvcHQpKSB7XG4gICAgICBpZiAoXCJkZWZhdWx0XCIgaW4gb3B0KSB7XG4gICAgICAgIGluamVjdGVkID0gaW5qZWN0KFxuICAgICAgICAgIG9wdC5mcm9tIHx8IGtleSxcbiAgICAgICAgICBvcHQuZGVmYXVsdCxcbiAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmplY3RlZCA9IGluamVjdChvcHQuZnJvbSB8fCBrZXkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbmplY3RlZCA9IGluamVjdChvcHQpO1xuICAgIH1cbiAgICBpZiAoaXNSZWYoaW5qZWN0ZWQpKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGluamVjdGVkLnZhbHVlLFxuICAgICAgICBzZXQ6ICh2KSA9PiBpbmplY3RlZC52YWx1ZSA9IHZcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHhba2V5XSA9IGluamVjdGVkO1xuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiSW5qZWN0XCIgLyogSU5KRUNUICovLCBrZXkpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gY2FsbEhvb2soaG9vaywgaW5zdGFuY2UsIHR5cGUpIHtcbiAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgaXNBcnJheShob29rKSA/IGhvb2subWFwKChoKSA9PiBoLmJpbmQoaW5zdGFuY2UucHJveHkpKSA6IGhvb2suYmluZChpbnN0YW5jZS5wcm94eSksXG4gICAgaW5zdGFuY2UsXG4gICAgdHlwZVxuICApO1xufVxuZnVuY3Rpb24gY3JlYXRlV2F0Y2hlcihyYXcsIGN0eCwgcHVibGljVGhpcywga2V5KSB7XG4gIGxldCBnZXR0ZXIgPSBrZXkuaW5jbHVkZXMoXCIuXCIpID8gY3JlYXRlUGF0aEdldHRlcihwdWJsaWNUaGlzLCBrZXkpIDogKCkgPT4gcHVibGljVGhpc1trZXldO1xuICBpZiAoaXNTdHJpbmcocmF3KSkge1xuICAgIGNvbnN0IGhhbmRsZXIgPSBjdHhbcmF3XTtcbiAgICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgICAge1xuICAgICAgICB3YXRjaChnZXR0ZXIsIGhhbmRsZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKGBJbnZhbGlkIHdhdGNoIGhhbmRsZXIgc3BlY2lmaWVkIGJ5IGtleSBcIiR7cmF3fVwiYCwgaGFuZGxlcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24ocmF3KSkge1xuICAgIHtcbiAgICAgIHdhdGNoKGdldHRlciwgcmF3LmJpbmQocHVibGljVGhpcykpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChyYXcpKSB7XG4gICAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgICAgcmF3LmZvckVhY2goKHIpID0+IGNyZWF0ZVdhdGNoZXIociwgY3R4LCBwdWJsaWNUaGlzLCBrZXkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaGFuZGxlciA9IGlzRnVuY3Rpb24ocmF3LmhhbmRsZXIpID8gcmF3LmhhbmRsZXIuYmluZChwdWJsaWNUaGlzKSA6IGN0eFtyYXcuaGFuZGxlcl07XG4gICAgICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgICAgICB3YXRjaChnZXR0ZXIsIGhhbmRsZXIsIHJhdyk7XG4gICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgd2FybiQxKGBJbnZhbGlkIHdhdGNoIGhhbmRsZXIgc3BlY2lmaWVkIGJ5IGtleSBcIiR7cmF3LmhhbmRsZXJ9XCJgLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShgSW52YWxpZCB3YXRjaCBvcHRpb246IFwiJHtrZXl9XCJgLCByYXcpO1xuICB9XG59XG5mdW5jdGlvbiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkge1xuICBjb25zdCBiYXNlID0gaW5zdGFuY2UudHlwZTtcbiAgY29uc3QgeyBtaXhpbnMsIGV4dGVuZHM6IGV4dGVuZHNPcHRpb25zIH0gPSBiYXNlO1xuICBjb25zdCB7XG4gICAgbWl4aW5zOiBnbG9iYWxNaXhpbnMsXG4gICAgb3B0aW9uc0NhY2hlOiBjYWNoZSxcbiAgICBjb25maWc6IHsgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzIH1cbiAgfSA9IGluc3RhbmNlLmFwcENvbnRleHQ7XG4gIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChiYXNlKTtcbiAgbGV0IHJlc29sdmVkO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgcmVzb2x2ZWQgPSBjYWNoZWQ7XG4gIH0gZWxzZSBpZiAoIWdsb2JhbE1peGlucy5sZW5ndGggJiYgIW1peGlucyAmJiAhZXh0ZW5kc09wdGlvbnMpIHtcbiAgICB7XG4gICAgICByZXNvbHZlZCA9IGJhc2U7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlc29sdmVkID0ge307XG4gICAgaWYgKGdsb2JhbE1peGlucy5sZW5ndGgpIHtcbiAgICAgIGdsb2JhbE1peGlucy5mb3JFYWNoKFxuICAgICAgICAobSkgPT4gbWVyZ2VPcHRpb25zKHJlc29sdmVkLCBtLCBvcHRpb25NZXJnZVN0cmF0ZWdpZXMsIHRydWUpXG4gICAgICApO1xuICAgIH1cbiAgICBtZXJnZU9wdGlvbnMocmVzb2x2ZWQsIGJhc2UsIG9wdGlvbk1lcmdlU3RyYXRlZ2llcyk7XG4gIH1cbiAgaWYgKGlzT2JqZWN0KGJhc2UpKSB7XG4gICAgY2FjaGUuc2V0KGJhc2UsIHJlc29sdmVkKTtcbiAgfVxuICByZXR1cm4gcmVzb2x2ZWQ7XG59XG5mdW5jdGlvbiBtZXJnZU9wdGlvbnModG8sIGZyb20sIHN0cmF0cywgYXNNaXhpbiA9IGZhbHNlKSB7XG4gIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gZnJvbTtcbiAgaWYgKGV4dGVuZHNPcHRpb25zKSB7XG4gICAgbWVyZ2VPcHRpb25zKHRvLCBleHRlbmRzT3B0aW9ucywgc3RyYXRzLCB0cnVlKTtcbiAgfVxuICBpZiAobWl4aW5zKSB7XG4gICAgbWl4aW5zLmZvckVhY2goXG4gICAgICAobSkgPT4gbWVyZ2VPcHRpb25zKHRvLCBtLCBzdHJhdHMsIHRydWUpXG4gICAgKTtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XG4gICAgaWYgKGFzTWl4aW4gJiYga2V5ID09PSBcImV4cG9zZVwiKSB7XG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4kMShcbiAgICAgICAgYFwiZXhwb3NlXCIgb3B0aW9uIGlzIGlnbm9yZWQgd2hlbiBkZWNsYXJlZCBpbiBtaXhpbnMgb3IgZXh0ZW5kcy4gSXQgc2hvdWxkIG9ubHkgYmUgZGVjbGFyZWQgaW4gdGhlIGJhc2UgY29tcG9uZW50IGl0c2VsZi5gXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzdHJhdCA9IGludGVybmFsT3B0aW9uTWVyZ2VTdHJhdHNba2V5XSB8fCBzdHJhdHMgJiYgc3RyYXRzW2tleV07XG4gICAgICB0b1trZXldID0gc3RyYXQgPyBzdHJhdCh0b1trZXldLCBmcm9tW2tleV0pIDogZnJvbVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG87XG59XG5jb25zdCBpbnRlcm5hbE9wdGlvbk1lcmdlU3RyYXRzID0ge1xuICBkYXRhOiBtZXJnZURhdGFGbixcbiAgcHJvcHM6IG1lcmdlRW1pdHNPclByb3BzT3B0aW9ucyxcbiAgZW1pdHM6IG1lcmdlRW1pdHNPclByb3BzT3B0aW9ucyxcbiAgLy8gb2JqZWN0c1xuICBtZXRob2RzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gIGNvbXB1dGVkOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gIC8vIGxpZmVjeWNsZVxuICBiZWZvcmVDcmVhdGU6IG1lcmdlQXNBcnJheSxcbiAgY3JlYXRlZDogbWVyZ2VBc0FycmF5LFxuICBiZWZvcmVNb3VudDogbWVyZ2VBc0FycmF5LFxuICBtb3VudGVkOiBtZXJnZUFzQXJyYXksXG4gIGJlZm9yZVVwZGF0ZTogbWVyZ2VBc0FycmF5LFxuICB1cGRhdGVkOiBtZXJnZUFzQXJyYXksXG4gIGJlZm9yZURlc3Ryb3k6IG1lcmdlQXNBcnJheSxcbiAgYmVmb3JlVW5tb3VudDogbWVyZ2VBc0FycmF5LFxuICBkZXN0cm95ZWQ6IG1lcmdlQXNBcnJheSxcbiAgdW5tb3VudGVkOiBtZXJnZUFzQXJyYXksXG4gIGFjdGl2YXRlZDogbWVyZ2VBc0FycmF5LFxuICBkZWFjdGl2YXRlZDogbWVyZ2VBc0FycmF5LFxuICBlcnJvckNhcHR1cmVkOiBtZXJnZUFzQXJyYXksXG4gIHNlcnZlclByZWZldGNoOiBtZXJnZUFzQXJyYXksXG4gIC8vIGFzc2V0c1xuICBjb21wb25lbnRzOiBtZXJnZU9iamVjdE9wdGlvbnMsXG4gIGRpcmVjdGl2ZXM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcbiAgLy8gd2F0Y2hcbiAgd2F0Y2g6IG1lcmdlV2F0Y2hPcHRpb25zLFxuICAvLyBwcm92aWRlIC8gaW5qZWN0XG4gIHByb3ZpZGU6IG1lcmdlRGF0YUZuLFxuICBpbmplY3Q6IG1lcmdlSW5qZWN0XG59O1xuZnVuY3Rpb24gbWVyZ2VEYXRhRm4odG8sIGZyb20pIHtcbiAgaWYgKCFmcm9tKSB7XG4gICAgcmV0dXJuIHRvO1xuICB9XG4gIGlmICghdG8pIHtcbiAgICByZXR1cm4gZnJvbTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xuICAgIHJldHVybiAoZXh0ZW5kKShcbiAgICAgIGlzRnVuY3Rpb24odG8pID8gdG8uY2FsbCh0aGlzLCB0aGlzKSA6IHRvLFxuICAgICAgaXNGdW5jdGlvbihmcm9tKSA/IGZyb20uY2FsbCh0aGlzLCB0aGlzKSA6IGZyb21cbiAgICApO1xuICB9O1xufVxuZnVuY3Rpb24gbWVyZ2VJbmplY3QodG8sIGZyb20pIHtcbiAgcmV0dXJuIG1lcmdlT2JqZWN0T3B0aW9ucyhub3JtYWxpemVJbmplY3QodG8pLCBub3JtYWxpemVJbmplY3QoZnJvbSkpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplSW5qZWN0KHJhdykge1xuICBpZiAoaXNBcnJheShyYXcpKSB7XG4gICAgY29uc3QgcmVzID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc1tyYXdbaV1dID0gcmF3W2ldO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIHJldHVybiByYXc7XG59XG5mdW5jdGlvbiBtZXJnZUFzQXJyYXkodG8sIGZyb20pIHtcbiAgcmV0dXJuIHRvID8gWy4uLm5ldyBTZXQoW10uY29uY2F0KHRvLCBmcm9tKSldIDogZnJvbTtcbn1cbmZ1bmN0aW9uIG1lcmdlT2JqZWN0T3B0aW9ucyh0bywgZnJvbSkge1xuICByZXR1cm4gdG8gPyBleHRlbmQoLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCksIHRvLCBmcm9tKSA6IGZyb207XG59XG5mdW5jdGlvbiBtZXJnZUVtaXRzT3JQcm9wc09wdGlvbnModG8sIGZyb20pIHtcbiAgaWYgKHRvKSB7XG4gICAgaWYgKGlzQXJyYXkodG8pICYmIGlzQXJyYXkoZnJvbSkpIHtcbiAgICAgIHJldHVybiBbLi4uLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWy4uLnRvLCAuLi5mcm9tXSldO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW5kKFxuICAgICAgLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBub3JtYWxpemVQcm9wc09yRW1pdHModG8pLFxuICAgICAgbm9ybWFsaXplUHJvcHNPckVtaXRzKGZyb20gIT0gbnVsbCA/IGZyb20gOiB7fSlcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmcm9tO1xuICB9XG59XG5mdW5jdGlvbiBtZXJnZVdhdGNoT3B0aW9ucyh0bywgZnJvbSkge1xuICBpZiAoIXRvKSByZXR1cm4gZnJvbTtcbiAgaWYgKCFmcm9tKSByZXR1cm4gdG87XG4gIGNvbnN0IG1lcmdlZCA9IGV4dGVuZCgvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSwgdG8pO1xuICBmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XG4gICAgbWVyZ2VkW2tleV0gPSBtZXJnZUFzQXJyYXkodG9ba2V5XSwgZnJvbVtrZXldKTtcbiAgfVxuICByZXR1cm4gbWVyZ2VkO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcHBDb250ZXh0KCkge1xuICByZXR1cm4ge1xuICAgIGFwcDogbnVsbCxcbiAgICBjb25maWc6IHtcbiAgICAgIGlzTmF0aXZlVGFnOiBOTyxcbiAgICAgIHBlcmZvcm1hbmNlOiBmYWxzZSxcbiAgICAgIGdsb2JhbFByb3BlcnRpZXM6IHt9LFxuICAgICAgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzOiB7fSxcbiAgICAgIGVycm9ySGFuZGxlcjogdm9pZCAwLFxuICAgICAgd2FybkhhbmRsZXI6IHZvaWQgMCxcbiAgICAgIGNvbXBpbGVyT3B0aW9uczoge31cbiAgICB9LFxuICAgIG1peGluczogW10sXG4gICAgY29tcG9uZW50czoge30sXG4gICAgZGlyZWN0aXZlczoge30sXG4gICAgcHJvdmlkZXM6IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgIG9wdGlvbnNDYWNoZTogLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksXG4gICAgcHJvcHNDYWNoZTogLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksXG4gICAgZW1pdHNDYWNoZTogLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKClcbiAgfTtcbn1cbmxldCB1aWQkMSA9IDA7XG5mdW5jdGlvbiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKSB7XG4gIHJldHVybiBmdW5jdGlvbiBjcmVhdGVBcHAocm9vdENvbXBvbmVudCwgcm9vdFByb3BzID0gbnVsbCkge1xuICAgIGlmICghaXNGdW5jdGlvbihyb290Q29tcG9uZW50KSkge1xuICAgICAgcm9vdENvbXBvbmVudCA9IGV4dGVuZCh7fSwgcm9vdENvbXBvbmVudCk7XG4gICAgfVxuICAgIGlmIChyb290UHJvcHMgIT0gbnVsbCAmJiAhaXNPYmplY3Qocm9vdFByb3BzKSkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoYHJvb3QgcHJvcHMgcGFzc2VkIHRvIGFwcC5tb3VudCgpIG11c3QgYmUgYW4gb2JqZWN0LmApO1xuICAgICAgcm9vdFByb3BzID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZUFwcENvbnRleHQoKTtcbiAgICBjb25zdCBpbnN0YWxsZWRQbHVnaW5zID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCk7XG4gICAgY29uc3QgcGx1Z2luQ2xlYW51cEZucyA9IFtdO1xuICAgIGxldCBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICBjb25zdCBhcHAgPSBjb250ZXh0LmFwcCA9IHtcbiAgICAgIF91aWQ6IHVpZCQxKyssXG4gICAgICBfY29tcG9uZW50OiByb290Q29tcG9uZW50LFxuICAgICAgX3Byb3BzOiByb290UHJvcHMsXG4gICAgICBfY29udGFpbmVyOiBudWxsLFxuICAgICAgX2NvbnRleHQ6IGNvbnRleHQsXG4gICAgICBfaW5zdGFuY2U6IG51bGwsXG4gICAgICB2ZXJzaW9uLFxuICAgICAgZ2V0IGNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY29uZmlnO1xuICAgICAgfSxcbiAgICAgIHNldCBjb25maWcodikge1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBhcHAuY29uZmlnIGNhbm5vdCBiZSByZXBsYWNlZC4gTW9kaWZ5IGluZGl2aWR1YWwgb3B0aW9ucyBpbnN0ZWFkLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXNlKHBsdWdpbiwgLi4ub3B0aW9ucykge1xuICAgICAgICBpZiAoaW5zdGFsbGVkUGx1Z2lucy5oYXMocGx1Z2luKSkge1xuICAgICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybiQxKGBQbHVnaW4gaGFzIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRhcmdldCBhcHAuYCk7XG4gICAgICAgIH0gZWxzZSBpZiAocGx1Z2luICYmIGlzRnVuY3Rpb24ocGx1Z2luLmluc3RhbGwpKSB7XG4gICAgICAgICAgaW5zdGFsbGVkUGx1Z2lucy5hZGQocGx1Z2luKTtcbiAgICAgICAgICBwbHVnaW4uaW5zdGFsbChhcHAsIC4uLm9wdGlvbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24ocGx1Z2luKSkge1xuICAgICAgICAgIGluc3RhbGxlZFBsdWdpbnMuYWRkKHBsdWdpbik7XG4gICAgICAgICAgcGx1Z2luKGFwcCwgLi4ub3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBBIHBsdWdpbiBtdXN0IGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdCB3aXRoIGFuIFwiaW5zdGFsbFwiIGZ1bmN0aW9uLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcHA7XG4gICAgICB9LFxuICAgICAgbWl4aW4obWl4aW4pIHtcbiAgICAgICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18pIHtcbiAgICAgICAgICBpZiAoIWNvbnRleHQubWl4aW5zLmluY2x1ZGVzKG1peGluKSkge1xuICAgICAgICAgICAgY29udGV4dC5taXhpbnMucHVzaChtaXhpbik7XG4gICAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICAgIFwiTWl4aW4gaGFzIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRhcmdldCBhcHBcIiArIChtaXhpbi5uYW1lID8gYDogJHttaXhpbi5uYW1lfWAgOiBcIlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcIk1peGlucyBhcmUgb25seSBhdmFpbGFibGUgaW4gYnVpbGRzIHN1cHBvcnRpbmcgT3B0aW9ucyBBUElcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgIH0sXG4gICAgICBjb21wb25lbnQobmFtZSwgY29tcG9uZW50KSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUsIGNvbnRleHQuY29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbXBvbmVudHNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY29udGV4dC5jb21wb25lbnRzW25hbWVdKSB7XG4gICAgICAgICAgd2FybiQxKGBDb21wb25lbnQgXCIke25hbWV9XCIgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIGluIHRhcmdldCBhcHAuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5jb21wb25lbnRzW25hbWVdID0gY29tcG9uZW50O1xuICAgICAgICByZXR1cm4gYXBwO1xuICAgICAgfSxcbiAgICAgIGRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmUpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkaXJlY3RpdmUpIHtcbiAgICAgICAgICByZXR1cm4gY29udGV4dC5kaXJlY3RpdmVzW25hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXSkge1xuICAgICAgICAgIHdhcm4kMShgRGlyZWN0aXZlIFwiJHtuYW1lfVwiIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCBpbiB0YXJnZXQgYXBwLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXSA9IGRpcmVjdGl2ZTtcbiAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgIH0sXG4gICAgICBtb3VudChyb290Q29udGFpbmVyLCBpc0h5ZHJhdGUsIG5hbWVzcGFjZSkge1xuICAgICAgICBpZiAoIWlzTW91bnRlZCkge1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHJvb3RDb250YWluZXIuX192dWVfYXBwX18pIHtcbiAgICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgICAgYFRoZXJlIGlzIGFscmVhZHkgYW4gYXBwIGluc3RhbmNlIG1vdW50ZWQgb24gdGhlIGhvc3QgY29udGFpbmVyLlxuIElmIHlvdSB3YW50IHRvIG1vdW50IGFub3RoZXIgYXBwIG9uIHRoZSBzYW1lIGhvc3QgY29udGFpbmVyLCB5b3UgbmVlZCB0byB1bm1vdW50IHRoZSBwcmV2aW91cyBhcHAgYnkgY2FsbGluZyBcXGBhcHAudW5tb3VudCgpXFxgIGZpcnN0LmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHZub2RlID0gYXBwLl9jZVZOb2RlIHx8IGNyZWF0ZVZOb2RlKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcyk7XG4gICAgICAgICAgdm5vZGUuYXBwQ29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgaWYgKG5hbWVzcGFjZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgbmFtZXNwYWNlID0gXCJzdmdcIjtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5hbWVzcGFjZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIG5hbWVzcGFjZSA9IHZvaWQgMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIGNvbnRleHQucmVsb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICByZW5kZXIoXG4gICAgICAgICAgICAgICAgY2xvbmVWTm9kZSh2bm9kZSksXG4gICAgICAgICAgICAgICAgcm9vdENvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBuYW1lc3BhY2VcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc0h5ZHJhdGUgJiYgaHlkcmF0ZSkge1xuICAgICAgICAgICAgaHlkcmF0ZSh2bm9kZSwgcm9vdENvbnRhaW5lcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlcih2bm9kZSwgcm9vdENvbnRhaW5lciwgbmFtZXNwYWNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICBhcHAuX2NvbnRhaW5lciA9IHJvb3RDb250YWluZXI7XG4gICAgICAgICAgcm9vdENvbnRhaW5lci5fX3Z1ZV9hcHBfXyA9IGFwcDtcbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICAgIGFwcC5faW5zdGFuY2UgPSB2bm9kZS5jb21wb25lbnQ7XG4gICAgICAgICAgICBkZXZ0b29sc0luaXRBcHAoYXBwLCB2ZXJzaW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudFB1YmxpY0luc3RhbmNlKHZub2RlLmNvbXBvbmVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBBcHAgaGFzIGFscmVhZHkgYmVlbiBtb3VudGVkLlxuSWYgeW91IHdhbnQgdG8gcmVtb3VudCB0aGUgc2FtZSBhcHAsIG1vdmUgeW91ciBhcHAgY3JlYXRpb24gbG9naWMgaW50byBhIGZhY3RvcnkgZnVuY3Rpb24gYW5kIGNyZWF0ZSBmcmVzaCBhcHAgaW5zdGFuY2VzIGZvciBlYWNoIG1vdW50IC0gZS5nLiBcXGBjb25zdCBjcmVhdGVNeUFwcCA9ICgpID0+IGNyZWF0ZUFwcChBcHApXFxgYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvblVubW91bnQoY2xlYW51cEZuKSB7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHR5cGVvZiBjbGVhbnVwRm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBFeHBlY3RlZCBmdW5jdGlvbiBhcyBmaXJzdCBhcmd1bWVudCB0byBhcHAub25Vbm1vdW50KCksIGJ1dCBnb3QgJHt0eXBlb2YgY2xlYW51cEZufWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbkNsZWFudXBGbnMucHVzaChjbGVhbnVwRm4pO1xuICAgICAgfSxcbiAgICAgIHVubW91bnQoKSB7XG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhcbiAgICAgICAgICAgIHBsdWdpbkNsZWFudXBGbnMsXG4gICAgICAgICAgICBhcHAuX2luc3RhbmNlLFxuICAgICAgICAgICAgMTZcbiAgICAgICAgICApO1xuICAgICAgICAgIHJlbmRlcihudWxsLCBhcHAuX2NvbnRhaW5lcik7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgIGRldnRvb2xzVW5tb3VudEFwcChhcHApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWxldGUgYXBwLl9jb250YWluZXIuX192dWVfYXBwX187XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShgQ2Fubm90IHVubW91bnQgYW4gYXBwIHRoYXQgaXMgbm90IG1vdW50ZWQuYCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm92aWRlKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYga2V5IGluIGNvbnRleHQucHJvdmlkZXMpIHtcbiAgICAgICAgICB3YXJuJDEoXG4gICAgICAgICAgICBgQXBwIGFscmVhZHkgcHJvdmlkZXMgcHJvcGVydHkgd2l0aCBrZXkgXCIke1N0cmluZyhrZXkpfVwiLiBJdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggdGhlIG5ldyB2YWx1ZS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LnByb3ZpZGVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIGFwcDtcbiAgICAgIH0sXG4gICAgICBydW5XaXRoQ29udGV4dChmbikge1xuICAgICAgICBjb25zdCBsYXN0QXBwID0gY3VycmVudEFwcDtcbiAgICAgICAgY3VycmVudEFwcCA9IGFwcDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBjdXJyZW50QXBwID0gbGFzdEFwcDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGFwcDtcbiAgfTtcbn1cbmxldCBjdXJyZW50QXBwID0gbnVsbDtcblxuZnVuY3Rpb24gcHJvdmlkZShrZXksIHZhbHVlKSB7XG4gIGlmICghY3VycmVudEluc3RhbmNlKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHdhcm4kMShgcHJvdmlkZSgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHNldHVwKCkuYCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBwcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wcm92aWRlcztcbiAgICBjb25zdCBwYXJlbnRQcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wYXJlbnQgJiYgY3VycmVudEluc3RhbmNlLnBhcmVudC5wcm92aWRlcztcbiAgICBpZiAocGFyZW50UHJvdmlkZXMgPT09IHByb3ZpZGVzKSB7XG4gICAgICBwcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wcm92aWRlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50UHJvdmlkZXMpO1xuICAgIH1cbiAgICBwcm92aWRlc1trZXldID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIGluamVjdChrZXksIGRlZmF1bHRWYWx1ZSwgdHJlYXREZWZhdWx0QXNGYWN0b3J5ID0gZmFsc2UpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xuICBpZiAoaW5zdGFuY2UgfHwgY3VycmVudEFwcCkge1xuICAgIGNvbnN0IHByb3ZpZGVzID0gY3VycmVudEFwcCA/IGN1cnJlbnRBcHAuX2NvbnRleHQucHJvdmlkZXMgOiBpbnN0YW5jZSA/IGluc3RhbmNlLnBhcmVudCA9PSBudWxsID8gaW5zdGFuY2Uudm5vZGUuYXBwQ29udGV4dCAmJiBpbnN0YW5jZS52bm9kZS5hcHBDb250ZXh0LnByb3ZpZGVzIDogaW5zdGFuY2UucGFyZW50LnByb3ZpZGVzIDogdm9pZCAwO1xuICAgIGlmIChwcm92aWRlcyAmJiBrZXkgaW4gcHJvdmlkZXMpIHtcbiAgICAgIHJldHVybiBwcm92aWRlc1trZXldO1xuICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiB0cmVhdERlZmF1bHRBc0ZhY3RvcnkgJiYgaXNGdW5jdGlvbihkZWZhdWx0VmFsdWUpID8gZGVmYXVsdFZhbHVlLmNhbGwoaW5zdGFuY2UgJiYgaW5zdGFuY2UucHJveHkpIDogZGVmYXVsdFZhbHVlO1xuICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgd2FybiQxKGBpbmplY3Rpb24gXCIke1N0cmluZyhrZXkpfVwiIG5vdCBmb3VuZC5gKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHdhcm4kMShgaW5qZWN0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgc2V0dXAoKSBvciBmdW5jdGlvbmFsIGNvbXBvbmVudHMuYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhc0luamVjdGlvbkNvbnRleHQoKSB7XG4gIHJldHVybiAhIShjdXJyZW50SW5zdGFuY2UgfHwgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIHx8IGN1cnJlbnRBcHApO1xufVxuXG5jb25zdCBpbnRlcm5hbE9iamVjdFByb3RvID0ge307XG5jb25zdCBjcmVhdGVJbnRlcm5hbE9iamVjdCA9ICgpID0+IE9iamVjdC5jcmVhdGUoaW50ZXJuYWxPYmplY3RQcm90byk7XG5jb25zdCBpc0ludGVybmFsT2JqZWN0ID0gKG9iaikgPT4gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgPT09IGludGVybmFsT2JqZWN0UHJvdG87XG5cbmZ1bmN0aW9uIGluaXRQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIGlzU3RhdGVmdWwsIGlzU1NSID0gZmFsc2UpIHtcbiAgY29uc3QgcHJvcHMgPSB7fTtcbiAgY29uc3QgYXR0cnMgPSBjcmVhdGVJbnRlcm5hbE9iamVjdCgpO1xuICBpbnN0YW5jZS5wcm9wc0RlZmF1bHRzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycyk7XG4gIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkge1xuICAgIGlmICghKGtleSBpbiBwcm9wcykpIHtcbiAgICAgIHByb3BzW2tleV0gPSB2b2lkIDA7XG4gICAgfVxuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcbiAgfVxuICBpZiAoaXNTdGF0ZWZ1bCkge1xuICAgIGluc3RhbmNlLnByb3BzID0gaXNTU1IgPyBwcm9wcyA6IHNoYWxsb3dSZWFjdGl2ZShwcm9wcyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFpbnN0YW5jZS50eXBlLnByb3BzKSB7XG4gICAgICBpbnN0YW5jZS5wcm9wcyA9IGF0dHJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZS5wcm9wcyA9IHByb3BzO1xuICAgIH1cbiAgfVxuICBpbnN0YW5jZS5hdHRycyA9IGF0dHJzO1xufVxuZnVuY3Rpb24gaXNJbkhtckNvbnRleHQoaW5zdGFuY2UpIHtcbiAgd2hpbGUgKGluc3RhbmNlKSB7XG4gICAgaWYgKGluc3RhbmNlLnR5cGUuX19obXJJZCkgcmV0dXJuIHRydWU7XG4gICAgaW5zdGFuY2UgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gIH1cbn1cbmZ1bmN0aW9uIHVwZGF0ZVByb3BzKGluc3RhbmNlLCByYXdQcm9wcywgcmF3UHJldlByb3BzLCBvcHRpbWl6ZWQpIHtcbiAgY29uc3Qge1xuICAgIHByb3BzLFxuICAgIGF0dHJzLFxuICAgIHZub2RlOiB7IHBhdGNoRmxhZyB9XG4gIH0gPSBpbnN0YW5jZTtcbiAgY29uc3QgcmF3Q3VycmVudFByb3BzID0gdG9SYXcocHJvcHMpO1xuICBjb25zdCBbb3B0aW9uc10gPSBpbnN0YW5jZS5wcm9wc09wdGlvbnM7XG4gIGxldCBoYXNBdHRyc0NoYW5nZWQgPSBmYWxzZTtcbiAgaWYgKFxuICAgIC8vIGFsd2F5cyBmb3JjZSBmdWxsIGRpZmYgaW4gZGV2XG4gICAgLy8gLSAjMTk0MiBpZiBobXIgaXMgZW5hYmxlZCB3aXRoIHNmYyBjb21wb25lbnRcbiAgICAvLyAtIHZpdGUjODcyIG5vbi1zZmMgY29tcG9uZW50IHVzZWQgYnkgc2ZjIGNvbXBvbmVudFxuICAgICEoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0luSG1yQ29udGV4dChpbnN0YW5jZSkpICYmIChvcHRpbWl6ZWQgfHwgcGF0Y2hGbGFnID4gMCkgJiYgIShwYXRjaEZsYWcgJiAxNilcbiAgKSB7XG4gICAgaWYgKHBhdGNoRmxhZyAmIDgpIHtcbiAgICAgIGNvbnN0IHByb3BzVG9VcGRhdGUgPSBpbnN0YW5jZS52bm9kZS5keW5hbWljUHJvcHM7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzVG9VcGRhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XG4gICAgICAgIGlmIChpc0VtaXRMaXN0ZW5lcihpbnN0YW5jZS5lbWl0c09wdGlvbnMsIGtleSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHJhd1Byb3BzW2tleV07XG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgaWYgKGhhc093bihhdHRycywga2V5KSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBhdHRyc1trZXldKSB7XG4gICAgICAgICAgICAgIGF0dHJzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2FtZWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICAgICAgICAgIHByb3BzW2NhbWVsaXplZEtleV0gPSByZXNvbHZlUHJvcFZhbHVlKFxuICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICByYXdDdXJyZW50UHJvcHMsXG4gICAgICAgICAgICAgIGNhbWVsaXplZEtleSxcbiAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHZhbHVlICE9PSBhdHRyc1trZXldKSB7XG4gICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoc2V0RnVsbFByb3BzKGluc3RhbmNlLCByYXdQcm9wcywgcHJvcHMsIGF0dHJzKSkge1xuICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IGtlYmFiS2V5O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHJhd0N1cnJlbnRQcm9wcykge1xuICAgICAgaWYgKCFyYXdQcm9wcyB8fCAvLyBmb3IgY2FtZWxDYXNlXG4gICAgICAhaGFzT3duKHJhd1Byb3BzLCBrZXkpICYmIC8vIGl0J3MgcG9zc2libGUgdGhlIG9yaWdpbmFsIHByb3BzIHdhcyBwYXNzZWQgaW4gYXMga2ViYWItY2FzZVxuICAgICAgLy8gYW5kIGNvbnZlcnRlZCB0byBjYW1lbENhc2UgKCM5NTUpXG4gICAgICAoKGtlYmFiS2V5ID0gaHlwaGVuYXRlKGtleSkpID09PSBrZXkgfHwgIWhhc093bihyYXdQcm9wcywga2ViYWJLZXkpKSkge1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgIGlmIChyYXdQcmV2UHJvcHMgJiYgLy8gZm9yIGNhbWVsQ2FzZVxuICAgICAgICAgIChyYXdQcmV2UHJvcHNba2V5XSAhPT0gdm9pZCAwIHx8IC8vIGZvciBrZWJhYi1jYXNlXG4gICAgICAgICAgcmF3UHJldlByb3BzW2tlYmFiS2V5XSAhPT0gdm9pZCAwKSkge1xuICAgICAgICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUoXG4gICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgIHJhd0N1cnJlbnRQcm9wcyxcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICB2b2lkIDAsXG4gICAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgcHJvcHNba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYXR0cnMgIT09IHJhd0N1cnJlbnRQcm9wcykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgaWYgKCFyYXdQcm9wcyB8fCAhaGFzT3duKHJhd1Byb3BzLCBrZXkpICYmIHRydWUpIHtcbiAgICAgICAgICBkZWxldGUgYXR0cnNba2V5XTtcbiAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChoYXNBdHRyc0NoYW5nZWQpIHtcbiAgICB0cmlnZ2VyKGluc3RhbmNlLmF0dHJzLCBcInNldFwiLCBcIlwiKTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIHZhbGlkYXRlUHJvcHMocmF3UHJvcHMgfHwge30sIHByb3BzLCBpbnN0YW5jZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldEZ1bGxQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIHByb3BzLCBhdHRycykge1xuICBjb25zdCBbb3B0aW9ucywgbmVlZENhc3RLZXlzXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcbiAgbGV0IGhhc0F0dHJzQ2hhbmdlZCA9IGZhbHNlO1xuICBsZXQgcmF3Q2FzdFZhbHVlcztcbiAgaWYgKHJhd1Byb3BzKSB7XG4gICAgZm9yIChsZXQga2V5IGluIHJhd1Byb3BzKSB7XG4gICAgICBpZiAoaXNSZXNlcnZlZFByb3Aoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZhbHVlID0gcmF3UHJvcHNba2V5XTtcbiAgICAgIGxldCBjYW1lbEtleTtcbiAgICAgIGlmIChvcHRpb25zICYmIGhhc093bihvcHRpb25zLCBjYW1lbEtleSA9IGNhbWVsaXplKGtleSkpKSB7XG4gICAgICAgIGlmICghbmVlZENhc3RLZXlzIHx8ICFuZWVkQ2FzdEtleXMuaW5jbHVkZXMoY2FtZWxLZXkpKSB7XG4gICAgICAgICAgcHJvcHNbY2FtZWxLZXldID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKHJhd0Nhc3RWYWx1ZXMgfHwgKHJhd0Nhc3RWYWx1ZXMgPSB7fSkpW2NhbWVsS2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFpc0VtaXRMaXN0ZW5lcihpbnN0YW5jZS5lbWl0c09wdGlvbnMsIGtleSkpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIGF0dHJzKSB8fCB2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xuICAgICAgICAgIGF0dHJzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChuZWVkQ2FzdEtleXMpIHtcbiAgICBjb25zdCByYXdDdXJyZW50UHJvcHMgPSB0b1Jhdyhwcm9wcyk7XG4gICAgY29uc3QgY2FzdFZhbHVlcyA9IHJhd0Nhc3RWYWx1ZXMgfHwgRU1QVFlfT0JKO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmVlZENhc3RLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBuZWVkQ2FzdEtleXNbaV07XG4gICAgICBwcm9wc1trZXldID0gcmVzb2x2ZVByb3BWYWx1ZShcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgcmF3Q3VycmVudFByb3BzLFxuICAgICAgICBrZXksXG4gICAgICAgIGNhc3RWYWx1ZXNba2V5XSxcbiAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICFoYXNPd24oY2FzdFZhbHVlcywga2V5KVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhhc0F0dHJzQ2hhbmdlZDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcHJvcHMsIGtleSwgdmFsdWUsIGluc3RhbmNlLCBpc0Fic2VudCkge1xuICBjb25zdCBvcHQgPSBvcHRpb25zW2tleV07XG4gIGlmIChvcHQgIT0gbnVsbCkge1xuICAgIGNvbnN0IGhhc0RlZmF1bHQgPSBoYXNPd24ob3B0LCBcImRlZmF1bHRcIik7XG4gICAgaWYgKGhhc0RlZmF1bHQgJiYgdmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gb3B0LmRlZmF1bHQ7XG4gICAgICBpZiAob3B0LnR5cGUgIT09IEZ1bmN0aW9uICYmICFvcHQuc2tpcEZhY3RvcnkgJiYgaXNGdW5jdGlvbihkZWZhdWx0VmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHsgcHJvcHNEZWZhdWx0cyB9ID0gaW5zdGFuY2U7XG4gICAgICAgIGlmIChrZXkgaW4gcHJvcHNEZWZhdWx0cykge1xuICAgICAgICAgIHZhbHVlID0gcHJvcHNEZWZhdWx0c1trZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHJlc2V0ID0gc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcbiAgICAgICAgICB2YWx1ZSA9IHByb3BzRGVmYXVsdHNba2V5XSA9IGRlZmF1bHRWYWx1ZS5jYWxsKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHByb3BzXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChpbnN0YW5jZS5jZSkge1xuICAgICAgICBpbnN0YW5jZS5jZS5fc2V0UHJvcChrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdFswIC8qIHNob3VsZENhc3QgKi9dKSB7XG4gICAgICBpZiAoaXNBYnNlbnQgJiYgIWhhc0RlZmF1bHQpIHtcbiAgICAgICAgdmFsdWUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAob3B0WzEgLyogc2hvdWxkQ2FzdFRydWUgKi9dICYmICh2YWx1ZSA9PT0gXCJcIiB8fCB2YWx1ZSA9PT0gaHlwaGVuYXRlKGtleSkpKSB7XG4gICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuY29uc3QgbWl4aW5Qcm9wc0NhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBub3JtYWxpemVQcm9wc09wdGlvbnMoY29tcCwgYXBwQ29udGV4dCwgYXNNaXhpbiA9IGZhbHNlKSB7XG4gIGNvbnN0IGNhY2hlID0gX19WVUVfT1BUSU9OU19BUElfXyAmJiBhc01peGluID8gbWl4aW5Qcm9wc0NhY2hlIDogYXBwQ29udGV4dC5wcm9wc0NhY2hlO1xuICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoY29tcCk7XG4gIGlmIChjYWNoZWQpIHtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIGNvbnN0IHJhdyA9IGNvbXAucHJvcHM7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB7fTtcbiAgY29uc3QgbmVlZENhc3RLZXlzID0gW107XG4gIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XG4gIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fICYmICFpc0Z1bmN0aW9uKGNvbXApKSB7XG4gICAgY29uc3QgZXh0ZW5kUHJvcHMgPSAocmF3MikgPT4ge1xuICAgICAgaGFzRXh0ZW5kcyA9IHRydWU7XG4gICAgICBjb25zdCBbcHJvcHMsIGtleXNdID0gbm9ybWFsaXplUHJvcHNPcHRpb25zKHJhdzIsIGFwcENvbnRleHQsIHRydWUpO1xuICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIHByb3BzKTtcbiAgICAgIGlmIChrZXlzKSBuZWVkQ2FzdEtleXMucHVzaCguLi5rZXlzKTtcbiAgICB9O1xuICAgIGlmICghYXNNaXhpbiAmJiBhcHBDb250ZXh0Lm1peGlucy5sZW5ndGgpIHtcbiAgICAgIGFwcENvbnRleHQubWl4aW5zLmZvckVhY2goZXh0ZW5kUHJvcHMpO1xuICAgIH1cbiAgICBpZiAoY29tcC5leHRlbmRzKSB7XG4gICAgICBleHRlbmRQcm9wcyhjb21wLmV4dGVuZHMpO1xuICAgIH1cbiAgICBpZiAoY29tcC5taXhpbnMpIHtcbiAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kUHJvcHMpO1xuICAgIH1cbiAgfVxuICBpZiAoIXJhdyAmJiAhaGFzRXh0ZW5kcykge1xuICAgIGlmIChpc09iamVjdChjb21wKSkge1xuICAgICAgY2FjaGUuc2V0KGNvbXAsIEVNUFRZX0FSUik7XG4gICAgfVxuICAgIHJldHVybiBFTVBUWV9BUlI7XG4gIH1cbiAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNTdHJpbmcocmF3W2ldKSkge1xuICAgICAgICB3YXJuJDEoYHByb3BzIG11c3QgYmUgc3RyaW5ncyB3aGVuIHVzaW5nIGFycmF5IHN5bnRheC5gLCByYXdbaV0pO1xuICAgICAgfVxuICAgICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGNhbWVsaXplKHJhd1tpXSk7XG4gICAgICBpZiAodmFsaWRhdGVQcm9wTmFtZShub3JtYWxpemVkS2V5KSkge1xuICAgICAgICBub3JtYWxpemVkW25vcm1hbGl6ZWRLZXldID0gRU1QVFlfT0JKO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChyYXcpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNPYmplY3QocmF3KSkge1xuICAgICAgd2FybiQxKGBpbnZhbGlkIHByb3BzIG9wdGlvbnNgLCByYXcpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiByYXcpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xuICAgICAgaWYgKHZhbGlkYXRlUHJvcE5hbWUobm9ybWFsaXplZEtleSkpIHtcbiAgICAgICAgY29uc3Qgb3B0ID0gcmF3W2tleV07XG4gICAgICAgIGNvbnN0IHByb3AgPSBub3JtYWxpemVkW25vcm1hbGl6ZWRLZXldID0gaXNBcnJheShvcHQpIHx8IGlzRnVuY3Rpb24ob3B0KSA/IHsgdHlwZTogb3B0IH0gOiBleHRlbmQoe30sIG9wdCk7XG4gICAgICAgIGNvbnN0IHByb3BUeXBlID0gcHJvcC50eXBlO1xuICAgICAgICBsZXQgc2hvdWxkQ2FzdCA9IGZhbHNlO1xuICAgICAgICBsZXQgc2hvdWxkQ2FzdFRydWUgPSB0cnVlO1xuICAgICAgICBpZiAoaXNBcnJheShwcm9wVHlwZSkpIHtcbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcHJvcFR5cGUubGVuZ3RoOyArK2luZGV4KSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gcHJvcFR5cGVbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgdHlwZU5hbWUgPSBpc0Z1bmN0aW9uKHR5cGUpICYmIHR5cGUubmFtZTtcbiAgICAgICAgICAgIGlmICh0eXBlTmFtZSA9PT0gXCJCb29sZWFuXCIpIHtcbiAgICAgICAgICAgICAgc2hvdWxkQ2FzdCA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlTmFtZSA9PT0gXCJTdHJpbmdcIikge1xuICAgICAgICAgICAgICBzaG91bGRDYXN0VHJ1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaG91bGRDYXN0ID0gaXNGdW5jdGlvbihwcm9wVHlwZSkgJiYgcHJvcFR5cGUubmFtZSA9PT0gXCJCb29sZWFuXCI7XG4gICAgICAgIH1cbiAgICAgICAgcHJvcFswIC8qIHNob3VsZENhc3QgKi9dID0gc2hvdWxkQ2FzdDtcbiAgICAgICAgcHJvcFsxIC8qIHNob3VsZENhc3RUcnVlICovXSA9IHNob3VsZENhc3RUcnVlO1xuICAgICAgICBpZiAoc2hvdWxkQ2FzdCB8fCBoYXNPd24ocHJvcCwgXCJkZWZhdWx0XCIpKSB7XG4gICAgICAgICAgbmVlZENhc3RLZXlzLnB1c2gobm9ybWFsaXplZEtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgcmVzID0gW25vcm1hbGl6ZWQsIG5lZWRDYXN0S2V5c107XG4gIGlmIChpc09iamVjdChjb21wKSkge1xuICAgIGNhY2hlLnNldChjb21wLCByZXMpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BOYW1lKGtleSkge1xuICBpZiAoa2V5WzBdICE9PSBcIiRcIiAmJiAhaXNSZXNlcnZlZFByb3Aoa2V5KSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICB3YXJuJDEoYEludmFsaWQgcHJvcCBuYW1lOiBcIiR7a2V5fVwiIGlzIGEgcmVzZXJ2ZWQgcHJvcGVydHkuYCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZ2V0VHlwZShjdG9yKSB7XG4gIGlmIChjdG9yID09PSBudWxsKSB7XG4gICAgcmV0dXJuIFwibnVsbFwiO1xuICB9XG4gIGlmICh0eXBlb2YgY3RvciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIGN0b3IubmFtZSB8fCBcIlwiO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjdG9yID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgbmFtZSA9IGN0b3IuY29uc3RydWN0b3IgJiYgY3Rvci5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgIHJldHVybiBuYW1lIHx8IFwiXCI7XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BzKHJhd1Byb3BzLCBwcm9wcywgaW5zdGFuY2UpIHtcbiAgY29uc3QgcmVzb2x2ZWRWYWx1ZXMgPSB0b1Jhdyhwcm9wcyk7XG4gIGNvbnN0IG9wdGlvbnMgPSBpbnN0YW5jZS5wcm9wc09wdGlvbnNbMF07XG4gIGNvbnN0IGNhbWVsaXplUHJvcHNLZXkgPSBPYmplY3Qua2V5cyhyYXdQcm9wcykubWFwKChrZXkpID0+IGNhbWVsaXplKGtleSkpO1xuICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zKSB7XG4gICAgbGV0IG9wdCA9IG9wdGlvbnNba2V5XTtcbiAgICBpZiAob3B0ID09IG51bGwpIGNvbnRpbnVlO1xuICAgIHZhbGlkYXRlUHJvcChcbiAgICAgIGtleSxcbiAgICAgIHJlc29sdmVkVmFsdWVzW2tleV0sXG4gICAgICBvcHQsXG4gICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2hhbGxvd1JlYWRvbmx5KHJlc29sdmVkVmFsdWVzKSA6IHJlc29sdmVkVmFsdWVzLFxuICAgICAgIWNhbWVsaXplUHJvcHNLZXkuaW5jbHVkZXMoa2V5KVxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcChuYW1lLCB2YWx1ZSwgcHJvcCwgcHJvcHMsIGlzQWJzZW50KSB7XG4gIGNvbnN0IHsgdHlwZSwgcmVxdWlyZWQsIHZhbGlkYXRvciwgc2tpcENoZWNrIH0gPSBwcm9wO1xuICBpZiAocmVxdWlyZWQgJiYgaXNBYnNlbnQpIHtcbiAgICB3YXJuJDEoJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogXCInICsgbmFtZSArICdcIicpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCAmJiAhcmVxdWlyZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGUgIT0gbnVsbCAmJiB0eXBlICE9PSB0cnVlICYmICFza2lwQ2hlY2spIHtcbiAgICBsZXQgaXNWYWxpZCA9IGZhbHNlO1xuICAgIGNvbnN0IHR5cGVzID0gaXNBcnJheSh0eXBlKSA/IHR5cGUgOiBbdHlwZV07XG4gICAgY29uc3QgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoICYmICFpc1ZhbGlkOyBpKyspIHtcbiAgICAgIGNvbnN0IHsgdmFsaWQsIGV4cGVjdGVkVHlwZSB9ID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZXNbaV0pO1xuICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGV4cGVjdGVkVHlwZSB8fCBcIlwiKTtcbiAgICAgIGlzVmFsaWQgPSB2YWxpZDtcbiAgICB9XG4gICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICB3YXJuJDEoZ2V0SW52YWxpZFR5cGVNZXNzYWdlKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIGlmICh2YWxpZGF0b3IgJiYgIXZhbGlkYXRvcih2YWx1ZSwgcHJvcHMpKSB7XG4gICAgd2FybiQxKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIG5hbWUgKyAnXCIuJyk7XG4gIH1cbn1cbmNvbnN0IGlzU2ltcGxlVHlwZSA9IC8qIEBfX1BVUkVfXyAqLyBtYWtlTWFwKFxuICBcIlN0cmluZyxOdW1iZXIsQm9vbGVhbixGdW5jdGlvbixTeW1ib2wsQmlnSW50XCJcbik7XG5mdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG4gIGxldCB2YWxpZDtcbiAgY29uc3QgZXhwZWN0ZWRUeXBlID0gZ2V0VHlwZSh0eXBlKTtcbiAgaWYgKGV4cGVjdGVkVHlwZSA9PT0gXCJudWxsXCIpIHtcbiAgICB2YWxpZCA9IHZhbHVlID09PSBudWxsO1xuICB9IGVsc2UgaWYgKGlzU2ltcGxlVHlwZShleHBlY3RlZFR5cGUpKSB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiB2YWx1ZTtcbiAgICB2YWxpZCA9IHQgPT09IGV4cGVjdGVkVHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICghdmFsaWQgJiYgdCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gICAgfVxuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gXCJPYmplY3RcIikge1xuICAgIHZhbGlkID0gaXNPYmplY3QodmFsdWUpO1xuICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gXCJBcnJheVwiKSB7XG4gICAgdmFsaWQgPSBpc0FycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHZhbGlkLFxuICAgIGV4cGVjdGVkVHlwZVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0SW52YWxpZFR5cGVNZXNzYWdlKG5hbWUsIHZhbHVlLCBleHBlY3RlZFR5cGVzKSB7XG4gIGlmIChleHBlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBgUHJvcCB0eXBlIFtdIGZvciBwcm9wIFwiJHtuYW1lfVwiIHdvbid0IG1hdGNoIGFueXRoaW5nLiBEaWQgeW91IG1lYW4gdG8gdXNlIHR5cGUgQXJyYXkgaW5zdGVhZD9gO1xuICB9XG4gIGxldCBtZXNzYWdlID0gYEludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCIke25hbWV9XCIuIEV4cGVjdGVkICR7ZXhwZWN0ZWRUeXBlcy5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiB8IFwiKX1gO1xuICBjb25zdCBleHBlY3RlZFR5cGUgPSBleHBlY3RlZFR5cGVzWzBdO1xuICBjb25zdCByZWNlaXZlZFR5cGUgPSB0b1Jhd1R5cGUodmFsdWUpO1xuICBjb25zdCBleHBlY3RlZFZhbHVlID0gc3R5bGVWYWx1ZSh2YWx1ZSwgZXhwZWN0ZWRUeXBlKTtcbiAgY29uc3QgcmVjZWl2ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIHJlY2VpdmVkVHlwZSk7XG4gIGlmIChleHBlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMSAmJiBpc0V4cGxpY2FibGUoZXhwZWN0ZWRUeXBlKSAmJiAhaXNCb29sZWFuKGV4cGVjdGVkVHlwZSwgcmVjZWl2ZWRUeXBlKSkge1xuICAgIG1lc3NhZ2UgKz0gYCB3aXRoIHZhbHVlICR7ZXhwZWN0ZWRWYWx1ZX1gO1xuICB9XG4gIG1lc3NhZ2UgKz0gYCwgZ290ICR7cmVjZWl2ZWRUeXBlfSBgO1xuICBpZiAoaXNFeHBsaWNhYmxlKHJlY2VpdmVkVHlwZSkpIHtcbiAgICBtZXNzYWdlICs9IGB3aXRoIHZhbHVlICR7cmVjZWl2ZWRWYWx1ZX0uYDtcbiAgfVxuICByZXR1cm4gbWVzc2FnZTtcbn1cbmZ1bmN0aW9uIHN0eWxlVmFsdWUodmFsdWUsIHR5cGUpIHtcbiAgaWYgKHR5cGUgPT09IFwiU3RyaW5nXCIpIHtcbiAgICByZXR1cm4gYFwiJHt2YWx1ZX1cImA7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJOdW1iZXJcIikge1xuICAgIHJldHVybiBgJHtOdW1iZXIodmFsdWUpfWA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWA7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzRXhwbGljYWJsZSh0eXBlKSB7XG4gIGNvbnN0IGV4cGxpY2l0VHlwZXMgPSBbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJib29sZWFuXCJdO1xuICByZXR1cm4gZXhwbGljaXRUeXBlcy5zb21lKChlbGVtKSA9PiB0eXBlLnRvTG93ZXJDYXNlKCkgPT09IGVsZW0pO1xufVxuZnVuY3Rpb24gaXNCb29sZWFuKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIGFyZ3Muc29tZSgoZWxlbSkgPT4gZWxlbS50b0xvd2VyQ2FzZSgpID09PSBcImJvb2xlYW5cIik7XG59XG5cbmNvbnN0IGlzSW50ZXJuYWxLZXkgPSAoa2V5KSA9PiBrZXlbMF0gPT09IFwiX1wiIHx8IGtleSA9PT0gXCIkc3RhYmxlXCI7XG5jb25zdCBub3JtYWxpemVTbG90VmFsdWUgPSAodmFsdWUpID0+IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKG5vcm1hbGl6ZVZOb2RlKSA6IFtub3JtYWxpemVWTm9kZSh2YWx1ZSldO1xuY29uc3Qgbm9ybWFsaXplU2xvdCA9IChrZXksIHJhd1Nsb3QsIGN0eCkgPT4ge1xuICBpZiAocmF3U2xvdC5fbikge1xuICAgIHJldHVybiByYXdTbG90O1xuICB9XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB3aXRoQ3R4KCguLi5hcmdzKSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgY3VycmVudEluc3RhbmNlICYmICghY3R4IHx8IGN0eC5yb290ID09PSBjdXJyZW50SW5zdGFuY2Uucm9vdCkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYFNsb3QgXCIke2tleX1cIiBpbnZva2VkIG91dHNpZGUgb2YgdGhlIHJlbmRlciBmdW5jdGlvbjogdGhpcyB3aWxsIG5vdCB0cmFjayBkZXBlbmRlbmNpZXMgdXNlZCBpbiB0aGUgc2xvdC4gSW52b2tlIHRoZSBzbG90IGZ1bmN0aW9uIGluc2lkZSB0aGUgcmVuZGVyIGZ1bmN0aW9uIGluc3RlYWQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZVNsb3RWYWx1ZShyYXdTbG90KC4uLmFyZ3MpKTtcbiAgfSwgY3R4KTtcbiAgbm9ybWFsaXplZC5fYyA9IGZhbHNlO1xuICByZXR1cm4gbm9ybWFsaXplZDtcbn07XG5jb25zdCBub3JtYWxpemVPYmplY3RTbG90cyA9IChyYXdTbG90cywgc2xvdHMsIGluc3RhbmNlKSA9PiB7XG4gIGNvbnN0IGN0eCA9IHJhd1Nsb3RzLl9jdHg7XG4gIGZvciAoY29uc3Qga2V5IGluIHJhd1Nsb3RzKSB7XG4gICAgaWYgKGlzSW50ZXJuYWxLZXkoa2V5KSkgY29udGludWU7XG4gICAgY29uc3QgdmFsdWUgPSByYXdTbG90c1trZXldO1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgc2xvdHNba2V5XSA9IG5vcm1hbGl6ZVNsb3Qoa2V5LCB2YWx1ZSwgY3R4KTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHRydWUpIHtcbiAgICAgICAgd2FybiQxKFxuICAgICAgICAgIGBOb24tZnVuY3Rpb24gdmFsdWUgZW5jb3VudGVyZWQgZm9yIHNsb3QgXCIke2tleX1cIi4gUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVNsb3RWYWx1ZSh2YWx1ZSk7XG4gICAgICBzbG90c1trZXldID0gKCkgPT4gbm9ybWFsaXplZDtcbiAgICB9XG4gIH1cbn07XG5jb25zdCBub3JtYWxpemVWTm9kZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbikgPT4ge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNLZWVwQWxpdmUoaW5zdGFuY2Uudm5vZGUpICYmIHRydWUpIHtcbiAgICB3YXJuJDEoXG4gICAgICBgTm9uLWZ1bmN0aW9uIHZhbHVlIGVuY291bnRlcmVkIGZvciBkZWZhdWx0IHNsb3QuIFByZWZlciBmdW5jdGlvbiBzbG90cyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLmBcbiAgICApO1xuICB9XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTbG90VmFsdWUoY2hpbGRyZW4pO1xuICBpbnN0YW5jZS5zbG90cy5kZWZhdWx0ID0gKCkgPT4gbm9ybWFsaXplZDtcbn07XG5jb25zdCBhc3NpZ25TbG90cyA9IChzbG90cywgY2hpbGRyZW4sIG9wdGltaXplZCkgPT4ge1xuICBmb3IgKGNvbnN0IGtleSBpbiBjaGlsZHJlbikge1xuICAgIGlmIChvcHRpbWl6ZWQgfHwga2V5ICE9PSBcIl9cIikge1xuICAgICAgc2xvdHNba2V5XSA9IGNoaWxkcmVuW2tleV07XG4gICAgfVxuICB9XG59O1xuY29uc3QgaW5pdFNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbiwgb3B0aW1pemVkKSA9PiB7XG4gIGNvbnN0IHNsb3RzID0gaW5zdGFuY2Uuc2xvdHMgPSBjcmVhdGVJbnRlcm5hbE9iamVjdCgpO1xuICBpZiAoaW5zdGFuY2Uudm5vZGUuc2hhcGVGbGFnICYgMzIpIHtcbiAgICBjb25zdCB0eXBlID0gY2hpbGRyZW4uXztcbiAgICBpZiAodHlwZSkge1xuICAgICAgYXNzaWduU2xvdHMoc2xvdHMsIGNoaWxkcmVuLCBvcHRpbWl6ZWQpO1xuICAgICAgaWYgKG9wdGltaXplZCkge1xuICAgICAgICBkZWYoc2xvdHMsIFwiX1wiLCB0eXBlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbm9ybWFsaXplT2JqZWN0U2xvdHMoY2hpbGRyZW4sIHNsb3RzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoY2hpbGRyZW4pIHtcbiAgICBub3JtYWxpemVWTm9kZVNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XG4gIH1cbn07XG5jb25zdCB1cGRhdGVTbG90cyA9IChpbnN0YW5jZSwgY2hpbGRyZW4sIG9wdGltaXplZCkgPT4ge1xuICBjb25zdCB7IHZub2RlLCBzbG90cyB9ID0gaW5zdGFuY2U7XG4gIGxldCBuZWVkRGVsZXRpb25DaGVjayA9IHRydWU7XG4gIGxldCBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQgPSBFTVBUWV9PQko7XG4gIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAzMikge1xuICAgIGNvbnN0IHR5cGUgPSBjaGlsZHJlbi5fO1xuICAgIGlmICh0eXBlKSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0htclVwZGF0aW5nKSB7XG4gICAgICAgIGFzc2lnblNsb3RzKHNsb3RzLCBjaGlsZHJlbiwgb3B0aW1pemVkKTtcbiAgICAgICAgdHJpZ2dlcihpbnN0YW5jZSwgXCJzZXRcIiwgXCIkc2xvdHNcIik7XG4gICAgICB9IGVsc2UgaWYgKG9wdGltaXplZCAmJiB0eXBlID09PSAxKSB7XG4gICAgICAgIG5lZWREZWxldGlvbkNoZWNrID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhc3NpZ25TbG90cyhzbG90cywgY2hpbGRyZW4sIG9wdGltaXplZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5lZWREZWxldGlvbkNoZWNrID0gIWNoaWxkcmVuLiRzdGFibGU7XG4gICAgICBub3JtYWxpemVPYmplY3RTbG90cyhjaGlsZHJlbiwgc2xvdHMpO1xuICAgIH1cbiAgICBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQgPSBjaGlsZHJlbjtcbiAgfSBlbHNlIGlmIChjaGlsZHJlbikge1xuICAgIG5vcm1hbGl6ZVZOb2RlU2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcbiAgICBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQgPSB7IGRlZmF1bHQ6IDEgfTtcbiAgfVxuICBpZiAobmVlZERlbGV0aW9uQ2hlY2spIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzbG90cykge1xuICAgICAgaWYgKCFpc0ludGVybmFsS2V5KGtleSkgJiYgZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0W2tleV0gPT0gbnVsbCkge1xuICAgICAgICBkZWxldGUgc2xvdHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbmxldCBzdXBwb3J0ZWQ7XG5sZXQgcGVyZjtcbmZ1bmN0aW9uIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgdHlwZSkge1xuICBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcucGVyZm9ybWFuY2UgJiYgaXNTdXBwb3J0ZWQoKSkge1xuICAgIHBlcmYubWFyayhgdnVlLSR7dHlwZX0tJHtpbnN0YW5jZS51aWR9YCk7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgZGV2dG9vbHNQZXJmU3RhcnQoaW5zdGFuY2UsIHR5cGUsIGlzU3VwcG9ydGVkKCkgPyBwZXJmLm5vdygpIDogRGF0ZS5ub3coKSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGVuZE1lYXN1cmUoaW5zdGFuY2UsIHR5cGUpIHtcbiAgaWYgKGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLnBlcmZvcm1hbmNlICYmIGlzU3VwcG9ydGVkKCkpIHtcbiAgICBjb25zdCBzdGFydFRhZyA9IGB2dWUtJHt0eXBlfS0ke2luc3RhbmNlLnVpZH1gO1xuICAgIGNvbnN0IGVuZFRhZyA9IHN0YXJ0VGFnICsgYDplbmRgO1xuICAgIHBlcmYubWFyayhlbmRUYWcpO1xuICAgIHBlcmYubWVhc3VyZShcbiAgICAgIGA8JHtmb3JtYXRDb21wb25lbnROYW1lKGluc3RhbmNlLCBpbnN0YW5jZS50eXBlKX0+ICR7dHlwZX1gLFxuICAgICAgc3RhcnRUYWcsXG4gICAgICBlbmRUYWdcbiAgICApO1xuICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7XG4gICAgcGVyZi5jbGVhck1hcmtzKGVuZFRhZyk7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgZGV2dG9vbHNQZXJmRW5kKGluc3RhbmNlLCB0eXBlLCBpc1N1cHBvcnRlZCgpID8gcGVyZi5ub3coKSA6IERhdGUubm93KCkpO1xuICB9XG59XG5mdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcbiAgaWYgKHN1cHBvcnRlZCAhPT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHN1cHBvcnRlZDtcbiAgfVxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cucGVyZm9ybWFuY2UpIHtcbiAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgIHBlcmYgPSB3aW5kb3cucGVyZm9ybWFuY2U7XG4gIH0gZWxzZSB7XG4gICAgc3VwcG9ydGVkID0gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHN1cHBvcnRlZDtcbn1cblxuZnVuY3Rpb24gaW5pdEZlYXR1cmVGbGFncygpIHtcbiAgY29uc3QgbmVlZFdhcm4gPSBbXTtcbiAgaWYgKHR5cGVvZiBfX1ZVRV9PUFRJT05TX0FQSV9fICE9PSBcImJvb2xlYW5cIikge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgbmVlZFdhcm4ucHVzaChgX19WVUVfT1BUSU9OU19BUElfX2ApO1xuICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9PUFRJT05TX0FQSV9fID0gdHJ1ZTtcbiAgfVxuICBpZiAodHlwZW9mIF9fVlVFX1BST0RfREVWVE9PTFNfXyAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX1BST0RfREVWVE9PTFNfX2ApO1xuICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9QUk9EX0RFVlRPT0xTX18gPSBmYWxzZTtcbiAgfVxuICBpZiAodHlwZW9mIF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfXyAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX1BST0RfSFlEUkFUSU9OX01JU01BVENIX0RFVEFJTFNfX2ApO1xuICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9QUk9EX0hZRFJBVElPTl9NSVNNQVRDSF9ERVRBSUxTX18gPSBmYWxzZTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBuZWVkV2Fybi5sZW5ndGgpIHtcbiAgICBjb25zdCBtdWx0aSA9IG5lZWRXYXJuLmxlbmd0aCA+IDE7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgYEZlYXR1cmUgZmxhZyR7bXVsdGkgPyBgc2AgOiBgYH0gJHtuZWVkV2Fybi5qb2luKFwiLCBcIil9ICR7bXVsdGkgPyBgYXJlYCA6IGBpc2B9IG5vdCBleHBsaWNpdGx5IGRlZmluZWQuIFlvdSBhcmUgcnVubmluZyB0aGUgZXNtLWJ1bmRsZXIgYnVpbGQgb2YgVnVlLCB3aGljaCBleHBlY3RzIHRoZXNlIGNvbXBpbGUtdGltZSBmZWF0dXJlIGZsYWdzIHRvIGJlIGdsb2JhbGx5IGluamVjdGVkIHZpYSB0aGUgYnVuZGxlciBjb25maWcgaW4gb3JkZXIgdG8gZ2V0IGJldHRlciB0cmVlLXNoYWtpbmcgaW4gdGhlIHByb2R1Y3Rpb24gYnVuZGxlLlxuXG5Gb3IgbW9yZSBkZXRhaWxzLCBzZWUgaHR0cHM6Ly9saW5rLnZ1ZWpzLm9yZy9mZWF0dXJlLWZsYWdzLmBcbiAgICApO1xuICB9XG59XG5cbmNvbnN0IHF1ZXVlUG9zdFJlbmRlckVmZmVjdCA9IHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlIDtcbmZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMpIHtcbiAgcmV0dXJuIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyKG9wdGlvbnMpIHtcbiAgcmV0dXJuIGJhc2VDcmVhdGVSZW5kZXJlcihvcHRpb25zLCBjcmVhdGVIeWRyYXRpb25GdW5jdGlvbnMpO1xufVxuZnVuY3Rpb24gYmFzZUNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMsIGNyZWF0ZUh5ZHJhdGlvbkZucykge1xuICB7XG4gICAgaW5pdEZlYXR1cmVGbGFncygpO1xuICB9XG4gIGNvbnN0IHRhcmdldCA9IGdldEdsb2JhbFRoaXMoKTtcbiAgdGFyZ2V0Ll9fVlVFX18gPSB0cnVlO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICBzZXREZXZ0b29sc0hvb2skMSh0YXJnZXQuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXywgdGFyZ2V0KTtcbiAgfVxuICBjb25zdCB7XG4gICAgaW5zZXJ0OiBob3N0SW5zZXJ0LFxuICAgIHJlbW92ZTogaG9zdFJlbW92ZSxcbiAgICBwYXRjaFByb3A6IGhvc3RQYXRjaFByb3AsXG4gICAgY3JlYXRlRWxlbWVudDogaG9zdENyZWF0ZUVsZW1lbnQsXG4gICAgY3JlYXRlVGV4dDogaG9zdENyZWF0ZVRleHQsXG4gICAgY3JlYXRlQ29tbWVudDogaG9zdENyZWF0ZUNvbW1lbnQsXG4gICAgc2V0VGV4dDogaG9zdFNldFRleHQsXG4gICAgc2V0RWxlbWVudFRleHQ6IGhvc3RTZXRFbGVtZW50VGV4dCxcbiAgICBwYXJlbnROb2RlOiBob3N0UGFyZW50Tm9kZSxcbiAgICBuZXh0U2libGluZzogaG9zdE5leHRTaWJsaW5nLFxuICAgIHNldFNjb3BlSWQ6IGhvc3RTZXRTY29wZUlkID0gTk9PUCxcbiAgICBpbnNlcnRTdGF0aWNDb250ZW50OiBob3N0SW5zZXJ0U3RhdGljQ29udGVudFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgcGF0Y2ggPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciA9IG51bGwsIHBhcmVudENvbXBvbmVudCA9IG51bGwsIHBhcmVudFN1c3BlbnNlID0gbnVsbCwgbmFtZXNwYWNlID0gdm9pZCAwLCBzbG90U2NvcGVJZHMgPSBudWxsLCBvcHRpbWl6ZWQgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGlzSG1yVXBkYXRpbmcgPyBmYWxzZSA6ICEhbjIuZHluYW1pY0NoaWxkcmVuKSA9PiB7XG4gICAgaWYgKG4xID09PSBuMikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAobjEgJiYgIWlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XG4gICAgICBhbmNob3IgPSBnZXROZXh0SG9zdE5vZGUobjEpO1xuICAgICAgdW5tb3VudChuMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICBuMSA9IG51bGw7XG4gICAgfVxuICAgIGlmIChuMi5wYXRjaEZsYWcgPT09IC0yKSB7XG4gICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgIG4yLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgdHlwZSwgcmVmLCBzaGFwZUZsYWcgfSA9IG4yO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBUZXh0OlxuICAgICAgICBwcm9jZXNzVGV4dChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENvbW1lbnQ6XG4gICAgICAgIHByb2Nlc3NDb21tZW50Tm9kZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFN0YXRpYzpcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgICAgICBtb3VudFN0YXRpY05vZGUobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBuYW1lc3BhY2UpO1xuICAgICAgICB9IGVsc2UgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwYXRjaFN0YXRpY05vZGUobjEsIG4yLCBjb250YWluZXIsIG5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEZyYWdtZW50OlxuICAgICAgICBwcm9jZXNzRnJhZ21lbnQoXG4gICAgICAgICAgbjEsXG4gICAgICAgICAgbjIsXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMSkge1xuICAgICAgICAgIHByb2Nlc3NFbGVtZW50KFxuICAgICAgICAgICAgbjEsXG4gICAgICAgICAgICBuMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChzaGFwZUZsYWcgJiA2KSB7XG4gICAgICAgICAgcHJvY2Vzc0NvbXBvbmVudChcbiAgICAgICAgICAgIG4xLFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2hhcGVGbGFnICYgNjQpIHtcbiAgICAgICAgICB0eXBlLnByb2Nlc3MoXG4gICAgICAgICAgICBuMSxcbiAgICAgICAgICAgIG4yLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWQsXG4gICAgICAgICAgICBpbnRlcm5hbHNcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHNoYXBlRmxhZyAmIDEyOCkge1xuICAgICAgICAgIHR5cGUucHJvY2VzcyhcbiAgICAgICAgICAgIG4xLFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgICAgIGludGVybmFsc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIHdhcm4kMShcIkludmFsaWQgVk5vZGUgdHlwZTpcIiwgdHlwZSwgYCgke3R5cGVvZiB0eXBlfSlgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVmICE9IG51bGwgJiYgcGFyZW50Q29tcG9uZW50KSB7XG4gICAgICBzZXRSZWYocmVmLCBuMSAmJiBuMS5yZWYsIHBhcmVudFN1c3BlbnNlLCBuMiB8fCBuMSwgIW4yKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NUZXh0ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgaG9zdEluc2VydChcbiAgICAgICAgbjIuZWwgPSBob3N0Q3JlYXRlVGV4dChuMi5jaGlsZHJlbiksXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBlbCA9IG4yLmVsID0gbjEuZWw7XG4gICAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XG4gICAgICAgIGhvc3RTZXRUZXh0KGVsLCBuMi5jaGlsZHJlbik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBwcm9jZXNzQ29tbWVudE5vZGUgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvcikgPT4ge1xuICAgIGlmIChuMSA9PSBudWxsKSB7XG4gICAgICBob3N0SW5zZXJ0KFxuICAgICAgICBuMi5lbCA9IGhvc3RDcmVhdGVDb21tZW50KG4yLmNoaWxkcmVuIHx8IFwiXCIpLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvclxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbjIuZWwgPSBuMS5lbDtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG1vdW50U3RhdGljTm9kZSA9IChuMiwgY29udGFpbmVyLCBhbmNob3IsIG5hbWVzcGFjZSkgPT4ge1xuICAgIFtuMi5lbCwgbjIuYW5jaG9yXSA9IGhvc3RJbnNlcnRTdGF0aWNDb250ZW50KFxuICAgICAgbjIuY2hpbGRyZW4sXG4gICAgICBjb250YWluZXIsXG4gICAgICBhbmNob3IsXG4gICAgICBuYW1lc3BhY2UsXG4gICAgICBuMi5lbCxcbiAgICAgIG4yLmFuY2hvclxuICAgICk7XG4gIH07XG4gIGNvbnN0IHBhdGNoU3RhdGljTm9kZSA9IChuMSwgbjIsIGNvbnRhaW5lciwgbmFtZXNwYWNlKSA9PiB7XG4gICAgaWYgKG4yLmNoaWxkcmVuICE9PSBuMS5jaGlsZHJlbikge1xuICAgICAgY29uc3QgYW5jaG9yID0gaG9zdE5leHRTaWJsaW5nKG4xLmFuY2hvcik7XG4gICAgICByZW1vdmVTdGF0aWNOb2RlKG4xKTtcbiAgICAgIFtuMi5lbCwgbjIuYW5jaG9yXSA9IGhvc3RJbnNlcnRTdGF0aWNDb250ZW50KFxuICAgICAgICBuMi5jaGlsZHJlbixcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIG5hbWVzcGFjZVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbjIuZWwgPSBuMS5lbDtcbiAgICAgIG4yLmFuY2hvciA9IG4xLmFuY2hvcjtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG1vdmVTdGF0aWNOb2RlID0gKHsgZWwsIGFuY2hvciB9LCBjb250YWluZXIsIG5leHRTaWJsaW5nKSA9PiB7XG4gICAgbGV0IG5leHQ7XG4gICAgd2hpbGUgKGVsICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xuICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBuZXh0U2libGluZyk7XG4gICAgICBlbCA9IG5leHQ7XG4gICAgfVxuICAgIGhvc3RJbnNlcnQoYW5jaG9yLCBjb250YWluZXIsIG5leHRTaWJsaW5nKTtcbiAgfTtcbiAgY29uc3QgcmVtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSkgPT4ge1xuICAgIGxldCBuZXh0O1xuICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gYW5jaG9yKSB7XG4gICAgICBuZXh0ID0gaG9zdE5leHRTaWJsaW5nKGVsKTtcbiAgICAgIGhvc3RSZW1vdmUoZWwpO1xuICAgICAgZWwgPSBuZXh0O1xuICAgIH1cbiAgICBob3N0UmVtb3ZlKGFuY2hvcik7XG4gIH07XG4gIGNvbnN0IHByb2Nlc3NFbGVtZW50ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBpZiAobjIudHlwZSA9PT0gXCJzdmdcIikge1xuICAgICAgbmFtZXNwYWNlID0gXCJzdmdcIjtcbiAgICB9IGVsc2UgaWYgKG4yLnR5cGUgPT09IFwibWF0aFwiKSB7XG4gICAgICBuYW1lc3BhY2UgPSBcIm1hdGhtbFwiO1xuICAgIH1cbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgbW91bnRFbGVtZW50KFxuICAgICAgICBuMixcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdGNoRWxlbWVudChcbiAgICAgICAgbjEsXG4gICAgICAgIG4yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgbW91bnRFbGVtZW50ID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIGxldCBlbDtcbiAgICBsZXQgdm5vZGVIb29rO1xuICAgIGNvbnN0IHsgcHJvcHMsIHNoYXBlRmxhZywgdHJhbnNpdGlvbiwgZGlycyB9ID0gdm5vZGU7XG4gICAgZWwgPSB2bm9kZS5lbCA9IGhvc3RDcmVhdGVFbGVtZW50KFxuICAgICAgdm5vZGUudHlwZSxcbiAgICAgIG5hbWVzcGFjZSxcbiAgICAgIHByb3BzICYmIHByb3BzLmlzLFxuICAgICAgcHJvcHNcbiAgICApO1xuICAgIGlmIChzaGFwZUZsYWcgJiA4KSB7XG4gICAgICBob3N0U2V0RWxlbWVudFRleHQoZWwsIHZub2RlLmNoaWxkcmVuKTtcbiAgICB9IGVsc2UgaWYgKHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICBtb3VudENoaWxkcmVuKFxuICAgICAgICB2bm9kZS5jaGlsZHJlbixcbiAgICAgICAgZWwsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIHJlc29sdmVDaGlsZHJlbk5hbWVzcGFjZSh2bm9kZSwgbmFtZXNwYWNlKSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChkaXJzKSB7XG4gICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIFwiY3JlYXRlZFwiKTtcbiAgICB9XG4gICAgc2V0U2NvcGVJZChlbCwgdm5vZGUsIHZub2RlLnNjb3BlSWQsIHNsb3RTY29wZUlkcywgcGFyZW50Q29tcG9uZW50KTtcbiAgICBpZiAocHJvcHMpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XG4gICAgICAgIGlmIChrZXkgIT09IFwidmFsdWVcIiAmJiAhaXNSZXNlcnZlZFByb3Aoa2V5KSkge1xuICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgbnVsbCwgcHJvcHNba2V5XSwgbmFtZXNwYWNlLCBwYXJlbnRDb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIHByb3BzKSB7XG4gICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIFwidmFsdWVcIiwgbnVsbCwgcHJvcHMudmFsdWUsIG5hbWVzcGFjZSk7XG4gICAgICB9XG4gICAgICBpZiAodm5vZGVIb29rID0gcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSB7XG4gICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgIGRlZihlbCwgXCJfX3Zub2RlXCIsIHZub2RlLCB0cnVlKTtcbiAgICAgIGRlZihlbCwgXCJfX3Z1ZVBhcmVudENvbXBvbmVudFwiLCBwYXJlbnRDb21wb25lbnQsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoZGlycykge1xuICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcImJlZm9yZU1vdW50XCIpO1xuICAgIH1cbiAgICBjb25zdCBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyA9IG5lZWRUcmFuc2l0aW9uKHBhcmVudFN1c3BlbnNlLCB0cmFuc2l0aW9uKTtcbiAgICBpZiAobmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcbiAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgIH1cbiAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgaWYgKCh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlTW91bnRlZCkgfHwgbmVlZENhbGxUcmFuc2l0aW9uSG9va3MgfHwgZGlycykge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgdm5vZGVIb29rICYmIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyAmJiB0cmFuc2l0aW9uLmVudGVyKGVsKTtcbiAgICAgICAgZGlycyAmJiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIFwibW91bnRlZFwiKTtcbiAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHNldFNjb3BlSWQgPSAoZWwsIHZub2RlLCBzY29wZUlkLCBzbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudCkgPT4ge1xuICAgIGlmIChzY29wZUlkKSB7XG4gICAgICBob3N0U2V0U2NvcGVJZChlbCwgc2NvcGVJZCk7XG4gICAgfVxuICAgIGlmIChzbG90U2NvcGVJZHMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xvdFNjb3BlSWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGhvc3RTZXRTY29wZUlkKGVsLCBzbG90U2NvcGVJZHNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocGFyZW50Q29tcG9uZW50KSB7XG4gICAgICBsZXQgc3ViVHJlZSA9IHBhcmVudENvbXBvbmVudC5zdWJUcmVlO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgc3ViVHJlZS5wYXRjaEZsYWcgPiAwICYmIHN1YlRyZWUucGF0Y2hGbGFnICYgMjA0OCkge1xuICAgICAgICBzdWJUcmVlID0gZmlsdGVyU2luZ2xlUm9vdChzdWJUcmVlLmNoaWxkcmVuKSB8fCBzdWJUcmVlO1xuICAgICAgfVxuICAgICAgaWYgKHZub2RlID09PSBzdWJUcmVlIHx8IGlzU3VzcGVuc2Uoc3ViVHJlZS50eXBlKSAmJiAoc3ViVHJlZS5zc0NvbnRlbnQgPT09IHZub2RlIHx8IHN1YlRyZWUuc3NGYWxsYmFjayA9PT0gdm5vZGUpKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFZOb2RlID0gcGFyZW50Q29tcG9uZW50LnZub2RlO1xuICAgICAgICBzZXRTY29wZUlkKFxuICAgICAgICAgIGVsLFxuICAgICAgICAgIHBhcmVudFZOb2RlLFxuICAgICAgICAgIHBhcmVudFZOb2RlLnNjb3BlSWQsXG4gICAgICAgICAgcGFyZW50Vk5vZGUuc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudC5wYXJlbnRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IG1vdW50Q2hpbGRyZW4gPSAoY2hpbGRyZW4sIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBzdGFydCA9IDApID0+IHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXSA9IG9wdGltaXplZCA/IGNsb25lSWZNb3VudGVkKGNoaWxkcmVuW2ldKSA6IG5vcm1hbGl6ZVZOb2RlKGNoaWxkcmVuW2ldKTtcbiAgICAgIHBhdGNoKFxuICAgICAgICBudWxsLFxuICAgICAgICBjaGlsZCxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICk7XG4gICAgfVxuICB9O1xuICBjb25zdCBwYXRjaEVsZW1lbnQgPSAobjEsIG4yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgZWwgPSBuMi5lbCA9IG4xLmVsO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgZWwuX192bm9kZSA9IG4yO1xuICAgIH1cbiAgICBsZXQgeyBwYXRjaEZsYWcsIGR5bmFtaWNDaGlsZHJlbiwgZGlycyB9ID0gbjI7XG4gICAgcGF0Y2hGbGFnIHw9IG4xLnBhdGNoRmxhZyAmIDE2O1xuICAgIGNvbnN0IG9sZFByb3BzID0gbjEucHJvcHMgfHwgRU1QVFlfT0JKO1xuICAgIGNvbnN0IG5ld1Byb3BzID0gbjIucHJvcHMgfHwgRU1QVFlfT0JKO1xuICAgIGxldCB2bm9kZUhvb2s7XG4gICAgcGFyZW50Q29tcG9uZW50ICYmIHRvZ2dsZVJlY3Vyc2UocGFyZW50Q29tcG9uZW50LCBmYWxzZSk7XG4gICAgaWYgKHZub2RlSG9vayA9IG5ld1Byb3BzLm9uVm5vZGVCZWZvcmVVcGRhdGUpIHtcbiAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgbjIsIG4xKTtcbiAgICB9XG4gICAgaWYgKGRpcnMpIHtcbiAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sobjIsIG4xLCBwYXJlbnRDb21wb25lbnQsIFwiYmVmb3JlVXBkYXRlXCIpO1xuICAgIH1cbiAgICBwYXJlbnRDb21wb25lbnQgJiYgdG9nZ2xlUmVjdXJzZShwYXJlbnRDb21wb25lbnQsIHRydWUpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICAgIHBhdGNoRmxhZyA9IDA7XG4gICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcbiAgICAgIGR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XG4gICAgfVxuICAgIGlmIChvbGRQcm9wcy5pbm5lckhUTUwgJiYgbmV3UHJvcHMuaW5uZXJIVE1MID09IG51bGwgfHwgb2xkUHJvcHMudGV4dENvbnRlbnQgJiYgbmV3UHJvcHMudGV4dENvbnRlbnQgPT0gbnVsbCkge1xuICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGVsLCBcIlwiKTtcbiAgICB9XG4gICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgcGF0Y2hCbG9ja0NoaWxkcmVuKFxuICAgICAgICBuMS5keW5hbWljQ2hpbGRyZW4sXG4gICAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgZWwsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIHJlc29sdmVDaGlsZHJlbk5hbWVzcGFjZShuMiwgbmFtZXNwYWNlKSxcbiAgICAgICAgc2xvdFNjb3BlSWRzXG4gICAgICApO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIW9wdGltaXplZCkge1xuICAgICAgcGF0Y2hDaGlsZHJlbihcbiAgICAgICAgbjEsXG4gICAgICAgIG4yLFxuICAgICAgICBlbCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgcmVzb2x2ZUNoaWxkcmVuTmFtZXNwYWNlKG4yLCBuYW1lc3BhY2UpLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAocGF0Y2hGbGFnID4gMCkge1xuICAgICAgaWYgKHBhdGNoRmxhZyAmIDE2KSB7XG4gICAgICAgIHBhdGNoUHJvcHMoZWwsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBuYW1lc3BhY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDIpIHtcbiAgICAgICAgICBpZiAob2xkUHJvcHMuY2xhc3MgIT09IG5ld1Byb3BzLmNsYXNzKSB7XG4gICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCBcImNsYXNzXCIsIG51bGwsIG5ld1Byb3BzLmNsYXNzLCBuYW1lc3BhY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0Y2hGbGFnICYgNCkge1xuICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIFwic3R5bGVcIiwgb2xkUHJvcHMuc3R5bGUsIG5ld1Byb3BzLnN0eWxlLCBuYW1lc3BhY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRjaEZsYWcgJiA4KSB7XG4gICAgICAgICAgY29uc3QgcHJvcHNUb1VwZGF0ZSA9IG4yLmR5bmFtaWNQcm9wcztcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzVG9VcGRhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XG4gICAgICAgICAgICBjb25zdCBwcmV2ID0gb2xkUHJvcHNba2V5XTtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xuICAgICAgICAgICAgaWYgKG5leHQgIT09IHByZXYgfHwga2V5ID09PSBcInZhbHVlXCIpIHtcbiAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBwcmV2LCBuZXh0LCBuYW1lc3BhY2UsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocGF0Y2hGbGFnICYgMSkge1xuICAgICAgICBpZiAobjEuY2hpbGRyZW4gIT09IG4yLmNoaWxkcmVuKSB7XG4gICAgICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGVsLCBuMi5jaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFvcHRpbWl6ZWQgJiYgZHluYW1pY0NoaWxkcmVuID09IG51bGwpIHtcbiAgICAgIHBhdGNoUHJvcHMoZWwsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBuYW1lc3BhY2UpO1xuICAgIH1cbiAgICBpZiAoKHZub2RlSG9vayA9IG5ld1Byb3BzLm9uVm5vZGVVcGRhdGVkKSB8fCBkaXJzKSB7XG4gICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xuICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xuICAgICAgICBkaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sobjIsIG4xLCBwYXJlbnRDb21wb25lbnQsIFwidXBkYXRlZFwiKTtcbiAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHBhdGNoQmxvY2tDaGlsZHJlbiA9IChvbGRDaGlsZHJlbiwgbmV3Q2hpbGRyZW4sIGZhbGxiYWNrQ29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcykgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG9sZFZOb2RlID0gb2xkQ2hpbGRyZW5baV07XG4gICAgICBjb25zdCBuZXdWTm9kZSA9IG5ld0NoaWxkcmVuW2ldO1xuICAgICAgY29uc3QgY29udGFpbmVyID0gKFxuICAgICAgICAvLyBvbGRWTm9kZSBtYXkgYmUgYW4gZXJyb3JlZCBhc3luYyBzZXR1cCgpIGNvbXBvbmVudCBpbnNpZGUgU3VzcGVuc2VcbiAgICAgICAgLy8gd2hpY2ggd2lsbCBub3QgaGF2ZSBhIG1vdW50ZWQgZWxlbWVudFxuICAgICAgICBvbGRWTm9kZS5lbCAmJiAvLyAtIEluIHRoZSBjYXNlIG9mIGEgRnJhZ21lbnQsIHdlIG5lZWQgdG8gcHJvdmlkZSB0aGUgYWN0dWFsIHBhcmVudFxuICAgICAgICAvLyBvZiB0aGUgRnJhZ21lbnQgaXRzZWxmIHNvIGl0IGNhbiBtb3ZlIGl0cyBjaGlsZHJlbi5cbiAgICAgICAgKG9sZFZOb2RlLnR5cGUgPT09IEZyYWdtZW50IHx8IC8vIC0gSW4gdGhlIGNhc2Ugb2YgZGlmZmVyZW50IG5vZGVzLCB0aGVyZSBpcyBnb2luZyB0byBiZSBhIHJlcGxhY2VtZW50XG4gICAgICAgIC8vIHdoaWNoIGFsc28gcmVxdWlyZXMgdGhlIGNvcnJlY3QgcGFyZW50IGNvbnRhaW5lclxuICAgICAgICAhaXNTYW1lVk5vZGVUeXBlKG9sZFZOb2RlLCBuZXdWTm9kZSkgfHwgLy8gLSBJbiB0aGUgY2FzZSBvZiBhIGNvbXBvbmVudCwgaXQgY291bGQgY29udGFpbiBhbnl0aGluZy5cbiAgICAgICAgb2xkVk5vZGUuc2hhcGVGbGFnICYgKDYgfCA2NCkpID8gaG9zdFBhcmVudE5vZGUob2xkVk5vZGUuZWwpIDogKFxuICAgICAgICAgIC8vIEluIG90aGVyIGNhc2VzLCB0aGUgcGFyZW50IGNvbnRhaW5lciBpcyBub3QgYWN0dWFsbHkgdXNlZCBzbyB3ZVxuICAgICAgICAgIC8vIGp1c3QgcGFzcyB0aGUgYmxvY2sgZWxlbWVudCBoZXJlIHRvIGF2b2lkIGEgRE9NIHBhcmVudE5vZGUgY2FsbC5cbiAgICAgICAgICBmYWxsYmFja0NvbnRhaW5lclxuICAgICAgICApXG4gICAgICApO1xuICAgICAgcGF0Y2goXG4gICAgICAgIG9sZFZOb2RlLFxuICAgICAgICBuZXdWTm9kZSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHBhdGNoUHJvcHMgPSAoZWwsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBuYW1lc3BhY2UpID0+IHtcbiAgICBpZiAob2xkUHJvcHMgIT09IG5ld1Byb3BzKSB7XG4gICAgICBpZiAob2xkUHJvcHMgIT09IEVNUFRZX09CSikge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRQcm9wcykge1xuICAgICAgICAgIGlmICghaXNSZXNlcnZlZFByb3Aoa2V5KSAmJiAhKGtleSBpbiBuZXdQcm9wcykpIHtcbiAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoXG4gICAgICAgICAgICAgIGVsLFxuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIG9sZFByb3BzW2tleV0sXG4gICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3UHJvcHMpIHtcbiAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBuZXh0ID0gbmV3UHJvcHNba2V5XTtcbiAgICAgICAgY29uc3QgcHJldiA9IG9sZFByb3BzW2tleV07XG4gICAgICAgIGlmIChuZXh0ICE9PSBwcmV2ICYmIGtleSAhPT0gXCJ2YWx1ZVwiKSB7XG4gICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBwcmV2LCBuZXh0LCBuYW1lc3BhY2UsIHBhcmVudENvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcInZhbHVlXCIgaW4gbmV3UHJvcHMpIHtcbiAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgXCJ2YWx1ZVwiLCBvbGRQcm9wcy52YWx1ZSwgbmV3UHJvcHMudmFsdWUsIG5hbWVzcGFjZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBwcm9jZXNzRnJhZ21lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIGNvbnN0IGZyYWdtZW50U3RhcnRBbmNob3IgPSBuMi5lbCA9IG4xID8gbjEuZWwgOiBob3N0Q3JlYXRlVGV4dChcIlwiKTtcbiAgICBjb25zdCBmcmFnbWVudEVuZEFuY2hvciA9IG4yLmFuY2hvciA9IG4xID8gbjEuYW5jaG9yIDogaG9zdENyZWF0ZVRleHQoXCJcIik7XG4gICAgbGV0IHsgcGF0Y2hGbGFnLCBkeW5hbWljQ2hpbGRyZW4sIHNsb3RTY29wZUlkczogZnJhZ21lbnRTbG90U2NvcGVJZHMgfSA9IG4yO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIC8vICM1NTIzIGRldiByb290IGZyYWdtZW50IG1heSBpbmhlcml0IGRpcmVjdGl2ZXNcbiAgICAoaXNIbXJVcGRhdGluZyB8fCBwYXRjaEZsYWcgJiAyMDQ4KSkge1xuICAgICAgcGF0Y2hGbGFnID0gMDtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGZyYWdtZW50U2xvdFNjb3BlSWRzKSB7XG4gICAgICBzbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHMgPyBzbG90U2NvcGVJZHMuY29uY2F0KGZyYWdtZW50U2xvdFNjb3BlSWRzKSA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xuICAgIH1cbiAgICBpZiAobjEgPT0gbnVsbCkge1xuICAgICAgaG9zdEluc2VydChmcmFnbWVudFN0YXJ0QW5jaG9yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICBob3N0SW5zZXJ0KGZyYWdtZW50RW5kQW5jaG9yLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICBtb3VudENoaWxkcmVuKFxuICAgICAgICAvLyAjMTAwMDdcbiAgICAgICAgLy8gc3VjaCBmcmFnbWVudCBsaWtlIGA8PjwvPmAgd2lsbCBiZSBjb21waWxlZCBpbnRvXG4gICAgICAgIC8vIGEgZnJhZ21lbnQgd2hpY2ggZG9lc24ndCBoYXZlIGEgY2hpbGRyZW4uXG4gICAgICAgIC8vIEluIHRoaXMgY2FzZSBmYWxsYmFjayB0byBhbiBlbXB0eSBhcnJheVxuICAgICAgICBuMi5jaGlsZHJlbiB8fCBbXSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBmcmFnbWVudEVuZEFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBhdGNoRmxhZyA+IDAgJiYgcGF0Y2hGbGFnICYgNjQgJiYgZHluYW1pY0NoaWxkcmVuICYmIC8vICMyNzE1IHRoZSBwcmV2aW91cyBmcmFnbWVudCBjb3VsZCd2ZSBiZWVuIGEgQkFJTGVkIG9uZSBhcyBhIHJlc3VsdFxuICAgICAgLy8gb2YgcmVuZGVyU2xvdCgpIHdpdGggbm8gdmFsaWQgY2hpbGRyZW5cbiAgICAgIG4xLmR5bmFtaWNDaGlsZHJlbikge1xuICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4oXG4gICAgICAgICAgbjEuZHluYW1pY0NoaWxkcmVuLFxuICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHNcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMik7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgLy8gIzIwODAgaWYgdGhlIHN0YWJsZSBmcmFnbWVudCBoYXMgYSBrZXksIGl0J3MgYSA8dGVtcGxhdGUgdi1mb3I+IHRoYXQgbWF5XG4gICAgICAgICAgLy8gIGdldCBtb3ZlZCBhcm91bmQuIE1ha2Ugc3VyZSBhbGwgcm9vdCBsZXZlbCB2bm9kZXMgaW5oZXJpdCBlbC5cbiAgICAgICAgICAvLyAjMjEzNCBvciBpZiBpdCdzIGEgY29tcG9uZW50IHJvb3QsIGl0IG1heSBhbHNvIGdldCBtb3ZlZCBhcm91bmRcbiAgICAgICAgICAvLyBhcyB0aGUgY29tcG9uZW50IGlzIGJlaW5nIG1vdmVkLlxuICAgICAgICAgIG4yLmtleSAhPSBudWxsIHx8IHBhcmVudENvbXBvbmVudCAmJiBuMiA9PT0gcGFyZW50Q29tcG9uZW50LnN1YlRyZWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihcbiAgICAgICAgICAgIG4xLFxuICAgICAgICAgICAgbjIsXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAvKiBzaGFsbG93ICovXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGF0Y2hDaGlsZHJlbihcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgZnJhZ21lbnRFbmRBbmNob3IsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBwcm9jZXNzQ29tcG9uZW50ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBuMi5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XG4gICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgIGlmIChuMi5zaGFwZUZsYWcgJiA1MTIpIHtcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LmN0eC5hY3RpdmF0ZShcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vdW50Q29tcG9uZW50KFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG1vdW50Q29tcG9uZW50ID0gKGluaXRpYWxWTm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgb3B0aW1pemVkKSA9PiB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSAoaW5pdGlhbFZOb2RlLmNvbXBvbmVudCA9IGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlKFxuICAgICAgaW5pdGlhbFZOb2RlLFxuICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgcGFyZW50U3VzcGVuc2VcbiAgICApKTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpbnN0YW5jZS50eXBlLl9faG1ySWQpIHtcbiAgICAgIHJlZ2lzdGVySE1SKGluc3RhbmNlKTtcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHB1c2hXYXJuaW5nQ29udGV4dChpbml0aWFsVk5vZGUpO1xuICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgbW91bnRgKTtcbiAgICB9XG4gICAgaWYgKGlzS2VlcEFsaXZlKGluaXRpYWxWTm9kZSkpIHtcbiAgICAgIGluc3RhbmNlLmN0eC5yZW5kZXJlciA9IGludGVybmFscztcbiAgICB9XG4gICAge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgaW5pdGApO1xuICAgICAgfVxuICAgICAgc2V0dXBDb21wb25lbnQoaW5zdGFuY2UsIGZhbHNlLCBvcHRpbWl6ZWQpO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYGluaXRgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluc3RhbmNlLmFzeW5jRGVwKSB7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBpc0htclVwZGF0aW5nKSBpbml0aWFsVk5vZGUuZWwgPSBudWxsO1xuICAgICAgcGFyZW50U3VzcGVuc2UgJiYgcGFyZW50U3VzcGVuc2UucmVnaXN0ZXJEZXAoaW5zdGFuY2UsIHNldHVwUmVuZGVyRWZmZWN0LCBvcHRpbWl6ZWQpO1xuICAgICAgaWYgKCFpbml0aWFsVk5vZGUuZWwpIHtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBpbnN0YW5jZS5zdWJUcmVlID0gY3JlYXRlVk5vZGUoQ29tbWVudCk7XG4gICAgICAgIHByb2Nlc3NDb21tZW50Tm9kZShudWxsLCBwbGFjZWhvbGRlciwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXR1cFJlbmRlckVmZmVjdChcbiAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgIGluaXRpYWxWTm9kZSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XG4gICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgbW91bnRgKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHVwZGF0ZUNvbXBvbmVudCA9IChuMSwgbjIsIG9wdGltaXplZCkgPT4ge1xuICAgIGNvbnN0IGluc3RhbmNlID0gbjIuY29tcG9uZW50ID0gbjEuY29tcG9uZW50O1xuICAgIGlmIChzaG91bGRVcGRhdGVDb21wb25lbnQobjEsIG4yLCBvcHRpbWl6ZWQpKSB7XG4gICAgICBpZiAoaW5zdGFuY2UuYXN5bmNEZXAgJiYgIWluc3RhbmNlLmFzeW5jUmVzb2x2ZWQpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQobjIpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbjIsIG9wdGltaXplZCk7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnN0YW5jZS5uZXh0ID0gbjI7XG4gICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBuMi5lbCA9IG4xLmVsO1xuICAgICAgaW5zdGFuY2Uudm5vZGUgPSBuMjtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHNldHVwUmVuZGVyRWZmZWN0ID0gKGluc3RhbmNlLCBpbml0aWFsVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBvcHRpbWl6ZWQpID0+IHtcbiAgICBjb25zdCBjb21wb25lbnRVcGRhdGVGbiA9ICgpID0+IHtcbiAgICAgIGlmICghaW5zdGFuY2UuaXNNb3VudGVkKSB7XG4gICAgICAgIGxldCB2bm9kZUhvb2s7XG4gICAgICAgIGNvbnN0IHsgZWwsIHByb3BzIH0gPSBpbml0aWFsVk5vZGU7XG4gICAgICAgIGNvbnN0IHsgYm0sIG0sIHBhcmVudCwgcm9vdCwgdHlwZSB9ID0gaW5zdGFuY2U7XG4gICAgICAgIGNvbnN0IGlzQXN5bmNXcmFwcGVyVk5vZGUgPSBpc0FzeW5jV3JhcHBlcihpbml0aWFsVk5vZGUpO1xuICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XG4gICAgICAgIGlmIChibSkge1xuICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzQXN5bmNXcmFwcGVyVk5vZGUgJiYgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVCZWZvcmVNb3VudCkpIHtcbiAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIGluaXRpYWxWTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XG4gICAgICAgIGlmIChlbCAmJiBoeWRyYXRlTm9kZSkge1xuICAgICAgICAgIGNvbnN0IGh5ZHJhdGVTdWJUcmVlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnN0YW5jZS5zdWJUcmVlID0gcmVuZGVyQ29tcG9uZW50Um9vdChpbnN0YW5jZSk7XG4gICAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBoeWRyYXRlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoeWRyYXRlTm9kZShcbiAgICAgICAgICAgICAgZWwsXG4gICAgICAgICAgICAgIGluc3RhbmNlLnN1YlRyZWUsXG4gICAgICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBoeWRyYXRlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoaXNBc3luY1dyYXBwZXJWTm9kZSAmJiB0eXBlLl9fYXN5bmNIeWRyYXRlKSB7XG4gICAgICAgICAgICB0eXBlLl9fYXN5bmNIeWRyYXRlKFxuICAgICAgICAgICAgICBlbCxcbiAgICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICAgIGh5ZHJhdGVTdWJUcmVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoeWRyYXRlU3ViVHJlZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAocm9vdC5jZSkge1xuICAgICAgICAgICAgcm9vdC5jZS5faW5qZWN0Q2hpbGRTdHlsZSh0eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBzdWJUcmVlID0gaW5zdGFuY2Uuc3ViVHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYXRjaChcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBzdWJUcmVlLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgaW5zdGFuY2UsXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICAgIG5hbWVzcGFjZVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbml0aWFsVk5vZGUuZWwgPSBzdWJUcmVlLmVsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KG0sIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzQXN5bmNXcmFwcGVyVk5vZGUgJiYgKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSkge1xuICAgICAgICAgIGNvbnN0IHNjb3BlZEluaXRpYWxWTm9kZSA9IGluaXRpYWxWTm9kZTtcbiAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoXG4gICAgICAgICAgICAoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIHNjb3BlZEluaXRpYWxWTm9kZSksXG4gICAgICAgICAgICBwYXJlbnRTdXNwZW5zZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluaXRpYWxWTm9kZS5zaGFwZUZsYWcgJiAyNTYgfHwgcGFyZW50ICYmIGlzQXN5bmNXcmFwcGVyKHBhcmVudC52bm9kZSkgJiYgcGFyZW50LnZub2RlLnNoYXBlRmxhZyAmIDI1Nikge1xuICAgICAgICAgIGluc3RhbmNlLmEgJiYgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGluc3RhbmNlLmEsIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICBpbml0aWFsVk5vZGUgPSBjb250YWluZXIgPSBhbmNob3IgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHsgbmV4dCwgYnUsIHUsIHBhcmVudCwgdm5vZGUgfSA9IGluc3RhbmNlO1xuICAgICAgICB7XG4gICAgICAgICAgY29uc3Qgbm9uSHlkcmF0ZWRBc3luY1Jvb3QgPSBsb2NhdGVOb25IeWRyYXRlZEFzeW5jUm9vdChpbnN0YW5jZSk7XG4gICAgICAgICAgaWYgKG5vbkh5ZHJhdGVkQXN5bmNSb290KSB7XG4gICAgICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgICBuZXh0LmVsID0gdm5vZGUuZWw7XG4gICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbmV4dCwgb3B0aW1pemVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vbkh5ZHJhdGVkQXN5bmNSb290LmFzeW5jRGVwLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlLmlzVW5tb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50VXBkYXRlRm4oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvcmlnaW5OZXh0ID0gbmV4dDtcbiAgICAgICAgbGV0IHZub2RlSG9vaztcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQobmV4dCB8fCBpbnN0YW5jZS52bm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgZmFsc2UpO1xuICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgIG5leHQuZWwgPSB2bm9kZS5lbDtcbiAgICAgICAgICB1cGRhdGVDb21wb25lbnRQcmVSZW5kZXIoaW5zdGFuY2UsIG5leHQsIG9wdGltaXplZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dCA9IHZub2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChidSkge1xuICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJ1KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVCZWZvcmVVcGRhdGUpIHtcbiAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIG5leHQsIHZub2RlKTtcbiAgICAgICAgfVxuICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCB0cnVlKTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0VHJlZSA9IHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2VHJlZSA9IGluc3RhbmNlLnN1YlRyZWU7XG4gICAgICAgIGluc3RhbmNlLnN1YlRyZWUgPSBuZXh0VHJlZTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICB9XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIHByZXZUcmVlLFxuICAgICAgICAgIG5leHRUcmVlLFxuICAgICAgICAgIC8vIHBhcmVudCBtYXkgaGF2ZSBjaGFuZ2VkIGlmIGl0J3MgaW4gYSB0ZWxlcG9ydFxuICAgICAgICAgIGhvc3RQYXJlbnROb2RlKHByZXZUcmVlLmVsKSxcbiAgICAgICAgICAvLyBhbmNob3IgbWF5IGhhdmUgY2hhbmdlZCBpZiBpdCdzIGluIGEgZnJhZ21lbnRcbiAgICAgICAgICBnZXROZXh0SG9zdE5vZGUocHJldlRyZWUpLFxuICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZVxuICAgICAgICApO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBwYXRjaGApO1xuICAgICAgICB9XG4gICAgICAgIG5leHQuZWwgPSBuZXh0VHJlZS5lbDtcbiAgICAgICAgaWYgKG9yaWdpbk5leHQgPT09IG51bGwpIHtcbiAgICAgICAgICB1cGRhdGVIT0NIb3N0RWwoaW5zdGFuY2UsIG5leHRUcmVlLmVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodSkge1xuICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCh1LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZub2RlSG9vayA9IG5leHQucHJvcHMgJiYgbmV4dC5wcm9wcy5vblZub2RlVXBkYXRlZCkge1xuICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChcbiAgICAgICAgICAgICgpID0+IGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudCwgbmV4dCwgdm5vZGUpLFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2VcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xuICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50VXBkYXRlZChpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBpbnN0YW5jZS5zY29wZS5vbigpO1xuICAgIGNvbnN0IGVmZmVjdCA9IGluc3RhbmNlLmVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChjb21wb25lbnRVcGRhdGVGbik7XG4gICAgaW5zdGFuY2Uuc2NvcGUub2ZmKCk7XG4gICAgY29uc3QgdXBkYXRlID0gaW5zdGFuY2UudXBkYXRlID0gZWZmZWN0LnJ1bi5iaW5kKGVmZmVjdCk7XG4gICAgY29uc3Qgam9iID0gaW5zdGFuY2Uuam9iID0gZWZmZWN0LnJ1bklmRGlydHkuYmluZChlZmZlY3QpO1xuICAgIGpvYi5pID0gaW5zdGFuY2U7XG4gICAgam9iLmlkID0gaW5zdGFuY2UudWlkO1xuICAgIGVmZmVjdC5zY2hlZHVsZXIgPSAoKSA9PiBxdWV1ZUpvYihqb2IpO1xuICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIHRydWUpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBlZmZlY3Qub25UcmFjayA9IGluc3RhbmNlLnJ0YyA/IChlKSA9PiBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5ydGMsIGUpIDogdm9pZCAwO1xuICAgICAgZWZmZWN0Lm9uVHJpZ2dlciA9IGluc3RhbmNlLnJ0ZyA/IChlKSA9PiBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5ydGcsIGUpIDogdm9pZCAwO1xuICAgIH1cbiAgICB1cGRhdGUoKTtcbiAgfTtcbiAgY29uc3QgdXBkYXRlQ29tcG9uZW50UHJlUmVuZGVyID0gKGluc3RhbmNlLCBuZXh0Vk5vZGUsIG9wdGltaXplZCkgPT4ge1xuICAgIG5leHRWTm9kZS5jb21wb25lbnQgPSBpbnN0YW5jZTtcbiAgICBjb25zdCBwcmV2UHJvcHMgPSBpbnN0YW5jZS52bm9kZS5wcm9wcztcbiAgICBpbnN0YW5jZS52bm9kZSA9IG5leHRWTm9kZTtcbiAgICBpbnN0YW5jZS5uZXh0ID0gbnVsbDtcbiAgICB1cGRhdGVQcm9wcyhpbnN0YW5jZSwgbmV4dFZOb2RlLnByb3BzLCBwcmV2UHJvcHMsIG9wdGltaXplZCk7XG4gICAgdXBkYXRlU2xvdHMoaW5zdGFuY2UsIG5leHRWTm9kZS5jaGlsZHJlbiwgb3B0aW1pemVkKTtcbiAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgZmx1c2hQcmVGbHVzaENicyhpbnN0YW5jZSk7XG4gICAgcmVzZXRUcmFja2luZygpO1xuICB9O1xuICBjb25zdCBwYXRjaENoaWxkcmVuID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IGMxID0gbjEgJiYgbjEuY2hpbGRyZW47XG4gICAgY29uc3QgcHJldlNoYXBlRmxhZyA9IG4xID8gbjEuc2hhcGVGbGFnIDogMDtcbiAgICBjb25zdCBjMiA9IG4yLmNoaWxkcmVuO1xuICAgIGNvbnN0IHsgcGF0Y2hGbGFnLCBzaGFwZUZsYWcgfSA9IG4yO1xuICAgIGlmIChwYXRjaEZsYWcgPiAwKSB7XG4gICAgICBpZiAocGF0Y2hGbGFnICYgMTI4KSB7XG4gICAgICAgIHBhdGNoS2V5ZWRDaGlsZHJlbihcbiAgICAgICAgICBjMSxcbiAgICAgICAgICBjMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2UgaWYgKHBhdGNoRmxhZyAmIDI1Nikge1xuICAgICAgICBwYXRjaFVua2V5ZWRDaGlsZHJlbihcbiAgICAgICAgICBjMSxcbiAgICAgICAgICBjMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChzaGFwZUZsYWcgJiA4KSB7XG4gICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9XG4gICAgICBpZiAoYzIgIT09IGMxKSB7XG4gICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsIGMyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHByZXZTaGFwZUZsYWcgJiAxNikge1xuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYpIHtcbiAgICAgICAgICBwYXRjaEtleWVkQ2hpbGRyZW4oXG4gICAgICAgICAgICBjMSxcbiAgICAgICAgICAgIGMyLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgOCkge1xuICAgICAgICAgIGhvc3RTZXRFbGVtZW50VGV4dChjb250YWluZXIsIFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNikge1xuICAgICAgICAgIG1vdW50Q2hpbGRyZW4oXG4gICAgICAgICAgICBjMixcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgcGF0Y2hVbmtleWVkQ2hpbGRyZW4gPSAoYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xuICAgIGMxID0gYzEgfHwgRU1QVFlfQVJSO1xuICAgIGMyID0gYzIgfHwgRU1QVFlfQVJSO1xuICAgIGNvbnN0IG9sZExlbmd0aCA9IGMxLmxlbmd0aDtcbiAgICBjb25zdCBuZXdMZW5ndGggPSBjMi5sZW5ndGg7XG4gICAgY29uc3QgY29tbW9uTGVuZ3RoID0gTWF0aC5taW4ob2xkTGVuZ3RoLCBuZXdMZW5ndGgpO1xuICAgIGxldCBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjb21tb25MZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbmV4dENoaWxkID0gYzJbaV0gPSBvcHRpbWl6ZWQgPyBjbG9uZUlmTW91bnRlZChjMltpXSkgOiBub3JtYWxpemVWTm9kZShjMltpXSk7XG4gICAgICBwYXRjaChcbiAgICAgICAgYzFbaV0sXG4gICAgICAgIG5leHRDaGlsZCxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAob2xkTGVuZ3RoID4gbmV3TGVuZ3RoKSB7XG4gICAgICB1bm1vdW50Q2hpbGRyZW4oXG4gICAgICAgIGMxLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICB0cnVlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgY29tbW9uTGVuZ3RoXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBtb3VudENoaWxkcmVuKFxuICAgICAgICBjMixcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICBvcHRpbWl6ZWQsXG4gICAgICAgIGNvbW1vbkxlbmd0aFxuICAgICAgKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHBhdGNoS2V5ZWRDaGlsZHJlbiA9IChjMSwgYzIsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBuYW1lc3BhY2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IGwyID0gYzIubGVuZ3RoO1xuICAgIGxldCBlMSA9IGMxLmxlbmd0aCAtIDE7XG4gICAgbGV0IGUyID0gbDIgLSAxO1xuICAgIHdoaWxlIChpIDw9IGUxICYmIGkgPD0gZTIpIHtcbiAgICAgIGNvbnN0IG4xID0gYzFbaV07XG4gICAgICBjb25zdCBuMiA9IGMyW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pO1xuICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIG4xLFxuICAgICAgICAgIG4yLFxuICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICAgIHdoaWxlIChpIDw9IGUxICYmIGkgPD0gZTIpIHtcbiAgICAgIGNvbnN0IG4xID0gYzFbZTFdO1xuICAgICAgY29uc3QgbjIgPSBjMltlMl0gPSBvcHRpbWl6ZWQgPyBjbG9uZUlmTW91bnRlZChjMltlMl0pIDogbm9ybWFsaXplVk5vZGUoYzJbZTJdKTtcbiAgICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSkge1xuICAgICAgICBwYXRjaChcbiAgICAgICAgICBuMSxcbiAgICAgICAgICBuMixcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZTEtLTtcbiAgICAgIGUyLS07XG4gICAgfVxuICAgIGlmIChpID4gZTEpIHtcbiAgICAgIGlmIChpIDw9IGUyKSB7XG4gICAgICAgIGNvbnN0IG5leHRQb3MgPSBlMiArIDE7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5leHRQb3MgPCBsMiA/IGMyW25leHRQb3NdLmVsIDogcGFyZW50QW5jaG9yO1xuICAgICAgICB3aGlsZSAoaSA8PSBlMikge1xuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGMyW2ldID0gb3B0aW1pemVkID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pLFxuICAgICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaSA+IGUyKSB7XG4gICAgICB3aGlsZSAoaSA8PSBlMSkge1xuICAgICAgICB1bm1vdW50KGMxW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcbiAgICAgICAgaSsrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzMSA9IGk7XG4gICAgICBjb25zdCBzMiA9IGk7XG4gICAgICBjb25zdCBrZXlUb05ld0luZGV4TWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgIGZvciAoaSA9IHMyOyBpIDw9IGUyOyBpKyspIHtcbiAgICAgICAgY29uc3QgbmV4dENoaWxkID0gYzJbaV0gPSBvcHRpbWl6ZWQgPyBjbG9uZUlmTW91bnRlZChjMltpXSkgOiBub3JtYWxpemVWTm9kZShjMltpXSk7XG4gICAgICAgIGlmIChuZXh0Q2hpbGQua2V5ICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBrZXlUb05ld0luZGV4TWFwLmhhcyhuZXh0Q2hpbGQua2V5KSkge1xuICAgICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgICBgRHVwbGljYXRlIGtleXMgZm91bmQgZHVyaW5nIHVwZGF0ZTpgLFxuICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShuZXh0Q2hpbGQua2V5KSxcbiAgICAgICAgICAgICAgYE1ha2Ugc3VyZSBrZXlzIGFyZSB1bmlxdWUuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAga2V5VG9OZXdJbmRleE1hcC5zZXQobmV4dENoaWxkLmtleSwgaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCBqO1xuICAgICAgbGV0IHBhdGNoZWQgPSAwO1xuICAgICAgY29uc3QgdG9CZVBhdGNoZWQgPSBlMiAtIHMyICsgMTtcbiAgICAgIGxldCBtb3ZlZCA9IGZhbHNlO1xuICAgICAgbGV0IG1heE5ld0luZGV4U29GYXIgPSAwO1xuICAgICAgY29uc3QgbmV3SW5kZXhUb09sZEluZGV4TWFwID0gbmV3IEFycmF5KHRvQmVQYXRjaGVkKTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0b0JlUGF0Y2hlZDsgaSsrKSBuZXdJbmRleFRvT2xkSW5kZXhNYXBbaV0gPSAwO1xuICAgICAgZm9yIChpID0gczE7IGkgPD0gZTE7IGkrKykge1xuICAgICAgICBjb25zdCBwcmV2Q2hpbGQgPSBjMVtpXTtcbiAgICAgICAgaWYgKHBhdGNoZWQgPj0gdG9CZVBhdGNoZWQpIHtcbiAgICAgICAgICB1bm1vdW50KHByZXZDaGlsZCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5ld0luZGV4O1xuICAgICAgICBpZiAocHJldkNoaWxkLmtleSAhPSBudWxsKSB7XG4gICAgICAgICAgbmV3SW5kZXggPSBrZXlUb05ld0luZGV4TWFwLmdldChwcmV2Q2hpbGQua2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGogPSBzMjsgaiA8PSBlMjsgaisrKSB7XG4gICAgICAgICAgICBpZiAobmV3SW5kZXhUb09sZEluZGV4TWFwW2ogLSBzMl0gPT09IDAgJiYgaXNTYW1lVk5vZGVUeXBlKHByZXZDaGlsZCwgYzJbal0pKSB7XG4gICAgICAgICAgICAgIG5ld0luZGV4ID0gajtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdJbmRleCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdW5tb3VudChwcmV2Q2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0luZGV4VG9PbGRJbmRleE1hcFtuZXdJbmRleCAtIHMyXSA9IGkgKyAxO1xuICAgICAgICAgIGlmIChuZXdJbmRleCA+PSBtYXhOZXdJbmRleFNvRmFyKSB7XG4gICAgICAgICAgICBtYXhOZXdJbmRleFNvRmFyID0gbmV3SW5kZXg7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1vdmVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcGF0Y2goXG4gICAgICAgICAgICBwcmV2Q2hpbGQsXG4gICAgICAgICAgICBjMltuZXdJbmRleF0sXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgICBvcHRpbWl6ZWRcbiAgICAgICAgICApO1xuICAgICAgICAgIHBhdGNoZWQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UgPSBtb3ZlZCA/IGdldFNlcXVlbmNlKG5ld0luZGV4VG9PbGRJbmRleE1hcCkgOiBFTVBUWV9BUlI7XG4gICAgICBqID0gaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UubGVuZ3RoIC0gMTtcbiAgICAgIGZvciAoaSA9IHRvQmVQYXRjaGVkIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gczIgKyBpO1xuICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSBjMltuZXh0SW5kZXhdO1xuICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0SW5kZXggKyAxIDwgbDIgPyBjMltuZXh0SW5kZXggKyAxXS5lbCA6IHBhcmVudEFuY2hvcjtcbiAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtpXSA9PT0gMCkge1xuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG5leHRDaGlsZCxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChtb3ZlZCkge1xuICAgICAgICAgIGlmIChqIDwgMCB8fCBpICE9PSBpbmNyZWFzaW5nTmV3SW5kZXhTZXF1ZW5jZVtqXSkge1xuICAgICAgICAgICAgbW92ZShuZXh0Q2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCAyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgai0tO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgbW92ZSA9ICh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlLCBwYXJlbnRTdXNwZW5zZSA9IG51bGwpID0+IHtcbiAgICBjb25zdCB7IGVsLCB0eXBlLCB0cmFuc2l0aW9uLCBjaGlsZHJlbiwgc2hhcGVGbGFnIH0gPSB2bm9kZTtcbiAgICBpZiAoc2hhcGVGbGFnICYgNikge1xuICAgICAgbW92ZSh2bm9kZS5jb21wb25lbnQuc3ViVHJlZSwgY29udGFpbmVyLCBhbmNob3IsIG1vdmVUeXBlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDEyOCkge1xuICAgICAgdm5vZGUuc3VzcGVuc2UubW92ZShjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc2hhcGVGbGFnICYgNjQpIHtcbiAgICAgIHR5cGUubW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIGludGVybmFscyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBtb3ZlKGNoaWxkcmVuW2ldLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xuICAgICAgfVxuICAgICAgaG9zdEluc2VydCh2bm9kZS5hbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgbW92ZVN0YXRpY05vZGUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbmVlZFRyYW5zaXRpb24yID0gbW92ZVR5cGUgIT09IDIgJiYgc2hhcGVGbGFnICYgMSAmJiB0cmFuc2l0aW9uO1xuICAgIGlmIChuZWVkVHJhbnNpdGlvbjIpIHtcbiAgICAgIGlmIChtb3ZlVHlwZSA9PT0gMCkge1xuICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcbiAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xuICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4gdHJhbnNpdGlvbi5lbnRlcihlbCksIHBhcmVudFN1c3BlbnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHsgbGVhdmUsIGRlbGF5TGVhdmUsIGFmdGVyTGVhdmUgfSA9IHRyYW5zaXRpb247XG4gICAgICAgIGNvbnN0IHJlbW92ZTIgPSAoKSA9PiBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgICBsZWF2ZShlbCwgKCkgPT4ge1xuICAgICAgICAgICAgcmVtb3ZlMigpO1xuICAgICAgICAgICAgYWZ0ZXJMZWF2ZSAmJiBhZnRlckxlYXZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgICAgZGVsYXlMZWF2ZShlbCwgcmVtb3ZlMiwgcGVyZm9ybUxlYXZlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bm1vdW50ID0gKHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHR5cGUsXG4gICAgICBwcm9wcyxcbiAgICAgIHJlZixcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgZHluYW1pY0NoaWxkcmVuLFxuICAgICAgc2hhcGVGbGFnLFxuICAgICAgcGF0Y2hGbGFnLFxuICAgICAgZGlycyxcbiAgICAgIGNhY2hlSW5kZXhcbiAgICB9ID0gdm5vZGU7XG4gICAgaWYgKHBhdGNoRmxhZyA9PT0gLTIpIHtcbiAgICAgIG9wdGltaXplZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAocmVmICE9IG51bGwpIHtcbiAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChjYWNoZUluZGV4ICE9IG51bGwpIHtcbiAgICAgIHBhcmVudENvbXBvbmVudC5yZW5kZXJDYWNoZVtjYWNoZUluZGV4XSA9IHZvaWQgMDtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDI1Nikge1xuICAgICAgcGFyZW50Q29tcG9uZW50LmN0eC5kZWFjdGl2YXRlKHZub2RlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2hvdWxkSW52b2tlRGlycyA9IHNoYXBlRmxhZyAmIDEgJiYgZGlycztcbiAgICBjb25zdCBzaG91bGRJbnZva2VWbm9kZUhvb2sgPSAhaXNBc3luY1dyYXBwZXIodm5vZGUpO1xuICAgIGxldCB2bm9kZUhvb2s7XG4gICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJiAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZVVubW91bnQpKSB7XG4gICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcbiAgICB9XG4gICAgaWYgKHNoYXBlRmxhZyAmIDYpIHtcbiAgICAgIHVubW91bnRDb21wb25lbnQodm5vZGUuY29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICAgIHZub2RlLnN1c3BlbnNlLnVubW91bnQocGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHNob3VsZEludm9rZURpcnMpIHtcbiAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBcImJlZm9yZVVubW91bnRcIik7XG4gICAgICB9XG4gICAgICBpZiAoc2hhcGVGbGFnICYgNjQpIHtcbiAgICAgICAgdm5vZGUudHlwZS5yZW1vdmUoXG4gICAgICAgICAgdm5vZGUsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLFxuICAgICAgICAgIGludGVybmFscyxcbiAgICAgICAgICBkb1JlbW92ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChkeW5hbWljQ2hpbGRyZW4gJiYgLy8gIzUxNTRcbiAgICAgIC8vIHdoZW4gdi1vbmNlIGlzIHVzZWQgaW5zaWRlIGEgYmxvY2ssIHNldEJsb2NrVHJhY2tpbmcoLTEpIG1hcmtzIHRoZVxuICAgICAgLy8gcGFyZW50IGJsb2NrIHdpdGggaGFzT25jZTogdHJ1ZVxuICAgICAgLy8gc28gdGhhdCBpdCBkb2Vzbid0IHRha2UgdGhlIGZhc3QgcGF0aCBkdXJpbmcgdW5tb3VudCAtIG90aGVyd2lzZVxuICAgICAgLy8gY29tcG9uZW50cyBuZXN0ZWQgaW4gdi1vbmNlIGFyZSBuZXZlciB1bm1vdW50ZWQuXG4gICAgICAhZHluYW1pY0NoaWxkcmVuLmhhc09uY2UgJiYgLy8gIzExNTM6IGZhc3QgcGF0aCBzaG91bGQgbm90IGJlIHRha2VuIGZvciBub24tc3RhYmxlICh2LWZvcikgZnJhZ21lbnRzXG4gICAgICAodHlwZSAhPT0gRnJhZ21lbnQgfHwgcGF0Y2hGbGFnID4gMCAmJiBwYXRjaEZsYWcgJiA2NCkpIHtcbiAgICAgICAgdW5tb3VudENoaWxkcmVuKFxuICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbixcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBGcmFnbWVudCAmJiBwYXRjaEZsYWcgJiAoMTI4IHwgMjU2KSB8fCAhb3B0aW1pemVkICYmIHNoYXBlRmxhZyAmIDE2KSB7XG4gICAgICAgIHVubW91bnRDaGlsZHJlbihjaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgICB9XG4gICAgICBpZiAoZG9SZW1vdmUpIHtcbiAgICAgICAgcmVtb3ZlKHZub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNob3VsZEludm9rZVZub2RlSG9vayAmJiAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZVVubW91bnRlZCkgfHwgc2hvdWxkSW52b2tlRGlycykge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcbiAgICAgICAgdm5vZGVIb29rICYmIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xuICAgICAgICBzaG91bGRJbnZva2VEaXJzICYmIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgXCJ1bm1vdW50ZWRcIik7XG4gICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgfVxuICB9O1xuICBjb25zdCByZW1vdmUgPSAodm5vZGUpID0+IHtcbiAgICBjb25zdCB7IHR5cGUsIGVsLCBhbmNob3IsIHRyYW5zaXRpb24gfSA9IHZub2RlO1xuICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdm5vZGUucGF0Y2hGbGFnID4gMCAmJiB2bm9kZS5wYXRjaEZsYWcgJiAyMDQ4ICYmIHRyYW5zaXRpb24gJiYgIXRyYW5zaXRpb24ucGVyc2lzdGVkKSB7XG4gICAgICAgIHZub2RlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IENvbW1lbnQpIHtcbiAgICAgICAgICAgIGhvc3RSZW1vdmUoY2hpbGQuZWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmUoY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZW1vdmVGcmFnbWVudChlbCwgYW5jaG9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09IFN0YXRpYykge1xuICAgICAgcmVtb3ZlU3RhdGljTm9kZSh2bm9kZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBlcmZvcm1SZW1vdmUgPSAoKSA9PiB7XG4gICAgICBob3N0UmVtb3ZlKGVsKTtcbiAgICAgIGlmICh0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCAmJiB0cmFuc2l0aW9uLmFmdGVyTGVhdmUpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5hZnRlckxlYXZlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMSAmJiB0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCkge1xuICAgICAgY29uc3QgeyBsZWF2ZSwgZGVsYXlMZWF2ZSB9ID0gdHJhbnNpdGlvbjtcbiAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IGxlYXZlKGVsLCBwZXJmb3JtUmVtb3ZlKTtcbiAgICAgIGlmIChkZWxheUxlYXZlKSB7XG4gICAgICAgIGRlbGF5TGVhdmUodm5vZGUuZWwsIHBlcmZvcm1SZW1vdmUsIHBlcmZvcm1MZWF2ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwZXJmb3JtTGVhdmUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcGVyZm9ybVJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcmVtb3ZlRnJhZ21lbnQgPSAoY3VyLCBlbmQpID0+IHtcbiAgICBsZXQgbmV4dDtcbiAgICB3aGlsZSAoY3VyICE9PSBlbmQpIHtcbiAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoY3VyKTtcbiAgICAgIGhvc3RSZW1vdmUoY3VyKTtcbiAgICAgIGN1ciA9IG5leHQ7XG4gICAgfVxuICAgIGhvc3RSZW1vdmUoZW5kKTtcbiAgfTtcbiAgY29uc3QgdW5tb3VudENvbXBvbmVudCA9IChpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKSA9PiB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaW5zdGFuY2UudHlwZS5fX2htcklkKSB7XG4gICAgICB1bnJlZ2lzdGVySE1SKGluc3RhbmNlKTtcbiAgICB9XG4gICAgY29uc3QgeyBidW0sIHNjb3BlLCBqb2IsIHN1YlRyZWUsIHVtLCBtLCBhIH0gPSBpbnN0YW5jZTtcbiAgICBpbnZhbGlkYXRlTW91bnQobSk7XG4gICAgaW52YWxpZGF0ZU1vdW50KGEpO1xuICAgIGlmIChidW0pIHtcbiAgICAgIGludm9rZUFycmF5Rm5zKGJ1bSk7XG4gICAgfVxuICAgIHNjb3BlLnN0b3AoKTtcbiAgICBpZiAoam9iKSB7XG4gICAgICBqb2IuZmxhZ3MgfD0gODtcbiAgICAgIHVubW91bnQoc3ViVHJlZSwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XG4gICAgfVxuICAgIGlmICh1bSkge1xuICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KHVtLCBwYXJlbnRTdXNwZW5zZSk7XG4gICAgfVxuICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XG4gICAgICBpbnN0YW5jZS5pc1VubW91bnRlZCA9IHRydWU7XG4gICAgfSwgcGFyZW50U3VzcGVuc2UpO1xuICAgIGlmIChwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmICFwYXJlbnRTdXNwZW5zZS5pc1VubW91bnRlZCAmJiBpbnN0YW5jZS5hc3luY0RlcCAmJiAhaW5zdGFuY2UuYXN5bmNSZXNvbHZlZCAmJiBpbnN0YW5jZS5zdXNwZW5zZUlkID09PSBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nSWQpIHtcbiAgICAgIHBhcmVudFN1c3BlbnNlLmRlcHMtLTtcbiAgICAgIGlmIChwYXJlbnRTdXNwZW5zZS5kZXBzID09PSAwKSB7XG4gICAgICAgIHBhcmVudFN1c3BlbnNlLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQoaW5zdGFuY2UpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgdW5tb3VudENoaWxkcmVuID0gKGNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSwgc3RhcnQgPSAwKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVubW91bnQoY2hpbGRyZW5baV0sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlLCBvcHRpbWl6ZWQpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgZ2V0TmV4dEhvc3ROb2RlID0gKHZub2RlKSA9PiB7XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDYpIHtcbiAgICAgIHJldHVybiBnZXROZXh0SG9zdE5vZGUodm5vZGUuY29tcG9uZW50LnN1YlRyZWUpO1xuICAgIH1cbiAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMTI4KSB7XG4gICAgICByZXR1cm4gdm5vZGUuc3VzcGVuc2UubmV4dCgpO1xuICAgIH1cbiAgICBjb25zdCBlbCA9IGhvc3ROZXh0U2libGluZyh2bm9kZS5hbmNob3IgfHwgdm5vZGUuZWwpO1xuICAgIGNvbnN0IHRlbGVwb3J0RW5kID0gZWwgJiYgZWxbVGVsZXBvcnRFbmRLZXldO1xuICAgIHJldHVybiB0ZWxlcG9ydEVuZCA/IGhvc3ROZXh0U2libGluZyh0ZWxlcG9ydEVuZCkgOiBlbDtcbiAgfTtcbiAgbGV0IGlzRmx1c2hpbmcgPSBmYWxzZTtcbiAgY29uc3QgcmVuZGVyID0gKHZub2RlLCBjb250YWluZXIsIG5hbWVzcGFjZSkgPT4ge1xuICAgIGlmICh2bm9kZSA9PSBudWxsKSB7XG4gICAgICBpZiAoY29udGFpbmVyLl92bm9kZSkge1xuICAgICAgICB1bm1vdW50KGNvbnRhaW5lci5fdm5vZGUsIG51bGwsIG51bGwsIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXRjaChcbiAgICAgICAgY29udGFpbmVyLl92bm9kZSB8fCBudWxsLFxuICAgICAgICB2bm9kZSxcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICBuYW1lc3BhY2VcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnRhaW5lci5fdm5vZGUgPSB2bm9kZTtcbiAgICBpZiAoIWlzRmx1c2hpbmcpIHtcbiAgICAgIGlzRmx1c2hpbmcgPSB0cnVlO1xuICAgICAgZmx1c2hQcmVGbHVzaENicygpO1xuICAgICAgZmx1c2hQb3N0Rmx1c2hDYnMoKTtcbiAgICAgIGlzRmx1c2hpbmcgPSBmYWxzZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGludGVybmFscyA9IHtcbiAgICBwOiBwYXRjaCxcbiAgICB1bTogdW5tb3VudCxcbiAgICBtOiBtb3ZlLFxuICAgIHI6IHJlbW92ZSxcbiAgICBtdDogbW91bnRDb21wb25lbnQsXG4gICAgbWM6IG1vdW50Q2hpbGRyZW4sXG4gICAgcGM6IHBhdGNoQ2hpbGRyZW4sXG4gICAgcGJjOiBwYXRjaEJsb2NrQ2hpbGRyZW4sXG4gICAgbjogZ2V0TmV4dEhvc3ROb2RlLFxuICAgIG86IG9wdGlvbnNcbiAgfTtcbiAgbGV0IGh5ZHJhdGU7XG4gIGxldCBoeWRyYXRlTm9kZTtcbiAgaWYgKGNyZWF0ZUh5ZHJhdGlvbkZucykge1xuICAgIFtoeWRyYXRlLCBoeWRyYXRlTm9kZV0gPSBjcmVhdGVIeWRyYXRpb25GbnMoXG4gICAgICBpbnRlcm5hbHNcbiAgICApO1xuICB9XG4gIHJldHVybiB7XG4gICAgcmVuZGVyLFxuICAgIGh5ZHJhdGUsXG4gICAgY3JlYXRlQXBwOiBjcmVhdGVBcHBBUEkocmVuZGVyLCBoeWRyYXRlKVxuICB9O1xufVxuZnVuY3Rpb24gcmVzb2x2ZUNoaWxkcmVuTmFtZXNwYWNlKHsgdHlwZSwgcHJvcHMgfSwgY3VycmVudE5hbWVzcGFjZSkge1xuICByZXR1cm4gY3VycmVudE5hbWVzcGFjZSA9PT0gXCJzdmdcIiAmJiB0eXBlID09PSBcImZvcmVpZ25PYmplY3RcIiB8fCBjdXJyZW50TmFtZXNwYWNlID09PSBcIm1hdGhtbFwiICYmIHR5cGUgPT09IFwiYW5ub3RhdGlvbi14bWxcIiAmJiBwcm9wcyAmJiBwcm9wcy5lbmNvZGluZyAmJiBwcm9wcy5lbmNvZGluZy5pbmNsdWRlcyhcImh0bWxcIikgPyB2b2lkIDAgOiBjdXJyZW50TmFtZXNwYWNlO1xufVxuZnVuY3Rpb24gdG9nZ2xlUmVjdXJzZSh7IGVmZmVjdCwgam9iIH0sIGFsbG93ZWQpIHtcbiAgaWYgKGFsbG93ZWQpIHtcbiAgICBlZmZlY3QuZmxhZ3MgfD0gMzI7XG4gICAgam9iLmZsYWdzIHw9IDQ7XG4gIH0gZWxzZSB7XG4gICAgZWZmZWN0LmZsYWdzICY9IH4zMjtcbiAgICBqb2IuZmxhZ3MgJj0gfjQ7XG4gIH1cbn1cbmZ1bmN0aW9uIG5lZWRUcmFuc2l0aW9uKHBhcmVudFN1c3BlbnNlLCB0cmFuc2l0aW9uKSB7XG4gIHJldHVybiAoIXBhcmVudFN1c3BlbnNlIHx8IHBhcmVudFN1c3BlbnNlICYmICFwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSAmJiB0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZDtcbn1cbmZ1bmN0aW9uIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCBzaGFsbG93ID0gZmFsc2UpIHtcbiAgY29uc3QgY2gxID0gbjEuY2hpbGRyZW47XG4gIGNvbnN0IGNoMiA9IG4yLmNoaWxkcmVuO1xuICBpZiAoaXNBcnJheShjaDEpICYmIGlzQXJyYXkoY2gyKSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2gxLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjMSA9IGNoMVtpXTtcbiAgICAgIGxldCBjMiA9IGNoMltpXTtcbiAgICAgIGlmIChjMi5zaGFwZUZsYWcgJiAxICYmICFjMi5keW5hbWljQ2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKGMyLnBhdGNoRmxhZyA8PSAwIHx8IGMyLnBhdGNoRmxhZyA9PT0gMzIpIHtcbiAgICAgICAgICBjMiA9IGNoMltpXSA9IGNsb25lSWZNb3VudGVkKGNoMltpXSk7XG4gICAgICAgICAgYzIuZWwgPSBjMS5lbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNoYWxsb3cgJiYgYzIucGF0Y2hGbGFnICE9PSAtMilcbiAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKGMxLCBjMik7XG4gICAgICB9XG4gICAgICBpZiAoYzIudHlwZSA9PT0gVGV4dCkge1xuICAgICAgICBjMi5lbCA9IGMxLmVsO1xuICAgICAgfVxuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgYzIudHlwZSA9PT0gQ29tbWVudCAmJiAhYzIuZWwpIHtcbiAgICAgICAgYzIuZWwgPSBjMS5lbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFNlcXVlbmNlKGFycikge1xuICBjb25zdCBwID0gYXJyLnNsaWNlKCk7XG4gIGNvbnN0IHJlc3VsdCA9IFswXTtcbiAgbGV0IGksIGosIHUsIHYsIGM7XG4gIGNvbnN0IGxlbiA9IGFyci5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IGFyckkgPSBhcnJbaV07XG4gICAgaWYgKGFyckkgIT09IDApIHtcbiAgICAgIGogPSByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGFycltqXSA8IGFyckkpIHtcbiAgICAgICAgcFtpXSA9IGo7XG4gICAgICAgIHJlc3VsdC5wdXNoKGkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHUgPSAwO1xuICAgICAgdiA9IHJlc3VsdC5sZW5ndGggLSAxO1xuICAgICAgd2hpbGUgKHUgPCB2KSB7XG4gICAgICAgIGMgPSB1ICsgdiA+PiAxO1xuICAgICAgICBpZiAoYXJyW3Jlc3VsdFtjXV0gPCBhcnJJKSB7XG4gICAgICAgICAgdSA9IGMgKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHYgPSBjO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYXJySSA8IGFycltyZXN1bHRbdV1dKSB7XG4gICAgICAgIGlmICh1ID4gMCkge1xuICAgICAgICAgIHBbaV0gPSByZXN1bHRbdSAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdFt1XSA9IGk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHUgPSByZXN1bHQubGVuZ3RoO1xuICB2ID0gcmVzdWx0W3UgLSAxXTtcbiAgd2hpbGUgKHUtLSA+IDApIHtcbiAgICByZXN1bHRbdV0gPSB2O1xuICAgIHYgPSBwW3ZdO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBsb2NhdGVOb25IeWRyYXRlZEFzeW5jUm9vdChpbnN0YW5jZSkge1xuICBjb25zdCBzdWJDb21wb25lbnQgPSBpbnN0YW5jZS5zdWJUcmVlLmNvbXBvbmVudDtcbiAgaWYgKHN1YkNvbXBvbmVudCkge1xuICAgIGlmIChzdWJDb21wb25lbnQuYXN5bmNEZXAgJiYgIXN1YkNvbXBvbmVudC5hc3luY1Jlc29sdmVkKSB7XG4gICAgICByZXR1cm4gc3ViQ29tcG9uZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbG9jYXRlTm9uSHlkcmF0ZWRBc3luY1Jvb3Qoc3ViQ29tcG9uZW50KTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGludmFsaWRhdGVNb3VudChob29rcykge1xuICBpZiAoaG9va3MpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKVxuICAgICAgaG9va3NbaV0uZmxhZ3MgfD0gODtcbiAgfVxufVxuXG5jb25zdCBzc3JDb250ZXh0S2V5ID0gU3ltYm9sLmZvcihcInYtc2N4XCIpO1xuY29uc3QgdXNlU1NSQ29udGV4dCA9ICgpID0+IHtcbiAge1xuICAgIGNvbnN0IGN0eCA9IGluamVjdChzc3JDb250ZXh0S2V5KTtcbiAgICBpZiAoIWN0eCkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuJDEoXG4gICAgICAgIGBTZXJ2ZXIgcmVuZGVyaW5nIGNvbnRleHQgbm90IHByb3ZpZGVkLiBNYWtlIHN1cmUgdG8gb25seSBjYWxsIHVzZVNTUkNvbnRleHQoKSBjb25kaXRpb25hbGx5IGluIHRoZSBzZXJ2ZXIgYnVpbGQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGN0eDtcbiAgfVxufTtcblxuZnVuY3Rpb24gd2F0Y2hFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gIHJldHVybiBkb1dhdGNoKGVmZmVjdCwgbnVsbCwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiB3YXRjaFBvc3RFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XG4gIHJldHVybiBkb1dhdGNoKFxuICAgIGVmZmVjdCxcbiAgICBudWxsLFxuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBleHRlbmQoe30sIG9wdGlvbnMsIHsgZmx1c2g6IFwicG9zdFwiIH0pIDogeyBmbHVzaDogXCJwb3N0XCIgfVxuICApO1xufVxuZnVuY3Rpb24gd2F0Y2hTeW5jRWZmZWN0KGVmZmVjdCwgb3B0aW9ucykge1xuICByZXR1cm4gZG9XYXRjaChcbiAgICBlZmZlY3QsXG4gICAgbnVsbCxcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gZXh0ZW5kKHt9LCBvcHRpb25zLCB7IGZsdXNoOiBcInN5bmNcIiB9KSA6IHsgZmx1c2g6IFwic3luY1wiIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIHdhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnMpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWlzRnVuY3Rpb24oY2IpKSB7XG4gICAgd2FybiQxKFxuICAgICAgYFxcYHdhdGNoKGZuLCBvcHRpb25zPylcXGAgc2lnbmF0dXJlIGhhcyBiZWVuIG1vdmVkIHRvIGEgc2VwYXJhdGUgQVBJLiBVc2UgXFxgd2F0Y2hFZmZlY3QoZm4sIG9wdGlvbnM/KVxcYCBpbnN0ZWFkLiBcXGB3YXRjaFxcYCBub3cgb25seSBzdXBwb3J0cyBcXGB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zPykgc2lnbmF0dXJlLmBcbiAgICApO1xuICB9XG4gIHJldHVybiBkb1dhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gZG9XYXRjaChzb3VyY2UsIGNiLCBvcHRpb25zID0gRU1QVFlfT0JKKSB7XG4gIGNvbnN0IHsgaW1tZWRpYXRlLCBkZWVwLCBmbHVzaCwgb25jZSB9ID0gb3B0aW9ucztcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWNiKSB7XG4gICAgaWYgKGltbWVkaWF0ZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGB3YXRjaCgpIFwiaW1tZWRpYXRlXCIgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgdGhlIHdhdGNoKHNvdXJjZSwgY2FsbGJhY2ssIG9wdGlvbnM/KSBzaWduYXR1cmUuYFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGRlZXAgIT09IHZvaWQgMCkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgd2F0Y2goKSBcImRlZXBcIiBvcHRpb24gaXMgb25seSByZXNwZWN0ZWQgd2hlbiB1c2luZyB0aGUgd2F0Y2goc291cmNlLCBjYWxsYmFjaywgb3B0aW9ucz8pIHNpZ25hdHVyZS5gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAob25jZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGB3YXRjaCgpIFwib25jZVwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSB3YXRjaChzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zPykgc2lnbmF0dXJlLmBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGJhc2VXYXRjaE9wdGlvbnMgPSBleHRlbmQoe30sIG9wdGlvbnMpO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkgYmFzZVdhdGNoT3B0aW9ucy5vbldhcm4gPSB3YXJuJDE7XG4gIGNvbnN0IHJ1bnNJbW1lZGlhdGVseSA9IGNiICYmIGltbWVkaWF0ZSB8fCAhY2IgJiYgZmx1c2ggIT09IFwicG9zdFwiO1xuICBsZXQgc3NyQ2xlYW51cDtcbiAgaWYgKGlzSW5TU1JDb21wb25lbnRTZXR1cCkge1xuICAgIGlmIChmbHVzaCA9PT0gXCJzeW5jXCIpIHtcbiAgICAgIGNvbnN0IGN0eCA9IHVzZVNTUkNvbnRleHQoKTtcbiAgICAgIHNzckNsZWFudXAgPSBjdHguX193YXRjaGVySGFuZGxlcyB8fCAoY3R4Ll9fd2F0Y2hlckhhbmRsZXMgPSBbXSk7XG4gICAgfSBlbHNlIGlmICghcnVuc0ltbWVkaWF0ZWx5KSB7XG4gICAgICBjb25zdCB3YXRjaFN0b3BIYW5kbGUgPSAoKSA9PiB7XG4gICAgICB9O1xuICAgICAgd2F0Y2hTdG9wSGFuZGxlLnN0b3AgPSBOT09QO1xuICAgICAgd2F0Y2hTdG9wSGFuZGxlLnJlc3VtZSA9IE5PT1A7XG4gICAgICB3YXRjaFN0b3BIYW5kbGUucGF1c2UgPSBOT09QO1xuICAgICAgcmV0dXJuIHdhdGNoU3RvcEhhbmRsZTtcbiAgICB9XG4gIH1cbiAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XG4gIGJhc2VXYXRjaE9wdGlvbnMuY2FsbCA9IChmbiwgdHlwZSwgYXJncykgPT4gY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKTtcbiAgbGV0IGlzUHJlID0gZmFsc2U7XG4gIGlmIChmbHVzaCA9PT0gXCJwb3N0XCIpIHtcbiAgICBiYXNlV2F0Y2hPcHRpb25zLnNjaGVkdWxlciA9IChqb2IpID0+IHtcbiAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChqb2IsIGluc3RhbmNlICYmIGluc3RhbmNlLnN1c3BlbnNlKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKGZsdXNoICE9PSBcInN5bmNcIikge1xuICAgIGlzUHJlID0gdHJ1ZTtcbiAgICBiYXNlV2F0Y2hPcHRpb25zLnNjaGVkdWxlciA9IChqb2IsIGlzRmlyc3RSdW4pID0+IHtcbiAgICAgIGlmIChpc0ZpcnN0UnVuKSB7XG4gICAgICAgIGpvYigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVKb2Ioam9iKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGJhc2VXYXRjaE9wdGlvbnMuYXVnbWVudEpvYiA9IChqb2IpID0+IHtcbiAgICBpZiAoY2IpIHtcbiAgICAgIGpvYi5mbGFncyB8PSA0O1xuICAgIH1cbiAgICBpZiAoaXNQcmUpIHtcbiAgICAgIGpvYi5mbGFncyB8PSAyO1xuICAgICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgIGpvYi5pZCA9IGluc3RhbmNlLnVpZDtcbiAgICAgICAgam9iLmkgPSBpbnN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHdhdGNoSGFuZGxlID0gd2F0Y2gkMShzb3VyY2UsIGNiLCBiYXNlV2F0Y2hPcHRpb25zKTtcbiAgaWYgKGlzSW5TU1JDb21wb25lbnRTZXR1cCkge1xuICAgIGlmIChzc3JDbGVhbnVwKSB7XG4gICAgICBzc3JDbGVhbnVwLnB1c2god2F0Y2hIYW5kbGUpO1xuICAgIH0gZWxzZSBpZiAocnVuc0ltbWVkaWF0ZWx5KSB7XG4gICAgICB3YXRjaEhhbmRsZSgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gd2F0Y2hIYW5kbGU7XG59XG5mdW5jdGlvbiBpbnN0YW5jZVdhdGNoKHNvdXJjZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgY29uc3QgcHVibGljVGhpcyA9IHRoaXMucHJveHk7XG4gIGNvbnN0IGdldHRlciA9IGlzU3RyaW5nKHNvdXJjZSkgPyBzb3VyY2UuaW5jbHVkZXMoXCIuXCIpID8gY3JlYXRlUGF0aEdldHRlcihwdWJsaWNUaGlzLCBzb3VyY2UpIDogKCkgPT4gcHVibGljVGhpc1tzb3VyY2VdIDogc291cmNlLmJpbmQocHVibGljVGhpcywgcHVibGljVGhpcyk7XG4gIGxldCBjYjtcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgY2IgPSB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICBjYiA9IHZhbHVlLmhhbmRsZXI7XG4gICAgb3B0aW9ucyA9IHZhbHVlO1xuICB9XG4gIGNvbnN0IHJlc2V0ID0gc2V0Q3VycmVudEluc3RhbmNlKHRoaXMpO1xuICBjb25zdCByZXMgPSBkb1dhdGNoKGdldHRlciwgY2IuYmluZChwdWJsaWNUaGlzKSwgb3B0aW9ucyk7XG4gIHJlc2V0KCk7XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBjcmVhdGVQYXRoR2V0dGVyKGN0eCwgcGF0aCkge1xuICBjb25zdCBzZWdtZW50cyA9IHBhdGguc3BsaXQoXCIuXCIpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGxldCBjdXIgPSBjdHg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGggJiYgY3VyOyBpKyspIHtcbiAgICAgIGN1ciA9IGN1cltzZWdtZW50c1tpXV07XG4gICAgfVxuICAgIHJldHVybiBjdXI7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZU1vZGVsKHByb3BzLCBuYW1lLCBvcHRpb25zID0gRU1QVFlfT0JKKSB7XG4gIGNvbnN0IGkgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgIWkpIHtcbiAgICB3YXJuJDEoYHVzZU1vZGVsKCkgY2FsbGVkIHdpdGhvdXQgYWN0aXZlIGluc3RhbmNlLmApO1xuICAgIHJldHVybiByZWYoKTtcbiAgfVxuICBjb25zdCBjYW1lbGl6ZWROYW1lID0gY2FtZWxpemUobmFtZSk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpLnByb3BzT3B0aW9uc1swXVtjYW1lbGl6ZWROYW1lXSkge1xuICAgIHdhcm4kMShgdXNlTW9kZWwoKSBjYWxsZWQgd2l0aCBwcm9wIFwiJHtuYW1lfVwiIHdoaWNoIGlzIG5vdCBkZWNsYXJlZC5gKTtcbiAgICByZXR1cm4gcmVmKCk7XG4gIH1cbiAgY29uc3QgaHlwaGVuYXRlZE5hbWUgPSBoeXBoZW5hdGUobmFtZSk7XG4gIGNvbnN0IG1vZGlmaWVycyA9IGdldE1vZGVsTW9kaWZpZXJzKHByb3BzLCBjYW1lbGl6ZWROYW1lKTtcbiAgY29uc3QgcmVzID0gY3VzdG9tUmVmKCh0cmFjaywgdHJpZ2dlcikgPT4ge1xuICAgIGxldCBsb2NhbFZhbHVlO1xuICAgIGxldCBwcmV2U2V0VmFsdWUgPSBFTVBUWV9PQko7XG4gICAgbGV0IHByZXZFbWl0dGVkVmFsdWU7XG4gICAgd2F0Y2hTeW5jRWZmZWN0KCgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BWYWx1ZSA9IHByb3BzW2NhbWVsaXplZE5hbWVdO1xuICAgICAgaWYgKGhhc0NoYW5nZWQobG9jYWxWYWx1ZSwgcHJvcFZhbHVlKSkge1xuICAgICAgICBsb2NhbFZhbHVlID0gcHJvcFZhbHVlO1xuICAgICAgICB0cmlnZ2VyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgdHJhY2soKTtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0ID8gb3B0aW9ucy5nZXQobG9jYWxWYWx1ZSkgOiBsb2NhbFZhbHVlO1xuICAgICAgfSxcbiAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICBjb25zdCBlbWl0dGVkVmFsdWUgPSBvcHRpb25zLnNldCA/IG9wdGlvbnMuc2V0KHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICBpZiAoIWhhc0NoYW5nZWQoZW1pdHRlZFZhbHVlLCBsb2NhbFZhbHVlKSAmJiAhKHByZXZTZXRWYWx1ZSAhPT0gRU1QVFlfT0JKICYmIGhhc0NoYW5nZWQodmFsdWUsIHByZXZTZXRWYWx1ZSkpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJhd1Byb3BzID0gaS52bm9kZS5wcm9wcztcbiAgICAgICAgaWYgKCEocmF3UHJvcHMgJiYgLy8gY2hlY2sgaWYgcGFyZW50IGhhcyBwYXNzZWQgdi1tb2RlbFxuICAgICAgICAobmFtZSBpbiByYXdQcm9wcyB8fCBjYW1lbGl6ZWROYW1lIGluIHJhd1Byb3BzIHx8IGh5cGhlbmF0ZWROYW1lIGluIHJhd1Byb3BzKSAmJiAoYG9uVXBkYXRlOiR7bmFtZX1gIGluIHJhd1Byb3BzIHx8IGBvblVwZGF0ZToke2NhbWVsaXplZE5hbWV9YCBpbiByYXdQcm9wcyB8fCBgb25VcGRhdGU6JHtoeXBoZW5hdGVkTmFtZX1gIGluIHJhd1Byb3BzKSkpIHtcbiAgICAgICAgICBsb2NhbFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgdHJpZ2dlcigpO1xuICAgICAgICB9XG4gICAgICAgIGkuZW1pdChgdXBkYXRlOiR7bmFtZX1gLCBlbWl0dGVkVmFsdWUpO1xuICAgICAgICBpZiAoaGFzQ2hhbmdlZCh2YWx1ZSwgZW1pdHRlZFZhbHVlKSAmJiBoYXNDaGFuZ2VkKHZhbHVlLCBwcmV2U2V0VmFsdWUpICYmICFoYXNDaGFuZ2VkKGVtaXR0ZWRWYWx1ZSwgcHJldkVtaXR0ZWRWYWx1ZSkpIHtcbiAgICAgICAgICB0cmlnZ2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcHJldlNldFZhbHVlID0gdmFsdWU7XG4gICAgICAgIHByZXZFbWl0dGVkVmFsdWUgPSBlbWl0dGVkVmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4gIHJlc1tTeW1ib2wuaXRlcmF0b3JdID0gKCkgPT4ge1xuICAgIGxldCBpMiA9IDA7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGlmIChpMiA8IDIpIHtcbiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogaTIrKyA/IG1vZGlmaWVycyB8fCBFTVBUWV9PQkogOiByZXMsIGRvbmU6IGZhbHNlIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIHJlcztcbn1cbmNvbnN0IGdldE1vZGVsTW9kaWZpZXJzID0gKHByb3BzLCBtb2RlbE5hbWUpID0+IHtcbiAgcmV0dXJuIG1vZGVsTmFtZSA9PT0gXCJtb2RlbFZhbHVlXCIgfHwgbW9kZWxOYW1lID09PSBcIm1vZGVsLXZhbHVlXCIgPyBwcm9wcy5tb2RlbE1vZGlmaWVycyA6IHByb3BzW2Ake21vZGVsTmFtZX1Nb2RpZmllcnNgXSB8fCBwcm9wc1tgJHtjYW1lbGl6ZShtb2RlbE5hbWUpfU1vZGlmaWVyc2BdIHx8IHByb3BzW2Ake2h5cGhlbmF0ZShtb2RlbE5hbWUpfU1vZGlmaWVyc2BdO1xufTtcblxuZnVuY3Rpb24gZW1pdChpbnN0YW5jZSwgZXZlbnQsIC4uLnJhd0FyZ3MpIHtcbiAgaWYgKGluc3RhbmNlLmlzVW5tb3VudGVkKSByZXR1cm47XG4gIGNvbnN0IHByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHMgfHwgRU1QVFlfT0JKO1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGVtaXRzT3B0aW9ucyxcbiAgICAgIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc11cbiAgICB9ID0gaW5zdGFuY2U7XG4gICAgaWYgKGVtaXRzT3B0aW9ucykge1xuICAgICAgaWYgKCEoZXZlbnQgaW4gZW1pdHNPcHRpb25zKSAmJiB0cnVlKSB7XG4gICAgICAgIGlmICghcHJvcHNPcHRpb25zIHx8ICEodG9IYW5kbGVyS2V5KGNhbWVsaXplKGV2ZW50KSkgaW4gcHJvcHNPcHRpb25zKSkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBDb21wb25lbnQgZW1pdHRlZCBldmVudCBcIiR7ZXZlbnR9XCIgYnV0IGl0IGlzIG5laXRoZXIgZGVjbGFyZWQgaW4gdGhlIGVtaXRzIG9wdGlvbiBub3IgYXMgYW4gXCIke3RvSGFuZGxlcktleShjYW1lbGl6ZShldmVudCkpfVwiIHByb3AuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRvciA9IGVtaXRzT3B0aW9uc1tldmVudF07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbGlkYXRvcikpIHtcbiAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gdmFsaWRhdG9yKC4uLnJhd0FyZ3MpO1xuICAgICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgICBgSW52YWxpZCBldmVudCBhcmd1bWVudHM6IGV2ZW50IHZhbGlkYXRpb24gZmFpbGVkIGZvciBldmVudCBcIiR7ZXZlbnR9XCIuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgbGV0IGFyZ3MgPSByYXdBcmdzO1xuICBjb25zdCBpc01vZGVsTGlzdGVuZXIgPSBldmVudC5zdGFydHNXaXRoKFwidXBkYXRlOlwiKTtcbiAgY29uc3QgbW9kaWZpZXJzID0gaXNNb2RlbExpc3RlbmVyICYmIGdldE1vZGVsTW9kaWZpZXJzKHByb3BzLCBldmVudC5zbGljZSg3KSk7XG4gIGlmIChtb2RpZmllcnMpIHtcbiAgICBpZiAobW9kaWZpZXJzLnRyaW0pIHtcbiAgICAgIGFyZ3MgPSByYXdBcmdzLm1hcCgoYSkgPT4gaXNTdHJpbmcoYSkgPyBhLnRyaW0oKSA6IGEpO1xuICAgIH1cbiAgICBpZiAobW9kaWZpZXJzLm51bWJlcikge1xuICAgICAgYXJncyA9IHJhd0FyZ3MubWFwKGxvb3NlVG9OdW1iZXIpO1xuICAgIH1cbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcbiAgICBkZXZ0b29sc0NvbXBvbmVudEVtaXQoaW5zdGFuY2UsIGV2ZW50LCBhcmdzKTtcbiAgfVxuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGNvbnN0IGxvd2VyQ2FzZUV2ZW50ID0gZXZlbnQudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobG93ZXJDYXNlRXZlbnQgIT09IGV2ZW50ICYmIHByb3BzW3RvSGFuZGxlcktleShsb3dlckNhc2VFdmVudCldKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBFdmVudCBcIiR7bG93ZXJDYXNlRXZlbnR9XCIgaXMgZW1pdHRlZCBpbiBjb21wb25lbnQgJHtmb3JtYXRDb21wb25lbnROYW1lKFxuICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgIGluc3RhbmNlLnR5cGVcbiAgICAgICAgKX0gYnV0IHRoZSBoYW5kbGVyIGlzIHJlZ2lzdGVyZWQgZm9yIFwiJHtldmVudH1cIi4gTm90ZSB0aGF0IEhUTUwgYXR0cmlidXRlcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZSBhbmQgeW91IGNhbm5vdCB1c2Ugdi1vbiB0byBsaXN0ZW4gdG8gY2FtZWxDYXNlIGV2ZW50cyB3aGVuIHVzaW5nIGluLURPTSB0ZW1wbGF0ZXMuIFlvdSBzaG91bGQgcHJvYmFibHkgdXNlIFwiJHtoeXBoZW5hdGUoXG4gICAgICAgICAgZXZlbnRcbiAgICAgICAgKX1cIiBpbnN0ZWFkIG9mIFwiJHtldmVudH1cIi5gXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBsZXQgaGFuZGxlck5hbWU7XG4gIGxldCBoYW5kbGVyID0gcHJvcHNbaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoZXZlbnQpXSB8fCAvLyBhbHNvIHRyeSBjYW1lbENhc2UgZXZlbnQgaGFuZGxlciAoIzIyNDkpXG4gIHByb3BzW2hhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGNhbWVsaXplKGV2ZW50KSldO1xuICBpZiAoIWhhbmRsZXIgJiYgaXNNb2RlbExpc3RlbmVyKSB7XG4gICAgaGFuZGxlciA9IHByb3BzW2hhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGh5cGhlbmF0ZShldmVudCkpXTtcbiAgfVxuICBpZiAoaGFuZGxlcikge1xuICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKFxuICAgICAgaGFuZGxlcixcbiAgICAgIGluc3RhbmNlLFxuICAgICAgNixcbiAgICAgIGFyZ3NcbiAgICApO1xuICB9XG4gIGNvbnN0IG9uY2VIYW5kbGVyID0gcHJvcHNbaGFuZGxlck5hbWUgKyBgT25jZWBdO1xuICBpZiAob25jZUhhbmRsZXIpIHtcbiAgICBpZiAoIWluc3RhbmNlLmVtaXR0ZWQpIHtcbiAgICAgIGluc3RhbmNlLmVtaXR0ZWQgPSB7fTtcbiAgICB9IGVsc2UgaWYgKGluc3RhbmNlLmVtaXR0ZWRbaGFuZGxlck5hbWVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGluc3RhbmNlLmVtaXR0ZWRbaGFuZGxlck5hbWVdID0gdHJ1ZTtcbiAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhcbiAgICAgIG9uY2VIYW5kbGVyLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICA2LFxuICAgICAgYXJnc1xuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyhjb21wLCBhcHBDb250ZXh0LCBhc01peGluID0gZmFsc2UpIHtcbiAgY29uc3QgY2FjaGUgPSBhcHBDb250ZXh0LmVtaXRzQ2FjaGU7XG4gIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChjb21wKTtcbiAgaWYgKGNhY2hlZCAhPT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIGNhY2hlZDtcbiAgfVxuICBjb25zdCByYXcgPSBjb21wLmVtaXRzO1xuICBsZXQgbm9ybWFsaXplZCA9IHt9O1xuICBsZXQgaGFzRXh0ZW5kcyA9IGZhbHNlO1xuICBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiAhaXNGdW5jdGlvbihjb21wKSkge1xuICAgIGNvbnN0IGV4dGVuZEVtaXRzID0gKHJhdzIpID0+IHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRGcm9tRXh0ZW5kID0gbm9ybWFsaXplRW1pdHNPcHRpb25zKHJhdzIsIGFwcENvbnRleHQsIHRydWUpO1xuICAgICAgaWYgKG5vcm1hbGl6ZWRGcm9tRXh0ZW5kKSB7XG4gICAgICAgIGhhc0V4dGVuZHMgPSB0cnVlO1xuICAgICAgICBleHRlbmQobm9ybWFsaXplZCwgbm9ybWFsaXplZEZyb21FeHRlbmQpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKCFhc01peGluICYmIGFwcENvbnRleHQubWl4aW5zLmxlbmd0aCkge1xuICAgICAgYXBwQ29udGV4dC5taXhpbnMuZm9yRWFjaChleHRlbmRFbWl0cyk7XG4gICAgfVxuICAgIGlmIChjb21wLmV4dGVuZHMpIHtcbiAgICAgIGV4dGVuZEVtaXRzKGNvbXAuZXh0ZW5kcyk7XG4gICAgfVxuICAgIGlmIChjb21wLm1peGlucykge1xuICAgICAgY29tcC5taXhpbnMuZm9yRWFjaChleHRlbmRFbWl0cyk7XG4gICAgfVxuICB9XG4gIGlmICghcmF3ICYmICFoYXNFeHRlbmRzKSB7XG4gICAgaWYgKGlzT2JqZWN0KGNvbXApKSB7XG4gICAgICBjYWNoZS5zZXQoY29tcCwgbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChpc0FycmF5KHJhdykpIHtcbiAgICByYXcuZm9yRWFjaCgoa2V5KSA9PiBub3JtYWxpemVkW2tleV0gPSBudWxsKTtcbiAgfSBlbHNlIHtcbiAgICBleHRlbmQobm9ybWFsaXplZCwgcmF3KTtcbiAgfVxuICBpZiAoaXNPYmplY3QoY29tcCkpIHtcbiAgICBjYWNoZS5zZXQoY29tcCwgbm9ybWFsaXplZCk7XG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59XG5mdW5jdGlvbiBpc0VtaXRMaXN0ZW5lcihvcHRpb25zLCBrZXkpIHtcbiAgaWYgKCFvcHRpb25zIHx8ICFpc09uKGtleSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAga2V5ID0ga2V5LnNsaWNlKDIpLnJlcGxhY2UoL09uY2UkLywgXCJcIik7XG4gIHJldHVybiBoYXNPd24ob3B0aW9ucywga2V5WzBdLnRvTG93ZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSkpIHx8IGhhc093bihvcHRpb25zLCBoeXBoZW5hdGUoa2V5KSkgfHwgaGFzT3duKG9wdGlvbnMsIGtleSk7XG59XG5cbmxldCBhY2Nlc3NlZEF0dHJzID0gZmFsc2U7XG5mdW5jdGlvbiBtYXJrQXR0cnNBY2Nlc3NlZCgpIHtcbiAgYWNjZXNzZWRBdHRycyA9IHRydWU7XG59XG5mdW5jdGlvbiByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSB7XG4gIGNvbnN0IHtcbiAgICB0eXBlOiBDb21wb25lbnQsXG4gICAgdm5vZGUsXG4gICAgcHJveHksXG4gICAgd2l0aFByb3h5LFxuICAgIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc10sXG4gICAgc2xvdHMsXG4gICAgYXR0cnMsXG4gICAgZW1pdCxcbiAgICByZW5kZXIsXG4gICAgcmVuZGVyQ2FjaGUsXG4gICAgcHJvcHMsXG4gICAgZGF0YSxcbiAgICBzZXR1cFN0YXRlLFxuICAgIGN0eCxcbiAgICBpbmhlcml0QXR0cnNcbiAgfSA9IGluc3RhbmNlO1xuICBjb25zdCBwcmV2ID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGluc3RhbmNlKTtcbiAgbGV0IHJlc3VsdDtcbiAgbGV0IGZhbGx0aHJvdWdoQXR0cnM7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgYWNjZXNzZWRBdHRycyA9IGZhbHNlO1xuICB9XG4gIHRyeSB7XG4gICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDQpIHtcbiAgICAgIGNvbnN0IHByb3h5VG9Vc2UgPSB3aXRoUHJveHkgfHwgcHJveHk7XG4gICAgICBjb25zdCB0aGlzUHJveHkgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwID8gbmV3IFByb3h5KHByb3h5VG9Vc2UsIHtcbiAgICAgICAgZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBQcm9wZXJ0eSAnJHtTdHJpbmcoXG4gICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgKX0nIHdhcyBhY2Nlc3NlZCB2aWEgJ3RoaXMnLiBBdm9pZCB1c2luZyAndGhpcycgaW4gdGVtcGxhdGVzLmBcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xuICAgICAgICB9XG4gICAgICB9KSA6IHByb3h5VG9Vc2U7XG4gICAgICByZXN1bHQgPSBub3JtYWxpemVWTm9kZShcbiAgICAgICAgcmVuZGVyLmNhbGwoXG4gICAgICAgICAgdGhpc1Byb3h5LFxuICAgICAgICAgIHByb3h5VG9Vc2UsXG4gICAgICAgICAgcmVuZGVyQ2FjaGUsXG4gICAgICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShwcm9wcykgOiBwcm9wcyxcbiAgICAgICAgICBzZXR1cFN0YXRlLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgY3R4XG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBmYWxsdGhyb3VnaEF0dHJzID0gYXR0cnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlbmRlcjIgPSBDb21wb25lbnQ7XG4gICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBhdHRycyA9PT0gcHJvcHMpIHtcbiAgICAgICAgbWFya0F0dHJzQWNjZXNzZWQoKTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdCA9IG5vcm1hbGl6ZVZOb2RlKFxuICAgICAgICByZW5kZXIyLmxlbmd0aCA+IDEgPyByZW5kZXIyKFxuICAgICAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBzaGFsbG93UmVhZG9ubHkocHJvcHMpIDogcHJvcHMsXG4gICAgICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHtcbiAgICAgICAgICAgIGdldCBhdHRycygpIHtcbiAgICAgICAgICAgICAgbWFya0F0dHJzQWNjZXNzZWQoKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHNoYWxsb3dSZWFkb25seShhdHRycyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2xvdHMsXG4gICAgICAgICAgICBlbWl0XG4gICAgICAgICAgfSA6IHsgYXR0cnMsIHNsb3RzLCBlbWl0IH1cbiAgICAgICAgKSA6IHJlbmRlcjIoXG4gICAgICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNoYWxsb3dSZWFkb25seShwcm9wcykgOiBwcm9wcyxcbiAgICAgICAgICBudWxsXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBmYWxsdGhyb3VnaEF0dHJzID0gQ29tcG9uZW50LnByb3BzID8gYXR0cnMgOiBnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2goYXR0cnMpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgYmxvY2tTdGFjay5sZW5ndGggPSAwO1xuICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDEpO1xuICAgIHJlc3VsdCA9IGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xuICB9XG4gIGxldCByb290ID0gcmVzdWx0O1xuICBsZXQgc2V0Um9vdCA9IHZvaWQgMDtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgcmVzdWx0LnBhdGNoRmxhZyA+IDAgJiYgcmVzdWx0LnBhdGNoRmxhZyAmIDIwNDgpIHtcbiAgICBbcm9vdCwgc2V0Um9vdF0gPSBnZXRDaGlsZFJvb3QocmVzdWx0KTtcbiAgfVxuICBpZiAoZmFsbHRocm91Z2hBdHRycyAmJiBpbmhlcml0QXR0cnMgIT09IGZhbHNlKSB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGZhbGx0aHJvdWdoQXR0cnMpO1xuICAgIGNvbnN0IHsgc2hhcGVGbGFnIH0gPSByb290O1xuICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgaWYgKHNoYXBlRmxhZyAmICgxIHwgNikpIHtcbiAgICAgICAgaWYgKHByb3BzT3B0aW9ucyAmJiBrZXlzLnNvbWUoaXNNb2RlbExpc3RlbmVyKSkge1xuICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBmaWx0ZXJNb2RlbExpc3RlbmVycyhcbiAgICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMsXG4gICAgICAgICAgICBwcm9wc09wdGlvbnNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJvb3QgPSBjbG9uZVZOb2RlKHJvb3QsIGZhbGx0aHJvdWdoQXR0cnMsIGZhbHNlLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhYWNjZXNzZWRBdHRycyAmJiByb290LnR5cGUgIT09IENvbW1lbnQpIHtcbiAgICAgICAgY29uc3QgYWxsQXR0cnMgPSBPYmplY3Qua2V5cyhhdHRycyk7XG4gICAgICAgIGNvbnN0IGV2ZW50QXR0cnMgPSBbXTtcbiAgICAgICAgY29uc3QgZXh0cmFBdHRycyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFsbEF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGtleSA9IGFsbEF0dHJzW2ldO1xuICAgICAgICAgIGlmIChpc09uKGtleSkpIHtcbiAgICAgICAgICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkpIHtcbiAgICAgICAgICAgICAgZXZlbnRBdHRycy5wdXNoKGtleVsyXS50b0xvd2VyQ2FzZSgpICsga2V5LnNsaWNlKDMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXh0cmFBdHRycy5wdXNoKGtleSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChleHRyYUF0dHJzLmxlbmd0aCkge1xuICAgICAgICAgIHdhcm4kMShcbiAgICAgICAgICAgIGBFeHRyYW5lb3VzIG5vbi1wcm9wcyBhdHRyaWJ1dGVzICgke2V4dHJhQXR0cnMuam9pbihcIiwgXCIpfSkgd2VyZSBwYXNzZWQgdG8gY29tcG9uZW50IGJ1dCBjb3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBpbmhlcml0ZWQgYmVjYXVzZSBjb21wb25lbnQgcmVuZGVycyBmcmFnbWVudCBvciB0ZXh0IG9yIHRlbGVwb3J0IHJvb3Qgbm9kZXMuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50QXR0cnMubGVuZ3RoKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYEV4dHJhbmVvdXMgbm9uLWVtaXRzIGV2ZW50IGxpc3RlbmVycyAoJHtldmVudEF0dHJzLmpvaW4oXCIsIFwiKX0pIHdlcmUgcGFzc2VkIHRvIGNvbXBvbmVudCBidXQgY291bGQgbm90IGJlIGF1dG9tYXRpY2FsbHkgaW5oZXJpdGVkIGJlY2F1c2UgY29tcG9uZW50IHJlbmRlcnMgZnJhZ21lbnQgb3IgdGV4dCByb290IG5vZGVzLiBJZiB0aGUgbGlzdGVuZXIgaXMgaW50ZW5kZWQgdG8gYmUgYSBjb21wb25lbnQgY3VzdG9tIGV2ZW50IGxpc3RlbmVyIG9ubHksIGRlY2xhcmUgaXQgdXNpbmcgdGhlIFwiZW1pdHNcIiBvcHRpb24uYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKHZub2RlLmRpcnMpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaXNFbGVtZW50Um9vdChyb290KSkge1xuICAgICAgd2FybiQxKFxuICAgICAgICBgUnVudGltZSBkaXJlY3RpdmUgdXNlZCBvbiBjb21wb25lbnQgd2l0aCBub24tZWxlbWVudCByb290IG5vZGUuIFRoZSBkaXJlY3RpdmVzIHdpbGwgbm90IGZ1bmN0aW9uIGFzIGludGVuZGVkLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJvb3QgPSBjbG9uZVZOb2RlKHJvb3QsIG51bGwsIGZhbHNlLCB0cnVlKTtcbiAgICByb290LmRpcnMgPSByb290LmRpcnMgPyByb290LmRpcnMuY29uY2F0KHZub2RlLmRpcnMpIDogdm5vZGUuZGlycztcbiAgfVxuICBpZiAodm5vZGUudHJhbnNpdGlvbikge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFpc0VsZW1lbnRSb290KHJvb3QpKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBDb21wb25lbnQgaW5zaWRlIDxUcmFuc2l0aW9uPiByZW5kZXJzIG5vbi1lbGVtZW50IHJvb3Qgbm9kZSB0aGF0IGNhbm5vdCBiZSBhbmltYXRlZC5gXG4gICAgICApO1xuICAgIH1cbiAgICBzZXRUcmFuc2l0aW9uSG9va3Mocm9vdCwgdm5vZGUudHJhbnNpdGlvbik7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgc2V0Um9vdCkge1xuICAgIHNldFJvb3Qocm9vdCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gcm9vdDtcbiAgfVxuICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UocHJldik7XG4gIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBnZXRDaGlsZFJvb3QgPSAodm5vZGUpID0+IHtcbiAgY29uc3QgcmF3Q2hpbGRyZW4gPSB2bm9kZS5jaGlsZHJlbjtcbiAgY29uc3QgZHluYW1pY0NoaWxkcmVuID0gdm5vZGUuZHluYW1pY0NoaWxkcmVuO1xuICBjb25zdCBjaGlsZFJvb3QgPSBmaWx0ZXJTaW5nbGVSb290KHJhd0NoaWxkcmVuLCBmYWxzZSk7XG4gIGlmICghY2hpbGRSb290KSB7XG4gICAgcmV0dXJuIFt2bm9kZSwgdm9pZCAwXTtcbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGNoaWxkUm9vdC5wYXRjaEZsYWcgPiAwICYmIGNoaWxkUm9vdC5wYXRjaEZsYWcgJiAyMDQ4KSB7XG4gICAgcmV0dXJuIGdldENoaWxkUm9vdChjaGlsZFJvb3QpO1xuICB9XG4gIGNvbnN0IGluZGV4ID0gcmF3Q2hpbGRyZW4uaW5kZXhPZihjaGlsZFJvb3QpO1xuICBjb25zdCBkeW5hbWljSW5kZXggPSBkeW5hbWljQ2hpbGRyZW4gPyBkeW5hbWljQ2hpbGRyZW4uaW5kZXhPZihjaGlsZFJvb3QpIDogLTE7XG4gIGNvbnN0IHNldFJvb3QgPSAodXBkYXRlZFJvb3QpID0+IHtcbiAgICByYXdDaGlsZHJlbltpbmRleF0gPSB1cGRhdGVkUm9vdDtcbiAgICBpZiAoZHluYW1pY0NoaWxkcmVuKSB7XG4gICAgICBpZiAoZHluYW1pY0luZGV4ID4gLTEpIHtcbiAgICAgICAgZHluYW1pY0NoaWxkcmVuW2R5bmFtaWNJbmRleF0gPSB1cGRhdGVkUm9vdDtcbiAgICAgIH0gZWxzZSBpZiAodXBkYXRlZFJvb3QucGF0Y2hGbGFnID4gMCkge1xuICAgICAgICB2bm9kZS5keW5hbWljQ2hpbGRyZW4gPSBbLi4uZHluYW1pY0NoaWxkcmVuLCB1cGRhdGVkUm9vdF07XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByZXR1cm4gW25vcm1hbGl6ZVZOb2RlKGNoaWxkUm9vdCksIHNldFJvb3RdO1xufTtcbmZ1bmN0aW9uIGZpbHRlclNpbmdsZVJvb3QoY2hpbGRyZW4sIHJlY3Vyc2UgPSB0cnVlKSB7XG4gIGxldCBzaW5nbGVSb290O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICBpZiAoaXNWTm9kZShjaGlsZCkpIHtcbiAgICAgIGlmIChjaGlsZC50eXBlICE9PSBDb21tZW50IHx8IGNoaWxkLmNoaWxkcmVuID09PSBcInYtaWZcIikge1xuICAgICAgICBpZiAoc2luZ2xlUm9vdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaW5nbGVSb290ID0gY2hpbGQ7XG4gICAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgcmVjdXJzZSAmJiBzaW5nbGVSb290LnBhdGNoRmxhZyA+IDAgJiYgc2luZ2xlUm9vdC5wYXRjaEZsYWcgJiAyMDQ4KSB7XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyU2luZ2xlUm9vdChzaW5nbGVSb290LmNoaWxkcmVuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2luZ2xlUm9vdDtcbn1cbmNvbnN0IGdldEZ1bmN0aW9uYWxGYWxsdGhyb3VnaCA9IChhdHRycykgPT4ge1xuICBsZXQgcmVzO1xuICBmb3IgKGNvbnN0IGtleSBpbiBhdHRycykge1xuICAgIGlmIChrZXkgPT09IFwiY2xhc3NcIiB8fCBrZXkgPT09IFwic3R5bGVcIiB8fCBpc09uKGtleSkpIHtcbiAgICAgIChyZXMgfHwgKHJlcyA9IHt9KSlba2V5XSA9IGF0dHJzW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59O1xuY29uc3QgZmlsdGVyTW9kZWxMaXN0ZW5lcnMgPSAoYXR0cnMsIHByb3BzKSA9PiB7XG4gIGNvbnN0IHJlcyA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBhdHRycykge1xuICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkgfHwgIShrZXkuc2xpY2UoOSkgaW4gcHJvcHMpKSB7XG4gICAgICByZXNba2V5XSA9IGF0dHJzW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59O1xuY29uc3QgaXNFbGVtZW50Um9vdCA9ICh2bm9kZSkgPT4ge1xuICByZXR1cm4gdm5vZGUuc2hhcGVGbGFnICYgKDYgfCAxKSB8fCB2bm9kZS50eXBlID09PSBDb21tZW50O1xufTtcbmZ1bmN0aW9uIHNob3VsZFVwZGF0ZUNvbXBvbmVudChwcmV2Vk5vZGUsIG5leHRWTm9kZSwgb3B0aW1pemVkKSB7XG4gIGNvbnN0IHsgcHJvcHM6IHByZXZQcm9wcywgY2hpbGRyZW46IHByZXZDaGlsZHJlbiwgY29tcG9uZW50IH0gPSBwcmV2Vk5vZGU7XG4gIGNvbnN0IHsgcHJvcHM6IG5leHRQcm9wcywgY2hpbGRyZW46IG5leHRDaGlsZHJlbiwgcGF0Y2hGbGFnIH0gPSBuZXh0Vk5vZGU7XG4gIGNvbnN0IGVtaXRzID0gY29tcG9uZW50LmVtaXRzT3B0aW9ucztcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgKHByZXZDaGlsZHJlbiB8fCBuZXh0Q2hpbGRyZW4pICYmIGlzSG1yVXBkYXRpbmcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAobmV4dFZOb2RlLmRpcnMgfHwgbmV4dFZOb2RlLnRyYW5zaXRpb24pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAob3B0aW1pemVkICYmIHBhdGNoRmxhZyA+PSAwKSB7XG4gICAgaWYgKHBhdGNoRmxhZyAmIDEwMjQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAocGF0Y2hGbGFnICYgMTYpIHtcbiAgICAgIGlmICghcHJldlByb3BzKSB7XG4gICAgICAgIHJldHVybiAhIW5leHRQcm9wcztcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNQcm9wc0NoYW5nZWQocHJldlByb3BzLCBuZXh0UHJvcHMsIGVtaXRzKTtcbiAgICB9IGVsc2UgaWYgKHBhdGNoRmxhZyAmIDgpIHtcbiAgICAgIGNvbnN0IGR5bmFtaWNQcm9wcyA9IG5leHRWTm9kZS5keW5hbWljUHJvcHM7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGR5bmFtaWNQcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBkeW5hbWljUHJvcHNbaV07XG4gICAgICAgIGlmIChuZXh0UHJvcHNba2V5XSAhPT0gcHJldlByb3BzW2tleV0gJiYgIWlzRW1pdExpc3RlbmVyKGVtaXRzLCBrZXkpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHByZXZDaGlsZHJlbiB8fCBuZXh0Q2hpbGRyZW4pIHtcbiAgICAgIGlmICghbmV4dENoaWxkcmVuIHx8ICFuZXh0Q2hpbGRyZW4uJHN0YWJsZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByZXZQcm9wcyA9PT0gbmV4dFByb3BzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghcHJldlByb3BzKSB7XG4gICAgICByZXR1cm4gISFuZXh0UHJvcHM7XG4gICAgfVxuICAgIGlmICghbmV4dFByb3BzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHMpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHNPcHRpb25zKSB7XG4gIGNvbnN0IG5leHRLZXlzID0gT2JqZWN0LmtleXMobmV4dFByb3BzKTtcbiAgaWYgKG5leHRLZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMocHJldlByb3BzKS5sZW5ndGgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IG5leHRLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qga2V5ID0gbmV4dEtleXNbaV07XG4gICAgaWYgKG5leHRQcm9wc1trZXldICE9PSBwcmV2UHJvcHNba2V5XSAmJiAhaXNFbWl0TGlzdGVuZXIoZW1pdHNPcHRpb25zLCBrZXkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gdXBkYXRlSE9DSG9zdEVsKHsgdm5vZGUsIHBhcmVudCB9LCBlbCkge1xuICB3aGlsZSAocGFyZW50KSB7XG4gICAgY29uc3Qgcm9vdCA9IHBhcmVudC5zdWJUcmVlO1xuICAgIGlmIChyb290LnN1c3BlbnNlICYmIHJvb3Quc3VzcGVuc2UuYWN0aXZlQnJhbmNoID09PSB2bm9kZSkge1xuICAgICAgcm9vdC5lbCA9IHZub2RlLmVsO1xuICAgIH1cbiAgICBpZiAocm9vdCA9PT0gdm5vZGUpIHtcbiAgICAgICh2bm9kZSA9IHBhcmVudC52bm9kZSkuZWwgPSBlbDtcbiAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBpc1N1c3BlbnNlID0gKHR5cGUpID0+IHR5cGUuX19pc1N1c3BlbnNlO1xubGV0IHN1c3BlbnNlSWQgPSAwO1xuY29uc3QgU3VzcGVuc2VJbXBsID0ge1xuICBuYW1lOiBcIlN1c3BlbnNlXCIsXG4gIC8vIEluIG9yZGVyIHRvIG1ha2UgU3VzcGVuc2UgdHJlZS1zaGFrYWJsZSwgd2UgbmVlZCB0byBhdm9pZCBpbXBvcnRpbmcgaXRcbiAgLy8gZGlyZWN0bHkgaW4gdGhlIHJlbmRlcmVyLiBUaGUgcmVuZGVyZXIgY2hlY2tzIGZvciB0aGUgX19pc1N1c3BlbnNlIGZsYWdcbiAgLy8gb24gYSB2bm9kZSdzIHR5cGUgYW5kIGNhbGxzIHRoZSBgcHJvY2Vzc2AgbWV0aG9kLCBwYXNzaW5nIGluIHJlbmRlcmVyXG4gIC8vIGludGVybmFscy5cbiAgX19pc1N1c3BlbnNlOiB0cnVlLFxuICBwcm9jZXNzKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzKSB7XG4gICAgaWYgKG4xID09IG51bGwpIHtcbiAgICAgIG1vdW50U3VzcGVuc2UoXG4gICAgICAgIG4yLFxuICAgICAgICBjb250YWluZXIsXG4gICAgICAgIGFuY2hvcixcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgcmVuZGVyZXJJbnRlcm5hbHNcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5kZXBzID4gMCAmJiAhbjEuc3VzcGVuc2UuaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgIG4yLnN1c3BlbnNlID0gbjEuc3VzcGVuc2U7XG4gICAgICAgIG4yLnN1c3BlbnNlLnZub2RlID0gbjI7XG4gICAgICAgIG4yLmVsID0gbjEuZWw7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHBhdGNoU3VzcGVuc2UoXG4gICAgICAgIG4xLFxuICAgICAgICBuMixcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZCxcbiAgICAgICAgcmVuZGVyZXJJbnRlcm5hbHNcbiAgICAgICk7XG4gICAgfVxuICB9LFxuICBoeWRyYXRlOiBoeWRyYXRlU3VzcGVuc2UsXG4gIG5vcm1hbGl6ZTogbm9ybWFsaXplU3VzcGVuc2VDaGlsZHJlblxufTtcbmNvbnN0IFN1c3BlbnNlID0gU3VzcGVuc2VJbXBsIDtcbmZ1bmN0aW9uIHRyaWdnZXJFdmVudCh2bm9kZSwgbmFtZSkge1xuICBjb25zdCBldmVudExpc3RlbmVyID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHNbbmFtZV07XG4gIGlmIChpc0Z1bmN0aW9uKGV2ZW50TGlzdGVuZXIpKSB7XG4gICAgZXZlbnRMaXN0ZW5lcigpO1xuICB9XG59XG5mdW5jdGlvbiBtb3VudFN1c3BlbnNlKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpIHtcbiAgY29uc3Qge1xuICAgIHA6IHBhdGNoLFxuICAgIG86IHsgY3JlYXRlRWxlbWVudCB9XG4gIH0gPSByZW5kZXJlckludGVybmFscztcbiAgY29uc3QgaGlkZGVuQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29uc3Qgc3VzcGVuc2UgPSB2bm9kZS5zdXNwZW5zZSA9IGNyZWF0ZVN1c3BlbnNlQm91bmRhcnkoXG4gICAgdm5vZGUsXG4gICAgcGFyZW50U3VzcGVuc2UsXG4gICAgcGFyZW50Q29tcG9uZW50LFxuICAgIGNvbnRhaW5lcixcbiAgICBoaWRkZW5Db250YWluZXIsXG4gICAgYW5jaG9yLFxuICAgIG5hbWVzcGFjZSxcbiAgICBzbG90U2NvcGVJZHMsXG4gICAgb3B0aW1pemVkLFxuICAgIHJlbmRlcmVySW50ZXJuYWxzXG4gICk7XG4gIHBhdGNoKFxuICAgIG51bGwsXG4gICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IHZub2RlLnNzQ29udGVudCxcbiAgICBoaWRkZW5Db250YWluZXIsXG4gICAgbnVsbCxcbiAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgc3VzcGVuc2UsXG4gICAgbmFtZXNwYWNlLFxuICAgIHNsb3RTY29wZUlkc1xuICApO1xuICBpZiAoc3VzcGVuc2UuZGVwcyA+IDApIHtcbiAgICB0cmlnZ2VyRXZlbnQodm5vZGUsIFwib25QZW5kaW5nXCIpO1xuICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgXCJvbkZhbGxiYWNrXCIpO1xuICAgIHBhdGNoKFxuICAgICAgbnVsbCxcbiAgICAgIHZub2RlLnNzRmFsbGJhY2ssXG4gICAgICBjb250YWluZXIsXG4gICAgICBhbmNob3IsXG4gICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICBudWxsLFxuICAgICAgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgIG5hbWVzcGFjZSxcbiAgICAgIHNsb3RTY29wZUlkc1xuICAgICk7XG4gICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCB2bm9kZS5zc0ZhbGxiYWNrKTtcbiAgfSBlbHNlIHtcbiAgICBzdXNwZW5zZS5yZXNvbHZlKGZhbHNlLCB0cnVlKTtcbiAgfVxufVxuZnVuY3Rpb24gcGF0Y2hTdXNwZW5zZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHsgcDogcGF0Y2gsIHVtOiB1bm1vdW50LCBvOiB7IGNyZWF0ZUVsZW1lbnQgfSB9KSB7XG4gIGNvbnN0IHN1c3BlbnNlID0gbjIuc3VzcGVuc2UgPSBuMS5zdXNwZW5zZTtcbiAgc3VzcGVuc2Uudm5vZGUgPSBuMjtcbiAgbjIuZWwgPSBuMS5lbDtcbiAgY29uc3QgbmV3QnJhbmNoID0gbjIuc3NDb250ZW50O1xuICBjb25zdCBuZXdGYWxsYmFjayA9IG4yLnNzRmFsbGJhY2s7XG4gIGNvbnN0IHsgYWN0aXZlQnJhbmNoLCBwZW5kaW5nQnJhbmNoLCBpc0luRmFsbGJhY2ssIGlzSHlkcmF0aW5nIH0gPSBzdXNwZW5zZTtcbiAgaWYgKHBlbmRpbmdCcmFuY2gpIHtcbiAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbmV3QnJhbmNoO1xuICAgIGlmIChpc1NhbWVWTm9kZVR5cGUobmV3QnJhbmNoLCBwZW5kaW5nQnJhbmNoKSkge1xuICAgICAgcGF0Y2goXG4gICAgICAgIHBlbmRpbmdCcmFuY2gsXG4gICAgICAgIG5ld0JyYW5jaCxcbiAgICAgICAgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyLFxuICAgICAgICBudWxsLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xuICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICB9IGVsc2UgaWYgKGlzSW5GYWxsYmFjaykge1xuICAgICAgICBpZiAoIWlzSHlkcmF0aW5nKSB7XG4gICAgICAgICAgcGF0Y2goXG4gICAgICAgICAgICBhY3RpdmVCcmFuY2gsXG4gICAgICAgICAgICBuZXdGYWxsYmFjayxcbiAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgIGFuY2hvcixcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxuICAgICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzdXNwZW5zZS5wZW5kaW5nSWQgPSBzdXNwZW5zZUlkKys7XG4gICAgICBpZiAoaXNIeWRyYXRpbmcpIHtcbiAgICAgICAgc3VzcGVuc2UuaXNIeWRyYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoID0gcGVuZGluZ0JyYW5jaDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVubW91bnQocGVuZGluZ0JyYW5jaCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSk7XG4gICAgICB9XG4gICAgICBzdXNwZW5zZS5kZXBzID0gMDtcbiAgICAgIHN1c3BlbnNlLmVmZmVjdHMubGVuZ3RoID0gMDtcbiAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBpZiAoaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgbmV3QnJhbmNoLFxuICAgICAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lcixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XG4gICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdGNoKFxuICAgICAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICAgICAgbmV3RmFsbGJhY2ssXG4gICAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgICBhbmNob3IsXG4gICAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcbiAgICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBuZXdGYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWN0aXZlQnJhbmNoICYmIGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIGFjdGl2ZUJyYW5jaCkpIHtcbiAgICAgICAgcGF0Y2goXG4gICAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICAgIG5ld0JyYW5jaCxcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgYW5jaG9yLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgICAgc2xvdFNjb3BlSWRzLFxuICAgICAgICAgIG9wdGltaXplZFxuICAgICAgICApO1xuICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGF0Y2goXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBuZXdCcmFuY2gsXG4gICAgICAgICAgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICAgIHN1c3BlbnNlLFxuICAgICAgICAgIG5hbWVzcGFjZSxcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGFjdGl2ZUJyYW5jaCAmJiBpc1NhbWVWTm9kZVR5cGUobmV3QnJhbmNoLCBhY3RpdmVCcmFuY2gpKSB7XG4gICAgICBwYXRjaChcbiAgICAgICAgYWN0aXZlQnJhbmNoLFxuICAgICAgICBuZXdCcmFuY2gsXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgYW5jaG9yLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgIHN1c3BlbnNlLFxuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIHNsb3RTY29wZUlkcyxcbiAgICAgICAgb3B0aW1pemVkXG4gICAgICApO1xuICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBuZXdCcmFuY2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmlnZ2VyRXZlbnQobjIsIFwib25QZW5kaW5nXCIpO1xuICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IG5ld0JyYW5jaDtcbiAgICAgIGlmIChuZXdCcmFuY2guc2hhcGVGbGFnICYgNTEyKSB7XG4gICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCA9IG5ld0JyYW5jaC5jb21wb25lbnQuc3VzcGVuc2VJZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCA9IHN1c3BlbnNlSWQrKztcbiAgICAgIH1cbiAgICAgIHBhdGNoKFxuICAgICAgICBudWxsLFxuICAgICAgICBuZXdCcmFuY2gsXG4gICAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lcixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxuICAgICAgICBzdXNwZW5zZSxcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgIG9wdGltaXplZFxuICAgICAgKTtcbiAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcbiAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgeyB0aW1lb3V0LCBwZW5kaW5nSWQgfSA9IHN1c3BlbnNlO1xuICAgICAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nSWQgPT09IHBlbmRpbmdJZCkge1xuICAgICAgICAgICAgICBzdXNwZW5zZS5mYWxsYmFjayhuZXdGYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGltZW91dCA9PT0gMCkge1xuICAgICAgICAgIHN1c3BlbnNlLmZhbGxiYWNrKG5ld0ZhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxubGV0IGhhc1dhcm5lZCA9IGZhbHNlO1xuZnVuY3Rpb24gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSh2bm9kZSwgcGFyZW50U3VzcGVuc2UsIHBhcmVudENvbXBvbmVudCwgY29udGFpbmVyLCBoaWRkZW5Db250YWluZXIsIGFuY2hvciwgbmFtZXNwYWNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGlzSHlkcmF0aW5nID0gZmFsc2UpIHtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdHJ1ZSAmJiAhaGFzV2FybmVkKSB7XG4gICAgaGFzV2FybmVkID0gdHJ1ZTtcbiAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/IFwiaW5mb1wiIDogXCJsb2dcIl0oXG4gICAgICBgPFN1c3BlbnNlPiBpcyBhbiBleHBlcmltZW50YWwgZmVhdHVyZSBhbmQgaXRzIEFQSSB3aWxsIGxpa2VseSBjaGFuZ2UuYFxuICAgICk7XG4gIH1cbiAgY29uc3Qge1xuICAgIHA6IHBhdGNoLFxuICAgIG06IG1vdmUsXG4gICAgdW06IHVubW91bnQsXG4gICAgbjogbmV4dCxcbiAgICBvOiB7IHBhcmVudE5vZGUsIHJlbW92ZSB9XG4gIH0gPSByZW5kZXJlckludGVybmFscztcbiAgbGV0IHBhcmVudFN1c3BlbnNlSWQ7XG4gIGNvbnN0IGlzU3VzcGVuc2libGUgPSBpc1ZOb2RlU3VzcGVuc2libGUodm5vZGUpO1xuICBpZiAoaXNTdXNwZW5zaWJsZSkge1xuICAgIGlmIChwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICBwYXJlbnRTdXNwZW5zZUlkID0gcGFyZW50U3VzcGVuc2UucGVuZGluZ0lkO1xuICAgICAgcGFyZW50U3VzcGVuc2UuZGVwcysrO1xuICAgIH1cbiAgfVxuICBjb25zdCB0aW1lb3V0ID0gdm5vZGUucHJvcHMgPyB0b051bWJlcih2bm9kZS5wcm9wcy50aW1lb3V0KSA6IHZvaWQgMDtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBhc3NlcnROdW1iZXIodGltZW91dCwgYFN1c3BlbnNlIHRpbWVvdXRgKTtcbiAgfVxuICBjb25zdCBpbml0aWFsQW5jaG9yID0gYW5jaG9yO1xuICBjb25zdCBzdXNwZW5zZSA9IHtcbiAgICB2bm9kZSxcbiAgICBwYXJlbnQ6IHBhcmVudFN1c3BlbnNlLFxuICAgIHBhcmVudENvbXBvbmVudCxcbiAgICBuYW1lc3BhY2UsXG4gICAgY29udGFpbmVyLFxuICAgIGhpZGRlbkNvbnRhaW5lcixcbiAgICBkZXBzOiAwLFxuICAgIHBlbmRpbmdJZDogc3VzcGVuc2VJZCsrLFxuICAgIHRpbWVvdXQ6IHR5cGVvZiB0aW1lb3V0ID09PSBcIm51bWJlclwiID8gdGltZW91dCA6IC0xLFxuICAgIGFjdGl2ZUJyYW5jaDogbnVsbCxcbiAgICBwZW5kaW5nQnJhbmNoOiBudWxsLFxuICAgIGlzSW5GYWxsYmFjazogIWlzSHlkcmF0aW5nLFxuICAgIGlzSHlkcmF0aW5nLFxuICAgIGlzVW5tb3VudGVkOiBmYWxzZSxcbiAgICBlZmZlY3RzOiBbXSxcbiAgICByZXNvbHZlKHJlc3VtZSA9IGZhbHNlLCBzeW5jID0gZmFsc2UpIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgIGlmICghcmVzdW1lICYmICFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYHN1c3BlbnNlLnJlc29sdmUoKSBpcyBjYWxsZWQgd2l0aG91dCBhIHBlbmRpbmcgYnJhbmNoLmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdXNwZW5zZS5pc1VubW91bnRlZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBzdXNwZW5zZS5yZXNvbHZlKCkgaXMgY2FsbGVkIG9uIGFuIGFscmVhZHkgdW5tb3VudGVkIHN1c3BlbnNlIGJvdW5kYXJ5LmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCB7XG4gICAgICAgIHZub2RlOiB2bm9kZTIsXG4gICAgICAgIGFjdGl2ZUJyYW5jaCxcbiAgICAgICAgcGVuZGluZ0JyYW5jaCxcbiAgICAgICAgcGVuZGluZ0lkLFxuICAgICAgICBlZmZlY3RzLFxuICAgICAgICBwYXJlbnRDb21wb25lbnQ6IHBhcmVudENvbXBvbmVudDIsXG4gICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyMlxuICAgICAgfSA9IHN1c3BlbnNlO1xuICAgICAgbGV0IGRlbGF5RW50ZXIgPSBmYWxzZTtcbiAgICAgIGlmIChzdXNwZW5zZS5pc0h5ZHJhdGluZykge1xuICAgICAgICBzdXNwZW5zZS5pc0h5ZHJhdGluZyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmICghcmVzdW1lKSB7XG4gICAgICAgIGRlbGF5RW50ZXIgPSBhY3RpdmVCcmFuY2ggJiYgcGVuZGluZ0JyYW5jaC50cmFuc2l0aW9uICYmIHBlbmRpbmdCcmFuY2gudHJhbnNpdGlvbi5tb2RlID09PSBcIm91dC1pblwiO1xuICAgICAgICBpZiAoZGVsYXlFbnRlcikge1xuICAgICAgICAgIGFjdGl2ZUJyYW5jaC50cmFuc2l0aW9uLmFmdGVyTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocGVuZGluZ0lkID09PSBzdXNwZW5zZS5wZW5kaW5nSWQpIHtcbiAgICAgICAgICAgICAgbW92ZShcbiAgICAgICAgICAgICAgICBwZW5kaW5nQnJhbmNoLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjIsXG4gICAgICAgICAgICAgICAgYW5jaG9yID09PSBpbml0aWFsQW5jaG9yID8gbmV4dChhY3RpdmVCcmFuY2gpIDogYW5jaG9yLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgcXVldWVQb3N0Rmx1c2hDYihlZmZlY3RzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3RpdmVCcmFuY2gpIHtcbiAgICAgICAgICBpZiAocGFyZW50Tm9kZShhY3RpdmVCcmFuY2guZWwpID09PSBjb250YWluZXIyKSB7XG4gICAgICAgICAgICBhbmNob3IgPSBuZXh0KGFjdGl2ZUJyYW5jaCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHVubW91bnQoYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQyLCBzdXNwZW5zZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZWxheUVudGVyKSB7XG4gICAgICAgICAgbW92ZShwZW5kaW5nQnJhbmNoLCBjb250YWluZXIyLCBhbmNob3IsIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIHBlbmRpbmdCcmFuY2gpO1xuICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IG51bGw7XG4gICAgICBzdXNwZW5zZS5pc0luRmFsbGJhY2sgPSBmYWxzZTtcbiAgICAgIGxldCBwYXJlbnQgPSBzdXNwZW5zZS5wYXJlbnQ7XG4gICAgICBsZXQgaGFzVW5yZXNvbHZlZEFuY2VzdG9yID0gZmFsc2U7XG4gICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQucGVuZGluZ0JyYW5jaCkge1xuICAgICAgICAgIHBhcmVudC5lZmZlY3RzLnB1c2goLi4uZWZmZWN0cyk7XG4gICAgICAgICAgaGFzVW5yZXNvbHZlZEFuY2VzdG9yID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xuICAgICAgfVxuICAgICAgaWYgKCFoYXNVbnJlc29sdmVkQW5jZXN0b3IgJiYgIWRlbGF5RW50ZXIpIHtcbiAgICAgICAgcXVldWVQb3N0Rmx1c2hDYihlZmZlY3RzKTtcbiAgICAgIH1cbiAgICAgIHN1c3BlbnNlLmVmZmVjdHMgPSBbXTtcbiAgICAgIGlmIChpc1N1c3BlbnNpYmxlKSB7XG4gICAgICAgIGlmIChwYXJlbnRTdXNwZW5zZSAmJiBwYXJlbnRTdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmIHBhcmVudFN1c3BlbnNlSWQgPT09IHBhcmVudFN1c3BlbnNlLnBlbmRpbmdJZCkge1xuICAgICAgICAgIHBhcmVudFN1c3BlbnNlLmRlcHMtLTtcbiAgICAgICAgICBpZiAocGFyZW50U3VzcGVuc2UuZGVwcyA9PT0gMCAmJiAhc3luYykge1xuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UucmVzb2x2ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdHJpZ2dlckV2ZW50KHZub2RlMiwgXCJvblJlc29sdmVcIik7XG4gICAgfSxcbiAgICBmYWxsYmFjayhmYWxsYmFja1ZOb2RlKSB7XG4gICAgICBpZiAoIXN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyB2bm9kZTogdm5vZGUyLCBhY3RpdmVCcmFuY2gsIHBhcmVudENvbXBvbmVudDogcGFyZW50Q29tcG9uZW50MiwgY29udGFpbmVyOiBjb250YWluZXIyLCBuYW1lc3BhY2U6IG5hbWVzcGFjZTIgfSA9IHN1c3BlbnNlO1xuICAgICAgdHJpZ2dlckV2ZW50KHZub2RlMiwgXCJvbkZhbGxiYWNrXCIpO1xuICAgICAgY29uc3QgYW5jaG9yMiA9IG5leHQoYWN0aXZlQnJhbmNoKTtcbiAgICAgIGNvbnN0IG1vdW50RmFsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgIGlmICghc3VzcGVuc2UuaXNJbkZhbGxiYWNrKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBhdGNoKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZmFsbGJhY2tWTm9kZSxcbiAgICAgICAgICBjb250YWluZXIyLFxuICAgICAgICAgIGFuY2hvcjIsXG4gICAgICAgICAgcGFyZW50Q29tcG9uZW50MixcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIC8vIGZhbGxiYWNrIHRyZWUgd2lsbCBub3QgaGF2ZSBzdXNwZW5zZSBjb250ZXh0XG4gICAgICAgICAgbmFtZXNwYWNlMixcbiAgICAgICAgICBzbG90U2NvcGVJZHMsXG4gICAgICAgICAgb3B0aW1pemVkXG4gICAgICAgICk7XG4gICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgZmFsbGJhY2tWTm9kZSk7XG4gICAgICB9O1xuICAgICAgY29uc3QgZGVsYXlFbnRlciA9IGZhbGxiYWNrVk5vZGUudHJhbnNpdGlvbiAmJiBmYWxsYmFja1ZOb2RlLnRyYW5zaXRpb24ubW9kZSA9PT0gXCJvdXQtaW5cIjtcbiAgICAgIGlmIChkZWxheUVudGVyKSB7XG4gICAgICAgIGFjdGl2ZUJyYW5jaC50cmFuc2l0aW9uLmFmdGVyTGVhdmUgPSBtb3VudEZhbGxiYWNrO1xuICAgICAgfVxuICAgICAgc3VzcGVuc2UuaXNJbkZhbGxiYWNrID0gdHJ1ZTtcbiAgICAgIHVubW91bnQoXG4gICAgICAgIGFjdGl2ZUJyYW5jaCxcbiAgICAgICAgcGFyZW50Q29tcG9uZW50MixcbiAgICAgICAgbnVsbCxcbiAgICAgICAgLy8gbm8gc3VzcGVuc2Ugc28gdW5tb3VudCBob29rcyBmaXJlIG5vd1xuICAgICAgICB0cnVlXG4gICAgICAgIC8vIHNob3VsZFJlbW92ZVxuICAgICAgKTtcbiAgICAgIGlmICghZGVsYXlFbnRlcikge1xuICAgICAgICBtb3VudEZhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBtb3ZlKGNvbnRhaW5lcjIsIGFuY2hvcjIsIHR5cGUpIHtcbiAgICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCAmJiBtb3ZlKHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgY29udGFpbmVyMiwgYW5jaG9yMiwgdHlwZSk7XG4gICAgICBzdXNwZW5zZS5jb250YWluZXIgPSBjb250YWluZXIyO1xuICAgIH0sXG4gICAgbmV4dCgpIHtcbiAgICAgIHJldHVybiBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggJiYgbmV4dChzdXNwZW5zZS5hY3RpdmVCcmFuY2gpO1xuICAgIH0sXG4gICAgcmVnaXN0ZXJEZXAoaW5zdGFuY2UsIHNldHVwUmVuZGVyRWZmZWN0LCBvcHRpbWl6ZWQyKSB7XG4gICAgICBjb25zdCBpc0luUGVuZGluZ1N1c3BlbnNlID0gISFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoO1xuICAgICAgaWYgKGlzSW5QZW5kaW5nU3VzcGVuc2UpIHtcbiAgICAgICAgc3VzcGVuc2UuZGVwcysrO1xuICAgICAgfVxuICAgICAgY29uc3QgaHlkcmF0ZWRFbCA9IGluc3RhbmNlLnZub2RlLmVsO1xuICAgICAgaW5zdGFuY2UuYXN5bmNEZXAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCAwKTtcbiAgICAgIH0pLnRoZW4oKGFzeW5jU2V0dXBSZXN1bHQpID0+IHtcbiAgICAgICAgaWYgKGluc3RhbmNlLmlzVW5tb3VudGVkIHx8IHN1c3BlbnNlLmlzVW5tb3VudGVkIHx8IHN1c3BlbnNlLnBlbmRpbmdJZCAhPT0gaW5zdGFuY2Uuc3VzcGVuc2VJZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZS5hc3luY1Jlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgeyB2bm9kZTogdm5vZGUyIH0gPSBpbnN0YW5jZTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQodm5vZGUyKTtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgYXN5bmNTZXR1cFJlc3VsdCwgZmFsc2UpO1xuICAgICAgICBpZiAoaHlkcmF0ZWRFbCkge1xuICAgICAgICAgIHZub2RlMi5lbCA9IGh5ZHJhdGVkRWw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSAhaHlkcmF0ZWRFbCAmJiBpbnN0YW5jZS5zdWJUcmVlLmVsO1xuICAgICAgICBzZXR1cFJlbmRlckVmZmVjdChcbiAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICB2bm9kZTIsXG4gICAgICAgICAgLy8gY29tcG9uZW50IG1heSBoYXZlIGJlZW4gbW92ZWQgYmVmb3JlIHJlc29sdmUuXG4gICAgICAgICAgLy8gaWYgdGhpcyBpcyBub3QgYSBoeWRyYXRpb24sIGluc3RhbmNlLnN1YlRyZWUgd2lsbCBiZSB0aGUgY29tbWVudFxuICAgICAgICAgIC8vIHBsYWNlaG9sZGVyLlxuICAgICAgICAgIHBhcmVudE5vZGUoaHlkcmF0ZWRFbCB8fCBpbnN0YW5jZS5zdWJUcmVlLmVsKSxcbiAgICAgICAgICAvLyBhbmNob3Igd2lsbCBub3QgYmUgdXNlZCBpZiB0aGlzIGlzIGh5ZHJhdGlvbiwgc28gb25seSBuZWVkIHRvXG4gICAgICAgICAgLy8gY29uc2lkZXIgdGhlIGNvbW1lbnQgcGxhY2Vob2xkZXIgY2FzZS5cbiAgICAgICAgICBoeWRyYXRlZEVsID8gbnVsbCA6IG5leHQoaW5zdGFuY2Uuc3ViVHJlZSksXG4gICAgICAgICAgc3VzcGVuc2UsXG4gICAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICAgIG9wdGltaXplZDJcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgcmVtb3ZlKHBsYWNlaG9sZGVyKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVIT0NIb3N0RWwoaW5zdGFuY2UsIHZub2RlMi5lbCk7XG4gICAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNJblBlbmRpbmdTdXNwZW5zZSAmJiAtLXN1c3BlbnNlLmRlcHMgPT09IDApIHtcbiAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdW5tb3VudChwYXJlbnRTdXNwZW5zZTIsIGRvUmVtb3ZlKSB7XG4gICAgICBzdXNwZW5zZS5pc1VubW91bnRlZCA9IHRydWU7XG4gICAgICBpZiAoc3VzcGVuc2UuYWN0aXZlQnJhbmNoKSB7XG4gICAgICAgIHVubW91bnQoXG4gICAgICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoLFxuICAgICAgICAgIHBhcmVudENvbXBvbmVudCxcbiAgICAgICAgICBwYXJlbnRTdXNwZW5zZTIsXG4gICAgICAgICAgZG9SZW1vdmVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XG4gICAgICAgIHVubW91bnQoXG4gICAgICAgICAgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCxcbiAgICAgICAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgICAgICAgcGFyZW50U3VzcGVuc2UyLFxuICAgICAgICAgIGRvUmVtb3ZlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByZXR1cm4gc3VzcGVuc2U7XG59XG5mdW5jdGlvbiBoeWRyYXRlU3VzcGVuc2Uobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG5hbWVzcGFjZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBoeWRyYXRlTm9kZSkge1xuICBjb25zdCBzdXNwZW5zZSA9IHZub2RlLnN1c3BlbnNlID0gY3JlYXRlU3VzcGVuc2VCb3VuZGFyeShcbiAgICB2bm9kZSxcbiAgICBwYXJlbnRTdXNwZW5zZSxcbiAgICBwYXJlbnRDb21wb25lbnQsXG4gICAgbm9kZS5wYXJlbnROb2RlLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgIG51bGwsXG4gICAgbmFtZXNwYWNlLFxuICAgIHNsb3RTY29wZUlkcyxcbiAgICBvcHRpbWl6ZWQsXG4gICAgcmVuZGVyZXJJbnRlcm5hbHMsXG4gICAgdHJ1ZVxuICApO1xuICBjb25zdCByZXN1bHQgPSBoeWRyYXRlTm9kZShcbiAgICBub2RlLFxuICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSB2bm9kZS5zc0NvbnRlbnQsXG4gICAgcGFyZW50Q29tcG9uZW50LFxuICAgIHN1c3BlbnNlLFxuICAgIHNsb3RTY29wZUlkcyxcbiAgICBvcHRpbWl6ZWRcbiAgKTtcbiAgaWYgKHN1c3BlbnNlLmRlcHMgPT09IDApIHtcbiAgICBzdXNwZW5zZS5yZXNvbHZlKGZhbHNlLCB0cnVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VDaGlsZHJlbih2bm9kZSkge1xuICBjb25zdCB7IHNoYXBlRmxhZywgY2hpbGRyZW4gfSA9IHZub2RlO1xuICBjb25zdCBpc1Nsb3RDaGlsZHJlbiA9IHNoYXBlRmxhZyAmIDMyO1xuICB2bm9kZS5zc0NvbnRlbnQgPSBub3JtYWxpemVTdXNwZW5zZVNsb3QoXG4gICAgaXNTbG90Q2hpbGRyZW4gPyBjaGlsZHJlbi5kZWZhdWx0IDogY2hpbGRyZW5cbiAgKTtcbiAgdm5vZGUuc3NGYWxsYmFjayA9IGlzU2xvdENoaWxkcmVuID8gbm9ybWFsaXplU3VzcGVuc2VTbG90KGNoaWxkcmVuLmZhbGxiYWNrKSA6IGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VTbG90KHMpIHtcbiAgbGV0IGJsb2NrO1xuICBpZiAoaXNGdW5jdGlvbihzKSkge1xuICAgIGNvbnN0IHRyYWNrQmxvY2sgPSBpc0Jsb2NrVHJlZUVuYWJsZWQgJiYgcy5fYztcbiAgICBpZiAodHJhY2tCbG9jaykge1xuICAgICAgcy5fZCA9IGZhbHNlO1xuICAgICAgb3BlbkJsb2NrKCk7XG4gICAgfVxuICAgIHMgPSBzKCk7XG4gICAgaWYgKHRyYWNrQmxvY2spIHtcbiAgICAgIHMuX2QgPSB0cnVlO1xuICAgICAgYmxvY2sgPSBjdXJyZW50QmxvY2s7XG4gICAgICBjbG9zZUJsb2NrKCk7XG4gICAgfVxuICB9XG4gIGlmIChpc0FycmF5KHMpKSB7XG4gICAgY29uc3Qgc2luZ2xlQ2hpbGQgPSBmaWx0ZXJTaW5nbGVSb290KHMpO1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFzaW5nbGVDaGlsZCAmJiBzLmZpbHRlcigoY2hpbGQpID0+IGNoaWxkICE9PSBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UKS5sZW5ndGggPiAwKSB7XG4gICAgICB3YXJuJDEoYDxTdXNwZW5zZT4gc2xvdHMgZXhwZWN0IGEgc2luZ2xlIHJvb3Qgbm9kZS5gKTtcbiAgICB9XG4gICAgcyA9IHNpbmdsZUNoaWxkO1xuICB9XG4gIHMgPSBub3JtYWxpemVWTm9kZShzKTtcbiAgaWYgKGJsb2NrICYmICFzLmR5bmFtaWNDaGlsZHJlbikge1xuICAgIHMuZHluYW1pY0NoaWxkcmVuID0gYmxvY2suZmlsdGVyKChjKSA9PiBjICE9PSBzKTtcbiAgfVxuICByZXR1cm4gcztcbn1cbmZ1bmN0aW9uIHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlKGZuLCBzdXNwZW5zZSkge1xuICBpZiAoc3VzcGVuc2UgJiYgc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xuICAgIGlmIChpc0FycmF5KGZuKSkge1xuICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKC4uLmZuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKGZuKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcXVldWVQb3N0Rmx1c2hDYihmbik7XG4gIH1cbn1cbmZ1bmN0aW9uIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgYnJhbmNoKSB7XG4gIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCA9IGJyYW5jaDtcbiAgY29uc3QgeyB2bm9kZSwgcGFyZW50Q29tcG9uZW50IH0gPSBzdXNwZW5zZTtcbiAgbGV0IGVsID0gYnJhbmNoLmVsO1xuICB3aGlsZSAoIWVsICYmIGJyYW5jaC5jb21wb25lbnQpIHtcbiAgICBicmFuY2ggPSBicmFuY2guY29tcG9uZW50LnN1YlRyZWU7XG4gICAgZWwgPSBicmFuY2guZWw7XG4gIH1cbiAgdm5vZGUuZWwgPSBlbDtcbiAgaWYgKHBhcmVudENvbXBvbmVudCAmJiBwYXJlbnRDb21wb25lbnQuc3ViVHJlZSA9PT0gdm5vZGUpIHtcbiAgICBwYXJlbnRDb21wb25lbnQudm5vZGUuZWwgPSBlbDtcbiAgICB1cGRhdGVIT0NIb3N0RWwocGFyZW50Q29tcG9uZW50LCBlbCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzVk5vZGVTdXNwZW5zaWJsZSh2bm9kZSkge1xuICBjb25zdCBzdXNwZW5zaWJsZSA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnN1c3BlbnNpYmxlO1xuICByZXR1cm4gc3VzcGVuc2libGUgIT0gbnVsbCAmJiBzdXNwZW5zaWJsZSAhPT0gZmFsc2U7XG59XG5cbmNvbnN0IEZyYWdtZW50ID0gU3ltYm9sLmZvcihcInYtZmd0XCIpO1xuY29uc3QgVGV4dCA9IFN5bWJvbC5mb3IoXCJ2LXR4dFwiKTtcbmNvbnN0IENvbW1lbnQgPSBTeW1ib2wuZm9yKFwidi1jbXRcIik7XG5jb25zdCBTdGF0aWMgPSBTeW1ib2wuZm9yKFwidi1zdGNcIik7XG5jb25zdCBibG9ja1N0YWNrID0gW107XG5sZXQgY3VycmVudEJsb2NrID0gbnVsbDtcbmZ1bmN0aW9uIG9wZW5CbG9jayhkaXNhYmxlVHJhY2tpbmcgPSBmYWxzZSkge1xuICBibG9ja1N0YWNrLnB1c2goY3VycmVudEJsb2NrID0gZGlzYWJsZVRyYWNraW5nID8gbnVsbCA6IFtdKTtcbn1cbmZ1bmN0aW9uIGNsb3NlQmxvY2soKSB7XG4gIGJsb2NrU3RhY2sucG9wKCk7XG4gIGN1cnJlbnRCbG9jayA9IGJsb2NrU3RhY2tbYmxvY2tTdGFjay5sZW5ndGggLSAxXSB8fCBudWxsO1xufVxubGV0IGlzQmxvY2tUcmVlRW5hYmxlZCA9IDE7XG5mdW5jdGlvbiBzZXRCbG9ja1RyYWNraW5nKHZhbHVlLCBpblZPbmNlID0gZmFsc2UpIHtcbiAgaXNCbG9ja1RyZWVFbmFibGVkICs9IHZhbHVlO1xuICBpZiAodmFsdWUgPCAwICYmIGN1cnJlbnRCbG9jayAmJiBpblZPbmNlKSB7XG4gICAgY3VycmVudEJsb2NrLmhhc09uY2UgPSB0cnVlO1xuICB9XG59XG5mdW5jdGlvbiBzZXR1cEJsb2NrKHZub2RlKSB7XG4gIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgPyBjdXJyZW50QmxvY2sgfHwgRU1QVFlfQVJSIDogbnVsbDtcbiAgY2xvc2VCbG9jaygpO1xuICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiBjdXJyZW50QmxvY2spIHtcbiAgICBjdXJyZW50QmxvY2sucHVzaCh2bm9kZSk7XG4gIH1cbiAgcmV0dXJuIHZub2RlO1xufVxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudEJsb2NrKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZykge1xuICByZXR1cm4gc2V0dXBCbG9jayhcbiAgICBjcmVhdGVCYXNlVk5vZGUoXG4gICAgICB0eXBlLFxuICAgICAgcHJvcHMsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIHBhdGNoRmxhZyxcbiAgICAgIGR5bmFtaWNQcm9wcyxcbiAgICAgIHNoYXBlRmxhZyxcbiAgICAgIHRydWVcbiAgICApXG4gICk7XG59XG5mdW5jdGlvbiBjcmVhdGVCbG9jayh0eXBlLCBwcm9wcywgY2hpbGRyZW4sIHBhdGNoRmxhZywgZHluYW1pY1Byb3BzKSB7XG4gIHJldHVybiBzZXR1cEJsb2NrKFxuICAgIGNyZWF0ZVZOb2RlKFxuICAgICAgdHlwZSxcbiAgICAgIHByb3BzLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBwYXRjaEZsYWcsXG4gICAgICBkeW5hbWljUHJvcHMsXG4gICAgICB0cnVlXG4gICAgKVxuICApO1xufVxuZnVuY3Rpb24gaXNWTm9kZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPyB2YWx1ZS5fX3ZfaXNWTm9kZSA9PT0gdHJ1ZSA6IGZhbHNlO1xufVxuZnVuY3Rpb24gaXNTYW1lVk5vZGVUeXBlKG4xLCBuMikge1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBuMi5zaGFwZUZsYWcgJiA2ICYmIG4xLmNvbXBvbmVudCkge1xuICAgIGNvbnN0IGRpcnR5SW5zdGFuY2VzID0gaG1yRGlydHlDb21wb25lbnRzLmdldChuMi50eXBlKTtcbiAgICBpZiAoZGlydHlJbnN0YW5jZXMgJiYgZGlydHlJbnN0YW5jZXMuaGFzKG4xLmNvbXBvbmVudCkpIHtcbiAgICAgIG4xLnNoYXBlRmxhZyAmPSB+MjU2O1xuICAgICAgbjIuc2hhcGVGbGFnICY9IH41MTI7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBuMS50eXBlID09PSBuMi50eXBlICYmIG4xLmtleSA9PT0gbjIua2V5O1xufVxubGV0IHZub2RlQXJnc1RyYW5zZm9ybWVyO1xuZnVuY3Rpb24gdHJhbnNmb3JtVk5vZGVBcmdzKHRyYW5zZm9ybWVyKSB7XG4gIHZub2RlQXJnc1RyYW5zZm9ybWVyID0gdHJhbnNmb3JtZXI7XG59XG5jb25zdCBjcmVhdGVWTm9kZVdpdGhBcmdzVHJhbnNmb3JtID0gKC4uLmFyZ3MpID0+IHtcbiAgcmV0dXJuIF9jcmVhdGVWTm9kZShcbiAgICAuLi52bm9kZUFyZ3NUcmFuc2Zvcm1lciA/IHZub2RlQXJnc1RyYW5zZm9ybWVyKGFyZ3MsIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSkgOiBhcmdzXG4gICk7XG59O1xuY29uc3Qgbm9ybWFsaXplS2V5ID0gKHsga2V5IH0pID0+IGtleSAhPSBudWxsID8ga2V5IDogbnVsbDtcbmNvbnN0IG5vcm1hbGl6ZVJlZiA9ICh7XG4gIHJlZixcbiAgcmVmX2tleSxcbiAgcmVmX2ZvclxufSkgPT4ge1xuICBpZiAodHlwZW9mIHJlZiA9PT0gXCJudW1iZXJcIikge1xuICAgIHJlZiA9IFwiXCIgKyByZWY7XG4gIH1cbiAgcmV0dXJuIHJlZiAhPSBudWxsID8gaXNTdHJpbmcocmVmKSB8fCBpc1JlZihyZWYpIHx8IGlzRnVuY3Rpb24ocmVmKSA/IHsgaTogY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLCByOiByZWYsIGs6IHJlZl9rZXksIGY6ICEhcmVmX2ZvciB9IDogcmVmIDogbnVsbDtcbn07XG5mdW5jdGlvbiBjcmVhdGVCYXNlVk5vZGUodHlwZSwgcHJvcHMgPSBudWxsLCBjaGlsZHJlbiA9IG51bGwsIHBhdGNoRmxhZyA9IDAsIGR5bmFtaWNQcm9wcyA9IG51bGwsIHNoYXBlRmxhZyA9IHR5cGUgPT09IEZyYWdtZW50ID8gMCA6IDEsIGlzQmxvY2tOb2RlID0gZmFsc2UsIG5lZWRGdWxsQ2hpbGRyZW5Ob3JtYWxpemF0aW9uID0gZmFsc2UpIHtcbiAgY29uc3Qgdm5vZGUgPSB7XG4gICAgX192X2lzVk5vZGU6IHRydWUsXG4gICAgX192X3NraXA6IHRydWUsXG4gICAgdHlwZSxcbiAgICBwcm9wcyxcbiAgICBrZXk6IHByb3BzICYmIG5vcm1hbGl6ZUtleShwcm9wcyksXG4gICAgcmVmOiBwcm9wcyAmJiBub3JtYWxpemVSZWYocHJvcHMpLFxuICAgIHNjb3BlSWQ6IGN1cnJlbnRTY29wZUlkLFxuICAgIHNsb3RTY29wZUlkczogbnVsbCxcbiAgICBjaGlsZHJlbixcbiAgICBjb21wb25lbnQ6IG51bGwsXG4gICAgc3VzcGVuc2U6IG51bGwsXG4gICAgc3NDb250ZW50OiBudWxsLFxuICAgIHNzRmFsbGJhY2s6IG51bGwsXG4gICAgZGlyczogbnVsbCxcbiAgICB0cmFuc2l0aW9uOiBudWxsLFxuICAgIGVsOiBudWxsLFxuICAgIGFuY2hvcjogbnVsbCxcbiAgICB0YXJnZXQ6IG51bGwsXG4gICAgdGFyZ2V0U3RhcnQ6IG51bGwsXG4gICAgdGFyZ2V0QW5jaG9yOiBudWxsLFxuICAgIHN0YXRpY0NvdW50OiAwLFxuICAgIHNoYXBlRmxhZyxcbiAgICBwYXRjaEZsYWcsXG4gICAgZHluYW1pY1Byb3BzLFxuICAgIGR5bmFtaWNDaGlsZHJlbjogbnVsbCxcbiAgICBhcHBDb250ZXh0OiBudWxsLFxuICAgIGN0eDogY3VycmVudFJlbmRlcmluZ0luc3RhbmNlXG4gIH07XG4gIGlmIChuZWVkRnVsbENoaWxkcmVuTm9ybWFsaXphdGlvbikge1xuICAgIG5vcm1hbGl6ZUNoaWxkcmVuKHZub2RlLCBjaGlsZHJlbik7XG4gICAgaWYgKHNoYXBlRmxhZyAmIDEyOCkge1xuICAgICAgdHlwZS5ub3JtYWxpemUodm5vZGUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjaGlsZHJlbikge1xuICAgIHZub2RlLnNoYXBlRmxhZyB8PSBpc1N0cmluZyhjaGlsZHJlbikgPyA4IDogMTY7XG4gIH1cbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgdm5vZGUua2V5ICE9PSB2bm9kZS5rZXkpIHtcbiAgICB3YXJuJDEoYFZOb2RlIGNyZWF0ZWQgd2l0aCBpbnZhbGlkIGtleSAoTmFOKS4gVk5vZGUgdHlwZTpgLCB2bm9kZS50eXBlKTtcbiAgfVxuICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJiAvLyBhdm9pZCBhIGJsb2NrIG5vZGUgZnJvbSB0cmFja2luZyBpdHNlbGZcbiAgIWlzQmxvY2tOb2RlICYmIC8vIGhhcyBjdXJyZW50IHBhcmVudCBibG9ja1xuICBjdXJyZW50QmxvY2sgJiYgLy8gcHJlc2VuY2Ugb2YgYSBwYXRjaCBmbGFnIGluZGljYXRlcyB0aGlzIG5vZGUgbmVlZHMgcGF0Y2hpbmcgb24gdXBkYXRlcy5cbiAgLy8gY29tcG9uZW50IG5vZGVzIGFsc28gc2hvdWxkIGFsd2F5cyBiZSBwYXRjaGVkLCBiZWNhdXNlIGV2ZW4gaWYgdGhlXG4gIC8vIGNvbXBvbmVudCBkb2Vzbid0IG5lZWQgdG8gdXBkYXRlLCBpdCBuZWVkcyB0byBwZXJzaXN0IHRoZSBpbnN0YW5jZSBvbiB0b1xuICAvLyB0aGUgbmV4dCB2bm9kZSBzbyB0aGF0IGl0IGNhbiBiZSBwcm9wZXJseSB1bm1vdW50ZWQgbGF0ZXIuXG4gICh2bm9kZS5wYXRjaEZsYWcgPiAwIHx8IHNoYXBlRmxhZyAmIDYpICYmIC8vIHRoZSBFVkVOVFMgZmxhZyBpcyBvbmx5IGZvciBoeWRyYXRpb24gYW5kIGlmIGl0IGlzIHRoZSBvbmx5IGZsYWcsIHRoZVxuICAvLyB2bm9kZSBzaG91bGQgbm90IGJlIGNvbnNpZGVyZWQgZHluYW1pYyBkdWUgdG8gaGFuZGxlciBjYWNoaW5nLlxuICB2bm9kZS5wYXRjaEZsYWcgIT09IDMyKSB7XG4gICAgY3VycmVudEJsb2NrLnB1c2godm5vZGUpO1xuICB9XG4gIHJldHVybiB2bm9kZTtcbn1cbmNvbnN0IGNyZWF0ZVZOb2RlID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IGNyZWF0ZVZOb2RlV2l0aEFyZ3NUcmFuc2Zvcm0gOiBfY3JlYXRlVk5vZGU7XG5mdW5jdGlvbiBfY3JlYXRlVk5vZGUodHlwZSwgcHJvcHMgPSBudWxsLCBjaGlsZHJlbiA9IG51bGwsIHBhdGNoRmxhZyA9IDAsIGR5bmFtaWNQcm9wcyA9IG51bGwsIGlzQmxvY2tOb2RlID0gZmFsc2UpIHtcbiAgaWYgKCF0eXBlIHx8IHR5cGUgPT09IE5VTExfRFlOQU1JQ19DT01QT05FTlQpIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhdHlwZSkge1xuICAgICAgd2FybiQxKGBJbnZhbGlkIHZub2RlIHR5cGUgd2hlbiBjcmVhdGluZyB2bm9kZTogJHt0eXBlfS5gKTtcbiAgICB9XG4gICAgdHlwZSA9IENvbW1lbnQ7XG4gIH1cbiAgaWYgKGlzVk5vZGUodHlwZSkpIHtcbiAgICBjb25zdCBjbG9uZWQgPSBjbG9uZVZOb2RlKFxuICAgICAgdHlwZSxcbiAgICAgIHByb3BzLFxuICAgICAgdHJ1ZVxuICAgICAgLyogbWVyZ2VSZWY6IHRydWUgKi9cbiAgICApO1xuICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgbm9ybWFsaXplQ2hpbGRyZW4oY2xvbmVkLCBjaGlsZHJlbik7XG4gICAgfVxuICAgIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmICFpc0Jsb2NrTm9kZSAmJiBjdXJyZW50QmxvY2spIHtcbiAgICAgIGlmIChjbG9uZWQuc2hhcGVGbGFnICYgNikge1xuICAgICAgICBjdXJyZW50QmxvY2tbY3VycmVudEJsb2NrLmluZGV4T2YodHlwZSldID0gY2xvbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2goY2xvbmVkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2xvbmVkLnBhdGNoRmxhZyA9IC0yO1xuICAgIHJldHVybiBjbG9uZWQ7XG4gIH1cbiAgaWYgKGlzQ2xhc3NDb21wb25lbnQodHlwZSkpIHtcbiAgICB0eXBlID0gdHlwZS5fX3ZjY09wdHM7XG4gIH1cbiAgaWYgKHByb3BzKSB7XG4gICAgcHJvcHMgPSBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpO1xuICAgIGxldCB7IGNsYXNzOiBrbGFzcywgc3R5bGUgfSA9IHByb3BzO1xuICAgIGlmIChrbGFzcyAmJiAhaXNTdHJpbmcoa2xhc3MpKSB7XG4gICAgICBwcm9wcy5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKGtsYXNzKTtcbiAgICB9XG4gICAgaWYgKGlzT2JqZWN0KHN0eWxlKSkge1xuICAgICAgaWYgKGlzUHJveHkoc3R5bGUpICYmICFpc0FycmF5KHN0eWxlKSkge1xuICAgICAgICBzdHlsZSA9IGV4dGVuZCh7fSwgc3R5bGUpO1xuICAgICAgfVxuICAgICAgcHJvcHMuc3R5bGUgPSBub3JtYWxpemVTdHlsZShzdHlsZSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHNoYXBlRmxhZyA9IGlzU3RyaW5nKHR5cGUpID8gMSA6IGlzU3VzcGVuc2UodHlwZSkgPyAxMjggOiBpc1RlbGVwb3J0KHR5cGUpID8gNjQgOiBpc09iamVjdCh0eXBlKSA/IDQgOiBpc0Z1bmN0aW9uKHR5cGUpID8gMiA6IDA7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNoYXBlRmxhZyAmIDQgJiYgaXNQcm94eSh0eXBlKSkge1xuICAgIHR5cGUgPSB0b1Jhdyh0eXBlKTtcbiAgICB3YXJuJDEoXG4gICAgICBgVnVlIHJlY2VpdmVkIGEgQ29tcG9uZW50IHRoYXQgd2FzIG1hZGUgYSByZWFjdGl2ZSBvYmplY3QuIFRoaXMgY2FuIGxlYWQgdG8gdW5uZWNlc3NhcnkgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQgYW5kIHNob3VsZCBiZSBhdm9pZGVkIGJ5IG1hcmtpbmcgdGhlIGNvbXBvbmVudCB3aXRoIFxcYG1hcmtSYXdcXGAgb3IgdXNpbmcgXFxgc2hhbGxvd1JlZlxcYCBpbnN0ZWFkIG9mIFxcYHJlZlxcYC5gLFxuICAgICAgYFxuQ29tcG9uZW50IHRoYXQgd2FzIG1hZGUgcmVhY3RpdmU6IGAsXG4gICAgICB0eXBlXG4gICAgKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlQmFzZVZOb2RlKFxuICAgIHR5cGUsXG4gICAgcHJvcHMsXG4gICAgY2hpbGRyZW4sXG4gICAgcGF0Y2hGbGFnLFxuICAgIGR5bmFtaWNQcm9wcyxcbiAgICBzaGFwZUZsYWcsXG4gICAgaXNCbG9ja05vZGUsXG4gICAgdHJ1ZVxuICApO1xufVxuZnVuY3Rpb24gZ3VhcmRSZWFjdGl2ZVByb3BzKHByb3BzKSB7XG4gIGlmICghcHJvcHMpIHJldHVybiBudWxsO1xuICByZXR1cm4gaXNQcm94eShwcm9wcykgfHwgaXNJbnRlcm5hbE9iamVjdChwcm9wcykgPyBleHRlbmQoe30sIHByb3BzKSA6IHByb3BzO1xufVxuZnVuY3Rpb24gY2xvbmVWTm9kZSh2bm9kZSwgZXh0cmFQcm9wcywgbWVyZ2VSZWYgPSBmYWxzZSwgY2xvbmVUcmFuc2l0aW9uID0gZmFsc2UpIHtcbiAgY29uc3QgeyBwcm9wcywgcmVmLCBwYXRjaEZsYWcsIGNoaWxkcmVuLCB0cmFuc2l0aW9uIH0gPSB2bm9kZTtcbiAgY29uc3QgbWVyZ2VkUHJvcHMgPSBleHRyYVByb3BzID8gbWVyZ2VQcm9wcyhwcm9wcyB8fCB7fSwgZXh0cmFQcm9wcykgOiBwcm9wcztcbiAgY29uc3QgY2xvbmVkID0ge1xuICAgIF9fdl9pc1ZOb2RlOiB0cnVlLFxuICAgIF9fdl9za2lwOiB0cnVlLFxuICAgIHR5cGU6IHZub2RlLnR5cGUsXG4gICAgcHJvcHM6IG1lcmdlZFByb3BzLFxuICAgIGtleTogbWVyZ2VkUHJvcHMgJiYgbm9ybWFsaXplS2V5KG1lcmdlZFByb3BzKSxcbiAgICByZWY6IGV4dHJhUHJvcHMgJiYgZXh0cmFQcm9wcy5yZWYgPyAoXG4gICAgICAvLyAjMjA3OCBpbiB0aGUgY2FzZSBvZiA8Y29tcG9uZW50IDppcz1cInZub2RlXCIgcmVmPVwiZXh0cmFcIi8+XG4gICAgICAvLyBpZiB0aGUgdm5vZGUgaXRzZWxmIGFscmVhZHkgaGFzIGEgcmVmLCBjbG9uZVZOb2RlIHdpbGwgbmVlZCB0byBtZXJnZVxuICAgICAgLy8gdGhlIHJlZnMgc28gdGhlIHNpbmdsZSB2bm9kZSBjYW4gYmUgc2V0IG9uIG11bHRpcGxlIHJlZnNcbiAgICAgIG1lcmdlUmVmICYmIHJlZiA/IGlzQXJyYXkocmVmKSA/IHJlZi5jb25jYXQobm9ybWFsaXplUmVmKGV4dHJhUHJvcHMpKSA6IFtyZWYsIG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKV0gOiBub3JtYWxpemVSZWYoZXh0cmFQcm9wcylcbiAgICApIDogcmVmLFxuICAgIHNjb3BlSWQ6IHZub2RlLnNjb3BlSWQsXG4gICAgc2xvdFNjb3BlSWRzOiB2bm9kZS5zbG90U2NvcGVJZHMsXG4gICAgY2hpbGRyZW46ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgcGF0Y2hGbGFnID09PSAtMSAmJiBpc0FycmF5KGNoaWxkcmVuKSA/IGNoaWxkcmVuLm1hcChkZWVwQ2xvbmVWTm9kZSkgOiBjaGlsZHJlbixcbiAgICB0YXJnZXQ6IHZub2RlLnRhcmdldCxcbiAgICB0YXJnZXRTdGFydDogdm5vZGUudGFyZ2V0U3RhcnQsXG4gICAgdGFyZ2V0QW5jaG9yOiB2bm9kZS50YXJnZXRBbmNob3IsXG4gICAgc3RhdGljQ291bnQ6IHZub2RlLnN0YXRpY0NvdW50LFxuICAgIHNoYXBlRmxhZzogdm5vZGUuc2hhcGVGbGFnLFxuICAgIC8vIGlmIHRoZSB2bm9kZSBpcyBjbG9uZWQgd2l0aCBleHRyYSBwcm9wcywgd2UgY2FuIG5vIGxvbmdlciBhc3N1bWUgaXRzXG4gICAgLy8gZXhpc3RpbmcgcGF0Y2ggZmxhZyB0byBiZSByZWxpYWJsZSBhbmQgbmVlZCB0byBhZGQgdGhlIEZVTExfUFJPUFMgZmxhZy5cbiAgICAvLyBub3RlOiBwcmVzZXJ2ZSBmbGFnIGZvciBmcmFnbWVudHMgc2luY2UgdGhleSB1c2UgdGhlIGZsYWcgZm9yIGNoaWxkcmVuXG4gICAgLy8gZmFzdCBwYXRocyBvbmx5LlxuICAgIHBhdGNoRmxhZzogZXh0cmFQcm9wcyAmJiB2bm9kZS50eXBlICE9PSBGcmFnbWVudCA/IHBhdGNoRmxhZyA9PT0gLTEgPyAxNiA6IHBhdGNoRmxhZyB8IDE2IDogcGF0Y2hGbGFnLFxuICAgIGR5bmFtaWNQcm9wczogdm5vZGUuZHluYW1pY1Byb3BzLFxuICAgIGR5bmFtaWNDaGlsZHJlbjogdm5vZGUuZHluYW1pY0NoaWxkcmVuLFxuICAgIGFwcENvbnRleHQ6IHZub2RlLmFwcENvbnRleHQsXG4gICAgZGlyczogdm5vZGUuZGlycyxcbiAgICB0cmFuc2l0aW9uLFxuICAgIC8vIFRoZXNlIHNob3VsZCB0ZWNobmljYWxseSBvbmx5IGJlIG5vbi1udWxsIG9uIG1vdW50ZWQgVk5vZGVzLiBIb3dldmVyLFxuICAgIC8vIHRoZXkgKnNob3VsZCogYmUgY29waWVkIGZvciBrZXB0LWFsaXZlIHZub2Rlcy4gU28gd2UganVzdCBhbHdheXMgY29weVxuICAgIC8vIHRoZW0gc2luY2UgdGhlbSBiZWluZyBub24tbnVsbCBkdXJpbmcgYSBtb3VudCBkb2Vzbid0IGFmZmVjdCB0aGUgbG9naWMgYXNcbiAgICAvLyB0aGV5IHdpbGwgc2ltcGx5IGJlIG92ZXJ3cml0dGVuLlxuICAgIGNvbXBvbmVudDogdm5vZGUuY29tcG9uZW50LFxuICAgIHN1c3BlbnNlOiB2bm9kZS5zdXNwZW5zZSxcbiAgICBzc0NvbnRlbnQ6IHZub2RlLnNzQ29udGVudCAmJiBjbG9uZVZOb2RlKHZub2RlLnNzQ29udGVudCksXG4gICAgc3NGYWxsYmFjazogdm5vZGUuc3NGYWxsYmFjayAmJiBjbG9uZVZOb2RlKHZub2RlLnNzRmFsbGJhY2spLFxuICAgIGVsOiB2bm9kZS5lbCxcbiAgICBhbmNob3I6IHZub2RlLmFuY2hvcixcbiAgICBjdHg6IHZub2RlLmN0eCxcbiAgICBjZTogdm5vZGUuY2VcbiAgfTtcbiAgaWYgKHRyYW5zaXRpb24gJiYgY2xvbmVUcmFuc2l0aW9uKSB7XG4gICAgc2V0VHJhbnNpdGlvbkhvb2tzKFxuICAgICAgY2xvbmVkLFxuICAgICAgdHJhbnNpdGlvbi5jbG9uZShjbG9uZWQpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gY2xvbmVkO1xufVxuZnVuY3Rpb24gZGVlcENsb25lVk5vZGUodm5vZGUpIHtcbiAgY29uc3QgY2xvbmVkID0gY2xvbmVWTm9kZSh2bm9kZSk7XG4gIGlmIChpc0FycmF5KHZub2RlLmNoaWxkcmVuKSkge1xuICAgIGNsb25lZC5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuLm1hcChkZWVwQ2xvbmVWTm9kZSk7XG4gIH1cbiAgcmV0dXJuIGNsb25lZDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRleHRWTm9kZSh0ZXh0ID0gXCIgXCIsIGZsYWcgPSAwKSB7XG4gIHJldHVybiBjcmVhdGVWTm9kZShUZXh0LCBudWxsLCB0ZXh0LCBmbGFnKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVN0YXRpY1ZOb2RlKGNvbnRlbnQsIG51bWJlck9mTm9kZXMpIHtcbiAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZShTdGF0aWMsIG51bGwsIGNvbnRlbnQpO1xuICB2bm9kZS5zdGF0aWNDb3VudCA9IG51bWJlck9mTm9kZXM7XG4gIHJldHVybiB2bm9kZTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNvbW1lbnRWTm9kZSh0ZXh0ID0gXCJcIiwgYXNCbG9jayA9IGZhbHNlKSB7XG4gIHJldHVybiBhc0Jsb2NrID8gKG9wZW5CbG9jaygpLCBjcmVhdGVCbG9jayhDb21tZW50LCBudWxsLCB0ZXh0KSkgOiBjcmVhdGVWTm9kZShDb21tZW50LCBudWxsLCB0ZXh0KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVZOb2RlKGNoaWxkKSB7XG4gIGlmIChjaGlsZCA9PSBudWxsIHx8IHR5cGVvZiBjaGlsZCA9PT0gXCJib29sZWFuXCIpIHtcbiAgICByZXR1cm4gY3JlYXRlVk5vZGUoQ29tbWVudCk7XG4gIH0gZWxzZSBpZiAoaXNBcnJheShjaGlsZCkpIHtcbiAgICByZXR1cm4gY3JlYXRlVk5vZGUoXG4gICAgICBGcmFnbWVudCxcbiAgICAgIG51bGwsXG4gICAgICAvLyAjMzY2NiwgYXZvaWQgcmVmZXJlbmNlIHBvbGx1dGlvbiB3aGVuIHJldXNpbmcgdm5vZGVcbiAgICAgIGNoaWxkLnNsaWNlKClcbiAgICApO1xuICB9IGVsc2UgaWYgKGlzVk5vZGUoY2hpbGQpKSB7XG4gICAgcmV0dXJuIGNsb25lSWZNb3VudGVkKGNoaWxkKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY3JlYXRlVk5vZGUoVGV4dCwgbnVsbCwgU3RyaW5nKGNoaWxkKSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNsb25lSWZNb3VudGVkKGNoaWxkKSB7XG4gIHJldHVybiBjaGlsZC5lbCA9PT0gbnVsbCAmJiBjaGlsZC5wYXRjaEZsYWcgIT09IC0xIHx8IGNoaWxkLm1lbW8gPyBjaGlsZCA6IGNsb25lVk5vZGUoY2hpbGQpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKSB7XG4gIGxldCB0eXBlID0gMDtcbiAgY29uc3QgeyBzaGFwZUZsYWcgfSA9IHZub2RlO1xuICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgIGNoaWxkcmVuID0gbnVsbDtcbiAgfSBlbHNlIGlmIChpc0FycmF5KGNoaWxkcmVuKSkge1xuICAgIHR5cGUgPSAxNjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY2hpbGRyZW4gPT09IFwib2JqZWN0XCIpIHtcbiAgICBpZiAoc2hhcGVGbGFnICYgKDEgfCA2NCkpIHtcbiAgICAgIGNvbnN0IHNsb3QgPSBjaGlsZHJlbi5kZWZhdWx0O1xuICAgICAgaWYgKHNsb3QpIHtcbiAgICAgICAgc2xvdC5fYyAmJiAoc2xvdC5fZCA9IGZhbHNlKTtcbiAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIHNsb3QoKSk7XG4gICAgICAgIHNsb3QuX2MgJiYgKHNsb3QuX2QgPSB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdHlwZSA9IDMyO1xuICAgICAgY29uc3Qgc2xvdEZsYWcgPSBjaGlsZHJlbi5fO1xuICAgICAgaWYgKCFzbG90RmxhZyAmJiAhaXNJbnRlcm5hbE9iamVjdChjaGlsZHJlbikpIHtcbiAgICAgICAgY2hpbGRyZW4uX2N0eCA9IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcbiAgICAgIH0gZWxzZSBpZiAoc2xvdEZsYWcgPT09IDMgJiYgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKSB7XG4gICAgICAgIGlmIChjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2Uuc2xvdHMuXyA9PT0gMSkge1xuICAgICAgICAgIGNoaWxkcmVuLl8gPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkcmVuLl8gPSAyO1xuICAgICAgICAgIHZub2RlLnBhdGNoRmxhZyB8PSAxMDI0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24oY2hpbGRyZW4pKSB7XG4gICAgY2hpbGRyZW4gPSB7IGRlZmF1bHQ6IGNoaWxkcmVuLCBfY3R4OiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgfTtcbiAgICB0eXBlID0gMzI7XG4gIH0gZWxzZSB7XG4gICAgY2hpbGRyZW4gPSBTdHJpbmcoY2hpbGRyZW4pO1xuICAgIGlmIChzaGFwZUZsYWcgJiA2NCkge1xuICAgICAgdHlwZSA9IDE2O1xuICAgICAgY2hpbGRyZW4gPSBbY3JlYXRlVGV4dFZOb2RlKGNoaWxkcmVuKV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGUgPSA4O1xuICAgIH1cbiAgfVxuICB2bm9kZS5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICB2bm9kZS5zaGFwZUZsYWcgfD0gdHlwZTtcbn1cbmZ1bmN0aW9uIG1lcmdlUHJvcHMoLi4uYXJncykge1xuICBjb25zdCByZXQgPSB7fTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdG9NZXJnZSA9IGFyZ3NbaV07XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdG9NZXJnZSkge1xuICAgICAgaWYgKGtleSA9PT0gXCJjbGFzc1wiKSB7XG4gICAgICAgIGlmIChyZXQuY2xhc3MgIT09IHRvTWVyZ2UuY2xhc3MpIHtcbiAgICAgICAgICByZXQuY2xhc3MgPSBub3JtYWxpemVDbGFzcyhbcmV0LmNsYXNzLCB0b01lcmdlLmNsYXNzXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcInN0eWxlXCIpIHtcbiAgICAgICAgcmV0LnN0eWxlID0gbm9ybWFsaXplU3R5bGUoW3JldC5zdHlsZSwgdG9NZXJnZS5zdHlsZV0pO1xuICAgICAgfSBlbHNlIGlmIChpc09uKGtleSkpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSByZXRba2V5XTtcbiAgICAgICAgY29uc3QgaW5jb21pbmcgPSB0b01lcmdlW2tleV07XG4gICAgICAgIGlmIChpbmNvbWluZyAmJiBleGlzdGluZyAhPT0gaW5jb21pbmcgJiYgIShpc0FycmF5KGV4aXN0aW5nKSAmJiBleGlzdGluZy5pbmNsdWRlcyhpbmNvbWluZykpKSB7XG4gICAgICAgICAgcmV0W2tleV0gPSBleGlzdGluZyA/IFtdLmNvbmNhdChleGlzdGluZywgaW5jb21pbmcpIDogaW5jb21pbmc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoa2V5ICE9PSBcIlwiKSB7XG4gICAgICAgIHJldFtrZXldID0gdG9NZXJnZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gaW52b2tlVk5vZGVIb29rKGhvb2ssIGluc3RhbmNlLCB2bm9kZSwgcHJldlZOb2RlID0gbnVsbCkge1xuICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgNywgW1xuICAgIHZub2RlLFxuICAgIHByZXZWTm9kZVxuICBdKTtcbn1cblxuY29uc3QgZW1wdHlBcHBDb250ZXh0ID0gY3JlYXRlQXBwQ29udGV4dCgpO1xubGV0IHVpZCA9IDA7XG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnRJbnN0YW5jZSh2bm9kZSwgcGFyZW50LCBzdXNwZW5zZSkge1xuICBjb25zdCB0eXBlID0gdm5vZGUudHlwZTtcbiAgY29uc3QgYXBwQ29udGV4dCA9IChwYXJlbnQgPyBwYXJlbnQuYXBwQ29udGV4dCA6IHZub2RlLmFwcENvbnRleHQpIHx8IGVtcHR5QXBwQ29udGV4dDtcbiAgY29uc3QgaW5zdGFuY2UgPSB7XG4gICAgdWlkOiB1aWQrKyxcbiAgICB2bm9kZSxcbiAgICB0eXBlLFxuICAgIHBhcmVudCxcbiAgICBhcHBDb250ZXh0LFxuICAgIHJvb3Q6IG51bGwsXG4gICAgLy8gdG8gYmUgaW1tZWRpYXRlbHkgc2V0XG4gICAgbmV4dDogbnVsbCxcbiAgICBzdWJUcmVlOiBudWxsLFxuICAgIC8vIHdpbGwgYmUgc2V0IHN5bmNocm9ub3VzbHkgcmlnaHQgYWZ0ZXIgY3JlYXRpb25cbiAgICBlZmZlY3Q6IG51bGwsXG4gICAgdXBkYXRlOiBudWxsLFxuICAgIC8vIHdpbGwgYmUgc2V0IHN5bmNocm9ub3VzbHkgcmlnaHQgYWZ0ZXIgY3JlYXRpb25cbiAgICBqb2I6IG51bGwsXG4gICAgc2NvcGU6IG5ldyBFZmZlY3RTY29wZShcbiAgICAgIHRydWVcbiAgICAgIC8qIGRldGFjaGVkICovXG4gICAgKSxcbiAgICByZW5kZXI6IG51bGwsXG4gICAgcHJveHk6IG51bGwsXG4gICAgZXhwb3NlZDogbnVsbCxcbiAgICBleHBvc2VQcm94eTogbnVsbCxcbiAgICB3aXRoUHJveHk6IG51bGwsXG4gICAgcHJvdmlkZXM6IHBhcmVudCA/IHBhcmVudC5wcm92aWRlcyA6IE9iamVjdC5jcmVhdGUoYXBwQ29udGV4dC5wcm92aWRlcyksXG4gICAgaWRzOiBwYXJlbnQgPyBwYXJlbnQuaWRzIDogW1wiXCIsIDAsIDBdLFxuICAgIGFjY2Vzc0NhY2hlOiBudWxsLFxuICAgIHJlbmRlckNhY2hlOiBbXSxcbiAgICAvLyBsb2NhbCByZXNvbHZlZCBhc3NldHNcbiAgICBjb21wb25lbnRzOiBudWxsLFxuICAgIGRpcmVjdGl2ZXM6IG51bGwsXG4gICAgLy8gcmVzb2x2ZWQgcHJvcHMgYW5kIGVtaXRzIG9wdGlvbnNcbiAgICBwcm9wc09wdGlvbnM6IG5vcm1hbGl6ZVByb3BzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcbiAgICBlbWl0c09wdGlvbnM6IG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcbiAgICAvLyBlbWl0XG4gICAgZW1pdDogbnVsbCxcbiAgICAvLyB0byBiZSBzZXQgaW1tZWRpYXRlbHlcbiAgICBlbWl0dGVkOiBudWxsLFxuICAgIC8vIHByb3BzIGRlZmF1bHQgdmFsdWVcbiAgICBwcm9wc0RlZmF1bHRzOiBFTVBUWV9PQkosXG4gICAgLy8gaW5oZXJpdEF0dHJzXG4gICAgaW5oZXJpdEF0dHJzOiB0eXBlLmluaGVyaXRBdHRycyxcbiAgICAvLyBzdGF0ZVxuICAgIGN0eDogRU1QVFlfT0JKLFxuICAgIGRhdGE6IEVNUFRZX09CSixcbiAgICBwcm9wczogRU1QVFlfT0JKLFxuICAgIGF0dHJzOiBFTVBUWV9PQkosXG4gICAgc2xvdHM6IEVNUFRZX09CSixcbiAgICByZWZzOiBFTVBUWV9PQkosXG4gICAgc2V0dXBTdGF0ZTogRU1QVFlfT0JKLFxuICAgIHNldHVwQ29udGV4dDogbnVsbCxcbiAgICAvLyBzdXNwZW5zZSByZWxhdGVkXG4gICAgc3VzcGVuc2UsXG4gICAgc3VzcGVuc2VJZDogc3VzcGVuc2UgPyBzdXNwZW5zZS5wZW5kaW5nSWQgOiAwLFxuICAgIGFzeW5jRGVwOiBudWxsLFxuICAgIGFzeW5jUmVzb2x2ZWQ6IGZhbHNlLFxuICAgIC8vIGxpZmVjeWNsZSBob29rc1xuICAgIC8vIG5vdCB1c2luZyBlbnVtcyBoZXJlIGJlY2F1c2UgaXQgcmVzdWx0cyBpbiBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gICAgaXNNb3VudGVkOiBmYWxzZSxcbiAgICBpc1VubW91bnRlZDogZmFsc2UsXG4gICAgaXNEZWFjdGl2YXRlZDogZmFsc2UsXG4gICAgYmM6IG51bGwsXG4gICAgYzogbnVsbCxcbiAgICBibTogbnVsbCxcbiAgICBtOiBudWxsLFxuICAgIGJ1OiBudWxsLFxuICAgIHU6IG51bGwsXG4gICAgdW06IG51bGwsXG4gICAgYnVtOiBudWxsLFxuICAgIGRhOiBudWxsLFxuICAgIGE6IG51bGwsXG4gICAgcnRnOiBudWxsLFxuICAgIHJ0YzogbnVsbCxcbiAgICBlYzogbnVsbCxcbiAgICBzcDogbnVsbFxuICB9O1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGluc3RhbmNlLmN0eCA9IGNyZWF0ZURldlJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICB9IGVsc2Uge1xuICAgIGluc3RhbmNlLmN0eCA9IHsgXzogaW5zdGFuY2UgfTtcbiAgfVxuICBpbnN0YW5jZS5yb290ID0gcGFyZW50ID8gcGFyZW50LnJvb3QgOiBpbnN0YW5jZTtcbiAgaW5zdGFuY2UuZW1pdCA9IGVtaXQuYmluZChudWxsLCBpbnN0YW5jZSk7XG4gIGlmICh2bm9kZS5jZSkge1xuICAgIHZub2RlLmNlKGluc3RhbmNlKTtcbiAgfVxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5sZXQgY3VycmVudEluc3RhbmNlID0gbnVsbDtcbmNvbnN0IGdldEN1cnJlbnRJbnN0YW5jZSA9ICgpID0+IGN1cnJlbnRJbnN0YW5jZSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XG5sZXQgaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2U7XG5sZXQgc2V0SW5TU1JTZXR1cFN0YXRlO1xue1xuICBjb25zdCBnID0gZ2V0R2xvYmFsVGhpcygpO1xuICBjb25zdCByZWdpc3Rlckdsb2JhbFNldHRlciA9IChrZXksIHNldHRlcikgPT4ge1xuICAgIGxldCBzZXR0ZXJzO1xuICAgIGlmICghKHNldHRlcnMgPSBnW2tleV0pKSBzZXR0ZXJzID0gZ1trZXldID0gW107XG4gICAgc2V0dGVycy5wdXNoKHNldHRlcik7XG4gICAgcmV0dXJuICh2KSA9PiB7XG4gICAgICBpZiAoc2V0dGVycy5sZW5ndGggPiAxKSBzZXR0ZXJzLmZvckVhY2goKHNldCkgPT4gc2V0KHYpKTtcbiAgICAgIGVsc2Ugc2V0dGVyc1swXSh2KTtcbiAgICB9O1xuICB9O1xuICBpbnRlcm5hbFNldEN1cnJlbnRJbnN0YW5jZSA9IHJlZ2lzdGVyR2xvYmFsU2V0dGVyKFxuICAgIGBfX1ZVRV9JTlNUQU5DRV9TRVRURVJTX19gLFxuICAgICh2KSA9PiBjdXJyZW50SW5zdGFuY2UgPSB2XG4gICk7XG4gIHNldEluU1NSU2V0dXBTdGF0ZSA9IHJlZ2lzdGVyR2xvYmFsU2V0dGVyKFxuICAgIGBfX1ZVRV9TU1JfU0VUVEVSU19fYCxcbiAgICAodikgPT4gaXNJblNTUkNvbXBvbmVudFNldHVwID0gdlxuICApO1xufVxuY29uc3Qgc2V0Q3VycmVudEluc3RhbmNlID0gKGluc3RhbmNlKSA9PiB7XG4gIGNvbnN0IHByZXYgPSBjdXJyZW50SW5zdGFuY2U7XG4gIGludGVybmFsU2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcbiAgaW5zdGFuY2Uuc2NvcGUub24oKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBpbnN0YW5jZS5zY29wZS5vZmYoKTtcbiAgICBpbnRlcm5hbFNldEN1cnJlbnRJbnN0YW5jZShwcmV2KTtcbiAgfTtcbn07XG5jb25zdCB1bnNldEN1cnJlbnRJbnN0YW5jZSA9ICgpID0+IHtcbiAgY3VycmVudEluc3RhbmNlICYmIGN1cnJlbnRJbnN0YW5jZS5zY29wZS5vZmYoKTtcbiAgaW50ZXJuYWxTZXRDdXJyZW50SW5zdGFuY2UobnVsbCk7XG59O1xuY29uc3QgaXNCdWlsdEluVGFnID0gLyogQF9fUFVSRV9fICovIG1ha2VNYXAoXCJzbG90LGNvbXBvbmVudFwiKTtcbmZ1bmN0aW9uIHZhbGlkYXRlQ29tcG9uZW50TmFtZShuYW1lLCB7IGlzTmF0aXZlVGFnIH0pIHtcbiAgaWYgKGlzQnVpbHRJblRhZyhuYW1lKSB8fCBpc05hdGl2ZVRhZyhuYW1lKSkge1xuICAgIHdhcm4kMShcbiAgICAgIFwiRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCBpZDogXCIgKyBuYW1lXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNTdGF0ZWZ1bENvbXBvbmVudChpbnN0YW5jZSkge1xuICByZXR1cm4gaW5zdGFuY2Uudm5vZGUuc2hhcGVGbGFnICYgNDtcbn1cbmxldCBpc0luU1NSQ29tcG9uZW50U2V0dXAgPSBmYWxzZTtcbmZ1bmN0aW9uIHNldHVwQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUiA9IGZhbHNlLCBvcHRpbWl6ZWQgPSBmYWxzZSkge1xuICBpc1NTUiAmJiBzZXRJblNTUlNldHVwU3RhdGUoaXNTU1IpO1xuICBjb25zdCB7IHByb3BzLCBjaGlsZHJlbiB9ID0gaW5zdGFuY2Uudm5vZGU7XG4gIGNvbnN0IGlzU3RhdGVmdWwgPSBpc1N0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlKTtcbiAgaW5pdFByb3BzKGluc3RhbmNlLCBwcm9wcywgaXNTdGF0ZWZ1bCwgaXNTU1IpO1xuICBpbml0U2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuLCBvcHRpbWl6ZWQpO1xuICBjb25zdCBzZXR1cFJlc3VsdCA9IGlzU3RhdGVmdWwgPyBzZXR1cFN0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUikgOiB2b2lkIDA7XG4gIGlzU1NSICYmIHNldEluU1NSU2V0dXBTdGF0ZShmYWxzZSk7XG4gIHJldHVybiBzZXR1cFJlc3VsdDtcbn1cbmZ1bmN0aW9uIHNldHVwU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSKSB7XG4gIHZhciBfYTtcbiAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBpZiAoQ29tcG9uZW50Lm5hbWUpIHtcbiAgICAgIHZhbGlkYXRlQ29tcG9uZW50TmFtZShDb21wb25lbnQubmFtZSwgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcpO1xuICAgIH1cbiAgICBpZiAoQ29tcG9uZW50LmNvbXBvbmVudHMpIHtcbiAgICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXMoQ29tcG9uZW50LmNvbXBvbmVudHMpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZXNbaV0sIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENvbXBvbmVudC5kaXJlY3RpdmVzKSB7XG4gICAgICBjb25zdCBuYW1lcyA9IE9iamVjdC5rZXlzKENvbXBvbmVudC5kaXJlY3RpdmVzKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsaWRhdGVEaXJlY3RpdmVOYW1lKG5hbWVzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENvbXBvbmVudC5jb21waWxlck9wdGlvbnMgJiYgaXNSdW50aW1lT25seSgpKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBcImNvbXBpbGVyT3B0aW9uc1wiIGlzIG9ubHkgc3VwcG9ydGVkIHdoZW4gdXNpbmcgYSBidWlsZCBvZiBWdWUgdGhhdCBpbmNsdWRlcyB0aGUgcnVudGltZSBjb21waWxlci4gU2luY2UgeW91IGFyZSB1c2luZyBhIHJ1bnRpbWUtb25seSBidWlsZCwgdGhlIG9wdGlvbnMgc2hvdWxkIGJlIHBhc3NlZCB2aWEgeW91ciBidWlsZCB0b29sIGNvbmZpZyBpbnN0ZWFkLmBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIGluc3RhbmNlLmFjY2Vzc0NhY2hlID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGluc3RhbmNlLnByb3h5ID0gbmV3IFByb3h5KGluc3RhbmNlLmN0eCwgUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBleHBvc2VQcm9wc09uUmVuZGVyQ29udGV4dChpbnN0YW5jZSk7XG4gIH1cbiAgY29uc3QgeyBzZXR1cCB9ID0gQ29tcG9uZW50O1xuICBpZiAoc2V0dXApIHtcbiAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgY29uc3Qgc2V0dXBDb250ZXh0ID0gaW5zdGFuY2Uuc2V0dXBDb250ZXh0ID0gc2V0dXAubGVuZ3RoID4gMSA/IGNyZWF0ZVNldHVwQ29udGV4dChpbnN0YW5jZSkgOiBudWxsO1xuICAgIGNvbnN0IHJlc2V0ID0gc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcbiAgICBjb25zdCBzZXR1cFJlc3VsdCA9IGNhbGxXaXRoRXJyb3JIYW5kbGluZyhcbiAgICAgIHNldHVwLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICAwLFxuICAgICAgW1xuICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2hhbGxvd1JlYWRvbmx5KGluc3RhbmNlLnByb3BzKSA6IGluc3RhbmNlLnByb3BzLFxuICAgICAgICBzZXR1cENvbnRleHRcbiAgICAgIF1cbiAgICApO1xuICAgIGNvbnN0IGlzQXN5bmNTZXR1cCA9IGlzUHJvbWlzZShzZXR1cFJlc3VsdCk7XG4gICAgcmVzZXRUcmFja2luZygpO1xuICAgIHJlc2V0KCk7XG4gICAgaWYgKChpc0FzeW5jU2V0dXAgfHwgaW5zdGFuY2Uuc3ApICYmICFpc0FzeW5jV3JhcHBlcihpbnN0YW5jZSkpIHtcbiAgICAgIG1hcmtBc3luY0JvdW5kYXJ5KGluc3RhbmNlKTtcbiAgICB9XG4gICAgaWYgKGlzQXN5bmNTZXR1cCkge1xuICAgICAgc2V0dXBSZXN1bHQudGhlbih1bnNldEN1cnJlbnRJbnN0YW5jZSwgdW5zZXRDdXJyZW50SW5zdGFuY2UpO1xuICAgICAgaWYgKGlzU1NSKSB7XG4gICAgICAgIHJldHVybiBzZXR1cFJlc3VsdC50aGVuKChyZXNvbHZlZFJlc3VsdCkgPT4ge1xuICAgICAgICAgIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCByZXNvbHZlZFJlc3VsdCwgaXNTU1IpO1xuICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgIGhhbmRsZUVycm9yKGUsIGluc3RhbmNlLCAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnN0YW5jZS5hc3luY0RlcCA9IHNldHVwUmVzdWx0O1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhaW5zdGFuY2Uuc3VzcGVuc2UpIHtcbiAgICAgICAgICBjb25zdCBuYW1lID0gKF9hID0gQ29tcG9uZW50Lm5hbWUpICE9IG51bGwgPyBfYSA6IFwiQW5vbnltb3VzXCI7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYENvbXBvbmVudCA8JHtuYW1lfT46IHNldHVwIGZ1bmN0aW9uIHJldHVybmVkIGEgcHJvbWlzZSwgYnV0IG5vIDxTdXNwZW5zZT4gYm91bmRhcnkgd2FzIGZvdW5kIGluIHRoZSBwYXJlbnQgY29tcG9uZW50IHRyZWUuIEEgY29tcG9uZW50IHdpdGggYXN5bmMgc2V0dXAoKSBtdXN0IGJlIG5lc3RlZCBpbiBhIDxTdXNwZW5zZT4gaW4gb3JkZXIgdG8gYmUgcmVuZGVyZWQuYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHNldHVwUmVzdWx0LCBpc1NTUik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZpbmlzaENvbXBvbmVudFNldHVwKGluc3RhbmNlLCBpc1NTUik7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCBzZXR1cFJlc3VsdCwgaXNTU1IpIHtcbiAgaWYgKGlzRnVuY3Rpb24oc2V0dXBSZXN1bHQpKSB7XG4gICAgaWYgKGluc3RhbmNlLnR5cGUuX19zc3JJbmxpbmVSZW5kZXIpIHtcbiAgICAgIGluc3RhbmNlLnNzclJlbmRlciA9IHNldHVwUmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZS5yZW5kZXIgPSBzZXR1cFJlc3VsdDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc2V0dXBSZXN1bHQpKSB7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgaXNWTm9kZShzZXR1cFJlc3VsdCkpIHtcbiAgICAgIHdhcm4kMShcbiAgICAgICAgYHNldHVwKCkgc2hvdWxkIG5vdCByZXR1cm4gVk5vZGVzIGRpcmVjdGx5IC0gcmV0dXJuIGEgcmVuZGVyIGZ1bmN0aW9uIGluc3RlYWQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XG4gICAgICBpbnN0YW5jZS5kZXZ0b29sc1Jhd1NldHVwU3RhdGUgPSBzZXR1cFJlc3VsdDtcbiAgICB9XG4gICAgaW5zdGFuY2Uuc2V0dXBTdGF0ZSA9IHByb3h5UmVmcyhzZXR1cFJlc3VsdCk7XG4gICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgIGV4cG9zZVNldHVwU3RhdGVPblJlbmRlckNvbnRleHQoaW5zdGFuY2UpO1xuICAgIH1cbiAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHNldHVwUmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICB3YXJuJDEoXG4gICAgICBgc2V0dXAoKSBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4gUmVjZWl2ZWQ6ICR7c2V0dXBSZXN1bHQgPT09IG51bGwgPyBcIm51bGxcIiA6IHR5cGVvZiBzZXR1cFJlc3VsdH1gXG4gICAgKTtcbiAgfVxuICBmaW5pc2hDb21wb25lbnRTZXR1cChpbnN0YW5jZSwgaXNTU1IpO1xufVxubGV0IGNvbXBpbGU7XG5sZXQgaW5zdGFsbFdpdGhQcm94eTtcbmZ1bmN0aW9uIHJlZ2lzdGVyUnVudGltZUNvbXBpbGVyKF9jb21waWxlKSB7XG4gIGNvbXBpbGUgPSBfY29tcGlsZTtcbiAgaW5zdGFsbFdpdGhQcm94eSA9IChpKSA9PiB7XG4gICAgaWYgKGkucmVuZGVyLl9yYykge1xuICAgICAgaS53aXRoUHJveHkgPSBuZXcgUHJveHkoaS5jdHgsIFJ1bnRpbWVDb21waWxlZFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyk7XG4gICAgfVxuICB9O1xufVxuY29uc3QgaXNSdW50aW1lT25seSA9ICgpID0+ICFjb21waWxlO1xuZnVuY3Rpb24gZmluaXNoQ29tcG9uZW50U2V0dXAoaW5zdGFuY2UsIGlzU1NSLCBza2lwT3B0aW9ucykge1xuICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xuICBpZiAoIWluc3RhbmNlLnJlbmRlcikge1xuICAgIGlmICghaXNTU1IgJiYgY29tcGlsZSAmJiAhQ29tcG9uZW50LnJlbmRlcikge1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBDb21wb25lbnQudGVtcGxhdGUgfHwgX19WVUVfT1BUSU9OU19BUElfXyAmJiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkudGVtcGxhdGU7XG4gICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBjb21waWxlYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBpc0N1c3RvbUVsZW1lbnQsIGNvbXBpbGVyT3B0aW9ucyB9ID0gaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWc7XG4gICAgICAgIGNvbnN0IHsgZGVsaW1pdGVycywgY29tcGlsZXJPcHRpb25zOiBjb21wb25lbnRDb21waWxlck9wdGlvbnMgfSA9IENvbXBvbmVudDtcbiAgICAgICAgY29uc3QgZmluYWxDb21waWxlck9wdGlvbnMgPSBleHRlbmQoXG4gICAgICAgICAgZXh0ZW5kKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpc0N1c3RvbUVsZW1lbnQsXG4gICAgICAgICAgICAgIGRlbGltaXRlcnNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21waWxlck9wdGlvbnNcbiAgICAgICAgICApLFxuICAgICAgICAgIGNvbXBvbmVudENvbXBpbGVyT3B0aW9uc1xuICAgICAgICApO1xuICAgICAgICBDb21wb25lbnQucmVuZGVyID0gY29tcGlsZSh0ZW1wbGF0ZSwgZmluYWxDb21waWxlck9wdGlvbnMpO1xuICAgICAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBjb21waWxlYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaW5zdGFuY2UucmVuZGVyID0gQ29tcG9uZW50LnJlbmRlciB8fCBOT09QO1xuICAgIGlmIChpbnN0YWxsV2l0aFByb3h5KSB7XG4gICAgICBpbnN0YWxsV2l0aFByb3h5KGluc3RhbmNlKTtcbiAgICB9XG4gIH1cbiAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgdHJ1ZSkge1xuICAgIGNvbnN0IHJlc2V0ID0gc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcbiAgICBwYXVzZVRyYWNraW5nKCk7XG4gICAgdHJ5IHtcbiAgICAgIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHJlc2V0VHJhY2tpbmcoKTtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFDb21wb25lbnQucmVuZGVyICYmIGluc3RhbmNlLnJlbmRlciA9PT0gTk9PUCAmJiAhaXNTU1IpIHtcbiAgICBpZiAoIWNvbXBpbGUgJiYgQ29tcG9uZW50LnRlbXBsYXRlKSB7XG4gICAgICB3YXJuJDEoXG4gICAgICAgIGBDb21wb25lbnQgcHJvdmlkZWQgdGVtcGxhdGUgb3B0aW9uIGJ1dCBydW50aW1lIGNvbXBpbGF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBidWlsZCBvZiBWdWUuYCArIChgIENvbmZpZ3VyZSB5b3VyIGJ1bmRsZXIgdG8gYWxpYXMgXCJ2dWVcIiB0byBcInZ1ZS9kaXN0L3Z1ZS5lc20tYnVuZGxlci5qc1wiLmAgKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2FybiQxKGBDb21wb25lbnQgaXMgbWlzc2luZyB0ZW1wbGF0ZSBvciByZW5kZXIgZnVuY3Rpb246IGAsIENvbXBvbmVudCk7XG4gICAgfVxuICB9XG59XG5jb25zdCBhdHRyc1Byb3h5SGFuZGxlcnMgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8ge1xuICBnZXQodGFyZ2V0LCBrZXkpIHtcbiAgICBtYXJrQXR0cnNBY2Nlc3NlZCgpO1xuICAgIHRyYWNrKHRhcmdldCwgXCJnZXRcIiwgXCJcIik7XG4gICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICB9LFxuICBzZXQoKSB7XG4gICAgd2FybiQxKGBzZXR1cENvbnRleHQuYXR0cnMgaXMgcmVhZG9ubHkuYCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBkZWxldGVQcm9wZXJ0eSgpIHtcbiAgICB3YXJuJDEoYHNldHVwQ29udGV4dC5hdHRycyBpcyByZWFkb25seS5gKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0gOiB7XG4gIGdldCh0YXJnZXQsIGtleSkge1xuICAgIHRyYWNrKHRhcmdldCwgXCJnZXRcIiwgXCJcIik7XG4gICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICB9XG59O1xuZnVuY3Rpb24gZ2V0U2xvdHNQcm94eShpbnN0YW5jZSkge1xuICByZXR1cm4gbmV3IFByb3h5KGluc3RhbmNlLnNsb3RzLCB7XG4gICAgZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICB0cmFjayhpbnN0YW5jZSwgXCJnZXRcIiwgXCIkc2xvdHNcIik7XG4gICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNldHVwQ29udGV4dChpbnN0YW5jZSkge1xuICBjb25zdCBleHBvc2UgPSAoZXhwb3NlZCkgPT4ge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICBpZiAoaW5zdGFuY2UuZXhwb3NlZCkge1xuICAgICAgICB3YXJuJDEoYGV4cG9zZSgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlIHBlciBzZXR1cCgpLmApO1xuICAgICAgfVxuICAgICAgaWYgKGV4cG9zZWQgIT0gbnVsbCkge1xuICAgICAgICBsZXQgZXhwb3NlZFR5cGUgPSB0eXBlb2YgZXhwb3NlZDtcbiAgICAgICAgaWYgKGV4cG9zZWRUeXBlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgaWYgKGlzQXJyYXkoZXhwb3NlZCkpIHtcbiAgICAgICAgICAgIGV4cG9zZWRUeXBlID0gXCJhcnJheVwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZWYoZXhwb3NlZCkpIHtcbiAgICAgICAgICAgIGV4cG9zZWRUeXBlID0gXCJyZWZcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cG9zZWRUeXBlICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgd2FybiQxKFxuICAgICAgICAgICAgYGV4cG9zZSgpIHNob3VsZCBiZSBwYXNzZWQgYSBwbGFpbiBvYmplY3QsIHJlY2VpdmVkICR7ZXhwb3NlZFR5cGV9LmBcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGluc3RhbmNlLmV4cG9zZWQgPSBleHBvc2VkIHx8IHt9O1xuICB9O1xuICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGxldCBhdHRyc1Byb3h5O1xuICAgIGxldCBzbG90c1Byb3h5O1xuICAgIHJldHVybiBPYmplY3QuZnJlZXplKHtcbiAgICAgIGdldCBhdHRycygpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJzUHJveHkgfHwgKGF0dHJzUHJveHkgPSBuZXcgUHJveHkoaW5zdGFuY2UuYXR0cnMsIGF0dHJzUHJveHlIYW5kbGVycykpO1xuICAgICAgfSxcbiAgICAgIGdldCBzbG90cygpIHtcbiAgICAgICAgcmV0dXJuIHNsb3RzUHJveHkgfHwgKHNsb3RzUHJveHkgPSBnZXRTbG90c1Byb3h5KGluc3RhbmNlKSk7XG4gICAgICB9LFxuICAgICAgZ2V0IGVtaXQoKSB7XG4gICAgICAgIHJldHVybiAoZXZlbnQsIC4uLmFyZ3MpID0+IGluc3RhbmNlLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgfSxcbiAgICAgIGV4cG9zZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICBhdHRyczogbmV3IFByb3h5KGluc3RhbmNlLmF0dHJzLCBhdHRyc1Byb3h5SGFuZGxlcnMpLFxuICAgICAgc2xvdHM6IGluc3RhbmNlLnNsb3RzLFxuICAgICAgZW1pdDogaW5zdGFuY2UuZW1pdCxcbiAgICAgIGV4cG9zZVxuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIGdldENvbXBvbmVudFB1YmxpY0luc3RhbmNlKGluc3RhbmNlKSB7XG4gIGlmIChpbnN0YW5jZS5leHBvc2VkKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLmV4cG9zZVByb3h5IHx8IChpbnN0YW5jZS5leHBvc2VQcm94eSA9IG5ldyBQcm94eShwcm94eVJlZnMobWFya1JhdyhpbnN0YW5jZS5leHBvc2VkKSksIHtcbiAgICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICBpZiAoa2V5IGluIHRhcmdldCkge1xuICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgaW4gcHVibGljUHJvcGVydGllc01hcCkge1xuICAgICAgICAgIHJldHVybiBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV0oaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaGFzKHRhcmdldCwga2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgaW4gdGFyZ2V0IHx8IGtleSBpbiBwdWJsaWNQcm9wZXJ0aWVzTWFwO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaW5zdGFuY2UucHJveHk7XG4gIH1cbn1cbmNvbnN0IGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9dKShcXHcpL2c7XG5jb25zdCBjbGFzc2lmeSA9IChzdHIpID0+IHN0ci5yZXBsYWNlKGNsYXNzaWZ5UkUsIChjKSA9PiBjLnRvVXBwZXJDYXNlKCkpLnJlcGxhY2UoL1stX10vZywgXCJcIik7XG5mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKENvbXBvbmVudCwgaW5jbHVkZUluZmVycmVkID0gdHJ1ZSkge1xuICByZXR1cm4gaXNGdW5jdGlvbihDb21wb25lbnQpID8gQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIDogQ29tcG9uZW50Lm5hbWUgfHwgaW5jbHVkZUluZmVycmVkICYmIENvbXBvbmVudC5fX25hbWU7XG59XG5mdW5jdGlvbiBmb3JtYXRDb21wb25lbnROYW1lKGluc3RhbmNlLCBDb21wb25lbnQsIGlzUm9vdCA9IGZhbHNlKSB7XG4gIGxldCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShDb21wb25lbnQpO1xuICBpZiAoIW5hbWUgJiYgQ29tcG9uZW50Ll9fZmlsZSkge1xuICAgIGNvbnN0IG1hdGNoID0gQ29tcG9uZW50Ll9fZmlsZS5tYXRjaCgvKFteL1xcXFxdKylcXC5cXHcrJC8pO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgbmFtZSA9IG1hdGNoWzFdO1xuICAgIH1cbiAgfVxuICBpZiAoIW5hbWUgJiYgaW5zdGFuY2UgJiYgaW5zdGFuY2UucGFyZW50KSB7XG4gICAgY29uc3QgaW5mZXJGcm9tUmVnaXN0cnkgPSAocmVnaXN0cnkpID0+IHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHJlZ2lzdHJ5KSB7XG4gICAgICAgIGlmIChyZWdpc3RyeVtrZXldID09PSBDb21wb25lbnQpIHtcbiAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBuYW1lID0gaW5mZXJGcm9tUmVnaXN0cnkoXG4gICAgICBpbnN0YW5jZS5jb21wb25lbnRzIHx8IGluc3RhbmNlLnBhcmVudC50eXBlLmNvbXBvbmVudHNcbiAgICApIHx8IGluZmVyRnJvbVJlZ2lzdHJ5KGluc3RhbmNlLmFwcENvbnRleHQuY29tcG9uZW50cyk7XG4gIH1cbiAgcmV0dXJuIG5hbWUgPyBjbGFzc2lmeShuYW1lKSA6IGlzUm9vdCA/IGBBcHBgIDogYEFub255bW91c2A7XG59XG5mdW5jdGlvbiBpc0NsYXNzQ29tcG9uZW50KHZhbHVlKSB7XG4gIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlKSAmJiBcIl9fdmNjT3B0c1wiIGluIHZhbHVlO1xufVxuXG5jb25zdCBjb21wdXRlZCA9IChnZXR0ZXJPck9wdGlvbnMsIGRlYnVnT3B0aW9ucykgPT4ge1xuICBjb25zdCBjID0gY29tcHV0ZWQkMShnZXR0ZXJPck9wdGlvbnMsIGRlYnVnT3B0aW9ucywgaXNJblNTUkNvbXBvbmVudFNldHVwKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBjb25zdCBpID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgaWYgKGkgJiYgaS5hcHBDb250ZXh0LmNvbmZpZy53YXJuUmVjdXJzaXZlQ29tcHV0ZWQpIHtcbiAgICAgIGMuX3dhcm5SZWN1cnNpdmUgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYztcbn07XG5cbmZ1bmN0aW9uIGgodHlwZSwgcHJvcHNPckNoaWxkcmVuLCBjaGlsZHJlbikge1xuICBjb25zdCBsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgaWYgKGwgPT09IDIpIHtcbiAgICBpZiAoaXNPYmplY3QocHJvcHNPckNoaWxkcmVuKSAmJiAhaXNBcnJheShwcm9wc09yQ2hpbGRyZW4pKSB7XG4gICAgICBpZiAoaXNWTm9kZShwcm9wc09yQ2hpbGRyZW4pKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBbcHJvcHNPckNoaWxkcmVuXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIG51bGwsIHByb3BzT3JDaGlsZHJlbik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChsID4gMykge1xuICAgICAgY2hpbGRyZW4gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIH0gZWxzZSBpZiAobCA9PT0gMyAmJiBpc1ZOb2RlKGNoaWxkcmVuKSkge1xuICAgICAgY2hpbGRyZW4gPSBbY2hpbGRyZW5dO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuLCBjaGlsZHJlbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdEN1c3RvbUZvcm1hdHRlcigpIHtcbiAgaWYgKCEhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdnVlU3R5bGUgPSB7IHN0eWxlOiBcImNvbG9yOiMzYmE3NzZcIiB9O1xuICBjb25zdCBudW1iZXJTdHlsZSA9IHsgc3R5bGU6IFwiY29sb3I6IzE2NzdmZlwiIH07XG4gIGNvbnN0IHN0cmluZ1N0eWxlID0geyBzdHlsZTogXCJjb2xvcjojZjUyMjJkXCIgfTtcbiAgY29uc3Qga2V5d29yZFN0eWxlID0geyBzdHlsZTogXCJjb2xvcjojZWIyZjk2XCIgfTtcbiAgY29uc3QgZm9ybWF0dGVyID0ge1xuICAgIF9fdnVlX2N1c3RvbV9mb3JtYXR0ZXI6IHRydWUsXG4gICAgaGVhZGVyKG9iaikge1xuICAgICAgaWYgKCFpc09iamVjdChvYmopKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKG9iai5fX2lzVnVlKSB7XG4gICAgICAgIHJldHVybiBbXCJkaXZcIiwgdnVlU3R5bGUsIGBWdWVJbnN0YW5jZWBdO1xuICAgICAgfSBlbHNlIGlmIChpc1JlZihvYmopKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7fSxcbiAgICAgICAgICBbXCJzcGFuXCIsIHZ1ZVN0eWxlLCBnZW5SZWZGbGFnKG9iaildLFxuICAgICAgICAgIFwiPFwiLFxuICAgICAgICAgIC8vIGF2b2lkIGRlYnVnZ2VyIGFjY2Vzc2luZyB2YWx1ZSBhZmZlY3RpbmcgYmVoYXZpb3JcbiAgICAgICAgICBmb3JtYXRWYWx1ZShcIl92YWx1ZVwiIGluIG9iaiA/IG9iai5fdmFsdWUgOiBvYmopLFxuICAgICAgICAgIGA+YFxuICAgICAgICBdO1xuICAgICAgfSBlbHNlIGlmIChpc1JlYWN0aXZlKG9iaikpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgIHt9LFxuICAgICAgICAgIFtcInNwYW5cIiwgdnVlU3R5bGUsIGlzU2hhbGxvdyhvYmopID8gXCJTaGFsbG93UmVhY3RpdmVcIiA6IFwiUmVhY3RpdmVcIl0sXG4gICAgICAgICAgXCI8XCIsXG4gICAgICAgICAgZm9ybWF0VmFsdWUob2JqKSxcbiAgICAgICAgICBgPiR7aXNSZWFkb25seShvYmopID8gYCAocmVhZG9ubHkpYCA6IGBgfWBcbiAgICAgICAgXTtcbiAgICAgIH0gZWxzZSBpZiAoaXNSZWFkb25seShvYmopKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7fSxcbiAgICAgICAgICBbXCJzcGFuXCIsIHZ1ZVN0eWxlLCBpc1NoYWxsb3cob2JqKSA/IFwiU2hhbGxvd1JlYWRvbmx5XCIgOiBcIlJlYWRvbmx5XCJdLFxuICAgICAgICAgIFwiPFwiLFxuICAgICAgICAgIGZvcm1hdFZhbHVlKG9iaiksXG4gICAgICAgICAgXCI+XCJcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgaGFzQm9keShvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9faXNWdWU7XG4gICAgfSxcbiAgICBib2R5KG9iaikge1xuICAgICAgaWYgKG9iaiAmJiBvYmouX19pc1Z1ZSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAge30sXG4gICAgICAgICAgLi4uZm9ybWF0SW5zdGFuY2Uob2JqLiQpXG4gICAgICAgIF07XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBmb3JtYXRJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgIGNvbnN0IGJsb2NrcyA9IFtdO1xuICAgIGlmIChpbnN0YW5jZS50eXBlLnByb3BzICYmIGluc3RhbmNlLnByb3BzKSB7XG4gICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKFwicHJvcHNcIiwgdG9SYXcoaW5zdGFuY2UucHJvcHMpKSk7XG4gICAgfVxuICAgIGlmIChpbnN0YW5jZS5zZXR1cFN0YXRlICE9PSBFTVBUWV9PQkopIHtcbiAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soXCJzZXR1cFwiLCBpbnN0YW5jZS5zZXR1cFN0YXRlKSk7XG4gICAgfVxuICAgIGlmIChpbnN0YW5jZS5kYXRhICE9PSBFTVBUWV9PQkopIHtcbiAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soXCJkYXRhXCIsIHRvUmF3KGluc3RhbmNlLmRhdGEpKSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbXB1dGVkID0gZXh0cmFjdEtleXMoaW5zdGFuY2UsIFwiY29tcHV0ZWRcIik7XG4gICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKFwiY29tcHV0ZWRcIiwgY29tcHV0ZWQpKTtcbiAgICB9XG4gICAgY29uc3QgaW5qZWN0ZWQgPSBleHRyYWN0S2V5cyhpbnN0YW5jZSwgXCJpbmplY3RcIik7XG4gICAgaWYgKGluamVjdGVkKSB7XG4gICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKFwiaW5qZWN0ZWRcIiwgaW5qZWN0ZWQpKTtcbiAgICB9XG4gICAgYmxvY2tzLnB1c2goW1xuICAgICAgXCJkaXZcIixcbiAgICAgIHt9LFxuICAgICAgW1xuICAgICAgICBcInNwYW5cIixcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiBrZXl3b3JkU3R5bGUuc3R5bGUgKyBcIjtvcGFjaXR5OjAuNjZcIlxuICAgICAgICB9LFxuICAgICAgICBcIiQgKGludGVybmFsKTogXCJcbiAgICAgIF0sXG4gICAgICBbXCJvYmplY3RcIiwgeyBvYmplY3Q6IGluc3RhbmNlIH1dXG4gICAgXSk7XG4gICAgcmV0dXJuIGJsb2NrcztcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZUJsb2NrKHR5cGUsIHRhcmdldCkge1xuICAgIHRhcmdldCA9IGV4dGVuZCh7fSwgdGFyZ2V0KTtcbiAgICBpZiAoIU9iamVjdC5rZXlzKHRhcmdldCkubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCB7fV07XG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICBcImRpdlwiLFxuICAgICAgeyBzdHlsZTogXCJsaW5lLWhlaWdodDoxLjI1ZW07bWFyZ2luLWJvdHRvbTowLjZlbVwiIH0sXG4gICAgICBbXG4gICAgICAgIFwiZGl2XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBzdHlsZTogXCJjb2xvcjojNDc2NTgyXCJcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZVxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgXCJkaXZcIixcbiAgICAgICAge1xuICAgICAgICAgIHN0eWxlOiBcInBhZGRpbmctbGVmdDoxLjI1ZW1cIlxuICAgICAgICB9LFxuICAgICAgICAuLi5PYmplY3Qua2V5cyh0YXJnZXQpLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIFtcInNwYW5cIiwga2V5d29yZFN0eWxlLCBrZXkgKyBcIjogXCJdLFxuICAgICAgICAgICAgZm9ybWF0VmFsdWUodGFyZ2V0W2tleV0sIGZhbHNlKVxuICAgICAgICAgIF07XG4gICAgICAgIH0pXG4gICAgICBdXG4gICAgXTtcbiAgfVxuICBmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2LCBhc1JhdyA9IHRydWUpIHtcbiAgICBpZiAodHlwZW9mIHYgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBbXCJzcGFuXCIsIG51bWJlclN0eWxlLCB2XTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCBzdHJpbmdTdHlsZSwgSlNPTi5zdHJpbmdpZnkodildO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCBrZXl3b3JkU3R5bGUsIHZdO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodikpIHtcbiAgICAgIHJldHVybiBbXCJvYmplY3RcIiwgeyBvYmplY3Q6IGFzUmF3ID8gdG9SYXcodikgOiB2IH1dO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW1wic3BhblwiLCBzdHJpbmdTdHlsZSwgU3RyaW5nKHYpXTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZXh0cmFjdEtleXMoaW5zdGFuY2UsIHR5cGUpIHtcbiAgICBjb25zdCBDb21wID0gaW5zdGFuY2UudHlwZTtcbiAgICBpZiAoaXNGdW5jdGlvbihDb21wKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBleHRyYWN0ZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnN0YW5jZS5jdHgpIHtcbiAgICAgIGlmIChpc0tleU9mVHlwZShDb21wLCBrZXksIHR5cGUpKSB7XG4gICAgICAgIGV4dHJhY3RlZFtrZXldID0gaW5zdGFuY2UuY3R4W2tleV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBleHRyYWN0ZWQ7XG4gIH1cbiAgZnVuY3Rpb24gaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSB7XG4gICAgY29uc3Qgb3B0cyA9IENvbXBbdHlwZV07XG4gICAgaWYgKGlzQXJyYXkob3B0cykgJiYgb3B0cy5pbmNsdWRlcyhrZXkpIHx8IGlzT2JqZWN0KG9wdHMpICYmIGtleSBpbiBvcHRzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKENvbXAuZXh0ZW5kcyAmJiBpc0tleU9mVHlwZShDb21wLmV4dGVuZHMsIGtleSwgdHlwZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoQ29tcC5taXhpbnMgJiYgQ29tcC5taXhpbnMuc29tZSgobSkgPT4gaXNLZXlPZlR5cGUobSwga2V5LCB0eXBlKSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBnZW5SZWZGbGFnKHYpIHtcbiAgICBpZiAoaXNTaGFsbG93KHYpKSB7XG4gICAgICByZXR1cm4gYFNoYWxsb3dSZWZgO1xuICAgIH1cbiAgICBpZiAodi5lZmZlY3QpIHtcbiAgICAgIHJldHVybiBgQ29tcHV0ZWRSZWZgO1xuICAgIH1cbiAgICByZXR1cm4gYFJlZmA7XG4gIH1cbiAgaWYgKHdpbmRvdy5kZXZ0b29sc0Zvcm1hdHRlcnMpIHtcbiAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzID0gW2Zvcm1hdHRlcl07XG4gIH1cbn1cblxuZnVuY3Rpb24gd2l0aE1lbW8obWVtbywgcmVuZGVyLCBjYWNoZSwgaW5kZXgpIHtcbiAgY29uc3QgY2FjaGVkID0gY2FjaGVbaW5kZXhdO1xuICBpZiAoY2FjaGVkICYmIGlzTWVtb1NhbWUoY2FjaGVkLCBtZW1vKSkge1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgY29uc3QgcmV0ID0gcmVuZGVyKCk7XG4gIHJldC5tZW1vID0gbWVtby5zbGljZSgpO1xuICByZXQuY2FjaGVJbmRleCA9IGluZGV4O1xuICByZXR1cm4gY2FjaGVbaW5kZXhdID0gcmV0O1xufVxuZnVuY3Rpb24gaXNNZW1vU2FtZShjYWNoZWQsIG1lbW8pIHtcbiAgY29uc3QgcHJldiA9IGNhY2hlZC5tZW1vO1xuICBpZiAocHJldi5sZW5ndGggIT0gbWVtby5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGhhc0NoYW5nZWQocHJldltpXSwgbWVtb1tpXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgY3VycmVudEJsb2NrKSB7XG4gICAgY3VycmVudEJsb2NrLnB1c2goY2FjaGVkKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuY29uc3QgdmVyc2lvbiA9IFwiMy41LjEzXCI7XG5jb25zdCB3YXJuID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHdhcm4kMSA6IE5PT1A7XG5jb25zdCBFcnJvclR5cGVTdHJpbmdzID0gRXJyb3JUeXBlU3RyaW5ncyQxIDtcbmNvbnN0IGRldnRvb2xzID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB8fCB0cnVlID8gZGV2dG9vbHMkMSA6IHZvaWQgMDtcbmNvbnN0IHNldERldnRvb2xzSG9vayA9ICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgdHJ1ZSA/IHNldERldnRvb2xzSG9vayQxIDogTk9PUDtcbmNvbnN0IF9zc3JVdGlscyA9IHtcbiAgY3JlYXRlQ29tcG9uZW50SW5zdGFuY2UsXG4gIHNldHVwQ29tcG9uZW50LFxuICByZW5kZXJDb21wb25lbnRSb290LFxuICBzZXRDdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsXG4gIGlzVk5vZGU6IGlzVk5vZGUsXG4gIG5vcm1hbGl6ZVZOb2RlLFxuICBnZXRDb21wb25lbnRQdWJsaWNJbnN0YW5jZSxcbiAgZW5zdXJlVmFsaWRWTm9kZSxcbiAgcHVzaFdhcm5pbmdDb250ZXh0LFxuICBwb3BXYXJuaW5nQ29udGV4dFxufTtcbmNvbnN0IHNzclV0aWxzID0gX3NzclV0aWxzIDtcbmNvbnN0IHJlc29sdmVGaWx0ZXIgPSBudWxsO1xuY29uc3QgY29tcGF0VXRpbHMgPSBudWxsO1xuY29uc3QgRGVwcmVjYXRpb25UeXBlcyA9IG51bGw7XG5cbmV4cG9ydCB7IEJhc2VUcmFuc2l0aW9uLCBCYXNlVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycywgQ29tbWVudCwgRGVwcmVjYXRpb25UeXBlcywgRXJyb3JDb2RlcywgRXJyb3JUeXBlU3RyaW5ncywgRnJhZ21lbnQsIEtlZXBBbGl2ZSwgU3RhdGljLCBTdXNwZW5zZSwgVGVsZXBvcnQsIFRleHQsIGFzc2VydE51bWJlciwgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcsIGNhbGxXaXRoRXJyb3JIYW5kbGluZywgY2xvbmVWTm9kZSwgY29tcGF0VXRpbHMsIGNvbXB1dGVkLCBjcmVhdGVCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlLCBjcmVhdGVFbGVtZW50QmxvY2ssIGNyZWF0ZUJhc2VWTm9kZSBhcyBjcmVhdGVFbGVtZW50Vk5vZGUsIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyLCBjcmVhdGVQcm9wc1Jlc3RQcm94eSwgY3JlYXRlUmVuZGVyZXIsIGNyZWF0ZVNsb3RzLCBjcmVhdGVTdGF0aWNWTm9kZSwgY3JlYXRlVGV4dFZOb2RlLCBjcmVhdGVWTm9kZSwgZGVmaW5lQXN5bmNDb21wb25lbnQsIGRlZmluZUNvbXBvbmVudCwgZGVmaW5lRW1pdHMsIGRlZmluZUV4cG9zZSwgZGVmaW5lTW9kZWwsIGRlZmluZU9wdGlvbnMsIGRlZmluZVByb3BzLCBkZWZpbmVTbG90cywgZGV2dG9vbHMsIGdldEN1cnJlbnRJbnN0YW5jZSwgZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuLCBndWFyZFJlYWN0aXZlUHJvcHMsIGgsIGhhbmRsZUVycm9yLCBoYXNJbmplY3Rpb25Db250ZXh0LCBoeWRyYXRlT25JZGxlLCBoeWRyYXRlT25JbnRlcmFjdGlvbiwgaHlkcmF0ZU9uTWVkaWFRdWVyeSwgaHlkcmF0ZU9uVmlzaWJsZSwgaW5pdEN1c3RvbUZvcm1hdHRlciwgaW5qZWN0LCBpc01lbW9TYW1lLCBpc1J1bnRpbWVPbmx5LCBpc1ZOb2RlLCBtZXJnZURlZmF1bHRzLCBtZXJnZU1vZGVscywgbWVyZ2VQcm9wcywgbmV4dFRpY2ssIG9uQWN0aXZhdGVkLCBvbkJlZm9yZU1vdW50LCBvbkJlZm9yZVVubW91bnQsIG9uQmVmb3JlVXBkYXRlLCBvbkRlYWN0aXZhdGVkLCBvbkVycm9yQ2FwdHVyZWQsIG9uTW91bnRlZCwgb25SZW5kZXJUcmFja2VkLCBvblJlbmRlclRyaWdnZXJlZCwgb25TZXJ2ZXJQcmVmZXRjaCwgb25Vbm1vdW50ZWQsIG9uVXBkYXRlZCwgb3BlbkJsb2NrLCBwb3BTY29wZUlkLCBwcm92aWRlLCBwdXNoU2NvcGVJZCwgcXVldWVQb3N0Rmx1c2hDYiwgcmVnaXN0ZXJSdW50aW1lQ29tcGlsZXIsIHJlbmRlckxpc3QsIHJlbmRlclNsb3QsIHJlc29sdmVDb21wb25lbnQsIHJlc29sdmVEaXJlY3RpdmUsIHJlc29sdmVEeW5hbWljQ29tcG9uZW50LCByZXNvbHZlRmlsdGVyLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzLCBzZXRCbG9ja1RyYWNraW5nLCBzZXREZXZ0b29sc0hvb2ssIHNldFRyYW5zaXRpb25Ib29rcywgc3NyQ29udGV4dEtleSwgc3NyVXRpbHMsIHRvSGFuZGxlcnMsIHRyYW5zZm9ybVZOb2RlQXJncywgdXNlQXR0cnMsIHVzZUlkLCB1c2VNb2RlbCwgdXNlU1NSQ29udGV4dCwgdXNlU2xvdHMsIHVzZVRlbXBsYXRlUmVmLCB1c2VUcmFuc2l0aW9uU3RhdGUsIHZlcnNpb24sIHdhcm4sIHdhdGNoLCB3YXRjaEVmZmVjdCwgd2F0Y2hQb3N0RWZmZWN0LCB3YXRjaFN5bmNFZmZlY3QsIHdpdGhBc3luY0NvbnRleHQsIHdpdGhDdHgsIHdpdGhEZWZhdWx0cywgd2l0aERpcmVjdGl2ZXMsIHdpdGhNZW1vLCB3aXRoU2NvcGVJZCB9O1xuIiwiLyoqXG4qIEB2dWUvcnVudGltZS1kb20gdjMuNS4xM1xuKiAoYykgMjAxOC1wcmVzZW50IFl1eGkgKEV2YW4pIFlvdSBhbmQgVnVlIGNvbnRyaWJ1dG9yc1xuKiBAbGljZW5zZSBNSVRcbioqL1xuaW1wb3J0IHsgd2FybiwgaCwgQmFzZVRyYW5zaXRpb24sIGFzc2VydE51bWJlciwgQmFzZVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsIGdldEN1cnJlbnRJbnN0YW5jZSwgb25CZWZvcmVVcGRhdGUsIHF1ZXVlUG9zdEZsdXNoQ2IsIG9uTW91bnRlZCwgd2F0Y2gsIG9uVW5tb3VudGVkLCBGcmFnbWVudCwgU3RhdGljLCBjYW1lbGl6ZSwgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcsIGRlZmluZUNvbXBvbmVudCwgbmV4dFRpY2ssIHVucmVmLCBjcmVhdGVWTm9kZSwgdXNlVHJhbnNpdGlvblN0YXRlLCBvblVwZGF0ZWQsIHRvUmF3LCBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4sIHNldFRyYW5zaXRpb25Ib29rcywgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcywgVGV4dCwgaXNSdW50aW1lT25seSwgY3JlYXRlUmVuZGVyZXIsIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyIH0gZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnO1xuZXhwb3J0ICogZnJvbSAnQHZ1ZS9ydW50aW1lLWNvcmUnO1xuaW1wb3J0IHsgZXh0ZW5kLCBpc09iamVjdCwgdG9OdW1iZXIsIGlzQXJyYXksIE5PT1AsIGlzU3RyaW5nLCBoeXBoZW5hdGUsIGNhcGl0YWxpemUsIGluY2x1ZGVCb29sZWFuQXR0ciwgaXNTeW1ib2wsIGlzU3BlY2lhbEJvb2xlYW5BdHRyLCBpc0Z1bmN0aW9uLCBpc09uLCBpc01vZGVsTGlzdGVuZXIsIGNhbWVsaXplIGFzIGNhbWVsaXplJDEsIGlzUGxhaW5PYmplY3QsIGhhc093biwgRU1QVFlfT0JKLCBsb29zZVRvTnVtYmVyLCBsb29zZUluZGV4T2YsIGlzU2V0LCBsb29zZUVxdWFsLCBpbnZva2VBcnJheUZucywgaXNIVE1MVGFnLCBpc1NWR1RhZywgaXNNYXRoTUxUYWcgfSBmcm9tICdAdnVlL3NoYXJlZCc7XG5cbmxldCBwb2xpY3kgPSB2b2lkIDA7XG5jb25zdCB0dCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LnRydXN0ZWRUeXBlcztcbmlmICh0dCkge1xuICB0cnkge1xuICAgIHBvbGljeSA9IC8qIEBfX1BVUkVfXyAqLyB0dC5jcmVhdGVQb2xpY3koXCJ2dWVcIiwge1xuICAgICAgY3JlYXRlSFRNTDogKHZhbCkgPT4gdmFsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdhcm4oYEVycm9yIGNyZWF0aW5nIHRydXN0ZWQgdHlwZXMgcG9saWN5OiAke2V9YCk7XG4gIH1cbn1cbmNvbnN0IHVuc2FmZVRvVHJ1c3RlZEhUTUwgPSBwb2xpY3kgPyAodmFsKSA9PiBwb2xpY3kuY3JlYXRlSFRNTCh2YWwpIDogKHZhbCkgPT4gdmFsO1xuY29uc3Qgc3ZnTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XG5jb25zdCBtYXRobWxOUyA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTFwiO1xuY29uc3QgZG9jID0gdHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiID8gZG9jdW1lbnQgOiBudWxsO1xuY29uc3QgdGVtcGxhdGVDb250YWluZXIgPSBkb2MgJiYgLyogQF9fUFVSRV9fICovIGRvYy5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG5jb25zdCBub2RlT3BzID0ge1xuICBpbnNlcnQ6IChjaGlsZCwgcGFyZW50LCBhbmNob3IpID0+IHtcbiAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBhbmNob3IgfHwgbnVsbCk7XG4gIH0sXG4gIHJlbW92ZTogKGNoaWxkKSA9PiB7XG4gICAgY29uc3QgcGFyZW50ID0gY2hpbGQucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfSxcbiAgY3JlYXRlRWxlbWVudDogKHRhZywgbmFtZXNwYWNlLCBpcywgcHJvcHMpID0+IHtcbiAgICBjb25zdCBlbCA9IG5hbWVzcGFjZSA9PT0gXCJzdmdcIiA/IGRvYy5jcmVhdGVFbGVtZW50TlMoc3ZnTlMsIHRhZykgOiBuYW1lc3BhY2UgPT09IFwibWF0aG1sXCIgPyBkb2MuY3JlYXRlRWxlbWVudE5TKG1hdGhtbE5TLCB0YWcpIDogaXMgPyBkb2MuY3JlYXRlRWxlbWVudCh0YWcsIHsgaXMgfSkgOiBkb2MuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGlmICh0YWcgPT09IFwic2VsZWN0XCIgJiYgcHJvcHMgJiYgcHJvcHMubXVsdGlwbGUgIT0gbnVsbCkge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKFwibXVsdGlwbGVcIiwgcHJvcHMubXVsdGlwbGUpO1xuICAgIH1cbiAgICByZXR1cm4gZWw7XG4gIH0sXG4gIGNyZWF0ZVRleHQ6ICh0ZXh0KSA9PiBkb2MuY3JlYXRlVGV4dE5vZGUodGV4dCksXG4gIGNyZWF0ZUNvbW1lbnQ6ICh0ZXh0KSA9PiBkb2MuY3JlYXRlQ29tbWVudCh0ZXh0KSxcbiAgc2V0VGV4dDogKG5vZGUsIHRleHQpID0+IHtcbiAgICBub2RlLm5vZGVWYWx1ZSA9IHRleHQ7XG4gIH0sXG4gIHNldEVsZW1lbnRUZXh0OiAoZWwsIHRleHQpID0+IHtcbiAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH0sXG4gIHBhcmVudE5vZGU6IChub2RlKSA9PiBub2RlLnBhcmVudE5vZGUsXG4gIG5leHRTaWJsaW5nOiAobm9kZSkgPT4gbm9kZS5uZXh0U2libGluZyxcbiAgcXVlcnlTZWxlY3RvcjogKHNlbGVjdG9yKSA9PiBkb2MucXVlcnlTZWxlY3RvcihzZWxlY3RvciksXG4gIHNldFNjb3BlSWQoZWwsIGlkKSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKGlkLCBcIlwiKTtcbiAgfSxcbiAgLy8gX19VTlNBRkVfX1xuICAvLyBSZWFzb246IGlubmVySFRNTC5cbiAgLy8gU3RhdGljIGNvbnRlbnQgaGVyZSBjYW4gb25seSBjb21lIGZyb20gY29tcGlsZWQgdGVtcGxhdGVzLlxuICAvLyBBcyBsb25nIGFzIHRoZSB1c2VyIG9ubHkgdXNlcyB0cnVzdGVkIHRlbXBsYXRlcywgdGhpcyBpcyBzYWZlLlxuICBpbnNlcnRTdGF0aWNDb250ZW50KGNvbnRlbnQsIHBhcmVudCwgYW5jaG9yLCBuYW1lc3BhY2UsIHN0YXJ0LCBlbmQpIHtcbiAgICBjb25zdCBiZWZvcmUgPSBhbmNob3IgPyBhbmNob3IucHJldmlvdXNTaWJsaW5nIDogcGFyZW50Lmxhc3RDaGlsZDtcbiAgICBpZiAoc3RhcnQgJiYgKHN0YXJ0ID09PSBlbmQgfHwgc3RhcnQubmV4dFNpYmxpbmcpKSB7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHN0YXJ0LmNsb25lTm9kZSh0cnVlKSwgYW5jaG9yKTtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSBlbmQgfHwgIShzdGFydCA9IHN0YXJ0Lm5leHRTaWJsaW5nKSkgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRlbXBsYXRlQ29udGFpbmVyLmlubmVySFRNTCA9IHVuc2FmZVRvVHJ1c3RlZEhUTUwoXG4gICAgICAgIG5hbWVzcGFjZSA9PT0gXCJzdmdcIiA/IGA8c3ZnPiR7Y29udGVudH08L3N2Zz5gIDogbmFtZXNwYWNlID09PSBcIm1hdGhtbFwiID8gYDxtYXRoPiR7Y29udGVudH08L21hdGg+YCA6IGNvbnRlbnRcbiAgICAgICk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ29udGFpbmVyLmNvbnRlbnQ7XG4gICAgICBpZiAobmFtZXNwYWNlID09PSBcInN2Z1wiIHx8IG5hbWVzcGFjZSA9PT0gXCJtYXRobWxcIikge1xuICAgICAgICBjb25zdCB3cmFwcGVyID0gdGVtcGxhdGUuZmlyc3RDaGlsZDtcbiAgICAgICAgd2hpbGUgKHdyYXBwZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKHdyYXBwZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGUucmVtb3ZlQ2hpbGQod3JhcHBlcik7XG4gICAgICB9XG4gICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRlbXBsYXRlLCBhbmNob3IpO1xuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgLy8gZmlyc3RcbiAgICAgIGJlZm9yZSA/IGJlZm9yZS5uZXh0U2libGluZyA6IHBhcmVudC5maXJzdENoaWxkLFxuICAgICAgLy8gbGFzdFxuICAgICAgYW5jaG9yID8gYW5jaG9yLnByZXZpb3VzU2libGluZyA6IHBhcmVudC5sYXN0Q2hpbGRcbiAgICBdO1xuICB9XG59O1xuXG5jb25zdCBUUkFOU0lUSU9OID0gXCJ0cmFuc2l0aW9uXCI7XG5jb25zdCBBTklNQVRJT04gPSBcImFuaW1hdGlvblwiO1xuY29uc3QgdnRjS2V5ID0gU3ltYm9sKFwiX3Z0Y1wiKTtcbmNvbnN0IERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSB7XG4gIG5hbWU6IFN0cmluZyxcbiAgdHlwZTogU3RyaW5nLFxuICBjc3M6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSxcbiAgZHVyYXRpb246IFtTdHJpbmcsIE51bWJlciwgT2JqZWN0XSxcbiAgZW50ZXJGcm9tQ2xhc3M6IFN0cmluZyxcbiAgZW50ZXJBY3RpdmVDbGFzczogU3RyaW5nLFxuICBlbnRlclRvQ2xhc3M6IFN0cmluZyxcbiAgYXBwZWFyRnJvbUNsYXNzOiBTdHJpbmcsXG4gIGFwcGVhckFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gIGFwcGVhclRvQ2xhc3M6IFN0cmluZyxcbiAgbGVhdmVGcm9tQ2xhc3M6IFN0cmluZyxcbiAgbGVhdmVBY3RpdmVDbGFzczogU3RyaW5nLFxuICBsZWF2ZVRvQ2xhc3M6IFN0cmluZ1xufTtcbmNvbnN0IFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSAvKiBAX19QVVJFX18gKi8gZXh0ZW5kKFxuICB7fSxcbiAgQmFzZVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsXG4gIERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnNcbik7XG5jb25zdCBkZWNvcmF0ZSQxID0gKHQpID0+IHtcbiAgdC5kaXNwbGF5TmFtZSA9IFwiVHJhbnNpdGlvblwiO1xuICB0LnByb3BzID0gVHJhbnNpdGlvblByb3BzVmFsaWRhdG9ycztcbiAgcmV0dXJuIHQ7XG59O1xuY29uc3QgVHJhbnNpdGlvbiA9IC8qIEBfX1BVUkVfXyAqLyBkZWNvcmF0ZSQxKFxuICAocHJvcHMsIHsgc2xvdHMgfSkgPT4gaChCYXNlVHJhbnNpdGlvbiwgcmVzb2x2ZVRyYW5zaXRpb25Qcm9wcyhwcm9wcyksIHNsb3RzKVxuKTtcbmNvbnN0IGNhbGxIb29rID0gKGhvb2ssIGFyZ3MgPSBbXSkgPT4ge1xuICBpZiAoaXNBcnJheShob29rKSkge1xuICAgIGhvb2suZm9yRWFjaCgoaDIpID0+IGgyKC4uLmFyZ3MpKTtcbiAgfSBlbHNlIGlmIChob29rKSB7XG4gICAgaG9vayguLi5hcmdzKTtcbiAgfVxufTtcbmNvbnN0IGhhc0V4cGxpY2l0Q2FsbGJhY2sgPSAoaG9vaykgPT4ge1xuICByZXR1cm4gaG9vayA/IGlzQXJyYXkoaG9vaykgPyBob29rLnNvbWUoKGgyKSA9PiBoMi5sZW5ndGggPiAxKSA6IGhvb2subGVuZ3RoID4gMSA6IGZhbHNlO1xufTtcbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocmF3UHJvcHMpIHtcbiAgY29uc3QgYmFzZVByb3BzID0ge307XG4gIGZvciAoY29uc3Qga2V5IGluIHJhd1Byb3BzKSB7XG4gICAgaWYgKCEoa2V5IGluIERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMpKSB7XG4gICAgICBiYXNlUHJvcHNba2V5XSA9IHJhd1Byb3BzW2tleV07XG4gICAgfVxuICB9XG4gIGlmIChyYXdQcm9wcy5jc3MgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGJhc2VQcm9wcztcbiAgfVxuICBjb25zdCB7XG4gICAgbmFtZSA9IFwidlwiLFxuICAgIHR5cGUsXG4gICAgZHVyYXRpb24sXG4gICAgZW50ZXJGcm9tQ2xhc3MgPSBgJHtuYW1lfS1lbnRlci1mcm9tYCxcbiAgICBlbnRlckFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tZW50ZXItYWN0aXZlYCxcbiAgICBlbnRlclRvQ2xhc3MgPSBgJHtuYW1lfS1lbnRlci10b2AsXG4gICAgYXBwZWFyRnJvbUNsYXNzID0gZW50ZXJGcm9tQ2xhc3MsXG4gICAgYXBwZWFyQWN0aXZlQ2xhc3MgPSBlbnRlckFjdGl2ZUNsYXNzLFxuICAgIGFwcGVhclRvQ2xhc3MgPSBlbnRlclRvQ2xhc3MsXG4gICAgbGVhdmVGcm9tQ2xhc3MgPSBgJHtuYW1lfS1sZWF2ZS1mcm9tYCxcbiAgICBsZWF2ZUFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tbGVhdmUtYWN0aXZlYCxcbiAgICBsZWF2ZVRvQ2xhc3MgPSBgJHtuYW1lfS1sZWF2ZS10b2BcbiAgfSA9IHJhd1Byb3BzO1xuICBjb25zdCBkdXJhdGlvbnMgPSBub3JtYWxpemVEdXJhdGlvbihkdXJhdGlvbik7XG4gIGNvbnN0IGVudGVyRHVyYXRpb24gPSBkdXJhdGlvbnMgJiYgZHVyYXRpb25zWzBdO1xuICBjb25zdCBsZWF2ZUR1cmF0aW9uID0gZHVyYXRpb25zICYmIGR1cmF0aW9uc1sxXTtcbiAgY29uc3Qge1xuICAgIG9uQmVmb3JlRW50ZXIsXG4gICAgb25FbnRlcixcbiAgICBvbkVudGVyQ2FuY2VsbGVkLFxuICAgIG9uTGVhdmUsXG4gICAgb25MZWF2ZUNhbmNlbGxlZCxcbiAgICBvbkJlZm9yZUFwcGVhciA9IG9uQmVmb3JlRW50ZXIsXG4gICAgb25BcHBlYXIgPSBvbkVudGVyLFxuICAgIG9uQXBwZWFyQ2FuY2VsbGVkID0gb25FbnRlckNhbmNlbGxlZFxuICB9ID0gYmFzZVByb3BzO1xuICBjb25zdCBmaW5pc2hFbnRlciA9IChlbCwgaXNBcHBlYXIsIGRvbmUsIGlzQ2FuY2VsbGVkKSA9PiB7XG4gICAgZWwuX2VudGVyQ2FuY2VsbGVkID0gaXNDYW5jZWxsZWQ7XG4gICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhclRvQ2xhc3MgOiBlbnRlclRvQ2xhc3MpO1xuICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJBY3RpdmVDbGFzcyA6IGVudGVyQWN0aXZlQ2xhc3MpO1xuICAgIGRvbmUgJiYgZG9uZSgpO1xuICB9O1xuICBjb25zdCBmaW5pc2hMZWF2ZSA9IChlbCwgZG9uZSkgPT4ge1xuICAgIGVsLl9pc0xlYXZpbmcgPSBmYWxzZTtcbiAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlRnJvbUNsYXNzKTtcbiAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7XG4gICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUFjdGl2ZUNsYXNzKTtcbiAgICBkb25lICYmIGRvbmUoKTtcbiAgfTtcbiAgY29uc3QgbWFrZUVudGVySG9vayA9IChpc0FwcGVhcikgPT4ge1xuICAgIHJldHVybiAoZWwsIGRvbmUpID0+IHtcbiAgICAgIGNvbnN0IGhvb2sgPSBpc0FwcGVhciA/IG9uQXBwZWFyIDogb25FbnRlcjtcbiAgICAgIGNvbnN0IHJlc29sdmUgPSAoKSA9PiBmaW5pc2hFbnRlcihlbCwgaXNBcHBlYXIsIGRvbmUpO1xuICAgICAgY2FsbEhvb2soaG9vaywgW2VsLCByZXNvbHZlXSk7XG4gICAgICBuZXh0RnJhbWUoKCkgPT4ge1xuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyRnJvbUNsYXNzIDogZW50ZXJGcm9tQ2xhc3MpO1xuICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyVG9DbGFzcyA6IGVudGVyVG9DbGFzcyk7XG4gICAgICAgIGlmICghaGFzRXhwbGljaXRDYWxsYmFjayhob29rKSkge1xuICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgZW50ZXJEdXJhdGlvbiwgcmVzb2x2ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG4gIHJldHVybiBleHRlbmQoYmFzZVByb3BzLCB7XG4gICAgb25CZWZvcmVFbnRlcihlbCkge1xuICAgICAgY2FsbEhvb2sob25CZWZvcmVFbnRlciwgW2VsXSk7XG4gICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGVudGVyRnJvbUNsYXNzKTtcbiAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgZW50ZXJBY3RpdmVDbGFzcyk7XG4gICAgfSxcbiAgICBvbkJlZm9yZUFwcGVhcihlbCkge1xuICAgICAgY2FsbEhvb2sob25CZWZvcmVBcHBlYXIsIFtlbF0pO1xuICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBhcHBlYXJGcm9tQ2xhc3MpO1xuICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBhcHBlYXJBY3RpdmVDbGFzcyk7XG4gICAgfSxcbiAgICBvbkVudGVyOiBtYWtlRW50ZXJIb29rKGZhbHNlKSxcbiAgICBvbkFwcGVhcjogbWFrZUVudGVySG9vayh0cnVlKSxcbiAgICBvbkxlYXZlKGVsLCBkb25lKSB7XG4gICAgICBlbC5faXNMZWF2aW5nID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHJlc29sdmUgPSAoKSA9PiBmaW5pc2hMZWF2ZShlbCwgZG9uZSk7XG4gICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlRnJvbUNsYXNzKTtcbiAgICAgIGlmICghZWwuX2VudGVyQ2FuY2VsbGVkKSB7XG4gICAgICAgIGZvcmNlUmVmbG93KCk7XG4gICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xuICAgICAgICBmb3JjZVJlZmxvdygpO1xuICAgICAgfVxuICAgICAgbmV4dEZyYW1lKCgpID0+IHtcbiAgICAgICAgaWYgKCFlbC5faXNMZWF2aW5nKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVGcm9tQ2xhc3MpO1xuICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlVG9DbGFzcyk7XG4gICAgICAgIGlmICghaGFzRXhwbGljaXRDYWxsYmFjayhvbkxlYXZlKSkge1xuICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgbGVhdmVEdXJhdGlvbiwgcmVzb2x2ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY2FsbEhvb2sob25MZWF2ZSwgW2VsLCByZXNvbHZlXSk7XG4gICAgfSxcbiAgICBvbkVudGVyQ2FuY2VsbGVkKGVsKSB7XG4gICAgICBmaW5pc2hFbnRlcihlbCwgZmFsc2UsIHZvaWQgMCwgdHJ1ZSk7XG4gICAgICBjYWxsSG9vayhvbkVudGVyQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICB9LFxuICAgIG9uQXBwZWFyQ2FuY2VsbGVkKGVsKSB7XG4gICAgICBmaW5pc2hFbnRlcihlbCwgdHJ1ZSwgdm9pZCAwLCB0cnVlKTtcbiAgICAgIGNhbGxIb29rKG9uQXBwZWFyQ2FuY2VsbGVkLCBbZWxdKTtcbiAgICB9LFxuICAgIG9uTGVhdmVDYW5jZWxsZWQoZWwpIHtcbiAgICAgIGZpbmlzaExlYXZlKGVsKTtcbiAgICAgIGNhbGxIb29rKG9uTGVhdmVDYW5jZWxsZWQsIFtlbF0pO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVEdXJhdGlvbihkdXJhdGlvbikge1xuICBpZiAoZHVyYXRpb24gPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGR1cmF0aW9uKSkge1xuICAgIHJldHVybiBbTnVtYmVyT2YoZHVyYXRpb24uZW50ZXIpLCBOdW1iZXJPZihkdXJhdGlvbi5sZWF2ZSldO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IG4gPSBOdW1iZXJPZihkdXJhdGlvbik7XG4gICAgcmV0dXJuIFtuLCBuXTtcbiAgfVxufVxuZnVuY3Rpb24gTnVtYmVyT2YodmFsKSB7XG4gIGNvbnN0IHJlcyA9IHRvTnVtYmVyKHZhbCk7XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgYXNzZXJ0TnVtYmVyKHJlcywgXCI8dHJhbnNpdGlvbj4gZXhwbGljaXQgZHVyYXRpb25cIik7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgY2xzKSB7XG4gIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goKGMpID0+IGMgJiYgZWwuY2xhc3NMaXN0LmFkZChjKSk7XG4gIChlbFt2dGNLZXldIHx8IChlbFt2dGNLZXldID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSkpLmFkZChjbHMpO1xufVxuZnVuY3Rpb24gcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBjbHMpIHtcbiAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaCgoYykgPT4gYyAmJiBlbC5jbGFzc0xpc3QucmVtb3ZlKGMpKTtcbiAgY29uc3QgX3Z0YyA9IGVsW3Z0Y0tleV07XG4gIGlmIChfdnRjKSB7XG4gICAgX3Z0Yy5kZWxldGUoY2xzKTtcbiAgICBpZiAoIV92dGMuc2l6ZSkge1xuICAgICAgZWxbdnRjS2V5XSA9IHZvaWQgMDtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIG5leHRGcmFtZShjYikge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYik7XG4gIH0pO1xufVxubGV0IGVuZElkID0gMDtcbmZ1bmN0aW9uIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgZXhwZWN0ZWRUeXBlLCBleHBsaWNpdFRpbWVvdXQsIHJlc29sdmUpIHtcbiAgY29uc3QgaWQgPSBlbC5fZW5kSWQgPSArK2VuZElkO1xuICBjb25zdCByZXNvbHZlSWZOb3RTdGFsZSA9ICgpID0+IHtcbiAgICBpZiAoaWQgPT09IGVsLl9lbmRJZCkge1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH1cbiAgfTtcbiAgaWYgKGV4cGxpY2l0VGltZW91dCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQocmVzb2x2ZUlmTm90U3RhbGUsIGV4cGxpY2l0VGltZW91dCk7XG4gIH1cbiAgY29uc3QgeyB0eXBlLCB0aW1lb3V0LCBwcm9wQ291bnQgfSA9IGdldFRyYW5zaXRpb25JbmZvKGVsLCBleHBlY3RlZFR5cGUpO1xuICBpZiAoIXR5cGUpIHtcbiAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICB9XG4gIGNvbnN0IGVuZEV2ZW50ID0gdHlwZSArIFwiZW5kXCI7XG4gIGxldCBlbmRlZCA9IDA7XG4gIGNvbnN0IGVuZCA9ICgpID0+IHtcbiAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGVuZEV2ZW50LCBvbkVuZCk7XG4gICAgcmVzb2x2ZUlmTm90U3RhbGUoKTtcbiAgfTtcbiAgY29uc3Qgb25FbmQgPSAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZWwgJiYgKytlbmRlZCA+PSBwcm9wQ291bnQpIHtcbiAgICAgIGVuZCgpO1xuICAgIH1cbiAgfTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaWYgKGVuZGVkIDwgcHJvcENvdW50KSB7XG4gICAgICBlbmQoKTtcbiAgICB9XG4gIH0sIHRpbWVvdXQgKyAxKTtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihlbmRFdmVudCwgb25FbmQpO1xufVxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSkge1xuICBjb25zdCBzdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG4gIGNvbnN0IGdldFN0eWxlUHJvcGVydGllcyA9IChrZXkpID0+IChzdHlsZXNba2V5XSB8fCBcIlwiKS5zcGxpdChcIiwgXCIpO1xuICBjb25zdCB0cmFuc2l0aW9uRGVsYXlzID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke1RSQU5TSVRJT059RGVsYXlgKTtcbiAgY29uc3QgdHJhbnNpdGlvbkR1cmF0aW9ucyA9IGdldFN0eWxlUHJvcGVydGllcyhgJHtUUkFOU0lUSU9OfUR1cmF0aW9uYCk7XG4gIGNvbnN0IHRyYW5zaXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dCh0cmFuc2l0aW9uRGVsYXlzLCB0cmFuc2l0aW9uRHVyYXRpb25zKTtcbiAgY29uc3QgYW5pbWF0aW9uRGVsYXlzID0gZ2V0U3R5bGVQcm9wZXJ0aWVzKGAke0FOSU1BVElPTn1EZWxheWApO1xuICBjb25zdCBhbmltYXRpb25EdXJhdGlvbnMgPSBnZXRTdHlsZVByb3BlcnRpZXMoYCR7QU5JTUFUSU9OfUR1cmF0aW9uYCk7XG4gIGNvbnN0IGFuaW1hdGlvblRpbWVvdXQgPSBnZXRUaW1lb3V0KGFuaW1hdGlvbkRlbGF5cywgYW5pbWF0aW9uRHVyYXRpb25zKTtcbiAgbGV0IHR5cGUgPSBudWxsO1xuICBsZXQgdGltZW91dCA9IDA7XG4gIGxldCBwcm9wQ291bnQgPSAwO1xuICBpZiAoZXhwZWN0ZWRUeXBlID09PSBUUkFOU0lUSU9OKSB7XG4gICAgaWYgKHRyYW5zaXRpb25UaW1lb3V0ID4gMCkge1xuICAgICAgdHlwZSA9IFRSQU5TSVRJT047XG4gICAgICB0aW1lb3V0ID0gdHJhbnNpdGlvblRpbWVvdXQ7XG4gICAgICBwcm9wQ291bnQgPSB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBBTklNQVRJT04pIHtcbiAgICBpZiAoYW5pbWF0aW9uVGltZW91dCA+IDApIHtcbiAgICAgIHR5cGUgPSBBTklNQVRJT047XG4gICAgICB0aW1lb3V0ID0gYW5pbWF0aW9uVGltZW91dDtcbiAgICAgIHByb3BDb3VudCA9IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGg7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRpbWVvdXQgPSBNYXRoLm1heCh0cmFuc2l0aW9uVGltZW91dCwgYW5pbWF0aW9uVGltZW91dCk7XG4gICAgdHlwZSA9IHRpbWVvdXQgPiAwID8gdHJhbnNpdGlvblRpbWVvdXQgPiBhbmltYXRpb25UaW1lb3V0ID8gVFJBTlNJVElPTiA6IEFOSU1BVElPTiA6IG51bGw7XG4gICAgcHJvcENvdW50ID0gdHlwZSA/IHR5cGUgPT09IFRSQU5TSVRJT04gPyB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aCA6IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGggOiAwO1xuICB9XG4gIGNvbnN0IGhhc1RyYW5zZm9ybSA9IHR5cGUgPT09IFRSQU5TSVRJT04gJiYgL1xcYih0cmFuc2Zvcm18YWxsKSgsfCQpLy50ZXN0KFxuICAgIGdldFN0eWxlUHJvcGVydGllcyhgJHtUUkFOU0lUSU9OfVByb3BlcnR5YCkudG9TdHJpbmcoKVxuICApO1xuICByZXR1cm4ge1xuICAgIHR5cGUsXG4gICAgdGltZW91dCxcbiAgICBwcm9wQ291bnQsXG4gICAgaGFzVHJhbnNmb3JtXG4gIH07XG59XG5mdW5jdGlvbiBnZXRUaW1lb3V0KGRlbGF5cywgZHVyYXRpb25zKSB7XG4gIHdoaWxlIChkZWxheXMubGVuZ3RoIDwgZHVyYXRpb25zLmxlbmd0aCkge1xuICAgIGRlbGF5cyA9IGRlbGF5cy5jb25jYXQoZGVsYXlzKTtcbiAgfVxuICByZXR1cm4gTWF0aC5tYXgoLi4uZHVyYXRpb25zLm1hcCgoZCwgaSkgPT4gdG9NcyhkKSArIHRvTXMoZGVsYXlzW2ldKSkpO1xufVxuZnVuY3Rpb24gdG9NcyhzKSB7XG4gIGlmIChzID09PSBcImF1dG9cIikgcmV0dXJuIDA7XG4gIHJldHVybiBOdW1iZXIocy5zbGljZSgwLCAtMSkucmVwbGFjZShcIixcIiwgXCIuXCIpKSAqIDFlMztcbn1cbmZ1bmN0aW9uIGZvcmNlUmVmbG93KCkge1xuICByZXR1cm4gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7XG59XG5cbmZ1bmN0aW9uIHBhdGNoQ2xhc3MoZWwsIHZhbHVlLCBpc1NWRykge1xuICBjb25zdCB0cmFuc2l0aW9uQ2xhc3NlcyA9IGVsW3Z0Y0tleV07XG4gIGlmICh0cmFuc2l0aW9uQ2xhc3Nlcykge1xuICAgIHZhbHVlID0gKHZhbHVlID8gW3ZhbHVlLCAuLi50cmFuc2l0aW9uQ2xhc3Nlc10gOiBbLi4udHJhbnNpdGlvbkNsYXNzZXNdKS5qb2luKFwiIFwiKTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcImNsYXNzXCIpO1xuICB9IGVsc2UgaWYgKGlzU1ZHKSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmNsYXNzTmFtZSA9IHZhbHVlO1xuICB9XG59XG5cbmNvbnN0IHZTaG93T3JpZ2luYWxEaXNwbGF5ID0gU3ltYm9sKFwiX3ZvZFwiKTtcbmNvbnN0IHZTaG93SGlkZGVuID0gU3ltYm9sKFwiX3ZzaFwiKTtcbmNvbnN0IHZTaG93ID0ge1xuICBiZWZvcmVNb3VudChlbCwgeyB2YWx1ZSB9LCB7IHRyYW5zaXRpb24gfSkge1xuICAgIGVsW3ZTaG93T3JpZ2luYWxEaXNwbGF5XSA9IGVsLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiID8gXCJcIiA6IGVsLnN0eWxlLmRpc3BsYXk7XG4gICAgaWYgKHRyYW5zaXRpb24gJiYgdmFsdWUpIHtcbiAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXREaXNwbGF5KGVsLCB2YWx1ZSk7XG4gICAgfVxuICB9LFxuICBtb3VudGVkKGVsLCB7IHZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XG4gICAgaWYgKHRyYW5zaXRpb24gJiYgdmFsdWUpIHtcbiAgICAgIHRyYW5zaXRpb24uZW50ZXIoZWwpO1xuICAgIH1cbiAgfSxcbiAgdXBkYXRlZChlbCwgeyB2YWx1ZSwgb2xkVmFsdWUgfSwgeyB0cmFuc2l0aW9uIH0pIHtcbiAgICBpZiAoIXZhbHVlID09PSAhb2xkVmFsdWUpIHJldHVybjtcbiAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xuICAgICAgICBzZXREaXNwbGF5KGVsLCB0cnVlKTtcbiAgICAgICAgdHJhbnNpdGlvbi5lbnRlcihlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2l0aW9uLmxlYXZlKGVsLCAoKSA9PiB7XG4gICAgICAgICAgc2V0RGlzcGxheShlbCwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xuICAgIH1cbiAgfSxcbiAgYmVmb3JlVW5tb3VudChlbCwgeyB2YWx1ZSB9KSB7XG4gICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xuICB9XG59O1xuaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgdlNob3cubmFtZSA9IFwic2hvd1wiO1xufVxuZnVuY3Rpb24gc2V0RGlzcGxheShlbCwgdmFsdWUpIHtcbiAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gZWxbdlNob3dPcmlnaW5hbERpc3BsYXldIDogXCJub25lXCI7XG4gIGVsW3ZTaG93SGlkZGVuXSA9ICF2YWx1ZTtcbn1cbmZ1bmN0aW9uIGluaXRWU2hvd0ZvclNTUigpIHtcbiAgdlNob3cuZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9KSA9PiB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgcmV0dXJuIHsgc3R5bGU6IHsgZGlzcGxheTogXCJub25lXCIgfSB9O1xuICAgIH1cbiAgfTtcbn1cblxuY29uc3QgQ1NTX1ZBUl9URVhUID0gU3ltYm9sKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgPyBcIkNTU19WQVJfVEVYVFwiIDogXCJcIik7XG5mdW5jdGlvbiB1c2VDc3NWYXJzKGdldHRlcikge1xuICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICBpZiAoIWluc3RhbmNlKSB7XG4gICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuKGB1c2VDc3NWYXJzIGlzIGNhbGxlZCB3aXRob3V0IGN1cnJlbnQgYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZS5gKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdXBkYXRlVGVsZXBvcnRzID0gaW5zdGFuY2UudXQgPSAodmFycyA9IGdldHRlcihpbnN0YW5jZS5wcm94eSkpID0+IHtcbiAgICBBcnJheS5mcm9tKFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtdi1vd25lcj1cIiR7aW5zdGFuY2UudWlkfVwiXWApXG4gICAgKS5mb3JFYWNoKChub2RlKSA9PiBzZXRWYXJzT25Ob2RlKG5vZGUsIHZhcnMpKTtcbiAgfTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBpbnN0YW5jZS5nZXRDc3NWYXJzID0gKCkgPT4gZ2V0dGVyKGluc3RhbmNlLnByb3h5KTtcbiAgfVxuICBjb25zdCBzZXRWYXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IHZhcnMgPSBnZXR0ZXIoaW5zdGFuY2UucHJveHkpO1xuICAgIGlmIChpbnN0YW5jZS5jZSkge1xuICAgICAgc2V0VmFyc09uTm9kZShpbnN0YW5jZS5jZSwgdmFycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFZhcnNPblZOb2RlKGluc3RhbmNlLnN1YlRyZWUsIHZhcnMpO1xuICAgIH1cbiAgICB1cGRhdGVUZWxlcG9ydHModmFycyk7XG4gIH07XG4gIG9uQmVmb3JlVXBkYXRlKCgpID0+IHtcbiAgICBxdWV1ZVBvc3RGbHVzaENiKHNldFZhcnMpO1xuICB9KTtcbiAgb25Nb3VudGVkKCgpID0+IHtcbiAgICB3YXRjaChzZXRWYXJzLCBOT09QLCB7IGZsdXNoOiBcInBvc3RcIiB9KTtcbiAgICBjb25zdCBvYiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHNldFZhcnMpO1xuICAgIG9iLm9ic2VydmUoaW5zdGFuY2Uuc3ViVHJlZS5lbC5wYXJlbnROb2RlLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICBvblVubW91bnRlZCgoKSA9PiBvYi5kaXNjb25uZWN0KCkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHNldFZhcnNPblZOb2RlKHZub2RlLCB2YXJzKSB7XG4gIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjgpIHtcbiAgICBjb25zdCBzdXNwZW5zZSA9IHZub2RlLnN1c3BlbnNlO1xuICAgIHZub2RlID0gc3VzcGVuc2UuYWN0aXZlQnJhbmNoO1xuICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmICFzdXNwZW5zZS5pc0h5ZHJhdGluZykge1xuICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKCgpID0+IHtcbiAgICAgICAgc2V0VmFyc09uVk5vZGUoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCB2YXJzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICB3aGlsZSAodm5vZGUuY29tcG9uZW50KSB7XG4gICAgdm5vZGUgPSB2bm9kZS5jb21wb25lbnQuc3ViVHJlZTtcbiAgfVxuICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMSAmJiB2bm9kZS5lbCkge1xuICAgIHNldFZhcnNPbk5vZGUodm5vZGUuZWwsIHZhcnMpO1xuICB9IGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IEZyYWdtZW50KSB7XG4gICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaCgoYykgPT4gc2V0VmFyc09uVk5vZGUoYywgdmFycykpO1xuICB9IGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IFN0YXRpYykge1xuICAgIGxldCB7IGVsLCBhbmNob3IgfSA9IHZub2RlO1xuICAgIHdoaWxlIChlbCkge1xuICAgICAgc2V0VmFyc09uTm9kZShlbCwgdmFycyk7XG4gICAgICBpZiAoZWwgPT09IGFuY2hvcikgYnJlYWs7XG4gICAgICBlbCA9IGVsLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gc2V0VmFyc09uTm9kZShlbCwgdmFycykge1xuICBpZiAoZWwubm9kZVR5cGUgPT09IDEpIHtcbiAgICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xuICAgIGxldCBjc3NUZXh0ID0gXCJcIjtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB2YXJzKSB7XG4gICAgICBzdHlsZS5zZXRQcm9wZXJ0eShgLS0ke2tleX1gLCB2YXJzW2tleV0pO1xuICAgICAgY3NzVGV4dCArPSBgLS0ke2tleX06ICR7dmFyc1trZXldfTtgO1xuICAgIH1cbiAgICBzdHlsZVtDU1NfVkFSX1RFWFRdID0gY3NzVGV4dDtcbiAgfVxufVxuXG5jb25zdCBkaXNwbGF5UkUgPSAvKF58OylcXHMqZGlzcGxheVxccyo6LztcbmZ1bmN0aW9uIHBhdGNoU3R5bGUoZWwsIHByZXYsIG5leHQpIHtcbiAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcbiAgY29uc3QgaXNDc3NTdHJpbmcgPSBpc1N0cmluZyhuZXh0KTtcbiAgbGV0IGhhc0NvbnRyb2xsZWREaXNwbGF5ID0gZmFsc2U7XG4gIGlmIChuZXh0ICYmICFpc0Nzc1N0cmluZykge1xuICAgIGlmIChwcmV2KSB7XG4gICAgICBpZiAoIWlzU3RyaW5nKHByZXYpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByZXYpIHtcbiAgICAgICAgICBpZiAobmV4dFtrZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksIFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBwcmV2U3R5bGUgb2YgcHJldi5zcGxpdChcIjtcIikpIHtcbiAgICAgICAgICBjb25zdCBrZXkgPSBwcmV2U3R5bGUuc2xpY2UoMCwgcHJldlN0eWxlLmluZGV4T2YoXCI6XCIpKS50cmltKCk7XG4gICAgICAgICAgaWYgKG5leHRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBzZXRTdHlsZShzdHlsZSwga2V5LCBcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbmV4dCkge1xuICAgICAgaWYgKGtleSA9PT0gXCJkaXNwbGF5XCIpIHtcbiAgICAgICAgaGFzQ29udHJvbGxlZERpc3BsYXkgPSB0cnVlO1xuICAgICAgfVxuICAgICAgc2V0U3R5bGUoc3R5bGUsIGtleSwgbmV4dFtrZXldKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGlzQ3NzU3RyaW5nKSB7XG4gICAgICBpZiAocHJldiAhPT0gbmV4dCkge1xuICAgICAgICBjb25zdCBjc3NWYXJUZXh0ID0gc3R5bGVbQ1NTX1ZBUl9URVhUXTtcbiAgICAgICAgaWYgKGNzc1ZhclRleHQpIHtcbiAgICAgICAgICBuZXh0ICs9IFwiO1wiICsgY3NzVmFyVGV4dDtcbiAgICAgICAgfVxuICAgICAgICBzdHlsZS5jc3NUZXh0ID0gbmV4dDtcbiAgICAgICAgaGFzQ29udHJvbGxlZERpc3BsYXkgPSBkaXNwbGF5UkUudGVzdChuZXh0KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByZXYpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpO1xuICAgIH1cbiAgfVxuICBpZiAodlNob3dPcmlnaW5hbERpc3BsYXkgaW4gZWwpIHtcbiAgICBlbFt2U2hvd09yaWdpbmFsRGlzcGxheV0gPSBoYXNDb250cm9sbGVkRGlzcGxheSA/IHN0eWxlLmRpc3BsYXkgOiBcIlwiO1xuICAgIGlmIChlbFt2U2hvd0hpZGRlbl0pIHtcbiAgICAgIHN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG4gIH1cbn1cbmNvbnN0IHNlbWljb2xvblJFID0gL1teXFxcXF07XFxzKiQvO1xuY29uc3QgaW1wb3J0YW50UkUgPSAvXFxzKiFpbXBvcnRhbnQkLztcbmZ1bmN0aW9uIHNldFN0eWxlKHN0eWxlLCBuYW1lLCB2YWwpIHtcbiAgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgIHZhbC5mb3JFYWNoKCh2KSA9PiBzZXRTdHlsZShzdHlsZSwgbmFtZSwgdikpO1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWwgPT0gbnVsbCkgdmFsID0gXCJcIjtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgaWYgKHNlbWljb2xvblJFLnRlc3QodmFsKSkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIGBVbmV4cGVjdGVkIHNlbWljb2xvbiBhdCB0aGUgZW5kIG9mICcke25hbWV9JyBzdHlsZSB2YWx1ZTogJyR7dmFsfSdgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoXCItLVwiKSkge1xuICAgICAgc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJlZml4ZWQgPSBhdXRvUHJlZml4KHN0eWxlLCBuYW1lKTtcbiAgICAgIGlmIChpbXBvcnRhbnRSRS50ZXN0KHZhbCkpIHtcbiAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgaHlwaGVuYXRlKHByZWZpeGVkKSxcbiAgICAgICAgICB2YWwucmVwbGFjZShpbXBvcnRhbnRSRSwgXCJcIiksXG4gICAgICAgICAgXCJpbXBvcnRhbnRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3R5bGVbcHJlZml4ZWRdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuY29uc3QgcHJlZml4ZXMgPSBbXCJXZWJraXRcIiwgXCJNb3pcIiwgXCJtc1wiXTtcbmNvbnN0IHByZWZpeENhY2hlID0ge307XG5mdW5jdGlvbiBhdXRvUHJlZml4KHN0eWxlLCByYXdOYW1lKSB7XG4gIGNvbnN0IGNhY2hlZCA9IHByZWZpeENhY2hlW3Jhd05hbWVdO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgcmV0dXJuIGNhY2hlZDtcbiAgfVxuICBsZXQgbmFtZSA9IGNhbWVsaXplKHJhd05hbWUpO1xuICBpZiAobmFtZSAhPT0gXCJmaWx0ZXJcIiAmJiBuYW1lIGluIHN0eWxlKSB7XG4gICAgcmV0dXJuIHByZWZpeENhY2hlW3Jhd05hbWVdID0gbmFtZTtcbiAgfVxuICBuYW1lID0gY2FwaXRhbGl6ZShuYW1lKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmVmaXhlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHByZWZpeGVkID0gcHJlZml4ZXNbaV0gKyBuYW1lO1xuICAgIGlmIChwcmVmaXhlZCBpbiBzdHlsZSkge1xuICAgICAgcmV0dXJuIHByZWZpeENhY2hlW3Jhd05hbWVdID0gcHJlZml4ZWQ7XG4gICAgfVxuICB9XG4gIHJldHVybiByYXdOYW1lO1xufVxuXG5jb25zdCB4bGlua05TID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI7XG5mdW5jdGlvbiBwYXRjaEF0dHIoZWwsIGtleSwgdmFsdWUsIGlzU1ZHLCBpbnN0YW5jZSwgaXNCb29sZWFuID0gaXNTcGVjaWFsQm9vbGVhbkF0dHIoa2V5KSkge1xuICBpZiAoaXNTVkcgJiYga2V5LnN0YXJ0c1dpdGgoXCJ4bGluazpcIikpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlTlMoeGxpbmtOUywga2V5LnNsaWNlKDYsIGtleS5sZW5ndGgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywga2V5LCB2YWx1ZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IGlzQm9vbGVhbiAmJiAhaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKSkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShcbiAgICAgICAga2V5LFxuICAgICAgICBpc0Jvb2xlYW4gPyBcIlwiIDogaXNTeW1ib2wodmFsdWUpID8gU3RyaW5nKHZhbHVlKSA6IHZhbHVlXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBwYXRjaERPTVByb3AoZWwsIGtleSwgdmFsdWUsIHBhcmVudENvbXBvbmVudCwgYXR0ck5hbWUpIHtcbiAgaWYgKGtleSA9PT0gXCJpbm5lckhUTUxcIiB8fCBrZXkgPT09IFwidGV4dENvbnRlbnRcIikge1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICBlbFtrZXldID0ga2V5ID09PSBcImlubmVySFRNTFwiID8gdW5zYWZlVG9UcnVzdGVkSFRNTCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHRhZyA9IGVsLnRhZ05hbWU7XG4gIGlmIChrZXkgPT09IFwidmFsdWVcIiAmJiB0YWcgIT09IFwiUFJPR1JFU1NcIiAmJiAvLyBjdXN0b20gZWxlbWVudHMgbWF5IHVzZSBfdmFsdWUgaW50ZXJuYWxseVxuICAhdGFnLmluY2x1ZGVzKFwiLVwiKSkge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGFnID09PSBcIk9QVElPTlwiID8gZWwuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgfHwgXCJcIiA6IGVsLnZhbHVlO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IChcbiAgICAgIC8vICMxMTY0NzogdmFsdWUgc2hvdWxkIGJlIHNldCBhcyBlbXB0eSBzdHJpbmcgZm9yIG51bGwgYW5kIHVuZGVmaW5lZCxcbiAgICAgIC8vIGJ1dCA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCI+IHNob3VsZCBiZSBzZXQgYXMgJ29uJy5cbiAgICAgIGVsLnR5cGUgPT09IFwiY2hlY2tib3hcIiA/IFwib25cIiA6IFwiXCJcbiAgICApIDogU3RyaW5nKHZhbHVlKTtcbiAgICBpZiAob2xkVmFsdWUgIT09IG5ld1ZhbHVlIHx8ICEoXCJfdmFsdWVcIiBpbiBlbCkpIHtcbiAgICAgIGVsLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICB9XG4gICAgZWwuX3ZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBuZWVkUmVtb3ZlID0gZmFsc2U7XG4gIGlmICh2YWx1ZSA9PT0gXCJcIiB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiBlbFtrZXldO1xuICAgIGlmICh0eXBlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgdmFsdWUgPSBpbmNsdWRlQm9vbGVhbkF0dHIodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gbnVsbCAmJiB0eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YWx1ZSA9IFwiXCI7XG4gICAgICBuZWVkUmVtb3ZlID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHZhbHVlID0gMDtcbiAgICAgIG5lZWRSZW1vdmUgPSB0cnVlO1xuICAgIH1cbiAgfVxuICB0cnkge1xuICAgIGVsW2tleV0gPSB2YWx1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmICFuZWVkUmVtb3ZlKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgRmFpbGVkIHNldHRpbmcgcHJvcCBcIiR7a2V5fVwiIG9uIDwke3RhZy50b0xvd2VyQ2FzZSgpfT46IHZhbHVlICR7dmFsdWV9IGlzIGludmFsaWQuYCxcbiAgICAgICAgZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgbmVlZFJlbW92ZSAmJiBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUgfHwga2V5KTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG59XG5mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xuICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cbmNvbnN0IHZlaUtleSA9IFN5bWJvbChcIl92ZWlcIik7XG5mdW5jdGlvbiBwYXRjaEV2ZW50KGVsLCByYXdOYW1lLCBwcmV2VmFsdWUsIG5leHRWYWx1ZSwgaW5zdGFuY2UgPSBudWxsKSB7XG4gIGNvbnN0IGludm9rZXJzID0gZWxbdmVpS2V5XSB8fCAoZWxbdmVpS2V5XSA9IHt9KTtcbiAgY29uc3QgZXhpc3RpbmdJbnZva2VyID0gaW52b2tlcnNbcmF3TmFtZV07XG4gIGlmIChuZXh0VmFsdWUgJiYgZXhpc3RpbmdJbnZva2VyKSB7XG4gICAgZXhpc3RpbmdJbnZva2VyLnZhbHVlID0gISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSA/IHNhbml0aXplRXZlbnRWYWx1ZShuZXh0VmFsdWUsIHJhd05hbWUpIDogbmV4dFZhbHVlO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IFtuYW1lLCBvcHRpb25zXSA9IHBhcnNlTmFtZShyYXdOYW1lKTtcbiAgICBpZiAobmV4dFZhbHVlKSB7XG4gICAgICBjb25zdCBpbnZva2VyID0gaW52b2tlcnNbcmF3TmFtZV0gPSBjcmVhdGVJbnZva2VyKFxuICAgICAgICAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gc2FuaXRpemVFdmVudFZhbHVlKG5leHRWYWx1ZSwgcmF3TmFtZSkgOiBuZXh0VmFsdWUsXG4gICAgICAgIGluc3RhbmNlXG4gICAgICApO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgbmFtZSwgaW52b2tlciwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIGlmIChleGlzdGluZ0ludm9rZXIpIHtcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZWwsIG5hbWUsIGV4aXN0aW5nSW52b2tlciwgb3B0aW9ucyk7XG4gICAgICBpbnZva2Vyc1tyYXdOYW1lXSA9IHZvaWQgMDtcbiAgICB9XG4gIH1cbn1cbmNvbnN0IG9wdGlvbnNNb2RpZmllclJFID0gLyg/Ok9uY2V8UGFzc2l2ZXxDYXB0dXJlKSQvO1xuZnVuY3Rpb24gcGFyc2VOYW1lKG5hbWUpIHtcbiAgbGV0IG9wdGlvbnM7XG4gIGlmIChvcHRpb25zTW9kaWZpZXJSRS50ZXN0KG5hbWUpKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICAgIGxldCBtO1xuICAgIHdoaWxlIChtID0gbmFtZS5tYXRjaChvcHRpb25zTW9kaWZpZXJSRSkpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnNsaWNlKDAsIG5hbWUubGVuZ3RoIC0gbVswXS5sZW5ndGgpO1xuICAgICAgb3B0aW9uc1ttWzBdLnRvTG93ZXJDYXNlKCldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgY29uc3QgZXZlbnQgPSBuYW1lWzJdID09PSBcIjpcIiA/IG5hbWUuc2xpY2UoMykgOiBoeXBoZW5hdGUobmFtZS5zbGljZSgyKSk7XG4gIHJldHVybiBbZXZlbnQsIG9wdGlvbnNdO1xufVxubGV0IGNhY2hlZE5vdyA9IDA7XG5jb25zdCBwID0gLyogQF9fUFVSRV9fICovIFByb21pc2UucmVzb2x2ZSgpO1xuY29uc3QgZ2V0Tm93ID0gKCkgPT4gY2FjaGVkTm93IHx8IChwLnRoZW4oKCkgPT4gY2FjaGVkTm93ID0gMCksIGNhY2hlZE5vdyA9IERhdGUubm93KCkpO1xuZnVuY3Rpb24gY3JlYXRlSW52b2tlcihpbml0aWFsVmFsdWUsIGluc3RhbmNlKSB7XG4gIGNvbnN0IGludm9rZXIgPSAoZSkgPT4ge1xuICAgIGlmICghZS5fdnRzKSB7XG4gICAgICBlLl92dHMgPSBEYXRlLm5vdygpO1xuICAgIH0gZWxzZSBpZiAoZS5fdnRzIDw9IGludm9rZXIuYXR0YWNoZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoXG4gICAgICBwYXRjaFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbihlLCBpbnZva2VyLnZhbHVlKSxcbiAgICAgIGluc3RhbmNlLFxuICAgICAgNSxcbiAgICAgIFtlXVxuICAgICk7XG4gIH07XG4gIGludm9rZXIudmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gIGludm9rZXIuYXR0YWNoZWQgPSBnZXROb3coKTtcbiAgcmV0dXJuIGludm9rZXI7XG59XG5mdW5jdGlvbiBzYW5pdGl6ZUV2ZW50VmFsdWUodmFsdWUsIHByb3BOYW1lKSB7XG4gIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSB8fCBpc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICB3YXJuKFxuICAgIGBXcm9uZyB0eXBlIHBhc3NlZCBhcyBldmVudCBoYW5kbGVyIHRvICR7cHJvcE5hbWV9IC0gZGlkIHlvdSBmb3JnZXQgQCBvciA6IGluIGZyb250IG9mIHlvdXIgcHJvcD9cbkV4cGVjdGVkIGZ1bmN0aW9uIG9yIGFycmF5IG9mIGZ1bmN0aW9ucywgcmVjZWl2ZWQgdHlwZSAke3R5cGVvZiB2YWx1ZX0uYFxuICApO1xuICByZXR1cm4gTk9PUDtcbn1cbmZ1bmN0aW9uIHBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKGUsIHZhbHVlKSB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGNvbnN0IG9yaWdpbmFsU3RvcCA9IGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uO1xuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gKCkgPT4ge1xuICAgICAgb3JpZ2luYWxTdG9wLmNhbGwoZSk7XG4gICAgICBlLl9zdG9wcGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIHJldHVybiB2YWx1ZS5tYXAoXG4gICAgICAoZm4pID0+IChlMikgPT4gIWUyLl9zdG9wcGVkICYmIGZuICYmIGZuKGUyKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbmNvbnN0IGlzTmF0aXZlT24gPSAoa2V5KSA9PiBrZXkuY2hhckNvZGVBdCgwKSA9PT0gMTExICYmIGtleS5jaGFyQ29kZUF0KDEpID09PSAxMTAgJiYgLy8gbG93ZXJjYXNlIGxldHRlclxua2V5LmNoYXJDb2RlQXQoMikgPiA5NiAmJiBrZXkuY2hhckNvZGVBdCgyKSA8IDEyMztcbmNvbnN0IHBhdGNoUHJvcCA9IChlbCwga2V5LCBwcmV2VmFsdWUsIG5leHRWYWx1ZSwgbmFtZXNwYWNlLCBwYXJlbnRDb21wb25lbnQpID0+IHtcbiAgY29uc3QgaXNTVkcgPSBuYW1lc3BhY2UgPT09IFwic3ZnXCI7XG4gIGlmIChrZXkgPT09IFwiY2xhc3NcIikge1xuICAgIHBhdGNoQ2xhc3MoZWwsIG5leHRWYWx1ZSwgaXNTVkcpO1xuICB9IGVsc2UgaWYgKGtleSA9PT0gXCJzdHlsZVwiKSB7XG4gICAgcGF0Y2hTdHlsZShlbCwgcHJldlZhbHVlLCBuZXh0VmFsdWUpO1xuICB9IGVsc2UgaWYgKGlzT24oa2V5KSkge1xuICAgIGlmICghaXNNb2RlbExpc3RlbmVyKGtleSkpIHtcbiAgICAgIHBhdGNoRXZlbnQoZWwsIGtleSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIHBhcmVudENvbXBvbmVudCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGtleVswXSA9PT0gXCIuXCIgPyAoa2V5ID0ga2V5LnNsaWNlKDEpLCB0cnVlKSA6IGtleVswXSA9PT0gXCJeXCIgPyAoa2V5ID0ga2V5LnNsaWNlKDEpLCBmYWxzZSkgOiBzaG91bGRTZXRBc1Byb3AoZWwsIGtleSwgbmV4dFZhbHVlLCBpc1NWRykpIHtcbiAgICBwYXRjaERPTVByb3AoZWwsIGtleSwgbmV4dFZhbHVlKTtcbiAgICBpZiAoIWVsLnRhZ05hbWUuaW5jbHVkZXMoXCItXCIpICYmIChrZXkgPT09IFwidmFsdWVcIiB8fCBrZXkgPT09IFwiY2hlY2tlZFwiIHx8IGtleSA9PT0gXCJzZWxlY3RlZFwiKSkge1xuICAgICAgcGF0Y2hBdHRyKGVsLCBrZXksIG5leHRWYWx1ZSwgaXNTVkcsIHBhcmVudENvbXBvbmVudCwga2V5ICE9PSBcInZhbHVlXCIpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChcbiAgICAvLyAjMTEwODEgZm9yY2Ugc2V0IHByb3BzIGZvciBwb3NzaWJsZSBhc3luYyBjdXN0b20gZWxlbWVudFxuICAgIGVsLl9pc1Z1ZUNFICYmICgvW0EtWl0vLnRlc3Qoa2V5KSB8fCAhaXNTdHJpbmcobmV4dFZhbHVlKSlcbiAgKSB7XG4gICAgcGF0Y2hET01Qcm9wKGVsLCBjYW1lbGl6ZSQxKGtleSksIG5leHRWYWx1ZSwgcGFyZW50Q29tcG9uZW50LCBrZXkpO1xuICB9IGVsc2Uge1xuICAgIGlmIChrZXkgPT09IFwidHJ1ZS12YWx1ZVwiKSB7XG4gICAgICBlbC5fdHJ1ZVZhbHVlID0gbmV4dFZhbHVlO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcImZhbHNlLXZhbHVlXCIpIHtcbiAgICAgIGVsLl9mYWxzZVZhbHVlID0gbmV4dFZhbHVlO1xuICAgIH1cbiAgICBwYXRjaEF0dHIoZWwsIGtleSwgbmV4dFZhbHVlLCBpc1NWRyk7XG4gIH1cbn07XG5mdW5jdGlvbiBzaG91bGRTZXRBc1Byb3AoZWwsIGtleSwgdmFsdWUsIGlzU1ZHKSB7XG4gIGlmIChpc1NWRykge1xuICAgIGlmIChrZXkgPT09IFwiaW5uZXJIVE1MXCIgfHwga2V5ID09PSBcInRleHRDb250ZW50XCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5IGluIGVsICYmIGlzTmF0aXZlT24oa2V5KSAmJiBpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoa2V5ID09PSBcInNwZWxsY2hlY2tcIiB8fCBrZXkgPT09IFwiZHJhZ2dhYmxlXCIgfHwga2V5ID09PSBcInRyYW5zbGF0ZVwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChrZXkgPT09IFwiZm9ybVwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChrZXkgPT09IFwibGlzdFwiICYmIGVsLnRhZ05hbWUgPT09IFwiSU5QVVRcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoa2V5ID09PSBcInR5cGVcIiAmJiBlbC50YWdOYW1lID09PSBcIlRFWFRBUkVBXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGtleSA9PT0gXCJ3aWR0aFwiIHx8IGtleSA9PT0gXCJoZWlnaHRcIikge1xuICAgIGNvbnN0IHRhZyA9IGVsLnRhZ05hbWU7XG4gICAgaWYgKHRhZyA9PT0gXCJJTUdcIiB8fCB0YWcgPT09IFwiVklERU9cIiB8fCB0YWcgPT09IFwiQ0FOVkFTXCIgfHwgdGFnID09PSBcIlNPVVJDRVwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGlmIChpc05hdGl2ZU9uKGtleSkgJiYgaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBrZXkgaW4gZWw7XG59XG5cbmNvbnN0IFJFTU9WQUwgPSB7fTtcbi8qISAjX19OT19TSURFX0VGRkVDVFNfXyAqL1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQob3B0aW9ucywgZXh0cmFPcHRpb25zLCBfY3JlYXRlQXBwKSB7XG4gIGNvbnN0IENvbXAgPSBkZWZpbmVDb21wb25lbnQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcbiAgaWYgKGlzUGxhaW5PYmplY3QoQ29tcCkpIGV4dGVuZChDb21wLCBleHRyYU9wdGlvbnMpO1xuICBjbGFzcyBWdWVDdXN0b21FbGVtZW50IGV4dGVuZHMgVnVlRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoaW5pdGlhbFByb3BzKSB7XG4gICAgICBzdXBlcihDb21wLCBpbml0aWFsUHJvcHMsIF9jcmVhdGVBcHApO1xuICAgIH1cbiAgfVxuICBWdWVDdXN0b21FbGVtZW50LmRlZiA9IENvbXA7XG4gIHJldHVybiBWdWVDdXN0b21FbGVtZW50O1xufVxuLyohICNfX05PX1NJREVfRUZGRUNUU19fICovXG5jb25zdCBkZWZpbmVTU1JDdXN0b21FbGVtZW50ID0gLyogQF9fTk9fU0lERV9FRkZFQ1RTX18gKi8gKG9wdGlvbnMsIGV4dHJhT3B0aW9ucykgPT4ge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGRlZmluZUN1c3RvbUVsZW1lbnQob3B0aW9ucywgZXh0cmFPcHRpb25zLCBjcmVhdGVTU1JBcHApO1xufTtcbmNvbnN0IEJhc2VDbGFzcyA9IHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIiA/IEhUTUxFbGVtZW50IDogY2xhc3Mge1xufTtcbmNsYXNzIFZ1ZUVsZW1lbnQgZXh0ZW5kcyBCYXNlQ2xhc3Mge1xuICBjb25zdHJ1Y3RvcihfZGVmLCBfcHJvcHMgPSB7fSwgX2NyZWF0ZUFwcCA9IGNyZWF0ZUFwcCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fZGVmID0gX2RlZjtcbiAgICB0aGlzLl9wcm9wcyA9IF9wcm9wcztcbiAgICB0aGlzLl9jcmVhdGVBcHAgPSBfY3JlYXRlQXBwO1xuICAgIHRoaXMuX2lzVnVlQ0UgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB0aGlzLl9hcHAgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHRoaXMuX25vbmNlID0gdGhpcy5fZGVmLm5vbmNlO1xuICAgIHRoaXMuX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3Jlc29sdmVkID0gZmFsc2U7XG4gICAgdGhpcy5fbnVtYmVyUHJvcHMgPSBudWxsO1xuICAgIHRoaXMuX3N0eWxlQ2hpbGRyZW4gPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtTZXQoKTtcbiAgICB0aGlzLl9vYiA9IG51bGw7XG4gICAgaWYgKHRoaXMuc2hhZG93Um9vdCAmJiBfY3JlYXRlQXBwICE9PSBjcmVhdGVBcHApIHtcbiAgICAgIHRoaXMuX3Jvb3QgPSB0aGlzLnNoYWRvd1Jvb3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgICB3YXJuKFxuICAgICAgICAgIGBDdXN0b20gZWxlbWVudCBoYXMgcHJlLXJlbmRlcmVkIGRlY2xhcmF0aXZlIHNoYWRvdyByb290IGJ1dCBpcyBub3QgZGVmaW5lZCBhcyBoeWRyYXRhYmxlLiBVc2UgXFxgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudFxcYC5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoX2RlZi5zaGFkb3dSb290ICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6IFwib3BlblwiIH0pO1xuICAgICAgICB0aGlzLl9yb290ID0gdGhpcy5zaGFkb3dSb290O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fcm9vdCA9IHRoaXM7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5fZGVmLl9fYXN5bmNMb2FkZXIpIHtcbiAgICAgIHRoaXMuX3Jlc29sdmVQcm9wcyh0aGlzLl9kZWYpO1xuICAgIH1cbiAgfVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBpZiAoIXRoaXMuaXNDb25uZWN0ZWQpIHJldHVybjtcbiAgICBpZiAoIXRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgdGhpcy5fcGFyc2VTbG90cygpO1xuICAgIH1cbiAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICAgIGxldCBwYXJlbnQgPSB0aGlzO1xuICAgIHdoaWxlIChwYXJlbnQgPSBwYXJlbnQgJiYgKHBhcmVudC5wYXJlbnROb2RlIHx8IHBhcmVudC5ob3N0KSkge1xuICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIFZ1ZUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgaWYgKHRoaXMuX3Jlc29sdmVkKSB7XG4gICAgICAgIHRoaXMuX3NldFBhcmVudCgpO1xuICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50Ll9wZW5kaW5nUmVzb2x2ZSkge1xuICAgICAgICAgIHRoaXMuX3BlbmRpbmdSZXNvbHZlID0gcGFyZW50Ll9wZW5kaW5nUmVzb2x2ZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdSZXNvbHZlID0gdm9pZCAwO1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZURlZigpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX3Jlc29sdmVEZWYoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBfc2V0UGFyZW50KHBhcmVudCA9IHRoaXMuX3BhcmVudCkge1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHRoaXMuX2luc3RhbmNlLnBhcmVudCA9IHBhcmVudC5faW5zdGFuY2U7XG4gICAgICB0aGlzLl9pbnN0YW5jZS5wcm92aWRlcyA9IHBhcmVudC5faW5zdGFuY2UucHJvdmlkZXM7XG4gICAgfVxuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgIGlmICghdGhpcy5fY29ubmVjdGVkKSB7XG4gICAgICAgIGlmICh0aGlzLl9vYikge1xuICAgICAgICAgIHRoaXMuX29iLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICB0aGlzLl9vYiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYXBwICYmIHRoaXMuX2FwcC51bm1vdW50KCk7XG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jZSkgdGhpcy5faW5zdGFuY2UuY2UgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuX2FwcCA9IHRoaXMuX2luc3RhbmNlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogcmVzb2x2ZSBpbm5lciBjb21wb25lbnQgZGVmaW5pdGlvbiAoaGFuZGxlIHBvc3NpYmxlIGFzeW5jIGNvbXBvbmVudClcbiAgICovXG4gIF9yZXNvbHZlRGVmKCkge1xuICAgIGlmICh0aGlzLl9wZW5kaW5nUmVzb2x2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5fc2V0QXR0cih0aGlzLmF0dHJpYnV0ZXNbaV0ubmFtZSk7XG4gICAgfVxuICAgIHRoaXMuX29iID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuICAgICAgZm9yIChjb25zdCBtIG9mIG11dGF0aW9ucykge1xuICAgICAgICB0aGlzLl9zZXRBdHRyKG0uYXR0cmlidXRlTmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fb2Iub2JzZXJ2ZSh0aGlzLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XG4gICAgY29uc3QgcmVzb2x2ZSA9IChkZWYsIGlzQXN5bmMgPSBmYWxzZSkgPT4ge1xuICAgICAgdGhpcy5fcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fcGVuZGluZ1Jlc29sdmUgPSB2b2lkIDA7XG4gICAgICBjb25zdCB7IHByb3BzLCBzdHlsZXMgfSA9IGRlZjtcbiAgICAgIGxldCBudW1iZXJQcm9wcztcbiAgICAgIGlmIChwcm9wcyAmJiAhaXNBcnJheShwcm9wcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgICBjb25zdCBvcHQgPSBwcm9wc1trZXldO1xuICAgICAgICAgIGlmIChvcHQgPT09IE51bWJlciB8fCBvcHQgJiYgb3B0LnR5cGUgPT09IE51bWJlcikge1xuICAgICAgICAgICAgaWYgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgICAgICAgICB0aGlzLl9wcm9wc1trZXldID0gdG9OdW1iZXIodGhpcy5fcHJvcHNba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAobnVtYmVyUHJvcHMgfHwgKG51bWJlclByb3BzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCkpKVtjYW1lbGl6ZSQxKGtleSldID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX251bWJlclByb3BzID0gbnVtYmVyUHJvcHM7XG4gICAgICBpZiAoaXNBc3luYykge1xuICAgICAgICB0aGlzLl9yZXNvbHZlUHJvcHMoZGVmKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgdGhpcy5fYXBwbHlTdHlsZXMoc3R5bGVzKTtcbiAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiBzdHlsZXMpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBcIkN1c3RvbSBlbGVtZW50IHN0eWxlIGluamVjdGlvbiBpcyBub3Qgc3VwcG9ydGVkIHdoZW4gdXNpbmcgc2hhZG93Um9vdDogZmFsc2VcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5fbW91bnQoZGVmKTtcbiAgICB9O1xuICAgIGNvbnN0IGFzeW5jRGVmID0gdGhpcy5fZGVmLl9fYXN5bmNMb2FkZXI7XG4gICAgaWYgKGFzeW5jRGVmKSB7XG4gICAgICB0aGlzLl9wZW5kaW5nUmVzb2x2ZSA9IGFzeW5jRGVmKCkudGhlbihcbiAgICAgICAgKGRlZikgPT4gcmVzb2x2ZSh0aGlzLl9kZWYgPSBkZWYsIHRydWUpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKHRoaXMuX2RlZik7XG4gICAgfVxuICB9XG4gIF9tb3VudChkZWYpIHtcbiAgICBpZiAoKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiAhZGVmLm5hbWUpIHtcbiAgICAgIGRlZi5uYW1lID0gXCJWdWVFbGVtZW50XCI7XG4gICAgfVxuICAgIHRoaXMuX2FwcCA9IHRoaXMuX2NyZWF0ZUFwcChkZWYpO1xuICAgIGlmIChkZWYuY29uZmlndXJlQXBwKSB7XG4gICAgICBkZWYuY29uZmlndXJlQXBwKHRoaXMuX2FwcCk7XG4gICAgfVxuICAgIHRoaXMuX2FwcC5fY2VWTm9kZSA9IHRoaXMuX2NyZWF0ZVZOb2RlKCk7XG4gICAgdGhpcy5fYXBwLm1vdW50KHRoaXMuX3Jvb3QpO1xuICAgIGNvbnN0IGV4cG9zZWQgPSB0aGlzLl9pbnN0YW5jZSAmJiB0aGlzLl9pbnN0YW5jZS5leHBvc2VkO1xuICAgIGlmICghZXhwb3NlZCkgcmV0dXJuO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGV4cG9zZWQpIHtcbiAgICAgIGlmICghaGFzT3duKHRoaXMsIGtleSkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwge1xuICAgICAgICAgIC8vIHVud3JhcCByZWYgdG8gYmUgY29uc2lzdGVudCB3aXRoIHB1YmxpYyBpbnN0YW5jZSBiZWhhdmlvclxuICAgICAgICAgIGdldDogKCkgPT4gdW5yZWYoZXhwb3NlZFtrZXldKVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgICB3YXJuKGBFeHBvc2VkIHByb3BlcnR5IFwiJHtrZXl9XCIgYWxyZWFkeSBleGlzdHMgb24gY3VzdG9tIGVsZW1lbnQuYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIF9yZXNvbHZlUHJvcHMoZGVmKSB7XG4gICAgY29uc3QgeyBwcm9wcyB9ID0gZGVmO1xuICAgIGNvbnN0IGRlY2xhcmVkUHJvcEtleXMgPSBpc0FycmF5KHByb3BzKSA/IHByb3BzIDogT2JqZWN0LmtleXMocHJvcHMgfHwge30pO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMpKSB7XG4gICAgICBpZiAoa2V5WzBdICE9PSBcIl9cIiAmJiBkZWNsYXJlZFByb3BLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgdGhpcy5fc2V0UHJvcChrZXksIHRoaXNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIGRlY2xhcmVkUHJvcEtleXMubWFwKGNhbWVsaXplJDEpKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UHJvcChrZXkpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQodmFsKSB7XG4gICAgICAgICAgdGhpcy5fc2V0UHJvcChrZXksIHZhbCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBfc2V0QXR0cihrZXkpIHtcbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoXCJkYXRhLXYtXCIpKSByZXR1cm47XG4gICAgY29uc3QgaGFzID0gdGhpcy5oYXNBdHRyaWJ1dGUoa2V5KTtcbiAgICBsZXQgdmFsdWUgPSBoYXMgPyB0aGlzLmdldEF0dHJpYnV0ZShrZXkpIDogUkVNT1ZBTDtcbiAgICBjb25zdCBjYW1lbEtleSA9IGNhbWVsaXplJDEoa2V5KTtcbiAgICBpZiAoaGFzICYmIHRoaXMuX251bWJlclByb3BzICYmIHRoaXMuX251bWJlclByb3BzW2NhbWVsS2V5XSkge1xuICAgICAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG4gICAgfVxuICAgIHRoaXMuX3NldFByb3AoY2FtZWxLZXksIHZhbHVlLCBmYWxzZSwgdHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2dldFByb3Aoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3BzW2tleV07XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX3NldFByb3Aoa2V5LCB2YWwsIHNob3VsZFJlZmxlY3QgPSB0cnVlLCBzaG91bGRVcGRhdGUgPSBmYWxzZSkge1xuICAgIGlmICh2YWwgIT09IHRoaXMuX3Byb3BzW2tleV0pIHtcbiAgICAgIGlmICh2YWwgPT09IFJFTU9WQUwpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3Byb3BzW2tleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9wcm9wc1trZXldID0gdmFsO1xuICAgICAgICBpZiAoa2V5ID09PSBcImtleVwiICYmIHRoaXMuX2FwcCkge1xuICAgICAgICAgIHRoaXMuX2FwcC5fY2VWTm9kZS5rZXkgPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzaG91bGRVcGRhdGUgJiYgdGhpcy5faW5zdGFuY2UpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlKCk7XG4gICAgICB9XG4gICAgICBpZiAoc2hvdWxkUmVmbGVjdCkge1xuICAgICAgICBjb25zdCBvYiA9IHRoaXMuX29iO1xuICAgICAgICBvYiAmJiBvYi5kaXNjb25uZWN0KCk7XG4gICAgICAgIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSwgXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoaHlwaGVuYXRlKGtleSksIHZhbCArIFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKCF2YWwpIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSk7XG4gICAgICAgIH1cbiAgICAgICAgb2IgJiYgb2Iub2JzZXJ2ZSh0aGlzLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIF91cGRhdGUoKSB7XG4gICAgcmVuZGVyKHRoaXMuX2NyZWF0ZVZOb2RlKCksIHRoaXMuX3Jvb3QpO1xuICB9XG4gIF9jcmVhdGVWTm9kZSgpIHtcbiAgICBjb25zdCBiYXNlUHJvcHMgPSB7fTtcbiAgICBpZiAoIXRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgYmFzZVByb3BzLm9uVm5vZGVNb3VudGVkID0gYmFzZVByb3BzLm9uVm5vZGVVcGRhdGVkID0gdGhpcy5fcmVuZGVyU2xvdHMuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZSh0aGlzLl9kZWYsIGV4dGVuZChiYXNlUHJvcHMsIHRoaXMuX3Byb3BzKSk7XG4gICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xuICAgICAgdm5vZGUuY2UgPSAoaW5zdGFuY2UpID0+IHtcbiAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICAgICAgaW5zdGFuY2UuY2UgPSB0aGlzO1xuICAgICAgICBpbnN0YW5jZS5pc0NFID0gdHJ1ZTtcbiAgICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgICBpbnN0YW5jZS5jZVJlbG9hZCA9IChuZXdTdHlsZXMpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdHlsZXMpIHtcbiAgICAgICAgICAgICAgdGhpcy5fc3R5bGVzLmZvckVhY2goKHMpID0+IHRoaXMuX3Jvb3QucmVtb3ZlQ2hpbGQocykpO1xuICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2FwcGx5U3R5bGVzKG5ld1N0eWxlcyk7XG4gICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpc3BhdGNoID0gKGV2ZW50LCBhcmdzKSA9PiB7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFxuICAgICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgICAgaXNQbGFpbk9iamVjdChhcmdzWzBdKSA/IGV4dGVuZCh7IGRldGFpbDogYXJncyB9LCBhcmdzWzBdKSA6IHsgZGV0YWlsOiBhcmdzIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9O1xuICAgICAgICBpbnN0YW5jZS5lbWl0ID0gKGV2ZW50LCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgZGlzcGF0Y2goZXZlbnQsIGFyZ3MpO1xuICAgICAgICAgIGlmIChoeXBoZW5hdGUoZXZlbnQpICE9PSBldmVudCkge1xuICAgICAgICAgICAgZGlzcGF0Y2goaHlwaGVuYXRlKGV2ZW50KSwgYXJncyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zZXRQYXJlbnQoKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB2bm9kZTtcbiAgfVxuICBfYXBwbHlTdHlsZXMoc3R5bGVzLCBvd25lcikge1xuICAgIGlmICghc3R5bGVzKSByZXR1cm47XG4gICAgaWYgKG93bmVyKSB7XG4gICAgICBpZiAob3duZXIgPT09IHRoaXMuX2RlZiB8fCB0aGlzLl9zdHlsZUNoaWxkcmVuLmhhcyhvd25lcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5fc3R5bGVDaGlsZHJlbi5hZGQob3duZXIpO1xuICAgIH1cbiAgICBjb25zdCBub25jZSA9IHRoaXMuX25vbmNlO1xuICAgIGZvciAobGV0IGkgPSBzdHlsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICBpZiAobm9uY2UpIHMuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgbm9uY2UpO1xuICAgICAgcy50ZXh0Q29udGVudCA9IHN0eWxlc1tpXTtcbiAgICAgIHRoaXMuc2hhZG93Um9vdC5wcmVwZW5kKHMpO1xuICAgICAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICAgICAgaWYgKG93bmVyKSB7XG4gICAgICAgICAgaWYgKG93bmVyLl9faG1ySWQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY2hpbGRTdHlsZXMpIHRoaXMuX2NoaWxkU3R5bGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGxldCBlbnRyeSA9IHRoaXMuX2NoaWxkU3R5bGVzLmdldChvd25lci5fX2htcklkKTtcbiAgICAgICAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fY2hpbGRTdHlsZXMuc2V0KG93bmVyLl9faG1ySWQsIGVudHJ5ID0gW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW50cnkucHVzaChzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKHRoaXMuX3N0eWxlcyB8fCAodGhpcy5fc3R5bGVzID0gW10pKS5wdXNoKHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBPbmx5IGNhbGxlZCB3aGVuIHNoYWRvd1Jvb3QgaXMgZmFsc2VcbiAgICovXG4gIF9wYXJzZVNsb3RzKCkge1xuICAgIGNvbnN0IHNsb3RzID0gdGhpcy5fc2xvdHMgPSB7fTtcbiAgICBsZXQgbjtcbiAgICB3aGlsZSAobiA9IHRoaXMuZmlyc3RDaGlsZCkge1xuICAgICAgY29uc3Qgc2xvdE5hbWUgPSBuLm5vZGVUeXBlID09PSAxICYmIG4uZ2V0QXR0cmlidXRlKFwic2xvdFwiKSB8fCBcImRlZmF1bHRcIjtcbiAgICAgIChzbG90c1tzbG90TmFtZV0gfHwgKHNsb3RzW3Nsb3ROYW1lXSA9IFtdKSkucHVzaChuKTtcbiAgICAgIHRoaXMucmVtb3ZlQ2hpbGQobik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBPbmx5IGNhbGxlZCB3aGVuIHNoYWRvd1Jvb3QgaXMgZmFsc2VcbiAgICovXG4gIF9yZW5kZXJTbG90cygpIHtcbiAgICBjb25zdCBvdXRsZXRzID0gKHRoaXMuX3RlbGVwb3J0VGFyZ2V0IHx8IHRoaXMpLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzbG90XCIpO1xuICAgIGNvbnN0IHNjb3BlSWQgPSB0aGlzLl9pbnN0YW5jZS50eXBlLl9fc2NvcGVJZDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dGxldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG8gPSBvdXRsZXRzW2ldO1xuICAgICAgY29uc3Qgc2xvdE5hbWUgPSBvLmdldEF0dHJpYnV0ZShcIm5hbWVcIikgfHwgXCJkZWZhdWx0XCI7XG4gICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5fc2xvdHNbc2xvdE5hbWVdO1xuICAgICAgY29uc3QgcGFyZW50ID0gby5wYXJlbnROb2RlO1xuICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICBpZiAoc2NvcGVJZCAmJiBuLm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHNjb3BlSWQgKyBcIi1zXCI7XG4gICAgICAgICAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKG4sIDEpO1xuICAgICAgICAgICAgbi5zZXRBdHRyaWJ1dGUoaWQsIFwiXCIpO1xuICAgICAgICAgICAgbGV0IGNoaWxkO1xuICAgICAgICAgICAgd2hpbGUgKGNoaWxkID0gd2Fsa2VyLm5leHROb2RlKCkpIHtcbiAgICAgICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKGlkLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShuLCBvKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2hpbGUgKG8uZmlyc3RDaGlsZCkgcGFyZW50Lmluc2VydEJlZm9yZShvLmZpcnN0Q2hpbGQsIG8pO1xuICAgICAgfVxuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG8pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfaW5qZWN0Q2hpbGRTdHlsZShjb21wKSB7XG4gICAgdGhpcy5fYXBwbHlTdHlsZXMoY29tcC5zdHlsZXMsIGNvbXApO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9yZW1vdmVDaGlsZFN0eWxlKGNvbXApIHtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgICAgdGhpcy5fc3R5bGVDaGlsZHJlbi5kZWxldGUoY29tcCk7XG4gICAgICBpZiAodGhpcy5fY2hpbGRTdHlsZXMgJiYgY29tcC5fX2htcklkKSB7XG4gICAgICAgIGNvbnN0IG9sZFN0eWxlcyA9IHRoaXMuX2NoaWxkU3R5bGVzLmdldChjb21wLl9faG1ySWQpO1xuICAgICAgICBpZiAob2xkU3R5bGVzKSB7XG4gICAgICAgICAgb2xkU3R5bGVzLmZvckVhY2goKHMpID0+IHRoaXMuX3Jvb3QucmVtb3ZlQ2hpbGQocykpO1xuICAgICAgICAgIG9sZFN0eWxlcy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiB1c2VIb3N0KGNhbGxlcikge1xuICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICBjb25zdCBlbCA9IGluc3RhbmNlICYmIGluc3RhbmNlLmNlO1xuICBpZiAoZWwpIHtcbiAgICByZXR1cm4gZWw7XG4gIH0gZWxzZSBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSkge1xuICAgIGlmICghaW5zdGFuY2UpIHtcbiAgICAgIHdhcm4oXG4gICAgICAgIGAke2NhbGxlciB8fCBcInVzZUhvc3RcIn0gY2FsbGVkIHdpdGhvdXQgYW4gYWN0aXZlIGNvbXBvbmVudCBpbnN0YW5jZS5gXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgJHtjYWxsZXIgfHwgXCJ1c2VIb3N0XCJ9IGNhbiBvbmx5IGJlIHVzZWQgaW4gY29tcG9uZW50cyBkZWZpbmVkIHZpYSBkZWZpbmVDdXN0b21FbGVtZW50LmBcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gdXNlU2hhZG93Um9vdCgpIHtcbiAgY29uc3QgZWwgPSAhIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpID8gdXNlSG9zdChcInVzZVNoYWRvd1Jvb3RcIikgOiB1c2VIb3N0KCk7XG4gIHJldHVybiBlbCAmJiBlbC5zaGFkb3dSb290O1xufVxuXG5mdW5jdGlvbiB1c2VDc3NNb2R1bGUobmFtZSA9IFwiJHN0eWxlXCIpIHtcbiAge1xuICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuKGB1c2VDc3NNb2R1bGUgbXVzdCBiZSBjYWxsZWQgaW5zaWRlIHNldHVwKClgKTtcbiAgICAgIHJldHVybiBFTVBUWV9PQko7XG4gICAgfVxuICAgIGNvbnN0IG1vZHVsZXMgPSBpbnN0YW5jZS50eXBlLl9fY3NzTW9kdWxlcztcbiAgICBpZiAoIW1vZHVsZXMpIHtcbiAgICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybihgQ3VycmVudCBpbnN0YW5jZSBkb2VzIG5vdCBoYXZlIENTUyBtb2R1bGVzIGluamVjdGVkLmApO1xuICAgICAgcmV0dXJuIEVNUFRZX09CSjtcbiAgICB9XG4gICAgY29uc3QgbW9kID0gbW9kdWxlc1tuYW1lXTtcbiAgICBpZiAoIW1vZCkge1xuICAgICAgISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZSBuYW1lZCBcIiR7bmFtZX1cIi5gKTtcbiAgICAgIHJldHVybiBFTVBUWV9PQko7XG4gICAgfVxuICAgIHJldHVybiBtb2Q7XG4gIH1cbn1cblxuY29uc3QgcG9zaXRpb25NYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG5ld1Bvc2l0aW9uTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5jb25zdCBtb3ZlQ2JLZXkgPSBTeW1ib2woXCJfbW92ZUNiXCIpO1xuY29uc3QgZW50ZXJDYktleSA9IFN5bWJvbChcIl9lbnRlckNiXCIpO1xuY29uc3QgZGVjb3JhdGUgPSAodCkgPT4ge1xuICBkZWxldGUgdC5wcm9wcy5tb2RlO1xuICByZXR1cm4gdDtcbn07XG5jb25zdCBUcmFuc2l0aW9uR3JvdXBJbXBsID0gLyogQF9fUFVSRV9fICovIGRlY29yYXRlKHtcbiAgbmFtZTogXCJUcmFuc2l0aW9uR3JvdXBcIixcbiAgcHJvcHM6IC8qIEBfX1BVUkVfXyAqLyBleHRlbmQoe30sIFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsIHtcbiAgICB0YWc6IFN0cmluZyxcbiAgICBtb3ZlQ2xhc3M6IFN0cmluZ1xuICB9KSxcbiAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgY29uc3Qgc3RhdGUgPSB1c2VUcmFuc2l0aW9uU3RhdGUoKTtcbiAgICBsZXQgcHJldkNoaWxkcmVuO1xuICAgIGxldCBjaGlsZHJlbjtcbiAgICBvblVwZGF0ZWQoKCkgPT4ge1xuICAgICAgaWYgKCFwcmV2Q2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1vdmVDbGFzcyA9IHByb3BzLm1vdmVDbGFzcyB8fCBgJHtwcm9wcy5uYW1lIHx8IFwidlwifS1tb3ZlYDtcbiAgICAgIGlmICghaGFzQ1NTVHJhbnNmb3JtKFxuICAgICAgICBwcmV2Q2hpbGRyZW5bMF0uZWwsXG4gICAgICAgIGluc3RhbmNlLnZub2RlLmVsLFxuICAgICAgICBtb3ZlQ2xhc3NcbiAgICAgICkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcHJldkNoaWxkcmVuLmZvckVhY2goY2FsbFBlbmRpbmdDYnMpO1xuICAgICAgcHJldkNoaWxkcmVuLmZvckVhY2gocmVjb3JkUG9zaXRpb24pO1xuICAgICAgY29uc3QgbW92ZWRDaGlsZHJlbiA9IHByZXZDaGlsZHJlbi5maWx0ZXIoYXBwbHlUcmFuc2xhdGlvbik7XG4gICAgICBmb3JjZVJlZmxvdygpO1xuICAgICAgbW92ZWRDaGlsZHJlbi5mb3JFYWNoKChjKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsID0gYy5lbDtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcbiAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xuICAgICAgICBzdHlsZS50cmFuc2Zvcm0gPSBzdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBzdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiO1xuICAgICAgICBjb25zdCBjYiA9IGVsW21vdmVDYktleV0gPSAoZSkgPT4ge1xuICAgICAgICAgIGlmIChlICYmIGUudGFyZ2V0ICE9PSBlbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWUgfHwgL3RyYW5zZm9ybSQvLnRlc3QoZS5wcm9wZXJ0eU5hbWUpKSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBjYik7XG4gICAgICAgICAgICBlbFttb3ZlQ2JLZXldID0gbnVsbDtcbiAgICAgICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIGNiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCByYXdQcm9wcyA9IHRvUmF3KHByb3BzKTtcbiAgICAgIGNvbnN0IGNzc1RyYW5zaXRpb25Qcm9wcyA9IHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocmF3UHJvcHMpO1xuICAgICAgbGV0IHRhZyA9IHJhd1Byb3BzLnRhZyB8fCBGcmFnbWVudDtcbiAgICAgIHByZXZDaGlsZHJlbiA9IFtdO1xuICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgIGlmIChjaGlsZC5lbCAmJiBjaGlsZC5lbCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHByZXZDaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhcbiAgICAgICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgICAgIHJlc29sdmVUcmFuc2l0aW9uSG9va3MoXG4gICAgICAgICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgICAgICAgY3NzVHJhbnNpdGlvblByb3BzLFxuICAgICAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgICAgIGluc3RhbmNlXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwb3NpdGlvbk1hcC5zZXQoXG4gICAgICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgICAgICBjaGlsZC5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCA/IGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihzbG90cy5kZWZhdWx0KCkpIDogW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIGlmIChjaGlsZC5rZXkgIT0gbnVsbCkge1xuICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhcbiAgICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgICAgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhjaGlsZCwgY3NzVHJhbnNpdGlvblByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIGNoaWxkLnR5cGUgIT09IFRleHQpIHtcbiAgICAgICAgICB3YXJuKGA8VHJhbnNpdGlvbkdyb3VwPiBjaGlsZHJlbiBtdXN0IGJlIGtleWVkLmApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3JlYXRlVk5vZGUodGFnLCBudWxsLCBjaGlsZHJlbik7XG4gICAgfTtcbiAgfVxufSk7XG5jb25zdCBUcmFuc2l0aW9uR3JvdXAgPSBUcmFuc2l0aW9uR3JvdXBJbXBsO1xuZnVuY3Rpb24gY2FsbFBlbmRpbmdDYnMoYykge1xuICBjb25zdCBlbCA9IGMuZWw7XG4gIGlmIChlbFttb3ZlQ2JLZXldKSB7XG4gICAgZWxbbW92ZUNiS2V5XSgpO1xuICB9XG4gIGlmIChlbFtlbnRlckNiS2V5XSkge1xuICAgIGVsW2VudGVyQ2JLZXldKCk7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlY29yZFBvc2l0aW9uKGMpIHtcbiAgbmV3UG9zaXRpb25NYXAuc2V0KGMsIGMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xufVxuZnVuY3Rpb24gYXBwbHlUcmFuc2xhdGlvbihjKSB7XG4gIGNvbnN0IG9sZFBvcyA9IHBvc2l0aW9uTWFwLmdldChjKTtcbiAgY29uc3QgbmV3UG9zID0gbmV3UG9zaXRpb25NYXAuZ2V0KGMpO1xuICBjb25zdCBkeCA9IG9sZFBvcy5sZWZ0IC0gbmV3UG9zLmxlZnQ7XG4gIGNvbnN0IGR5ID0gb2xkUG9zLnRvcCAtIG5ld1Bvcy50b3A7XG4gIGlmIChkeCB8fCBkeSkge1xuICAgIGNvbnN0IHMgPSBjLmVsLnN0eWxlO1xuICAgIHMudHJhbnNmb3JtID0gcy53ZWJraXRUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7ZHh9cHgsJHtkeX1weClgO1xuICAgIHMudHJhbnNpdGlvbkR1cmF0aW9uID0gXCIwc1wiO1xuICAgIHJldHVybiBjO1xuICB9XG59XG5mdW5jdGlvbiBoYXNDU1NUcmFuc2Zvcm0oZWwsIHJvb3QsIG1vdmVDbGFzcykge1xuICBjb25zdCBjbG9uZSA9IGVsLmNsb25lTm9kZSgpO1xuICBjb25zdCBfdnRjID0gZWxbdnRjS2V5XTtcbiAgaWYgKF92dGMpIHtcbiAgICBfdnRjLmZvckVhY2goKGNscykgPT4ge1xuICAgICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaCgoYykgPT4gYyAmJiBjbG9uZS5jbGFzc0xpc3QucmVtb3ZlKGMpKTtcbiAgICB9KTtcbiAgfVxuICBtb3ZlQ2xhc3Muc3BsaXQoL1xccysvKS5mb3JFYWNoKChjKSA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5hZGQoYykpO1xuICBjbG9uZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIGNvbnN0IGNvbnRhaW5lciA9IHJvb3Qubm9kZVR5cGUgPT09IDEgPyByb290IDogcm9vdC5wYXJlbnROb2RlO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICBjb25zdCB7IGhhc1RyYW5zZm9ybSB9ID0gZ2V0VHJhbnNpdGlvbkluZm8oY2xvbmUpO1xuICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY2xvbmUpO1xuICByZXR1cm4gaGFzVHJhbnNmb3JtO1xufVxuXG5jb25zdCBnZXRNb2RlbEFzc2lnbmVyID0gKHZub2RlKSA9PiB7XG4gIGNvbnN0IGZuID0gdm5vZGUucHJvcHNbXCJvblVwZGF0ZTptb2RlbFZhbHVlXCJdIHx8IGZhbHNlO1xuICByZXR1cm4gaXNBcnJheShmbikgPyAodmFsdWUpID0+IGludm9rZUFycmF5Rm5zKGZuLCB2YWx1ZSkgOiBmbjtcbn07XG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uU3RhcnQoZSkge1xuICBlLnRhcmdldC5jb21wb3NpbmcgPSB0cnVlO1xufVxuZnVuY3Rpb24gb25Db21wb3NpdGlvbkVuZChlKSB7XG4gIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICBpZiAodGFyZ2V0LmNvbXBvc2luZykge1xuICAgIHRhcmdldC5jb21wb3NpbmcgPSBmYWxzZTtcbiAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiKSk7XG4gIH1cbn1cbmNvbnN0IGFzc2lnbktleSA9IFN5bWJvbChcIl9hc3NpZ25cIik7XG5jb25zdCB2TW9kZWxUZXh0ID0ge1xuICBjcmVhdGVkKGVsLCB7IG1vZGlmaWVyczogeyBsYXp5LCB0cmltLCBudW1iZXIgfSB9LCB2bm9kZSkge1xuICAgIGVsW2Fzc2lnbktleV0gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICBjb25zdCBjYXN0VG9OdW1iZXIgPSBudW1iZXIgfHwgdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZSA9PT0gXCJudW1iZXJcIjtcbiAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBsYXp5ID8gXCJjaGFuZ2VcIiA6IFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldC5jb21wb3NpbmcpIHJldHVybjtcbiAgICAgIGxldCBkb21WYWx1ZSA9IGVsLnZhbHVlO1xuICAgICAgaWYgKHRyaW0pIHtcbiAgICAgICAgZG9tVmFsdWUgPSBkb21WYWx1ZS50cmltKCk7XG4gICAgICB9XG4gICAgICBpZiAoY2FzdFRvTnVtYmVyKSB7XG4gICAgICAgIGRvbVZhbHVlID0gbG9vc2VUb051bWJlcihkb21WYWx1ZSk7XG4gICAgICB9XG4gICAgICBlbFthc3NpZ25LZXldKGRvbVZhbHVlKTtcbiAgICB9KTtcbiAgICBpZiAodHJpbSkge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgICBlbC52YWx1ZSA9IGVsLnZhbHVlLnRyaW0oKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIWxhenkpIHtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIFwiY29tcG9zaXRpb25zdGFydFwiLCBvbkNvbXBvc2l0aW9uU3RhcnQpO1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgXCJjb21wb3NpdGlvbmVuZFwiLCBvbkNvbXBvc2l0aW9uRW5kKTtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIFwiY2hhbmdlXCIsIG9uQ29tcG9zaXRpb25FbmQpO1xuICAgIH1cbiAgfSxcbiAgLy8gc2V0IHZhbHVlIG9uIG1vdW50ZWQgc28gaXQncyBhZnRlciBtaW4vbWF4IGZvciB0eXBlPVwicmFuZ2VcIlxuICBtb3VudGVkKGVsLCB7IHZhbHVlIH0pIHtcbiAgICBlbC52YWx1ZSA9IHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWU7XG4gIH0sXG4gIGJlZm9yZVVwZGF0ZShlbCwgeyB2YWx1ZSwgb2xkVmFsdWUsIG1vZGlmaWVyczogeyBsYXp5LCB0cmltLCBudW1iZXIgfSB9LCB2bm9kZSkge1xuICAgIGVsW2Fzc2lnbktleV0gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICBpZiAoZWwuY29tcG9zaW5nKSByZXR1cm47XG4gICAgY29uc3QgZWxWYWx1ZSA9IChudW1iZXIgfHwgZWwudHlwZSA9PT0gXCJudW1iZXJcIikgJiYgIS9eMFxcZC8udGVzdChlbC52YWx1ZSkgPyBsb29zZVRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZTtcbiAgICBpZiAoZWxWYWx1ZSA9PT0gbmV3VmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsICYmIGVsLnR5cGUgIT09IFwicmFuZ2VcIikge1xuICAgICAgaWYgKGxhenkgJiYgdmFsdWUgPT09IG9sZFZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0cmltICYmIGVsLnZhbHVlLnRyaW0oKSA9PT0gbmV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBlbC52YWx1ZSA9IG5ld1ZhbHVlO1xuICB9XG59O1xuY29uc3Qgdk1vZGVsQ2hlY2tib3ggPSB7XG4gIC8vICM0MDk2IGFycmF5IGNoZWNrYm94ZXMgbmVlZCB0byBiZSBkZWVwIHRyYXZlcnNlZFxuICBkZWVwOiB0cnVlLFxuICBjcmVhdGVkKGVsLCBfLCB2bm9kZSkge1xuICAgIGVsW2Fzc2lnbktleV0gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBcImNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2RlbFZhbHVlID0gZWwuX21vZGVsVmFsdWU7XG4gICAgICBjb25zdCBlbGVtZW50VmFsdWUgPSBnZXRWYWx1ZShlbCk7XG4gICAgICBjb25zdCBjaGVja2VkID0gZWwuY2hlY2tlZDtcbiAgICAgIGNvbnN0IGFzc2lnbiA9IGVsW2Fzc2lnbktleV07XG4gICAgICBpZiAoaXNBcnJheShtb2RlbFZhbHVlKSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGxvb3NlSW5kZXhPZihtb2RlbFZhbHVlLCBlbGVtZW50VmFsdWUpO1xuICAgICAgICBjb25zdCBmb3VuZCA9IGluZGV4ICE9PSAtMTtcbiAgICAgICAgaWYgKGNoZWNrZWQgJiYgIWZvdW5kKSB7XG4gICAgICAgICAgYXNzaWduKG1vZGVsVmFsdWUuY29uY2F0KGVsZW1lbnRWYWx1ZSkpO1xuICAgICAgICB9IGVsc2UgaWYgKCFjaGVja2VkICYmIGZvdW5kKSB7XG4gICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBbLi4ubW9kZWxWYWx1ZV07XG4gICAgICAgICAgZmlsdGVyZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICBhc3NpZ24oZmlsdGVyZWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzU2V0KG1vZGVsVmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IGNsb25lZCA9IG5ldyBTZXQobW9kZWxWYWx1ZSk7XG4gICAgICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAgICAgY2xvbmVkLmFkZChlbGVtZW50VmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsb25lZC5kZWxldGUoZWxlbWVudFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ24oY2xvbmVkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFzc2lnbihnZXRDaGVja2JveFZhbHVlKGVsLCBjaGVja2VkKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIC8vIHNldCBpbml0aWFsIGNoZWNrZWQgb24gbW91bnQgdG8gd2FpdCBmb3IgdHJ1ZS12YWx1ZS9mYWxzZS12YWx1ZVxuICBtb3VudGVkOiBzZXRDaGVja2VkLFxuICBiZWZvcmVVcGRhdGUoZWwsIGJpbmRpbmcsIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIHNldENoZWNrZWQoZWwsIGJpbmRpbmcsIHZub2RlKTtcbiAgfVxufTtcbmZ1bmN0aW9uIHNldENoZWNrZWQoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHZub2RlKSB7XG4gIGVsLl9tb2RlbFZhbHVlID0gdmFsdWU7XG4gIGxldCBjaGVja2VkO1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBjaGVja2VkID0gbG9vc2VJbmRleE9mKHZhbHVlLCB2bm9kZS5wcm9wcy52YWx1ZSkgPiAtMTtcbiAgfSBlbHNlIGlmIChpc1NldCh2YWx1ZSkpIHtcbiAgICBjaGVja2VkID0gdmFsdWUuaGFzKHZub2RlLnByb3BzLnZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT09IG9sZFZhbHVlKSByZXR1cm47XG4gICAgY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIGdldENoZWNrYm94VmFsdWUoZWwsIHRydWUpKTtcbiAgfVxuICBpZiAoZWwuY2hlY2tlZCAhPT0gY2hlY2tlZCkge1xuICAgIGVsLmNoZWNrZWQgPSBjaGVja2VkO1xuICB9XG59XG5jb25zdCB2TW9kZWxSYWRpbyA9IHtcbiAgY3JlYXRlZChlbCwgeyB2YWx1ZSB9LCB2bm9kZSkge1xuICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB2bm9kZS5wcm9wcy52YWx1ZSk7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICAgIGVsW2Fzc2lnbktleV0oZ2V0VmFsdWUoZWwpKTtcbiAgICB9KTtcbiAgfSxcbiAgYmVmb3JlVXBkYXRlKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9LCB2bm9kZSkge1xuICAgIGVsW2Fzc2lnbktleV0gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgICBpZiAodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IHZNb2RlbFNlbGVjdCA9IHtcbiAgLy8gPHNlbGVjdCBtdWx0aXBsZT4gdmFsdWUgbmVlZCB0byBiZSBkZWVwIHRyYXZlcnNlZFxuICBkZWVwOiB0cnVlLFxuICBjcmVhdGVkKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbnVtYmVyIH0gfSwgdm5vZGUpIHtcbiAgICBjb25zdCBpc1NldE1vZGVsID0gaXNTZXQodmFsdWUpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGVsLm9wdGlvbnMsIChvKSA9PiBvLnNlbGVjdGVkKS5tYXAoXG4gICAgICAgIChvKSA9PiBudW1iZXIgPyBsb29zZVRvTnVtYmVyKGdldFZhbHVlKG8pKSA6IGdldFZhbHVlKG8pXG4gICAgICApO1xuICAgICAgZWxbYXNzaWduS2V5XShcbiAgICAgICAgZWwubXVsdGlwbGUgPyBpc1NldE1vZGVsID8gbmV3IFNldChzZWxlY3RlZFZhbCkgOiBzZWxlY3RlZFZhbCA6IHNlbGVjdGVkVmFsWzBdXG4gICAgICApO1xuICAgICAgZWwuX2Fzc2lnbmluZyA9IHRydWU7XG4gICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgIGVsLl9hc3NpZ25pbmcgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGVsW2Fzc2lnbktleV0gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcbiAgfSxcbiAgLy8gc2V0IHZhbHVlIGluIG1vdW50ZWQgJiB1cGRhdGVkIGJlY2F1c2UgPHNlbGVjdD4gcmVsaWVzIG9uIGl0cyBjaGlsZHJlblxuICAvLyA8b3B0aW9uPnMuXG4gIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSkge1xuICAgIHNldFNlbGVjdGVkKGVsLCB2YWx1ZSk7XG4gIH0sXG4gIGJlZm9yZVVwZGF0ZShlbCwgX2JpbmRpbmcsIHZub2RlKSB7XG4gICAgZWxbYXNzaWduS2V5XSA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xuICB9LFxuICB1cGRhdGVkKGVsLCB7IHZhbHVlIH0pIHtcbiAgICBpZiAoIWVsLl9hc3NpZ25pbmcpIHtcbiAgICAgIHNldFNlbGVjdGVkKGVsLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59O1xuZnVuY3Rpb24gc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKSB7XG4gIGNvbnN0IGlzTXVsdGlwbGUgPSBlbC5tdWx0aXBsZTtcbiAgY29uc3QgaXNBcnJheVZhbHVlID0gaXNBcnJheSh2YWx1ZSk7XG4gIGlmIChpc011bHRpcGxlICYmICFpc0FycmF5VmFsdWUgJiYgIWlzU2V0KHZhbHVlKSkge1xuICAgICEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgJiYgd2FybihcbiAgICAgIGA8c2VsZWN0IG11bHRpcGxlIHYtbW9kZWw+IGV4cGVjdHMgYW4gQXJyYXkgb3IgU2V0IHZhbHVlIGZvciBpdHMgYmluZGluZywgYnV0IGdvdCAke09iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpfS5gXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yIChsZXQgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGNvbnN0IG9wdGlvbiA9IGVsLm9wdGlvbnNbaV07XG4gICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBnZXRWYWx1ZShvcHRpb24pO1xuICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICBpZiAoaXNBcnJheVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvblR5cGUgPSB0eXBlb2Ygb3B0aW9uVmFsdWU7XG4gICAgICAgIGlmIChvcHRpb25UeXBlID09PSBcInN0cmluZ1wiIHx8IG9wdGlvblR5cGUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB2YWx1ZS5zb21lKCh2KSA9PiBTdHJpbmcodikgPT09IFN0cmluZyhvcHRpb25WYWx1ZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgb3B0aW9uVmFsdWUpID4gLTE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHZhbHVlLmhhcyhvcHRpb25WYWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChsb29zZUVxdWFsKGdldFZhbHVlKG9wdGlvbiksIHZhbHVlKSkge1xuICAgICAgaWYgKGVsLnNlbGVjdGVkSW5kZXggIT09IGkpIGVsLnNlbGVjdGVkSW5kZXggPSBpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBpZiAoIWlzTXVsdGlwbGUgJiYgZWwuc2VsZWN0ZWRJbmRleCAhPT0gLTEpIHtcbiAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFZhbHVlKGVsKSB7XG4gIHJldHVybiBcIl92YWx1ZVwiIGluIGVsID8gZWwuX3ZhbHVlIDogZWwudmFsdWU7XG59XG5mdW5jdGlvbiBnZXRDaGVja2JveFZhbHVlKGVsLCBjaGVja2VkKSB7XG4gIGNvbnN0IGtleSA9IGNoZWNrZWQgPyBcIl90cnVlVmFsdWVcIiA6IFwiX2ZhbHNlVmFsdWVcIjtcbiAgcmV0dXJuIGtleSBpbiBlbCA/IGVsW2tleV0gOiBjaGVja2VkO1xufVxuY29uc3Qgdk1vZGVsRHluYW1pYyA9IHtcbiAgY3JlYXRlZChlbCwgYmluZGluZywgdm5vZGUpIHtcbiAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgbnVsbCwgXCJjcmVhdGVkXCIpO1xuICB9LFxuICBtb3VudGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkge1xuICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBudWxsLCBcIm1vdW50ZWRcIik7XG4gIH0sXG4gIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSkge1xuICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUsIFwiYmVmb3JlVXBkYXRlXCIpO1xuICB9LFxuICB1cGRhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKSB7XG4gICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgXCJ1cGRhdGVkXCIpO1xuICB9XG59O1xuZnVuY3Rpb24gcmVzb2x2ZUR5bmFtaWNNb2RlbCh0YWdOYW1lLCB0eXBlKSB7XG4gIHN3aXRjaCAodGFnTmFtZSkge1xuICAgIGNhc2UgXCJTRUxFQ1RcIjpcbiAgICAgIHJldHVybiB2TW9kZWxTZWxlY3Q7XG4gICAgY2FzZSBcIlRFWFRBUkVBXCI6XG4gICAgICByZXR1cm4gdk1vZGVsVGV4dDtcbiAgICBkZWZhdWx0OlxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgXCJjaGVja2JveFwiOlxuICAgICAgICAgIHJldHVybiB2TW9kZWxDaGVja2JveDtcbiAgICAgICAgY2FzZSBcInJhZGlvXCI6XG4gICAgICAgICAgcmV0dXJuIHZNb2RlbFJhZGlvO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB2TW9kZWxUZXh0O1xuICAgICAgfVxuICB9XG59XG5mdW5jdGlvbiBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlLCBob29rKSB7XG4gIGNvbnN0IG1vZGVsVG9Vc2UgPSByZXNvbHZlRHluYW1pY01vZGVsKFxuICAgIGVsLnRhZ05hbWUsXG4gICAgdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZVxuICApO1xuICBjb25zdCBmbiA9IG1vZGVsVG9Vc2VbaG9va107XG4gIGZuICYmIGZuKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKTtcbn1cbmZ1bmN0aW9uIGluaXRWTW9kZWxGb3JTU1IoKSB7XG4gIHZNb2RlbFRleHQuZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9KSA9PiAoeyB2YWx1ZSB9KTtcbiAgdk1vZGVsUmFkaW8uZ2V0U1NSUHJvcHMgPSAoeyB2YWx1ZSB9LCB2bm9kZSkgPT4ge1xuICAgIGlmICh2bm9kZS5wcm9wcyAmJiBsb29zZUVxdWFsKHZub2RlLnByb3BzLnZhbHVlLCB2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcbiAgICB9XG4gIH07XG4gIHZNb2RlbENoZWNrYm94LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSwgdm5vZGUpID0+IHtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGlmICh2bm9kZS5wcm9wcyAmJiBsb29zZUluZGV4T2YodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKSA+IC0xKSB7XG4gICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzU2V0KHZhbHVlKSkge1xuICAgICAgaWYgKHZub2RlLnByb3BzICYmIHZhbHVlLmhhcyh2bm9kZS5wcm9wcy52YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHsgY2hlY2tlZDogdHJ1ZSB9O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcbiAgICB9XG4gIH07XG4gIHZNb2RlbER5bmFtaWMuZ2V0U1NSUHJvcHMgPSAoYmluZGluZywgdm5vZGUpID0+IHtcbiAgICBpZiAodHlwZW9mIHZub2RlLnR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbW9kZWxUb1VzZSA9IHJlc29sdmVEeW5hbWljTW9kZWwoXG4gICAgICAvLyByZXNvbHZlRHluYW1pY01vZGVsIGV4cGVjdHMgYW4gdXBwZXJjYXNlIHRhZyBuYW1lLCBidXQgdm5vZGUudHlwZSBpcyBsb3dlcmNhc2VcbiAgICAgIHZub2RlLnR5cGUudG9VcHBlckNhc2UoKSxcbiAgICAgIHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnR5cGVcbiAgICApO1xuICAgIGlmIChtb2RlbFRvVXNlLmdldFNTUlByb3BzKSB7XG4gICAgICByZXR1cm4gbW9kZWxUb1VzZS5nZXRTU1JQcm9wcyhiaW5kaW5nLCB2bm9kZSk7XG4gICAgfVxuICB9O1xufVxuXG5jb25zdCBzeXN0ZW1Nb2RpZmllcnMgPSBbXCJjdHJsXCIsIFwic2hpZnRcIiwgXCJhbHRcIiwgXCJtZXRhXCJdO1xuY29uc3QgbW9kaWZpZXJHdWFyZHMgPSB7XG4gIHN0b3A6IChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLFxuICBwcmV2ZW50OiAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpLFxuICBzZWxmOiAoZSkgPT4gZS50YXJnZXQgIT09IGUuY3VycmVudFRhcmdldCxcbiAgY3RybDogKGUpID0+ICFlLmN0cmxLZXksXG4gIHNoaWZ0OiAoZSkgPT4gIWUuc2hpZnRLZXksXG4gIGFsdDogKGUpID0+ICFlLmFsdEtleSxcbiAgbWV0YTogKGUpID0+ICFlLm1ldGFLZXksXG4gIGxlZnQ6IChlKSA9PiBcImJ1dHRvblwiIGluIGUgJiYgZS5idXR0b24gIT09IDAsXG4gIG1pZGRsZTogKGUpID0+IFwiYnV0dG9uXCIgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMSxcbiAgcmlnaHQ6IChlKSA9PiBcImJ1dHRvblwiIGluIGUgJiYgZS5idXR0b24gIT09IDIsXG4gIGV4YWN0OiAoZSwgbW9kaWZpZXJzKSA9PiBzeXN0ZW1Nb2RpZmllcnMuc29tZSgobSkgPT4gZVtgJHttfUtleWBdICYmICFtb2RpZmllcnMuaW5jbHVkZXMobSkpXG59O1xuY29uc3Qgd2l0aE1vZGlmaWVycyA9IChmbiwgbW9kaWZpZXJzKSA9PiB7XG4gIGNvbnN0IGNhY2hlID0gZm4uX3dpdGhNb2RzIHx8IChmbi5fd2l0aE1vZHMgPSB7fSk7XG4gIGNvbnN0IGNhY2hlS2V5ID0gbW9kaWZpZXJzLmpvaW4oXCIuXCIpO1xuICByZXR1cm4gY2FjaGVbY2FjaGVLZXldIHx8IChjYWNoZVtjYWNoZUtleV0gPSAoZXZlbnQsIC4uLmFyZ3MpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZ3VhcmQgPSBtb2RpZmllckd1YXJkc1ttb2RpZmllcnNbaV1dO1xuICAgICAgaWYgKGd1YXJkICYmIGd1YXJkKGV2ZW50LCBtb2RpZmllcnMpKSByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBmbihldmVudCwgLi4uYXJncyk7XG4gIH0pO1xufTtcbmNvbnN0IGtleU5hbWVzID0ge1xuICBlc2M6IFwiZXNjYXBlXCIsXG4gIHNwYWNlOiBcIiBcIixcbiAgdXA6IFwiYXJyb3ctdXBcIixcbiAgbGVmdDogXCJhcnJvdy1sZWZ0XCIsXG4gIHJpZ2h0OiBcImFycm93LXJpZ2h0XCIsXG4gIGRvd246IFwiYXJyb3ctZG93blwiLFxuICBkZWxldGU6IFwiYmFja3NwYWNlXCJcbn07XG5jb25zdCB3aXRoS2V5cyA9IChmbiwgbW9kaWZpZXJzKSA9PiB7XG4gIGNvbnN0IGNhY2hlID0gZm4uX3dpdGhLZXlzIHx8IChmbi5fd2l0aEtleXMgPSB7fSk7XG4gIGNvbnN0IGNhY2hlS2V5ID0gbW9kaWZpZXJzLmpvaW4oXCIuXCIpO1xuICByZXR1cm4gY2FjaGVbY2FjaGVLZXldIHx8IChjYWNoZVtjYWNoZUtleV0gPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoIShcImtleVwiIGluIGV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBldmVudEtleSA9IGh5cGhlbmF0ZShldmVudC5rZXkpO1xuICAgIGlmIChtb2RpZmllcnMuc29tZShcbiAgICAgIChrKSA9PiBrID09PSBldmVudEtleSB8fCBrZXlOYW1lc1trXSA9PT0gZXZlbnRLZXlcbiAgICApKSB7XG4gICAgICByZXR1cm4gZm4oZXZlbnQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5jb25zdCByZW5kZXJlck9wdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gZXh0ZW5kKHsgcGF0Y2hQcm9wIH0sIG5vZGVPcHMpO1xubGV0IHJlbmRlcmVyO1xubGV0IGVuYWJsZWRIeWRyYXRpb24gPSBmYWxzZTtcbmZ1bmN0aW9uIGVuc3VyZVJlbmRlcmVyKCkge1xuICByZXR1cm4gcmVuZGVyZXIgfHwgKHJlbmRlcmVyID0gY3JlYXRlUmVuZGVyZXIocmVuZGVyZXJPcHRpb25zKSk7XG59XG5mdW5jdGlvbiBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpIHtcbiAgcmVuZGVyZXIgPSBlbmFibGVkSHlkcmF0aW9uID8gcmVuZGVyZXIgOiBjcmVhdGVIeWRyYXRpb25SZW5kZXJlcihyZW5kZXJlck9wdGlvbnMpO1xuICBlbmFibGVkSHlkcmF0aW9uID0gdHJ1ZTtcbiAgcmV0dXJuIHJlbmRlcmVyO1xufVxuY29uc3QgcmVuZGVyID0gKC4uLmFyZ3MpID0+IHtcbiAgZW5zdXJlUmVuZGVyZXIoKS5yZW5kZXIoLi4uYXJncyk7XG59O1xuY29uc3QgaHlkcmF0ZSA9ICguLi5hcmdzKSA9PiB7XG4gIGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkuaHlkcmF0ZSguLi5hcmdzKTtcbn07XG5jb25zdCBjcmVhdGVBcHAgPSAoLi4uYXJncykgPT4ge1xuICBjb25zdCBhcHAgPSBlbnN1cmVSZW5kZXJlcigpLmNyZWF0ZUFwcCguLi5hcmdzKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBpbmplY3ROYXRpdmVUYWdDaGVjayhhcHApO1xuICAgIGluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrKGFwcCk7XG4gIH1cbiAgY29uc3QgeyBtb3VudCB9ID0gYXBwO1xuICBhcHAubW91bnQgPSAoY29udGFpbmVyT3JTZWxlY3RvcikgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5vcm1hbGl6ZUNvbnRhaW5lcihjb250YWluZXJPclNlbGVjdG9yKTtcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IGFwcC5fY29tcG9uZW50O1xuICAgIGlmICghaXNGdW5jdGlvbihjb21wb25lbnQpICYmICFjb21wb25lbnQucmVuZGVyICYmICFjb21wb25lbnQudGVtcGxhdGUpIHtcbiAgICAgIGNvbXBvbmVudC50ZW1wbGF0ZSA9IGNvbnRhaW5lci5pbm5lckhUTUw7XG4gICAgfVxuICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgIGNvbnRhaW5lci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfVxuICAgIGNvbnN0IHByb3h5ID0gbW91bnQoY29udGFpbmVyLCBmYWxzZSwgcmVzb2x2ZVJvb3ROYW1lc3BhY2UoY29udGFpbmVyKSk7XG4gICAgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoXCJ2LWNsb2FrXCIpO1xuICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtdi1hcHBcIiwgXCJcIik7XG4gICAgfVxuICAgIHJldHVybiBwcm94eTtcbiAgfTtcbiAgcmV0dXJuIGFwcDtcbn07XG5jb25zdCBjcmVhdGVTU1JBcHAgPSAoLi4uYXJncykgPT4ge1xuICBjb25zdCBhcHAgPSBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpLmNyZWF0ZUFwcCguLi5hcmdzKTtcbiAgaWYgKCEhKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikpIHtcbiAgICBpbmplY3ROYXRpdmVUYWdDaGVjayhhcHApO1xuICAgIGluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrKGFwcCk7XG4gIH1cbiAgY29uc3QgeyBtb3VudCB9ID0gYXBwO1xuICBhcHAubW91bnQgPSAoY29udGFpbmVyT3JTZWxlY3RvcikgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5vcm1hbGl6ZUNvbnRhaW5lcihjb250YWluZXJPclNlbGVjdG9yKTtcbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICByZXR1cm4gbW91bnQoY29udGFpbmVyLCB0cnVlLCByZXNvbHZlUm9vdE5hbWVzcGFjZShjb250YWluZXIpKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBhcHA7XG59O1xuZnVuY3Rpb24gcmVzb2x2ZVJvb3ROYW1lc3BhY2UoY29udGFpbmVyKSB7XG4gIGlmIChjb250YWluZXIgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSB7XG4gICAgcmV0dXJuIFwic3ZnXCI7XG4gIH1cbiAgaWYgKHR5cGVvZiBNYXRoTUxFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIgJiYgY29udGFpbmVyIGluc3RhbmNlb2YgTWF0aE1MRWxlbWVudCkge1xuICAgIHJldHVybiBcIm1hdGhtbFwiO1xuICB9XG59XG5mdW5jdGlvbiBpbmplY3ROYXRpdmVUYWdDaGVjayhhcHApIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcsIFwiaXNOYXRpdmVUYWdcIiwge1xuICAgIHZhbHVlOiAodGFnKSA9PiBpc0hUTUxUYWcodGFnKSB8fCBpc1NWR1RhZyh0YWcpIHx8IGlzTWF0aE1MVGFnKHRhZyksXG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pO1xufVxuZnVuY3Rpb24gaW5qZWN0Q29tcGlsZXJPcHRpb25zQ2hlY2soYXBwKSB7XG4gIGlmIChpc1J1bnRpbWVPbmx5KCkpIHtcbiAgICBjb25zdCBpc0N1c3RvbUVsZW1lbnQgPSBhcHAuY29uZmlnLmlzQ3VzdG9tRWxlbWVudDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgXCJpc0N1c3RvbUVsZW1lbnRcIiwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gaXNDdXN0b21FbGVtZW50O1xuICAgICAgfSxcbiAgICAgIHNldCgpIHtcbiAgICAgICAgd2FybihcbiAgICAgICAgICBgVGhlIFxcYGlzQ3VzdG9tRWxlbWVudFxcYCBjb25maWcgb3B0aW9uIGlzIGRlcHJlY2F0ZWQuIFVzZSBcXGBjb21waWxlck9wdGlvbnMuaXNDdXN0b21FbGVtZW50XFxgIGluc3RlYWQuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbXBpbGVyT3B0aW9ucyA9IGFwcC5jb25maWcuY29tcGlsZXJPcHRpb25zO1xuICAgIGNvbnN0IG1zZyA9IGBUaGUgXFxgY29tcGlsZXJPcHRpb25zXFxgIGNvbmZpZyBvcHRpb24gaXMgb25seSByZXNwZWN0ZWQgd2hlbiB1c2luZyBhIGJ1aWxkIG9mIFZ1ZS5qcyB0aGF0IGluY2x1ZGVzIHRoZSBydW50aW1lIGNvbXBpbGVyIChha2EgXCJmdWxsIGJ1aWxkXCIpLiBTaW5jZSB5b3UgYXJlIHVzaW5nIHRoZSBydW50aW1lLW9ubHkgYnVpbGQsIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBtdXN0IGJlIHBhc3NlZCB0byBcXGBAdnVlL2NvbXBpbGVyLWRvbVxcYCBpbiB0aGUgYnVpbGQgc2V0dXAgaW5zdGVhZC5cbi0gRm9yIHZ1ZS1sb2FkZXI6IHBhc3MgaXQgdmlhIHZ1ZS1sb2FkZXIncyBcXGBjb21waWxlck9wdGlvbnNcXGAgbG9hZGVyIG9wdGlvbi5cbi0gRm9yIHZ1ZS1jbGk6IHNlZSBodHRwczovL2NsaS52dWVqcy5vcmcvZ3VpZGUvd2VicGFjay5odG1sI21vZGlmeWluZy1vcHRpb25zLW9mLWEtbG9hZGVyXG4tIEZvciB2aXRlOiBwYXNzIGl0IHZpYSBAdml0ZWpzL3BsdWdpbi12dWUgb3B0aW9ucy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS1wbHVnaW4tdnVlL3RyZWUvbWFpbi9wYWNrYWdlcy9wbHVnaW4tdnVlI2V4YW1wbGUtZm9yLXBhc3Npbmctb3B0aW9ucy10by12dWVjb21waWxlci1zZmNgO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCBcImNvbXBpbGVyT3B0aW9uc1wiLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHdhcm4obXNnKTtcbiAgICAgICAgcmV0dXJuIGNvbXBpbGVyT3B0aW9ucztcbiAgICAgIH0sXG4gICAgICBzZXQoKSB7XG4gICAgICAgIHdhcm4obXNnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gbm9ybWFsaXplQ29udGFpbmVyKGNvbnRhaW5lcikge1xuICBpZiAoaXNTdHJpbmcoY29udGFpbmVyKSkge1xuICAgIGNvbnN0IHJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgICBpZiAoISEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSAmJiAhcmVzKSB7XG4gICAgICB3YXJuKFxuICAgICAgICBgRmFpbGVkIHRvIG1vdW50IGFwcDogbW91bnQgdGFyZ2V0IHNlbGVjdG9yIFwiJHtjb250YWluZXJ9XCIgcmV0dXJuZWQgbnVsbC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIGlmICghIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdpbmRvdy5TaGFkb3dSb290ICYmIGNvbnRhaW5lciBpbnN0YW5jZW9mIHdpbmRvdy5TaGFkb3dSb290ICYmIGNvbnRhaW5lci5tb2RlID09PSBcImNsb3NlZFwiKSB7XG4gICAgd2FybihcbiAgICAgIGBtb3VudGluZyBvbiBhIFNoYWRvd1Jvb3Qgd2l0aCBcXGB7bW9kZTogXCJjbG9zZWRcIn1cXGAgbWF5IGxlYWQgdG8gdW5wcmVkaWN0YWJsZSBidWdzYFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGNvbnRhaW5lcjtcbn1cbmxldCBzc3JEaXJlY3RpdmVJbml0aWFsaXplZCA9IGZhbHNlO1xuY29uc3QgaW5pdERpcmVjdGl2ZXNGb3JTU1IgPSAoKSA9PiB7XG4gIGlmICghc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQpIHtcbiAgICBzc3JEaXJlY3RpdmVJbml0aWFsaXplZCA9IHRydWU7XG4gICAgaW5pdFZNb2RlbEZvclNTUigpO1xuICAgIGluaXRWU2hvd0ZvclNTUigpO1xuICB9XG59IDtcblxuZXhwb3J0IHsgVHJhbnNpdGlvbiwgVHJhbnNpdGlvbkdyb3VwLCBWdWVFbGVtZW50LCBjcmVhdGVBcHAsIGNyZWF0ZVNTUkFwcCwgZGVmaW5lQ3VzdG9tRWxlbWVudCwgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudCwgaHlkcmF0ZSwgaW5pdERpcmVjdGl2ZXNGb3JTU1IsIHJlbmRlciwgdXNlQ3NzTW9kdWxlLCB1c2VDc3NWYXJzLCB1c2VIb3N0LCB1c2VTaGFkb3dSb290LCB2TW9kZWxDaGVja2JveCwgdk1vZGVsRHluYW1pYywgdk1vZGVsUmFkaW8sIHZNb2RlbFNlbGVjdCwgdk1vZGVsVGV4dCwgdlNob3csIHdpdGhLZXlzLCB3aXRoTW9kaWZpZXJzIH07XG4iLCJleHBvcnQgZnVuY3Rpb24gaW5qZWN0UHJvcCAodGFyZ2V0LCBwcm9wTmFtZSwgZ2V0LCBzZXQpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcE5hbWUsIHtcbiAgICBnZXQsXG4gICAgc2V0LFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSlcbiAgcmV0dXJuIHRhcmdldFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0TXVsdGlwbGVQcm9wcyAodGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgIGluamVjdFByb3AodGFyZ2V0LCBrZXksIHByb3BzWyBrZXkgXSlcbiAgfVxuICByZXR1cm4gdGFyZ2V0XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11c2VsZXNzLWVzY2FwZSAqL1xuXG5pbXBvcnQgeyByZWYsIHJlYWN0aXZlIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHsgaW5qZWN0UHJvcCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuaW5qZWN0LW9iai1wcm9wL2luamVjdC1vYmotcHJvcC5qcydcblxuLyoqXG4gKiBfXyBRVUFTQVJfU1NSIF9fICAgICAgICAgICAgLT4gcnVucyBvbiBTU1Igb24gY2xpZW50IG9yIHNlcnZlclxuICogX18gUVVBU0FSX1NTUl9TRVJWRVIgX18gICAgIC0+IHJ1bnMgb24gU1NSIG9uIHNlcnZlclxuICogX18gUVVBU0FSX1NTUl9DTElFTlQgX18gICAgIC0+IHJ1bnMgb24gU1NSIG9uIGNsaWVudFxuICogX18gUVVBU0FSX1NTUl9QV0EgX18gICAgICAgIC0+IGJ1aWx0IHdpdGggU1NSK1BXQTsgbWF5IHJ1biBvbiBTU1Igb24gY2xpZW50IG9yIG9uIFBXQSBjbGllbnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5lZWRzIHJ1bnRpbWUgZGV0ZWN0aW9uKVxuICovXG5cbmV4cG9ydCBjb25zdCBpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24gPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyB7IHZhbHVlOiB0cnVlIH1cbiAgOiByZWYoXG4gICAgX19RVUFTQVJfU1NSX0NMSUVOVF9fICYmIChcbiAgICAgIF9fUVVBU0FSX1NTUl9QV0FfXyA/IGRvY3VtZW50LmJvZHkuZ2V0QXR0cmlidXRlKCdkYXRhLXNlcnZlci1yZW5kZXJlZCcpICE9PSBudWxsIDogdHJ1ZVxuICAgIClcbiAgKVxuXG5sZXQgcHJlSHlkcmF0aW9uQnJvd3NlclxuXG5mdW5jdGlvbiBnZXRNYXRjaCAodXNlckFnZW50LCBwbGF0Zm9ybU1hdGNoKSB7XG4gIGNvbnN0IG1hdGNoID0gLyhlZGd8ZWRnZXxlZGdhfGVkZ2lvcylcXC8oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8ob3ByKVtcXC9dKFtcXHcuXSspLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHZpdmFsZGkpW1xcL10oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oY2hyb21lfGNyaW9zKVtcXC9dKFtcXHcuXSspLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHZlcnNpb24pKGFwcGxld2Via2l0KVtcXC9dKFtcXHcuXSspLiooc2FmYXJpKVtcXC9dKFtcXHcuXSspLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHdlYmtpdClbXFwvXShbXFx3Ll0rKS4qKHZlcnNpb24pW1xcL10oW1xcdy5dKykuKihzYWZhcmkpW1xcL10oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oZmlyZWZveHxmeGlvcylbXFwvXShbXFx3Ll0rKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyh3ZWJraXQpW1xcL10oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8ob3BlcmEpKD86Lip2ZXJzaW9ufClbXFwvXShbXFx3Ll0rKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgW11cblxuICByZXR1cm4ge1xuICAgIGJyb3dzZXI6IG1hdGNoWyA1IF0gfHwgbWF0Y2hbIDMgXSB8fCBtYXRjaFsgMSBdIHx8ICcnLFxuICAgIHZlcnNpb246IG1hdGNoWyA0IF0gfHwgbWF0Y2hbIDIgXSB8fCAnMCcsXG4gICAgcGxhdGZvcm06IHBsYXRmb3JtTWF0Y2hbIDAgXSB8fCAnJ1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFBsYXRmb3JtTWF0Y2ggKHVzZXJBZ2VudCkge1xuICByZXR1cm4gLyhpcGFkKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhpcG9kKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyh3aW5kb3dzIHBob25lKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhpcGhvbmUpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKGtpbmRsZSkvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oc2lsaykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oYW5kcm9pZCkvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8od2luKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhtYWMpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKGxpbnV4KS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhjcm9zKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgLy8gVE9ETzogUmVtb3ZlIEJsYWNrQmVycnkgZGV0ZWN0aW9uLiBCbGFja0JlcnJ5IE9TLCBCbGFja0JlcnJ5IDEwLCBhbmQgQmxhY2tCZXJyeSBQbGF5Qm9vayBPU1xuICAgIC8vIGlzIG9mZmljaWFsbHkgZGVhZCBhcyBvZiBKYW51YXJ5IDQsIDIwMjIgKGh0dHBzOi8vd3d3LmJsYWNrYmVycnkuY29tL3VzL2VuL3N1cHBvcnQvZGV2aWNlcy9lbmQtb2YtbGlmZSlcbiAgICB8fCAvKHBsYXlib29rKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhiYikvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oYmxhY2tiZXJyeSkvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IFtdXG59XG5cbmNvbnN0IGhhc1RvdWNoID0gX19RVUFTQVJfU1NSX1NFUlZFUl9fXG4gID8gZmFsc2VcbiAgOiAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwgd2luZG93Lm5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDBcblxuZnVuY3Rpb24gZ2V0UGxhdGZvcm0gKFVBKSB7XG4gIGNvbnN0IHVzZXJBZ2VudCA9IFVBLnRvTG93ZXJDYXNlKClcbiAgY29uc3QgcGxhdGZvcm1NYXRjaCA9IGdldFBsYXRmb3JtTWF0Y2godXNlckFnZW50KVxuICBjb25zdCBtYXRjaGVkID0gZ2V0TWF0Y2godXNlckFnZW50LCBwbGF0Zm9ybU1hdGNoKVxuICBjb25zdCBicm93c2VyID0ge1xuICAgIG1vYmlsZTogZmFsc2UsXG4gICAgZGVza3RvcDogZmFsc2UsXG5cbiAgICBjb3Jkb3ZhOiBmYWxzZSxcbiAgICBjYXBhY2l0b3I6IGZhbHNlLFxuICAgIG5hdGl2ZU1vYmlsZTogZmFsc2UsXG4gICAgLy8gbmF0aXZlTW9iaWxlV3JhcHBlcjogdm9pZCAwLFxuICAgIGVsZWN0cm9uOiBmYWxzZSxcbiAgICBiZXg6IGZhbHNlLFxuXG4gICAgbGludXg6IGZhbHNlLFxuICAgIG1hYzogZmFsc2UsXG4gICAgd2luOiBmYWxzZSxcbiAgICBjcm9zOiBmYWxzZSxcblxuICAgIGNocm9tZTogZmFsc2UsXG4gICAgZmlyZWZveDogZmFsc2UsXG4gICAgb3BlcmE6IGZhbHNlLFxuICAgIHNhZmFyaTogZmFsc2UsXG4gICAgdml2YWxkaTogZmFsc2UsXG4gICAgZWRnZTogZmFsc2UsXG4gICAgZWRnZUNocm9taXVtOiBmYWxzZSxcbiAgICBpZTogZmFsc2UsXG4gICAgd2Via2l0OiBmYWxzZSxcblxuICAgIGFuZHJvaWQ6IGZhbHNlLFxuICAgIGlvczogZmFsc2UsXG4gICAgaXBhZDogZmFsc2UsXG4gICAgaXBob25lOiBmYWxzZSxcbiAgICBpcG9kOiBmYWxzZSxcbiAgICBraW5kbGU6IGZhbHNlLFxuICAgIHdpbnBob25lOiBmYWxzZSxcbiAgICBibGFja2JlcnJ5OiBmYWxzZSxcbiAgICBwbGF5Ym9vazogZmFsc2UsXG4gICAgc2lsazogZmFsc2VcbiAgfVxuXG4gIGlmIChtYXRjaGVkLmJyb3dzZXIpIHtcbiAgICBicm93c2VyWyBtYXRjaGVkLmJyb3dzZXIgXSA9IHRydWVcbiAgICBicm93c2VyLnZlcnNpb24gPSBtYXRjaGVkLnZlcnNpb25cbiAgICBicm93c2VyLnZlcnNpb25OdW1iZXIgPSBwYXJzZUludChtYXRjaGVkLnZlcnNpb24sIDEwKVxuICB9XG5cbiAgaWYgKG1hdGNoZWQucGxhdGZvcm0pIHtcbiAgICBicm93c2VyWyBtYXRjaGVkLnBsYXRmb3JtIF0gPSB0cnVlXG4gIH1cblxuICBjb25zdCBrbm93bk1vYmlsZXMgPSBicm93c2VyLmFuZHJvaWRcbiAgICB8fCBicm93c2VyLmlvc1xuICAgIHx8IGJyb3dzZXIuYmJcbiAgICB8fCBicm93c2VyLmJsYWNrYmVycnlcbiAgICB8fCBicm93c2VyLmlwYWRcbiAgICB8fCBicm93c2VyLmlwaG9uZVxuICAgIHx8IGJyb3dzZXIuaXBvZFxuICAgIHx8IGJyb3dzZXIua2luZGxlXG4gICAgfHwgYnJvd3Nlci5wbGF5Ym9va1xuICAgIHx8IGJyb3dzZXIuc2lsa1xuICAgIHx8IGJyb3dzZXJbICd3aW5kb3dzIHBob25lJyBdXG5cbiAgLy8gVGhlc2UgYXJlIGFsbCBjb25zaWRlcmVkIG1vYmlsZSBwbGF0Zm9ybXMsIG1lYW5pbmcgdGhleSBydW4gYSBtb2JpbGUgYnJvd3NlclxuICBpZiAoXG4gICAga25vd25Nb2JpbGVzID09PSB0cnVlXG4gICAgfHwgdXNlckFnZW50LmluZGV4T2YoJ21vYmlsZScpICE9PSAtMVxuICApIHtcbiAgICBicm93c2VyLm1vYmlsZSA9IHRydWVcbiAgfVxuICAvLyBJZiBpdCdzIG5vdCBtb2JpbGUgd2Ugc2hvdWxkIGNvbnNpZGVyIGl0J3MgZGVza3RvcCBwbGF0Zm9ybSwgbWVhbmluZyBpdCBydW5zIGEgZGVza3RvcCBicm93c2VyXG4gIC8vIEl0J3MgYSB3b3JrYXJvdW5kIGZvciBhbm9ueW1pemVkIHVzZXIgYWdlbnRzXG4gIC8vIChicm93c2VyLmNyb3MgfHwgYnJvd3Nlci5tYWMgfHwgYnJvd3Nlci5saW51eCB8fCBicm93c2VyLndpbilcbiAgZWxzZSB7XG4gICAgYnJvd3Nlci5kZXNrdG9wID0gdHJ1ZVxuICB9XG5cbiAgaWYgKGJyb3dzZXJbICd3aW5kb3dzIHBob25lJyBdKSB7XG4gICAgYnJvd3Nlci53aW5waG9uZSA9IHRydWVcbiAgICBkZWxldGUgYnJvd3NlclsgJ3dpbmRvd3MgcGhvbmUnIF1cbiAgfVxuXG4gIGlmIChicm93c2VyLmVkZ2EgfHwgYnJvd3Nlci5lZGdpb3MgfHwgYnJvd3Nlci5lZGcpIHtcbiAgICBicm93c2VyLmVkZ2UgPSB0cnVlXG4gICAgbWF0Y2hlZC5icm93c2VyID0gJ2VkZ2UnXG4gIH1cbiAgZWxzZSBpZiAoYnJvd3Nlci5jcmlvcykge1xuICAgIGJyb3dzZXIuY2hyb21lID0gdHJ1ZVxuICAgIG1hdGNoZWQuYnJvd3NlciA9ICdjaHJvbWUnXG4gIH1cbiAgZWxzZSBpZiAoYnJvd3Nlci5meGlvcykge1xuICAgIGJyb3dzZXIuZmlyZWZveCA9IHRydWVcbiAgICBtYXRjaGVkLmJyb3dzZXIgPSAnZmlyZWZveCdcbiAgfVxuXG4gIC8vIFNldCBpT1MgaWYgb24gaVBvZCwgaVBhZCBvciBpUGhvbmVcbiAgaWYgKGJyb3dzZXIuaXBvZCB8fCBicm93c2VyLmlwYWQgfHwgYnJvd3Nlci5pcGhvbmUpIHtcbiAgICBicm93c2VyLmlvcyA9IHRydWVcbiAgfVxuXG4gIGlmIChicm93c2VyLnZpdmFsZGkpIHtcbiAgICBtYXRjaGVkLmJyb3dzZXIgPSAndml2YWxkaSdcbiAgICBicm93c2VyLnZpdmFsZGkgPSB0cnVlXG4gIH1cblxuICAvLyBUT0RPOiBUaGUgYXNzdW1wdGlvbiBhYm91dCBXZWJLaXQgYmFzZWQgYnJvd3NlcnMgYmVsb3cgaXMgbm90IGNvbXBsZXRlbHkgYWNjdXJhdGUuXG4gIC8vIEdvb2dsZSByZWxlYXNlZCBCbGluayhhIGZvcmsgb2YgV2ViS2l0KSBlbmdpbmUgb24gQXByaWwgMywgMjAxMywgd2hpY2ggaXMgcmVhbGx5IGRpZmZlcmVudCB0aGFuIFdlYktpdCB0b2RheS5cbiAgLy8gVG9kYXksIG9uZSBtaWdodCB3YW50IHRvIGNoZWNrIGZvciBXZWJLaXQgdG8gZGVhbCB3aXRoIGl0cyBidWdzLCB3aGljaCBpcyB1c2VkIG9uIGFsbCBicm93c2VycyBvbiBpT1MsIGFuZCBTYWZhcmkgYnJvd3NlciBvbiBhbGwgcGxhdGZvcm1zLlxuICBpZiAoXG4gICAgLy8gQ2hyb21lLCBPcGVyYSAxNSssIFZpdmFsZGkgYW5kIFNhZmFyaSBhcmUgd2Via2l0IGJhc2VkIGJyb3dzZXJzXG4gICAgYnJvd3Nlci5jaHJvbWVcbiAgICB8fCBicm93c2VyLm9wclxuICAgIHx8IGJyb3dzZXIuc2FmYXJpXG4gICAgfHwgYnJvd3Nlci52aXZhbGRpXG4gICAgLy8gd2UgZXhwZWN0IHVua25vd24sIG5vbiBpT1MgbW9iaWxlIGJyb3dzZXJzIHRvIGJlIHdlYmtpdCBiYXNlZFxuICAgIHx8IChcbiAgICAgIGJyb3dzZXIubW9iaWxlID09PSB0cnVlXG4gICAgICAmJiBicm93c2VyLmlvcyAhPT0gdHJ1ZVxuICAgICAgJiYga25vd25Nb2JpbGVzICE9PSB0cnVlXG4gICAgKVxuICApIHtcbiAgICBicm93c2VyLndlYmtpdCA9IHRydWVcbiAgfVxuXG4gIC8vIE9wZXJhIDE1KyBhcmUgaWRlbnRpZmllZCBhcyBvcHJcbiAgaWYgKGJyb3dzZXIub3ByKSB7XG4gICAgbWF0Y2hlZC5icm93c2VyID0gJ29wZXJhJ1xuICAgIGJyb3dzZXIub3BlcmEgPSB0cnVlXG4gIH1cblxuICAvLyBTb21lIGJyb3dzZXJzIGFyZSBtYXJrZWQgYXMgU2FmYXJpIGJ1dCBhcmUgbm90XG4gIGlmIChicm93c2VyLnNhZmFyaSkge1xuICAgIGlmIChicm93c2VyLmJsYWNrYmVycnkgfHwgYnJvd3Nlci5iYikge1xuICAgICAgbWF0Y2hlZC5icm93c2VyID0gJ2JsYWNrYmVycnknXG4gICAgICBicm93c2VyLmJsYWNrYmVycnkgPSB0cnVlXG4gICAgfVxuICAgIGVsc2UgaWYgKGJyb3dzZXIucGxheWJvb2spIHtcbiAgICAgIG1hdGNoZWQuYnJvd3NlciA9ICdwbGF5Ym9vaydcbiAgICAgIGJyb3dzZXIucGxheWJvb2sgPSB0cnVlXG4gICAgfVxuICAgIGVsc2UgaWYgKGJyb3dzZXIuYW5kcm9pZCkge1xuICAgICAgbWF0Y2hlZC5icm93c2VyID0gJ2FuZHJvaWQnXG4gICAgICBicm93c2VyLmFuZHJvaWQgPSB0cnVlXG4gICAgfVxuICAgIGVsc2UgaWYgKGJyb3dzZXIua2luZGxlKSB7XG4gICAgICBtYXRjaGVkLmJyb3dzZXIgPSAna2luZGxlJ1xuICAgICAgYnJvd3Nlci5raW5kbGUgPSB0cnVlXG4gICAgfVxuICAgIGVsc2UgaWYgKGJyb3dzZXIuc2lsaykge1xuICAgICAgbWF0Y2hlZC5icm93c2VyID0gJ3NpbGsnXG4gICAgICBicm93c2VyLnNpbGsgPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgLy8gQXNzaWduIHRoZSBuYW1lIGFuZCBwbGF0Zm9ybSB2YXJpYWJsZVxuICBicm93c2VyLm5hbWUgPSBtYXRjaGVkLmJyb3dzZXJcbiAgYnJvd3Nlci5wbGF0Zm9ybSA9IG1hdGNoZWQucGxhdGZvcm1cblxuICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlKSB7XG4gICAgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdlbGVjdHJvbicpICE9PSAtMSkge1xuICAgICAgYnJvd3Nlci5lbGVjdHJvbiA9IHRydWVcbiAgICB9XG4gICAgZWxzZSBpZiAoZG9jdW1lbnQubG9jYXRpb24uaHJlZi5pbmRleE9mKCctZXh0ZW5zaW9uOi8vJykgIT09IC0xKSB7XG4gICAgICBicm93c2VyLmJleCA9IHRydWVcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAod2luZG93LkNhcGFjaXRvciAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGJyb3dzZXIuY2FwYWNpdG9yID0gdHJ1ZVxuICAgICAgICBicm93c2VyLm5hdGl2ZU1vYmlsZSA9IHRydWVcbiAgICAgICAgYnJvd3Nlci5uYXRpdmVNb2JpbGVXcmFwcGVyID0gJ2NhcGFjaXRvcidcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHdpbmRvdy5fY29yZG92YU5hdGl2ZSAhPT0gdm9pZCAwIHx8IHdpbmRvdy5jb3Jkb3ZhICE9PSB2b2lkIDApIHtcbiAgICAgICAgYnJvd3Nlci5jb3Jkb3ZhID0gdHJ1ZVxuICAgICAgICBicm93c2VyLm5hdGl2ZU1vYmlsZSA9IHRydWVcbiAgICAgICAgYnJvd3Nlci5uYXRpdmVNb2JpbGVXcmFwcGVyID0gJ2NvcmRvdmEnXG4gICAgICB9XG5cbiAgICAgIGlmIChpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24udmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgLypcbiAgICAgICAgICogV2UgbmVlZCB0byByZW1lbWJlciB0aGUgY3VycmVudCBzdGF0ZSBhc1xuICAgICAgICAgKiBldmVyeXRoaW5nIHRoYXQgZm9sbG93cyBjYW4gb25seSBiZSBjb3JyZWN0ZWQgY2xpZW50LXNpZGUsXG4gICAgICAgICAqIGJ1dCB3ZSBkb24ndCB3YW50IHRvIGJyYWtlIHRoZSBoeWRyYXRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBcImNsaWVudFwiIG9iamVjdCBpcyBpbXBvcnRlZCB0aHJvdWdob3V0IHRoZSBVSSBhbmQgc2hvdWxkXG4gICAgICAgICAqIGJlIGFzIGFjY3VyYXRlIGFzIHBvc3NpYmxlIGdpdmVuIGFsbCB0aGUga25vd2xlZGdlIHRoYXQgd2UgcG9zc2VzXG4gICAgICAgICAqIGJlY2F1c2UgZGVjaXNpb25zIGFyZSByZXF1aXJlZCB0byBiZSBtYWRlIGltbWVkaWF0ZWx5LCBldmVuXG4gICAgICAgICAqIGJlZm9yZSB0aGUgaHlkcmF0aW9uIG9jY3Vycy5cbiAgICAgICAgICovXG4gICAgICAgIHByZUh5ZHJhdGlvbkJyb3dzZXIgPSB7IGlzOiB7IC4uLmJyb3dzZXIgfSB9XG4gICAgICB9XG5cbiAgICAgIC8qXG4gICAgICAgKiBBbGwgdGhlIGZvbGxvd2luZyBzaG91bGQgYmUgY2xpZW50LXNpZGUgY29ycmVjdGlvbnMgb25seVxuICAgICAgICovXG5cbiAgICAgIGlmIChcbiAgICAgICAgaGFzVG91Y2ggPT09IHRydWVcbiAgICAgICAgJiYgYnJvd3Nlci5tYWMgPT09IHRydWVcbiAgICAgICAgJiYgKFxuICAgICAgICAgIChicm93c2VyLmRlc2t0b3AgPT09IHRydWUgJiYgYnJvd3Nlci5zYWZhcmkgPT09IHRydWUpXG4gICAgICAgICAgfHwgKFxuICAgICAgICAgICAgYnJvd3Nlci5uYXRpdmVNb2JpbGUgPT09IHRydWVcbiAgICAgICAgICAgICYmIGJyb3dzZXIuYW5kcm9pZCAhPT0gdHJ1ZVxuICAgICAgICAgICAgJiYgYnJvd3Nlci5pb3MgIT09IHRydWVcbiAgICAgICAgICAgICYmIGJyb3dzZXIuaXBhZCAhPT0gdHJ1ZVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIENvcnJlY3Rpb24gbmVlZGVkIGZvciBpT1Mgc2luY2UgdGhlIGRlZmF1bHRcbiAgICAgICAgICogc2V0dGluZyBvbiBpUGFkIGlzIHRvIHJlcXVlc3QgZGVza3RvcCB2aWV3OyBpZiB3ZSBoYXZlXG4gICAgICAgICAqIHRvdWNoIHN1cHBvcnQgYW5kIHRoZSB1c2VyIGFnZW50IHNheXMgaXQncyBhXG4gICAgICAgICAqIGRlc2t0b3AsIHdlIGluZmVyIHRoYXQgaXQncyBhbiBpUGhvbmUvaVBhZCB3aXRoIGRlc2t0b3Agdmlld1xuICAgICAgICAgKiBzbyB3ZSBtdXN0IGZpeCB0aGUgZmFsc2UgcG9zaXRpdmVzXG4gICAgICAgICAqL1xuXG4gICAgICAgIGRlbGV0ZSBicm93c2VyLm1hY1xuICAgICAgICBkZWxldGUgYnJvd3Nlci5kZXNrdG9wXG5cbiAgICAgICAgY29uc3QgcGxhdGZvcm0gPSBNYXRoLm1pbih3aW5kb3cuaW5uZXJIZWlnaHQsIHdpbmRvdy5pbm5lcldpZHRoKSA+IDQxNFxuICAgICAgICAgID8gJ2lwYWQnXG4gICAgICAgICAgOiAnaXBob25lJ1xuXG4gICAgICAgIE9iamVjdC5hc3NpZ24oYnJvd3Nlciwge1xuICAgICAgICAgIG1vYmlsZTogdHJ1ZSxcbiAgICAgICAgICBpb3M6IHRydWUsXG4gICAgICAgICAgcGxhdGZvcm0sXG4gICAgICAgICAgWyBwbGF0Zm9ybSBdOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgYnJvd3Nlci5tb2JpbGUgIT09IHRydWVcbiAgICAgICAgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnREYXRhXG4gICAgICAgICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50RGF0YS5tb2JpbGVcbiAgICAgICkge1xuICAgICAgICAvKlxuICAgICAgICAgKiBDb3JyZWN0aW9uIG5lZWRlZCBvbiBjbGllbnQtc2lkZSB3aGVuXG4gICAgICAgICAqIHdlIGFsc28gaGF2ZSB0aGUgbmF2aWdhdG9yIHVzZXJBZ2VudERhdGFcbiAgICAgICAgICovXG5cbiAgICAgICAgZGVsZXRlIGJyb3dzZXIuZGVza3RvcFxuICAgICAgICBicm93c2VyLm1vYmlsZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnJvd3NlclxufVxuXG5jb25zdCB1c2VyQWdlbnQgPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyAnJ1xuICA6IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmFcblxuY29uc3Qgc3NyQ2xpZW50ID0ge1xuICBoYXM6IHtcbiAgICB0b3VjaDogZmFsc2UsXG4gICAgd2ViU3RvcmFnZTogZmFsc2VcbiAgfSxcbiAgd2l0aGluOiB7IGlmcmFtZTogZmFsc2UgfVxufVxuXG4vLyBXZSBleHBvcnQgXCJjbGllbnRcIiBmb3IgaHlkcmF0aW9uIGVycm9yLWZyZWUgcGFydHMsXG4vLyBsaWtlIHRvdWNoIGRpcmVjdGl2ZXMgd2hvIGRvIG5vdCAoYW5kIG11c3QgTk9UKSB3YWl0XG4vLyBmb3IgdGhlIGNsaWVudCB0YWtlb3Zlcjtcbi8vIERvIE5PVCBpbXBvcnQgdGhpcyBkaXJlY3RseSBpbiB5b3VyIGFwcCwgdW5sZXNzIHlvdSByZWFsbHkga25vd1xuLy8gd2hhdCB5b3UgYXJlIGRvaW5nLlxuZXhwb3J0IGNvbnN0IGNsaWVudCA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICA/IHNzckNsaWVudFxuICA6IHtcbiAgICAgIHVzZXJBZ2VudCxcbiAgICAgIGlzOiBnZXRQbGF0Zm9ybSh1c2VyQWdlbnQpLFxuICAgICAgaGFzOiB7XG4gICAgICAgIHRvdWNoOiBoYXNUb3VjaFxuICAgICAgfSxcbiAgICAgIHdpdGhpbjoge1xuICAgICAgICBpZnJhbWU6IHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wXG4gICAgICB9XG4gICAgfVxuXG5jb25zdCBQbGF0Zm9ybSA9IHtcbiAgaW5zdGFsbCAob3B0cykge1xuICAgIGNvbnN0IHsgJHEgfSA9IG9wdHNcblxuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHtcbiAgICAgICRxLnBsYXRmb3JtID0gdGhpcy5wYXJzZVNTUihvcHRzLnNzckNvbnRleHQpXG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUnVudGltZVNzclByZUh5ZHJhdGlvbi52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgLy8gdGFrZW92ZXIgc2hvdWxkIGluY3JlYXNlIGFjY3VyYWN5IGZvclxuICAgICAgLy8gdGhlIHJlc3Qgb2YgdGhlIHByb3BzOyB3ZSBhbHNvIGF2b2lkXG4gICAgICAvLyBoeWRyYXRpb24gZXJyb3JzXG4gICAgICBvcHRzLm9uU1NSSHlkcmF0ZWQucHVzaCgoKSA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oJHEucGxhdGZvcm0sIGNsaWVudClcbiAgICAgICAgaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID0gZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIC8vIHdlIG5lZWQgdG8gbWFrZSBwbGF0Zm9ybSByZWFjdGl2ZVxuICAgICAgLy8gZm9yIHRoZSB0YWtlb3ZlciBwaGFzZVxuICAgICAgJHEucGxhdGZvcm0gPSByZWFjdGl2ZSh0aGlzKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICRxLnBsYXRmb3JtID0gdGhpc1xuICAgIH1cbiAgfVxufVxuXG5pZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gIFBsYXRmb3JtLnBhcnNlU1NSID0gKHNzckNvbnRleHQpID0+IHtcbiAgICBjb25zdCB1c2VyQWdlbnQgPSBzc3JDb250ZXh0LnJlcS5oZWFkZXJzWyAndXNlci1hZ2VudCcgXSB8fCBzc3JDb250ZXh0LnJlcS5oZWFkZXJzWyAnVXNlci1BZ2VudCcgXSB8fCAnJ1xuICAgIHJldHVybiB7XG4gICAgICAuLi5jbGllbnQsXG4gICAgICB1c2VyQWdlbnQsXG4gICAgICBpczogZ2V0UGxhdGZvcm0odXNlckFnZW50KVxuICAgIH1cbiAgfVxufVxuZWxzZSB7XG4gIC8vIGRvIG5vdCBhY2Nlc3Mgd2luZG93LmxvY2FsU3RvcmFnZSB3aXRob3V0XG4gIC8vIGRldmxhbmQgYWN0dWFsbHkgdXNpbmcgaXQgYXMgdGhpcyB3aWxsIGdldFxuICAvLyByZXBvcnRlZCB1bmRlciBcIkNvb2tpZXNcIiBpbiBHb29nbGUgQ2hyb21lXG4gIGxldCBoYXNXZWJTdG9yYWdlXG5cbiAgaW5qZWN0UHJvcChjbGllbnQuaGFzLCAnd2ViU3RvcmFnZScsICgpID0+IHtcbiAgICBpZiAoaGFzV2ViU3RvcmFnZSAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gaGFzV2ViU3RvcmFnZVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgICBoYXNXZWJTdG9yYWdlID0gdHJ1ZVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoXykge31cblxuICAgIGhhc1dlYlN0b3JhZ2UgPSBmYWxzZVxuICAgIHJldHVybiBmYWxzZVxuICB9KVxuXG4gIE9iamVjdC5hc3NpZ24oUGxhdGZvcm0sIGNsaWVudClcblxuICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgLy8gbXVzdCBtYXRjaCB3aXRoIHNlcnZlci1zaWRlIGJlZm9yZVxuICAgIC8vIGNsaWVudCB0YWtpbmcgb3ZlciBpbiBvcmRlciB0byBwcmV2ZW50XG4gICAgLy8gaHlkcmF0aW9uIGVycm9yc1xuICAgIE9iamVjdC5hc3NpZ24oUGxhdGZvcm0sIHByZUh5ZHJhdGlvbkJyb3dzZXIsIHNzckNsaWVudClcblxuICAgIC8vIGZyZWUgdXAgbWVtb3J5XG4gICAgcHJlSHlkcmF0aW9uQnJvd3NlciA9IG51bGxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQbGF0Zm9ybVxuIiwiaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBtYXJrUmF3LCByZWFjdGl2ZSB9IGZyb20gJ3Z1ZSdcbmltcG9ydCB7IGluamVjdFByb3AgfSBmcm9tICcuLi9wcml2YXRlLmluamVjdC1vYmotcHJvcC9pbmplY3Qtb2JqLXByb3AuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQgKHJhdykgeyByZXR1cm4gbWFya1JhdyhkZWZpbmVDb21wb25lbnQocmF3KSkgfVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURpcmVjdGl2ZSAocmF3KSB7IHJldHVybiBtYXJrUmF3KHJhdykgfVxuXG5leHBvcnQgY29uc3QgY3JlYXRlUmVhY3RpdmVQbHVnaW4gPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyAoc3RhdGUsIHBsdWdpbikgPT4ge1xuICAgICAgT2JqZWN0LmFzc2lnbihwbHVnaW4sIHN0YXRlKVxuICAgICAgcmV0dXJuIHBsdWdpblxuICAgIH1cbiAgOiAoc3RhdGUsIHBsdWdpbikgPT4ge1xuICAgICAgY29uc3QgcmVhY3RpdmVTdGF0ZSA9IHJlYWN0aXZlKHN0YXRlKVxuXG4gICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gc3RhdGUpIHtcbiAgICAgICAgaW5qZWN0UHJvcChcbiAgICAgICAgICBwbHVnaW4sXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICAoKSA9PiByZWFjdGl2ZVN0YXRlWyBuYW1lIF0sXG4gICAgICAgICAgdmFsID0+IHsgcmVhY3RpdmVTdGF0ZVsgbmFtZSBdID0gdmFsIH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGx1Z2luXG4gICAgfVxuIiwiZXhwb3J0IGNvbnN0IGxpc3Rlbk9wdHMgPSB7XG4gIGhhc1Bhc3NpdmU6IGZhbHNlLFxuICBwYXNzaXZlQ2FwdHVyZTogdHJ1ZSxcbiAgbm90UGFzc2l2ZUNhcHR1cmU6IHRydWVcbn1cblxudHJ5IHtcbiAgY29uc3Qgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgZ2V0ICgpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24obGlzdGVuT3B0cywge1xuICAgICAgICBoYXNQYXNzaXZlOiB0cnVlLFxuICAgICAgICBwYXNzaXZlOiB7IHBhc3NpdmU6IHRydWUgfSxcbiAgICAgICAgbm90UGFzc2l2ZTogeyBwYXNzaXZlOiBmYWxzZSB9LFxuICAgICAgICBwYXNzaXZlQ2FwdHVyZTogeyBwYXNzaXZlOiB0cnVlLCBjYXB0dXJlOiB0cnVlIH0sXG4gICAgICAgIG5vdFBhc3NpdmVDYXB0dXJlOiB7IHBhc3NpdmU6IGZhbHNlLCBjYXB0dXJlOiB0cnVlIH1cbiAgICAgIH0pXG4gICAgfVxuICB9KVxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncXRlc3QnLCBudWxsLCBvcHRzKVxuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncXRlc3QnLCBudWxsLCBvcHRzKVxufVxuY2F0Y2ggKF8pIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBub29wICgpIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBsZWZ0Q2xpY2sgKGUpIHtcbiAgcmV0dXJuIGUuYnV0dG9uID09PSAwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtaWRkbGVDbGljayAoZSkge1xuICByZXR1cm4gZS5idXR0b24gPT09IDFcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0Q2xpY2sgKGUpIHtcbiAgcmV0dXJuIGUuYnV0dG9uID09PSAyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb3NpdGlvbiAoZSkge1xuICBpZiAoZS50b3VjaGVzICYmIGUudG91Y2hlc1sgMCBdKSB7XG4gICAgZSA9IGUudG91Y2hlc1sgMCBdXG4gIH1cbiAgZWxzZSBpZiAoZS5jaGFuZ2VkVG91Y2hlcyAmJiBlLmNoYW5nZWRUb3VjaGVzWyAwIF0pIHtcbiAgICBlID0gZS5jaGFuZ2VkVG91Y2hlc1sgMCBdXG4gIH1cbiAgZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlc1sgMCBdKSB7XG4gICAgZSA9IGUudGFyZ2V0VG91Y2hlc1sgMCBdXG4gIH1cblxuICByZXR1cm4ge1xuICAgIHRvcDogZS5jbGllbnRZLFxuICAgIGxlZnQ6IGUuY2xpZW50WFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmVudFBhdGggKGUpIHtcbiAgaWYgKGUucGF0aCkge1xuICAgIHJldHVybiBlLnBhdGhcbiAgfVxuICBpZiAoZS5jb21wb3NlZFBhdGgpIHtcbiAgICByZXR1cm4gZS5jb21wb3NlZFBhdGgoKVxuICB9XG5cbiAgY29uc3QgcGF0aCA9IFtdXG4gIGxldCBlbCA9IGUudGFyZ2V0XG5cbiAgd2hpbGUgKGVsKSB7XG4gICAgcGF0aC5wdXNoKGVsKVxuXG4gICAgaWYgKGVsLnRhZ05hbWUgPT09ICdIVE1MJykge1xuICAgICAgcGF0aC5wdXNoKGRvY3VtZW50KVxuICAgICAgcGF0aC5wdXNoKHdpbmRvdylcbiAgICAgIHJldHVybiBwYXRoXG4gICAgfVxuXG4gICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50XG4gIH1cbn1cblxuLy8gUmVhc29uYWJsZSBkZWZhdWx0c1xuY29uc3RcbiAgTElORV9IRUlHSFQgPSA0MCxcbiAgUEFHRV9IRUlHSFQgPSA4MDBcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vdXNlV2hlZWxEaXN0YW5jZSAoZSkge1xuICBsZXQgeCA9IGUuZGVsdGFYLCB5ID0gZS5kZWx0YVlcblxuICBpZiAoKHggfHwgeSkgJiYgZS5kZWx0YU1vZGUpIHtcbiAgICBjb25zdCBtdWx0aXBsaWVyID0gZS5kZWx0YU1vZGUgPT09IDEgPyBMSU5FX0hFSUdIVCA6IFBBR0VfSEVJR0hUXG4gICAgeCAqPSBtdWx0aXBsaWVyXG4gICAgeSAqPSBtdWx0aXBsaWVyXG4gIH1cblxuICBpZiAoZS5zaGlmdEtleSAmJiAheCkge1xuICAgIFsgeSwgeCBdID0gWyB4LCB5IF1cbiAgfVxuXG4gIHJldHVybiB7IHgsIHkgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcCAoZSkge1xuICBlLnN0b3BQcm9wYWdhdGlvbigpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50IChlKSB7XG4gIGUuY2FuY2VsYWJsZSAhPT0gZmFsc2UgJiYgZS5wcmV2ZW50RGVmYXVsdCgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wQW5kUHJldmVudCAoZSkge1xuICBlLmNhbmNlbGFibGUgIT09IGZhbHNlICYmIGUucHJldmVudERlZmF1bHQoKVxuICBlLnN0b3BQcm9wYWdhdGlvbigpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50RHJhZ2dhYmxlIChlbCwgc3RhdHVzKSB7XG4gIGlmIChlbCA9PT0gdm9pZCAwIHx8IChzdGF0dXMgPT09IHRydWUgJiYgZWwuX19kcmFnUHJldmVudGVkID09PSB0cnVlKSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgZm4gPSBzdGF0dXMgPT09IHRydWVcbiAgICA/IGVsID0+IHtcbiAgICAgIGVsLl9fZHJhZ1ByZXZlbnRlZCA9IHRydWVcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHByZXZlbnQsIGxpc3Rlbk9wdHMubm90UGFzc2l2ZUNhcHR1cmUpXG4gICAgfVxuICAgIDogZWwgPT4ge1xuICAgICAgZGVsZXRlIGVsLl9fZHJhZ1ByZXZlbnRlZFxuICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgcHJldmVudCwgbGlzdGVuT3B0cy5ub3RQYXNzaXZlQ2FwdHVyZSlcbiAgICB9XG5cbiAgZWwucXVlcnlTZWxlY3RvckFsbCgnYSwgaW1nJykuZm9yRWFjaChmbilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEV2dCAoY3R4LCB0YXJnZXROYW1lLCBldmVudHMpIHtcbiAgY29uc3QgbmFtZSA9IGBfX3FfJHsgdGFyZ2V0TmFtZSB9X2V2dGBcblxuICBjdHhbIG5hbWUgXSA9IGN0eFsgbmFtZSBdICE9PSB2b2lkIDBcbiAgICA/IGN0eFsgbmFtZSBdLmNvbmNhdChldmVudHMpXG4gICAgOiBldmVudHNcblxuICBldmVudHMuZm9yRWFjaChldnQgPT4ge1xuICAgIGV2dFsgMCBdLmFkZEV2ZW50TGlzdGVuZXIoZXZ0WyAxIF0sIGN0eFsgZXZ0WyAyIF0gXSwgbGlzdGVuT3B0c1sgZXZ0WyAzIF0gXSlcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuRXZ0IChjdHgsIHRhcmdldE5hbWUpIHtcbiAgY29uc3QgbmFtZSA9IGBfX3FfJHsgdGFyZ2V0TmFtZSB9X2V2dGBcblxuICBpZiAoY3R4WyBuYW1lIF0gIT09IHZvaWQgMCkge1xuICAgIGN0eFsgbmFtZSBdLmZvckVhY2goZXZ0ID0+IHtcbiAgICAgIGV2dFsgMCBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0WyAxIF0sIGN0eFsgZXZ0WyAyIF0gXSwgbGlzdGVuT3B0c1sgZXZ0WyAzIF0gXSlcbiAgICB9KVxuICAgIGN0eFsgbmFtZSBdID0gdm9pZCAwXG4gIH1cbn1cblxuLypcbiAqIGFsc28gdXBkYXRlIC90eXBlcy91dGlscy9ldmVudC5kLnRzXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQge1xuICBsaXN0ZW5PcHRzLFxuICBsZWZ0Q2xpY2ssXG4gIG1pZGRsZUNsaWNrLFxuICByaWdodENsaWNrLFxuICBwb3NpdGlvbixcbiAgZ2V0RXZlbnRQYXRoLFxuICBnZXRNb3VzZVdoZWVsRGlzdGFuY2UsXG4gIHN0b3AsXG4gIHByZXZlbnQsXG4gIHN0b3BBbmRQcmV2ZW50LFxuICBwcmV2ZW50RHJhZ2dhYmxlXG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZm4sIHdhaXQgPSAyNTAsIGltbWVkaWF0ZSkge1xuICBsZXQgdGltZXIgPSBudWxsXG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkICgvKiAuLi5hcmdzICovKSB7XG4gICAgY29uc3QgYXJncyA9IGFyZ3VtZW50c1xuXG4gICAgY29uc3QgbGF0ZXIgPSAoKSA9PiB7XG4gICAgICB0aW1lciA9IG51bGxcbiAgICAgIGlmIChpbW1lZGlhdGUgIT09IHRydWUpIHtcbiAgICAgICAgZm4uYXBwbHkodGhpcywgYXJncylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGltZXIgIT09IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICB9XG4gICAgZWxzZSBpZiAoaW1tZWRpYXRlID09PSB0cnVlKSB7XG4gICAgICBmbi5hcHBseSh0aGlzLCBhcmdzKVxuICAgIH1cblxuICAgIHRpbWVyID0gc2V0VGltZW91dChsYXRlciwgd2FpdClcbiAgfVxuXG4gIGRlYm91bmNlZC5jYW5jZWwgPSAoKSA9PiB7XG4gICAgdGltZXIgIT09IG51bGwgJiYgY2xlYXJUaW1lb3V0KHRpbWVyKVxuICB9XG5cbiAgcmV0dXJuIGRlYm91bmNlZFxufVxuIiwiaW1wb3J0IHsgaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLCBjbGllbnQgfSBmcm9tICcuLi9wbGF0Zm9ybS9QbGF0Zm9ybS5qcydcblxuaW1wb3J0IHsgY3JlYXRlUmVhY3RpdmVQbHVnaW4gfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNyZWF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBsaXN0ZW5PcHRzLCBub29wIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQvZXZlbnQuanMnXG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnLi4vLi4vdXRpbHMvZGVib3VuY2UvZGVib3VuY2UuanMnXG5cbmNvbnN0IFNJWkVfTElTVCA9IFsgJ3NtJywgJ21kJywgJ2xnJywgJ3hsJyBdXG5jb25zdCB7IHBhc3NpdmUgfSA9IGxpc3Rlbk9wdHNcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUmVhY3RpdmVQbHVnaW4oe1xuICB3aWR0aDogMCxcbiAgaGVpZ2h0OiAwLFxuICBuYW1lOiAneHMnLFxuXG4gIHNpemVzOiB7XG4gICAgc206IDYwMCxcbiAgICBtZDogMTAyNCxcbiAgICBsZzogMTQ0MCxcbiAgICB4bDogMTkyMFxuICB9LFxuXG4gIGx0OiB7XG4gICAgc206IHRydWUsXG4gICAgbWQ6IHRydWUsXG4gICAgbGc6IHRydWUsXG4gICAgeGw6IHRydWVcbiAgfSxcbiAgZ3Q6IHtcbiAgICB4czogZmFsc2UsXG4gICAgc206IGZhbHNlLFxuICAgIG1kOiBmYWxzZSxcbiAgICBsZzogZmFsc2VcbiAgfSxcblxuICB4czogdHJ1ZSxcbiAgc206IGZhbHNlLFxuICBtZDogZmFsc2UsXG4gIGxnOiBmYWxzZSxcbiAgeGw6IGZhbHNlXG59LCB7XG4gIHNldFNpemVzOiBub29wLFxuICBzZXREZWJvdW5jZTogbm9vcCxcblxuICBpbnN0YWxsICh7ICRxLCBvblNTUkh5ZHJhdGVkIH0pIHtcbiAgICAkcS5zY3JlZW4gPSB0aGlzXG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSByZXR1cm5cblxuICAgIGlmICh0aGlzLl9faW5zdGFsbGVkID09PSB0cnVlKSB7XG4gICAgICBpZiAoJHEuY29uZmlnLnNjcmVlbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGlmICgkcS5jb25maWcuc2NyZWVuLmJvZHlDbGFzc2VzID09PSBmYWxzZSkge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShgc2NyZWVuLS0keyB0aGlzLm5hbWUgfWApXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdGhpcy5fX3VwZGF0ZSh0cnVlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB7IHZpc3VhbFZpZXdwb3J0IH0gPSB3aW5kb3dcbiAgICBjb25zdCB0YXJnZXQgPSB2aXN1YWxWaWV3cG9ydCB8fCB3aW5kb3dcbiAgICBjb25zdCBzY3JvbGxpbmdFbGVtZW50ID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICBjb25zdCBnZXRTaXplID0gdmlzdWFsVmlld3BvcnQgPT09IHZvaWQgMCB8fCBjbGllbnQuaXMubW9iaWxlID09PSB0cnVlXG4gICAgICA/ICgpID0+IFtcbiAgICAgICAgICBNYXRoLm1heCh3aW5kb3cuaW5uZXJXaWR0aCwgc2Nyb2xsaW5nRWxlbWVudC5jbGllbnRXaWR0aCksXG4gICAgICAgICAgTWF0aC5tYXgod2luZG93LmlubmVySGVpZ2h0LCBzY3JvbGxpbmdFbGVtZW50LmNsaWVudEhlaWdodClcbiAgICAgICAgXVxuICAgICAgOiAoKSA9PiBbXG4gICAgICAgICAgdmlzdWFsVmlld3BvcnQud2lkdGggKiB2aXN1YWxWaWV3cG9ydC5zY2FsZSArIHdpbmRvdy5pbm5lcldpZHRoIC0gc2Nyb2xsaW5nRWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAgICAgICB2aXN1YWxWaWV3cG9ydC5oZWlnaHQgKiB2aXN1YWxWaWV3cG9ydC5zY2FsZSArIHdpbmRvdy5pbm5lckhlaWdodCAtIHNjcm9sbGluZ0VsZW1lbnQuY2xpZW50SGVpZ2h0XG4gICAgICAgIF1cblxuICAgIGNvbnN0IGNsYXNzZXMgPSAkcS5jb25maWcuc2NyZWVuPy5ib2R5Q2xhc3NlcyA9PT0gdHJ1ZVxuXG4gICAgdGhpcy5fX3VwZGF0ZSA9IGZvcmNlID0+IHtcbiAgICAgIGNvbnN0IFsgdywgaCBdID0gZ2V0U2l6ZSgpXG5cbiAgICAgIGlmIChoICE9PSB0aGlzLmhlaWdodCkge1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhcbiAgICAgIH1cblxuICAgICAgaWYgKHcgIT09IHRoaXMud2lkdGgpIHtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGZvcmNlICE9PSB0cnVlKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBsZXQgcyA9IHRoaXMuc2l6ZXNcblxuICAgICAgdGhpcy5ndC54cyA9IHcgPj0gcy5zbVxuICAgICAgdGhpcy5ndC5zbSA9IHcgPj0gcy5tZFxuICAgICAgdGhpcy5ndC5tZCA9IHcgPj0gcy5sZ1xuICAgICAgdGhpcy5ndC5sZyA9IHcgPj0gcy54bFxuICAgICAgdGhpcy5sdC5zbSA9IHcgPCBzLnNtXG4gICAgICB0aGlzLmx0Lm1kID0gdyA8IHMubWRcbiAgICAgIHRoaXMubHQubGcgPSB3IDwgcy5sZ1xuICAgICAgdGhpcy5sdC54bCA9IHcgPCBzLnhsXG4gICAgICB0aGlzLnhzID0gdGhpcy5sdC5zbVxuICAgICAgdGhpcy5zbSA9IHRoaXMuZ3QueHMgPT09IHRydWUgJiYgdGhpcy5sdC5tZCA9PT0gdHJ1ZVxuICAgICAgdGhpcy5tZCA9IHRoaXMuZ3Quc20gPT09IHRydWUgJiYgdGhpcy5sdC5sZyA9PT0gdHJ1ZVxuICAgICAgdGhpcy5sZyA9IHRoaXMuZ3QubWQgPT09IHRydWUgJiYgdGhpcy5sdC54bCA9PT0gdHJ1ZVxuICAgICAgdGhpcy54bCA9IHRoaXMuZ3QubGdcblxuICAgICAgcyA9ICh0aGlzLnhzID09PSB0cnVlICYmICd4cycpXG4gICAgICAgIHx8ICh0aGlzLnNtID09PSB0cnVlICYmICdzbScpXG4gICAgICAgIHx8ICh0aGlzLm1kID09PSB0cnVlICYmICdtZCcpXG4gICAgICAgIHx8ICh0aGlzLmxnID09PSB0cnVlICYmICdsZycpXG4gICAgICAgIHx8ICd4bCdcblxuICAgICAgaWYgKHMgIT09IHRoaXMubmFtZSkge1xuICAgICAgICBpZiAoY2xhc3NlcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShgc2NyZWVuLS0keyB0aGlzLm5hbWUgfWApXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKGBzY3JlZW4tLSR7IHMgfWApXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gc1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCB1cGRhdGVFdnQsIHVwZGF0ZVNpemVzID0ge30sIHVwZGF0ZURlYm91bmNlID0gMTZcblxuICAgIHRoaXMuc2V0U2l6ZXMgPSBzaXplcyA9PiB7XG4gICAgICBTSVpFX0xJU1QuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgaWYgKHNpemVzWyBuYW1lIF0gIT09IHZvaWQgMCkge1xuICAgICAgICAgIHVwZGF0ZVNpemVzWyBuYW1lIF0gPSBzaXplc1sgbmFtZSBdXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuc2V0RGVib3VuY2UgPSBkZWIgPT4ge1xuICAgICAgdXBkYXRlRGVib3VuY2UgPSBkZWJcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KVxuXG4gICAgICAvLyBpZiBjc3MgcHJvcHMgYXZhaWxhYmxlXG4gICAgICBpZiAoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnLS1xLXNpemUtc20nKSkge1xuICAgICAgICBTSVpFX0xJU1QuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgICB0aGlzLnNpemVzWyBuYW1lIF0gPSBwYXJzZUludChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKGAtLXEtc2l6ZS0keyBuYW1lIH1gKSwgMTApXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0U2l6ZXMgPSBzaXplcyA9PiB7XG4gICAgICAgIFNJWkVfTElTVC5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICAgIGlmIChzaXplc1sgbmFtZSBdKSB7XG4gICAgICAgICAgICB0aGlzLnNpemVzWyBuYW1lIF0gPSBzaXplc1sgbmFtZSBdXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLl9fdXBkYXRlKHRydWUpXG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0RGVib3VuY2UgPSBkZWxheSA9PiB7XG4gICAgICAgIHVwZGF0ZUV2dCAhPT0gdm9pZCAwICYmIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB1cGRhdGVFdnQsIHBhc3NpdmUpXG4gICAgICAgIHVwZGF0ZUV2dCA9IGRlbGF5ID4gMFxuICAgICAgICAgID8gZGVib3VuY2UodGhpcy5fX3VwZGF0ZSwgZGVsYXkpXG4gICAgICAgICAgOiB0aGlzLl9fdXBkYXRlXG4gICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB1cGRhdGVFdnQsIHBhc3NpdmUpXG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0RGVib3VuY2UodXBkYXRlRGVib3VuY2UpXG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVTaXplcykubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIHRoaXMuc2V0U2l6ZXModXBkYXRlU2l6ZXMpXG4gICAgICAgIHVwZGF0ZVNpemVzID0gdm9pZCAwIC8vIGZyZWUgdXAgbWVtb3J5XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fX3VwZGF0ZSgpXG4gICAgICB9XG5cbiAgICAgIC8vIGR1ZSB0byBvcHRpbWl6YXRpb25zLCB0aGlzIHdvdWxkIGJlIGxlZnQgb3V0IG90aGVyd2lzZVxuICAgICAgY2xhc3NlcyA9PT0gdHJ1ZSAmJiB0aGlzLm5hbWUgPT09ICd4cydcbiAgICAgICAgJiYgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdzY3JlZW4tLXhzJylcbiAgICB9XG5cbiAgICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBvblNTUkh5ZHJhdGVkLnB1c2goc3RhcnQpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc3RhcnQoKVxuICAgIH1cbiAgfVxufSlcbiIsImltcG9ydCB7IGNyZWF0ZVJlYWN0aXZlUGx1Z2luIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5jcmVhdGUvY3JlYXRlLmpzJ1xuXG5jb25zdCBQbHVnaW4gPSBjcmVhdGVSZWFjdGl2ZVBsdWdpbih7XG4gIGlzQWN0aXZlOiBmYWxzZSxcbiAgbW9kZTogZmFsc2Vcbn0sIHtcbiAgX19tZWRpYTogdm9pZCAwLFxuXG4gIHNldCAodmFsKSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykgcmV0dXJuXG5cbiAgICBQbHVnaW4ubW9kZSA9IHZhbFxuXG4gICAgaWYgKHZhbCA9PT0gJ2F1dG8nKSB7XG4gICAgICBpZiAoUGx1Z2luLl9fbWVkaWEgPT09IHZvaWQgMCkge1xuICAgICAgICBQbHVnaW4uX19tZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJylcbiAgICAgICAgUGx1Z2luLl9fdXBkYXRlTWVkaWEgPSAoKSA9PiB7IFBsdWdpbi5zZXQoJ2F1dG8nKSB9XG4gICAgICAgIFBsdWdpbi5fX21lZGlhLmFkZExpc3RlbmVyKFBsdWdpbi5fX3VwZGF0ZU1lZGlhKVxuICAgICAgfVxuXG4gICAgICB2YWwgPSBQbHVnaW4uX19tZWRpYS5tYXRjaGVzXG4gICAgfVxuICAgIGVsc2UgaWYgKFBsdWdpbi5fX21lZGlhICE9PSB2b2lkIDApIHtcbiAgICAgIFBsdWdpbi5fX21lZGlhLnJlbW92ZUxpc3RlbmVyKFBsdWdpbi5fX3VwZGF0ZU1lZGlhKVxuICAgICAgUGx1Z2luLl9fbWVkaWEgPSB2b2lkIDBcbiAgICB9XG5cbiAgICBQbHVnaW4uaXNBY3RpdmUgPSB2YWwgPT09IHRydWVcblxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShgYm9keS0tJHsgdmFsID09PSB0cnVlID8gJ2xpZ2h0JyA6ICdkYXJrJyB9YClcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoYGJvZHktLSR7IHZhbCA9PT0gdHJ1ZSA/ICdkYXJrJyA6ICdsaWdodCcgfWApXG4gIH0sXG5cbiAgdG9nZ2xlICgpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlKSB7XG4gICAgICBQbHVnaW4uc2V0KFBsdWdpbi5pc0FjdGl2ZSA9PT0gZmFsc2UpXG4gICAgfVxuICB9LFxuXG4gIGluc3RhbGwgKHsgJHEsIHNzckNvbnRleHQgfSkge1xuICAgIGNvbnN0IHsgZGFyayB9ID0gJHEuY29uZmlnXG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgICB0aGlzLmlzQWN0aXZlID0gZGFyayA9PT0gdHJ1ZVxuXG4gICAgICAkcS5kYXJrID0ge1xuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICAgIG1vZGU6IGZhbHNlLFxuICAgICAgICBzZXQ6IHZhbCA9PiB7XG4gICAgICAgICAgc3NyQ29udGV4dC5fbWV0YS5ib2R5Q2xhc3NlcyA9IHNzckNvbnRleHQuX21ldGEuYm9keUNsYXNzZXNcbiAgICAgICAgICAgIC5yZXBsYWNlKCcgYm9keS0tbGlnaHQnLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKCcgYm9keS0tZGFyaycsICcnKSArIGAgYm9keS0tJHsgdmFsID09PSB0cnVlID8gJ2RhcmsnIDogJ2xpZ2h0JyB9YFxuXG4gICAgICAgICAgJHEuZGFyay5pc0FjdGl2ZSA9IHZhbCA9PT0gdHJ1ZVxuICAgICAgICAgICRxLmRhcmsubW9kZSA9IHZhbFxuICAgICAgICB9LFxuICAgICAgICB0b2dnbGU6ICgpID0+IHtcbiAgICAgICAgICAkcS5kYXJrLnNldCgkcS5kYXJrLmlzQWN0aXZlID09PSBmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkcS5kYXJrLnNldChkYXJrKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgJHEuZGFyayA9IHRoaXNcblxuICAgIGlmICh0aGlzLl9faW5zdGFsbGVkICE9PSB0cnVlKSB7XG4gICAgICB0aGlzLnNldChkYXJrICE9PSB2b2lkIDAgPyBkYXJrIDogZmFsc2UpXG4gICAgfVxuICB9XG59KVxuXG5leHBvcnQgZGVmYXVsdCBQbHVnaW5cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldENzc1ZhciAocHJvcE5hbWUsIHZhbHVlLCBlbGVtZW50ID0gZG9jdW1lbnQuYm9keSkge1xuICBpZiAodHlwZW9mIHByb3BOYW1lICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgc3RyaW5nIGFzIHByb3BOYW1lJylcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgc3RyaW5nIGFzIHZhbHVlJylcbiAgfVxuICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIERPTSBlbGVtZW50JylcbiAgfVxuXG4gIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoYC0tcS0keyBwcm9wTmFtZSB9YCwgdmFsdWUpXG59XG4iLCJsZXQgbGFzdEtleUNvbXBvc2l0aW9uU3RhdHVzID0gZmFsc2VcblxuZXhwb3J0IGZ1bmN0aW9uIG9uS2V5RG93bkNvbXBvc2l0aW9uIChldnQpIHtcbiAgbGFzdEtleUNvbXBvc2l0aW9uU3RhdHVzID0gZXZ0LmlzQ29tcG9zaW5nID09PSB0cnVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRJZ25vcmVLZXkgKGV2dCkge1xuICByZXR1cm4gbGFzdEtleUNvbXBvc2l0aW9uU3RhdHVzID09PSB0cnVlXG4gICAgfHwgZXZ0ICE9PSBPYmplY3QoZXZ0KVxuICAgIHx8IGV2dC5pc0NvbXBvc2luZyA9PT0gdHJ1ZVxuICAgIHx8IGV2dC5xS2V5RXZlbnQgPT09IHRydWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzS2V5Q29kZSAoZXZ0LCBrZXlDb2Rlcykge1xuICByZXR1cm4gc2hvdWxkSWdub3JlS2V5KGV2dCkgPT09IHRydWVcbiAgICA/IGZhbHNlXG4gICAgOiBbXS5jb25jYXQoa2V5Q29kZXMpLmluY2x1ZGVzKGV2dC5rZXlDb2RlKVxufVxuIiwiaW1wb3J0IHNldENzc1ZhciBmcm9tICcuLi8uLi91dGlscy9jc3MtdmFyL3NldC1jc3MtdmFyLmpzJ1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50L2V2ZW50LmpzJ1xuaW1wb3J0IHsgb25LZXlEb3duQ29tcG9zaXRpb24gfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmtleWJvYXJkL2tleS1jb21wb3NpdGlvbi5qcydcblxuaW1wb3J0IHsgaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLCBjbGllbnQgfSBmcm9tICcuLi9wbGF0Zm9ybS9QbGF0Zm9ybS5qcydcblxuZnVuY3Rpb24gZ2V0TW9iaWxlUGxhdGZvcm0gKGlzKSB7XG4gIGlmIChpcy5pb3MgPT09IHRydWUpIHJldHVybiAnaW9zJ1xuICBpZiAoaXMuYW5kcm9pZCA9PT0gdHJ1ZSkgcmV0dXJuICdhbmRyb2lkJ1xufVxuXG5mdW5jdGlvbiBnZXRCb2R5Q2xhc3NlcyAoeyBpcywgaGFzLCB3aXRoaW4gfSwgY2ZnKSB7XG4gIGNvbnN0IGNscyA9IFtcbiAgICBpcy5kZXNrdG9wID09PSB0cnVlID8gJ2Rlc2t0b3AnIDogJ21vYmlsZScsXG4gICAgYCR7IGhhcy50b3VjaCA9PT0gZmFsc2UgPyAnbm8tJyA6ICcnIH10b3VjaGBcbiAgXVxuXG4gIGlmIChpcy5tb2JpbGUgPT09IHRydWUpIHtcbiAgICBjb25zdCBtb2JpbGUgPSBnZXRNb2JpbGVQbGF0Zm9ybShpcylcbiAgICBtb2JpbGUgIT09IHZvaWQgMCAmJiBjbHMucHVzaCgncGxhdGZvcm0tJyArIG1vYmlsZSlcbiAgfVxuXG4gIGlmIChpcy5uYXRpdmVNb2JpbGUgPT09IHRydWUpIHtcbiAgICBjb25zdCB0eXBlID0gaXMubmF0aXZlTW9iaWxlV3JhcHBlclxuXG4gICAgY2xzLnB1c2godHlwZSlcbiAgICBjbHMucHVzaCgnbmF0aXZlLW1vYmlsZScpXG5cbiAgICBpZiAoXG4gICAgICBpcy5pb3MgPT09IHRydWVcbiAgICAgICYmIChjZmdbIHR5cGUgXSA9PT0gdm9pZCAwIHx8IGNmZ1sgdHlwZSBdLmlvc1N0YXR1c0JhclBhZGRpbmcgIT09IGZhbHNlKVxuICAgICkge1xuICAgICAgY2xzLnB1c2goJ3EtaW9zLXBhZGRpbmcnKVxuICAgIH1cbiAgfVxuICBlbHNlIGlmIChpcy5lbGVjdHJvbiA9PT0gdHJ1ZSkge1xuICAgIGNscy5wdXNoKCdlbGVjdHJvbicpXG4gIH1cbiAgZWxzZSBpZiAoaXMuYmV4ID09PSB0cnVlKSB7XG4gICAgY2xzLnB1c2goJ2JleCcpXG4gIH1cblxuICB3aXRoaW4uaWZyYW1lID09PSB0cnVlICYmIGNscy5wdXNoKCd3aXRoaW4taWZyYW1lJylcblxuICByZXR1cm4gY2xzXG59XG5cbmZ1bmN0aW9uIGFwcGx5Q2xpZW50U3NyQ29ycmVjdGlvbnMgKCkge1xuICBjb25zdCB7IGlzIH0gPSBjbGllbnRcbiAgY29uc3QgY2xhc3NlcyA9IGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lXG5cbiAgY29uc3QgY2xhc3NMaXN0ID0gbmV3IFNldChjbGFzc2VzLnJlcGxhY2UoLyB7Mn0vZywgJyAnKS5zcGxpdCgnICcpKVxuXG4gIGlmIChpcy5uYXRpdmVNb2JpbGUgIT09IHRydWUgJiYgaXMuZWxlY3Ryb24gIT09IHRydWUgJiYgaXMuYmV4ICE9PSB0cnVlKSB7XG4gICAgaWYgKGlzLmRlc2t0b3AgPT09IHRydWUpIHtcbiAgICAgIGNsYXNzTGlzdC5kZWxldGUoJ21vYmlsZScpXG4gICAgICBjbGFzc0xpc3QuZGVsZXRlKCdwbGF0Zm9ybS1pb3MnKVxuICAgICAgY2xhc3NMaXN0LmRlbGV0ZSgncGxhdGZvcm0tYW5kcm9pZCcpXG4gICAgICBjbGFzc0xpc3QuYWRkKCdkZXNrdG9wJylcbiAgICB9XG4gICAgZWxzZSBpZiAoaXMubW9iaWxlID09PSB0cnVlKSB7XG4gICAgICBjbGFzc0xpc3QuZGVsZXRlKCdkZXNrdG9wJylcbiAgICAgIGNsYXNzTGlzdC5hZGQoJ21vYmlsZScpXG5cbiAgICAgIGNsYXNzTGlzdC5kZWxldGUoJ3BsYXRmb3JtLWlvcycpXG4gICAgICBjbGFzc0xpc3QuZGVsZXRlKCdwbGF0Zm9ybS1hbmRyb2lkJylcblxuICAgICAgY29uc3QgbW9iaWxlID0gZ2V0TW9iaWxlUGxhdGZvcm0oaXMpXG4gICAgICBpZiAobW9iaWxlICE9PSB2b2lkIDApIHtcbiAgICAgICAgY2xhc3NMaXN0LmFkZChgcGxhdGZvcm0tJHsgbW9iaWxlIH1gKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChjbGllbnQuaGFzLnRvdWNoID09PSB0cnVlKSB7XG4gICAgY2xhc3NMaXN0LmRlbGV0ZSgnbm8tdG91Y2gnKVxuICAgIGNsYXNzTGlzdC5hZGQoJ3RvdWNoJylcbiAgfVxuXG4gIGlmIChjbGllbnQud2l0aGluLmlmcmFtZSA9PT0gdHJ1ZSkge1xuICAgIGNsYXNzTGlzdC5hZGQoJ3dpdGhpbi1pZnJhbWUnKVxuICB9XG5cbiAgY29uc3QgbmV3Q2xzID0gQXJyYXkuZnJvbShjbGFzc0xpc3QpLmpvaW4oJyAnKVxuXG4gIGlmIChjbGFzc2VzICE9PSBuZXdDbHMpIHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZSA9IG5ld0Nsc1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldENvbG9ycyAoYnJhbmQpIHtcbiAgZm9yIChjb25zdCBjb2xvciBpbiBicmFuZCkge1xuICAgIHNldENzc1Zhcihjb2xvciwgYnJhbmRbIGNvbG9yIF0pXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpbnN0YWxsIChvcHRzKSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgY29uc3QgeyAkcSwgc3NyQ29udGV4dCB9ID0gb3B0c1xuICAgICAgY29uc3QgY2xzID0gZ2V0Qm9keUNsYXNzZXMoJHEucGxhdGZvcm0sICRxLmNvbmZpZylcblxuICAgICAgaWYgKCRxLmNvbmZpZy5zY3JlZW4/LmJvZHlDbGFzcyA9PT0gdHJ1ZSkge1xuICAgICAgICBjbHMucHVzaCgnc2NyZWVuLS14cycpXG4gICAgICB9XG5cbiAgICAgIHNzckNvbnRleHQuX21ldGEuYm9keUNsYXNzZXMgKz0gY2xzLmpvaW4oJyAnKVxuXG4gICAgICBjb25zdCBicmFuZCA9ICRxLmNvbmZpZy5icmFuZFxuICAgICAgaWYgKGJyYW5kICE9PSB2b2lkIDApIHtcbiAgICAgICAgY29uc3QgdmFycyA9IE9iamVjdC5rZXlzKGJyYW5kKVxuICAgICAgICAgIC5tYXAoa2V5ID0+IGAtLXEtJHsga2V5IH06JHsgYnJhbmRbIGtleSBdIH07YClcbiAgICAgICAgICAuam9pbignJylcblxuICAgICAgICBzc3JDb250ZXh0Ll9tZXRhLmVuZGluZ0hlYWRUYWdzICs9IGA8c3R5bGU+OnJvb3R7JHsgdmFycyB9fTwvc3R5bGU+YFxuICAgICAgfVxuXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fX2luc3RhbGxlZCA9PT0gdHJ1ZSkgcmV0dXJuXG5cbiAgICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBhcHBseUNsaWVudFNzckNvcnJlY3Rpb25zKClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCB7ICRxIH0gPSBvcHRzXG5cbiAgICAgICRxLmNvbmZpZy5icmFuZCAhPT0gdm9pZCAwICYmIHNldENvbG9ycygkcS5jb25maWcuYnJhbmQpXG5cbiAgICAgIGNvbnN0IGNscyA9IGdldEJvZHlDbGFzc2VzKGNsaWVudCwgJHEuY29uZmlnKVxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkLmFwcGx5KGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LCBjbHMpXG4gICAgfVxuXG4gICAgaWYgKGNsaWVudC5pcy5pb3MgPT09IHRydWUpIHtcbiAgICAgIC8vIG5lZWRlZCBmb3IgaU9TIGJ1dHRvbiBhY3RpdmUgc3RhdGVcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG5vb3ApXG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleURvd25Db21wb3NpdGlvbiwgdHJ1ZSlcbiAgfVxufVxuIiwiaW1wb3J0IHsgY2xpZW50IH0gZnJvbSAnLi4vcGxhdGZvcm0vUGxhdGZvcm0uanMnXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQvZXZlbnQuanMnXG5cbmNvbnN0IGdldFRydWUgPSAoKSA9PiB0cnVlXG5cbmZ1bmN0aW9uIGZpbHRlckludmFsaWRQYXRoIChwYXRoKSB7XG4gIHJldHVybiB0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZydcbiAgICAmJiBwYXRoICE9PSAnJ1xuICAgICYmIHBhdGggIT09ICcvJ1xuICAgICYmIHBhdGggIT09ICcjLydcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplRXhpdFBhdGggKHBhdGgpIHtcbiAgcGF0aC5zdGFydHNXaXRoKCcjJykgPT09IHRydWUgJiYgKHBhdGggPSBwYXRoLnN1YnN0cmluZygxKSlcbiAgcGF0aC5zdGFydHNXaXRoKCcvJykgPT09IGZhbHNlICYmIChwYXRoID0gJy8nICsgcGF0aClcbiAgcGF0aC5lbmRzV2l0aCgnLycpID09PSB0cnVlICYmIChwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sZW5ndGggLSAxKSlcbiAgcmV0dXJuICcjJyArIHBhdGhcbn1cblxuZnVuY3Rpb24gZ2V0U2hvdWxkRXhpdEZuIChjZmcpIHtcbiAgaWYgKGNmZy5iYWNrQnV0dG9uRXhpdCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gKCkgPT4gZmFsc2VcbiAgfVxuXG4gIGlmIChjZmcuYmFja0J1dHRvbkV4aXQgPT09ICcqJykge1xuICAgIHJldHVybiBnZXRUcnVlXG4gIH1cblxuICAvLyBBZGQgZGVmYXVsdCByb290IHBhdGhcbiAgY29uc3QgZXhpdFBhdGhzID0gWyAnIy8nIF1cblxuICAvLyBBZGQgY3VzdG9tIGV4aXQgcGF0aHNcbiAgQXJyYXkuaXNBcnJheShjZmcuYmFja0J1dHRvbkV4aXQpID09PSB0cnVlICYmIGV4aXRQYXRocy5wdXNoKFxuICAgIC4uLmNmZy5iYWNrQnV0dG9uRXhpdC5maWx0ZXIoZmlsdGVySW52YWxpZFBhdGgpLm1hcChub3JtYWxpemVFeGl0UGF0aClcbiAgKVxuXG4gIHJldHVybiAoKSA9PiBleGl0UGF0aHMuaW5jbHVkZXMod2luZG93LmxvY2F0aW9uLmhhc2gpXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgX19oaXN0b3J5OiBbXSxcbiAgYWRkOiBub29wLFxuICByZW1vdmU6IG5vb3AsXG5cbiAgaW5zdGFsbCAoeyAkcSB9KSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyB8fCB0aGlzLl9faW5zdGFsbGVkID09PSB0cnVlKSByZXR1cm5cblxuICAgIGNvbnN0IHsgY29yZG92YSwgY2FwYWNpdG9yIH0gPSBjbGllbnQuaXNcblxuICAgIGlmIChjb3Jkb3ZhICE9PSB0cnVlICYmIGNhcGFjaXRvciAhPT0gdHJ1ZSkgcmV0dXJuXG5cbiAgICBjb25zdCBxQ29uZiA9ICRxLmNvbmZpZ1sgY29yZG92YSA9PT0gdHJ1ZSA/ICdjb3Jkb3ZhJyA6ICdjYXBhY2l0b3InIF1cblxuICAgIGlmIChxQ29uZj8uYmFja0J1dHRvbiA9PT0gZmFsc2UpIHJldHVyblxuXG4gICAgLy8gaWYgdGhlICdAY2FwYWNpdG9yL2FwcCcgcGx1Z2luIGlzIG5vdCBpbnN0YWxsZWRcbiAgICAvLyB0aGVuIHdlIGdvdCBub3RoaW5nIHRvIGRvXG4gICAgaWYgKFxuICAgICAgLy8gaWYgd2UncmUgb24gQ2FwYWNpdG9yIG1vZGVcbiAgICAgIGNhcGFjaXRvciA9PT0gdHJ1ZVxuICAgICAgLy8gYW5kIGl0J3MgYWxzbyBub3QgaW4gQ2FwYWNpdG9yJ3MgbWFpbiBpbnN0YW5jZVxuICAgICAgJiYgKHdpbmRvdy5DYXBhY2l0b3IgPT09IHZvaWQgMCB8fCB3aW5kb3cuQ2FwYWNpdG9yLlBsdWdpbnMuQXBwID09PSB2b2lkIDApXG4gICAgKSByZXR1cm5cblxuICAgIHRoaXMuYWRkID0gZW50cnkgPT4ge1xuICAgICAgaWYgKGVudHJ5LmNvbmRpdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGVudHJ5LmNvbmRpdGlvbiA9IGdldFRydWVcbiAgICAgIH1cbiAgICAgIHRoaXMuX19oaXN0b3J5LnB1c2goZW50cnkpXG4gICAgfVxuXG4gICAgdGhpcy5yZW1vdmUgPSBlbnRyeSA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuX19oaXN0b3J5LmluZGV4T2YoZW50cnkpXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICB0aGlzLl9faGlzdG9yeS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvdWxkRXhpdCA9IGdldFNob3VsZEV4aXRGbihcbiAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgIHsgYmFja0J1dHRvbkV4aXQ6IHRydWUgfSxcbiAgICAgICAgcUNvbmZcbiAgICAgIClcbiAgICApXG5cbiAgICBjb25zdCBiYWNrSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9faGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLl9faGlzdG9yeVsgdGhpcy5fX2hpc3RvcnkubGVuZ3RoIC0gMSBdXG5cbiAgICAgICAgaWYgKGVudHJ5LmNvbmRpdGlvbigpID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5fX2hpc3RvcnkucG9wKClcbiAgICAgICAgICBlbnRyeS5oYW5kbGVyKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc2hvdWxkRXhpdCgpID09PSB0cnVlKSB7XG4gICAgICAgIG5hdmlnYXRvci5hcHAuZXhpdEFwcCgpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvcmRvdmEgPT09IHRydWUpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgKCkgPT4ge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdiYWNrYnV0dG9uJywgYmFja0hhbmRsZXIsIGZhbHNlKVxuICAgICAgfSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB3aW5kb3cuQ2FwYWNpdG9yLlBsdWdpbnMuQXBwLmFkZExpc3RlbmVyKCdiYWNrQnV0dG9uJywgYmFja0hhbmRsZXIpXG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIGlzb05hbWU6ICdlbi1VUycsXG4gIG5hdGl2ZU5hbWU6ICdFbmdsaXNoIChVUyknLFxuICBsYWJlbDoge1xuICAgIGNsZWFyOiAnQ2xlYXInLFxuICAgIG9rOiAnT0snLFxuICAgIGNhbmNlbDogJ0NhbmNlbCcsXG4gICAgY2xvc2U6ICdDbG9zZScsXG4gICAgc2V0OiAnU2V0JyxcbiAgICBzZWxlY3Q6ICdTZWxlY3QnLFxuICAgIHJlc2V0OiAnUmVzZXQnLFxuICAgIHJlbW92ZTogJ1JlbW92ZScsXG4gICAgdXBkYXRlOiAnVXBkYXRlJyxcbiAgICBjcmVhdGU6ICdDcmVhdGUnLFxuICAgIHNlYXJjaDogJ1NlYXJjaCcsXG4gICAgZmlsdGVyOiAnRmlsdGVyJyxcbiAgICByZWZyZXNoOiAnUmVmcmVzaCcsXG4gICAgZXhwYW5kOiBsYWJlbCA9PiAobGFiZWwgPyBgRXhwYW5kIFwiJHsgbGFiZWwgfVwiYCA6ICdFeHBhbmQnKSxcbiAgICBjb2xsYXBzZTogbGFiZWwgPT4gKGxhYmVsID8gYENvbGxhcHNlIFwiJHsgbGFiZWwgfVwiYCA6ICdDb2xsYXBzZScpXG4gIH0sXG4gIGRhdGU6IHtcbiAgICBkYXlzOiAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyksXG4gICAgZGF5c1Nob3J0OiAnU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0Jy5zcGxpdCgnXycpLFxuICAgIG1vbnRoczogJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyksXG4gICAgbW9udGhzU2hvcnQ6ICdKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYycuc3BsaXQoJ18nKSxcbiAgICBmaXJzdERheU9mV2VlazogMCwgLy8gMC02LCAwIC0gU3VuZGF5LCAxIE1vbmRheSwgLi4uXG4gICAgZm9ybWF0MjRoOiBmYWxzZSxcbiAgICBwbHVyYWxEYXk6ICdkYXlzJyxcbiAgICBwcmV2TW9udGg6ICdQcmV2aW91cyBtb250aCcsXG4gICAgbmV4dE1vbnRoOiAnTmV4dCBtb250aCcsXG4gICAgcHJldlllYXI6ICdQcmV2aW91cyB5ZWFyJyxcbiAgICBuZXh0WWVhcjogJ05leHQgeWVhcicsXG4gICAgdG9kYXk6ICdUb2RheScsXG4gICAgcHJldlJhbmdlWWVhcnM6IHJhbmdlID0+IGBQcmV2aW91cyAkeyByYW5nZSB9IHllYXJzYCxcbiAgICBuZXh0UmFuZ2VZZWFyczogcmFuZ2UgPT4gYE5leHQgJHsgcmFuZ2UgfSB5ZWFyc2BcbiAgfSxcbiAgdGFibGU6IHtcbiAgICBub0RhdGE6ICdObyBkYXRhIGF2YWlsYWJsZScsXG4gICAgbm9SZXN1bHRzOiAnTm8gbWF0Y2hpbmcgcmVjb3JkcyBmb3VuZCcsXG4gICAgbG9hZGluZzogJ0xvYWRpbmcuLi4nLFxuICAgIHNlbGVjdGVkUmVjb3Jkczogcm93cyA9PiAoXG4gICAgICByb3dzID09PSAxXG4gICAgICAgID8gJzEgcmVjb3JkIHNlbGVjdGVkLidcbiAgICAgICAgOiAocm93cyA9PT0gMCA/ICdObycgOiByb3dzKSArICcgcmVjb3JkcyBzZWxlY3RlZC4nXG4gICAgKSxcbiAgICByZWNvcmRzUGVyUGFnZTogJ1JlY29yZHMgcGVyIHBhZ2U6JyxcbiAgICBhbGxSb3dzOiAnQWxsJyxcbiAgICBwYWdpbmF0aW9uOiAoc3RhcnQsIGVuZCwgdG90YWwpID0+IHN0YXJ0ICsgJy0nICsgZW5kICsgJyBvZiAnICsgdG90YWwsXG4gICAgY29sdW1uczogJ0NvbHVtbnMnXG4gIH0sXG4gIHBhZ2luYXRpb246IHtcbiAgICBmaXJzdDogJ0ZpcnN0IHBhZ2UnLFxuICAgIHByZXY6ICdQcmV2aW91cyBwYWdlJyxcbiAgICBuZXh0OiAnTmV4dCBwYWdlJyxcbiAgICBsYXN0OiAnTGFzdCBwYWdlJ1xuICB9LFxuICBlZGl0b3I6IHtcbiAgICB1cmw6ICdVUkwnLFxuICAgIGJvbGQ6ICdCb2xkJyxcbiAgICBpdGFsaWM6ICdJdGFsaWMnLFxuICAgIHN0cmlrZXRocm91Z2g6ICdTdHJpa2V0aHJvdWdoJyxcbiAgICB1bmRlcmxpbmU6ICdVbmRlcmxpbmUnLFxuICAgIHVub3JkZXJlZExpc3Q6ICdVbm9yZGVyZWQgTGlzdCcsXG4gICAgb3JkZXJlZExpc3Q6ICdPcmRlcmVkIExpc3QnLFxuICAgIHN1YnNjcmlwdDogJ1N1YnNjcmlwdCcsXG4gICAgc3VwZXJzY3JpcHQ6ICdTdXBlcnNjcmlwdCcsXG4gICAgaHlwZXJsaW5rOiAnSHlwZXJsaW5rJyxcbiAgICB0b2dnbGVGdWxsc2NyZWVuOiAnVG9nZ2xlIEZ1bGxzY3JlZW4nLFxuICAgIHF1b3RlOiAnUXVvdGUnLFxuICAgIGxlZnQ6ICdMZWZ0IGFsaWduJyxcbiAgICBjZW50ZXI6ICdDZW50ZXIgYWxpZ24nLFxuICAgIHJpZ2h0OiAnUmlnaHQgYWxpZ24nLFxuICAgIGp1c3RpZnk6ICdKdXN0aWZ5IGFsaWduJyxcbiAgICBwcmludDogJ1ByaW50JyxcbiAgICBvdXRkZW50OiAnRGVjcmVhc2UgaW5kZW50YXRpb24nLFxuICAgIGluZGVudDogJ0luY3JlYXNlIGluZGVudGF0aW9uJyxcbiAgICByZW1vdmVGb3JtYXQ6ICdSZW1vdmUgZm9ybWF0dGluZycsXG4gICAgZm9ybWF0dGluZzogJ0Zvcm1hdHRpbmcnLFxuICAgIGZvbnRTaXplOiAnRm9udCBTaXplJyxcbiAgICBhbGlnbjogJ0FsaWduJyxcbiAgICBocjogJ0luc2VydCBIb3Jpem9udGFsIFJ1bGUnLFxuICAgIHVuZG86ICdVbmRvJyxcbiAgICByZWRvOiAnUmVkbycsXG4gICAgaGVhZGluZzE6ICdIZWFkaW5nIDEnLFxuICAgIGhlYWRpbmcyOiAnSGVhZGluZyAyJyxcbiAgICBoZWFkaW5nMzogJ0hlYWRpbmcgMycsXG4gICAgaGVhZGluZzQ6ICdIZWFkaW5nIDQnLFxuICAgIGhlYWRpbmc1OiAnSGVhZGluZyA1JyxcbiAgICBoZWFkaW5nNjogJ0hlYWRpbmcgNicsXG4gICAgcGFyYWdyYXBoOiAnUGFyYWdyYXBoJyxcbiAgICBjb2RlOiAnQ29kZScsXG4gICAgc2l6ZTE6ICdWZXJ5IHNtYWxsJyxcbiAgICBzaXplMjogJ0EgYml0IHNtYWxsJyxcbiAgICBzaXplMzogJ05vcm1hbCcsXG4gICAgc2l6ZTQ6ICdNZWRpdW0tbGFyZ2UnLFxuICAgIHNpemU1OiAnQmlnJyxcbiAgICBzaXplNjogJ1ZlcnkgYmlnJyxcbiAgICBzaXplNzogJ01heGltdW0nLFxuICAgIGRlZmF1bHRGb250OiAnRGVmYXVsdCBGb250JyxcbiAgICB2aWV3U291cmNlOiAnVmlldyBTb3VyY2UnXG4gIH0sXG4gIHRyZWU6IHtcbiAgICBub05vZGVzOiAnTm8gbm9kZXMgYXZhaWxhYmxlJyxcbiAgICBub1Jlc3VsdHM6ICdObyBtYXRjaGluZyBub2RlcyBmb3VuZCdcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlUmVhY3RpdmVQbHVnaW4gfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNyZWF0ZS9jcmVhdGUuanMnXG5cbmltcG9ydCBkZWZhdWx0TGFuZyBmcm9tICcuLi8uLi8uLi9sYW5nL2VuLVVTLmpzJ1xuXG5mdW5jdGlvbiBnZXRMb2NhbGUgKCkge1xuICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSByZXR1cm5cblxuICBjb25zdCB2YWwgPSBBcnJheS5pc0FycmF5KG5hdmlnYXRvci5sYW5ndWFnZXMpID09PSB0cnVlICYmIG5hdmlnYXRvci5sYW5ndWFnZXMubGVuZ3RoICE9PSAwXG4gICAgPyBuYXZpZ2F0b3IubGFuZ3VhZ2VzWyAwIF1cbiAgICA6IG5hdmlnYXRvci5sYW5ndWFnZVxuXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWwuc3BsaXQoL1stX10vKS5tYXAoKHYsIGkpID0+IChcbiAgICAgIGkgPT09IDBcbiAgICAgICAgPyB2LnRvTG93ZXJDYXNlKClcbiAgICAgICAgOiAoXG4gICAgICAgICAgICBpID4gMSB8fCB2Lmxlbmd0aCA8IDRcbiAgICAgICAgICAgICAgPyB2LnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgOiAodlsgMCBdLnRvVXBwZXJDYXNlKCkgKyB2LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgKVxuICAgICkpLmpvaW4oJy0nKVxuICB9XG59XG5cbmNvbnN0IFBsdWdpbiA9IGNyZWF0ZVJlYWN0aXZlUGx1Z2luKHtcbiAgX19xTGFuZzoge31cbn0sIHtcbiAgLy8gcHJvcHM6IG9iamVjdFxuICAvLyBfX2xhbmdDb25maWc6IG9iamVjdFxuXG4gIGdldExvY2FsZSxcblxuICBzZXQgKGxhbmdPYmplY3QgPSBkZWZhdWx0TGFuZywgc3NyQ29udGV4dCkge1xuICAgIGNvbnN0IGxhbmcgPSB7XG4gICAgICAuLi5sYW5nT2JqZWN0LFxuICAgICAgcnRsOiBsYW5nT2JqZWN0LnJ0bCA9PT0gdHJ1ZSxcbiAgICAgIGdldExvY2FsZVxuICAgIH1cblxuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHtcbiAgICAgIGlmIChzc3JDb250ZXh0ID09PSB2b2lkIDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU1NSIEVSUk9SOiBzZWNvbmQgcGFyYW0gcmVxdWlyZWQ6IExhbmcuc2V0KGxhbmcsIHNzckNvbnRleHQpJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGxhbmcuc2V0ID0gc3NyQ29udGV4dC4kcS5sYW5nLnNldFxuXG4gICAgICBpZiAoc3NyQ29udGV4dC4kcS5jb25maWcubGFuZyA9PT0gdm9pZCAwIHx8IHNzckNvbnRleHQuJHEuY29uZmlnLmxhbmcubm9IdG1sQXR0cnMgIT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgZGlyID0gbGFuZy5ydGwgPT09IHRydWUgPyAncnRsJyA6ICdsdHInXG4gICAgICAgIGNvbnN0IGF0dHJzID0gYGxhbmc9JHsgbGFuZy5pc29OYW1lIH0gZGlyPSR7IGRpciB9YFxuXG4gICAgICAgIHNzckNvbnRleHQuX21ldGEuaHRtbEF0dHJzID0gc3NyQ29udGV4dC5fX3FQcmV2TGFuZyAhPT0gdm9pZCAwXG4gICAgICAgICAgPyBzc3JDb250ZXh0Ll9tZXRhLmh0bWxBdHRycy5yZXBsYWNlKHNzckNvbnRleHQuX19xUHJldkxhbmcsIGF0dHJzKVxuICAgICAgICAgIDogYXR0cnNcblxuICAgICAgICBzc3JDb250ZXh0Ll9fcVByZXZMYW5nID0gYXR0cnNcbiAgICAgIH1cblxuICAgICAgc3NyQ29udGV4dC4kcS5sYW5nID0gbGFuZ1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxhbmcuc2V0ID0gUGx1Z2luLnNldFxuXG4gICAgICBpZiAoUGx1Z2luLl9fbGFuZ0NvbmZpZyA9PT0gdm9pZCAwIHx8IFBsdWdpbi5fX2xhbmdDb25maWcubm9IdG1sQXR0cnMgIT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkaXInLCBsYW5nLnJ0bCA9PT0gdHJ1ZSA/ICdydGwnIDogJ2x0cicpXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnbGFuZycsIGxhbmcuaXNvTmFtZSlcbiAgICAgIH1cblxuICAgICAgT2JqZWN0LmFzc2lnbihQbHVnaW4uX19xTGFuZywgbGFuZylcbiAgICB9XG4gIH0sXG5cbiAgaW5zdGFsbCAoeyAkcSwgbGFuZywgc3NyQ29udGV4dCB9KSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgY29uc3QgaW5pdGlhbExhbmcgPSBsYW5nIHx8IGRlZmF1bHRMYW5nXG5cbiAgICAgICRxLmxhbmcgPSB7fVxuICAgICAgJHEubGFuZy5zZXQgPSBsYW5nT2JqZWN0ID0+IHtcbiAgICAgICAgdGhpcy5zZXQobGFuZ09iamVjdCwgc3NyQ29udGV4dClcbiAgICAgIH1cblxuICAgICAgJHEubGFuZy5zZXQoaW5pdGlhbExhbmcpXG5cbiAgICAgIC8vIG9uZS10aW1lIFNTUiBzZXJ2ZXIgb3BlcmF0aW9uXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMucHJvcHMgPT09IHZvaWQgMFxuICAgICAgICB8fCB0aGlzLnByb3BzLmlzb05hbWUgIT09IGluaXRpYWxMYW5nLmlzb05hbWVcbiAgICAgICkge1xuICAgICAgICB0aGlzLnByb3BzID0geyAuLi5pbml0aWFsTGFuZyB9XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgJHEubGFuZyA9IFBsdWdpbi5fX3FMYW5nXG4gICAgICBQbHVnaW4uX19sYW5nQ29uZmlnID0gJHEuY29uZmlnLmxhbmdcblxuICAgICAgaWYgKHRoaXMuX19pbnN0YWxsZWQgPT09IHRydWUpIHtcbiAgICAgICAgbGFuZyAhPT0gdm9pZCAwICYmIHRoaXMuc2V0KGxhbmcpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcyA9IG5ldyBQcm94eSh0aGlzLl9fcUxhbmcsIHtcbiAgICAgICAgICBnZXQgKCkgeyByZXR1cm4gUmVmbGVjdC5nZXQoLi4uYXJndW1lbnRzKSB9LFxuXG4gICAgICAgICAgb3duS2V5cyAodGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldClcbiAgICAgICAgICAgICAgLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnc2V0JyAmJiBrZXkgIT09ICdnZXRMb2NhbGUnKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLnNldChsYW5nIHx8IGRlZmF1bHRMYW5nKVxuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuZXhwb3J0IGRlZmF1bHQgUGx1Z2luXG5leHBvcnQgeyBkZWZhdWx0TGFuZyB9XG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdtYXRlcmlhbC1pY29ucycsXG4gIHR5cGU6IHtcbiAgICBwb3NpdGl2ZTogJ2NoZWNrX2NpcmNsZScsXG4gICAgbmVnYXRpdmU6ICd3YXJuaW5nJyxcbiAgICBpbmZvOiAnaW5mbycsXG4gICAgd2FybmluZzogJ3ByaW9yaXR5X2hpZ2gnXG4gIH0sXG4gIGFycm93OiB7XG4gICAgdXA6ICdhcnJvd191cHdhcmQnLFxuICAgIHJpZ2h0OiAnYXJyb3dfZm9yd2FyZCcsXG4gICAgZG93bjogJ2Fycm93X2Rvd253YXJkJyxcbiAgICBsZWZ0OiAnYXJyb3dfYmFjaycsXG4gICAgZHJvcGRvd246ICdhcnJvd19kcm9wX2Rvd24nXG4gIH0sXG4gIGNoZXZyb246IHtcbiAgICBsZWZ0OiAnY2hldnJvbl9sZWZ0JyxcbiAgICByaWdodDogJ2NoZXZyb25fcmlnaHQnXG4gIH0sXG4gIGNvbG9yUGlja2VyOiB7XG4gICAgc3BlY3RydW06ICdncmFkaWVudCcsXG4gICAgdHVuZTogJ3R1bmUnLFxuICAgIHBhbGV0dGU6ICdzdHlsZSdcbiAgfSxcbiAgcHVsbFRvUmVmcmVzaDoge1xuICAgIGljb246ICdyZWZyZXNoJ1xuICB9LFxuICBjYXJvdXNlbDoge1xuICAgIGxlZnQ6ICdjaGV2cm9uX2xlZnQnLFxuICAgIHJpZ2h0OiAnY2hldnJvbl9yaWdodCcsXG4gICAgdXA6ICdrZXlib2FyZF9hcnJvd191cCcsXG4gICAgZG93bjogJ2tleWJvYXJkX2Fycm93X2Rvd24nLFxuICAgIG5hdmlnYXRpb25JY29uOiAnbGVucydcbiAgfSxcbiAgY2hpcDoge1xuICAgIHJlbW92ZTogJ2NhbmNlbCcsXG4gICAgc2VsZWN0ZWQ6ICdjaGVjaydcbiAgfSxcbiAgZGF0ZXRpbWU6IHtcbiAgICBhcnJvd0xlZnQ6ICdjaGV2cm9uX2xlZnQnLFxuICAgIGFycm93UmlnaHQ6ICdjaGV2cm9uX3JpZ2h0JyxcbiAgICBub3c6ICdhY2Nlc3NfdGltZScsXG4gICAgdG9kYXk6ICd0b2RheSdcbiAgfSxcbiAgZWRpdG9yOiB7XG4gICAgYm9sZDogJ2Zvcm1hdF9ib2xkJyxcbiAgICBpdGFsaWM6ICdmb3JtYXRfaXRhbGljJyxcbiAgICBzdHJpa2V0aHJvdWdoOiAnc3RyaWtldGhyb3VnaF9zJyxcbiAgICB1bmRlcmxpbmU6ICdmb3JtYXRfdW5kZXJsaW5lZCcsXG4gICAgdW5vcmRlcmVkTGlzdDogJ2Zvcm1hdF9saXN0X2J1bGxldGVkJyxcbiAgICBvcmRlcmVkTGlzdDogJ2Zvcm1hdF9saXN0X251bWJlcmVkJyxcbiAgICBzdWJzY3JpcHQ6ICd2ZXJ0aWNhbF9hbGlnbl9ib3R0b20nLFxuICAgIHN1cGVyc2NyaXB0OiAndmVydGljYWxfYWxpZ25fdG9wJyxcbiAgICBoeXBlcmxpbms6ICdsaW5rJyxcbiAgICB0b2dnbGVGdWxsc2NyZWVuOiAnZnVsbHNjcmVlbicsXG4gICAgcXVvdGU6ICdmb3JtYXRfcXVvdGUnLFxuICAgIGxlZnQ6ICdmb3JtYXRfYWxpZ25fbGVmdCcsXG4gICAgY2VudGVyOiAnZm9ybWF0X2FsaWduX2NlbnRlcicsXG4gICAgcmlnaHQ6ICdmb3JtYXRfYWxpZ25fcmlnaHQnLFxuICAgIGp1c3RpZnk6ICdmb3JtYXRfYWxpZ25fanVzdGlmeScsXG4gICAgcHJpbnQ6ICdwcmludCcsXG4gICAgb3V0ZGVudDogJ2Zvcm1hdF9pbmRlbnRfZGVjcmVhc2UnLFxuICAgIGluZGVudDogJ2Zvcm1hdF9pbmRlbnRfaW5jcmVhc2UnLFxuICAgIHJlbW92ZUZvcm1hdDogJ2Zvcm1hdF9jbGVhcicsXG4gICAgZm9ybWF0dGluZzogJ3RleHRfZm9ybWF0JyxcbiAgICBmb250U2l6ZTogJ2Zvcm1hdF9zaXplJyxcbiAgICBhbGlnbjogJ2Zvcm1hdF9hbGlnbl9sZWZ0JyxcbiAgICBocjogJ3JlbW92ZScsXG4gICAgdW5kbzogJ3VuZG8nLFxuICAgIHJlZG86ICdyZWRvJyxcbiAgICBoZWFkaW5nOiAnZm9ybWF0X3NpemUnLFxuICAgIGNvZGU6ICdjb2RlJyxcbiAgICBzaXplOiAnZm9ybWF0X3NpemUnLFxuICAgIGZvbnQ6ICdmb250X2Rvd25sb2FkJyxcbiAgICB2aWV3U291cmNlOiAnY29kZSdcbiAgfSxcbiAgZXhwYW5zaW9uSXRlbToge1xuICAgIGljb246ICdrZXlib2FyZF9hcnJvd19kb3duJyxcbiAgICBkZW5zZUljb246ICdhcnJvd19kcm9wX2Rvd24nXG4gIH0sXG4gIGZhYjoge1xuICAgIGljb246ICdhZGQnLFxuICAgIGFjdGl2ZUljb246ICdjbG9zZSdcbiAgfSxcbiAgZmllbGQ6IHtcbiAgICBjbGVhcjogJ2NhbmNlbCcsXG4gICAgZXJyb3I6ICdlcnJvcidcbiAgfSxcbiAgcGFnaW5hdGlvbjoge1xuICAgIGZpcnN0OiAnZmlyc3RfcGFnZScsXG4gICAgcHJldjogJ2tleWJvYXJkX2Fycm93X2xlZnQnLFxuICAgIG5leHQ6ICdrZXlib2FyZF9hcnJvd19yaWdodCcsXG4gICAgbGFzdDogJ2xhc3RfcGFnZSdcbiAgfSxcbiAgcmF0aW5nOiB7XG4gICAgaWNvbjogJ2dyYWRlJ1xuICB9LFxuICBzdGVwcGVyOiB7XG4gICAgZG9uZTogJ2NoZWNrJyxcbiAgICBhY3RpdmU6ICdlZGl0JyxcbiAgICBlcnJvcjogJ3dhcm5pbmcnXG4gIH0sXG4gIHRhYnM6IHtcbiAgICBsZWZ0OiAnY2hldnJvbl9sZWZ0JyxcbiAgICByaWdodDogJ2NoZXZyb25fcmlnaHQnLFxuICAgIHVwOiAna2V5Ym9hcmRfYXJyb3dfdXAnLFxuICAgIGRvd246ICdrZXlib2FyZF9hcnJvd19kb3duJ1xuICB9LFxuICB0YWJsZToge1xuICAgIGFycm93VXA6ICdhcnJvd191cHdhcmQnLFxuICAgIHdhcm5pbmc6ICd3YXJuaW5nJyxcbiAgICBmaXJzdFBhZ2U6ICdmaXJzdF9wYWdlJyxcbiAgICBwcmV2UGFnZTogJ2NoZXZyb25fbGVmdCcsXG4gICAgbmV4dFBhZ2U6ICdjaGV2cm9uX3JpZ2h0JyxcbiAgICBsYXN0UGFnZTogJ2xhc3RfcGFnZSdcbiAgfSxcbiAgdHJlZToge1xuICAgIGljb246ICdwbGF5X2Fycm93J1xuICB9LFxuICB1cGxvYWRlcjoge1xuICAgIGRvbmU6ICdkb25lJyxcbiAgICBjbGVhcjogJ2NsZWFyJyxcbiAgICBhZGQ6ICdhZGRfYm94JyxcbiAgICB1cGxvYWQ6ICdjbG91ZF91cGxvYWQnLFxuICAgIHJlbW92ZVF1ZXVlOiAnY2xlYXJfYWxsJyxcbiAgICByZW1vdmVVcGxvYWRlZDogJ2RvbmVfYWxsJ1xuICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVSZWFjdGl2ZVBsdWdpbiB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuY3JlYXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGluamVjdFByb3AgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmluamVjdC1vYmotcHJvcC9pbmplY3Qtb2JqLXByb3AuanMnXG5cbmltcG9ydCBtYXRlcmlhbEljb25zIGZyb20gJy4uLy4uLy4uL2ljb24tc2V0L21hdGVyaWFsLWljb25zLmpzJ1xuXG5jb25zdCBQbHVnaW4gPSBjcmVhdGVSZWFjdGl2ZVBsdWdpbih7XG4gIGljb25NYXBGbjogbnVsbCxcbiAgX19xSWNvblNldDoge31cbn0sIHtcbiAgLy8gcHJvcHM6IG9iamVjdFxuXG4gIHNldCAoc2V0T2JqZWN0LCBzc3JDb250ZXh0KSB7XG4gICAgY29uc3QgZGVmID0geyAuLi5zZXRPYmplY3QgfVxuXG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgaWYgKHNzckNvbnRleHQgPT09IHZvaWQgMCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTU1IgRVJST1I6IHNlY29uZCBwYXJhbSByZXF1aXJlZDogSWNvblNldC5zZXQoaWNvblNldCwgc3NyQ29udGV4dCknKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgZGVmLnNldCA9IHNzckNvbnRleHQuJHEuaWNvblNldC5zZXRcbiAgICAgIE9iamVjdC5hc3NpZ24oc3NyQ29udGV4dC4kcS5pY29uU2V0LCBkZWYpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGVmLnNldCA9IFBsdWdpbi5zZXRcbiAgICAgIE9iamVjdC5hc3NpZ24oUGx1Z2luLl9fcUljb25TZXQsIGRlZilcbiAgICB9XG4gIH0sXG5cbiAgaW5zdGFsbCAoeyAkcSwgaWNvblNldCwgc3NyQ29udGV4dCB9KSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgY29uc3QgaW5pdGlhbFNldCA9IGljb25TZXQgfHwgbWF0ZXJpYWxJY29uc1xuXG4gICAgICAkcS5pY29uTWFwRm4gPSBzc3JDb250ZXh0LiRxLmNvbmZpZy5pY29uTWFwRm4gfHwgdGhpcy5pY29uTWFwRm4gfHwgbnVsbFxuICAgICAgJHEuaWNvblNldCA9IHt9XG4gICAgICAkcS5pY29uU2V0LnNldCA9IHNldE9iamVjdCA9PiB7XG4gICAgICAgIHRoaXMuc2V0KHNldE9iamVjdCwgc3NyQ29udGV4dClcbiAgICAgIH1cblxuICAgICAgJHEuaWNvblNldC5zZXQoaW5pdGlhbFNldClcblxuICAgICAgLy8gb25lLXRpbWUgU1NSIHNlcnZlciBvcGVyYXRpb25cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5wcm9wcyA9PT0gdm9pZCAwXG4gICAgICAgIHx8IHRoaXMucHJvcHMubmFtZSAhPT0gaW5pdGlhbFNldC5uYW1lXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHsgLi4uaW5pdGlhbFNldCB9XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKCRxLmNvbmZpZy5pY29uTWFwRm4gIT09IHZvaWQgMCkge1xuICAgICAgICB0aGlzLmljb25NYXBGbiA9ICRxLmNvbmZpZy5pY29uTWFwRm5cbiAgICAgIH1cblxuICAgICAgJHEuaWNvblNldCA9IHRoaXMuX19xSWNvblNldFxuICAgICAgaW5qZWN0UHJvcCgkcSwgJ2ljb25NYXBGbicsICgpID0+IHRoaXMuaWNvbk1hcEZuLCB2YWwgPT4geyB0aGlzLmljb25NYXBGbiA9IHZhbCB9KVxuXG4gICAgICBpZiAodGhpcy5fX2luc3RhbGxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICBpY29uU2V0ICE9PSB2b2lkIDAgJiYgdGhpcy5zZXQoaWNvblNldClcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzID0gbmV3IFByb3h5KHRoaXMuX19xSWNvblNldCwge1xuICAgICAgICAgIGdldCAoKSB7IHJldHVybiBSZWZsZWN0LmdldCguLi5hcmd1bWVudHMpIH0sXG5cbiAgICAgICAgICBvd25LZXlzICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModGFyZ2V0KVxuICAgICAgICAgICAgICAuZmlsdGVyKGtleSA9PiBrZXkgIT09ICdzZXQnKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLnNldChpY29uU2V0IHx8IG1hdGVyaWFsSWNvbnMpXG4gICAgICB9XG4gICAgfVxuICB9XG59KVxuXG5leHBvcnQgZGVmYXVsdCBQbHVnaW5cbiIsImV4cG9ydCBjb25zdCBxdWFzYXJLZXkgPSAnX3FfJ1xuZXhwb3J0IGNvbnN0IHRpbWVsaW5lS2V5ID0gJ19xX3RfJ1xuZXhwb3J0IGNvbnN0IHN0ZXBwZXJLZXkgPSAnX3Ffc18nXG5leHBvcnQgY29uc3QgbGF5b3V0S2V5ID0gJ19xX2xfJ1xuZXhwb3J0IGNvbnN0IHBhZ2VDb250YWluZXJLZXkgPSAnX3FfcGNfJ1xuZXhwb3J0IGNvbnN0IGZhYktleSA9ICdfcV9mXydcbmV4cG9ydCBjb25zdCBmb3JtS2V5ID0gJ19xX2ZvXydcbmV4cG9ydCBjb25zdCB0YWJzS2V5ID0gJ19xX3RhYnNfJ1xuZXhwb3J0IGNvbnN0IHVwbG9hZGVyS2V5ID0gJ19xX3VfJ1xuXG5leHBvcnQgZnVuY3Rpb24gZW1wdHlSZW5kZXJGbiAoKSB7fVxuIiwiZXhwb3J0IGNvbnN0IGdsb2JhbENvbmZpZyA9IHt9XG5leHBvcnQgbGV0IGdsb2JhbENvbmZpZ0lzRnJvemVuID0gZmFsc2VcblxuZXhwb3J0IGZ1bmN0aW9uIGZyZWV6ZUdsb2JhbENvbmZpZyAoKSB7XG4gIGdsb2JhbENvbmZpZ0lzRnJvemVuID0gdHJ1ZVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGlzRGVlcEVxdWFsIChhLCBiKSB7XG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmIChhICE9PSBudWxsICYmIGIgIT09IG51bGwgJiYgdHlwZW9mIGEgPT09ICdvYmplY3QnICYmIHR5cGVvZiBiID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChhLmNvbnN0cnVjdG9yICE9PSBiLmNvbnN0cnVjdG9yKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBsZXQgbGVuZ3RoLCBpXG5cbiAgICBpZiAoYS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoXG5cbiAgICAgIGlmIChsZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgICAgaWYgKGlzRGVlcEVxdWFsKGFbIGkgXSwgYlsgaSBdKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGEuY29uc3RydWN0b3IgPT09IE1hcCkge1xuICAgICAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBsZXQgaXRlciA9IGEuZW50cmllcygpXG5cbiAgICAgIGkgPSBpdGVyLm5leHQoKVxuICAgICAgd2hpbGUgKGkuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICBpZiAoYi5oYXMoaS52YWx1ZVsgMCBdKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGkgPSBpdGVyLm5leHQoKVxuICAgICAgfVxuXG4gICAgICBpdGVyID0gYS5lbnRyaWVzKClcbiAgICAgIGkgPSBpdGVyLm5leHQoKVxuICAgICAgd2hpbGUgKGkuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICBpZiAoaXNEZWVwRXF1YWwoaS52YWx1ZVsgMSBdLCBiLmdldChpLnZhbHVlWyAwIF0pKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGkgPSBpdGVyLm5leHQoKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChhLmNvbnN0cnVjdG9yID09PSBTZXQpIHtcbiAgICAgIGlmIChhLnNpemUgIT09IGIuc2l6ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgY29uc3QgaXRlciA9IGEuZW50cmllcygpXG5cbiAgICAgIGkgPSBpdGVyLm5leHQoKVxuICAgICAgd2hpbGUgKGkuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICBpZiAoYi5oYXMoaS52YWx1ZVsgMCBdKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGkgPSBpdGVyLm5leHQoKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChhLmJ1ZmZlciAhPSBudWxsICYmIGEuYnVmZmVyLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcikge1xuICAgICAgbGVuZ3RoID0gYS5sZW5ndGhcblxuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgICBpZiAoYVsgaSBdICE9PSBiWyBpIF0pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChhLmNvbnN0cnVjdG9yID09PSBSZWdFeHApIHtcbiAgICAgIHJldHVybiBhLnNvdXJjZSA9PT0gYi5zb3VyY2UgJiYgYS5mbGFncyA9PT0gYi5mbGFnc1xuICAgIH1cblxuICAgIGlmIChhLnZhbHVlT2YgIT09IE9iamVjdC5wcm90b3R5cGUudmFsdWVPZikge1xuICAgICAgcmV0dXJuIGEudmFsdWVPZigpID09PSBiLnZhbHVlT2YoKVxuICAgIH1cblxuICAgIGlmIChhLnRvU3RyaW5nICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKSB7XG4gICAgICByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKClcbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYSkuZmlsdGVyKGtleSA9PiBhWyBrZXkgXSAhPT0gdm9pZCAwKVxuICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoXG5cbiAgICBpZiAobGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5maWx0ZXIoa2V5ID0+IGJbIGtleSBdICE9PSB2b2lkIDApLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KSB7XG4gICAgICBjb25zdCBrZXkgPSBrZXlzWyBpIF1cbiAgICAgIGlmIChpc0RlZXBFcXVhbChhWyBrZXkgXSwgYlsga2V5IF0pICE9PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyB0cnVlIGlmIGJvdGggTmFOLCBmYWxzZSBvdGhlcndpc2VcbiAgcmV0dXJuIGEgIT09IGEgJiYgYiAhPT0gYiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuXG4vLyBub3QgcGVyZmVjdCwgYnV0IHdoYXQgd2UgQVJFIGludGVyZXN0ZWQgaXMgZm9yIEFycmF5cyBub3QgdG8gc2xpcCBpblxuLy8gYXMgc3ByZWFkIG9wZXJhdG9yIHdpbGwgbWVzcyB0aGluZ3MgdXAgaW4gdmFyaW91cyBhcmVhc1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0ICh2KSB7XG4gIHJldHVybiB2ICE9PSBudWxsICYmIHR5cGVvZiB2ID09PSAnb2JqZWN0JyAmJiBBcnJheS5pc0FycmF5KHYpICE9PSB0cnVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGUgKHYpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2KSA9PT0gJ1tvYmplY3QgRGF0ZV0nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlZ2V4cCAodikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHYpID09PSAnW29iamVjdCBSZWdFeHBdJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIgKHYpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2KVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGRlZXBFcXVhbDogaXNEZWVwRXF1YWwsXG4gIG9iamVjdDogaXNPYmplY3QsXG4gIGRhdGU6IGlzRGF0ZSxcbiAgcmVnZXhwOiBpc1JlZ2V4cCxcbiAgbnVtYmVyOiBpc051bWJlclxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQXBwIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUGxhdGZvcm0sIHsgaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uIH0gZnJvbSAnLi9wbHVnaW5zL3BsYXRmb3JtL1BsYXRmb3JtLmpzJ1xuaW1wb3J0IFNjcmVlbiBmcm9tICcuL3BsdWdpbnMvc2NyZWVuL1NjcmVlbi5qcydcbmltcG9ydCBEYXJrIGZyb20gJy4vcGx1Z2lucy9kYXJrL0RhcmsuanMnXG5pbXBvcnQgQm9keSBmcm9tICcuL3BsdWdpbnMvcHJpdmF0ZS5ib2R5L0JvZHkuanMnXG5pbXBvcnQgSGlzdG9yeSBmcm9tICcuL3BsdWdpbnMvcHJpdmF0ZS5oaXN0b3J5L0hpc3RvcnkuanMnXG5pbXBvcnQgTGFuZyBmcm9tICcuL3BsdWdpbnMvbGFuZy9MYW5nLmpzJ1xuaW1wb3J0IEljb25TZXQgZnJvbSAnLi9wbHVnaW5zL2ljb24tc2V0L0ljb25TZXQuanMnXG5cbmltcG9ydCB7IHF1YXNhcktleSB9IGZyb20gJy4vdXRpbHMvcHJpdmF0ZS5zeW1ib2xzL3N5bWJvbHMuanMnXG5pbXBvcnQgeyBnbG9iYWxDb25maWcsIGdsb2JhbENvbmZpZ0lzRnJvemVuLCBmcmVlemVHbG9iYWxDb25maWcgfSBmcm9tICcuL3V0aWxzL3ByaXZhdGUuY29uZmlnL2luc3RhbmNlLWNvbmZpZy5qcydcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi91dGlscy9pcy9pcy5qcydcblxuLyoqXG4gKiBJZiB0aGUgbGlzdCBiZWxvdyBjaGFuZ2VzLCBtYWtlIHN1cmVcbiAqIHRvIGFsc28gZWRpdCAvdWkvdGVzdGluZy9zcGVjcy9nZW5lcmF0b3JzL2dlbmVyYXRvci5wbHVnaW4uanNcbiAqIG9uIHRoZSBcImF1dG9JbnN0YWxsZWRQbHVnaW5zXCIgYXJyYXlcbiAqL1xuY29uc3QgYXV0b0luc3RhbGxlZFBsdWdpbnMgPSBbXG4gIFBsYXRmb3JtLFxuICBCb2R5LFxuICBEYXJrLFxuICBTY3JlZW4sXG4gIEhpc3RvcnksXG4gIExhbmcsXG4gIEljb25TZXRcbl1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNoaWxkQXBwIChhcHBDZmcsIHBhcmVudEFwcCkge1xuICBjb25zdCBhcHAgPSBjcmVhdGVBcHAoYXBwQ2ZnKVxuXG4gIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcyA9IHBhcmVudEFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllc1xuXG4gIGNvbnN0IHsgcmVsb2FkLCAuLi5hcHBDb250ZXh0IH0gPSBwYXJlbnRBcHAuX2NvbnRleHRcbiAgT2JqZWN0LmFzc2lnbihhcHAuX2NvbnRleHQsIGFwcENvbnRleHQpXG5cbiAgcmV0dXJuIGFwcFxufVxuXG5mdW5jdGlvbiBpbnN0YWxsUGx1Z2lucyAocGx1Z2luT3B0cywgcGx1Z2luTGlzdCkge1xuICBwbHVnaW5MaXN0LmZvckVhY2goUGx1Z2luID0+IHtcbiAgICBQbHVnaW4uaW5zdGFsbChwbHVnaW5PcHRzKVxuICAgIFBsdWdpbi5fX2luc3RhbGxlZCA9IHRydWVcbiAgfSlcbn1cblxuZnVuY3Rpb24gcHJlcGFyZUFwcCAoYXBwLCB1aU9wdHMsIHBsdWdpbk9wdHMpIHtcbiAgYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRxID0gcGx1Z2luT3B0cy4kcVxuICBhcHAucHJvdmlkZShxdWFzYXJLZXksIHBsdWdpbk9wdHMuJHEpXG5cbiAgaW5zdGFsbFBsdWdpbnMocGx1Z2luT3B0cywgYXV0b0luc3RhbGxlZFBsdWdpbnMpXG5cbiAgdWlPcHRzLmNvbXBvbmVudHMgIT09IHZvaWQgMCAmJiBPYmplY3QudmFsdWVzKHVpT3B0cy5jb21wb25lbnRzKS5mb3JFYWNoKGMgPT4ge1xuICAgIGlmIChpc09iamVjdChjKSA9PT0gdHJ1ZSAmJiBjLm5hbWUgIT09IHZvaWQgMCkge1xuICAgICAgYXBwLmNvbXBvbmVudChjLm5hbWUsIGMpXG4gICAgfVxuICB9KVxuXG4gIHVpT3B0cy5kaXJlY3RpdmVzICE9PSB2b2lkIDAgJiYgT2JqZWN0LnZhbHVlcyh1aU9wdHMuZGlyZWN0aXZlcykuZm9yRWFjaChkID0+IHtcbiAgICBpZiAoaXNPYmplY3QoZCkgPT09IHRydWUgJiYgZC5uYW1lICE9PSB2b2lkIDApIHtcbiAgICAgIGFwcC5kaXJlY3RpdmUoZC5uYW1lLCBkKVxuICAgIH1cbiAgfSlcblxuICB1aU9wdHMucGx1Z2lucyAhPT0gdm9pZCAwICYmIGluc3RhbGxQbHVnaW5zKFxuICAgIHBsdWdpbk9wdHMsXG4gICAgT2JqZWN0LnZhbHVlcyh1aU9wdHMucGx1Z2lucykuZmlsdGVyKFxuICAgICAgcCA9PiB0eXBlb2YgcC5pbnN0YWxsID09PSAnZnVuY3Rpb24nICYmIGF1dG9JbnN0YWxsZWRQbHVnaW5zLmluY2x1ZGVzKHApID09PSBmYWxzZVxuICAgIClcbiAgKVxuXG4gIGlmIChpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24udmFsdWUgPT09IHRydWUpIHtcbiAgICBwbHVnaW5PcHRzLiRxLm9uU1NSSHlkcmF0ZWQgPSAoKSA9PiB7XG4gICAgICBwbHVnaW5PcHRzLm9uU1NSSHlkcmF0ZWQuZm9yRWFjaChmbiA9PiB7IGZuKCkgfSlcbiAgICAgIHBsdWdpbk9wdHMuJHEub25TU1JIeWRyYXRlZCA9ICgpID0+IHt9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICA/IGZ1bmN0aW9uIChwYXJlbnRBcHAsIG9wdHMgPSB7fSwgc3NyQ29udGV4dCkge1xuICAgIGNvbnN0ICRxID0ge1xuICAgICAgdmVyc2lvbjogX19RVUFTQVJfVkVSU0lPTl9fLFxuICAgICAgY29uZmlnOiBvcHRzLmNvbmZpZyB8fCB7fVxuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24oc3NyQ29udGV4dCwge1xuICAgICAgJHEsXG4gICAgICBfbWV0YToge1xuICAgICAgICBodG1sQXR0cnM6ICcnLFxuICAgICAgICBoZWFkVGFnczogJycsXG4gICAgICAgIGVuZGluZ0hlYWRUYWdzOiAnJyxcbiAgICAgICAgYm9keUNsYXNzZXM6ICcnLFxuICAgICAgICBib2R5QXR0cnM6ICdkYXRhLXNlcnZlci1yZW5kZXJlZCcsXG4gICAgICAgIGJvZHlUYWdzOiAnJ1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoc3NyQ29udGV4dC5fbW9kdWxlcyA9PT0gdm9pZCAwKSB7XG4gICAgICAvLyBub3QgT0suIG1lYW5zIHRoZSBTU1IgYnVpbGQgaXMgbm90IHVzaW5nIEBxdWFzYXIvc3NyLWhlbHBlcnMsXG4gICAgICAvLyBidXQgd2Ugc2hvdWxkbid0IGNyYXNoIHRoZSBhcHBcbiAgICAgIHNzckNvbnRleHQuX21vZHVsZXMgPSBbXVxuICAgIH1cblxuICAgIGlmIChzc3JDb250ZXh0Lm9uUmVuZGVyZWQgPT09IHZvaWQgMCkge1xuICAgICAgLy8gbm90IE9LLiBtZWFucyB0aGUgU1NSIGJ1aWxkIGlzIG5vdCB1c2luZyBAcXVhc2FyL3Nzci1oZWxwZXJzLFxuICAgICAgLy8gYnV0IHdlIHNob3VsZG4ndCBjcmFzaCB0aGUgYXBwXG4gICAgICBzc3JDb250ZXh0Lm9uUmVuZGVyZWQgPSAoKSA9PiB7fVxuICAgIH1cblxuICAgIHBhcmVudEFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy5zc3JDb250ZXh0ID0gc3NyQ29udGV4dFxuXG4gICAgcHJlcGFyZUFwcChwYXJlbnRBcHAsIG9wdHMsIHtcbiAgICAgIHBhcmVudEFwcCxcbiAgICAgICRxLFxuICAgICAgbGFuZzogb3B0cy5sYW5nLFxuICAgICAgaWNvblNldDogb3B0cy5pY29uU2V0LFxuICAgICAgc3NyQ29udGV4dFxuICAgIH0pXG4gIH1cbiAgOiBmdW5jdGlvbiAocGFyZW50QXBwLCBvcHRzID0ge30pIHtcbiAgICBjb25zdCAkcSA9IHsgdmVyc2lvbjogX19RVUFTQVJfVkVSU0lPTl9fIH1cblxuICAgIGlmIChnbG9iYWxDb25maWdJc0Zyb3plbiA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChvcHRzLmNvbmZpZyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oZ2xvYmFsQ29uZmlnLCBvcHRzLmNvbmZpZylcbiAgICAgIH1cblxuICAgICAgJHEuY29uZmlnID0geyAuLi5nbG9iYWxDb25maWcgfVxuICAgICAgZnJlZXplR2xvYmFsQ29uZmlnKClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAkcS5jb25maWcgPSBvcHRzLmNvbmZpZyB8fCB7fVxuICAgIH1cblxuICAgIHByZXBhcmVBcHAocGFyZW50QXBwLCBvcHRzLCB7XG4gICAgICBwYXJlbnRBcHAsXG4gICAgICAkcSxcbiAgICAgIGxhbmc6IG9wdHMubGFuZyxcbiAgICAgIGljb25TZXQ6IG9wdHMuaWNvblNldCxcbiAgICAgIG9uU1NSSHlkcmF0ZWQ6IFtdXG4gICAgfSlcbiAgfVxuIiwiaW1wb3J0IGluc3RhbGxRdWFzYXIgZnJvbSAnLi9pbnN0YWxsLXF1YXNhci5qcydcbmltcG9ydCBMYW5nIGZyb20gJy4vcGx1Z2lucy9sYW5nL0xhbmcuanMnXG5pbXBvcnQgSWNvblNldCBmcm9tICcuL3BsdWdpbnMvaWNvbi1zZXQvSWNvblNldC5qcydcblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnUXVhc2FyJyxcbiAgdmVyc2lvbjogX19RVUFTQVJfVkVSU0lPTl9fLFxuXG4gIGluc3RhbGw6IGluc3RhbGxRdWFzYXIsXG5cbiAgLy8gVE9ETzogcmVtb3ZlIGluIFF2MyAoc2hvdWxkIG9ubHkgYmUgdXNlZCB0aHJvdWdoIHRoZSBwbHVnaW4pXG4gIC8vIFdlIHByb3ZpZGUgYSBkZXByZWNhdGVkIGZhbGxiYWNrIGhlcmVcbiAgbGFuZzogTGFuZyxcblxuICAvLyBUT0RPOiByZW1vdmUgaW4gUXYzIChzaG91bGQgb25seSBiZSB1c2VkIHRocm91Z2ggdGhlIHBsdWdpbilcbiAgLy8gV2UgcHJvdmlkZSBhIGRlcHJlY2F0ZWQgZmFsbGJhY2sgaGVyZVxuICBpY29uU2V0OiBJY29uU2V0XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0RGV2dG9vbHNHbG9iYWxIb29rKCkge1xuICAgIHJldHVybiBnZXRUYXJnZXQoKS5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIG5hdmlnYXRvciBhbmQgd2luZG93cyBhcmUgbm90IGF2YWlsYWJsZSBpbiBhbGwgZW52aXJvbm1lbnRzXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgPyB3aW5kb3dcbiAgICAgICAgOiB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gZ2xvYmFsVGhpc1xuICAgICAgICAgICAgOiB7fTtcbn1cbmV4cG9ydCBjb25zdCBpc1Byb3h5QXZhaWxhYmxlID0gdHlwZW9mIFByb3h5ID09PSAnZnVuY3Rpb24nO1xuIiwiZXhwb3J0IGNvbnN0IEhPT0tfU0VUVVAgPSAnZGV2dG9vbHMtcGx1Z2luOnNldHVwJztcbmV4cG9ydCBjb25zdCBIT09LX1BMVUdJTl9TRVRUSU5HU19TRVQgPSAncGx1Z2luOnNldHRpbmdzOnNldCc7XG4iLCJsZXQgc3VwcG9ydGVkO1xubGV0IHBlcmY7XG5leHBvcnQgZnVuY3Rpb24gaXNQZXJmb3JtYW5jZVN1cHBvcnRlZCgpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHN1cHBvcnRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucGVyZm9ybWFuY2UpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcGVyZiA9IHdpbmRvdy5wZXJmb3JtYW5jZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmICgoX2EgPSBnbG9iYWxUaGlzLnBlcmZfaG9va3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wZXJmb3JtYW5jZSkpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcGVyZiA9IGdsb2JhbFRoaXMucGVyZl9ob29rcy5wZXJmb3JtYW5jZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3VwcG9ydGVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vdygpIHtcbiAgICByZXR1cm4gaXNQZXJmb3JtYW5jZVN1cHBvcnRlZCgpID8gcGVyZi5ub3coKSA6IERhdGUubm93KCk7XG59XG4iLCJpbXBvcnQgeyBIT09LX1BMVUdJTl9TRVRUSU5HU19TRVQgfSBmcm9tICcuL2NvbnN0LmpzJztcbmltcG9ydCB7IG5vdyB9IGZyb20gJy4vdGltZS5qcyc7XG5leHBvcnQgY2xhc3MgQXBpUHJveHkge1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbiwgaG9vaykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMudGFyZ2V0UXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5vblF1ZXVlID0gW107XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmhvb2sgPSBob29rO1xuICAgICAgICBjb25zdCBkZWZhdWx0U2V0dGluZ3MgPSB7fTtcbiAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpZCBpbiBwbHVnaW4uc2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcGx1Z2luLnNldHRpbmdzW2lkXTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0U2V0dGluZ3NbaWRdID0gaXRlbS5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxTZXR0aW5nc1NhdmVJZCA9IGBfX3Z1ZS1kZXZ0b29scy1wbHVnaW4tc2V0dGluZ3NfXyR7cGx1Z2luLmlkfWA7XG4gICAgICAgIGxldCBjdXJyZW50U2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0U2V0dGluZ3MpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmF3ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obG9jYWxTZXR0aW5nc1NhdmVJZCk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyYXcpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJyZW50U2V0dGluZ3MsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBub29wXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBnZXRTZXR0aW5ncygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFNldHRpbmdzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFNldHRpbmdzKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTZXR0aW5nc1NhdmVJZCwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm9vcFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50U2V0dGluZ3MgPSB2YWx1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBub3coKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGhvb2spIHtcbiAgICAgICAgICAgIGhvb2sub24oSE9PS19QTFVHSU5fU0VUVElOR1NfU0VULCAocGx1Z2luSWQsIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpbklkID09PSB0aGlzLnBsdWdpbi5pZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZhbGxiYWNrcy5zZXRTZXR0aW5ncyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm94aWVkT24gPSBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgICAgIGdldDogKF90YXJnZXQsIHByb3ApID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm9uW3Byb3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBwcm9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm94aWVkVGFyZ2V0ID0gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgICAgICBnZXQ6IChfdGFyZ2V0LCBwcm9wKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRhcmdldFtwcm9wXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvcCA9PT0gJ29uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm94aWVkT247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKE9iamVjdC5rZXlzKHRoaXMuZmFsbGJhY2tzKS5pbmNsdWRlcyhwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBwcm9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZTogKCkgPT4geyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mYWxsYmFja3NbcHJvcF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UXVldWUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcHJvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZXRSZWFsVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMub25RdWV1ZSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQub25baXRlbS5tZXRob2RdKC4uLml0ZW0uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMudGFyZ2V0UXVldWUpIHtcbiAgICAgICAgICAgIGl0ZW0ucmVzb2x2ZShhd2FpdCB0aGlzLnRhcmdldFtpdGVtLm1ldGhvZF0oLi4uaXRlbS5hcmdzKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXREZXZ0b29sc0dsb2JhbEhvb2ssIGdldFRhcmdldCwgaXNQcm94eUF2YWlsYWJsZSB9IGZyb20gJy4vZW52LmpzJztcbmltcG9ydCB7IEhPT0tfU0VUVVAgfSBmcm9tICcuL2NvbnN0LmpzJztcbmltcG9ydCB7IEFwaVByb3h5IH0gZnJvbSAnLi9wcm94eS5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2FwaS9pbmRleC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3BsdWdpbi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3RpbWUuanMnO1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwRGV2dG9vbHNQbHVnaW4ocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbikge1xuICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBwbHVnaW5EZXNjcmlwdG9yO1xuICAgIGNvbnN0IHRhcmdldCA9IGdldFRhcmdldCgpO1xuICAgIGNvbnN0IGhvb2sgPSBnZXREZXZ0b29sc0dsb2JhbEhvb2soKTtcbiAgICBjb25zdCBlbmFibGVQcm94eSA9IGlzUHJveHlBdmFpbGFibGUgJiYgZGVzY3JpcHRvci5lbmFibGVFYXJseVByb3h5O1xuICAgIGlmIChob29rICYmICh0YXJnZXQuX19WVUVfREVWVE9PTFNfUExVR0lOX0FQSV9BVkFJTEFCTEVfXyB8fCAhZW5hYmxlUHJveHkpKSB7XG4gICAgICAgIGhvb2suZW1pdChIT09LX1NFVFVQLCBwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHByb3h5ID0gZW5hYmxlUHJveHkgPyBuZXcgQXBpUHJveHkoZGVzY3JpcHRvciwgaG9vaykgOiBudWxsO1xuICAgICAgICBjb25zdCBsaXN0ID0gdGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX1BMVUdJTlNfXyA9IHRhcmdldC5fX1ZVRV9ERVZUT09MU19QTFVHSU5TX18gfHwgW107XG4gICAgICAgIGxpc3QucHVzaCh7XG4gICAgICAgICAgICBwbHVnaW5EZXNjcmlwdG9yOiBkZXNjcmlwdG9yLFxuICAgICAgICAgICAgc2V0dXBGbixcbiAgICAgICAgICAgIHByb3h5LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHByb3h5KSB7XG4gICAgICAgICAgICBzZXR1cEZuKHByb3h5LnByb3hpZWRUYXJnZXQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyohXG4gICogdnVlLXJvdXRlciB2NC41LjFcbiAgKiAoYykgMjAyNSBFZHVhcmRvIFNhbiBNYXJ0aW4gTW9yb3RlXG4gICogQGxpY2Vuc2UgTUlUXG4gICovXG5pbXBvcnQgeyBnZXRDdXJyZW50SW5zdGFuY2UsIGluamVjdCwgb25Vbm1vdW50ZWQsIG9uRGVhY3RpdmF0ZWQsIG9uQWN0aXZhdGVkLCBjb21wdXRlZCwgdW5yZWYsIHdhdGNoRWZmZWN0LCBkZWZpbmVDb21wb25lbnQsIHJlYWN0aXZlLCBoLCBwcm92aWRlLCByZWYsIHdhdGNoLCBzaGFsbG93UmVmLCBzaGFsbG93UmVhY3RpdmUsIG5leHRUaWNrIH0gZnJvbSAndnVlJztcbmltcG9ydCB7IHNldHVwRGV2dG9vbHNQbHVnaW4gfSBmcm9tICdAdnVlL2RldnRvb2xzLWFwaSc7XG5cbmNvbnN0IGlzQnJvd3NlciA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8qKlxuICogQWxsb3dzIGRpZmZlcmVudGlhdGluZyBsYXp5IGNvbXBvbmVudHMgZnJvbSBmdW5jdGlvbmFsIGNvbXBvbmVudHMgYW5kIHZ1ZS1jbGFzcy1jb21wb25lbnRcbiAqIEBpbnRlcm5hbFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gaXNSb3V0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBjb21wb25lbnQgPT09ICdvYmplY3QnIHx8XG4gICAgICAgICdkaXNwbGF5TmFtZScgaW4gY29tcG9uZW50IHx8XG4gICAgICAgICdwcm9wcycgaW4gY29tcG9uZW50IHx8XG4gICAgICAgICdfX3ZjY09wdHMnIGluIGNvbXBvbmVudCk7XG59XG5mdW5jdGlvbiBpc0VTTW9kdWxlKG9iaikge1xuICAgIHJldHVybiAob2JqLl9fZXNNb2R1bGUgfHxcbiAgICAgICAgb2JqW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNb2R1bGUnIHx8XG4gICAgICAgIC8vIHN1cHBvcnQgQ0Ygd2l0aCBkeW5hbWljIGltcG9ydHMgdGhhdCBkbyBub3RcbiAgICAgICAgLy8gYWRkIHRoZSBNb2R1bGUgc3RyaW5nIHRhZ1xuICAgICAgICAob2JqLmRlZmF1bHQgJiYgaXNSb3V0ZUNvbXBvbmVudChvYmouZGVmYXVsdCkpKTtcbn1cbmNvbnN0IGFzc2lnbiA9IE9iamVjdC5hc3NpZ247XG5mdW5jdGlvbiBhcHBseVRvUGFyYW1zKGZuLCBwYXJhbXMpIHtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbXNba2V5XTtcbiAgICAgICAgbmV3UGFyYW1zW2tleV0gPSBpc0FycmF5KHZhbHVlKVxuICAgICAgICAgICAgPyB2YWx1ZS5tYXAoZm4pXG4gICAgICAgICAgICA6IGZuKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1BhcmFtcztcbn1cbmNvbnN0IG5vb3AgPSAoKSA9PiB7IH07XG4vKipcbiAqIFR5cGVzYWZlIGFsdGVybmF0aXZlIHRvIEFycmF5LmlzQXJyYXlcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9wdWxsLzQ4MjI4XG4gKi9cbmNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG5mdW5jdGlvbiB3YXJuKG1zZykge1xuICAgIC8vIGF2b2lkIHVzaW5nIC4uLmFyZ3MgYXMgaXQgYnJlYWtzIGluIG9sZGVyIEVkZ2UgYnVpbGRzXG4gICAgY29uc3QgYXJncyA9IEFycmF5LmZyb20oYXJndW1lbnRzKS5zbGljZSgxKTtcbiAgICBjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSwgWydbVnVlIFJvdXRlciB3YXJuXTogJyArIG1zZ10uY29uY2F0KGFyZ3MpKTtcbn1cblxuLyoqXG4gKiBFbmNvZGluZyBSdWxlcyAo4pCjID0gU3BhY2UpXG4gKiAtIFBhdGg6IOKQoyBcIiA8ID4gIyA/IHsgfVxuICogLSBRdWVyeTog4pCjIFwiIDwgPiAjICYgPVxuICogLSBIYXNoOiDikKMgXCIgPCA+IGBcbiAqXG4gKiBPbiB0b3Agb2YgdGhhdCwgdGhlIFJGQzM5ODYgKGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3NlY3Rpb24tMi4yKVxuICogZGVmaW5lcyBzb21lIGV4dHJhIGNoYXJhY3RlcnMgdG8gYmUgZW5jb2RlZC4gTW9zdCBicm93c2VycyBkbyBub3QgZW5jb2RlIHRoZW1cbiAqIGluIGVuY29kZVVSSSBodHRwczovL2dpdGh1Yi5jb20vd2hhdHdnL3VybC9pc3N1ZXMvMzY5LCBzbyBpdCBtYXkgYmUgc2FmZXIgdG9cbiAqIGFsc28gZW5jb2RlIGAhJygpKmAuIExlYXZpbmcgdW4tZW5jb2RlZCBvbmx5IEFTQ0lJIGFscGhhbnVtZXJpYyhgYS16QS1aMC05YClcbiAqIHBsdXMgYC0uX35gLiBUaGlzIGV4dHJhIHNhZmV0eSBzaG91bGQgYmUgYXBwbGllZCB0byBxdWVyeSBieSBwYXRjaGluZyB0aGVcbiAqIHN0cmluZyByZXR1cm5lZCBieSBlbmNvZGVVUklDb21wb25lbnQgZW5jb2RlVVJJIGFsc28gZW5jb2RlcyBgW1xcXV5gLiBgXFxgXG4gKiBzaG91bGQgYmUgZW5jb2RlZCB0byBhdm9pZCBhbWJpZ3VpdHkuIEJyb3dzZXJzIChJRSwgRkYsIEMpIHRyYW5zZm9ybSBhIGBcXGBcbiAqIGludG8gYSBgL2AgaWYgZGlyZWN0bHkgdHlwZWQgaW4uIFRoZSBfYmFja3RpY2tfIChgYGBgYCkgc2hvdWxkIGFsc28gYmVcbiAqIGVuY29kZWQgZXZlcnl3aGVyZSBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgbGlrZSBGRiBlbmNvZGUgaXQgd2hlbiBkaXJlY3RseVxuICogd3JpdHRlbiB3aGlsZSBvdGhlcnMgZG9uJ3QuIFNhZmFyaSBhbmQgSUUgZG9uJ3QgZW5jb2RlIGBgXCI8Pnt9YGBgIGluIGhhc2guXG4gKi9cbi8vIGNvbnN0IEVYVFJBX1JFU0VSVkVEX1JFID0gL1shJygpKl0vZ1xuLy8gY29uc3QgZW5jb2RlUmVzZXJ2ZWRSZXBsYWNlciA9IChjOiBzdHJpbmcpID0+ICclJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNilcbmNvbnN0IEhBU0hfUkUgPSAvIy9nOyAvLyAlMjNcbmNvbnN0IEFNUEVSU0FORF9SRSA9IC8mL2c7IC8vICUyNlxuY29uc3QgU0xBU0hfUkUgPSAvXFwvL2c7IC8vICUyRlxuY29uc3QgRVFVQUxfUkUgPSAvPS9nOyAvLyAlM0RcbmNvbnN0IElNX1JFID0gL1xcPy9nOyAvLyAlM0ZcbmNvbnN0IFBMVVNfUkUgPSAvXFwrL2c7IC8vICUyQlxuLyoqXG4gKiBOT1RFOiBJdCdzIG5vdCBjbGVhciB0byBtZSBpZiB3ZSBzaG91bGQgZW5jb2RlIHRoZSArIHN5bWJvbCBpbiBxdWVyaWVzLCBpdFxuICogc2VlbXMgdG8gYmUgbGVzcyBmbGV4aWJsZSB0aGFuIG5vdCBkb2luZyBzbyBhbmQgSSBjYW4ndCBmaW5kIG91dCB0aGUgbGVnYWN5XG4gKiBzeXN0ZW1zIHJlcXVpcmluZyB0aGlzIGZvciByZWd1bGFyIHJlcXVlc3RzIGxpa2UgdGV4dC9odG1sLiBJbiB0aGUgc3RhbmRhcmQsXG4gKiB0aGUgZW5jb2Rpbmcgb2YgdGhlIHBsdXMgY2hhcmFjdGVyIGlzIG9ubHkgbWVudGlvbmVkIGZvclxuICogYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXG4gKiAoaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmxlbmNvZGVkLXBhcnNpbmcpIGFuZCBtb3N0IGJyb3dzZXJzIHNlZW1zIGxvXG4gKiBsZWF2ZSB0aGUgcGx1cyBjaGFyYWN0ZXIgYXMgaXMgaW4gcXVlcmllcy4gVG8gYmUgbW9yZSBmbGV4aWJsZSwgd2UgYWxsb3cgdGhlXG4gKiBwbHVzIGNoYXJhY3RlciBvbiB0aGUgcXVlcnksIGJ1dCBpdCBjYW4gYWxzbyBiZSBtYW51YWxseSBlbmNvZGVkIGJ5IHRoZSB1c2VyLlxuICpcbiAqIFJlc291cmNlczpcbiAqIC0gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmxlbmNvZGVkLXBhcnNpbmdcbiAqIC0gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYzNDI3MS91cmwtZW5jb2RpbmctdGhlLXNwYWNlLWNoYXJhY3Rlci1vci0yMFxuICovXG5jb25zdCBFTkNfQlJBQ0tFVF9PUEVOX1JFID0gLyU1Qi9nOyAvLyBbXG5jb25zdCBFTkNfQlJBQ0tFVF9DTE9TRV9SRSA9IC8lNUQvZzsgLy8gXVxuY29uc3QgRU5DX0NBUkVUX1JFID0gLyU1RS9nOyAvLyBeXG5jb25zdCBFTkNfQkFDS1RJQ0tfUkUgPSAvJTYwL2c7IC8vIGBcbmNvbnN0IEVOQ19DVVJMWV9PUEVOX1JFID0gLyU3Qi9nOyAvLyB7XG5jb25zdCBFTkNfUElQRV9SRSA9IC8lN0MvZzsgLy8gfFxuY29uc3QgRU5DX0NVUkxZX0NMT1NFX1JFID0gLyU3RC9nOyAvLyB9XG5jb25zdCBFTkNfU1BBQ0VfUkUgPSAvJTIwL2c7IC8vIH1cbi8qKlxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIHBhdGgsIHNlYXJjaCBhbmQgaGFzaFxuICogc2VjdGlvbnMgb2YgdGhlIFVSTC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxuICogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gY29tbW9uRW5jb2RlKHRleHQpIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJKCcnICsgdGV4dClcbiAgICAgICAgLnJlcGxhY2UoRU5DX1BJUEVfUkUsICd8JylcbiAgICAgICAgLnJlcGxhY2UoRU5DX0JSQUNLRVRfT1BFTl9SRSwgJ1snKVxuICAgICAgICAucmVwbGFjZShFTkNfQlJBQ0tFVF9DTE9TRV9SRSwgJ10nKTtcbn1cbi8qKlxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIGhhc2ggc2VjdGlvbiBvZiB0aGUgVVJMLlxuICpcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxuICogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gZW5jb2RlSGFzaCh0ZXh0KSB7XG4gICAgcmV0dXJuIGNvbW1vbkVuY29kZSh0ZXh0KVxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfT1BFTl9SRSwgJ3snKVxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfQ0xPU0VfUkUsICd9JylcbiAgICAgICAgLnJlcGxhY2UoRU5DX0NBUkVUX1JFLCAnXicpO1xufVxuLyoqXG4gKiBFbmNvZGUgY2hhcmFjdGVycyB0aGF0IG5lZWQgdG8gYmUgZW5jb2RlZCBxdWVyeSB2YWx1ZXMgb24gdGhlIHF1ZXJ5XG4gKiBzZWN0aW9uIG9mIHRoZSBVUkwuXG4gKlxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiBlbmNvZGVRdWVyeVZhbHVlKHRleHQpIHtcbiAgICByZXR1cm4gKGNvbW1vbkVuY29kZSh0ZXh0KVxuICAgICAgICAvLyBFbmNvZGUgdGhlIHNwYWNlIGFzICssIGVuY29kZSB0aGUgKyB0byBkaWZmZXJlbnRpYXRlIGl0IGZyb20gdGhlIHNwYWNlXG4gICAgICAgIC5yZXBsYWNlKFBMVVNfUkUsICclMkInKVxuICAgICAgICAucmVwbGFjZShFTkNfU1BBQ0VfUkUsICcrJylcbiAgICAgICAgLnJlcGxhY2UoSEFTSF9SRSwgJyUyMycpXG4gICAgICAgIC5yZXBsYWNlKEFNUEVSU0FORF9SRSwgJyUyNicpXG4gICAgICAgIC5yZXBsYWNlKEVOQ19CQUNLVElDS19SRSwgJ2AnKVxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfT1BFTl9SRSwgJ3snKVxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfQ0xPU0VfUkUsICd9JylcbiAgICAgICAgLnJlcGxhY2UoRU5DX0NBUkVUX1JFLCAnXicpKTtcbn1cbi8qKlxuICogTGlrZSBgZW5jb2RlUXVlcnlWYWx1ZWAgYnV0IGFsc28gZW5jb2RlcyB0aGUgYD1gIGNoYXJhY3Rlci5cbiAqXG4gKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBlbmNvZGVcbiAqL1xuZnVuY3Rpb24gZW5jb2RlUXVlcnlLZXkodGV4dCkge1xuICAgIHJldHVybiBlbmNvZGVRdWVyeVZhbHVlKHRleHQpLnJlcGxhY2UoRVFVQUxfUkUsICclM0QnKTtcbn1cbi8qKlxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIHBhdGggc2VjdGlvbiBvZiB0aGUgVVJMLlxuICpcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxuICogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gZW5jb2RlUGF0aCh0ZXh0KSB7XG4gICAgcmV0dXJuIGNvbW1vbkVuY29kZSh0ZXh0KS5yZXBsYWNlKEhBU0hfUkUsICclMjMnKS5yZXBsYWNlKElNX1JFLCAnJTNGJyk7XG59XG4vKipcbiAqIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIG9uIHRoZSBwYXRoIHNlY3Rpb24gb2YgdGhlIFVSTCBhcyBhXG4gKiBwYXJhbS4gVGhpcyBmdW5jdGlvbiBlbmNvZGVzIGV2ZXJ5dGhpbmcge0BsaW5rIGVuY29kZVBhdGh9IGRvZXMgcGx1cyB0aGVcbiAqIHNsYXNoIChgL2ApIGNoYXJhY3Rlci4gSWYgYHRleHRgIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgcmV0dXJucyBhbiBlbXB0eVxuICogc3RyaW5nIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiBlbmNvZGVQYXJhbSh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQgPT0gbnVsbCA/ICcnIDogZW5jb2RlUGF0aCh0ZXh0KS5yZXBsYWNlKFNMQVNIX1JFLCAnJTJGJyk7XG59XG4vKipcbiAqIERlY29kZSB0ZXh0IHVzaW5nIGBkZWNvZGVVUklDb21wb25lbnRgLiBSZXR1cm5zIHRoZSBvcmlnaW5hbCB0ZXh0IGlmIGl0XG4gKiBmYWlscy5cbiAqXG4gKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBkZWNvZGVcbiAqIEByZXR1cm5zIGRlY29kZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGRlY29kZSh0ZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCgnJyArIHRleHQpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBFcnJvciBkZWNvZGluZyBcIiR7dGV4dH1cIi4gVXNpbmcgb3JpZ2luYWwgdmFsdWVgKTtcbiAgICB9XG4gICAgcmV0dXJuICcnICsgdGV4dDtcbn1cblxuY29uc3QgVFJBSUxJTkdfU0xBU0hfUkUgPSAvXFwvJC87XG5jb25zdCByZW1vdmVUcmFpbGluZ1NsYXNoID0gKHBhdGgpID0+IHBhdGgucmVwbGFjZShUUkFJTElOR19TTEFTSF9SRSwgJycpO1xuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgVVJJIGludG8gYSBub3JtYWxpemVkIGhpc3RvcnkgbG9jYXRpb25cbiAqXG4gKiBAcGFyYW0gcGFyc2VRdWVyeVxuICogQHBhcmFtIGxvY2F0aW9uIC0gVVJJIHRvIG5vcm1hbGl6ZVxuICogQHBhcmFtIGN1cnJlbnRMb2NhdGlvbiAtIGN1cnJlbnQgYWJzb2x1dGUgbG9jYXRpb24uIEFsbG93cyByZXNvbHZpbmcgcmVsYXRpdmVcbiAqIHBhdGhzLiBNdXN0IHN0YXJ0IHdpdGggYC9gLiBEZWZhdWx0cyB0byBgL2BcbiAqIEByZXR1cm5zIGEgbm9ybWFsaXplZCBoaXN0b3J5IGxvY2F0aW9uXG4gKi9cbmZ1bmN0aW9uIHBhcnNlVVJMKHBhcnNlUXVlcnksIGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gPSAnLycpIHtcbiAgICBsZXQgcGF0aCwgcXVlcnkgPSB7fSwgc2VhcmNoU3RyaW5nID0gJycsIGhhc2ggPSAnJztcbiAgICAvLyBDb3VsZCB1c2UgVVJMIGFuZCBVUkxTZWFyY2hQYXJhbXMgYnV0IElFIDExIGRvZXNuJ3Qgc3VwcG9ydCBpdFxuICAgIC8vIFRPRE86IG1vdmUgdG8gbmV3IFVSTCgpXG4gICAgY29uc3QgaGFzaFBvcyA9IGxvY2F0aW9uLmluZGV4T2YoJyMnKTtcbiAgICBsZXQgc2VhcmNoUG9zID0gbG9jYXRpb24uaW5kZXhPZignPycpO1xuICAgIC8vIHRoZSBoYXNoIGFwcGVhcnMgYmVmb3JlIHRoZSBzZWFyY2gsIHNvIGl0J3Mgbm90IHBhcnQgb2YgdGhlIHNlYXJjaCBzdHJpbmdcbiAgICBpZiAoaGFzaFBvcyA8IHNlYXJjaFBvcyAmJiBoYXNoUG9zID49IDApIHtcbiAgICAgICAgc2VhcmNoUG9zID0gLTE7XG4gICAgfVxuICAgIGlmIChzZWFyY2hQb3MgPiAtMSkge1xuICAgICAgICBwYXRoID0gbG9jYXRpb24uc2xpY2UoMCwgc2VhcmNoUG9zKTtcbiAgICAgICAgc2VhcmNoU3RyaW5nID0gbG9jYXRpb24uc2xpY2Uoc2VhcmNoUG9zICsgMSwgaGFzaFBvcyA+IC0xID8gaGFzaFBvcyA6IGxvY2F0aW9uLmxlbmd0aCk7XG4gICAgICAgIHF1ZXJ5ID0gcGFyc2VRdWVyeShzZWFyY2hTdHJpbmcpO1xuICAgIH1cbiAgICBpZiAoaGFzaFBvcyA+IC0xKSB7XG4gICAgICAgIHBhdGggPSBwYXRoIHx8IGxvY2F0aW9uLnNsaWNlKDAsIGhhc2hQb3MpO1xuICAgICAgICAvLyBrZWVwIHRoZSAjIGNoYXJhY3RlclxuICAgICAgICBoYXNoID0gbG9jYXRpb24uc2xpY2UoaGFzaFBvcywgbG9jYXRpb24ubGVuZ3RoKTtcbiAgICB9XG4gICAgLy8gbm8gc2VhcmNoIGFuZCBubyBxdWVyeVxuICAgIHBhdGggPSByZXNvbHZlUmVsYXRpdmVQYXRoKHBhdGggIT0gbnVsbCA/IHBhdGggOiBsb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKTtcbiAgICAvLyBlbXB0eSBwYXRoIG1lYW5zIGEgcmVsYXRpdmUgcXVlcnkgb3IgaGFzaCBgP2Zvbz1mYCwgYCN0aGluZ2BcbiAgICByZXR1cm4ge1xuICAgICAgICBmdWxsUGF0aDogcGF0aCArIChzZWFyY2hTdHJpbmcgJiYgJz8nKSArIHNlYXJjaFN0cmluZyArIGhhc2gsXG4gICAgICAgIHBhdGgsXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBoYXNoOiBkZWNvZGUoaGFzaCksXG4gICAgfTtcbn1cbi8qKlxuICogU3RyaW5naWZpZXMgYSBVUkwgb2JqZWN0XG4gKlxuICogQHBhcmFtIHN0cmluZ2lmeVF1ZXJ5XG4gKiBAcGFyYW0gbG9jYXRpb25cbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5VVJMKHN0cmluZ2lmeVF1ZXJ5LCBsb2NhdGlvbikge1xuICAgIGNvbnN0IHF1ZXJ5ID0gbG9jYXRpb24ucXVlcnkgPyBzdHJpbmdpZnlRdWVyeShsb2NhdGlvbi5xdWVyeSkgOiAnJztcbiAgICByZXR1cm4gbG9jYXRpb24ucGF0aCArIChxdWVyeSAmJiAnPycpICsgcXVlcnkgKyAobG9jYXRpb24uaGFzaCB8fCAnJyk7XG59XG4vKipcbiAqIFN0cmlwcyBvZmYgdGhlIGJhc2UgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIGEgbG9jYXRpb24ucGF0aG5hbWUgaW4gYSBub24tY2FzZS1zZW5zaXRpdmUgd2F5LlxuICpcbiAqIEBwYXJhbSBwYXRobmFtZSAtIGxvY2F0aW9uLnBhdGhuYW1lXG4gKiBAcGFyYW0gYmFzZSAtIGJhc2UgdG8gc3RyaXAgb2ZmXG4gKi9cbmZ1bmN0aW9uIHN0cmlwQmFzZShwYXRobmFtZSwgYmFzZSkge1xuICAgIC8vIG5vIGJhc2Ugb3IgYmFzZSBpcyBub3QgZm91bmQgYXQgdGhlIGJlZ2lubmluZ1xuICAgIGlmICghYmFzZSB8fCAhcGF0aG5hbWUudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGJhc2UudG9Mb3dlckNhc2UoKSkpXG4gICAgICAgIHJldHVybiBwYXRobmFtZTtcbiAgICByZXR1cm4gcGF0aG5hbWUuc2xpY2UoYmFzZS5sZW5ndGgpIHx8ICcvJztcbn1cbi8qKlxuICogQ2hlY2tzIGlmIHR3byBSb3V0ZUxvY2F0aW9uIGFyZSBlcXVhbC4gVGhpcyBtZWFucyB0aGF0IGJvdGggbG9jYXRpb25zIGFyZVxuICogcG9pbnRpbmcgdG93YXJkcyB0aGUgc2FtZSB7QGxpbmsgUm91dGVSZWNvcmR9IGFuZCB0aGF0IGFsbCBgcGFyYW1zYCwgYHF1ZXJ5YFxuICogcGFyYW1ldGVycyBhbmQgYGhhc2hgIGFyZSB0aGUgc2FtZVxuICpcbiAqIEBwYXJhbSBzdHJpbmdpZnlRdWVyeSAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHF1ZXJ5IG9iamVjdCBvZiB0eXBlIExvY2F0aW9uUXVlcnlSYXcgYW5kIHJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgaXQuXG4gKiBAcGFyYW0gYSAtIGZpcnN0IHtAbGluayBSb3V0ZUxvY2F0aW9ufVxuICogQHBhcmFtIGIgLSBzZWNvbmQge0BsaW5rIFJvdXRlTG9jYXRpb259XG4gKi9cbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb24oc3RyaW5naWZ5UXVlcnksIGEsIGIpIHtcbiAgICBjb25zdCBhTGFzdEluZGV4ID0gYS5tYXRjaGVkLmxlbmd0aCAtIDE7XG4gICAgY29uc3QgYkxhc3RJbmRleCA9IGIubWF0Y2hlZC5sZW5ndGggLSAxO1xuICAgIHJldHVybiAoYUxhc3RJbmRleCA+IC0xICYmXG4gICAgICAgIGFMYXN0SW5kZXggPT09IGJMYXN0SW5kZXggJiZcbiAgICAgICAgaXNTYW1lUm91dGVSZWNvcmQoYS5tYXRjaGVkW2FMYXN0SW5kZXhdLCBiLm1hdGNoZWRbYkxhc3RJbmRleF0pICYmXG4gICAgICAgIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMoYS5wYXJhbXMsIGIucGFyYW1zKSAmJlxuICAgICAgICBzdHJpbmdpZnlRdWVyeShhLnF1ZXJ5KSA9PT0gc3RyaW5naWZ5UXVlcnkoYi5xdWVyeSkgJiZcbiAgICAgICAgYS5oYXNoID09PSBiLmhhc2gpO1xufVxuLyoqXG4gKiBDaGVjayBpZiB0d28gYFJvdXRlUmVjb3Jkc2AgYXJlIGVxdWFsLiBUYWtlcyBpbnRvIGFjY291bnQgYWxpYXNlczogdGhleSBhcmVcbiAqIGNvbnNpZGVyZWQgZXF1YWwgdG8gdGhlIGBSb3V0ZVJlY29yZGAgdGhleSBhcmUgYWxpYXNpbmcuXG4gKlxuICogQHBhcmFtIGEgLSBmaXJzdCB7QGxpbmsgUm91dGVSZWNvcmR9XG4gKiBAcGFyYW0gYiAtIHNlY29uZCB7QGxpbmsgUm91dGVSZWNvcmR9XG4gKi9cbmZ1bmN0aW9uIGlzU2FtZVJvdXRlUmVjb3JkKGEsIGIpIHtcbiAgICAvLyBzaW5jZSB0aGUgb3JpZ2luYWwgcmVjb3JkIGhhcyBhbiB1bmRlZmluZWQgdmFsdWUgZm9yIGFsaWFzT2ZcbiAgICAvLyBidXQgYWxsIGFsaWFzZXMgcG9pbnQgdG8gdGhlIG9yaWdpbmFsIHJlY29yZCwgdGhpcyB3aWxsIGFsd2F5cyBjb21wYXJlXG4gICAgLy8gdGhlIG9yaWdpbmFsIHJlY29yZFxuICAgIHJldHVybiAoYS5hbGlhc09mIHx8IGEpID09PSAoYi5hbGlhc09mIHx8IGIpO1xufVxuZnVuY3Rpb24gaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyhhLCBiKSB7XG4gICAgaWYgKE9iamVjdC5rZXlzKGEpLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYSkge1xuICAgICAgICBpZiAoIWlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZShhW2tleV0sIGJba2V5XSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtc1ZhbHVlKGEsIGIpIHtcbiAgICByZXR1cm4gaXNBcnJheShhKVxuICAgICAgICA/IGlzRXF1aXZhbGVudEFycmF5KGEsIGIpXG4gICAgICAgIDogaXNBcnJheShiKVxuICAgICAgICAgICAgPyBpc0VxdWl2YWxlbnRBcnJheShiLCBhKVxuICAgICAgICAgICAgOiBhID09PSBiO1xufVxuLyoqXG4gKiBDaGVjayBpZiB0d28gYXJyYXlzIGFyZSB0aGUgc2FtZSBvciBpZiBhbiBhcnJheSB3aXRoIG9uZSBzaW5nbGUgZW50cnkgaXMgdGhlXG4gKiBzYW1lIGFzIGFub3RoZXIgcHJpbWl0aXZlIHZhbHVlLiBVc2VkIHRvIGNoZWNrIHF1ZXJ5IGFuZCBwYXJhbWV0ZXJzXG4gKlxuICogQHBhcmFtIGEgLSBhcnJheSBvZiB2YWx1ZXNcbiAqIEBwYXJhbSBiIC0gYXJyYXkgb2YgdmFsdWVzIG9yIGEgc2luZ2xlIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGlzRXF1aXZhbGVudEFycmF5KGEsIGIpIHtcbiAgICByZXR1cm4gaXNBcnJheShiKVxuICAgICAgICA/IGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KCh2YWx1ZSwgaSkgPT4gdmFsdWUgPT09IGJbaV0pXG4gICAgICAgIDogYS5sZW5ndGggPT09IDEgJiYgYVswXSA9PT0gYjtcbn1cbi8qKlxuICogUmVzb2x2ZXMgYSByZWxhdGl2ZSBwYXRoIHRoYXQgc3RhcnRzIHdpdGggYC5gLlxuICpcbiAqIEBwYXJhbSB0byAtIHBhdGggbG9jYXRpb24gd2UgYXJlIHJlc29sdmluZ1xuICogQHBhcmFtIGZyb20gLSBjdXJyZW50TG9jYXRpb24ucGF0aCwgc2hvdWxkIHN0YXJ0IHdpdGggYC9gXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVSZWxhdGl2ZVBhdGgodG8sIGZyb20pIHtcbiAgICBpZiAodG8uc3RhcnRzV2l0aCgnLycpKVxuICAgICAgICByZXR1cm4gdG87XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZnJvbS5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgd2FybihgQ2Fubm90IHJlc29sdmUgYSByZWxhdGl2ZSBsb2NhdGlvbiB3aXRob3V0IGFuIGFic29sdXRlIHBhdGguIFRyeWluZyB0byByZXNvbHZlIFwiJHt0b31cIiBmcm9tIFwiJHtmcm9tfVwiLiBJdCBzaG91bGQgbG9vayBsaWtlIFwiLyR7ZnJvbX1cIi5gKTtcbiAgICAgICAgcmV0dXJuIHRvO1xuICAgIH1cbiAgICBpZiAoIXRvKVxuICAgICAgICByZXR1cm4gZnJvbTtcbiAgICBjb25zdCBmcm9tU2VnbWVudHMgPSBmcm9tLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgdG9TZWdtZW50cyA9IHRvLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgbGFzdFRvU2VnbWVudCA9IHRvU2VnbWVudHNbdG9TZWdtZW50cy5sZW5ndGggLSAxXTtcbiAgICAvLyBtYWtlIC4gYW5kIC4vIHRoZSBzYW1lICguLi8gPT09IC4uLCAuLi8uLi8gPT09IC4uLy4uKVxuICAgIC8vIHRoaXMgaXMgdGhlIHNhbWUgYmVoYXZpb3IgYXMgbmV3IFVSTCgpXG4gICAgaWYgKGxhc3RUb1NlZ21lbnQgPT09ICcuLicgfHwgbGFzdFRvU2VnbWVudCA9PT0gJy4nKSB7XG4gICAgICAgIHRvU2VnbWVudHMucHVzaCgnJyk7XG4gICAgfVxuICAgIGxldCBwb3NpdGlvbiA9IGZyb21TZWdtZW50cy5sZW5ndGggLSAxO1xuICAgIGxldCB0b1Bvc2l0aW9uO1xuICAgIGxldCBzZWdtZW50O1xuICAgIGZvciAodG9Qb3NpdGlvbiA9IDA7IHRvUG9zaXRpb24gPCB0b1NlZ21lbnRzLmxlbmd0aDsgdG9Qb3NpdGlvbisrKSB7XG4gICAgICAgIHNlZ21lbnQgPSB0b1NlZ21lbnRzW3RvUG9zaXRpb25dO1xuICAgICAgICAvLyB3ZSBzdGF5IG9uIHRoZSBzYW1lIHBvc2l0aW9uXG4gICAgICAgIGlmIChzZWdtZW50ID09PSAnLicpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgLy8gZ28gdXAgaW4gdGhlIGZyb20gYXJyYXlcbiAgICAgICAgaWYgKHNlZ21lbnQgPT09ICcuLicpIHtcbiAgICAgICAgICAgIC8vIHdlIGNhbid0IGdvIGJlbG93IHplcm8sIGJ1dCB3ZSBzdGlsbCBuZWVkIHRvIGluY3JlbWVudCB0b1Bvc2l0aW9uXG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPiAxKVxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLS07XG4gICAgICAgICAgICAvLyBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIC8vIHdlIHJlYWNoZWQgYSBub24tcmVsYXRpdmUgcGF0aCwgd2Ugc3RvcCBoZXJlXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gKGZyb21TZWdtZW50cy5zbGljZSgwLCBwb3NpdGlvbikuam9pbignLycpICtcbiAgICAgICAgJy8nICtcbiAgICAgICAgdG9TZWdtZW50cy5zbGljZSh0b1Bvc2l0aW9uKS5qb2luKCcvJykpO1xufVxuLyoqXG4gKiBJbml0aWFsIHJvdXRlIGxvY2F0aW9uIHdoZXJlIHRoZSByb3V0ZXIgaXMuIENhbiBiZSB1c2VkIGluIG5hdmlnYXRpb24gZ3VhcmRzXG4gKiB0byBkaWZmZXJlbnRpYXRlIHRoZSBpbml0aWFsIG5hdmlnYXRpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiBpbXBvcnQgeyBTVEFSVF9MT0NBVElPTiB9IGZyb20gJ3Z1ZS1yb3V0ZXInXG4gKlxuICogcm91dGVyLmJlZm9yZUVhY2goKHRvLCBmcm9tKSA9PiB7XG4gKiAgIGlmIChmcm9tID09PSBTVEFSVF9MT0NBVElPTikge1xuICogICAgIC8vIGluaXRpYWwgbmF2aWdhdGlvblxuICogICB9XG4gKiB9KVxuICogYGBgXG4gKi9cbmNvbnN0IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQgPSB7XG4gICAgcGF0aDogJy8nLFxuICAgIC8vIFRPRE86IGNvdWxkIHdlIHVzZSBhIHN5bWJvbCBpbiB0aGUgZnV0dXJlP1xuICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICBwYXJhbXM6IHt9LFxuICAgIHF1ZXJ5OiB7fSxcbiAgICBoYXNoOiAnJyxcbiAgICBmdWxsUGF0aDogJy8nLFxuICAgIG1hdGNoZWQ6IFtdLFxuICAgIG1ldGE6IHt9LFxuICAgIHJlZGlyZWN0ZWRGcm9tOiB1bmRlZmluZWQsXG59O1xuXG52YXIgTmF2aWdhdGlvblR5cGU7XG4oZnVuY3Rpb24gKE5hdmlnYXRpb25UeXBlKSB7XG4gICAgTmF2aWdhdGlvblR5cGVbXCJwb3BcIl0gPSBcInBvcFwiO1xuICAgIE5hdmlnYXRpb25UeXBlW1wicHVzaFwiXSA9IFwicHVzaFwiO1xufSkoTmF2aWdhdGlvblR5cGUgfHwgKE5hdmlnYXRpb25UeXBlID0ge30pKTtcbnZhciBOYXZpZ2F0aW9uRGlyZWN0aW9uO1xuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uRGlyZWN0aW9uKSB7XG4gICAgTmF2aWdhdGlvbkRpcmVjdGlvbltcImJhY2tcIl0gPSBcImJhY2tcIjtcbiAgICBOYXZpZ2F0aW9uRGlyZWN0aW9uW1wiZm9yd2FyZFwiXSA9IFwiZm9yd2FyZFwiO1xuICAgIE5hdmlnYXRpb25EaXJlY3Rpb25bXCJ1bmtub3duXCJdID0gXCJcIjtcbn0pKE5hdmlnYXRpb25EaXJlY3Rpb24gfHwgKE5hdmlnYXRpb25EaXJlY3Rpb24gPSB7fSkpO1xuLyoqXG4gKiBTdGFydGluZyBsb2NhdGlvbiBmb3IgSGlzdG9yaWVzXG4gKi9cbmNvbnN0IFNUQVJUID0gJyc7XG4vLyBHZW5lcmljIHV0aWxzXG4vKipcbiAqIE5vcm1hbGl6ZXMgYSBiYXNlIGJ5IHJlbW92aW5nIGFueSB0cmFpbGluZyBzbGFzaCBhbmQgcmVhZGluZyB0aGUgYmFzZSB0YWcgaWZcbiAqIHByZXNlbnQuXG4gKlxuICogQHBhcmFtIGJhc2UgLSBiYXNlIHRvIG5vcm1hbGl6ZVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVCYXNlKGJhc2UpIHtcbiAgICBpZiAoIWJhc2UpIHtcbiAgICAgICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgICAgICAgLy8gcmVzcGVjdCA8YmFzZT4gdGFnXG4gICAgICAgICAgICBjb25zdCBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XG4gICAgICAgICAgICBiYXNlID0gKGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKCdocmVmJykpIHx8ICcvJztcbiAgICAgICAgICAgIC8vIHN0cmlwIGZ1bGwgVVJMIG9yaWdpblxuICAgICAgICAgICAgYmFzZSA9IGJhc2UucmVwbGFjZSgvXlxcdys6XFwvXFwvW15cXC9dKy8sICcnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJhc2UgPSAnLyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZW5zdXJlIGxlYWRpbmcgc2xhc2ggd2hlbiBpdCB3YXMgcmVtb3ZlZCBieSB0aGUgcmVnZXggYWJvdmUgYXZvaWQgbGVhZGluZ1xuICAgIC8vIHNsYXNoIHdpdGggaGFzaCBiZWNhdXNlIHRoZSBmaWxlIGNvdWxkIGJlIHJlYWQgZnJvbSB0aGUgZGlzayBsaWtlIGZpbGU6Ly9cbiAgICAvLyBhbmQgdGhlIGxlYWRpbmcgc2xhc2ggd291bGQgY2F1c2UgcHJvYmxlbXNcbiAgICBpZiAoYmFzZVswXSAhPT0gJy8nICYmIGJhc2VbMF0gIT09ICcjJylcbiAgICAgICAgYmFzZSA9ICcvJyArIGJhc2U7XG4gICAgLy8gcmVtb3ZlIHRoZSB0cmFpbGluZyBzbGFzaCBzbyBhbGwgb3RoZXIgbWV0aG9kIGNhbiBqdXN0IGRvIGBiYXNlICsgZnVsbFBhdGhgXG4gICAgLy8gdG8gYnVpbGQgYW4gaHJlZlxuICAgIHJldHVybiByZW1vdmVUcmFpbGluZ1NsYXNoKGJhc2UpO1xufVxuLy8gcmVtb3ZlIGFueSBjaGFyYWN0ZXIgYmVmb3JlIHRoZSBoYXNoXG5jb25zdCBCRUZPUkVfSEFTSF9SRSA9IC9eW14jXSsjLztcbmZ1bmN0aW9uIGNyZWF0ZUhyZWYoYmFzZSwgbG9jYXRpb24pIHtcbiAgICByZXR1cm4gYmFzZS5yZXBsYWNlKEJFRk9SRV9IQVNIX1JFLCAnIycpICsgbG9jYXRpb247XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRQb3NpdGlvbihlbCwgb2Zmc2V0KSB7XG4gICAgY29uc3QgZG9jUmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBlbFJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBiZWhhdmlvcjogb2Zmc2V0LmJlaGF2aW9yLFxuICAgICAgICBsZWZ0OiBlbFJlY3QubGVmdCAtIGRvY1JlY3QubGVmdCAtIChvZmZzZXQubGVmdCB8fCAwKSxcbiAgICAgICAgdG9wOiBlbFJlY3QudG9wIC0gZG9jUmVjdC50b3AgLSAob2Zmc2V0LnRvcCB8fCAwKSxcbiAgICB9O1xufVxuY29uc3QgY29tcHV0ZVNjcm9sbFBvc2l0aW9uID0gKCkgPT4gKHtcbiAgICBsZWZ0OiB3aW5kb3cuc2Nyb2xsWCxcbiAgICB0b3A6IHdpbmRvdy5zY3JvbGxZLFxufSk7XG5mdW5jdGlvbiBzY3JvbGxUb1Bvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgbGV0IHNjcm9sbFRvT3B0aW9ucztcbiAgICBpZiAoJ2VsJyBpbiBwb3NpdGlvbikge1xuICAgICAgICBjb25zdCBwb3NpdGlvbkVsID0gcG9zaXRpb24uZWw7XG4gICAgICAgIGNvbnN0IGlzSWRTZWxlY3RvciA9IHR5cGVvZiBwb3NpdGlvbkVsID09PSAnc3RyaW5nJyAmJiBwb3NpdGlvbkVsLnN0YXJ0c1dpdGgoJyMnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGBpZGBzIGNhbiBhY2NlcHQgcHJldHR5IG11Y2ggYW55IGNoYXJhY3RlcnMsIGluY2x1ZGluZyBDU1MgY29tYmluYXRvcnNcbiAgICAgICAgICogbGlrZSBgPmAgb3IgYH5gLiBJdCdzIHN0aWxsIHBvc3NpYmxlIHRvIHJldHJpZXZlIGVsZW1lbnRzIHVzaW5nXG4gICAgICAgICAqIGBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnficpYCBidXQgaXQgbmVlZHMgdG8gYmUgZXNjYXBlZCB3aGVuIHVzaW5nXG4gICAgICAgICAqIGBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjXFxcXH4nKWAgZm9yIGl0IHRvIGJlIHZhbGlkLiBUaGUgb25seVxuICAgICAgICAgKiByZXF1aXJlbWVudHMgZm9yIGBpZGBzIGFyZSB0aGVtIHRvIGJlIHVuaXF1ZSBvbiB0aGUgcGFnZSBhbmQgdG8gbm90IGJlXG4gICAgICAgICAqIGVtcHR5IChgaWQ9XCJcImApLiBCZWNhdXNlIG9mIHRoYXQsIHdoZW4gcGFzc2luZyBhbiBpZCBzZWxlY3RvciwgaXQgc2hvdWxkXG4gICAgICAgICAqIGJlIHByb3Blcmx5IGVzY2FwZWQgZm9yIGl0IHRvIHdvcmsgd2l0aCBgcXVlcnlTZWxlY3RvcmAuIFdlIGNvdWxkIGNoZWNrXG4gICAgICAgICAqIGZvciB0aGUgaWQgc2VsZWN0b3IgdG8gYmUgc2ltcGxlIChubyBDU1MgY29tYmluYXRvcnMgYCsgPn5gKSBidXQgdGhhdFxuICAgICAgICAgKiB3b3VsZCBtYWtlIHRoaW5ncyBpbmNvbnNpc3RlbnQgc2luY2UgdGhleSBhcmUgdmFsaWQgY2hhcmFjdGVycyBmb3IgYW5cbiAgICAgICAgICogYGlkYCBidXQgd291bGQgbmVlZCB0byBiZSBlc2NhcGVkIHdoZW4gdXNpbmcgYHF1ZXJ5U2VsZWN0b3JgLCBicmVha2luZ1xuICAgICAgICAgKiB0aGVpciB1c2FnZSBhbmQgZW5kaW5nIHVwIGluIG5vIHNlbGVjdG9yIHJldHVybmVkLiBTZWxlY3RvcnMgbmVlZCB0byBiZVxuICAgICAgICAgKiBlc2NhcGVkOlxuICAgICAgICAgKlxuICAgICAgICAgKiAtIGAjMS10aGluZ2AgYmVjb21lcyBgI1xcMzEgLXRoaW5nYFxuICAgICAgICAgKiAtIGAjd2l0aH5zeW1ib2xzYCBiZWNvbWVzIGAjd2l0aFxcXFx+c3ltYm9sc2BcbiAgICAgICAgICpcbiAgICAgICAgICogLSBNb3JlIGluZm9ybWF0aW9uIGFib3V0ICB0aGUgdG9waWMgY2FuIGJlIGZvdW5kIGF0XG4gICAgICAgICAqICAgaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2h0bWw1LWlkLWNsYXNzLlxuICAgICAgICAgKiAtIFByYWN0aWNhbCBleGFtcGxlOiBodHRwczovL21hdGhpYXNieW5lbnMuYmUvZGVtby9odG1sNS1pZFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB0eXBlb2YgcG9zaXRpb24uZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoIWlzSWRTZWxlY3RvciB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9zaXRpb24uZWwuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91bmRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9zaXRpb24uZWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJZFNlbGVjdG9yICYmIGZvdW5kRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYFRoZSBzZWxlY3RvciBcIiR7cG9zaXRpb24uZWx9XCIgc2hvdWxkIGJlIHBhc3NlZCBhcyBcImVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcke3Bvc2l0aW9uLmVsfScpXCIgYmVjYXVzZSBpdCBzdGFydHMgd2l0aCBcIiNcIi5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiB0byBhdm9pZCBvdGhlciB3YXJuaW5nc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgVGhlIHNlbGVjdG9yIFwiJHtwb3NpdGlvbi5lbH1cIiBpcyBpbnZhbGlkLiBJZiB5b3UgYXJlIHVzaW5nIGFuIGlkIHNlbGVjdG9yLCBtYWtlIHN1cmUgdG8gZXNjYXBlIGl0LiBZb3UgY2FuIGZpbmQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBlc2NhcGluZyBjaGFyYWN0ZXJzIGluIHNlbGVjdG9ycyBhdCBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvY3NzLWVzY2FwZXMgb3IgdXNlIENTUy5lc2NhcGUgKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DU1MvZXNjYXBlKS5gKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRvIGF2b2lkIG90aGVyIHdhcm5pbmdzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWwgPSB0eXBlb2YgcG9zaXRpb25FbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gaXNJZFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3NpdGlvbkVsLnNsaWNlKDEpKVxuICAgICAgICAgICAgICAgIDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3NpdGlvbkVsKVxuICAgICAgICAgICAgOiBwb3NpdGlvbkVsO1xuICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICB3YXJuKGBDb3VsZG4ndCBmaW5kIGVsZW1lbnQgdXNpbmcgc2VsZWN0b3IgXCIke3Bvc2l0aW9uLmVsfVwiIHJldHVybmVkIGJ5IHNjcm9sbEJlaGF2aW9yLmApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNjcm9sbFRvT3B0aW9ucyA9IGdldEVsZW1lbnRQb3NpdGlvbihlbCwgcG9zaXRpb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2Nyb2xsVG9PcHRpb25zID0gcG9zaXRpb247XG4gICAgfVxuICAgIGlmICgnc2Nyb2xsQmVoYXZpb3InIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSlcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKHNjcm9sbFRvT3B0aW9ucyk7XG4gICAgZWxzZSB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbyhzY3JvbGxUb09wdGlvbnMubGVmdCAhPSBudWxsID8gc2Nyb2xsVG9PcHRpb25zLmxlZnQgOiB3aW5kb3cuc2Nyb2xsWCwgc2Nyb2xsVG9PcHRpb25zLnRvcCAhPSBudWxsID8gc2Nyb2xsVG9PcHRpb25zLnRvcCA6IHdpbmRvdy5zY3JvbGxZKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRTY3JvbGxLZXkocGF0aCwgZGVsdGEpIHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IGhpc3Rvcnkuc3RhdGUgPyBoaXN0b3J5LnN0YXRlLnBvc2l0aW9uIC0gZGVsdGEgOiAtMTtcbiAgICByZXR1cm4gcG9zaXRpb24gKyBwYXRoO1xufVxuY29uc3Qgc2Nyb2xsUG9zaXRpb25zID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gc2F2ZVNjcm9sbFBvc2l0aW9uKGtleSwgc2Nyb2xsUG9zaXRpb24pIHtcbiAgICBzY3JvbGxQb3NpdGlvbnMuc2V0KGtleSwgc2Nyb2xsUG9zaXRpb24pO1xufVxuZnVuY3Rpb24gZ2V0U2F2ZWRTY3JvbGxQb3NpdGlvbihrZXkpIHtcbiAgICBjb25zdCBzY3JvbGwgPSBzY3JvbGxQb3NpdGlvbnMuZ2V0KGtleSk7XG4gICAgLy8gY29uc3VtZSBpdCBzbyBpdCdzIG5vdCB1c2VkIGFnYWluXG4gICAgc2Nyb2xsUG9zaXRpb25zLmRlbGV0ZShrZXkpO1xuICAgIHJldHVybiBzY3JvbGw7XG59XG4vLyBUT0RPOiBSRkMgYWJvdXQgaG93IHRvIHNhdmUgc2Nyb2xsIHBvc2l0aW9uXG4vKipcbiAqIFNjcm9sbEJlaGF2aW9yIGluc3RhbmNlIHVzZWQgYnkgdGhlIHJvdXRlciB0byBjb21wdXRlIGFuZCByZXN0b3JlIHRoZSBzY3JvbGxcbiAqIHBvc2l0aW9uIHdoZW4gbmF2aWdhdGluZy5cbiAqL1xuLy8gZXhwb3J0IGludGVyZmFjZSBTY3JvbGxIYW5kbGVyPFNjcm9sbFBvc2l0aW9uRW50cnkgZXh0ZW5kcyBIaXN0b3J5U3RhdGVWYWx1ZSwgU2Nyb2xsUG9zaXRpb24gZXh0ZW5kcyBTY3JvbGxQb3NpdGlvbkVudHJ5PiB7XG4vLyAgIC8vIHJldHVybnMgYSBzY3JvbGwgcG9zaXRpb24gdGhhdCBjYW4gYmUgc2F2ZWQgaW4gaGlzdG9yeVxuLy8gICBjb21wdXRlKCk6IFNjcm9sbFBvc2l0aW9uRW50cnlcbi8vICAgLy8gY2FuIHRha2UgYW4gZXh0ZW5kZWQgU2Nyb2xsUG9zaXRpb25FbnRyeVxuLy8gICBzY3JvbGwocG9zaXRpb246IFNjcm9sbFBvc2l0aW9uKTogdm9pZFxuLy8gfVxuLy8gZXhwb3J0IGNvbnN0IHNjcm9sbEhhbmRsZXI6IFNjcm9sbEhhbmRsZXI8U2Nyb2xsUG9zaXRpb24+ID0ge1xuLy8gICBjb21wdXRlOiBjb21wdXRlU2Nyb2xsLFxuLy8gICBzY3JvbGw6IHNjcm9sbFRvUG9zaXRpb24sXG4vLyB9XG5cbmxldCBjcmVhdGVCYXNlTG9jYXRpb24gPSAoKSA9PiBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0O1xuLyoqXG4gKiBDcmVhdGVzIGEgbm9ybWFsaXplZCBoaXN0b3J5IGxvY2F0aW9uIGZyb20gYSB3aW5kb3cubG9jYXRpb24gb2JqZWN0XG4gKiBAcGFyYW0gYmFzZSAtIFRoZSBiYXNlIHBhdGhcbiAqIEBwYXJhbSBsb2NhdGlvbiAtIFRoZSB3aW5kb3cubG9jYXRpb24gb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUN1cnJlbnRMb2NhdGlvbihiYXNlLCBsb2NhdGlvbikge1xuICAgIGNvbnN0IHsgcGF0aG5hbWUsIHNlYXJjaCwgaGFzaCB9ID0gbG9jYXRpb247XG4gICAgLy8gYWxsb3dzIGhhc2ggYmFzZXMgbGlrZSAjLCAvIywgIy8sICMhLCAjIS8sIC8jIS8sIG9yIGV2ZW4gL2ZvbGRlciNlbmRcbiAgICBjb25zdCBoYXNoUG9zID0gYmFzZS5pbmRleE9mKCcjJyk7XG4gICAgaWYgKGhhc2hQb3MgPiAtMSkge1xuICAgICAgICBsZXQgc2xpY2VQb3MgPSBoYXNoLmluY2x1ZGVzKGJhc2Uuc2xpY2UoaGFzaFBvcykpXG4gICAgICAgICAgICA/IGJhc2Uuc2xpY2UoaGFzaFBvcykubGVuZ3RoXG4gICAgICAgICAgICA6IDE7XG4gICAgICAgIGxldCBwYXRoRnJvbUhhc2ggPSBoYXNoLnNsaWNlKHNsaWNlUG9zKTtcbiAgICAgICAgLy8gcHJlcGVuZCB0aGUgc3RhcnRpbmcgc2xhc2ggdG8gaGFzaCBzbyB0aGUgdXJsIHN0YXJ0cyB3aXRoIC8jXG4gICAgICAgIGlmIChwYXRoRnJvbUhhc2hbMF0gIT09ICcvJylcbiAgICAgICAgICAgIHBhdGhGcm9tSGFzaCA9ICcvJyArIHBhdGhGcm9tSGFzaDtcbiAgICAgICAgcmV0dXJuIHN0cmlwQmFzZShwYXRoRnJvbUhhc2gsICcnKTtcbiAgICB9XG4gICAgY29uc3QgcGF0aCA9IHN0cmlwQmFzZShwYXRobmFtZSwgYmFzZSk7XG4gICAgcmV0dXJuIHBhdGggKyBzZWFyY2ggKyBoYXNoO1xufVxuZnVuY3Rpb24gdXNlSGlzdG9yeUxpc3RlbmVycyhiYXNlLCBoaXN0b3J5U3RhdGUsIGN1cnJlbnRMb2NhdGlvbiwgcmVwbGFjZSkge1xuICAgIGxldCBsaXN0ZW5lcnMgPSBbXTtcbiAgICBsZXQgdGVhcmRvd25zID0gW107XG4gICAgLy8gVE9ETzogc2hvdWxkIGl0IGJlIGEgc3RhY2s/IGEgRGljdC4gQ2hlY2sgaWYgdGhlIHBvcHN0YXRlIGxpc3RlbmVyXG4gICAgLy8gY2FuIHRyaWdnZXIgdHdpY2VcbiAgICBsZXQgcGF1c2VTdGF0ZSA9IG51bGw7XG4gICAgY29uc3QgcG9wU3RhdGVIYW5kbGVyID0gKHsgc3RhdGUsIH0pID0+IHtcbiAgICAgICAgY29uc3QgdG8gPSBjcmVhdGVDdXJyZW50TG9jYXRpb24oYmFzZSwgbG9jYXRpb24pO1xuICAgICAgICBjb25zdCBmcm9tID0gY3VycmVudExvY2F0aW9uLnZhbHVlO1xuICAgICAgICBjb25zdCBmcm9tU3RhdGUgPSBoaXN0b3J5U3RhdGUudmFsdWU7XG4gICAgICAgIGxldCBkZWx0YSA9IDA7XG4gICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgY3VycmVudExvY2F0aW9uLnZhbHVlID0gdG87XG4gICAgICAgICAgICBoaXN0b3J5U3RhdGUudmFsdWUgPSBzdGF0ZTtcbiAgICAgICAgICAgIC8vIGlnbm9yZSB0aGUgcG9wc3RhdGUgYW5kIHJlc2V0IHRoZSBwYXVzZVN0YXRlXG4gICAgICAgICAgICBpZiAocGF1c2VTdGF0ZSAmJiBwYXVzZVN0YXRlID09PSBmcm9tKSB7XG4gICAgICAgICAgICAgICAgcGF1c2VTdGF0ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsdGEgPSBmcm9tU3RhdGUgPyBzdGF0ZS5wb3NpdGlvbiAtIGZyb21TdGF0ZS5wb3NpdGlvbiA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXBsYWNlKHRvKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBIZXJlIHdlIGNvdWxkIGFsc28gcmV2ZXJ0IHRoZSBuYXZpZ2F0aW9uIGJ5IGNhbGxpbmcgaGlzdG9yeS5nbygtZGVsdGEpXG4gICAgICAgIC8vIHRoaXMgbGlzdGVuZXIgd2lsbCBoYXZlIHRvIGJlIGFkYXB0ZWQgdG8gbm90IHRyaWdnZXIgYWdhaW4gYW5kIHRvIHdhaXQgZm9yIHRoZSB1cmxcbiAgICAgICAgLy8gdG8gYmUgdXBkYXRlZCBiZWZvcmUgdHJpZ2dlcmluZyB0aGUgbGlzdGVuZXJzLiBTb21lIGtpbmQgb2YgdmFsaWRhdGlvbiBmdW5jdGlvbiB3b3VsZCBhbHNvXG4gICAgICAgIC8vIG5lZWQgdG8gYmUgcGFzc2VkIHRvIHRoZSBsaXN0ZW5lcnMgc28gdGhlIG5hdmlnYXRpb24gY2FuIGJlIGFjY2VwdGVkXG4gICAgICAgIC8vIGNhbGwgYWxsIGxpc3RlbmVyc1xuICAgICAgICBsaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XG4gICAgICAgICAgICBsaXN0ZW5lcihjdXJyZW50TG9jYXRpb24udmFsdWUsIGZyb20sIHtcbiAgICAgICAgICAgICAgICBkZWx0YSxcbiAgICAgICAgICAgICAgICB0eXBlOiBOYXZpZ2F0aW9uVHlwZS5wb3AsXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBkZWx0YVxuICAgICAgICAgICAgICAgICAgICA/IGRlbHRhID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBOYXZpZ2F0aW9uRGlyZWN0aW9uLmZvcndhcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogTmF2aWdhdGlvbkRpcmVjdGlvbi5iYWNrXG4gICAgICAgICAgICAgICAgICAgIDogTmF2aWdhdGlvbkRpcmVjdGlvbi51bmtub3duLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZnVuY3Rpb24gcGF1c2VMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHBhdXNlU3RhdGUgPSBjdXJyZW50TG9jYXRpb24udmFsdWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpc3RlbihjYWxsYmFjaykge1xuICAgICAgICAvLyBzZXQgdXAgdGhlIGxpc3RlbmVyIGFuZCBwcmVwYXJlIHRlYXJkb3duIGNhbGxiYWNrc1xuICAgICAgICBsaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgICAgIGNvbnN0IHRlYXJkb3duID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGVhcmRvd25zLnB1c2godGVhcmRvd24pO1xuICAgICAgICByZXR1cm4gdGVhcmRvd247XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJlZm9yZVVubG9hZExpc3RlbmVyKCkge1xuICAgICAgICBjb25zdCB7IGhpc3RvcnkgfSA9IHdpbmRvdztcbiAgICAgICAgaWYgKCFoaXN0b3J5LnN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShhc3NpZ24oe30sIGhpc3Rvcnkuc3RhdGUsIHsgc2Nyb2xsOiBjb21wdXRlU2Nyb2xsUG9zaXRpb24oKSB9KSwgJycpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBmb3IgKGNvbnN0IHRlYXJkb3duIG9mIHRlYXJkb3ducylcbiAgICAgICAgICAgIHRlYXJkb3duKCk7XG4gICAgICAgIHRlYXJkb3ducyA9IFtdO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBwb3BTdGF0ZUhhbmRsZXIpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgYmVmb3JlVW5sb2FkTGlzdGVuZXIpO1xuICAgIH1cbiAgICAvLyBzZXQgdXAgdGhlIGxpc3RlbmVycyBhbmQgcHJlcGFyZSB0ZWFyZG93biBjYWxsYmFja3NcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBwb3BTdGF0ZUhhbmRsZXIpO1xuICAgIC8vIFRPRE86IGNvdWxkIHdlIHVzZSAncGFnZWhpZGUnIG9yICd2aXNpYmlsaXR5Y2hhbmdlJyBpbnN0ZWFkP1xuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vYmxvZy9wYWdlLWxpZmVjeWNsZS1hcGkvXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGJlZm9yZVVubG9hZExpc3RlbmVyLCB7XG4gICAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGF1c2VMaXN0ZW5lcnMsXG4gICAgICAgIGxpc3RlbixcbiAgICAgICAgZGVzdHJveSxcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhdGUgb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGJ1aWxkU3RhdGUoYmFjaywgY3VycmVudCwgZm9yd2FyZCwgcmVwbGFjZWQgPSBmYWxzZSwgY29tcHV0ZVNjcm9sbCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmFjayxcbiAgICAgICAgY3VycmVudCxcbiAgICAgICAgZm9yd2FyZCxcbiAgICAgICAgcmVwbGFjZWQsXG4gICAgICAgIHBvc2l0aW9uOiB3aW5kb3cuaGlzdG9yeS5sZW5ndGgsXG4gICAgICAgIHNjcm9sbDogY29tcHV0ZVNjcm9sbCA/IGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpIDogbnVsbCxcbiAgICB9O1xufVxuZnVuY3Rpb24gdXNlSGlzdG9yeVN0YXRlTmF2aWdhdGlvbihiYXNlKSB7XG4gICAgY29uc3QgeyBoaXN0b3J5LCBsb2NhdGlvbiB9ID0gd2luZG93O1xuICAgIC8vIHByaXZhdGUgdmFyaWFibGVzXG4gICAgY29uc3QgY3VycmVudExvY2F0aW9uID0ge1xuICAgICAgICB2YWx1ZTogY3JlYXRlQ3VycmVudExvY2F0aW9uKGJhc2UsIGxvY2F0aW9uKSxcbiAgICB9O1xuICAgIGNvbnN0IGhpc3RvcnlTdGF0ZSA9IHsgdmFsdWU6IGhpc3Rvcnkuc3RhdGUgfTtcbiAgICAvLyBidWlsZCBjdXJyZW50IGhpc3RvcnkgZW50cnkgYXMgdGhpcyBpcyBhIGZyZXNoIG5hdmlnYXRpb25cbiAgICBpZiAoIWhpc3RvcnlTdGF0ZS52YWx1ZSkge1xuICAgICAgICBjaGFuZ2VMb2NhdGlvbihjdXJyZW50TG9jYXRpb24udmFsdWUsIHtcbiAgICAgICAgICAgIGJhY2s6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50OiBjdXJyZW50TG9jYXRpb24udmFsdWUsXG4gICAgICAgICAgICBmb3J3YXJkOiBudWxsLFxuICAgICAgICAgICAgLy8gdGhlIGxlbmd0aCBpcyBvZmYgYnkgb25lLCB3ZSBuZWVkIHRvIGRlY3JlYXNlIGl0XG4gICAgICAgICAgICBwb3NpdGlvbjogaGlzdG9yeS5sZW5ndGggLSAxLFxuICAgICAgICAgICAgcmVwbGFjZWQ6IHRydWUsXG4gICAgICAgICAgICAvLyBkb24ndCBhZGQgYSBzY3JvbGwgYXMgdGhlIHVzZXIgbWF5IGhhdmUgYW4gYW5jaG9yLCBhbmQgd2Ugd2FudFxuICAgICAgICAgICAgLy8gc2Nyb2xsQmVoYXZpb3IgdG8gYmUgdHJpZ2dlcmVkIHdpdGhvdXQgYSBzYXZlZCBwb3NpdGlvblxuICAgICAgICAgICAgc2Nyb2xsOiBudWxsLFxuICAgICAgICB9LCB0cnVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCByZXBsYWNlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpZiBhIGJhc2UgdGFnIGlzIHByb3ZpZGVkLCBhbmQgd2UgYXJlIG9uIGEgbm9ybWFsIGRvbWFpbiwgd2UgaGF2ZSB0b1xuICAgICAgICAgKiByZXNwZWN0IHRoZSBwcm92aWRlZCBgYmFzZWAgYXR0cmlidXRlIGJlY2F1c2UgcHVzaFN0YXRlKCkgd2lsbCB1c2UgaXQgYW5kXG4gICAgICAgICAqIHBvdGVudGlhbGx5IGVyYXNlIGFueXRoaW5nIGJlZm9yZSB0aGUgYCNgIGxpa2UgYXRcbiAgICAgICAgICogaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JvdXRlci9pc3N1ZXMvNjg1IHdoZXJlIGEgYmFzZSBvZlxuICAgICAgICAgKiBgL2ZvbGRlci8jYCBidXQgYSBiYXNlIG9mIGAvYCB3b3VsZCBlcmFzZSB0aGUgYC9mb2xkZXIvYCBzZWN0aW9uLiBJZlxuICAgICAgICAgKiB0aGVyZSBpcyBubyBob3N0LCB0aGUgYDxiYXNlPmAgdGFnIG1ha2VzIG5vIHNlbnNlIGFuZCBpZiB0aGVyZSBpc24ndCBhXG4gICAgICAgICAqIGJhc2UgdGFnIHdlIGNhbiBqdXN0IHVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBgI2AuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBoYXNoSW5kZXggPSBiYXNlLmluZGV4T2YoJyMnKTtcbiAgICAgICAgY29uc3QgdXJsID0gaGFzaEluZGV4ID4gLTFcbiAgICAgICAgICAgID8gKGxvY2F0aW9uLmhvc3QgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYmFzZScpXG4gICAgICAgICAgICAgICAgPyBiYXNlXG4gICAgICAgICAgICAgICAgOiBiYXNlLnNsaWNlKGhhc2hJbmRleCkpICsgdG9cbiAgICAgICAgICAgIDogY3JlYXRlQmFzZUxvY2F0aW9uKCkgKyBiYXNlICsgdG87XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBCUk9XU0VSIFFVSVJLXG4gICAgICAgICAgICAvLyBOT1RFOiBTYWZhcmkgdGhyb3dzIGEgU2VjdXJpdHlFcnJvciB3aGVuIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiAxMDAgdGltZXMgaW4gMzAgc2Vjb25kc1xuICAgICAgICAgICAgaGlzdG9yeVtyZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oc3RhdGUsICcnLCB1cmwpO1xuICAgICAgICAgICAgaGlzdG9yeVN0YXRlLnZhbHVlID0gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oJ0Vycm9yIHdpdGggcHVzaC9yZXBsYWNlIFN0YXRlJywgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZvcmNlIHRoZSBuYXZpZ2F0aW9uLCB0aGlzIGFsc28gcmVzZXRzIHRoZSBjYWxsIGNvdW50XG4gICAgICAgICAgICBsb2NhdGlvbltyZXBsYWNlID8gJ3JlcGxhY2UnIDogJ2Fzc2lnbiddKHVybCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVwbGFjZSh0bywgZGF0YSkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IGFzc2lnbih7fSwgaGlzdG9yeS5zdGF0ZSwgYnVpbGRTdGF0ZShoaXN0b3J5U3RhdGUudmFsdWUuYmFjaywgXG4gICAgICAgIC8vIGtlZXAgYmFjayBhbmQgZm9yd2FyZCBlbnRyaWVzIGJ1dCBvdmVycmlkZSBjdXJyZW50IHBvc2l0aW9uXG4gICAgICAgIHRvLCBoaXN0b3J5U3RhdGUudmFsdWUuZm9yd2FyZCwgdHJ1ZSksIGRhdGEsIHsgcG9zaXRpb246IGhpc3RvcnlTdGF0ZS52YWx1ZS5wb3NpdGlvbiB9KTtcbiAgICAgICAgY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCB0cnVlKTtcbiAgICAgICAgY3VycmVudExvY2F0aW9uLnZhbHVlID0gdG87XG4gICAgfVxuICAgIGZ1bmN0aW9uIHB1c2godG8sIGRhdGEpIHtcbiAgICAgICAgLy8gQWRkIHRvIGN1cnJlbnQgZW50cnkgdGhlIGluZm9ybWF0aW9uIG9mIHdoZXJlIHdlIGFyZSBnb2luZ1xuICAgICAgICAvLyBhcyB3ZWxsIGFzIHNhdmluZyB0aGUgY3VycmVudCBwb3NpdGlvblxuICAgICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBhc3NpZ24oe30sIFxuICAgICAgICAvLyB1c2UgY3VycmVudCBoaXN0b3J5IHN0YXRlIHRvIGdyYWNlZnVsbHkgaGFuZGxlIGEgd3JvbmcgY2FsbCB0b1xuICAgICAgICAvLyBoaXN0b3J5LnJlcGxhY2VTdGF0ZVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy8zNjZcbiAgICAgICAgaGlzdG9yeVN0YXRlLnZhbHVlLCBoaXN0b3J5LnN0YXRlLCB7XG4gICAgICAgICAgICBmb3J3YXJkOiB0byxcbiAgICAgICAgICAgIHNjcm9sbDogY29tcHV0ZVNjcm9sbFBvc2l0aW9uKCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFoaXN0b3J5LnN0YXRlKSB7XG4gICAgICAgICAgICB3YXJuKGBoaXN0b3J5LnN0YXRlIHNlZW1zIHRvIGhhdmUgYmVlbiBtYW51YWxseSByZXBsYWNlZCB3aXRob3V0IHByZXNlcnZpbmcgdGhlIG5lY2Vzc2FyeSB2YWx1ZXMuIE1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSBleGlzdGluZyBoaXN0b3J5IHN0YXRlIGlmIHlvdSBhcmUgbWFudWFsbHkgY2FsbGluZyBoaXN0b3J5LnJlcGxhY2VTdGF0ZTpcXG5cXG5gICtcbiAgICAgICAgICAgICAgICBgaGlzdG9yeS5yZXBsYWNlU3RhdGUoaGlzdG9yeS5zdGF0ZSwgJycsIHVybClcXG5cXG5gICtcbiAgICAgICAgICAgICAgICBgWW91IGNhbiBmaW5kIG1vcmUgaW5mb3JtYXRpb24gYXQgaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL21pZ3JhdGlvbi8jVXNhZ2Utb2YtaGlzdG9yeS1zdGF0ZWApO1xuICAgICAgICB9XG4gICAgICAgIGNoYW5nZUxvY2F0aW9uKGN1cnJlbnRTdGF0ZS5jdXJyZW50LCBjdXJyZW50U3RhdGUsIHRydWUpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IGFzc2lnbih7fSwgYnVpbGRTdGF0ZShjdXJyZW50TG9jYXRpb24udmFsdWUsIHRvLCBudWxsKSwgeyBwb3NpdGlvbjogY3VycmVudFN0YXRlLnBvc2l0aW9uICsgMSB9LCBkYXRhKTtcbiAgICAgICAgY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCBmYWxzZSk7XG4gICAgICAgIGN1cnJlbnRMb2NhdGlvbi52YWx1ZSA9IHRvO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBsb2NhdGlvbjogY3VycmVudExvY2F0aW9uLFxuICAgICAgICBzdGF0ZTogaGlzdG9yeVN0YXRlLFxuICAgICAgICBwdXNoLFxuICAgICAgICByZXBsYWNlLFxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gSFRNTDUgaGlzdG9yeS4gTW9zdCBjb21tb24gaGlzdG9yeSBmb3Igc2luZ2xlIHBhZ2UgYXBwbGljYXRpb25zLlxuICpcbiAqIEBwYXJhbSBiYXNlIC1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlV2ViSGlzdG9yeShiYXNlKSB7XG4gICAgYmFzZSA9IG5vcm1hbGl6ZUJhc2UoYmFzZSk7XG4gICAgY29uc3QgaGlzdG9yeU5hdmlnYXRpb24gPSB1c2VIaXN0b3J5U3RhdGVOYXZpZ2F0aW9uKGJhc2UpO1xuICAgIGNvbnN0IGhpc3RvcnlMaXN0ZW5lcnMgPSB1c2VIaXN0b3J5TGlzdGVuZXJzKGJhc2UsIGhpc3RvcnlOYXZpZ2F0aW9uLnN0YXRlLCBoaXN0b3J5TmF2aWdhdGlvbi5sb2NhdGlvbiwgaGlzdG9yeU5hdmlnYXRpb24ucmVwbGFjZSk7XG4gICAgZnVuY3Rpb24gZ28oZGVsdGEsIHRyaWdnZXJMaXN0ZW5lcnMgPSB0cnVlKSB7XG4gICAgICAgIGlmICghdHJpZ2dlckxpc3RlbmVycylcbiAgICAgICAgICAgIGhpc3RvcnlMaXN0ZW5lcnMucGF1c2VMaXN0ZW5lcnMoKTtcbiAgICAgICAgaGlzdG9yeS5nbyhkZWx0YSk7XG4gICAgfVxuICAgIGNvbnN0IHJvdXRlckhpc3RvcnkgPSBhc3NpZ24oe1xuICAgICAgICAvLyBpdCdzIG92ZXJyaWRkZW4gcmlnaHQgYWZ0ZXJcbiAgICAgICAgbG9jYXRpb246ICcnLFxuICAgICAgICBiYXNlLFxuICAgICAgICBnbyxcbiAgICAgICAgY3JlYXRlSHJlZjogY3JlYXRlSHJlZi5iaW5kKG51bGwsIGJhc2UpLFxuICAgIH0sIGhpc3RvcnlOYXZpZ2F0aW9uLCBoaXN0b3J5TGlzdGVuZXJzKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgJ2xvY2F0aW9uJywge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IGhpc3RvcnlOYXZpZ2F0aW9uLmxvY2F0aW9uLnZhbHVlLFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyb3V0ZXJIaXN0b3J5LCAnc3RhdGUnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogKCkgPT4gaGlzdG9yeU5hdmlnYXRpb24uc3RhdGUudmFsdWUsXG4gICAgfSk7XG4gICAgcmV0dXJuIHJvdXRlckhpc3Rvcnk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbi1tZW1vcnkgYmFzZWQgaGlzdG9yeS4gVGhlIG1haW4gcHVycG9zZSBvZiB0aGlzIGhpc3RvcnkgaXMgdG8gaGFuZGxlIFNTUi4gSXQgc3RhcnRzIGluIGEgc3BlY2lhbCBsb2NhdGlvbiB0aGF0IGlzIG5vd2hlcmUuXG4gKiBJdCdzIHVwIHRvIHRoZSB1c2VyIHRvIHJlcGxhY2UgdGhhdCBsb2NhdGlvbiB3aXRoIHRoZSBzdGFydGVyIGxvY2F0aW9uIGJ5IGVpdGhlciBjYWxsaW5nIGByb3V0ZXIucHVzaGAgb3IgYHJvdXRlci5yZXBsYWNlYC5cbiAqXG4gKiBAcGFyYW0gYmFzZSAtIEJhc2UgYXBwbGllZCB0byBhbGwgdXJscywgZGVmYXVsdHMgdG8gJy8nXG4gKiBAcmV0dXJucyBhIGhpc3Rvcnkgb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgcm91dGVyIGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3RvcnkoYmFzZSA9ICcnKSB7XG4gICAgbGV0IGxpc3RlbmVycyA9IFtdO1xuICAgIGxldCBxdWV1ZSA9IFtbU1RBUlQsIHt9XV07XG4gICAgbGV0IHBvc2l0aW9uID0gMDtcbiAgICBiYXNlID0gbm9ybWFsaXplQmFzZShiYXNlKTtcbiAgICBmdW5jdGlvbiBzZXRMb2NhdGlvbihsb2NhdGlvbiwgc3RhdGUgPSB7fSkge1xuICAgICAgICBwb3NpdGlvbisrO1xuICAgICAgICBpZiAocG9zaXRpb24gIT09IHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gd2UgYXJlIGluIHRoZSBtaWRkbGUsIHdlIHJlbW92ZSBldmVyeXRoaW5nIGZyb20gaGVyZSBpbiB0aGUgcXVldWVcbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShwb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcXVldWUucHVzaChbbG9jYXRpb24sIHN0YXRlXSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRyaWdnZXJMaXN0ZW5lcnModG8sIGZyb20sIHsgZGlyZWN0aW9uLCBkZWx0YSB9KSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24sXG4gICAgICAgICAgICBkZWx0YSxcbiAgICAgICAgICAgIHR5cGU6IE5hdmlnYXRpb25UeXBlLnBvcCxcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHRvLCBmcm9tLCBpbmZvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByb3V0ZXJIaXN0b3J5ID0ge1xuICAgICAgICAvLyByZXdyaXR0ZW4gYnkgT2JqZWN0LmRlZmluZVByb3BlcnR5XG4gICAgICAgIGxvY2F0aW9uOiBTVEFSVCxcbiAgICAgICAgLy8gcmV3cml0dGVuIGJ5IE9iamVjdC5kZWZpbmVQcm9wZXJ0eVxuICAgICAgICBzdGF0ZToge30sXG4gICAgICAgIGJhc2UsXG4gICAgICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYuYmluZChudWxsLCBiYXNlKSxcbiAgICAgICAgcmVwbGFjZSh0bywgc3RhdGUpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IGVudHJ5IGFuZCBkZWNyZW1lbnQgcG9zaXRpb25cbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShwb3NpdGlvbi0tLCAxKTtcbiAgICAgICAgICAgIHNldExvY2F0aW9uKHRvLCBzdGF0ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHB1c2godG8sIHN0YXRlKSB7XG4gICAgICAgICAgICBzZXRMb2NhdGlvbih0bywgc3RhdGUpO1xuICAgICAgICB9LFxuICAgICAgICBsaXN0ZW4oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVzdHJveSgpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycyA9IFtdO1xuICAgICAgICAgICAgcXVldWUgPSBbW1NUQVJULCB7fV1dO1xuICAgICAgICAgICAgcG9zaXRpb24gPSAwO1xuICAgICAgICB9LFxuICAgICAgICBnbyhkZWx0YSwgc2hvdWxkVHJpZ2dlciA9IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmxvY2F0aW9uO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gXG4gICAgICAgICAgICAvLyB3ZSBhcmUgY29uc2lkZXJpbmcgZGVsdGEgPT09IDAgZ29pbmcgZm9yd2FyZCwgYnV0IGluIGFic3RyYWN0IG1vZGVcbiAgICAgICAgICAgIC8vIHVzaW5nIDAgZm9yIHRoZSBkZWx0YSBkb2Vzbid0IG1ha2Ugc2Vuc2UgbGlrZSBpdCBkb2VzIGluIGh0bWw1IHdoZXJlXG4gICAgICAgICAgICAvLyBpdCByZWxvYWRzIHRoZSBwYWdlXG4gICAgICAgICAgICBkZWx0YSA8IDAgPyBOYXZpZ2F0aW9uRGlyZWN0aW9uLmJhY2sgOiBOYXZpZ2F0aW9uRGlyZWN0aW9uLmZvcndhcmQ7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IE1hdGgubWF4KDAsIE1hdGgubWluKHBvc2l0aW9uICsgZGVsdGEsIHF1ZXVlLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgICAgIGlmIChzaG91bGRUcmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckxpc3RlbmVycyh0aGlzLmxvY2F0aW9uLCBmcm9tLCB7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgJ2xvY2F0aW9uJywge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IHF1ZXVlW3Bvc2l0aW9uXVswXSxcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgJ3N0YXRlJywge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6ICgpID0+IHF1ZXVlW3Bvc2l0aW9uXVsxXSxcbiAgICB9KTtcbiAgICByZXR1cm4gcm91dGVySGlzdG9yeTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFzaCBoaXN0b3J5LiBVc2VmdWwgZm9yIHdlYiBhcHBsaWNhdGlvbnMgd2l0aCBubyBob3N0IChlLmcuIGBmaWxlOi8vYCkgb3Igd2hlbiBjb25maWd1cmluZyBhIHNlcnZlciB0b1xuICogaGFuZGxlIGFueSBVUkwgaXMgbm90IHBvc3NpYmxlLlxuICpcbiAqIEBwYXJhbSBiYXNlIC0gb3B0aW9uYWwgYmFzZSB0byBwcm92aWRlLiBEZWZhdWx0cyB0byBgbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2hgIElmIHRoZXJlIGlzIGEgYDxiYXNlPmAgdGFnXG4gKiBpbiB0aGUgYGhlYWRgLCBpdHMgdmFsdWUgd2lsbCBiZSBpZ25vcmVkIGluIGZhdm9yIG9mIHRoaXMgcGFyYW1ldGVyICoqYnV0IG5vdGUgaXQgYWZmZWN0cyBhbGwgdGhlIGhpc3RvcnkucHVzaFN0YXRlKClcbiAqIGNhbGxzKiosIG1lYW5pbmcgdGhhdCBpZiB5b3UgdXNlIGEgYDxiYXNlPmAgdGFnLCBpdCdzIGBocmVmYCB2YWx1ZSAqKmhhcyB0byBtYXRjaCB0aGlzIHBhcmFtZXRlcioqIChpZ25vcmluZyBhbnl0aGluZ1xuICogYWZ0ZXIgdGhlIGAjYCkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiAvLyBhdCBodHRwczovL2V4YW1wbGUuY29tL2ZvbGRlclxuICogY3JlYXRlV2ViSGFzaEhpc3RvcnkoKSAvLyBnaXZlcyBhIHVybCBvZiBgaHR0cHM6Ly9leGFtcGxlLmNvbS9mb2xkZXIjYFxuICogY3JlYXRlV2ViSGFzaEhpc3RvcnkoJy9mb2xkZXIvJykgLy8gZ2l2ZXMgYSB1cmwgb2YgYGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyLyNgXG4gKiAvLyBpZiB0aGUgYCNgIGlzIHByb3ZpZGVkIGluIHRoZSBiYXNlLCBpdCB3b24ndCBiZSBhZGRlZCBieSBgY3JlYXRlV2ViSGFzaEhpc3RvcnlgXG4gKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgnL2ZvbGRlci8jL2FwcC8nKSAvLyBnaXZlcyBhIHVybCBvZiBgaHR0cHM6Ly9leGFtcGxlLmNvbS9mb2xkZXIvIy9hcHAvYFxuICogLy8geW91IHNob3VsZCBhdm9pZCBkb2luZyB0aGlzIGJlY2F1c2UgaXQgY2hhbmdlcyB0aGUgb3JpZ2luYWwgdXJsIGFuZCBicmVha3MgY29weWluZyB1cmxzXG4gKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgnL290aGVyLWZvbGRlci8nKSAvLyBnaXZlcyBhIHVybCBvZiBgaHR0cHM6Ly9leGFtcGxlLmNvbS9vdGhlci1mb2xkZXIvI2BcbiAqXG4gKiAvLyBhdCBmaWxlOi8vL3Vzci9ldGMvZm9sZGVyL2luZGV4Lmh0bWxcbiAqIC8vIGZvciBsb2NhdGlvbnMgd2l0aCBubyBgaG9zdGAsIHRoZSBiYXNlIGlzIGlnbm9yZWRcbiAqIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCcvaUFtSWdub3JlZCcpIC8vIGdpdmVzIGEgdXJsIG9mIGBmaWxlOi8vL3Vzci9ldGMvZm9sZGVyL2luZGV4Lmh0bWwjYFxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KGJhc2UpIHtcbiAgICAvLyBNYWtlIHN1cmUgdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBmaW5lIGluIHRlcm1zIG9mIGVuY29kaW5nLCBzcGVjaWFsbHkgZm9yIElFMTFcbiAgICAvLyBmb3IgYGZpbGU6Ly9gLCBkaXJlY3RseSB1c2UgdGhlIHBhdGhuYW1lIGFuZCBpZ25vcmUgdGhlIGJhc2VcbiAgICAvLyBsb2NhdGlvbi5wYXRobmFtZSBjb250YWlucyBhbiBpbml0aWFsIGAvYCBldmVuIGF0IHRoZSByb290OiBgaHR0cHM6Ly9leGFtcGxlLmNvbWBcbiAgICBiYXNlID0gbG9jYXRpb24uaG9zdCA/IGJhc2UgfHwgbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2ggOiAnJztcbiAgICAvLyBhbGxvdyB0aGUgdXNlciB0byBwcm92aWRlIGEgYCNgIGluIHRoZSBtaWRkbGU6IGAvYmFzZS8jL2FwcGBcbiAgICBpZiAoIWJhc2UuaW5jbHVkZXMoJyMnKSlcbiAgICAgICAgYmFzZSArPSAnIyc7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYmFzZS5lbmRzV2l0aCgnIy8nKSAmJiAhYmFzZS5lbmRzV2l0aCgnIycpKSB7XG4gICAgICAgIHdhcm4oYEEgaGFzaCBiYXNlIG11c3QgZW5kIHdpdGggYSBcIiNcIjpcXG5cIiR7YmFzZX1cIiBzaG91bGQgYmUgXCIke2Jhc2UucmVwbGFjZSgvIy4qJC8sICcjJyl9XCIuYCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVXZWJIaXN0b3J5KGJhc2UpO1xufVxuXG5mdW5jdGlvbiBpc1JvdXRlTG9jYXRpb24ocm91dGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHJvdXRlID09PSAnc3RyaW5nJyB8fCAocm91dGUgJiYgdHlwZW9mIHJvdXRlID09PSAnb2JqZWN0Jyk7XG59XG5mdW5jdGlvbiBpc1JvdXRlTmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbmFtZSA9PT0gJ3N5bWJvbCc7XG59XG5cbmNvbnN0IE5hdmlnYXRpb25GYWlsdXJlU3ltYm9sID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICduYXZpZ2F0aW9uIGZhaWx1cmUnIDogJycpO1xuLyoqXG4gKiBFbnVtZXJhdGlvbiB3aXRoIGFsbCBwb3NzaWJsZSB0eXBlcyBmb3IgbmF2aWdhdGlvbiBmYWlsdXJlcy4gQ2FuIGJlIHBhc3NlZCB0b1xuICoge0BsaW5rIGlzTmF2aWdhdGlvbkZhaWx1cmV9IHRvIGNoZWNrIGZvciBzcGVjaWZpYyBmYWlsdXJlcy5cbiAqL1xudmFyIE5hdmlnYXRpb25GYWlsdXJlVHlwZTtcbihmdW5jdGlvbiAoTmF2aWdhdGlvbkZhaWx1cmVUeXBlKSB7XG4gICAgLyoqXG4gICAgICogQW4gYWJvcnRlZCBuYXZpZ2F0aW9uIGlzIGEgbmF2aWdhdGlvbiB0aGF0IGZhaWxlZCBiZWNhdXNlIGEgbmF2aWdhdGlvblxuICAgICAqIGd1YXJkIHJldHVybmVkIGBmYWxzZWAgb3IgY2FsbGVkIGBuZXh0KGZhbHNlKWBcbiAgICAgKi9cbiAgICBOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbTmF2aWdhdGlvbkZhaWx1cmVUeXBlW1wiYWJvcnRlZFwiXSA9IDRdID0gXCJhYm9ydGVkXCI7XG4gICAgLyoqXG4gICAgICogQSBjYW5jZWxsZWQgbmF2aWdhdGlvbiBpcyBhIG5hdmlnYXRpb24gdGhhdCBmYWlsZWQgYmVjYXVzZSBhIG1vcmUgcmVjZW50XG4gICAgICogbmF2aWdhdGlvbiBmaW5pc2hlZCBzdGFydGVkIChub3QgbmVjZXNzYXJpbHkgZmluaXNoZWQpLlxuICAgICAqL1xuICAgIE5hdmlnYXRpb25GYWlsdXJlVHlwZVtOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbXCJjYW5jZWxsZWRcIl0gPSA4XSA9IFwiY2FuY2VsbGVkXCI7XG4gICAgLyoqXG4gICAgICogQSBkdXBsaWNhdGVkIG5hdmlnYXRpb24gaXMgYSBuYXZpZ2F0aW9uIHRoYXQgZmFpbGVkIGJlY2F1c2UgaXQgd2FzXG4gICAgICogaW5pdGlhdGVkIHdoaWxlIGFscmVhZHkgYmVpbmcgYXQgdGhlIGV4YWN0IHNhbWUgbG9jYXRpb24uXG4gICAgICovXG4gICAgTmF2aWdhdGlvbkZhaWx1cmVUeXBlW05hdmlnYXRpb25GYWlsdXJlVHlwZVtcImR1cGxpY2F0ZWRcIl0gPSAxNl0gPSBcImR1cGxpY2F0ZWRcIjtcbn0pKE5hdmlnYXRpb25GYWlsdXJlVHlwZSB8fCAoTmF2aWdhdGlvbkZhaWx1cmVUeXBlID0ge30pKTtcbi8vIERFViBvbmx5IGRlYnVnIG1lc3NhZ2VzXG5jb25zdCBFcnJvclR5cGVNZXNzYWdlcyA9IHtcbiAgICBbMSAvKiBFcnJvclR5cGVzLk1BVENIRVJfTk9UX0ZPVU5EICovXSh7IGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gfSkge1xuICAgICAgICByZXR1cm4gYE5vIG1hdGNoIGZvclxcbiAke0pTT04uc3RyaW5naWZ5KGxvY2F0aW9uKX0ke2N1cnJlbnRMb2NhdGlvblxuICAgICAgICAgICAgPyAnXFxud2hpbGUgYmVpbmcgYXRcXG4nICsgSlNPTi5zdHJpbmdpZnkoY3VycmVudExvY2F0aW9uKVxuICAgICAgICAgICAgOiAnJ31gO1xuICAgIH0sXG4gICAgWzIgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0dVQVJEX1JFRElSRUNUICovXSh7IGZyb20sIHRvLCB9KSB7XG4gICAgICAgIHJldHVybiBgUmVkaXJlY3RlZCBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHtzdHJpbmdpZnlSb3V0ZSh0byl9XCIgdmlhIGEgbmF2aWdhdGlvbiBndWFyZC5gO1xuICAgIH0sXG4gICAgWzQgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0FCT1JURUQgKi9dKHsgZnJvbSwgdG8gfSkge1xuICAgICAgICByZXR1cm4gYE5hdmlnYXRpb24gYWJvcnRlZCBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHt0by5mdWxsUGF0aH1cIiB2aWEgYSBuYXZpZ2F0aW9uIGd1YXJkLmA7XG4gICAgfSxcbiAgICBbOCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEICovXSh7IGZyb20sIHRvIH0pIHtcbiAgICAgICAgcmV0dXJuIGBOYXZpZ2F0aW9uIGNhbmNlbGxlZCBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHt0by5mdWxsUGF0aH1cIiB3aXRoIGEgbmV3IG5hdmlnYXRpb24uYDtcbiAgICB9LFxuICAgIFsxNiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fRFVQTElDQVRFRCAqL10oeyBmcm9tLCB0byB9KSB7XG4gICAgICAgIHJldHVybiBgQXZvaWRlZCByZWR1bmRhbnQgbmF2aWdhdGlvbiB0byBjdXJyZW50IGxvY2F0aW9uOiBcIiR7ZnJvbS5mdWxsUGF0aH1cIi5gO1xuICAgIH0sXG59O1xuLyoqXG4gKiBDcmVhdGVzIGEgdHlwZWQgTmF2aWdhdGlvbkZhaWx1cmUgb2JqZWN0LlxuICogQGludGVybmFsXG4gKiBAcGFyYW0gdHlwZSAtIE5hdmlnYXRpb25GYWlsdXJlVHlwZVxuICogQHBhcmFtIHBhcmFtcyAtIHsgZnJvbSwgdG8gfVxuICovXG5mdW5jdGlvbiBjcmVhdGVSb3V0ZXJFcnJvcih0eXBlLCBwYXJhbXMpIHtcbiAgICAvLyBrZWVwIGZ1bGwgZXJyb3IgbWVzc2FnZXMgaW4gY2pzIHZlcnNpb25zXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAhdHJ1ZSkge1xuICAgICAgICByZXR1cm4gYXNzaWduKG5ldyBFcnJvcihFcnJvclR5cGVNZXNzYWdlc1t0eXBlXShwYXJhbXMpKSwge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIFtOYXZpZ2F0aW9uRmFpbHVyZVN5bWJvbF06IHRydWUsXG4gICAgICAgIH0sIHBhcmFtcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXNzaWduKG5ldyBFcnJvcigpLCB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgW05hdmlnYXRpb25GYWlsdXJlU3ltYm9sXTogdHJ1ZSxcbiAgICAgICAgfSwgcGFyYW1zKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCB0eXBlKSB7XG4gICAgcmV0dXJuIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmXG4gICAgICAgIE5hdmlnYXRpb25GYWlsdXJlU3ltYm9sIGluIGVycm9yICYmXG4gICAgICAgICh0eXBlID09IG51bGwgfHwgISEoZXJyb3IudHlwZSAmIHR5cGUpKSk7XG59XG5jb25zdCBwcm9wZXJ0aWVzVG9Mb2cgPSBbJ3BhcmFtcycsICdxdWVyeScsICdoYXNoJ107XG5mdW5jdGlvbiBzdHJpbmdpZnlSb3V0ZSh0bykge1xuICAgIGlmICh0eXBlb2YgdG8gPT09ICdzdHJpbmcnKVxuICAgICAgICByZXR1cm4gdG87XG4gICAgaWYgKHRvLnBhdGggIT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHRvLnBhdGg7XG4gICAgY29uc3QgbG9jYXRpb24gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBwcm9wZXJ0aWVzVG9Mb2cpIHtcbiAgICAgICAgaWYgKGtleSBpbiB0bylcbiAgICAgICAgICAgIGxvY2F0aW9uW2tleV0gPSB0b1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobG9jYXRpb24sIG51bGwsIDIpO1xufVxuXG4vLyBkZWZhdWx0IHBhdHRlcm4gZm9yIGEgcGFyYW06IG5vbi1ncmVlZHkgZXZlcnl0aGluZyBidXQgL1xuY29uc3QgQkFTRV9QQVJBTV9QQVRURVJOID0gJ1teL10rPyc7XG5jb25zdCBCQVNFX1BBVEhfUEFSU0VSX09QVElPTlMgPSB7XG4gICAgc2Vuc2l0aXZlOiBmYWxzZSxcbiAgICBzdHJpY3Q6IGZhbHNlLFxuICAgIHN0YXJ0OiB0cnVlLFxuICAgIGVuZDogdHJ1ZSxcbn07XG4vLyBTcGVjaWFsIFJlZ2V4IGNoYXJhY3RlcnMgdGhhdCBtdXN0IGJlIGVzY2FwZWQgaW4gc3RhdGljIHRva2Vuc1xuY29uc3QgUkVHRVhfQ0hBUlNfUkUgPSAvWy4rKj9eJHt9KClbXFxdL1xcXFxdL2c7XG4vKipcbiAqIENyZWF0ZXMgYSBwYXRoIHBhcnNlciBmcm9tIGFuIGFycmF5IG9mIFNlZ21lbnRzIChhIHNlZ21lbnQgaXMgYW4gYXJyYXkgb2YgVG9rZW5zKVxuICpcbiAqIEBwYXJhbSBzZWdtZW50cyAtIGFycmF5IG9mIHNlZ21lbnRzIHJldHVybmVkIGJ5IHRva2VuaXplUGF0aFxuICogQHBhcmFtIGV4dHJhT3B0aW9ucyAtIG9wdGlvbmFsIG9wdGlvbnMgZm9yIHRoZSByZWdleHBcbiAqIEByZXR1cm5zIGEgUGF0aFBhcnNlclxuICovXG5mdW5jdGlvbiB0b2tlbnNUb1BhcnNlcihzZWdtZW50cywgZXh0cmFPcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGFzc2lnbih7fSwgQkFTRV9QQVRIX1BBUlNFUl9PUFRJT05TLCBleHRyYU9wdGlvbnMpO1xuICAgIC8vIHRoZSBhbW91bnQgb2Ygc2NvcmVzIGlzIHRoZSBzYW1lIGFzIHRoZSBsZW5ndGggb2Ygc2VnbWVudHMgZXhjZXB0IGZvciB0aGUgcm9vdCBzZWdtZW50IFwiL1wiXG4gICAgY29uc3Qgc2NvcmUgPSBbXTtcbiAgICAvLyB0aGUgcmVnZXhwIGFzIGEgc3RyaW5nXG4gICAgbGV0IHBhdHRlcm4gPSBvcHRpb25zLnN0YXJ0ID8gJ14nIDogJyc7XG4gICAgLy8gZXh0cmFjdGVkIGtleXNcbiAgICBjb25zdCBrZXlzID0gW107XG4gICAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7XG4gICAgICAgIC8vIHRoZSByb290IHNlZ21lbnQgbmVlZHMgc3BlY2lhbCB0cmVhdG1lbnRcbiAgICAgICAgY29uc3Qgc2VnbWVudFNjb3JlcyA9IHNlZ21lbnQubGVuZ3RoID8gW10gOiBbOTAgLyogUGF0aFNjb3JlLlJvb3QgKi9dO1xuICAgICAgICAvLyBhbGxvdyB0cmFpbGluZyBzbGFzaFxuICAgICAgICBpZiAob3B0aW9ucy5zdHJpY3QgJiYgIXNlZ21lbnQubGVuZ3RoKVxuICAgICAgICAgICAgcGF0dGVybiArPSAnLyc7XG4gICAgICAgIGZvciAobGV0IHRva2VuSW5kZXggPSAwOyB0b2tlbkluZGV4IDwgc2VnbWVudC5sZW5ndGg7IHRva2VuSW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBzZWdtZW50W3Rva2VuSW5kZXhdO1xuICAgICAgICAgICAgLy8gcmVzZXRzIHRoZSBzY29yZSBpZiB3ZSBhcmUgaW5zaWRlIGEgc3ViLXNlZ21lbnQgLzphLW90aGVyLTpiXG4gICAgICAgICAgICBsZXQgc3ViU2VnbWVudFNjb3JlID0gNDAgLyogUGF0aFNjb3JlLlNlZ21lbnQgKi8gK1xuICAgICAgICAgICAgICAgIChvcHRpb25zLnNlbnNpdGl2ZSA/IDAuMjUgLyogUGF0aFNjb3JlLkJvbnVzQ2FzZVNlbnNpdGl2ZSAqLyA6IDApO1xuICAgICAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09IDAgLyogVG9rZW5UeXBlLlN0YXRpYyAqLykge1xuICAgICAgICAgICAgICAgIC8vIHByZXBlbmQgdGhlIHNsYXNoIGlmIHdlIGFyZSBzdGFydGluZyBhIG5ldyBzZWdtZW50XG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkluZGV4KVxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9ICcvJztcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHRva2VuLnZhbHVlLnJlcGxhY2UoUkVHRVhfQ0hBUlNfUkUsICdcXFxcJCYnKTtcbiAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gNDAgLyogUGF0aFNjb3JlLlN0YXRpYyAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUgPT09IDEgLyogVG9rZW5UeXBlLlBhcmFtICovKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgcmVwZWF0YWJsZSwgb3B0aW9uYWwsIHJlZ2V4cCB9ID0gdG9rZW47XG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHJlcGVhdGFibGUsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlID0gcmVnZXhwID8gcmVnZXhwIDogQkFTRV9QQVJBTV9QQVRURVJOO1xuICAgICAgICAgICAgICAgIC8vIHRoZSB1c2VyIHByb3ZpZGVkIGEgY3VzdG9tIHJlZ2V4cCAvOmlkKFxcXFxkKylcbiAgICAgICAgICAgICAgICBpZiAocmUgIT09IEJBU0VfUEFSQU1fUEFUVEVSTikge1xuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gMTAgLyogUGF0aFNjb3JlLkJvbnVzQ3VzdG9tUmVnRXhwICovO1xuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlIHJlZ2V4cCBpcyB2YWxpZCBiZWZvcmUgdXNpbmcgaXRcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSZWdFeHAoYCgke3JlfSlgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY3VzdG9tIFJlZ0V4cCBmb3IgcGFyYW0gXCIke3ZhbHVlfVwiICgke3JlfSk6IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB3aGVuIHdlIHJlcGVhdCB3ZSBtdXN0IHRha2UgY2FyZSBvZiB0aGUgcmVwZWF0aW5nIGxlYWRpbmcgc2xhc2hcbiAgICAgICAgICAgICAgICBsZXQgc3ViUGF0dGVybiA9IHJlcGVhdGFibGUgPyBgKCg/OiR7cmV9KSg/Oi8oPzoke3JlfSkpKilgIDogYCgke3JlfSlgO1xuICAgICAgICAgICAgICAgIC8vIHByZXBlbmQgdGhlIHNsYXNoIGlmIHdlIGFyZSBzdGFydGluZyBhIG5ldyBzZWdtZW50XG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkluZGV4KVxuICAgICAgICAgICAgICAgICAgICBzdWJQYXR0ZXJuID1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIGFuIG9wdGlvbmFsIC8gaWYgdGhlcmUgYXJlIG1vcmUgc2VnbWVudHMgZS5nLiAvOnA/LXN0YXRpY1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3IgLzpwPy06cDJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsICYmIHNlZ21lbnQubGVuZ3RoIDwgMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYCg/Oi8ke3N1YlBhdHRlcm59KWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcvJyArIHN1YlBhdHRlcm47XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKVxuICAgICAgICAgICAgICAgICAgICBzdWJQYXR0ZXJuICs9ICc/JztcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHN1YlBhdHRlcm47XG4gICAgICAgICAgICAgICAgc3ViU2VnbWVudFNjb3JlICs9IDIwIC8qIFBhdGhTY29yZS5EeW5hbWljICovO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbClcbiAgICAgICAgICAgICAgICAgICAgc3ViU2VnbWVudFNjb3JlICs9IC04IC8qIFBhdGhTY29yZS5Cb251c09wdGlvbmFsICovO1xuICAgICAgICAgICAgICAgIGlmIChyZXBlYXRhYmxlKVxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gLTIwIC8qIFBhdGhTY29yZS5Cb251c1JlcGVhdGFibGUgKi87XG4gICAgICAgICAgICAgICAgaWYgKHJlID09PSAnLionKVxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gLTUwIC8qIFBhdGhTY29yZS5Cb251c1dpbGRjYXJkICovO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VnbWVudFNjb3Jlcy5wdXNoKHN1YlNlZ21lbnRTY29yZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYW4gZW1wdHkgYXJyYXkgbGlrZSAvaG9tZS8gLT4gW1t7aG9tZX1dLCBbXV1cbiAgICAgICAgLy8gaWYgKCFzZWdtZW50Lmxlbmd0aCkgcGF0dGVybiArPSAnLydcbiAgICAgICAgc2NvcmUucHVzaChzZWdtZW50U2NvcmVzKTtcbiAgICB9XG4gICAgLy8gb25seSBhcHBseSB0aGUgc3RyaWN0IGJvbnVzIHRvIHRoZSBsYXN0IHNjb3JlXG4gICAgaWYgKG9wdGlvbnMuc3RyaWN0ICYmIG9wdGlvbnMuZW5kKSB7XG4gICAgICAgIGNvbnN0IGkgPSBzY29yZS5sZW5ndGggLSAxO1xuICAgICAgICBzY29yZVtpXVtzY29yZVtpXS5sZW5ndGggLSAxXSArPSAwLjcwMDAwMDAwMDAwMDAwMDEgLyogUGF0aFNjb3JlLkJvbnVzU3RyaWN0ICovO1xuICAgIH1cbiAgICAvLyBUT0RPOiBkZXYgb25seSB3YXJuIGRvdWJsZSB0cmFpbGluZyBzbGFzaFxuICAgIGlmICghb3B0aW9ucy5zdHJpY3QpXG4gICAgICAgIHBhdHRlcm4gKz0gJy8/JztcbiAgICBpZiAob3B0aW9ucy5lbmQpXG4gICAgICAgIHBhdHRlcm4gKz0gJyQnO1xuICAgIC8vIGFsbG93IHBhdGhzIGxpa2UgL2R5bmFtaWMgdG8gb25seSBtYXRjaCBkeW5hbWljIG9yIGR5bmFtaWMvLi4uIGJ1dCBub3QgZHluYW1pY19zb21ldGhpbmdfZWxzZVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuc3RyaWN0ICYmICFwYXR0ZXJuLmVuZHNXaXRoKCcvJykpXG4gICAgICAgIHBhdHRlcm4gKz0gJyg/Oi98JCknO1xuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChwYXR0ZXJuLCBvcHRpb25zLnNlbnNpdGl2ZSA/ICcnIDogJ2knKTtcbiAgICBmdW5jdGlvbiBwYXJzZShwYXRoKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gcGF0aC5tYXRjaChyZSk7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHt9O1xuICAgICAgICBpZiAoIW1hdGNoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbWF0Y2gubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbWF0Y2hbaV0gfHwgJyc7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2kgLSAxXTtcbiAgICAgICAgICAgIHBhcmFtc1trZXkubmFtZV0gPSB2YWx1ZSAmJiBrZXkucmVwZWF0YWJsZSA/IHZhbHVlLnNwbGl0KCcvJykgOiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzdHJpbmdpZnkocGFyYW1zKSB7XG4gICAgICAgIGxldCBwYXRoID0gJyc7XG4gICAgICAgIC8vIGZvciBvcHRpb25hbCBwYXJhbWV0ZXJzIHRvIGFsbG93IHRvIGJlIGVtcHR5XG4gICAgICAgIGxldCBhdm9pZER1cGxpY2F0ZWRTbGFzaCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgICAgICAgIGlmICghYXZvaWREdXBsaWNhdGVkU2xhc2ggfHwgIXBhdGguZW5kc1dpdGgoJy8nKSlcbiAgICAgICAgICAgICAgICBwYXRoICs9ICcvJztcbiAgICAgICAgICAgIGF2b2lkRHVwbGljYXRlZFNsYXNoID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHNlZ21lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMCAvKiBUb2tlblR5cGUuU3RhdGljICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGggKz0gdG9rZW4udmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUgPT09IDEgLyogVG9rZW5UeXBlLlBhcmFtICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIHJlcGVhdGFibGUsIG9wdGlvbmFsIH0gPSB0b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB2YWx1ZSBpbiBwYXJhbXMgPyBwYXJhbXNbdmFsdWVdIDogJyc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KHBhcmFtKSAmJiAhcmVwZWF0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQcm92aWRlZCBwYXJhbSBcIiR7dmFsdWV9XCIgaXMgYW4gYXJyYXkgYnV0IGl0IGlzIG5vdCByZXBlYXRhYmxlICgqIG9yICsgbW9kaWZpZXJzKWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBpc0FycmF5KHBhcmFtKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJhbS5qb2luKCcvJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcGFyYW07XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBtb3JlIHRoYW4gb25lIG9wdGlvbmFsIHBhcmFtIGxpa2UgLzphPy1zdGF0aWMgd2UgZG9uJ3QgbmVlZCB0byBjYXJlIGFib3V0IHRoZSBvcHRpb25hbCBwYXJhbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBsYXN0IHNsYXNoIGFzIHdlIGNvdWxkIGJlIGF0IHRoZSBlbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGguZW5kc1dpdGgoJy8nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGFwcGVuZCBhIHNsYXNoIG9uIHRoZSBuZXh0IGl0ZXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdm9pZER1cGxpY2F0ZWRTbGFzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBwYXJhbSBcIiR7dmFsdWV9XCJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXRoICs9IHRleHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGF2b2lkIGVtcHR5IHBhdGggd2hlbiB3ZSBoYXZlIG11bHRpcGxlIG9wdGlvbmFsIHBhcmFtc1xuICAgICAgICByZXR1cm4gcGF0aCB8fCAnLyc7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlLFxuICAgICAgICBzY29yZSxcbiAgICAgICAga2V5cyxcbiAgICAgICAgcGFyc2UsXG4gICAgICAgIHN0cmluZ2lmeSxcbiAgICB9O1xufVxuLyoqXG4gKiBDb21wYXJlcyBhbiBhcnJheSBvZiBudW1iZXJzIGFzIHVzZWQgaW4gUGF0aFBhcnNlci5zY29yZSBhbmQgcmV0dXJucyBhXG4gKiBudW1iZXIuIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYHNvcnRgIGFuIGFycmF5XG4gKlxuICogQHBhcmFtIGEgLSBmaXJzdCBhcnJheSBvZiBudW1iZXJzXG4gKiBAcGFyYW0gYiAtIHNlY29uZCBhcnJheSBvZiBudW1iZXJzXG4gKiBAcmV0dXJucyAwIGlmIGJvdGggYXJlIGVxdWFsLCA8IDAgaWYgYSBzaG91bGQgYmUgc29ydGVkIGZpcnN0LCA+IDAgaWYgYlxuICogc2hvdWxkIGJlIHNvcnRlZCBmaXJzdFxuICovXG5mdW5jdGlvbiBjb21wYXJlU2NvcmVBcnJheShhLCBiKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYS5sZW5ndGggJiYgaSA8IGIubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRpZmYgPSBiW2ldIC0gYVtpXTtcbiAgICAgICAgLy8gb25seSBrZWVwIGdvaW5nIGlmIGRpZmYgPT09IDBcbiAgICAgICAgaWYgKGRpZmYpXG4gICAgICAgICAgICByZXR1cm4gZGlmZjtcbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgbGFzdCBzdWJzZWdtZW50IHdhcyBTdGF0aWMsIHRoZSBzaG9ydGVyIHNlZ21lbnRzIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3RcbiAgICAvLyBvdGhlcndpc2Ugc29ydCB0aGUgbG9uZ2VzdCBzZWdtZW50IGZpcnN0XG4gICAgaWYgKGEubGVuZ3RoIDwgYi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGEubGVuZ3RoID09PSAxICYmIGFbMF0gPT09IDQwIC8qIFBhdGhTY29yZS5TdGF0aWMgKi8gKyA0MCAvKiBQYXRoU2NvcmUuU2VnbWVudCAqL1xuICAgICAgICAgICAgPyAtMVxuICAgICAgICAgICAgOiAxO1xuICAgIH1cbiAgICBlbHNlIGlmIChhLmxlbmd0aCA+IGIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBiLmxlbmd0aCA9PT0gMSAmJiBiWzBdID09PSA0MCAvKiBQYXRoU2NvcmUuU3RhdGljICovICsgNDAgLyogUGF0aFNjb3JlLlNlZ21lbnQgKi9cbiAgICAgICAgICAgID8gMVxuICAgICAgICAgICAgOiAtMTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59XG4vKipcbiAqIENvbXBhcmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB3aXRoIGBzb3J0YCB0byBzb3J0IGFuIGFycmF5IG9mIFBhdGhQYXJzZXJcbiAqXG4gKiBAcGFyYW0gYSAtIGZpcnN0IFBhdGhQYXJzZXJcbiAqIEBwYXJhbSBiIC0gc2Vjb25kIFBhdGhQYXJzZXJcbiAqIEByZXR1cm5zIDAgaWYgYm90aCBhcmUgZXF1YWwsIDwgMCBpZiBhIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3QsID4gMCBpZiBiXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVQYXRoUGFyc2VyU2NvcmUoYSwgYikge1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCBhU2NvcmUgPSBhLnNjb3JlO1xuICAgIGNvbnN0IGJTY29yZSA9IGIuc2NvcmU7XG4gICAgd2hpbGUgKGkgPCBhU2NvcmUubGVuZ3RoICYmIGkgPCBiU2NvcmUubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBjb21wYXJlU2NvcmVBcnJheShhU2NvcmVbaV0sIGJTY29yZVtpXSk7XG4gICAgICAgIC8vIGRvIG5vdCByZXR1cm4gaWYgYm90aCBhcmUgZXF1YWxcbiAgICAgICAgaWYgKGNvbXApXG4gICAgICAgICAgICByZXR1cm4gY29tcDtcbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICBpZiAoTWF0aC5hYnMoYlNjb3JlLmxlbmd0aCAtIGFTY29yZS5sZW5ndGgpID09PSAxKSB7XG4gICAgICAgIGlmIChpc0xhc3RTY29yZU5lZ2F0aXZlKGFTY29yZSkpXG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgaWYgKGlzTGFzdFNjb3JlTmVnYXRpdmUoYlNjb3JlKSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgLy8gaWYgYSBhbmQgYiBzaGFyZSB0aGUgc2FtZSBzY29yZSBlbnRyaWVzIGJ1dCBiIGhhcyBtb3JlLCBzb3J0IGIgZmlyc3RcbiAgICByZXR1cm4gYlNjb3JlLmxlbmd0aCAtIGFTY29yZS5sZW5ndGg7XG4gICAgLy8gdGhpcyBpcyB0aGUgdGVybmFyeSB2ZXJzaW9uXG4gICAgLy8gcmV0dXJuIGFTY29yZS5sZW5ndGggPCBiU2NvcmUubGVuZ3RoXG4gICAgLy8gICA/IDFcbiAgICAvLyAgIDogYVNjb3JlLmxlbmd0aCA+IGJTY29yZS5sZW5ndGhcbiAgICAvLyAgID8gLTFcbiAgICAvLyAgIDogMFxufVxuLyoqXG4gKiBUaGlzIGFsbG93cyBkZXRlY3Rpbmcgc3BsYXRzIGF0IHRoZSBlbmQgb2YgYSBwYXRoOiAvaG9tZS86aWQoLiopKlxuICpcbiAqIEBwYXJhbSBzY29yZSAtIHNjb3JlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBsYXN0IGVudHJ5IGlzIG5lZ2F0aXZlXG4gKi9cbmZ1bmN0aW9uIGlzTGFzdFNjb3JlTmVnYXRpdmUoc2NvcmUpIHtcbiAgICBjb25zdCBsYXN0ID0gc2NvcmVbc2NvcmUubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIHNjb3JlLmxlbmd0aCA+IDAgJiYgbGFzdFtsYXN0Lmxlbmd0aCAtIDFdIDwgMDtcbn1cblxuY29uc3QgUk9PVF9UT0tFTiA9IHtcbiAgICB0eXBlOiAwIC8qIFRva2VuVHlwZS5TdGF0aWMgKi8sXG4gICAgdmFsdWU6ICcnLFxufTtcbmNvbnN0IFZBTElEX1BBUkFNX1JFID0gL1thLXpBLVowLTlfXS87XG4vLyBBZnRlciBzb21lIHByb2ZpbGluZywgdGhlIGNhY2hlIHNlZW1zIHRvIGJlIHVubmVjZXNzYXJ5IGJlY2F1c2UgdG9rZW5pemVQYXRoXG4vLyAodGhlIHNsb3dlc3QgcGFydCBvZiBhZGRpbmcgYSByb3V0ZSkgaXMgdmVyeSBmYXN0XG4vLyBjb25zdCB0b2tlbkNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIFRva2VuW11bXT4oKVxuZnVuY3Rpb24gdG9rZW5pemVQYXRoKHBhdGgpIHtcbiAgICBpZiAoIXBhdGgpXG4gICAgICAgIHJldHVybiBbW11dO1xuICAgIGlmIChwYXRoID09PSAnLycpXG4gICAgICAgIHJldHVybiBbW1JPT1RfVE9LRU5dXTtcbiAgICBpZiAoIXBhdGguc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgID8gYFJvdXRlIHBhdGhzIHNob3VsZCBzdGFydCB3aXRoIGEgXCIvXCI6IFwiJHtwYXRofVwiIHNob3VsZCBiZSBcIi8ke3BhdGh9XCIuYFxuICAgICAgICAgICAgOiBgSW52YWxpZCBwYXRoIFwiJHtwYXRofVwiYCk7XG4gICAgfVxuICAgIC8vIGlmICh0b2tlbkNhY2hlLmhhcyhwYXRoKSkgcmV0dXJuIHRva2VuQ2FjaGUuZ2V0KHBhdGgpIVxuICAgIGZ1bmN0aW9uIGNyYXNoKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFUlIgKCR7c3RhdGV9KS9cIiR7YnVmZmVyfVwiOiAke21lc3NhZ2V9YCk7XG4gICAgfVxuICAgIGxldCBzdGF0ZSA9IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovO1xuICAgIGxldCBwcmV2aW91c1N0YXRlID0gc3RhdGU7XG4gICAgY29uc3QgdG9rZW5zID0gW107XG4gICAgLy8gdGhlIHNlZ21lbnQgd2lsbCBhbHdheXMgYmUgdmFsaWQgYmVjYXVzZSB3ZSBnZXQgaW50byB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgIC8vIHdpdGggdGhlIGxlYWRpbmcgL1xuICAgIGxldCBzZWdtZW50O1xuICAgIGZ1bmN0aW9uIGZpbmFsaXplU2VnbWVudCgpIHtcbiAgICAgICAgaWYgKHNlZ21lbnQpXG4gICAgICAgICAgICB0b2tlbnMucHVzaChzZWdtZW50KTtcbiAgICAgICAgc2VnbWVudCA9IFtdO1xuICAgIH1cbiAgICAvLyBpbmRleCBvbiB0aGUgcGF0aFxuICAgIGxldCBpID0gMDtcbiAgICAvLyBjaGFyIGF0IGluZGV4XG4gICAgbGV0IGNoYXI7XG4gICAgLy8gYnVmZmVyIG9mIHRoZSB2YWx1ZSByZWFkXG4gICAgbGV0IGJ1ZmZlciA9ICcnO1xuICAgIC8vIGN1c3RvbSByZWdleHAgZm9yIGEgcGFyYW1cbiAgICBsZXQgY3VzdG9tUmUgPSAnJztcbiAgICBmdW5jdGlvbiBjb25zdW1lQnVmZmVyKCkge1xuICAgICAgICBpZiAoIWJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHN0YXRlID09PSAwIC8qIFRva2VuaXplclN0YXRlLlN0YXRpYyAqLykge1xuICAgICAgICAgICAgc2VnbWVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIFRva2VuVHlwZS5TdGF0aWMgKi8sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGJ1ZmZlcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAxIC8qIFRva2VuaXplclN0YXRlLlBhcmFtICovIHx8XG4gICAgICAgICAgICBzdGF0ZSA9PT0gMiAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cCAqLyB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IDMgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHBFbmQgKi8pIHtcbiAgICAgICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA+IDEgJiYgKGNoYXIgPT09ICcqJyB8fCBjaGFyID09PSAnKycpKVxuICAgICAgICAgICAgICAgIGNyYXNoKGBBIHJlcGVhdGFibGUgcGFyYW0gKCR7YnVmZmVyfSkgbXVzdCBiZSBhbG9uZSBpbiBpdHMgc2VnbWVudC4gZWc6ICcvOmlkcysuYCk7XG4gICAgICAgICAgICBzZWdtZW50LnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogVG9rZW5UeXBlLlBhcmFtICovLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBidWZmZXIsXG4gICAgICAgICAgICAgICAgcmVnZXhwOiBjdXN0b21SZSxcbiAgICAgICAgICAgICAgICByZXBlYXRhYmxlOiBjaGFyID09PSAnKicgfHwgY2hhciA9PT0gJysnLFxuICAgICAgICAgICAgICAgIG9wdGlvbmFsOiBjaGFyID09PSAnKicgfHwgY2hhciA9PT0gJz8nLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjcmFzaCgnSW52YWxpZCBzdGF0ZSB0byBjb25zdW1lIGJ1ZmZlcicpO1xuICAgICAgICB9XG4gICAgICAgIGJ1ZmZlciA9ICcnO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRDaGFyVG9CdWZmZXIoKSB7XG4gICAgICAgIGJ1ZmZlciArPSBjaGFyO1xuICAgIH1cbiAgICB3aGlsZSAoaSA8IHBhdGgubGVuZ3RoKSB7XG4gICAgICAgIGNoYXIgPSBwYXRoW2krK107XG4gICAgICAgIGlmIChjaGFyID09PSAnXFxcXCcgJiYgc3RhdGUgIT09IDIgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHAgKi8pIHtcbiAgICAgICAgICAgIHByZXZpb3VzU3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgICAgIHN0YXRlID0gNCAvKiBUb2tlbml6ZXJTdGF0ZS5Fc2NhcGVOZXh0ICovO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSAwIC8qIFRva2VuaXplclN0YXRlLlN0YXRpYyAqLzpcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN1bWVCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGl6ZVNlZ21lbnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gJzonKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN1bWVCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAxIC8qIFRva2VuaXplclN0YXRlLlBhcmFtICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2hhclRvQnVmZmVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0IC8qIFRva2VuaXplclN0YXRlLkVzY2FwZU5leHQgKi86XG4gICAgICAgICAgICAgICAgYWRkQ2hhclRvQnVmZmVyKCk7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBwcmV2aW91c1N0YXRlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxIC8qIFRva2VuaXplclN0YXRlLlBhcmFtICovOlxuICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSAnKCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAyIC8qIFRva2VuaXplclN0YXRlLlBhcmFtUmVnRXhwICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChWQUxJRF9QQVJBTV9SRS50ZXN0KGNoYXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZENoYXJUb0J1ZmZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3VtZUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovO1xuICAgICAgICAgICAgICAgICAgICAvLyBnbyBiYWNrIG9uZSBjaGFyYWN0ZXIgaWYgd2Ugd2VyZSBub3QgbW9kaWZ5aW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyICE9PSAnKicgJiYgY2hhciAhPT0gJz8nICYmIGNoYXIgIT09ICcrJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDIgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHAgKi86XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogaXMgaXQgd29ydGggaGFuZGxpbmcgbmVzdGVkIHJlZ2V4cD8gbGlrZSA6cCg/OnByZWZpeF8oW14vXSspX3N1ZmZpeClcbiAgICAgICAgICAgICAgICAvLyBpdCBhbHJlYWR5IHdvcmtzIGJ5IGVzY2FwaW5nIHRoZSBjbG9zaW5nIClcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL3BhdGhzLmVzbS5kZXYvP3A9QUFNZUpiaUF3UUVjREtiQW9BQWtQNjBQRzJSNlFBdmdOYUE2QUZBQ00yQUJ1UUJCI1xuICAgICAgICAgICAgICAgIC8vIGlzIHRoaXMgcmVhbGx5IHNvbWV0aGluZyBwZW9wbGUgbmVlZCBzaW5jZSB5b3UgY2FuIGFsc28gd3JpdGVcbiAgICAgICAgICAgICAgICAvLyAvcHJlZml4XzpwKClfc3VmZml4XG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09ICcpJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgdGhlIGVzY2FwZWQgKVxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tUmVbY3VzdG9tUmUubGVuZ3RoIC0gMV0gPT0gJ1xcXFwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tUmUgPSBjdXN0b21SZS5zbGljZSgwLCAtMSkgKyBjaGFyO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IDMgLyogVG9rZW5pemVyU3RhdGUuUGFyYW1SZWdFeHBFbmQgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjdXN0b21SZSArPSBjaGFyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMyAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cEVuZCAqLzpcbiAgICAgICAgICAgICAgICAvLyBzYW1lIGFzIGZpbmFsaXppbmcgYSBwYXJhbVxuICAgICAgICAgICAgICAgIGNvbnN1bWVCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IDAgLyogVG9rZW5pemVyU3RhdGUuU3RhdGljICovO1xuICAgICAgICAgICAgICAgIC8vIGdvIGJhY2sgb25lIGNoYXJhY3RlciBpZiB3ZSB3ZXJlIG5vdCBtb2RpZnlpbmdcbiAgICAgICAgICAgICAgICBpZiAoY2hhciAhPT0gJyonICYmIGNoYXIgIT09ICc/JyAmJiBjaGFyICE9PSAnKycpXG4gICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICBjdXN0b21SZSA9ICcnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjcmFzaCgnVW5rbm93biBzdGF0ZScpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzdGF0ZSA9PT0gMiAvKiBUb2tlbml6ZXJTdGF0ZS5QYXJhbVJlZ0V4cCAqLylcbiAgICAgICAgY3Jhc2goYFVuZmluaXNoZWQgY3VzdG9tIFJlZ0V4cCBmb3IgcGFyYW0gXCIke2J1ZmZlcn1cImApO1xuICAgIGNvbnN1bWVCdWZmZXIoKTtcbiAgICBmaW5hbGl6ZVNlZ21lbnQoKTtcbiAgICAvLyB0b2tlbkNhY2hlLnNldChwYXRoLCB0b2tlbnMpXG4gICAgcmV0dXJuIHRva2Vucztcbn1cblxuZnVuY3Rpb24gY3JlYXRlUm91dGVSZWNvcmRNYXRjaGVyKHJlY29yZCwgcGFyZW50LCBvcHRpb25zKSB7XG4gICAgY29uc3QgcGFyc2VyID0gdG9rZW5zVG9QYXJzZXIodG9rZW5pemVQYXRoKHJlY29yZC5wYXRoKSwgb3B0aW9ucyk7XG4gICAgLy8gd2FybiBhZ2FpbnN0IHBhcmFtcyB3aXRoIHRoZSBzYW1lIG5hbWVcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nS2V5cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcGFyc2VyLmtleXMpIHtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0tleXMuaGFzKGtleS5uYW1lKSlcbiAgICAgICAgICAgICAgICB3YXJuKGBGb3VuZCBkdXBsaWNhdGVkIHBhcmFtcyB3aXRoIG5hbWUgXCIke2tleS5uYW1lfVwiIGZvciBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIi4gT25seSB0aGUgbGFzdCBvbmUgd2lsbCBiZSBhdmFpbGFibGUgb24gXCIkcm91dGUucGFyYW1zXCIuYCk7XG4gICAgICAgICAgICBleGlzdGluZ0tleXMuYWRkKGtleS5uYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBtYXRjaGVyID0gYXNzaWduKHBhcnNlciwge1xuICAgICAgICByZWNvcmQsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgLy8gdGhlc2UgbmVlZHMgdG8gYmUgcG9wdWxhdGVkIGJ5IHRoZSBwYXJlbnRcbiAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICBhbGlhczogW10sXG4gICAgfSk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgICAvLyBib3RoIGFyZSBhbGlhc2VzIG9yIGJvdGggYXJlIG5vdCBhbGlhc2VzXG4gICAgICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gbWl4IHRoZW0gYmVjYXVzZSB0aGUgb3JkZXIgaXMgdXNlZCB3aGVuXG4gICAgICAgIC8vIHBhc3Npbmcgb3JpZ2luYWxSZWNvcmQgaW4gTWF0Y2hlci5hZGRSb3V0ZVxuICAgICAgICBpZiAoIW1hdGNoZXIucmVjb3JkLmFsaWFzT2YgPT09ICFwYXJlbnQucmVjb3JkLmFsaWFzT2YpXG4gICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChtYXRjaGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoZXI7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIFJvdXRlciBNYXRjaGVyLlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHJvdXRlcyAtIGFycmF5IG9mIGluaXRpYWwgcm91dGVzXG4gKiBAcGFyYW0gZ2xvYmFsT3B0aW9ucyAtIGdsb2JhbCByb3V0ZSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlck1hdGNoZXIocm91dGVzLCBnbG9iYWxPcHRpb25zKSB7XG4gICAgLy8gbm9ybWFsaXplZCBvcmRlcmVkIGFycmF5IG9mIG1hdGNoZXJzXG4gICAgY29uc3QgbWF0Y2hlcnMgPSBbXTtcbiAgICBjb25zdCBtYXRjaGVyTWFwID0gbmV3IE1hcCgpO1xuICAgIGdsb2JhbE9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoeyBzdHJpY3Q6IGZhbHNlLCBlbmQ6IHRydWUsIHNlbnNpdGl2ZTogZmFsc2UgfSwgZ2xvYmFsT3B0aW9ucyk7XG4gICAgZnVuY3Rpb24gZ2V0UmVjb3JkTWF0Y2hlcihuYW1lKSB7XG4gICAgICAgIHJldHVybiBtYXRjaGVyTWFwLmdldChuYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkUm91dGUocmVjb3JkLCBwYXJlbnQsIG9yaWdpbmFsUmVjb3JkKSB7XG4gICAgICAgIC8vIHVzZWQgbGF0ZXIgb24gdG8gcmVtb3ZlIGJ5IG5hbWVcbiAgICAgICAgY29uc3QgaXNSb290QWRkID0gIW9yaWdpbmFsUmVjb3JkO1xuICAgICAgICBjb25zdCBtYWluTm9ybWFsaXplZFJlY29yZCA9IG5vcm1hbGl6ZVJvdXRlUmVjb3JkKHJlY29yZCk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgIGNoZWNrQ2hpbGRNaXNzaW5nTmFtZVdpdGhFbXB0eVBhdGgobWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgbWlnaHQgYmUgdGhlIGNoaWxkIG9mIGFuIGFsaWFzXG4gICAgICAgIG1haW5Ob3JtYWxpemVkUmVjb3JkLmFsaWFzT2YgPSBvcmlnaW5hbFJlY29yZCAmJiBvcmlnaW5hbFJlY29yZC5yZWNvcmQ7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoZ2xvYmFsT3B0aW9ucywgcmVjb3JkKTtcbiAgICAgICAgLy8gZ2VuZXJhdGUgYW4gYXJyYXkgb2YgcmVjb3JkcyB0byBjb3JyZWN0bHkgaGFuZGxlIGFsaWFzZXNcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZFJlY29yZHMgPSBbbWFpbk5vcm1hbGl6ZWRSZWNvcmRdO1xuICAgICAgICBpZiAoJ2FsaWFzJyBpbiByZWNvcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzZXMgPSB0eXBlb2YgcmVjb3JkLmFsaWFzID09PSAnc3RyaW5nJyA/IFtyZWNvcmQuYWxpYXNdIDogcmVjb3JkLmFsaWFzO1xuICAgICAgICAgICAgZm9yIChjb25zdCBhbGlhcyBvZiBhbGlhc2VzKSB7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFJlY29yZHMucHVzaChcbiAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIG5vcm1hbGl6ZSBhZ2FpbiB0byBlbnN1cmUgdGhlIGBtb2RzYCBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIC8vIGJlaW5nIG5vbiBlbnVtZXJhYmxlXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplUm91dGVSZWNvcmQoYXNzaWduKHt9LCBtYWluTm9ybWFsaXplZFJlY29yZCwge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGFsbG93cyB1cyB0byBob2xkIGEgY29weSBvZiB0aGUgYGNvbXBvbmVudHNgIG9wdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBzbyB0aGF0IGFzeW5jIGNvbXBvbmVudHMgY2FjaGUgaXMgaG9sZCBvbiB0aGUgb3JpZ2luYWwgcmVjb3JkXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IG9yaWdpbmFsUmVjb3JkXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG9yaWdpbmFsUmVjb3JkLnJlY29yZC5jb21wb25lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5Ob3JtYWxpemVkUmVjb3JkLmNvbXBvbmVudHMsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGFsaWFzLFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBtaWdodCBiZSB0aGUgY2hpbGQgb2YgYW4gYWxpYXNcbiAgICAgICAgICAgICAgICAgICAgYWxpYXNPZjogb3JpZ2luYWxSZWNvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gb3JpZ2luYWxSZWNvcmQucmVjb3JkXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5Ob3JtYWxpemVkUmVjb3JkLFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWxpYXNlcyBhcmUgYWx3YXlzIG9mIHRoZSBzYW1lIGtpbmQgYXMgdGhlIG9yaWdpbmFsIHNpbmNlIHRoZXlcbiAgICAgICAgICAgICAgICAgICAgLy8gYXJlIGRlZmluZWQgb24gdGhlIHNhbWUgcmVjb3JkXG4gICAgICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbWF0Y2hlcjtcbiAgICAgICAgbGV0IG9yaWdpbmFsTWF0Y2hlcjtcbiAgICAgICAgZm9yIChjb25zdCBub3JtYWxpemVkUmVjb3JkIG9mIG5vcm1hbGl6ZWRSZWNvcmRzKSB7XG4gICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IG5vcm1hbGl6ZWRSZWNvcmQ7XG4gICAgICAgICAgICAvLyBCdWlsZCB1cCB0aGUgcGF0aCBmb3IgbmVzdGVkIHJvdXRlcyBpZiB0aGUgY2hpbGQgaXNuJ3QgYW4gYWJzb2x1dGVcbiAgICAgICAgICAgIC8vIHJvdXRlLiBPbmx5IGFkZCB0aGUgLyBkZWxpbWl0ZXIgaWYgdGhlIGNoaWxkIHBhdGggaXNuJ3QgZW1wdHkgYW5kIGlmIHRoZVxuICAgICAgICAgICAgLy8gcGFyZW50IHBhdGggZG9lc24ndCBoYXZlIGEgdHJhaWxpbmcgc2xhc2hcbiAgICAgICAgICAgIGlmIChwYXJlbnQgJiYgcGF0aFswXSAhPT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IHBhcmVudC5yZWNvcmQucGF0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW5nU2xhc2ggPSBwYXJlbnRQYXRoW3BhcmVudFBhdGgubGVuZ3RoIC0gMV0gPT09ICcvJyA/ICcnIDogJy8nO1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRSZWNvcmQucGF0aCA9XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZWNvcmQucGF0aCArIChwYXRoICYmIGNvbm5lY3RpbmdTbGFzaCArIHBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBub3JtYWxpemVkUmVjb3JkLnBhdGggPT09ICcqJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2F0Y2ggYWxsIHJvdXRlcyAoXCIqXCIpIG11c3Qgbm93IGJlIGRlZmluZWQgdXNpbmcgYSBwYXJhbSB3aXRoIGEgY3VzdG9tIHJlZ2V4cC5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAgJ1NlZSBtb3JlIGF0IGh0dHBzOi8vcm91dGVyLnZ1ZWpzLm9yZy9ndWlkZS9taWdyYXRpb24vI1JlbW92ZWQtc3Rhci1vci1jYXRjaC1hbGwtcm91dGVzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBvYmplY3QgYmVmb3JlaGFuZCwgc28gaXQgY2FuIGJlIHBhc3NlZCB0byBjaGlsZHJlblxuICAgICAgICAgICAgbWF0Y2hlciA9IGNyZWF0ZVJvdXRlUmVjb3JkTWF0Y2hlcihub3JtYWxpemVkUmVjb3JkLCBwYXJlbnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXJlbnQgJiYgcGF0aFswXSA9PT0gJy8nKVxuICAgICAgICAgICAgICAgIGNoZWNrTWlzc2luZ1BhcmFtc0luQWJzb2x1dGVQYXRoKG1hdGNoZXIsIHBhcmVudCk7XG4gICAgICAgICAgICAvLyBpZiB3ZSBhcmUgYW4gYWxpYXMgd2UgbXVzdCB0ZWxsIHRoZSBvcmlnaW5hbCByZWNvcmQgdGhhdCB3ZSBleGlzdCxcbiAgICAgICAgICAgIC8vIHNvIHdlIGNhbiBiZSByZW1vdmVkXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxSZWNvcmQpIHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFJlY29yZC5hbGlhcy5wdXNoKG1hdGNoZXIpO1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tTYW1lUGFyYW1zKG9yaWdpbmFsUmVjb3JkLCBtYXRjaGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UsIHRoZSBmaXJzdCByZWNvcmQgaXMgdGhlIG9yaWdpbmFsIGFuZCBvdGhlcnMgYXJlIGFsaWFzZXNcbiAgICAgICAgICAgICAgICBvcmlnaW5hbE1hdGNoZXIgPSBvcmlnaW5hbE1hdGNoZXIgfHwgbWF0Y2hlcjtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxNYXRjaGVyICE9PSBtYXRjaGVyKVxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1hdGNoZXIuYWxpYXMucHVzaChtYXRjaGVyKTtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIHJvdXRlIGlmIG5hbWVkIGFuZCBvbmx5IGZvciB0aGUgdG9wIHJlY29yZCAoYXZvaWQgaW4gbmVzdGVkIGNhbGxzKVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgd29ya3MgYmVjYXVzZSB0aGUgb3JpZ2luYWwgcmVjb3JkIGlzIHRoZSBmaXJzdCBvbmVcbiAgICAgICAgICAgICAgICBpZiAoaXNSb290QWRkICYmIHJlY29yZC5uYW1lICYmICFpc0FsaWFzUmVjb3JkKG1hdGNoZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrU2FtZU5hbWVBc0FuY2VzdG9yKHJlY29yZCwgcGFyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZW1vdmVSb3V0ZShyZWNvcmQubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQXZvaWQgYWRkaW5nIGEgcmVjb3JkIHRoYXQgZG9lc24ndCBkaXNwbGF5IGFueXRoaW5nLiBUaGlzIGFsbG93cyBwYXNzaW5nIHRocm91Z2ggcmVjb3JkcyB3aXRob3V0IGEgY29tcG9uZW50IHRvXG4gICAgICAgICAgICAvLyBub3QgYmUgcmVhY2hlZCBhbmQgcGFzcyB0aHJvdWdoIHRoZSBjYXRjaCBhbGwgcm91dGVcbiAgICAgICAgICAgIGlmIChpc01hdGNoYWJsZShtYXRjaGVyKSkge1xuICAgICAgICAgICAgICAgIGluc2VydE1hdGNoZXIobWF0Y2hlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWFpbk5vcm1hbGl6ZWRSZWNvcmQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IG1haW5Ob3JtYWxpemVkUmVjb3JkLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUm91dGUoY2hpbGRyZW5baV0sIG1hdGNoZXIsIG9yaWdpbmFsUmVjb3JkICYmIG9yaWdpbmFsUmVjb3JkLmNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiB0aGVyZSB3YXMgbm8gb3JpZ2luYWwgcmVjb3JkLCB0aGVuIHRoZSBmaXJzdCBvbmUgd2FzIG5vdCBhbiBhbGlhcyBhbmQgYWxsXG4gICAgICAgICAgICAvLyBvdGhlciBhbGlhc2VzIChpZiBhbnkpIG5lZWQgdG8gcmVmZXJlbmNlIHRoaXMgcmVjb3JkIHdoZW4gYWRkaW5nIGNoaWxkcmVuXG4gICAgICAgICAgICBvcmlnaW5hbFJlY29yZCA9IG9yaWdpbmFsUmVjb3JkIHx8IG1hdGNoZXI7XG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgbm9ybWFsaXplZCByZWNvcmRzIGZvciBtb3JlIGZsZXhpYmlsaXR5XG4gICAgICAgICAgICAvLyBpZiAocGFyZW50ICYmIGlzQWxpYXNSZWNvcmQob3JpZ2luYWxSZWNvcmQpKSB7XG4gICAgICAgICAgICAvLyAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKG9yaWdpbmFsUmVjb3JkKVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmlnaW5hbE1hdGNoZXJcbiAgICAgICAgICAgID8gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHNpbmNlIG90aGVyIG1hdGNoZXJzIGFyZSBhbGlhc2VzLCB0aGV5IHNob3VsZCBiZSByZW1vdmVkIGJ5IHRoZSBvcmlnaW5hbCBtYXRjaGVyXG4gICAgICAgICAgICAgICAgcmVtb3ZlUm91dGUob3JpZ2luYWxNYXRjaGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbm9vcDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlUm91dGUobWF0Y2hlclJlZikge1xuICAgICAgICBpZiAoaXNSb3V0ZU5hbWUobWF0Y2hlclJlZikpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXIgPSBtYXRjaGVyTWFwLmdldChtYXRjaGVyUmVmKTtcbiAgICAgICAgICAgIGlmIChtYXRjaGVyKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlck1hcC5kZWxldGUobWF0Y2hlclJlZik7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcnMuc3BsaWNlKG1hdGNoZXJzLmluZGV4T2YobWF0Y2hlciksIDEpO1xuICAgICAgICAgICAgICAgIG1hdGNoZXIuY2hpbGRyZW4uZm9yRWFjaChyZW1vdmVSb3V0ZSk7XG4gICAgICAgICAgICAgICAgbWF0Y2hlci5hbGlhcy5mb3JFYWNoKHJlbW92ZVJvdXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbWF0Y2hlcnMuaW5kZXhPZihtYXRjaGVyUmVmKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlclJlZi5yZWNvcmQubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlck1hcC5kZWxldGUobWF0Y2hlclJlZi5yZWNvcmQubmFtZSk7XG4gICAgICAgICAgICAgICAgbWF0Y2hlclJlZi5jaGlsZHJlbi5mb3JFYWNoKHJlbW92ZVJvdXRlKTtcbiAgICAgICAgICAgICAgICBtYXRjaGVyUmVmLmFsaWFzLmZvckVhY2gocmVtb3ZlUm91dGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFJvdXRlcygpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoZXJzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbnNlcnRNYXRjaGVyKG1hdGNoZXIpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBmaW5kSW5zZXJ0aW9uSW5kZXgobWF0Y2hlciwgbWF0Y2hlcnMpO1xuICAgICAgICBtYXRjaGVycy5zcGxpY2UoaW5kZXgsIDAsIG1hdGNoZXIpO1xuICAgICAgICAvLyBvbmx5IGFkZCB0aGUgb3JpZ2luYWwgcmVjb3JkIHRvIHRoZSBuYW1lIG1hcFxuICAgICAgICBpZiAobWF0Y2hlci5yZWNvcmQubmFtZSAmJiAhaXNBbGlhc1JlY29yZChtYXRjaGVyKSlcbiAgICAgICAgICAgIG1hdGNoZXJNYXAuc2V0KG1hdGNoZXIucmVjb3JkLm5hbWUsIG1hdGNoZXIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZXNvbHZlKGxvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24pIHtcbiAgICAgICAgbGV0IG1hdGNoZXI7XG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcbiAgICAgICAgbGV0IHBhdGg7XG4gICAgICAgIGxldCBuYW1lO1xuICAgICAgICBpZiAoJ25hbWUnIGluIGxvY2F0aW9uICYmIGxvY2F0aW9uLm5hbWUpIHtcbiAgICAgICAgICAgIG1hdGNoZXIgPSBtYXRjaGVyTWFwLmdldChsb2NhdGlvbi5uYW1lKTtcbiAgICAgICAgICAgIGlmICghbWF0Y2hlcilcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVSb3V0ZXJFcnJvcigxIC8qIEVycm9yVHlwZXMuTUFUQ0hFUl9OT1RfRk9VTkQgKi8sIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB3YXJuIGlmIHRoZSB1c2VyIGlzIHBhc3NpbmcgaW52YWxpZCBwYXJhbXMgc28gdGhleSBjYW4gZGVidWcgaXQgYmV0dGVyIHdoZW4gdGhleSBnZXQgcmVtb3ZlZFxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRQYXJhbXMgPSBPYmplY3Qua2V5cyhsb2NhdGlvbi5wYXJhbXMgfHwge30pLmZpbHRlcihwYXJhbU5hbWUgPT4gIW1hdGNoZXIua2V5cy5maW5kKGsgPT4gay5uYW1lID09PSBwYXJhbU5hbWUpKTtcbiAgICAgICAgICAgICAgICBpZiAoaW52YWxpZFBhcmFtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRGlzY2FyZGVkIGludmFsaWQgcGFyYW0ocykgXCIke2ludmFsaWRQYXJhbXMuam9pbignXCIsIFwiJyl9XCIgd2hlbiBuYXZpZ2F0aW5nLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JvdXRlci9ibG9iL21haW4vcGFja2FnZXMvcm91dGVyL0NIQU5HRUxPRy5tZCM0MTQtMjAyMi0wOC0yMiBmb3IgbW9yZSBkZXRhaWxzLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5hbWUgPSBtYXRjaGVyLnJlY29yZC5uYW1lO1xuICAgICAgICAgICAgcGFyYW1zID0gYXNzaWduKFxuICAgICAgICAgICAgLy8gcGFyYW1zRnJvbUxvY2F0aW9uIGlzIGEgbmV3IG9iamVjdFxuICAgICAgICAgICAgcGFyYW1zRnJvbUxvY2F0aW9uKGN1cnJlbnRMb2NhdGlvbi5wYXJhbXMsIFxuICAgICAgICAgICAgLy8gb25seSBrZWVwIHBhcmFtcyB0aGF0IGV4aXN0IGluIHRoZSByZXNvbHZlZCBsb2NhdGlvblxuICAgICAgICAgICAgLy8gb25seSBrZWVwIG9wdGlvbmFsIHBhcmFtcyBjb21pbmcgZnJvbSBhIHBhcmVudCByZWNvcmRcbiAgICAgICAgICAgIG1hdGNoZXIua2V5c1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoayA9PiAhay5vcHRpb25hbClcbiAgICAgICAgICAgICAgICAuY29uY2F0KG1hdGNoZXIucGFyZW50ID8gbWF0Y2hlci5wYXJlbnQua2V5cy5maWx0ZXIoayA9PiBrLm9wdGlvbmFsKSA6IFtdKVxuICAgICAgICAgICAgICAgIC5tYXAoayA9PiBrLm5hbWUpKSwgXG4gICAgICAgICAgICAvLyBkaXNjYXJkIGFueSBleGlzdGluZyBwYXJhbXMgaW4gdGhlIGN1cnJlbnQgbG9jYXRpb24gdGhhdCBkbyBub3QgZXhpc3QgaGVyZVxuICAgICAgICAgICAgLy8gIzE0OTcgdGhpcyBlbnN1cmVzIGJldHRlciBhY3RpdmUvZXhhY3QgbWF0Y2hpbmdcbiAgICAgICAgICAgIGxvY2F0aW9uLnBhcmFtcyAmJlxuICAgICAgICAgICAgICAgIHBhcmFtc0Zyb21Mb2NhdGlvbihsb2NhdGlvbi5wYXJhbXMsIG1hdGNoZXIua2V5cy5tYXAoayA9PiBrLm5hbWUpKSk7XG4gICAgICAgICAgICAvLyB0aHJvd3MgaWYgY2Fubm90IGJlIHN0cmluZ2lmaWVkXG4gICAgICAgICAgICBwYXRoID0gbWF0Y2hlci5zdHJpbmdpZnkocGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsb2NhdGlvbi5wYXRoICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gcmVzb2x2ZSB0aGUgcGF0aCB3aXRoIHRoZSBtYXRjaGVyIGFzIGl0IHdhcyBwcm92aWRlZFxuICAgICAgICAgICAgLy8gdGhpcyBhbHNvIGFsbG93cyB0aGUgdXNlciB0byBjb250cm9sIHRoZSBlbmNvZGluZ1xuICAgICAgICAgICAgcGF0aCA9IGxvY2F0aW9uLnBhdGg7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFwYXRoLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYFRoZSBNYXRjaGVyIGNhbm5vdCByZXNvbHZlIHJlbGF0aXZlIHBhdGhzIGJ1dCByZWNlaXZlZCBcIiR7cGF0aH1cIi4gVW5sZXNzIHlvdSBkaXJlY3RseSBjYWxsZWQgXFxgbWF0Y2hlci5yZXNvbHZlKFwiJHtwYXRofVwiKVxcYCwgdGhpcyBpcyBwcm9iYWJseSBhIGJ1ZyBpbiB2dWUtcm91dGVyLiBQbGVhc2Ugb3BlbiBhbiBpc3N1ZSBhdCBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy9uZXcvY2hvb3NlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWF0Y2hlciA9IG1hdGNoZXJzLmZpbmQobSA9PiBtLnJlLnRlc3QocGF0aCkpO1xuICAgICAgICAgICAgLy8gbWF0Y2hlciBzaG91bGQgaGF2ZSBhIHZhbHVlIGFmdGVyIHRoZSBsb29wXG4gICAgICAgICAgICBpZiAobWF0Y2hlcikge1xuICAgICAgICAgICAgICAgIC8vIHdlIGtub3cgdGhlIG1hdGNoZXIgd29ya3MgYmVjYXVzZSB3ZSB0ZXN0ZWQgdGhlIHJlZ2V4cFxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IG1hdGNoZXIucGFyc2UocGF0aCk7XG4gICAgICAgICAgICAgICAgbmFtZSA9IG1hdGNoZXIucmVjb3JkLm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBsb2NhdGlvbiBpcyBhIHJlbGF0aXZlIHBhdGhcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIG1hdGNoIGJ5IG5hbWUgb3IgcGF0aCBvZiBjdXJyZW50IHJvdXRlXG4gICAgICAgICAgICBtYXRjaGVyID0gY3VycmVudExvY2F0aW9uLm5hbWVcbiAgICAgICAgICAgICAgICA/IG1hdGNoZXJNYXAuZ2V0KGN1cnJlbnRMb2NhdGlvbi5uYW1lKVxuICAgICAgICAgICAgICAgIDogbWF0Y2hlcnMuZmluZChtID0+IG0ucmUudGVzdChjdXJyZW50TG9jYXRpb24ucGF0aCkpO1xuICAgICAgICAgICAgaWYgKCFtYXRjaGVyKVxuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZVJvdXRlckVycm9yKDEgLyogRXJyb3JUeXBlcy5NQVRDSEVSX05PVF9GT1VORCAqLywge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExvY2F0aW9uLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbmFtZSA9IG1hdGNoZXIucmVjb3JkLm5hbWU7XG4gICAgICAgICAgICAvLyBzaW5jZSB3ZSBhcmUgbmF2aWdhdGluZyB0byB0aGUgc2FtZSBsb2NhdGlvbiwgd2UgZG9uJ3QgbmVlZCB0byBwaWNrIHRoZVxuICAgICAgICAgICAgLy8gcGFyYW1zIGxpa2Ugd2hlbiBgbmFtZWAgaXMgcHJvdmlkZWRcbiAgICAgICAgICAgIHBhcmFtcyA9IGFzc2lnbih7fSwgY3VycmVudExvY2F0aW9uLnBhcmFtcywgbG9jYXRpb24ucGFyYW1zKTtcbiAgICAgICAgICAgIHBhdGggPSBtYXRjaGVyLnN0cmluZ2lmeShwYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hdGNoZWQgPSBbXTtcbiAgICAgICAgbGV0IHBhcmVudE1hdGNoZXIgPSBtYXRjaGVyO1xuICAgICAgICB3aGlsZSAocGFyZW50TWF0Y2hlcikge1xuICAgICAgICAgICAgLy8gcmV2ZXJzZWQgb3JkZXIgc28gcGFyZW50cyBhcmUgYXQgdGhlIGJlZ2lubmluZ1xuICAgICAgICAgICAgbWF0Y2hlZC51bnNoaWZ0KHBhcmVudE1hdGNoZXIucmVjb3JkKTtcbiAgICAgICAgICAgIHBhcmVudE1hdGNoZXIgPSBwYXJlbnRNYXRjaGVyLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICBtYXRjaGVkLFxuICAgICAgICAgICAgbWV0YTogbWVyZ2VNZXRhRmllbGRzKG1hdGNoZWQpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBhZGQgaW5pdGlhbCByb3V0ZXNcbiAgICByb3V0ZXMuZm9yRWFjaChyb3V0ZSA9PiBhZGRSb3V0ZShyb3V0ZSkpO1xuICAgIGZ1bmN0aW9uIGNsZWFyUm91dGVzKCkge1xuICAgICAgICBtYXRjaGVycy5sZW5ndGggPSAwO1xuICAgICAgICBtYXRjaGVyTWFwLmNsZWFyKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGFkZFJvdXRlLFxuICAgICAgICByZXNvbHZlLFxuICAgICAgICByZW1vdmVSb3V0ZSxcbiAgICAgICAgY2xlYXJSb3V0ZXMsXG4gICAgICAgIGdldFJvdXRlcyxcbiAgICAgICAgZ2V0UmVjb3JkTWF0Y2hlcixcbiAgICB9O1xufVxuZnVuY3Rpb24gcGFyYW1zRnJvbUxvY2F0aW9uKHBhcmFtcywga2V5cykge1xuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgaWYgKGtleSBpbiBwYXJhbXMpXG4gICAgICAgICAgICBuZXdQYXJhbXNba2V5XSA9IHBhcmFtc1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gbmV3UGFyYW1zO1xufVxuLyoqXG4gKiBOb3JtYWxpemVzIGEgUm91dGVSZWNvcmRSYXcuIENyZWF0ZXMgYSBjb3B5XG4gKlxuICogQHBhcmFtIHJlY29yZFxuICogQHJldHVybnMgdGhlIG5vcm1hbGl6ZWQgdmVyc2lvblxuICovXG5mdW5jdGlvbiBub3JtYWxpemVSb3V0ZVJlY29yZChyZWNvcmQpIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0ge1xuICAgICAgICBwYXRoOiByZWNvcmQucGF0aCxcbiAgICAgICAgcmVkaXJlY3Q6IHJlY29yZC5yZWRpcmVjdCxcbiAgICAgICAgbmFtZTogcmVjb3JkLm5hbWUsXG4gICAgICAgIG1ldGE6IHJlY29yZC5tZXRhIHx8IHt9LFxuICAgICAgICBhbGlhc09mOiByZWNvcmQuYWxpYXNPZixcbiAgICAgICAgYmVmb3JlRW50ZXI6IHJlY29yZC5iZWZvcmVFbnRlcixcbiAgICAgICAgcHJvcHM6IG5vcm1hbGl6ZVJlY29yZFByb3BzKHJlY29yZCksXG4gICAgICAgIGNoaWxkcmVuOiByZWNvcmQuY2hpbGRyZW4gfHwgW10sXG4gICAgICAgIGluc3RhbmNlczoge30sXG4gICAgICAgIGxlYXZlR3VhcmRzOiBuZXcgU2V0KCksXG4gICAgICAgIHVwZGF0ZUd1YXJkczogbmV3IFNldCgpLFxuICAgICAgICBlbnRlckNhbGxiYWNrczoge30sXG4gICAgICAgIC8vIG11c3QgYmUgZGVjbGFyZWQgYWZ0ZXJ3YXJkc1xuICAgICAgICAvLyBtb2RzOiB7fSxcbiAgICAgICAgY29tcG9uZW50czogJ2NvbXBvbmVudHMnIGluIHJlY29yZFxuICAgICAgICAgICAgPyByZWNvcmQuY29tcG9uZW50cyB8fCBudWxsXG4gICAgICAgICAgICA6IHJlY29yZC5jb21wb25lbnQgJiYgeyBkZWZhdWx0OiByZWNvcmQuY29tcG9uZW50IH0sXG4gICAgfTtcbiAgICAvLyBtb2RzIGNvbnRhaW4gbW9kdWxlcyBhbmQgc2hvdWxkbid0IGJlIGNvcGllZCxcbiAgICAvLyBsb2dnZWQgb3IgYW55dGhpbmcuIEl0J3MganVzdCB1c2VkIGZvciBpbnRlcm5hbFxuICAgIC8vIGFkdmFuY2VkIHVzZSBjYXNlcyBsaWtlIGRhdGEgbG9hZGVyc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub3JtYWxpemVkLCAnbW9kcycsIHtcbiAgICAgICAgdmFsdWU6IHt9LFxuICAgIH0pO1xuICAgIHJldHVybiBub3JtYWxpemVkO1xufVxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIG9wdGlvbmFsIGBwcm9wc2AgaW4gYSByZWNvcmQgdG8gYWx3YXlzIGJlIGFuIG9iamVjdCBzaW1pbGFyIHRvXG4gKiBjb21wb25lbnRzLiBBbHNvIGFjY2VwdCBhIGJvb2xlYW4gZm9yIGNvbXBvbmVudHMuXG4gKiBAcGFyYW0gcmVjb3JkXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVJlY29yZFByb3BzKHJlY29yZCkge1xuICAgIGNvbnN0IHByb3BzT2JqZWN0ID0ge307XG4gICAgLy8gcHJvcHMgZG9lcyBub3QgZXhpc3Qgb24gcmVkaXJlY3QgcmVjb3JkcywgYnV0IHdlIGNhbiBzZXQgZmFsc2UgZGlyZWN0bHlcbiAgICBjb25zdCBwcm9wcyA9IHJlY29yZC5wcm9wcyB8fCBmYWxzZTtcbiAgICBpZiAoJ2NvbXBvbmVudCcgaW4gcmVjb3JkKSB7XG4gICAgICAgIHByb3BzT2JqZWN0LmRlZmF1bHQgPSBwcm9wcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIE5PVEU6IHdlIGNvdWxkIGFsc28gYWxsb3cgYSBmdW5jdGlvbiB0byBiZSBhcHBsaWVkIHRvIGV2ZXJ5IGNvbXBvbmVudC5cbiAgICAgICAgLy8gV291bGQgbmVlZCB1c2VyIGZlZWRiYWNrIGZvciB1c2UgY2FzZXNcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHJlY29yZC5jb21wb25lbnRzKVxuICAgICAgICAgICAgcHJvcHNPYmplY3RbbmFtZV0gPSB0eXBlb2YgcHJvcHMgPT09ICdvYmplY3QnID8gcHJvcHNbbmFtZV0gOiBwcm9wcztcbiAgICB9XG4gICAgcmV0dXJuIHByb3BzT2JqZWN0O1xufVxuLyoqXG4gKiBDaGVja3MgaWYgYSByZWNvcmQgb3IgYW55IG9mIGl0cyBwYXJlbnQgaXMgYW4gYWxpYXNcbiAqIEBwYXJhbSByZWNvcmRcbiAqL1xuZnVuY3Rpb24gaXNBbGlhc1JlY29yZChyZWNvcmQpIHtcbiAgICB3aGlsZSAocmVjb3JkKSB7XG4gICAgICAgIGlmIChyZWNvcmQucmVjb3JkLmFsaWFzT2YpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmVjb3JkID0gcmVjb3JkLnBhcmVudDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBNZXJnZSBtZXRhIGZpZWxkcyBvZiBhbiBhcnJheSBvZiByZWNvcmRzXG4gKlxuICogQHBhcmFtIG1hdGNoZWQgLSBhcnJheSBvZiBtYXRjaGVkIHJlY29yZHNcbiAqL1xuZnVuY3Rpb24gbWVyZ2VNZXRhRmllbGRzKG1hdGNoZWQpIHtcbiAgICByZXR1cm4gbWF0Y2hlZC5yZWR1Y2UoKG1ldGEsIHJlY29yZCkgPT4gYXNzaWduKG1ldGEsIHJlY29yZC5tZXRhKSwge30pO1xufVxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKGRlZmF1bHRzLCBwYXJ0aWFsT3B0aW9ucykge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkZWZhdWx0cykge1xuICAgICAgICBvcHRpb25zW2tleV0gPSBrZXkgaW4gcGFydGlhbE9wdGlvbnMgPyBwYXJ0aWFsT3B0aW9uc1trZXldIDogZGVmYXVsdHNba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnM7XG59XG5mdW5jdGlvbiBpc1NhbWVQYXJhbShhLCBiKSB7XG4gICAgcmV0dXJuIChhLm5hbWUgPT09IGIubmFtZSAmJlxuICAgICAgICBhLm9wdGlvbmFsID09PSBiLm9wdGlvbmFsICYmXG4gICAgICAgIGEucmVwZWF0YWJsZSA9PT0gYi5yZXBlYXRhYmxlKTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgYSBwYXRoIGFuZCBpdHMgYWxpYXMgaGF2ZSB0aGUgc2FtZSByZXF1aXJlZCBwYXJhbXNcbiAqXG4gKiBAcGFyYW0gYSAtIG9yaWdpbmFsIHJlY29yZFxuICogQHBhcmFtIGIgLSBhbGlhcyByZWNvcmRcbiAqL1xuZnVuY3Rpb24gY2hlY2tTYW1lUGFyYW1zKGEsIGIpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBhLmtleXMpIHtcbiAgICAgICAgaWYgKCFrZXkub3B0aW9uYWwgJiYgIWIua2V5cy5maW5kKGlzU2FtZVBhcmFtLmJpbmQobnVsbCwga2V5KSkpXG4gICAgICAgICAgICByZXR1cm4gd2FybihgQWxpYXMgXCIke2IucmVjb3JkLnBhdGh9XCIgYW5kIHRoZSBvcmlnaW5hbCByZWNvcmQ6IFwiJHthLnJlY29yZC5wYXRofVwiIG11c3QgaGF2ZSB0aGUgZXhhY3Qgc2FtZSBwYXJhbSBuYW1lZCBcIiR7a2V5Lm5hbWV9XCJgKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgYi5rZXlzKSB7XG4gICAgICAgIGlmICgha2V5Lm9wdGlvbmFsICYmICFhLmtleXMuZmluZChpc1NhbWVQYXJhbS5iaW5kKG51bGwsIGtleSkpKVxuICAgICAgICAgICAgcmV0dXJuIHdhcm4oYEFsaWFzIFwiJHtiLnJlY29yZC5wYXRofVwiIGFuZCB0aGUgb3JpZ2luYWwgcmVjb3JkOiBcIiR7YS5yZWNvcmQucGF0aH1cIiBtdXN0IGhhdmUgdGhlIGV4YWN0IHNhbWUgcGFyYW0gbmFtZWQgXCIke2tleS5uYW1lfVwiYCk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJvdXRlIHdpdGggYSBuYW1lIGFuZCBhIGNoaWxkIHdpdGggYW4gZW1wdHkgcGF0aCB3aXRob3V0IGEgbmFtZSBzaG91bGQgd2FybiB3aGVuIGFkZGluZyB0aGUgcm91dGVcbiAqXG4gKiBAcGFyYW0gbWFpbk5vcm1hbGl6ZWRSZWNvcmQgLSBSb3V0ZVJlY29yZE5vcm1hbGl6ZWRcbiAqIEBwYXJhbSBwYXJlbnQgLSBSb3V0ZVJlY29yZE1hdGNoZXJcbiAqL1xuZnVuY3Rpb24gY2hlY2tDaGlsZE1pc3NpbmdOYW1lV2l0aEVtcHR5UGF0aChtYWluTm9ybWFsaXplZFJlY29yZCwgcGFyZW50KSB7XG4gICAgaWYgKHBhcmVudCAmJlxuICAgICAgICBwYXJlbnQucmVjb3JkLm5hbWUgJiZcbiAgICAgICAgIW1haW5Ob3JtYWxpemVkUmVjb3JkLm5hbWUgJiZcbiAgICAgICAgIW1haW5Ob3JtYWxpemVkUmVjb3JkLnBhdGgpIHtcbiAgICAgICAgd2FybihgVGhlIHJvdXRlIG5hbWVkIFwiJHtTdHJpbmcocGFyZW50LnJlY29yZC5uYW1lKX1cIiBoYXMgYSBjaGlsZCB3aXRob3V0IGEgbmFtZSBhbmQgYW4gZW1wdHkgcGF0aC4gVXNpbmcgdGhhdCBuYW1lIHdvbid0IHJlbmRlciB0aGUgZW1wdHkgcGF0aCBjaGlsZCBzbyB5b3UgcHJvYmFibHkgd2FudCB0byBtb3ZlIHRoZSBuYW1lIHRvIHRoZSBjaGlsZCBpbnN0ZWFkLiBJZiB0aGlzIGlzIGludGVudGlvbmFsLCBhZGQgYSBuYW1lIHRvIHRoZSBjaGlsZCByb3V0ZSB0byByZW1vdmUgdGhlIHdhcm5pbmcuYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tTYW1lTmFtZUFzQW5jZXN0b3IocmVjb3JkLCBwYXJlbnQpIHtcbiAgICBmb3IgKGxldCBhbmNlc3RvciA9IHBhcmVudDsgYW5jZXN0b3I7IGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50KSB7XG4gICAgICAgIGlmIChhbmNlc3Rvci5yZWNvcmQubmFtZSA9PT0gcmVjb3JkLm5hbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQSByb3V0ZSBuYW1lZCBcIiR7U3RyaW5nKHJlY29yZC5uYW1lKX1cIiBoYXMgYmVlbiBhZGRlZCBhcyBhICR7cGFyZW50ID09PSBhbmNlc3RvciA/ICdjaGlsZCcgOiAnZGVzY2VuZGFudCd9IG9mIGEgcm91dGUgd2l0aCB0aGUgc2FtZSBuYW1lLiBSb3V0ZSBuYW1lcyBtdXN0IGJlIHVuaXF1ZSBhbmQgYSBuZXN0ZWQgcm91dGUgY2Fubm90IHVzZSB0aGUgc2FtZSBuYW1lIGFzIGFuIGFuY2VzdG9yLmApO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tNaXNzaW5nUGFyYW1zSW5BYnNvbHV0ZVBhdGgocmVjb3JkLCBwYXJlbnQpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBwYXJlbnQua2V5cykge1xuICAgICAgICBpZiAoIXJlY29yZC5rZXlzLmZpbmQoaXNTYW1lUGFyYW0uYmluZChudWxsLCBrZXkpKSlcbiAgICAgICAgICAgIHJldHVybiB3YXJuKGBBYnNvbHV0ZSBwYXRoIFwiJHtyZWNvcmQucmVjb3JkLnBhdGh9XCIgbXVzdCBoYXZlIHRoZSBleGFjdCBzYW1lIHBhcmFtIG5hbWVkIFwiJHtrZXkubmFtZX1cIiBhcyBpdHMgcGFyZW50IFwiJHtwYXJlbnQucmVjb3JkLnBhdGh9XCIuYCk7XG4gICAgfVxufVxuLyoqXG4gKiBQZXJmb3JtcyBhIGJpbmFyeSBzZWFyY2ggdG8gZmluZCB0aGUgY29ycmVjdCBpbnNlcnRpb24gaW5kZXggZm9yIGEgbmV3IG1hdGNoZXIuXG4gKlxuICogTWF0Y2hlcnMgYXJlIHByaW1hcmlseSBzb3J0ZWQgYnkgdGhlaXIgc2NvcmUuIElmIHNjb3JlcyBhcmUgdGllZCB0aGVuIHdlIGFsc28gY29uc2lkZXIgcGFyZW50L2NoaWxkIHJlbGF0aW9uc2hpcHMsXG4gKiB3aXRoIGRlc2NlbmRhbnRzIGNvbWluZyBiZWZvcmUgYW5jZXN0b3JzLiBJZiB0aGVyZSdzIHN0aWxsIGEgdGllLCBuZXcgcm91dGVzIGFyZSBpbnNlcnRlZCBhZnRlciBleGlzdGluZyByb3V0ZXMuXG4gKlxuICogQHBhcmFtIG1hdGNoZXIgLSBuZXcgbWF0Y2hlciB0byBiZSBpbnNlcnRlZFxuICogQHBhcmFtIG1hdGNoZXJzIC0gZXhpc3RpbmcgbWF0Y2hlcnNcbiAqL1xuZnVuY3Rpb24gZmluZEluc2VydGlvbkluZGV4KG1hdGNoZXIsIG1hdGNoZXJzKSB7XG4gICAgLy8gRmlyc3QgcGhhc2U6IGJpbmFyeSBzZWFyY2ggYmFzZWQgb24gc2NvcmVcbiAgICBsZXQgbG93ZXIgPSAwO1xuICAgIGxldCB1cHBlciA9IG1hdGNoZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAobG93ZXIgIT09IHVwcGVyKSB7XG4gICAgICAgIGNvbnN0IG1pZCA9IChsb3dlciArIHVwcGVyKSA+PiAxO1xuICAgICAgICBjb25zdCBzb3J0T3JkZXIgPSBjb21wYXJlUGF0aFBhcnNlclNjb3JlKG1hdGNoZXIsIG1hdGNoZXJzW21pZF0pO1xuICAgICAgICBpZiAoc29ydE9yZGVyIDwgMCkge1xuICAgICAgICAgICAgdXBwZXIgPSBtaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb3dlciA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU2Vjb25kIHBoYXNlOiBjaGVjayBmb3IgYW4gYW5jZXN0b3Igd2l0aCB0aGUgc2FtZSBzY29yZVxuICAgIGNvbnN0IGluc2VydGlvbkFuY2VzdG9yID0gZ2V0SW5zZXJ0aW9uQW5jZXN0b3IobWF0Y2hlcik7XG4gICAgaWYgKGluc2VydGlvbkFuY2VzdG9yKSB7XG4gICAgICAgIHVwcGVyID0gbWF0Y2hlcnMubGFzdEluZGV4T2YoaW5zZXJ0aW9uQW5jZXN0b3IsIHVwcGVyIC0gMSk7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgdXBwZXIgPCAwKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW5cbiAgICAgICAgICAgIHdhcm4oYEZpbmRpbmcgYW5jZXN0b3Igcm91dGUgXCIke2luc2VydGlvbkFuY2VzdG9yLnJlY29yZC5wYXRofVwiIGZhaWxlZCBmb3IgXCIke21hdGNoZXIucmVjb3JkLnBhdGh9XCJgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBwZXI7XG59XG5mdW5jdGlvbiBnZXRJbnNlcnRpb25BbmNlc3RvcihtYXRjaGVyKSB7XG4gICAgbGV0IGFuY2VzdG9yID0gbWF0Y2hlcjtcbiAgICB3aGlsZSAoKGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50KSkge1xuICAgICAgICBpZiAoaXNNYXRjaGFibGUoYW5jZXN0b3IpICYmXG4gICAgICAgICAgICBjb21wYXJlUGF0aFBhcnNlclNjb3JlKG1hdGNoZXIsIGFuY2VzdG9yKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGFuY2VzdG9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIGEgbWF0Y2hlciBjYW4gYmUgcmVhY2hhYmxlLiBUaGlzIG1lYW5zIGlmIGl0J3MgcG9zc2libGUgdG8gcmVhY2ggaXQgYXMgYSByb3V0ZS4gRm9yIGV4YW1wbGUsIHJvdXRlcyB3aXRob3V0XG4gKiBhIGNvbXBvbmVudCwgb3IgbmFtZSwgb3IgcmVkaXJlY3QsIGFyZSBqdXN0IHVzZWQgdG8gZ3JvdXAgb3RoZXIgcm91dGVzLlxuICogQHBhcmFtIG1hdGNoZXJcbiAqIEBwYXJhbSBtYXRjaGVyLnJlY29yZCByZWNvcmQgb2YgdGhlIG1hdGNoZXJcbiAqIEByZXR1cm5zXG4gKi9cbmZ1bmN0aW9uIGlzTWF0Y2hhYmxlKHsgcmVjb3JkIH0pIHtcbiAgICByZXR1cm4gISEocmVjb3JkLm5hbWUgfHxcbiAgICAgICAgKHJlY29yZC5jb21wb25lbnRzICYmIE9iamVjdC5rZXlzKHJlY29yZC5jb21wb25lbnRzKS5sZW5ndGgpIHx8XG4gICAgICAgIHJlY29yZC5yZWRpcmVjdCk7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtcyBhIHF1ZXJ5U3RyaW5nIGludG8gYSB7QGxpbmsgTG9jYXRpb25RdWVyeX0gb2JqZWN0LiBBY2NlcHQgYm90aCwgYVxuICogdmVyc2lvbiB3aXRoIHRoZSBsZWFkaW5nIGA/YCBhbmQgd2l0aG91dCBTaG91bGQgd29yayBhcyBVUkxTZWFyY2hQYXJhbXNcblxuICogQGludGVybmFsXG4gKlxuICogQHBhcmFtIHNlYXJjaCAtIHNlYXJjaCBzdHJpbmcgdG8gcGFyc2VcbiAqIEByZXR1cm5zIGEgcXVlcnkgb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIHBhcnNlUXVlcnkoc2VhcmNoKSB7XG4gICAgY29uc3QgcXVlcnkgPSB7fTtcbiAgICAvLyBhdm9pZCBjcmVhdGluZyBhbiBvYmplY3Qgd2l0aCBhbiBlbXB0eSBrZXkgYW5kIGVtcHR5IHZhbHVlXG4gICAgLy8gYmVjYXVzZSBvZiBzcGxpdCgnJicpXG4gICAgaWYgKHNlYXJjaCA9PT0gJycgfHwgc2VhcmNoID09PSAnPycpXG4gICAgICAgIHJldHVybiBxdWVyeTtcbiAgICBjb25zdCBoYXNMZWFkaW5nSU0gPSBzZWFyY2hbMF0gPT09ICc/JztcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSAoaGFzTGVhZGluZ0lNID8gc2VhcmNoLnNsaWNlKDEpIDogc2VhcmNoKS5zcGxpdCgnJicpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VhcmNoUGFyYW1zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIC8vIHByZSBkZWNvZGUgdGhlICsgaW50byBzcGFjZVxuICAgICAgICBjb25zdCBzZWFyY2hQYXJhbSA9IHNlYXJjaFBhcmFtc1tpXS5yZXBsYWNlKFBMVVNfUkUsICcgJyk7XG4gICAgICAgIC8vIGFsbG93IHRoZSA9IGNoYXJhY3RlclxuICAgICAgICBjb25zdCBlcVBvcyA9IHNlYXJjaFBhcmFtLmluZGV4T2YoJz0nKTtcbiAgICAgICAgY29uc3Qga2V5ID0gZGVjb2RlKGVxUG9zIDwgMCA/IHNlYXJjaFBhcmFtIDogc2VhcmNoUGFyYW0uc2xpY2UoMCwgZXFQb3MpKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBlcVBvcyA8IDAgPyBudWxsIDogZGVjb2RlKHNlYXJjaFBhcmFtLnNsaWNlKGVxUG9zICsgMSkpO1xuICAgICAgICBpZiAoa2V5IGluIHF1ZXJ5KSB7XG4gICAgICAgICAgICAvLyBhbiBleHRyYSB2YXJpYWJsZSBmb3IgdHMgdHlwZXNcbiAgICAgICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSBxdWVyeVtrZXldO1xuICAgICAgICAgICAgaWYgKCFpc0FycmF5KGN1cnJlbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBxdWVyeVtrZXldID0gW2N1cnJlbnRWYWx1ZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50VmFsdWUucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxdWVyeVtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5O1xufVxuLyoqXG4gKiBTdHJpbmdpZmllcyBhIHtAbGluayBMb2NhdGlvblF1ZXJ5UmF3fSBvYmplY3QuIExpa2UgYFVSTFNlYXJjaFBhcmFtc2AsIGl0XG4gKiBkb2Vzbid0IHByZXBlbmQgYSBgP2BcbiAqXG4gKiBAaW50ZXJuYWxcbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBxdWVyeSBvYmplY3QgdG8gc3RyaW5naWZ5XG4gKiBAcmV0dXJucyBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgcXVlcnkgd2l0aG91dCB0aGUgbGVhZGluZyBgP2BcbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5UXVlcnkocXVlcnkpIHtcbiAgICBsZXQgc2VhcmNoID0gJyc7XG4gICAgZm9yIChsZXQga2V5IGluIHF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlba2V5XTtcbiAgICAgICAga2V5ID0gZW5jb2RlUXVlcnlLZXkoa2V5KTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgbnVsbCBhZGRzIHRoZSB2YWx1ZVxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZWFyY2ggKz0gKHNlYXJjaC5sZW5ndGggPyAnJicgOiAnJykgKyBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBrZWVwIG51bGwgdmFsdWVzXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGlzQXJyYXkodmFsdWUpXG4gICAgICAgICAgICA/IHZhbHVlLm1hcCh2ID0+IHYgJiYgZW5jb2RlUXVlcnlWYWx1ZSh2KSlcbiAgICAgICAgICAgIDogW3ZhbHVlICYmIGVuY29kZVF1ZXJ5VmFsdWUodmFsdWUpXTtcbiAgICAgICAgdmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgICAgLy8gc2tpcCB1bmRlZmluZWQgdmFsdWVzIGluIGFycmF5cyBhcyBpZiB0aGV5IHdlcmUgbm90IHByZXNlbnRcbiAgICAgICAgICAgIC8vIHNtYWxsZXIgY29kZSB0aGFuIHVzaW5nIGZpbHRlclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBvbmx5IGFwcGVuZCAmIHdpdGggbm9uLWVtcHR5IHNlYXJjaFxuICAgICAgICAgICAgICAgIHNlYXJjaCArPSAoc2VhcmNoLmxlbmd0aCA/ICcmJyA6ICcnKSArIGtleTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoICs9ICc9JyArIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHNlYXJjaDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhIHtAbGluayBMb2NhdGlvblF1ZXJ5UmF3fSBpbnRvIGEge0BsaW5rIExvY2F0aW9uUXVlcnl9IGJ5IGNhc3RpbmdcbiAqIG51bWJlcnMgaW50byBzdHJpbmdzLCByZW1vdmluZyBrZXlzIHdpdGggYW4gdW5kZWZpbmVkIHZhbHVlIGFuZCByZXBsYWNpbmdcbiAqIHVuZGVmaW5lZCB3aXRoIG51bGwgaW4gYXJyYXlzXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnkgb2JqZWN0IHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMgYSBub3JtYWxpemVkIHF1ZXJ5IG9iamVjdFxuICovXG5mdW5jdGlvbiBub3JtYWxpemVRdWVyeShxdWVyeSkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRRdWVyeSA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRRdWVyeVtrZXldID0gaXNBcnJheSh2YWx1ZSlcbiAgICAgICAgICAgICAgICA/IHZhbHVlLm1hcCh2ID0+ICh2ID09IG51bGwgPyBudWxsIDogJycgKyB2KSlcbiAgICAgICAgICAgICAgICA6IHZhbHVlID09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgPyB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICA6ICcnICsgdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRRdWVyeTtcbn1cblxuLyoqXG4gKiBSb3V0ZVJlY29yZCBiZWluZyByZW5kZXJlZCBieSB0aGUgY2xvc2VzdCBhbmNlc3RvciBSb3V0ZXIgVmlldy4gVXNlZCBmb3JcbiAqIGBvbkJlZm9yZVJvdXRlVXBkYXRlYCBhbmQgYG9uQmVmb3JlUm91dGVMZWF2ZWAuIHJ2bG0gc3RhbmRzIGZvciBSb3V0ZXIgVmlld1xuICogTG9jYXRpb24gTWF0Y2hlZFxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBtYXRjaGVkUm91dGVLZXkgPSBTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ3JvdXRlciB2aWV3IGxvY2F0aW9uIG1hdGNoZWQnIDogJycpO1xuLyoqXG4gKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgcm91dGVyIHZpZXcgZGVwdGggdG8gY29udHJvbCB3aGljaCBjb21wb25lbnQgaW5cbiAqIGBtYXRjaGVkYCBpcyByZW5kZXJlZC4gcnZkIHN0YW5kcyBmb3IgUm91dGVyIFZpZXcgRGVwdGhcbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3Qgdmlld0RlcHRoS2V5ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXIgdmlldyBkZXB0aCcgOiAnJyk7XG4vKipcbiAqIEFsbG93cyBvdmVycmlkaW5nIHRoZSByb3V0ZXIgaW5zdGFuY2UgcmV0dXJuZWQgYnkgYHVzZVJvdXRlcmAgaW4gdGVzdHMuIHJcbiAqIHN0YW5kcyBmb3Igcm91dGVyXG4gKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IHJvdXRlcktleSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAncm91dGVyJyA6ICcnKTtcbi8qKlxuICogQWxsb3dzIG92ZXJyaWRpbmcgdGhlIGN1cnJlbnQgcm91dGUgcmV0dXJuZWQgYnkgYHVzZVJvdXRlYCBpbiB0ZXN0cy4gcmxcbiAqIHN0YW5kcyBmb3Igcm91dGUgbG9jYXRpb25cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3Qgcm91dGVMb2NhdGlvbktleSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAncm91dGUgbG9jYXRpb24nIDogJycpO1xuLyoqXG4gKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgY3VycmVudCByb3V0ZSB1c2VkIGJ5IHJvdXRlci12aWV3LiBJbnRlcm5hbGx5IHRoaXMgaXNcbiAqIHVzZWQgd2hlbiB0aGUgYHJvdXRlYCBwcm9wIGlzIHBhc3NlZC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3Qgcm91dGVyVmlld0xvY2F0aW9uS2V5ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXIgdmlldyBsb2NhdGlvbicgOiAnJyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbGlzdCBvZiBjYWxsYmFja3MgdGhhdCBjYW4gYmUgcmVzZXQuIFVzZWQgdG8gY3JlYXRlIGJlZm9yZSBhbmQgYWZ0ZXIgbmF2aWdhdGlvbiBndWFyZHMgbGlzdFxuICovXG5mdW5jdGlvbiB1c2VDYWxsYmFja3MoKSB7XG4gICAgbGV0IGhhbmRsZXJzID0gW107XG4gICAgZnVuY3Rpb24gYWRkKGhhbmRsZXIpIHtcbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBoYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICAgICAgaWYgKGkgPiAtMSlcbiAgICAgICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICBoYW5kbGVycyA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQsXG4gICAgICAgIGxpc3Q6ICgpID0+IGhhbmRsZXJzLnNsaWNlKCksXG4gICAgICAgIHJlc2V0LFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyR3VhcmQocmVjb3JkLCBuYW1lLCBndWFyZCkge1xuICAgIGNvbnN0IHJlbW92ZUZyb21MaXN0ID0gKCkgPT4ge1xuICAgICAgICByZWNvcmRbbmFtZV0uZGVsZXRlKGd1YXJkKTtcbiAgICB9O1xuICAgIG9uVW5tb3VudGVkKHJlbW92ZUZyb21MaXN0KTtcbiAgICBvbkRlYWN0aXZhdGVkKHJlbW92ZUZyb21MaXN0KTtcbiAgICBvbkFjdGl2YXRlZCgoKSA9PiB7XG4gICAgICAgIHJlY29yZFtuYW1lXS5hZGQoZ3VhcmQpO1xuICAgIH0pO1xuICAgIHJlY29yZFtuYW1lXS5hZGQoZ3VhcmQpO1xufVxuLyoqXG4gKiBBZGQgYSBuYXZpZ2F0aW9uIGd1YXJkIHRoYXQgdHJpZ2dlcnMgd2hlbmV2ZXIgdGhlIGNvbXBvbmVudCBmb3IgdGhlIGN1cnJlbnRcbiAqIGxvY2F0aW9uIGlzIGFib3V0IHRvIGJlIGxlZnQuIFNpbWlsYXIgdG8ge0BsaW5rIGJlZm9yZVJvdXRlTGVhdmV9IGJ1dCBjYW4gYmVcbiAqIHVzZWQgaW4gYW55IGNvbXBvbmVudC4gVGhlIGd1YXJkIGlzIHJlbW92ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVubW91bnRlZC5cbiAqXG4gKiBAcGFyYW0gbGVhdmVHdWFyZCAtIHtAbGluayBOYXZpZ2F0aW9uR3VhcmR9XG4gKi9cbmZ1bmN0aW9uIG9uQmVmb3JlUm91dGVMZWF2ZShsZWF2ZUd1YXJkKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZ2V0Q3VycmVudEluc3RhbmNlKCkpIHtcbiAgICAgICAgd2FybignZ2V0Q3VycmVudEluc3RhbmNlKCkgcmV0dXJuZWQgbnVsbC4gb25CZWZvcmVSb3V0ZUxlYXZlKCkgbXVzdCBiZSBjYWxsZWQgYXQgdGhlIHRvcCBvZiBhIHNldHVwIGZ1bmN0aW9uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYWN0aXZlUmVjb3JkID0gaW5qZWN0KG1hdGNoZWRSb3V0ZUtleSwgXG4gICAgLy8gdG8gYXZvaWQgd2FybmluZ1xuICAgIHt9KS52YWx1ZTtcbiAgICBpZiAoIWFjdGl2ZVJlY29yZCkge1xuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgIHdhcm4oJ05vIGFjdGl2ZSByb3V0ZSByZWNvcmQgd2FzIGZvdW5kIHdoZW4gY2FsbGluZyBgb25CZWZvcmVSb3V0ZUxlYXZlKClgLiBNYWtlIHN1cmUgeW91IGNhbGwgdGhpcyBmdW5jdGlvbiBpbnNpZGUgYSBjb21wb25lbnQgY2hpbGQgb2YgPHJvdXRlci12aWV3Pi4gTWF5YmUgeW91IGNhbGxlZCBpdCBpbnNpZGUgb2YgQXBwLnZ1ZT8nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZWdpc3Rlckd1YXJkKGFjdGl2ZVJlY29yZCwgJ2xlYXZlR3VhcmRzJywgbGVhdmVHdWFyZCk7XG59XG4vKipcbiAqIEFkZCBhIG5hdmlnYXRpb24gZ3VhcmQgdGhhdCB0cmlnZ2VycyB3aGVuZXZlciB0aGUgY3VycmVudCBsb2NhdGlvbiBpcyBhYm91dFxuICogdG8gYmUgdXBkYXRlZC4gU2ltaWxhciB0byB7QGxpbmsgYmVmb3JlUm91dGVVcGRhdGV9IGJ1dCBjYW4gYmUgdXNlZCBpbiBhbnlcbiAqIGNvbXBvbmVudC4gVGhlIGd1YXJkIGlzIHJlbW92ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVubW91bnRlZC5cbiAqXG4gKiBAcGFyYW0gdXBkYXRlR3VhcmQgLSB7QGxpbmsgTmF2aWdhdGlvbkd1YXJkfVxuICovXG5mdW5jdGlvbiBvbkJlZm9yZVJvdXRlVXBkYXRlKHVwZGF0ZUd1YXJkKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZ2V0Q3VycmVudEluc3RhbmNlKCkpIHtcbiAgICAgICAgd2FybignZ2V0Q3VycmVudEluc3RhbmNlKCkgcmV0dXJuZWQgbnVsbC4gb25CZWZvcmVSb3V0ZVVwZGF0ZSgpIG11c3QgYmUgY2FsbGVkIGF0IHRoZSB0b3Agb2YgYSBzZXR1cCBmdW5jdGlvbicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFjdGl2ZVJlY29yZCA9IGluamVjdChtYXRjaGVkUm91dGVLZXksIFxuICAgIC8vIHRvIGF2b2lkIHdhcm5pbmdcbiAgICB7fSkudmFsdWU7XG4gICAgaWYgKCFhY3RpdmVSZWNvcmQpIHtcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgICAgICB3YXJuKCdObyBhY3RpdmUgcm91dGUgcmVjb3JkIHdhcyBmb3VuZCB3aGVuIGNhbGxpbmcgYG9uQmVmb3JlUm91dGVVcGRhdGUoKWAuIE1ha2Ugc3VyZSB5b3UgY2FsbCB0aGlzIGZ1bmN0aW9uIGluc2lkZSBhIGNvbXBvbmVudCBjaGlsZCBvZiA8cm91dGVyLXZpZXc+LiBNYXliZSB5b3UgY2FsbGVkIGl0IGluc2lkZSBvZiBBcHAudnVlPycpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlZ2lzdGVyR3VhcmQoYWN0aXZlUmVjb3JkLCAndXBkYXRlR3VhcmRzJywgdXBkYXRlR3VhcmQpO1xufVxuZnVuY3Rpb24gZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20sIHJlY29yZCwgbmFtZSwgcnVuV2l0aENvbnRleHQgPSBmbiA9PiBmbigpKSB7XG4gICAgLy8ga2VlcCBhIHJlZmVyZW5jZSB0byB0aGUgZW50ZXJDYWxsYmFja0FycmF5IHRvIHByZXZlbnQgcHVzaGluZyBjYWxsYmFja3MgaWYgYSBuZXcgbmF2aWdhdGlvbiB0b29rIHBsYWNlXG4gICAgY29uc3QgZW50ZXJDYWxsYmFja0FycmF5ID0gcmVjb3JkICYmXG4gICAgICAgIC8vIG5hbWUgaXMgZGVmaW5lZCBpZiByZWNvcmQgaXMgYmVjYXVzZSBvZiB0aGUgZnVuY3Rpb24gb3ZlcmxvYWRcbiAgICAgICAgKHJlY29yZC5lbnRlckNhbGxiYWNrc1tuYW1lXSA9IHJlY29yZC5lbnRlckNhbGxiYWNrc1tuYW1lXSB8fCBbXSk7XG4gICAgcmV0dXJuICgpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9ICh2YWxpZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbGlkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdChjcmVhdGVSb3V0ZXJFcnJvcig0IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9BQk9SVEVEICovLCB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbGlkIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QodmFsaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSb3V0ZUxvY2F0aW9uKHZhbGlkKSkge1xuICAgICAgICAgICAgICAgIHJlamVjdChjcmVhdGVSb3V0ZXJFcnJvcigyIC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLywge1xuICAgICAgICAgICAgICAgICAgICBmcm9tOiB0byxcbiAgICAgICAgICAgICAgICAgICAgdG86IHZhbGlkLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlbnRlckNhbGxiYWNrQXJyYXkgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gc2luY2UgZW50ZXJDYWxsYmFja0FycmF5IGlzIHRydXRoeSwgYm90aCByZWNvcmQgYW5kIG5hbWUgYWxzbyBhcmVcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkLmVudGVyQ2FsbGJhY2tzW25hbWVdID09PSBlbnRlckNhbGxiYWNrQXJyYXkgJiZcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHZhbGlkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudGVyQ2FsbGJhY2tBcnJheS5wdXNoKHZhbGlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyB3cmFwcGluZyB3aXRoIFByb21pc2UucmVzb2x2ZSBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGJvdGggYXN5bmMgYW5kIHN5bmMgZ3VhcmRzXG4gICAgICAgIGNvbnN0IGd1YXJkUmV0dXJuID0gcnVuV2l0aENvbnRleHQoKCkgPT4gZ3VhcmQuY2FsbChyZWNvcmQgJiYgcmVjb3JkLmluc3RhbmNlc1tuYW1lXSwgdG8sIGZyb20sIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IGNhbk9ubHlCZUNhbGxlZE9uY2UobmV4dCwgdG8sIGZyb20pIDogbmV4dCkpO1xuICAgICAgICBsZXQgZ3VhcmRDYWxsID0gUHJvbWlzZS5yZXNvbHZlKGd1YXJkUmV0dXJuKTtcbiAgICAgICAgaWYgKGd1YXJkLmxlbmd0aCA8IDMpXG4gICAgICAgICAgICBndWFyZENhbGwgPSBndWFyZENhbGwudGhlbihuZXh0KTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBndWFyZC5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYFRoZSBcIm5leHRcIiBjYWxsYmFjayB3YXMgbmV2ZXIgY2FsbGVkIGluc2lkZSBvZiAke2d1YXJkLm5hbWUgPyAnXCInICsgZ3VhcmQubmFtZSArICdcIicgOiAnJ306XFxuJHtndWFyZC50b1N0cmluZygpfVxcbi4gSWYgeW91IGFyZSByZXR1cm5pbmcgYSB2YWx1ZSBpbnN0ZWFkIG9mIGNhbGxpbmcgXCJuZXh0XCIsIG1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIFwibmV4dFwiIHBhcmFtZXRlciBmcm9tIHlvdXIgZnVuY3Rpb24uYDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZ3VhcmRSZXR1cm4gPT09ICdvYmplY3QnICYmICd0aGVuJyBpbiBndWFyZFJldHVybikge1xuICAgICAgICAgICAgICAgIGd1YXJkQ2FsbCA9IGd1YXJkQ2FsbC50aGVuKHJlc29sdmVkVmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBfY2FsbGVkIGlzIGFkZGVkIGF0IGNhbk9ubHlCZUNhbGxlZE9uY2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0Ll9jYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4obWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdJbnZhbGlkIG5hdmlnYXRpb24gZ3VhcmQnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVkVmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChndWFyZFJldHVybiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogX2NhbGxlZCBpcyBhZGRlZCBhdCBjYW5Pbmx5QmVDYWxsZWRPbmNlXG4gICAgICAgICAgICAgICAgaWYgKCFuZXh0Ll9jYWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBuYXZpZ2F0aW9uIGd1YXJkJykpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGd1YXJkQ2FsbC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY2FuT25seUJlQ2FsbGVkT25jZShuZXh0LCB0bywgZnJvbSkge1xuICAgIGxldCBjYWxsZWQgPSAwO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChjYWxsZWQrKyA9PT0gMSlcbiAgICAgICAgICAgIHdhcm4oYFRoZSBcIm5leHRcIiBjYWxsYmFjayB3YXMgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIGluIG9uZSBuYXZpZ2F0aW9uIGd1YXJkIHdoZW4gZ29pbmcgZnJvbSBcIiR7ZnJvbS5mdWxsUGF0aH1cIiB0byBcIiR7dG8uZnVsbFBhdGh9XCIuIEl0IHNob3VsZCBiZSBjYWxsZWQgZXhhY3RseSBvbmUgdGltZSBpbiBlYWNoIG5hdmlnYXRpb24gZ3VhcmQuIFRoaXMgd2lsbCBmYWlsIGluIHByb2R1Y3Rpb24uYCk7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHdlIHB1dCBpdCBpbiB0aGUgb3JpZ2luYWwgb25lIGJlY2F1c2UgaXQncyBlYXNpZXIgdG8gY2hlY2tcbiAgICAgICAgbmV4dC5fY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKGNhbGxlZCA9PT0gMSlcbiAgICAgICAgICAgIG5leHQuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gZXh0cmFjdENvbXBvbmVudHNHdWFyZHMobWF0Y2hlZCwgZ3VhcmRUeXBlLCB0bywgZnJvbSwgcnVuV2l0aENvbnRleHQgPSBmbiA9PiBmbigpKSB7XG4gICAgY29uc3QgZ3VhcmRzID0gW107XG4gICAgZm9yIChjb25zdCByZWNvcmQgb2YgbWF0Y2hlZCkge1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFyZWNvcmQuY29tcG9uZW50cyAmJiAhcmVjb3JkLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgd2FybihgUmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgZWl0aGVyIG1pc3NpbmcgYSBcImNvbXBvbmVudChzKVwiYCArXG4gICAgICAgICAgICAgICAgYCBvciBcImNoaWxkcmVuXCIgcHJvcGVydHkuYCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHJlY29yZC5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICBsZXQgcmF3Q29tcG9uZW50ID0gcmVjb3JkLmNvbXBvbmVudHNbbmFtZV07XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyYXdDb21wb25lbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiByYXdDb21wb25lbnQgIT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcmF3Q29tcG9uZW50ICE9PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgbm90YCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgIGEgdmFsaWQgY29tcG9uZW50LiBSZWNlaXZlZCBcIiR7U3RyaW5nKHJhd0NvbXBvbmVudCl9XCIuYCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRocm93IHRvIGVuc3VyZSB3ZSBzdG9wIGhlcmUgYnV0IHdhcm4gdG8gZW5zdXJlIHRoZSBtZXNzYWdlIGlzbid0XG4gICAgICAgICAgICAgICAgICAgIC8vIG1pc3NlZCBieSB0aGUgdXNlclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcm91dGUgY29tcG9uZW50Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCd0aGVuJyBpbiByYXdDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2FybiBpZiB1c2VyIHdyb3RlIGltcG9ydCgnL2NvbXBvbmVudC52dWUnKSBpbnN0ZWFkIG9mICgpID0+XG4gICAgICAgICAgICAgICAgICAgIC8vIGltcG9ydCgnLi9jb21wb25lbnQudnVlJylcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGluIHJlY29yZCB3aXRoIHBhdGggXCIke3JlY29yZC5wYXRofVwiIGlzIGEgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgUHJvbWlzZSBpbnN0ZWFkIG9mIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgUHJvbWlzZS4gRGlkIHlvdSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGB3cml0ZSBcImltcG9ydCgnLi9NeVBhZ2UudnVlJylcIiBpbnN0ZWFkIG9mIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYFwiKCkgPT4gaW1wb3J0KCcuL015UGFnZS52dWUnKVwiID8gVGhpcyB3aWxsIGJyZWFrIGluIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHByb2R1Y3Rpb24gaWYgbm90IGZpeGVkLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gcmF3Q29tcG9uZW50O1xuICAgICAgICAgICAgICAgICAgICByYXdDb21wb25lbnQgPSAoKSA9PiBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyYXdDb21wb25lbnQuX19hc3luY0xvYWRlciAmJlxuICAgICAgICAgICAgICAgICAgICAvLyB3YXJuIG9ubHkgb25jZSBwZXIgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICFyYXdDb21wb25lbnQuX193YXJuZWREZWZpbmVBc3luYykge1xuICAgICAgICAgICAgICAgICAgICByYXdDb21wb25lbnQuX193YXJuZWREZWZpbmVBc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBcIiR7bmFtZX1cIiBpbiByZWNvcmQgd2l0aCBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIiBpcyBkZWZpbmVkIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHVzaW5nIFwiZGVmaW5lQXN5bmNDb21wb25lbnQoKVwiLiBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGBXcml0ZSBcIigpID0+IGltcG9ydCgnLi9NeVBhZ2UudnVlJylcIiBpbnN0ZWFkIG9mIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYFwiZGVmaW5lQXN5bmNDb21wb25lbnQoKCkgPT4gaW1wb3J0KCcuL015UGFnZS52dWUnKSlcIi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBza2lwIHVwZGF0ZSBhbmQgbGVhdmUgZ3VhcmRzIGlmIHRoZSByb3V0ZSBjb21wb25lbnQgaXMgbm90IG1vdW50ZWRcbiAgICAgICAgICAgIGlmIChndWFyZFR5cGUgIT09ICdiZWZvcmVSb3V0ZUVudGVyJyAmJiAhcmVjb3JkLmluc3RhbmNlc1tuYW1lXSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChpc1JvdXRlQ29tcG9uZW50KHJhd0NvbXBvbmVudCkpIHtcbiAgICAgICAgICAgICAgICAvLyBfX3ZjY09wdHMgaXMgYWRkZWQgYnkgdnVlLWNsYXNzLWNvbXBvbmVudCBhbmQgY29udGFpbiB0aGUgcmVndWxhciBvcHRpb25zXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHJhd0NvbXBvbmVudC5fX3ZjY09wdHMgfHwgcmF3Q29tcG9uZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJkID0gb3B0aW9uc1tndWFyZFR5cGVdO1xuICAgICAgICAgICAgICAgIGd1YXJkICYmXG4gICAgICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tLCByZWNvcmQsIG5hbWUsIHJ1bldpdGhDb250ZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzdGFydCByZXF1ZXN0aW5nIHRoZSBjaHVuayBhbHJlYWR5XG4gICAgICAgICAgICAgICAgbGV0IGNvbXBvbmVudFByb21pc2UgPSByYXdDb21wb25lbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICEoJ2NhdGNoJyBpbiBjb21wb25lbnRQcm9taXNlKSkge1xuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgYSBmdW5jdGlvbiB0aGF0IGRvZXMgbm90IHJldHVybiBhIFByb21pc2UuIElmIHlvdSB3ZXJlIHBhc3NpbmcgYSBmdW5jdGlvbmFsIGNvbXBvbmVudCwgbWFrZSBzdXJlIHRvIGFkZCBhIFwiZGlzcGxheU5hbWVcIiB0byB0aGUgY29tcG9uZW50LiBUaGlzIHdpbGwgYnJlYWsgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29tcG9uZW50UHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKCgpID0+IGNvbXBvbmVudFByb21pc2UudGhlbihyZXNvbHZlZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzb2x2ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkbid0IHJlc29sdmUgY29tcG9uZW50IFwiJHtuYW1lfVwiIGF0IFwiJHtyZWNvcmQucGF0aH1cImApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNvbHZlZENvbXBvbmVudCA9IGlzRVNNb2R1bGUocmVzb2x2ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlc29sdmVkLmRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzb2x2ZWQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdGhlIHJlc29sdmVkIG1vZHVsZSBmb3IgcGx1Z2lucyBsaWtlIGRhdGEgbG9hZGVyc1xuICAgICAgICAgICAgICAgICAgICByZWNvcmQubW9kc1tuYW1lXSA9IHJlc29sdmVkO1xuICAgICAgICAgICAgICAgICAgICAvLyByZXBsYWNlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSByZXNvbHZlZCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkIGJlY2F1c2Ugd2Ugd2VudCBpbnRvIHRoZSBmb3IgbG9vcFxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuY29tcG9uZW50c1tuYW1lXSA9IHJlc29sdmVkQ29tcG9uZW50O1xuICAgICAgICAgICAgICAgICAgICAvLyBfX3ZjY09wdHMgaXMgYWRkZWQgYnkgdnVlLWNsYXNzLWNvbXBvbmVudCBhbmQgY29udGFpbiB0aGUgcmVndWxhciBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSByZXNvbHZlZENvbXBvbmVudC5fX3ZjY09wdHMgfHwgcmVzb2x2ZWRDb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJkID0gb3B0aW9uc1tndWFyZFR5cGVdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGd1YXJkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSwgcmVjb3JkLCBuYW1lLCBydW5XaXRoQ29udGV4dCkoKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBndWFyZHM7XG59XG4vKipcbiAqIEVuc3VyZXMgYSByb3V0ZSBpcyBsb2FkZWQsIHNvIGl0IGNhbiBiZSBwYXNzZWQgYXMgbyBwcm9wIHRvIGA8Um91dGVyVmlldz5gLlxuICpcbiAqIEBwYXJhbSByb3V0ZSAtIHJlc29sdmVkIHJvdXRlIHRvIGxvYWRcbiAqL1xuZnVuY3Rpb24gbG9hZFJvdXRlTG9jYXRpb24ocm91dGUpIHtcbiAgICByZXR1cm4gcm91dGUubWF0Y2hlZC5ldmVyeShyZWNvcmQgPT4gcmVjb3JkLnJlZGlyZWN0KVxuICAgICAgICA/IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignQ2Fubm90IGxvYWQgYSByb3V0ZSB0aGF0IHJlZGlyZWN0cy4nKSlcbiAgICAgICAgOiBQcm9taXNlLmFsbChyb3V0ZS5tYXRjaGVkLm1hcChyZWNvcmQgPT4gcmVjb3JkLmNvbXBvbmVudHMgJiZcbiAgICAgICAgICAgIFByb21pc2UuYWxsKE9iamVjdC5rZXlzKHJlY29yZC5jb21wb25lbnRzKS5yZWR1Y2UoKHByb21pc2VzLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3Q29tcG9uZW50ID0gcmVjb3JkLmNvbXBvbmVudHNbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByYXdDb21wb25lbnQgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgICAgICAgICAgISgnZGlzcGxheU5hbWUnIGluIHJhd0NvbXBvbmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChyYXdDb21wb25lbnQoKS50aGVuKHJlc29sdmVkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzb2x2ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgQ291bGRuJ3QgcmVzb2x2ZSBjb21wb25lbnQgXCIke25hbWV9XCIgYXQgXCIke3JlY29yZC5wYXRofVwiLiBFbnN1cmUgeW91IHBhc3NlZCBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHByb21pc2UuYCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRDb21wb25lbnQgPSBpc0VTTW9kdWxlKHJlc29sdmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzb2x2ZWQuZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVzb2x2ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIHRoZSByZXNvbHZlZCBtb2R1bGUgZm9yIHBsdWdpbnMgbGlrZSBkYXRhIGxvYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZC5tb2RzW25hbWVdID0gcmVzb2x2ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXBsYWNlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSByZXNvbHZlZCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCBiZWNhdXNlIHdlIHdlbnQgaW50byB0aGUgZm9yIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZC5jb21wb25lbnRzW25hbWVdID0gcmVzb2x2ZWRDb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2VzO1xuICAgICAgICAgICAgfSwgW10pKSkpLnRoZW4oKCkgPT4gcm91dGUpO1xufVxuXG4vLyBUT0RPOiB3ZSBjb3VsZCBhbGxvdyBjdXJyZW50Um91dGUgYXMgYSBwcm9wIHRvIGV4cG9zZSBgaXNBY3RpdmVgIGFuZFxuLy8gYGlzRXhhY3RBY3RpdmVgIGJlaGF2aW9yIHNob3VsZCBnbyB0aHJvdWdoIGFuIFJGQ1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnRlcm5hbCBiZWhhdmlvciBvZiBhIHtAbGluayBSb3V0ZXJMaW5rfSB3aXRob3V0IHRoZSByZW5kZXJpbmcgcGFydC5cbiAqXG4gKiBAcGFyYW0gcHJvcHMgLSBhIGB0b2AgbG9jYXRpb24gYW5kIGFuIG9wdGlvbmFsIGByZXBsYWNlYCBmbGFnXG4gKi9cbmZ1bmN0aW9uIHVzZUxpbmsocHJvcHMpIHtcbiAgICBjb25zdCByb3V0ZXIgPSBpbmplY3Qocm91dGVyS2V5KTtcbiAgICBjb25zdCBjdXJyZW50Um91dGUgPSBpbmplY3Qocm91dGVMb2NhdGlvbktleSk7XG4gICAgbGV0IGhhc1ByZXZpb3VzID0gZmFsc2U7XG4gICAgbGV0IHByZXZpb3VzVG8gPSBudWxsO1xuICAgIGNvbnN0IHJvdXRlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICBjb25zdCB0byA9IHVucmVmKHByb3BzLnRvKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAoIWhhc1ByZXZpb3VzIHx8IHRvICE9PSBwcmV2aW91c1RvKSkge1xuICAgICAgICAgICAgaWYgKCFpc1JvdXRlTG9jYXRpb24odG8pKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1ByZXZpb3VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEludmFsaWQgdmFsdWUgZm9yIHByb3AgXCJ0b1wiIGluIHVzZUxpbmsoKVxcbi0gdG86YCwgdG8sIGBcXG4tIHByZXZpb3VzIHRvOmAsIHByZXZpb3VzVG8sIGBcXG4tIHByb3BzOmAsIHByb3BzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEludmFsaWQgdmFsdWUgZm9yIHByb3AgXCJ0b1wiIGluIHVzZUxpbmsoKVxcbi0gdG86YCwgdG8sIGBcXG4tIHByb3BzOmAsIHByb3BzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2aW91c1RvID0gdG87XG4gICAgICAgICAgICBoYXNQcmV2aW91cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvdXRlci5yZXNvbHZlKHRvKTtcbiAgICB9KTtcbiAgICBjb25zdCBhY3RpdmVSZWNvcmRJbmRleCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgY29uc3QgeyBtYXRjaGVkIH0gPSByb3V0ZS52YWx1ZTtcbiAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IG1hdGNoZWQ7XG4gICAgICAgIGNvbnN0IHJvdXRlTWF0Y2hlZCA9IG1hdGNoZWRbbGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IGN1cnJlbnRNYXRjaGVkID0gY3VycmVudFJvdXRlLm1hdGNoZWQ7XG4gICAgICAgIGlmICghcm91dGVNYXRjaGVkIHx8ICFjdXJyZW50TWF0Y2hlZC5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY3VycmVudE1hdGNoZWQuZmluZEluZGV4KGlzU2FtZVJvdXRlUmVjb3JkLmJpbmQobnVsbCwgcm91dGVNYXRjaGVkKSk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAvLyBwb3NzaWJsZSBwYXJlbnQgcmVjb3JkXG4gICAgICAgIGNvbnN0IHBhcmVudFJlY29yZFBhdGggPSBnZXRPcmlnaW5hbFBhdGgobWF0Y2hlZFtsZW5ndGggLSAyXSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8vIHdlIGFyZSBkZWFsaW5nIHdpdGggbmVzdGVkIHJvdXRlc1xuICAgICAgICBsZW5ndGggPiAxICYmXG4gICAgICAgICAgICAvLyBpZiB0aGUgcGFyZW50IGFuZCBtYXRjaGVkIHJvdXRlIGhhdmUgdGhlIHNhbWUgcGF0aCwgdGhpcyBsaW5rIGlzXG4gICAgICAgICAgICAvLyByZWZlcnJpbmcgdG8gdGhlIGVtcHR5IGNoaWxkLiBPciB3ZSBjdXJyZW50bHkgYXJlIG9uIGEgZGlmZmVyZW50XG4gICAgICAgICAgICAvLyBjaGlsZCBvZiB0aGUgc2FtZSBwYXJlbnRcbiAgICAgICAgICAgIGdldE9yaWdpbmFsUGF0aChyb3V0ZU1hdGNoZWQpID09PSBwYXJlbnRSZWNvcmRQYXRoICYmXG4gICAgICAgICAgICAvLyBhdm9pZCBjb21wYXJpbmcgdGhlIGNoaWxkIHdpdGggaXRzIHBhcmVudFxuICAgICAgICAgICAgY3VycmVudE1hdGNoZWRbY3VycmVudE1hdGNoZWQubGVuZ3RoIC0gMV0ucGF0aCAhPT0gcGFyZW50UmVjb3JkUGF0aFxuICAgICAgICAgICAgPyBjdXJyZW50TWF0Y2hlZC5maW5kSW5kZXgoaXNTYW1lUm91dGVSZWNvcmQuYmluZChudWxsLCBtYXRjaGVkW2xlbmd0aCAtIDJdKSlcbiAgICAgICAgICAgIDogaW5kZXgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGlzQWN0aXZlID0gY29tcHV0ZWQoKCkgPT4gYWN0aXZlUmVjb3JkSW5kZXgudmFsdWUgPiAtMSAmJlxuICAgICAgICBpbmNsdWRlc1BhcmFtcyhjdXJyZW50Um91dGUucGFyYW1zLCByb3V0ZS52YWx1ZS5wYXJhbXMpKTtcbiAgICBjb25zdCBpc0V4YWN0QWN0aXZlID0gY29tcHV0ZWQoKCkgPT4gYWN0aXZlUmVjb3JkSW5kZXgudmFsdWUgPiAtMSAmJlxuICAgICAgICBhY3RpdmVSZWNvcmRJbmRleC52YWx1ZSA9PT0gY3VycmVudFJvdXRlLm1hdGNoZWQubGVuZ3RoIC0gMSAmJlxuICAgICAgICBpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zKGN1cnJlbnRSb3V0ZS5wYXJhbXMsIHJvdXRlLnZhbHVlLnBhcmFtcykpO1xuICAgIGZ1bmN0aW9uIG5hdmlnYXRlKGUgPSB7fSkge1xuICAgICAgICBpZiAoZ3VhcmRFdmVudChlKSkge1xuICAgICAgICAgICAgY29uc3QgcCA9IHJvdXRlclt1bnJlZihwcm9wcy5yZXBsYWNlKSA/ICdyZXBsYWNlJyA6ICdwdXNoJ10odW5yZWYocHJvcHMudG8pXG4gICAgICAgICAgICAvLyBhdm9pZCB1bmNhdWdodCBlcnJvcnMgYXJlIHRoZXkgYXJlIGxvZ2dlZCBhbnl3YXlcbiAgICAgICAgICAgICkuY2F0Y2gobm9vcCk7XG4gICAgICAgICAgICBpZiAocHJvcHMudmlld1RyYW5zaXRpb24gJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgJ3N0YXJ0Vmlld1RyYW5zaXRpb24nIGluIGRvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuc3RhcnRWaWV3VHJhbnNpdGlvbigoKSA9PiBwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLy8gZGV2dG9vbHMgb25seVxuICAgIGlmICgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykgJiYgaXNCcm93c2VyKSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XG4gICAgICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgY29uc3QgbGlua0NvbnRleHREZXZ0b29scyA9IHtcbiAgICAgICAgICAgICAgICByb3V0ZTogcm91dGUudmFsdWUsXG4gICAgICAgICAgICAgICAgaXNBY3RpdmU6IGlzQWN0aXZlLnZhbHVlLFxuICAgICAgICAgICAgICAgIGlzRXhhY3RBY3RpdmU6IGlzRXhhY3RBY3RpdmUudmFsdWUsXG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdGhpcyBpcyBpbnRlcm5hbFxuICAgICAgICAgICAgaW5zdGFuY2UuX192cmxfZGV2dG9vbHMgPSBpbnN0YW5jZS5fX3ZybF9kZXZ0b29scyB8fCBbXTtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoaXMgaXMgaW50ZXJuYWxcbiAgICAgICAgICAgIGluc3RhbmNlLl9fdnJsX2RldnRvb2xzLnB1c2gobGlua0NvbnRleHREZXZ0b29scyk7XG4gICAgICAgICAgICB3YXRjaEVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGlua0NvbnRleHREZXZ0b29scy5yb3V0ZSA9IHJvdXRlLnZhbHVlO1xuICAgICAgICAgICAgICAgIGxpbmtDb250ZXh0RGV2dG9vbHMuaXNBY3RpdmUgPSBpc0FjdGl2ZS52YWx1ZTtcbiAgICAgICAgICAgICAgICBsaW5rQ29udGV4dERldnRvb2xzLmlzRXhhY3RBY3RpdmUgPSBpc0V4YWN0QWN0aXZlLnZhbHVlO1xuICAgICAgICAgICAgICAgIGxpbmtDb250ZXh0RGV2dG9vbHMuZXJyb3IgPSBpc1JvdXRlTG9jYXRpb24odW5yZWYocHJvcHMudG8pKVxuICAgICAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICAgICAgOiAnSW52YWxpZCBcInRvXCIgdmFsdWUnO1xuICAgICAgICAgICAgfSwgeyBmbHVzaDogJ3Bvc3QnIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5PVEU6IHVwZGF0ZSB7QGxpbmsgX1JvdXRlckxpbmtJfSdzIGAkc2xvdHNgIHR5cGUgd2hlbiB1cGRhdGluZyB0aGlzXG4gICAgICovXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm91dGUsXG4gICAgICAgIGhyZWY6IGNvbXB1dGVkKCgpID0+IHJvdXRlLnZhbHVlLmhyZWYpLFxuICAgICAgICBpc0FjdGl2ZSxcbiAgICAgICAgaXNFeGFjdEFjdGl2ZSxcbiAgICAgICAgbmF2aWdhdGUsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIHByZWZlclNpbmdsZVZOb2RlKHZub2Rlcykge1xuICAgIHJldHVybiB2bm9kZXMubGVuZ3RoID09PSAxID8gdm5vZGVzWzBdIDogdm5vZGVzO1xufVxuY29uc3QgUm91dGVyTGlua0ltcGwgPSAvKiNfX1BVUkVfXyovIGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogJ1JvdXRlckxpbmsnLFxuICAgIGNvbXBhdENvbmZpZzogeyBNT0RFOiAzIH0sXG4gICAgcHJvcHM6IHtcbiAgICAgICAgdG86IHtcbiAgICAgICAgICAgIHR5cGU6IFtTdHJpbmcsIE9iamVjdF0sXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVwbGFjZTogQm9vbGVhbixcbiAgICAgICAgYWN0aXZlQ2xhc3M6IFN0cmluZyxcbiAgICAgICAgLy8gaW5hY3RpdmVDbGFzczogU3RyaW5nLFxuICAgICAgICBleGFjdEFjdGl2ZUNsYXNzOiBTdHJpbmcsXG4gICAgICAgIGN1c3RvbTogQm9vbGVhbixcbiAgICAgICAgYXJpYUN1cnJlbnRWYWx1ZToge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgZGVmYXVsdDogJ3BhZ2UnLFxuICAgICAgICB9LFxuICAgICAgICB2aWV3VHJhbnNpdGlvbjogQm9vbGVhbixcbiAgICB9LFxuICAgIHVzZUxpbmssXG4gICAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgICAgICBjb25zdCBsaW5rID0gcmVhY3RpdmUodXNlTGluayhwcm9wcykpO1xuICAgICAgICBjb25zdCB7IG9wdGlvbnMgfSA9IGluamVjdChyb3V0ZXJLZXkpO1xuICAgICAgICBjb25zdCBlbENsYXNzID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgICAgICAgIFtnZXRMaW5rQ2xhc3MocHJvcHMuYWN0aXZlQ2xhc3MsIG9wdGlvbnMubGlua0FjdGl2ZUNsYXNzLCAncm91dGVyLWxpbmstYWN0aXZlJyldOiBsaW5rLmlzQWN0aXZlLFxuICAgICAgICAgICAgLy8gW2dldExpbmtDbGFzcyhcbiAgICAgICAgICAgIC8vICAgcHJvcHMuaW5hY3RpdmVDbGFzcyxcbiAgICAgICAgICAgIC8vICAgb3B0aW9ucy5saW5rSW5hY3RpdmVDbGFzcyxcbiAgICAgICAgICAgIC8vICAgJ3JvdXRlci1saW5rLWluYWN0aXZlJ1xuICAgICAgICAgICAgLy8gKV06ICFsaW5rLmlzRXhhY3RBY3RpdmUsXG4gICAgICAgICAgICBbZ2V0TGlua0NsYXNzKHByb3BzLmV4YWN0QWN0aXZlQ2xhc3MsIG9wdGlvbnMubGlua0V4YWN0QWN0aXZlQ2xhc3MsICdyb3V0ZXItbGluay1leGFjdC1hY3RpdmUnKV06IGxpbmsuaXNFeGFjdEFjdGl2ZSxcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIHByZWZlclNpbmdsZVZOb2RlKHNsb3RzLmRlZmF1bHQobGluaykpO1xuICAgICAgICAgICAgcmV0dXJuIHByb3BzLmN1c3RvbVxuICAgICAgICAgICAgICAgID8gY2hpbGRyZW5cbiAgICAgICAgICAgICAgICA6IGgoJ2EnLCB7XG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWN1cnJlbnQnOiBsaW5rLmlzRXhhY3RBY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcHJvcHMuYXJpYUN1cnJlbnRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBsaW5rLmhyZWYsXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd291bGQgb3ZlcnJpZGUgdXNlciBhZGRlZCBhdHRycyBidXQgVnVlIHdpbGwgc3RpbGwgYWRkXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBsaXN0ZW5lciwgc28gd2UgZW5kIHVwIHRyaWdnZXJpbmcgYm90aFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBsaW5rLm5hdmlnYXRlLFxuICAgICAgICAgICAgICAgICAgICBjbGFzczogZWxDbGFzcy52YWx1ZSxcbiAgICAgICAgICAgICAgICB9LCBjaGlsZHJlbik7XG4gICAgICAgIH07XG4gICAgfSxcbn0pO1xuLy8gZXhwb3J0IHRoZSBwdWJsaWMgdHlwZSBmb3IgaC90c3ggaW5mZXJlbmNlXG4vLyBhbHNvIHRvIGF2b2lkIGlubGluZSBpbXBvcnQoKSBpbiBnZW5lcmF0ZWQgZC50cyBmaWxlc1xuLyoqXG4gKiBDb21wb25lbnQgdG8gcmVuZGVyIGEgbGluayB0aGF0IHRyaWdnZXJzIGEgbmF2aWdhdGlvbiBvbiBjbGljay5cbiAqL1xuY29uc3QgUm91dGVyTGluayA9IFJvdXRlckxpbmtJbXBsO1xuZnVuY3Rpb24gZ3VhcmRFdmVudChlKSB7XG4gICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXNcbiAgICBpZiAoZS5tZXRhS2V5IHx8IGUuYWx0S2V5IHx8IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5KVxuICAgICAgICByZXR1cm47XG4gICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2hlbiBwcmV2ZW50RGVmYXVsdCBjYWxsZWRcbiAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKVxuICAgICAgICByZXR1cm47XG4gICAgLy8gZG9uJ3QgcmVkaXJlY3Qgb24gcmlnaHQgY2xpY2tcbiAgICBpZiAoZS5idXR0b24gIT09IHVuZGVmaW5lZCAmJiBlLmJ1dHRvbiAhPT0gMClcbiAgICAgICAgcmV0dXJuO1xuICAgIC8vIGRvbid0IHJlZGlyZWN0IGlmIGB0YXJnZXQ9XCJfYmxhbmtcImBcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGdldEF0dHJpYnV0ZSBkb2VzIGV4aXN0XG4gICAgaWYgKGUuY3VycmVudFRhcmdldCAmJiBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgZ2V0QXR0cmlidXRlIGV4aXN0c1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKTtcbiAgICAgICAgaWYgKC9cXGJfYmxhbmtcXGIvaS50ZXN0KHRhcmdldCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHRoaXMgbWF5IGJlIGEgV2VleCBldmVudCB3aGljaCBkb2Vzbid0IGhhdmUgdGhpcyBtZXRob2RcbiAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdClcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaW5jbHVkZXNQYXJhbXMob3V0ZXIsIGlubmVyKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gaW5uZXIpIHtcbiAgICAgICAgY29uc3QgaW5uZXJWYWx1ZSA9IGlubmVyW2tleV07XG4gICAgICAgIGNvbnN0IG91dGVyVmFsdWUgPSBvdXRlcltrZXldO1xuICAgICAgICBpZiAodHlwZW9mIGlubmVyVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoaW5uZXJWYWx1ZSAhPT0gb3V0ZXJWYWx1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWlzQXJyYXkob3V0ZXJWYWx1ZSkgfHxcbiAgICAgICAgICAgICAgICBvdXRlclZhbHVlLmxlbmd0aCAhPT0gaW5uZXJWYWx1ZS5sZW5ndGggfHxcbiAgICAgICAgICAgICAgICBpbm5lclZhbHVlLnNvbWUoKHZhbHVlLCBpKSA9PiB2YWx1ZSAhPT0gb3V0ZXJWYWx1ZVtpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBHZXQgdGhlIG9yaWdpbmFsIHBhdGggdmFsdWUgb2YgYSByZWNvcmQgYnkgZm9sbG93aW5nIGl0cyBhbGlhc09mXG4gKiBAcGFyYW0gcmVjb3JkXG4gKi9cbmZ1bmN0aW9uIGdldE9yaWdpbmFsUGF0aChyZWNvcmQpIHtcbiAgICByZXR1cm4gcmVjb3JkID8gKHJlY29yZC5hbGlhc09mID8gcmVjb3JkLmFsaWFzT2YucGF0aCA6IHJlY29yZC5wYXRoKSA6ICcnO1xufVxuLyoqXG4gKiBVdGlsaXR5IGNsYXNzIHRvIGdldCB0aGUgYWN0aXZlIGNsYXNzIGJhc2VkIG9uIGRlZmF1bHRzLlxuICogQHBhcmFtIHByb3BDbGFzc1xuICogQHBhcmFtIGdsb2JhbENsYXNzXG4gKiBAcGFyYW0gZGVmYXVsdENsYXNzXG4gKi9cbmNvbnN0IGdldExpbmtDbGFzcyA9IChwcm9wQ2xhc3MsIGdsb2JhbENsYXNzLCBkZWZhdWx0Q2xhc3MpID0+IHByb3BDbGFzcyAhPSBudWxsXG4gICAgPyBwcm9wQ2xhc3NcbiAgICA6IGdsb2JhbENsYXNzICE9IG51bGxcbiAgICAgICAgPyBnbG9iYWxDbGFzc1xuICAgICAgICA6IGRlZmF1bHRDbGFzcztcblxuY29uc3QgUm91dGVyVmlld0ltcGwgPSAvKiNfX1BVUkVfXyovIGRlZmluZUNvbXBvbmVudCh7XG4gICAgbmFtZTogJ1JvdXRlclZpZXcnLFxuICAgIC8vICM2NzQgd2UgbWFudWFsbHkgaW5oZXJpdCB0aGVtXG4gICAgaW5oZXJpdEF0dHJzOiBmYWxzZSxcbiAgICBwcm9wczoge1xuICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICBkZWZhdWx0OiAnZGVmYXVsdCcsXG4gICAgICAgIH0sXG4gICAgICAgIHJvdXRlOiBPYmplY3QsXG4gICAgfSxcbiAgICAvLyBCZXR0ZXIgY29tcGF0IGZvciBAdnVlL2NvbXBhdCB1c2Vyc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvaXNzdWVzLzEzMTVcbiAgICBjb21wYXRDb25maWc6IHsgTU9ERTogMyB9LFxuICAgIHNldHVwKHByb3BzLCB7IGF0dHJzLCBzbG90cyB9KSB7XG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuRGVwcmVjYXRlZFVzYWdlKCk7XG4gICAgICAgIGNvbnN0IGluamVjdGVkUm91dGUgPSBpbmplY3Qocm91dGVyVmlld0xvY2F0aW9uS2V5KTtcbiAgICAgICAgY29uc3Qgcm91dGVUb0Rpc3BsYXkgPSBjb21wdXRlZCgoKSA9PiBwcm9wcy5yb3V0ZSB8fCBpbmplY3RlZFJvdXRlLnZhbHVlKTtcbiAgICAgICAgY29uc3QgaW5qZWN0ZWREZXB0aCA9IGluamVjdCh2aWV3RGVwdGhLZXksIDApO1xuICAgICAgICAvLyBUaGUgZGVwdGggY2hhbmdlcyBiYXNlZCBvbiBlbXB0eSBjb21wb25lbnRzIG9wdGlvbiwgd2hpY2ggYWxsb3dzIHBhc3N0aHJvdWdoIHJvdXRlcyBlLmcuIHJvdXRlcyB3aXRoIGNoaWxkcmVuXG4gICAgICAgIC8vIHRoYXQgYXJlIHVzZWQgdG8gcmV1c2UgdGhlIGBwYXRoYCBwcm9wZXJ0eVxuICAgICAgICBjb25zdCBkZXB0aCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgIGxldCBpbml0aWFsRGVwdGggPSB1bnJlZihpbmplY3RlZERlcHRoKTtcbiAgICAgICAgICAgIGNvbnN0IHsgbWF0Y2hlZCB9ID0gcm91dGVUb0Rpc3BsYXkudmFsdWU7XG4gICAgICAgICAgICBsZXQgbWF0Y2hlZFJvdXRlO1xuICAgICAgICAgICAgd2hpbGUgKChtYXRjaGVkUm91dGUgPSBtYXRjaGVkW2luaXRpYWxEZXB0aF0pICYmXG4gICAgICAgICAgICAgICAgIW1hdGNoZWRSb3V0ZS5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbERlcHRoKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbERlcHRoO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbWF0Y2hlZFJvdXRlUmVmID0gY29tcHV0ZWQoKCkgPT4gcm91dGVUb0Rpc3BsYXkudmFsdWUubWF0Y2hlZFtkZXB0aC52YWx1ZV0pO1xuICAgICAgICBwcm92aWRlKHZpZXdEZXB0aEtleSwgY29tcHV0ZWQoKCkgPT4gZGVwdGgudmFsdWUgKyAxKSk7XG4gICAgICAgIHByb3ZpZGUobWF0Y2hlZFJvdXRlS2V5LCBtYXRjaGVkUm91dGVSZWYpO1xuICAgICAgICBwcm92aWRlKHJvdXRlclZpZXdMb2NhdGlvbktleSwgcm91dGVUb0Rpc3BsYXkpO1xuICAgICAgICBjb25zdCB2aWV3UmVmID0gcmVmKCk7XG4gICAgICAgIC8vIHdhdGNoIGF0IHRoZSBzYW1lIHRpbWUgdGhlIGNvbXBvbmVudCBpbnN0YW5jZSwgdGhlIHJvdXRlIHJlY29yZCB3ZSBhcmVcbiAgICAgICAgLy8gcmVuZGVyaW5nLCBhbmQgdGhlIG5hbWVcbiAgICAgICAgd2F0Y2goKCkgPT4gW3ZpZXdSZWYudmFsdWUsIG1hdGNoZWRSb3V0ZVJlZi52YWx1ZSwgcHJvcHMubmFtZV0sIChbaW5zdGFuY2UsIHRvLCBuYW1lXSwgW29sZEluc3RhbmNlLCBmcm9tLCBvbGROYW1lXSkgPT4ge1xuICAgICAgICAgICAgLy8gY29weSByZXVzZWQgaW5zdGFuY2VzXG4gICAgICAgICAgICBpZiAodG8pIHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgdXBkYXRlIHRoZSBpbnN0YW5jZSBmb3IgbmV3IGluc3RhbmNlcyBhcyB3ZWxsIGFzIHJldXNlZFxuICAgICAgICAgICAgICAgIC8vIGluc3RhbmNlcyB3aGVuIG5hdmlnYXRpbmcgdG8gYSBuZXcgcm91dGVcbiAgICAgICAgICAgICAgICB0by5pbnN0YW5jZXNbbmFtZV0gPSBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICAvLyB0aGUgY29tcG9uZW50IGluc3RhbmNlIGlzIHJldXNlZCBmb3IgYSBkaWZmZXJlbnQgcm91dGUgb3IgbmFtZSwgc29cbiAgICAgICAgICAgICAgICAvLyB3ZSBjb3B5IGFueSBzYXZlZCB1cGRhdGUgb3IgbGVhdmUgZ3VhcmRzLiBXaXRoIGFzeW5jIHNldHVwLCB0aGVcbiAgICAgICAgICAgICAgICAvLyBtb3VudGluZyBjb21wb25lbnQgd2lsbCBtb3VudCBiZWZvcmUgdGhlIG1hdGNoZWRSb3V0ZSBjaGFuZ2VzLFxuICAgICAgICAgICAgICAgIC8vIG1ha2luZyBpbnN0YW5jZSA9PT0gb2xkSW5zdGFuY2UsIHNvIHdlIGNoZWNrIGlmIGd1YXJkcyBoYXZlIGJlZW5cbiAgICAgICAgICAgICAgICAvLyBhZGRlZCBiZWZvcmUuIFRoaXMgd29ya3MgYmVjYXVzZSB3ZSByZW1vdmUgZ3VhcmRzIHdoZW5cbiAgICAgICAgICAgICAgICAvLyB1bm1vdW50aW5nL2RlYWN0aXZhdGluZyBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgaWYgKGZyb20gJiYgZnJvbSAhPT0gdG8gJiYgaW5zdGFuY2UgJiYgaW5zdGFuY2UgPT09IG9sZEluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdG8ubGVhdmVHdWFyZHMuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG8ubGVhdmVHdWFyZHMgPSBmcm9tLmxlYXZlR3VhcmRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghdG8udXBkYXRlR3VhcmRzLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvLnVwZGF0ZUd1YXJkcyA9IGZyb20udXBkYXRlR3VhcmRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdHJpZ2dlciBiZWZvcmVSb3V0ZUVudGVyIG5leHQgY2FsbGJhY2tzXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UgJiZcbiAgICAgICAgICAgICAgICB0byAmJlxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGluc3RhbmNlIGJ1dCB0byBhbmQgZnJvbSBhcmUgdGhlIHNhbWUgdGhpcyBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIHRoZSBmaXJzdCB2aXNpdFxuICAgICAgICAgICAgICAgICghZnJvbSB8fCAhaXNTYW1lUm91dGVSZWNvcmQodG8sIGZyb20pIHx8ICFvbGRJbnN0YW5jZSkpIHtcbiAgICAgICAgICAgICAgICAodG8uZW50ZXJDYWxsYmFja3NbbmFtZV0gfHwgW10pLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soaW5zdGFuY2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgeyBmbHVzaDogJ3Bvc3QnIH0pO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb3V0ZVRvRGlzcGxheS52YWx1ZTtcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhlIHZhbHVlIGF0IHRoZSB0aW1lIHdlIHJlbmRlciBiZWNhdXNlIHdoZW4gd2UgdW5tb3VudCwgd2VcbiAgICAgICAgICAgIC8vIG5hdmlnYXRlZCB0byBhIGRpZmZlcmVudCBsb2NhdGlvbiBzbyB0aGUgdmFsdWUgaXMgZGlmZmVyZW50XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TmFtZSA9IHByb3BzLm5hbWU7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkUm91dGUgPSBtYXRjaGVkUm91dGVSZWYudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBWaWV3Q29tcG9uZW50ID0gbWF0Y2hlZFJvdXRlICYmIG1hdGNoZWRSb3V0ZS5jb21wb25lbnRzW2N1cnJlbnROYW1lXTtcbiAgICAgICAgICAgIGlmICghVmlld0NvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxpemVTbG90KHNsb3RzLmRlZmF1bHQsIHsgQ29tcG9uZW50OiBWaWV3Q29tcG9uZW50LCByb3V0ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHByb3BzIGZyb20gcm91dGUgY29uZmlndXJhdGlvblxuICAgICAgICAgICAgY29uc3Qgcm91dGVQcm9wc09wdGlvbiA9IG1hdGNoZWRSb3V0ZS5wcm9wc1tjdXJyZW50TmFtZV07XG4gICAgICAgICAgICBjb25zdCByb3V0ZVByb3BzID0gcm91dGVQcm9wc09wdGlvblxuICAgICAgICAgICAgICAgID8gcm91dGVQcm9wc09wdGlvbiA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICA/IHJvdXRlLnBhcmFtc1xuICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiByb3V0ZVByb3BzT3B0aW9uID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJvdXRlUHJvcHNPcHRpb24ocm91dGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJvdXRlUHJvcHNPcHRpb25cbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBvblZub2RlVW5tb3VudGVkID0gdm5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgaW5zdGFuY2UgcmVmZXJlbmNlIHRvIHByZXZlbnQgbGVha1xuICAgICAgICAgICAgICAgIGlmICh2bm9kZS5jb21wb25lbnQuaXNVbm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZFJvdXRlLmluc3RhbmNlc1tjdXJyZW50TmFtZV0gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBoKFZpZXdDb21wb25lbnQsIGFzc2lnbih7fSwgcm91dGVQcm9wcywgYXR0cnMsIHtcbiAgICAgICAgICAgICAgICBvblZub2RlVW5tb3VudGVkLFxuICAgICAgICAgICAgICAgIHJlZjogdmlld1JlZixcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmICgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykgJiZcbiAgICAgICAgICAgICAgICBpc0Jyb3dzZXIgJiZcbiAgICAgICAgICAgICAgICBjb21wb25lbnQucmVmKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogY2FuIGRpc3BsYXkgaWYgaXQncyBhbiBhbGlhcywgaXRzIHByb3BzXG4gICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZGVwdGg6IGRlcHRoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBtYXRjaGVkUm91dGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogbWF0Y2hlZFJvdXRlLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIG1ldGE6IG1hdGNoZWRSb3V0ZS5tZXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJuYWxJbnN0YW5jZXMgPSBpc0FycmF5KGNvbXBvbmVudC5yZWYpXG4gICAgICAgICAgICAgICAgICAgID8gY29tcG9uZW50LnJlZi5tYXAociA9PiByLmkpXG4gICAgICAgICAgICAgICAgICAgIDogW2NvbXBvbmVudC5yZWYuaV07XG4gICAgICAgICAgICAgICAgaW50ZXJuYWxJbnN0YW5jZXMuZm9yRWFjaChpbnN0YW5jZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuX192cnZfZGV2dG9vbHMgPSBpbmZvO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIC8vIHBhc3MgdGhlIHZub2RlIHRvIHRoZSBzbG90IGFzIGEgcHJvcC5cbiAgICAgICAgICAgIC8vIGggYW5kIDxjb21wb25lbnQgOmlzPVwiLi4uXCI+IGJvdGggYWNjZXB0IHZub2Rlc1xuICAgICAgICAgICAgbm9ybWFsaXplU2xvdChzbG90cy5kZWZhdWx0LCB7IENvbXBvbmVudDogY29tcG9uZW50LCByb3V0ZSB9KSB8fFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudCk7XG4gICAgICAgIH07XG4gICAgfSxcbn0pO1xuZnVuY3Rpb24gbm9ybWFsaXplU2xvdChzbG90LCBkYXRhKSB7XG4gICAgaWYgKCFzbG90KVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBzbG90Q29udGVudCA9IHNsb3QoZGF0YSk7XG4gICAgcmV0dXJuIHNsb3RDb250ZW50Lmxlbmd0aCA9PT0gMSA/IHNsb3RDb250ZW50WzBdIDogc2xvdENvbnRlbnQ7XG59XG4vLyBleHBvcnQgdGhlIHB1YmxpYyB0eXBlIGZvciBoL3RzeCBpbmZlcmVuY2Vcbi8vIGFsc28gdG8gYXZvaWQgaW5saW5lIGltcG9ydCgpIGluIGdlbmVyYXRlZCBkLnRzIGZpbGVzXG4vKipcbiAqIENvbXBvbmVudCB0byBkaXNwbGF5IHRoZSBjdXJyZW50IHJvdXRlIHRoZSB1c2VyIGlzIGF0LlxuICovXG5jb25zdCBSb3V0ZXJWaWV3ID0gUm91dGVyVmlld0ltcGw7XG4vLyB3YXJuIGFnYWluc3QgZGVwcmVjYXRlZCB1c2FnZSB3aXRoIDx0cmFuc2l0aW9uPiAmIDxrZWVwLWFsaXZlPlxuLy8gZHVlIHRvIGZ1bmN0aW9uYWwgY29tcG9uZW50IGJlaW5nIG5vIGxvbmdlciBlYWdlciBpbiBWdWUgM1xuZnVuY3Rpb24gd2FybkRlcHJlY2F0ZWRVc2FnZSgpIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgIGNvbnN0IHBhcmVudE5hbWUgPSBpbnN0YW5jZS5wYXJlbnQgJiYgaW5zdGFuY2UucGFyZW50LnR5cGUubmFtZTtcbiAgICBjb25zdCBwYXJlbnRTdWJUcmVlVHlwZSA9IGluc3RhbmNlLnBhcmVudCAmJiBpbnN0YW5jZS5wYXJlbnQuc3ViVHJlZSAmJiBpbnN0YW5jZS5wYXJlbnQuc3ViVHJlZS50eXBlO1xuICAgIGlmIChwYXJlbnROYW1lICYmXG4gICAgICAgIChwYXJlbnROYW1lID09PSAnS2VlcEFsaXZlJyB8fCBwYXJlbnROYW1lLmluY2x1ZGVzKCdUcmFuc2l0aW9uJykpICYmXG4gICAgICAgIHR5cGVvZiBwYXJlbnRTdWJUcmVlVHlwZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgcGFyZW50U3ViVHJlZVR5cGUubmFtZSA9PT0gJ1JvdXRlclZpZXcnKSB7XG4gICAgICAgIGNvbnN0IGNvbXAgPSBwYXJlbnROYW1lID09PSAnS2VlcEFsaXZlJyA/ICdrZWVwLWFsaXZlJyA6ICd0cmFuc2l0aW9uJztcbiAgICAgICAgd2FybihgPHJvdXRlci12aWV3PiBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgZGlyZWN0bHkgaW5zaWRlIDx0cmFuc2l0aW9uPiBvciA8a2VlcC1hbGl2ZT4uXFxuYCArXG4gICAgICAgICAgICBgVXNlIHNsb3QgcHJvcHMgaW5zdGVhZDpcXG5cXG5gICtcbiAgICAgICAgICAgIGA8cm91dGVyLXZpZXcgdi1zbG90PVwieyBDb21wb25lbnQgfVwiPlxcbmAgK1xuICAgICAgICAgICAgYCAgPCR7Y29tcH0+XFxuYCArXG4gICAgICAgICAgICBgICAgIDxjb21wb25lbnQgOmlzPVwiQ29tcG9uZW50XCIgLz5cXG5gICtcbiAgICAgICAgICAgIGAgIDwvJHtjb21wfT5cXG5gICtcbiAgICAgICAgICAgIGA8L3JvdXRlci12aWV3PmApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb3BpZXMgYSByb3V0ZSBsb2NhdGlvbiBhbmQgcmVtb3ZlcyBhbnkgcHJvYmxlbWF0aWMgcHJvcGVydGllcyB0aGF0IGNhbm5vdCBiZSBzaG93biBpbiBkZXZ0b29scyAoZS5nLiBWdWUgaW5zdGFuY2VzKS5cbiAqXG4gKiBAcGFyYW0gcm91dGVMb2NhdGlvbiAtIHJvdXRlTG9jYXRpb24gdG8gZm9ybWF0XG4gKiBAcGFyYW0gdG9vbHRpcCAtIG9wdGlvbmFsIHRvb2x0aXBcbiAqIEByZXR1cm5zIGEgY29weSBvZiB0aGUgcm91dGVMb2NhdGlvblxuICovXG5mdW5jdGlvbiBmb3JtYXRSb3V0ZUxvY2F0aW9uKHJvdXRlTG9jYXRpb24sIHRvb2x0aXApIHtcbiAgICBjb25zdCBjb3B5ID0gYXNzaWduKHt9LCByb3V0ZUxvY2F0aW9uLCB7XG4gICAgICAgIC8vIHJlbW92ZSB2YXJpYWJsZXMgdGhhdCBjYW4gY29udGFpbiB2dWUgaW5zdGFuY2VzXG4gICAgICAgIG1hdGNoZWQ6IHJvdXRlTG9jYXRpb24ubWF0Y2hlZC5tYXAobWF0Y2hlZCA9PiBvbWl0KG1hdGNoZWQsIFsnaW5zdGFuY2VzJywgJ2NoaWxkcmVuJywgJ2FsaWFzT2YnXSkpLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIF9jdXN0b206IHtcbiAgICAgICAgICAgIHR5cGU6IG51bGwsXG4gICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgIGRpc3BsYXk6IHJvdXRlTG9jYXRpb24uZnVsbFBhdGgsXG4gICAgICAgICAgICB0b29sdGlwLFxuICAgICAgICAgICAgdmFsdWU6IGNvcHksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGZvcm1hdERpc3BsYXkoZGlzcGxheSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIF9jdXN0b206IHtcbiAgICAgICAgICAgIGRpc3BsYXksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIHRvIHN1cHBvcnQgbXVsdGlwbGUgcm91dGVyIGluc3RhbmNlc1xubGV0IHJvdXRlcklkID0gMDtcbmZ1bmN0aW9uIGFkZERldnRvb2xzKGFwcCwgcm91dGVyLCBtYXRjaGVyKSB7XG4gICAgLy8gVGFrZSBvdmVyIHJvdXRlci5iZWZvcmVFYWNoIGFuZCBhZnRlckVhY2hcbiAgICAvLyBtYWtlIHN1cmUgd2UgYXJlIG5vdCByZWdpc3RlcmluZyB0aGUgZGV2dG9vbCB0d2ljZVxuICAgIGlmIChyb3V0ZXIuX19oYXNEZXZ0b29scylcbiAgICAgICAgcmV0dXJuO1xuICAgIHJvdXRlci5fX2hhc0RldnRvb2xzID0gdHJ1ZTtcbiAgICAvLyBpbmNyZW1lbnQgdG8gc3VwcG9ydCBtdWx0aXBsZSByb3V0ZXIgaW5zdGFuY2VzXG4gICAgY29uc3QgaWQgPSByb3V0ZXJJZCsrO1xuICAgIHNldHVwRGV2dG9vbHNQbHVnaW4oe1xuICAgICAgICBpZDogJ29yZy52dWVqcy5yb3V0ZXInICsgKGlkID8gJy4nICsgaWQgOiAnJyksXG4gICAgICAgIGxhYmVsOiAnVnVlIFJvdXRlcicsXG4gICAgICAgIHBhY2thZ2VOYW1lOiAndnVlLXJvdXRlcicsXG4gICAgICAgIGhvbWVwYWdlOiAnaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnJyxcbiAgICAgICAgbG9nbzogJ2h0dHBzOi8vcm91dGVyLnZ1ZWpzLm9yZy9sb2dvLnBuZycsXG4gICAgICAgIGNvbXBvbmVudFN0YXRlVHlwZXM6IFsnUm91dGluZyddLFxuICAgICAgICBhcHAsXG4gICAgfSwgYXBpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGkubm93ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tWdWUgUm91dGVyXTogWW91IHNlZW0gdG8gYmUgdXNpbmcgYW4gb3V0ZGF0ZWQgdmVyc2lvbiBvZiBWdWUgRGV2dG9vbHMuIEFyZSB5b3Ugc3RpbGwgdXNpbmcgdGhlIEJldGEgcmVsZWFzZSBpbnN0ZWFkIG9mIHRoZSBzdGFibGUgb25lPyBZb3UgY2FuIGZpbmQgdGhlIGxpbmtzIGF0IGh0dHBzOi8vZGV2dG9vbHMudnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRpc3BsYXkgc3RhdGUgYWRkZWQgYnkgdGhlIHJvdXRlclxuICAgICAgICBhcGkub24uaW5zcGVjdENvbXBvbmVudCgocGF5bG9hZCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBpZiAocGF5bG9hZC5pbnN0YW5jZURhdGEpIHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLmluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1JvdXRpbmcnLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICckcm91dGUnLFxuICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmb3JtYXRSb3V0ZUxvY2F0aW9uKHJvdXRlci5jdXJyZW50Um91dGUudmFsdWUsICdDdXJyZW50IFJvdXRlJyksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBtYXJrIHJvdXRlci1saW5rIGFzIGFjdGl2ZSBhbmQgZGlzcGxheSB0YWdzIG9uIHJvdXRlciB2aWV3c1xuICAgICAgICBhcGkub24udmlzaXRDb21wb25lbnRUcmVlKCh7IHRyZWVOb2RlOiBub2RlLCBjb21wb25lbnRJbnN0YW5jZSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50SW5zdGFuY2UuX192cnZfZGV2dG9vbHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gY29tcG9uZW50SW5zdGFuY2UuX192cnZfZGV2dG9vbHM7XG4gICAgICAgICAgICAgICAgbm9kZS50YWdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogKGluZm8ubmFtZSA/IGAke2luZm8ubmFtZS50b1N0cmluZygpfTogYCA6ICcnKSArIGluZm8ucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnVGhpcyBjb21wb25lbnQgaXMgcmVuZGVyZWQgYnkgJmx0O3JvdXRlci12aWV3Jmd0OycsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogUElOS181MDAsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiBtdWx0aXBsZSB1c2VMaW5rIGFyZSB1c2VkXG4gICAgICAgICAgICBpZiAoaXNBcnJheShjb21wb25lbnRJbnN0YW5jZS5fX3ZybF9kZXZ0b29scykpIHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnRJbnN0YW5jZS5fX2RldnRvb2xzQXBpID0gYXBpO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudEluc3RhbmNlLl9fdnJsX2RldnRvb2xzLmZvckVhY2goZGV2dG9vbHNEYXRhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxhYmVsID0gZGV2dG9vbHNEYXRhLnJvdXRlLnBhdGg7XG4gICAgICAgICAgICAgICAgICAgIGxldCBiYWNrZ3JvdW5kQ29sb3IgPSBPUkFOR0VfNDAwO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG9vbHRpcCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dENvbG9yID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRldnRvb2xzRGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBkZXZ0b29sc0RhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBSRURfMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yID0gUkVEXzcwMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkZXZ0b29sc0RhdGEuaXNFeGFjdEFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gTElNRV81MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwID0gJ1RoaXMgaXMgZXhhY3RseSBhY3RpdmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRldnRvb2xzRGF0YS5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gQkxVRV82MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwID0gJ1RoaXMgbGluayBpcyBhY3RpdmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5vZGUudGFncy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3YXRjaChyb3V0ZXIuY3VycmVudFJvdXRlLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyByZWZyZXNoIGFjdGl2ZSBzdGF0ZVxuICAgICAgICAgICAgcmVmcmVzaFJvdXRlc1ZpZXcoKTtcbiAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShyb3V0ZXJJbnNwZWN0b3JJZCk7XG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKHJvdXRlckluc3BlY3RvcklkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG5hdmlnYXRpb25zTGF5ZXJJZCA9ICdyb3V0ZXI6bmF2aWdhdGlvbnM6JyArIGlkO1xuICAgICAgICBhcGkuYWRkVGltZWxpbmVMYXllcih7XG4gICAgICAgICAgICBpZDogbmF2aWdhdGlvbnNMYXllcklkLFxuICAgICAgICAgICAgbGFiZWw6IGBSb3V0ZXIke2lkID8gJyAnICsgaWQgOiAnJ30gTmF2aWdhdGlvbnNgLFxuICAgICAgICAgICAgY29sb3I6IDB4NDBhOGM0LFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gY29uc3QgZXJyb3JzTGF5ZXJJZCA9ICdyb3V0ZXI6ZXJyb3JzJ1xuICAgICAgICAvLyBhcGkuYWRkVGltZWxpbmVMYXllcih7XG4gICAgICAgIC8vICAgaWQ6IGVycm9yc0xheWVySWQsXG4gICAgICAgIC8vICAgbGFiZWw6ICdSb3V0ZXIgRXJyb3JzJyxcbiAgICAgICAgLy8gICBjb2xvcjogMHhlYTU0NTUsXG4gICAgICAgIC8vIH0pXG4gICAgICAgIHJvdXRlci5vbkVycm9yKChlcnJvciwgdG8pID0+IHtcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgICAgICAgICAgICBsYXllcklkOiBuYXZpZ2F0aW9uc0xheWVySWQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvciBkdXJpbmcgTmF2aWdhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiB0by5mdWxsUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYXBpLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yIH0sXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHRvLm1ldGEuX19uYXZpZ2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYXR0YWNoZWQgdG8gYG1ldGFgIGFuZCB1c2VkIHRvIGdyb3VwIGV2ZW50c1xuICAgICAgICBsZXQgbmF2aWdhdGlvbklkID0gMDtcbiAgICAgICAgcm91dGVyLmJlZm9yZUVhY2goKHRvLCBmcm9tKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgIGd1YXJkOiBmb3JtYXREaXNwbGF5KCdiZWZvcmVFYWNoJyksXG4gICAgICAgICAgICAgICAgZnJvbTogZm9ybWF0Um91dGVMb2NhdGlvbihmcm9tLCAnQ3VycmVudCBMb2NhdGlvbiBkdXJpbmcgdGhpcyBuYXZpZ2F0aW9uJyksXG4gICAgICAgICAgICAgICAgdG86IGZvcm1hdFJvdXRlTG9jYXRpb24odG8sICdUYXJnZXQgbG9jYXRpb24nKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBVc2VkIHRvIGdyb3VwIG5hdmlnYXRpb25zIHRvZ2V0aGVyLCBoaWRlIGZyb20gZGV2dG9vbHNcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0by5tZXRhLCAnX19uYXZpZ2F0aW9uSWQnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG5hdmlnYXRpb25JZCsrLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogbmF2aWdhdGlvbnNMYXllcklkLFxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGFwaS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdGFydCBvZiBuYXZpZ2F0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IHRvLmZ1bGxQYXRoLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBncm91cElkOiB0by5tZXRhLl9fbmF2aWdhdGlvbklkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJvdXRlci5hZnRlckVhY2goKHRvLCBmcm9tLCBmYWlsdXJlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgIGd1YXJkOiBmb3JtYXREaXNwbGF5KCdhZnRlckVhY2gnKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZmFpbHVyZSkge1xuICAgICAgICAgICAgICAgIGRhdGEuZmFpbHVyZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZhaWx1cmUgPyBmYWlsdXJlLm1lc3NhZ2UgOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdOYXZpZ2F0aW9uIEZhaWx1cmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZhaWx1cmUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkYXRhLnN0YXR1cyA9IGZvcm1hdERpc3BsYXkoJ+KdjCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSBmb3JtYXREaXNwbGF5KCfinIUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdlIHNldCBoZXJlIHRvIGhhdmUgdGhlIHJpZ2h0IG9yZGVyXG4gICAgICAgICAgICBkYXRhLmZyb20gPSBmb3JtYXRSb3V0ZUxvY2F0aW9uKGZyb20sICdDdXJyZW50IExvY2F0aW9uIGR1cmluZyB0aGlzIG5hdmlnYXRpb24nKTtcbiAgICAgICAgICAgIGRhdGEudG8gPSBmb3JtYXRSb3V0ZUxvY2F0aW9uKHRvLCAnVGFyZ2V0IGxvY2F0aW9uJyk7XG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogbmF2aWdhdGlvbnNMYXllcklkLFxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRW5kIG9mIG5hdmlnYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogdG8uZnVsbFBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGFwaS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogZmFpbHVyZSA/ICd3YXJuaW5nJyA6ICdkZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogdG8ubWV0YS5fX25hdmlnYXRpb25JZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5zcGVjdG9yIG9mIEV4aXN0aW5nIHJvdXRlc1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3Qgcm91dGVySW5zcGVjdG9ySWQgPSAncm91dGVyLWluc3BlY3RvcjonICsgaWQ7XG4gICAgICAgIGFwaS5hZGRJbnNwZWN0b3Ioe1xuICAgICAgICAgICAgaWQ6IHJvdXRlckluc3BlY3RvcklkLFxuICAgICAgICAgICAgbGFiZWw6ICdSb3V0ZXMnICsgKGlkID8gJyAnICsgaWQgOiAnJyksXG4gICAgICAgICAgICBpY29uOiAnYm9vaycsXG4gICAgICAgICAgICB0cmVlRmlsdGVyUGxhY2Vob2xkZXI6ICdTZWFyY2ggcm91dGVzJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hSb3V0ZXNWaWV3KCkge1xuICAgICAgICAgICAgLy8gdGhlIHJvdXRlcyB2aWV3IGlzbid0IGFjdGl2ZVxuICAgICAgICAgICAgaWYgKCFhY3RpdmVSb3V0ZXNQYXlsb2FkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBhY3RpdmVSb3V0ZXNQYXlsb2FkO1xuICAgICAgICAgICAgLy8gY2hpbGRyZW4gcm91dGVzIHdpbGwgYXBwZWFyIGFzIG5lc3RlZFxuICAgICAgICAgICAgbGV0IHJvdXRlcyA9IG1hdGNoZXIuZ2V0Um91dGVzKCkuZmlsdGVyKHJvdXRlID0+ICFyb3V0ZS5wYXJlbnQgfHxcbiAgICAgICAgICAgICAgICAvLyB0aGVzZSByb3V0ZXMgaGF2ZSBhIHBhcmVudCB3aXRoIG5vIGNvbXBvbmVudCB3aGljaCB3aWxsIG5vdCBhcHBlYXIgaW4gdGhlIHZpZXdcbiAgICAgICAgICAgICAgICAvLyB0aGVyZWZvcmUgd2Ugc3RpbGwgbmVlZCB0byBpbmNsdWRlIHRoZW1cbiAgICAgICAgICAgICAgICAhcm91dGUucGFyZW50LnJlY29yZC5jb21wb25lbnRzKTtcbiAgICAgICAgICAgIC8vIHJlc2V0IG1hdGNoIHN0YXRlIHRvIGZhbHNlXG4gICAgICAgICAgICByb3V0ZXMuZm9yRWFjaChyZXNldE1hdGNoU3RhdGVPblJvdXRlUmVjb3JkKTtcbiAgICAgICAgICAgIC8vIGFwcGx5IGEgbWF0Y2ggc3RhdGUgaWYgdGhlcmUgaXMgYSBwYXlsb2FkXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5maWx0ZXIpIHtcbiAgICAgICAgICAgICAgICByb3V0ZXMgPSByb3V0ZXMuZmlsdGVyKHJvdXRlID0+IFxuICAgICAgICAgICAgICAgIC8vIHNhdmUgbWF0Y2hlcyBzdGF0ZSBiYXNlZCBvbiB0aGUgcGF5bG9hZFxuICAgICAgICAgICAgICAgIGlzUm91dGVNYXRjaGluZyhyb3V0ZSwgcGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbWFyayBhY3RpdmUgcm91dGVzXG4gICAgICAgICAgICByb3V0ZXMuZm9yRWFjaChyb3V0ZSA9PiBtYXJrUm91dGVSZWNvcmRBY3RpdmUocm91dGUsIHJvdXRlci5jdXJyZW50Um91dGUudmFsdWUpKTtcbiAgICAgICAgICAgIHBheWxvYWQucm9vdE5vZGVzID0gcm91dGVzLm1hcChmb3JtYXRSb3V0ZVJlY29yZEZvckluc3BlY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFjdGl2ZVJvdXRlc1BheWxvYWQ7XG4gICAgICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JUcmVlKHBheWxvYWQgPT4ge1xuICAgICAgICAgICAgYWN0aXZlUm91dGVzUGF5bG9hZCA9IHBheWxvYWQ7XG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSByb3V0ZXJJbnNwZWN0b3JJZCkge1xuICAgICAgICAgICAgICAgIHJlZnJlc2hSb3V0ZXNWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGlzcGxheSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHJvdXRlIHJlY29yZFxuICAgICAgICAgKi9cbiAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclN0YXRlKHBheWxvYWQgPT4ge1xuICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gcm91dGVySW5zcGVjdG9ySWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZXMgPSBtYXRjaGVyLmdldFJvdXRlcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm91dGVzLmZpbmQocm91dGUgPT4gcm91dGUucmVjb3JkLl9fdmRfaWQgPT09IHBheWxvYWQubm9kZUlkKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5zdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGZvcm1hdFJvdXRlUmVjb3JkTWF0Y2hlckZvclN0YXRlSW5zcGVjdG9yKHJvdXRlKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUocm91dGVySW5zcGVjdG9ySWQpO1xuICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKHJvdXRlckluc3BlY3RvcklkKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG1vZGlmaWVyRm9yS2V5KGtleSkge1xuICAgIGlmIChrZXkub3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIGtleS5yZXBlYXRhYmxlID8gJyonIDogJz8nO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGtleS5yZXBlYXRhYmxlID8gJysnIDogJyc7XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0Um91dGVSZWNvcmRNYXRjaGVyRm9yU3RhdGVJbnNwZWN0b3Iocm91dGUpIHtcbiAgICBjb25zdCB7IHJlY29yZCB9ID0gcm91dGU7XG4gICAgY29uc3QgZmllbGRzID0gW1xuICAgICAgICB7IGVkaXRhYmxlOiBmYWxzZSwga2V5OiAncGF0aCcsIHZhbHVlOiByZWNvcmQucGF0aCB9LFxuICAgIF07XG4gICAgaWYgKHJlY29yZC5uYW1lICE9IG51bGwpIHtcbiAgICAgICAgZmllbGRzLnB1c2goe1xuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAga2V5OiAnbmFtZScsXG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLm5hbWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaWVsZHMucHVzaCh7IGVkaXRhYmxlOiBmYWxzZSwga2V5OiAncmVnZXhwJywgdmFsdWU6IHJvdXRlLnJlIH0pO1xuICAgIGlmIChyb3V0ZS5rZXlzLmxlbmd0aCkge1xuICAgICAgICBmaWVsZHMucHVzaCh7XG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBrZXk6ICdrZXlzJyxcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogcm91dGUua2V5c1xuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChrZXkgPT4gYCR7a2V5Lm5hbWV9JHttb2RpZmllckZvcktleShrZXkpfWApXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbignICcpLFxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUGFyYW0ga2V5cycsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5rZXlzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJlY29yZC5yZWRpcmVjdCAhPSBudWxsKSB7XG4gICAgICAgIGZpZWxkcy5wdXNoKHtcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGtleTogJ3JlZGlyZWN0JyxcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQucmVkaXJlY3QsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocm91dGUuYWxpYXMubGVuZ3RoKSB7XG4gICAgICAgIGZpZWxkcy5wdXNoKHtcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGtleTogJ2FsaWFzZXMnLFxuICAgICAgICAgICAgdmFsdWU6IHJvdXRlLmFsaWFzLm1hcChhbGlhcyA9PiBhbGlhcy5yZWNvcmQucGF0aCksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMocm91dGUucmVjb3JkLm1ldGEpLmxlbmd0aCkge1xuICAgICAgICBmaWVsZHMucHVzaCh7XG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBrZXk6ICdtZXRhJyxcbiAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5yZWNvcmQubWV0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpZWxkcy5wdXNoKHtcbiAgICAgICAga2V5OiAnc2NvcmUnLFxuICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBfY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogbnVsbCxcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiByb3V0ZS5zY29yZS5tYXAoc2NvcmUgPT4gc2NvcmUuam9pbignLCAnKSkuam9pbignIHwgJyksXG4gICAgICAgICAgICAgICAgdG9vbHRpcDogJ1Njb3JlIHVzZWQgdG8gc29ydCByb3V0ZXMnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByb3V0ZS5zY29yZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIGZpZWxkcztcbn1cbi8qKlxuICogRXh0cmFjdGVkIGZyb20gdGFpbHdpbmQgcGFsZXR0ZVxuICovXG5jb25zdCBQSU5LXzUwMCA9IDB4ZWM0ODk5O1xuY29uc3QgQkxVRV82MDAgPSAweDI1NjNlYjtcbmNvbnN0IExJTUVfNTAwID0gMHg4NGNjMTY7XG5jb25zdCBDWUFOXzQwMCA9IDB4MjJkM2VlO1xuY29uc3QgT1JBTkdFXzQwMCA9IDB4ZmI5MjNjO1xuLy8gY29uc3QgR1JBWV8xMDAgPSAweGY0ZjRmNVxuY29uc3QgREFSSyA9IDB4NjY2NjY2O1xuY29uc3QgUkVEXzEwMCA9IDB4ZmVlMmUyO1xuY29uc3QgUkVEXzcwMCA9IDB4YjkxYzFjO1xuZnVuY3Rpb24gZm9ybWF0Um91dGVSZWNvcmRGb3JJbnNwZWN0b3Iocm91dGUpIHtcbiAgICBjb25zdCB0YWdzID0gW107XG4gICAgY29uc3QgeyByZWNvcmQgfSA9IHJvdXRlO1xuICAgIGlmIChyZWNvcmQubmFtZSAhPSBudWxsKSB7XG4gICAgICAgIHRhZ3MucHVzaCh7XG4gICAgICAgICAgICBsYWJlbDogU3RyaW5nKHJlY29yZC5uYW1lKSxcbiAgICAgICAgICAgIHRleHRDb2xvcjogMCxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogQ1lBTl80MDAsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocmVjb3JkLmFsaWFzT2YpIHtcbiAgICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgICAgIGxhYmVsOiAnYWxpYXMnLFxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBPUkFOR0VfNDAwLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJvdXRlLl9fdmRfbWF0Y2gpIHtcbiAgICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgICAgIGxhYmVsOiAnbWF0Y2hlcycsXG4gICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFBJTktfNTAwLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJvdXRlLl9fdmRfZXhhY3RBY3RpdmUpIHtcbiAgICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgICAgIGxhYmVsOiAnZXhhY3QnLFxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBMSU1FXzUwMCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChyb3V0ZS5fX3ZkX2FjdGl2ZSkge1xuICAgICAgICB0YWdzLnB1c2goe1xuICAgICAgICAgICAgbGFiZWw6ICdhY3RpdmUnLFxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBCTFVFXzYwMCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChyZWNvcmQucmVkaXJlY3QpIHtcbiAgICAgICAgdGFncy5wdXNoKHtcbiAgICAgICAgICAgIGxhYmVsOiB0eXBlb2YgcmVjb3JkLnJlZGlyZWN0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gYHJlZGlyZWN0OiAke3JlY29yZC5yZWRpcmVjdH1gXG4gICAgICAgICAgICAgICAgOiAncmVkaXJlY3RzJyxcbiAgICAgICAgICAgIHRleHRDb2xvcjogMHhmZmZmZmYsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IERBUkssXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBhZGQgYW4gaWQgdG8gYmUgYWJsZSB0byBzZWxlY3QgaXQuIFVzaW5nIHRoZSBgcGF0aGAgaXMgbm90IHBvc3NpYmxlIGJlY2F1c2VcbiAgICAvLyBlbXB0eSBwYXRoIGNoaWxkcmVuIHdvdWxkIGNvbGxpZGUgd2l0aCB0aGVpciBwYXJlbnRzXG4gICAgbGV0IGlkID0gcmVjb3JkLl9fdmRfaWQ7XG4gICAgaWYgKGlkID09IG51bGwpIHtcbiAgICAgICAgaWQgPSBTdHJpbmcocm91dGVSZWNvcmRJZCsrKTtcbiAgICAgICAgcmVjb3JkLl9fdmRfaWQgPSBpZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQsXG4gICAgICAgIGxhYmVsOiByZWNvcmQucGF0aCxcbiAgICAgICAgdGFncyxcbiAgICAgICAgY2hpbGRyZW46IHJvdXRlLmNoaWxkcmVuLm1hcChmb3JtYXRSb3V0ZVJlY29yZEZvckluc3BlY3RvciksXG4gICAgfTtcbn1cbi8vICBpbmNyZW1lbnRhbCBpZCBmb3Igcm91dGUgcmVjb3JkcyBhbmQgaW5zcGVjdG9yIHN0YXRlXG5sZXQgcm91dGVSZWNvcmRJZCA9IDA7XG5jb25zdCBFWFRSQUNUX1JFR0VYUF9SRSA9IC9eXFwvKC4qKVxcLyhbYS16XSopJC87XG5mdW5jdGlvbiBtYXJrUm91dGVSZWNvcmRBY3RpdmUocm91dGUsIGN1cnJlbnRSb3V0ZSkge1xuICAgIC8vIG5vIHJvdXRlIHdpbGwgYmUgYWN0aXZlIGlmIG1hdGNoZWQgaXMgZW1wdHlcbiAgICAvLyByZXNldCB0aGUgbWF0Y2hpbmcgc3RhdGVcbiAgICBjb25zdCBpc0V4YWN0QWN0aXZlID0gY3VycmVudFJvdXRlLm1hdGNoZWQubGVuZ3RoICYmXG4gICAgICAgIGlzU2FtZVJvdXRlUmVjb3JkKGN1cnJlbnRSb3V0ZS5tYXRjaGVkW2N1cnJlbnRSb3V0ZS5tYXRjaGVkLmxlbmd0aCAtIDFdLCByb3V0ZS5yZWNvcmQpO1xuICAgIHJvdXRlLl9fdmRfZXhhY3RBY3RpdmUgPSByb3V0ZS5fX3ZkX2FjdGl2ZSA9IGlzRXhhY3RBY3RpdmU7XG4gICAgaWYgKCFpc0V4YWN0QWN0aXZlKSB7XG4gICAgICAgIHJvdXRlLl9fdmRfYWN0aXZlID0gY3VycmVudFJvdXRlLm1hdGNoZWQuc29tZShtYXRjaCA9PiBpc1NhbWVSb3V0ZVJlY29yZChtYXRjaCwgcm91dGUucmVjb3JkKSk7XG4gICAgfVxuICAgIHJvdXRlLmNoaWxkcmVuLmZvckVhY2goY2hpbGRSb3V0ZSA9PiBtYXJrUm91dGVSZWNvcmRBY3RpdmUoY2hpbGRSb3V0ZSwgY3VycmVudFJvdXRlKSk7XG59XG5mdW5jdGlvbiByZXNldE1hdGNoU3RhdGVPblJvdXRlUmVjb3JkKHJvdXRlKSB7XG4gICAgcm91dGUuX192ZF9tYXRjaCA9IGZhbHNlO1xuICAgIHJvdXRlLmNoaWxkcmVuLmZvckVhY2gocmVzZXRNYXRjaFN0YXRlT25Sb3V0ZVJlY29yZCk7XG59XG5mdW5jdGlvbiBpc1JvdXRlTWF0Y2hpbmcocm91dGUsIGZpbHRlcikge1xuICAgIGNvbnN0IGZvdW5kID0gU3RyaW5nKHJvdXRlLnJlKS5tYXRjaChFWFRSQUNUX1JFR0VYUF9SRSk7XG4gICAgcm91dGUuX192ZF9tYXRjaCA9IGZhbHNlO1xuICAgIGlmICghZm91bmQgfHwgZm91bmQubGVuZ3RoIDwgMykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIHVzZSBhIHJlZ2V4cCB3aXRob3V0ICQgYXQgdGhlIGVuZCB0byBtYXRjaCBuZXN0ZWQgcm91dGVzIGJldHRlclxuICAgIGNvbnN0IG5vbkVuZGluZ1JFID0gbmV3IFJlZ0V4cChmb3VuZFsxXS5yZXBsYWNlKC9cXCQkLywgJycpLCBmb3VuZFsyXSk7XG4gICAgaWYgKG5vbkVuZGluZ1JFLnRlc3QoZmlsdGVyKSkge1xuICAgICAgICAvLyBtYXJrIGNoaWxkcmVuIGFzIG1hdGNoZXNcbiAgICAgICAgcm91dGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiBpc1JvdXRlTWF0Y2hpbmcoY2hpbGQsIGZpbHRlcikpO1xuICAgICAgICAvLyBleGNlcHRpb24gY2FzZTogYC9gXG4gICAgICAgIGlmIChyb3V0ZS5yZWNvcmQucGF0aCAhPT0gJy8nIHx8IGZpbHRlciA9PT0gJy8nKSB7XG4gICAgICAgICAgICByb3V0ZS5fX3ZkX21hdGNoID0gcm91dGUucmUudGVzdChmaWx0ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaGlkZSB0aGUgLyByb3V0ZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHBhdGggPSByb3V0ZS5yZWNvcmQucGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IGRlY29kZWRQYXRoID0gZGVjb2RlKHBhdGgpO1xuICAgIC8vIGFsc28gYWxsb3cgcGFydGlhbCBtYXRjaGluZyBvbiB0aGUgcGF0aFxuICAgIGlmICghZmlsdGVyLnN0YXJ0c1dpdGgoJy8nKSAmJlxuICAgICAgICAoZGVjb2RlZFBhdGguaW5jbHVkZXMoZmlsdGVyKSB8fCBwYXRoLmluY2x1ZGVzKGZpbHRlcikpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoZGVjb2RlZFBhdGguc3RhcnRzV2l0aChmaWx0ZXIpIHx8IHBhdGguc3RhcnRzV2l0aChmaWx0ZXIpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAocm91dGUucmVjb3JkLm5hbWUgJiYgU3RyaW5nKHJvdXRlLnJlY29yZC5uYW1lKS5pbmNsdWRlcyhmaWx0ZXIpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gcm91dGUuY2hpbGRyZW4uc29tZShjaGlsZCA9PiBpc1JvdXRlTWF0Y2hpbmcoY2hpbGQsIGZpbHRlcikpO1xufVxuZnVuY3Rpb24gb21pdChvYmosIGtleXMpIHtcbiAgICBjb25zdCByZXQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKCFrZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIHJldFtrZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUm91dGVyIGluc3RhbmNlIHRoYXQgY2FuIGJlIHVzZWQgYnkgYSBWdWUgYXBwLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0ge0BsaW5rIFJvdXRlck9wdGlvbnN9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlcihvcHRpb25zKSB7XG4gICAgY29uc3QgbWF0Y2hlciA9IGNyZWF0ZVJvdXRlck1hdGNoZXIob3B0aW9ucy5yb3V0ZXMsIG9wdGlvbnMpO1xuICAgIGNvbnN0IHBhcnNlUXVlcnkkMSA9IG9wdGlvbnMucGFyc2VRdWVyeSB8fCBwYXJzZVF1ZXJ5O1xuICAgIGNvbnN0IHN0cmluZ2lmeVF1ZXJ5JDEgPSBvcHRpb25zLnN0cmluZ2lmeVF1ZXJ5IHx8IHN0cmluZ2lmeVF1ZXJ5O1xuICAgIGNvbnN0IHJvdXRlckhpc3RvcnkgPSBvcHRpb25zLmhpc3Rvcnk7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcm91dGVySGlzdG9yeSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcm92aWRlIHRoZSBcImhpc3RvcnlcIiBvcHRpb24gd2hlbiBjYWxsaW5nIFwiY3JlYXRlUm91dGVyKClcIjonICtcbiAgICAgICAgICAgICcgaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2FwaS9pbnRlcmZhY2VzL1JvdXRlck9wdGlvbnMuaHRtbCNoaXN0b3J5Jyk7XG4gICAgY29uc3QgYmVmb3JlR3VhcmRzID0gdXNlQ2FsbGJhY2tzKCk7XG4gICAgY29uc3QgYmVmb3JlUmVzb2x2ZUd1YXJkcyA9IHVzZUNhbGxiYWNrcygpO1xuICAgIGNvbnN0IGFmdGVyR3VhcmRzID0gdXNlQ2FsbGJhY2tzKCk7XG4gICAgY29uc3QgY3VycmVudFJvdXRlID0gc2hhbGxvd1JlZihTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKTtcbiAgICBsZXQgcGVuZGluZ0xvY2F0aW9uID0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRDtcbiAgICAvLyBsZWF2ZSB0aGUgc2Nyb2xsUmVzdG9yYXRpb24gaWYgbm8gc2Nyb2xsQmVoYXZpb3IgaXMgcHJvdmlkZWRcbiAgICBpZiAoaXNCcm93c2VyICYmIG9wdGlvbnMuc2Nyb2xsQmVoYXZpb3IgJiYgJ3Njcm9sbFJlc3RvcmF0aW9uJyBpbiBoaXN0b3J5KSB7XG4gICAgICAgIGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSAnbWFudWFsJztcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplUGFyYW1zID0gYXBwbHlUb1BhcmFtcy5iaW5kKG51bGwsIHBhcmFtVmFsdWUgPT4gJycgKyBwYXJhbVZhbHVlKTtcbiAgICBjb25zdCBlbmNvZGVQYXJhbXMgPSBhcHBseVRvUGFyYW1zLmJpbmQobnVsbCwgZW5jb2RlUGFyYW0pO1xuICAgIGNvbnN0IGRlY29kZVBhcmFtcyA9IFxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGludGVudGlvbmFsbHkgYXZvaWQgdGhlIHR5cGUgY2hlY2tcbiAgICBhcHBseVRvUGFyYW1zLmJpbmQobnVsbCwgZGVjb2RlKTtcbiAgICBmdW5jdGlvbiBhZGRSb3V0ZShwYXJlbnRPclJvdXRlLCByb3V0ZSkge1xuICAgICAgICBsZXQgcGFyZW50O1xuICAgICAgICBsZXQgcmVjb3JkO1xuICAgICAgICBpZiAoaXNSb3V0ZU5hbWUocGFyZW50T3JSb3V0ZSkpIHtcbiAgICAgICAgICAgIHBhcmVudCA9IG1hdGNoZXIuZ2V0UmVjb3JkTWF0Y2hlcihwYXJlbnRPclJvdXRlKTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXBhcmVudCkge1xuICAgICAgICAgICAgICAgIHdhcm4oYFBhcmVudCByb3V0ZSBcIiR7U3RyaW5nKHBhcmVudE9yUm91dGUpfVwiIG5vdCBmb3VuZCB3aGVuIGFkZGluZyBjaGlsZCByb3V0ZWAsIHJvdXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlY29yZCA9IHJvdXRlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVjb3JkID0gcGFyZW50T3JSb3V0ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF0Y2hlci5hZGRSb3V0ZShyZWNvcmQsIHBhcmVudCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbW92ZVJvdXRlKG5hbWUpIHtcbiAgICAgICAgY29uc3QgcmVjb3JkTWF0Y2hlciA9IG1hdGNoZXIuZ2V0UmVjb3JkTWF0Y2hlcihuYW1lKTtcbiAgICAgICAgaWYgKHJlY29yZE1hdGNoZXIpIHtcbiAgICAgICAgICAgIG1hdGNoZXIucmVtb3ZlUm91dGUocmVjb3JkTWF0Y2hlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICB3YXJuKGBDYW5ub3QgcmVtb3ZlIG5vbi1leGlzdGVudCByb3V0ZSBcIiR7U3RyaW5nKG5hbWUpfVwiYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Um91dGVzKCkge1xuICAgICAgICByZXR1cm4gbWF0Y2hlci5nZXRSb3V0ZXMoKS5tYXAocm91dGVNYXRjaGVyID0+IHJvdXRlTWF0Y2hlci5yZWNvcmQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYXNSb3V0ZShuYW1lKSB7XG4gICAgICAgIHJldHVybiAhIW1hdGNoZXIuZ2V0UmVjb3JkTWF0Y2hlcihuYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzb2x2ZShyYXdMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKSB7XG4gICAgICAgIC8vIGNvbnN0IHJlc29sdmU6IFJvdXRlclsncmVzb2x2ZSddID0gKHJhd0xvY2F0aW9uOiBSb3V0ZUxvY2F0aW9uUmF3LCBjdXJyZW50TG9jYXRpb24pID0+IHtcbiAgICAgICAgLy8gY29uc3Qgb2JqZWN0TG9jYXRpb24gPSByb3V0ZXJMb2NhdGlvbkFzT2JqZWN0KHJhd0xvY2F0aW9uKVxuICAgICAgICAvLyB3ZSBjcmVhdGUgYSBjb3B5IHRvIG1vZGlmeSBpdCBsYXRlclxuICAgICAgICBjdXJyZW50TG9jYXRpb24gPSBhc3NpZ24oe30sIGN1cnJlbnRMb2NhdGlvbiB8fCBjdXJyZW50Um91dGUudmFsdWUpO1xuICAgICAgICBpZiAodHlwZW9mIHJhd0xvY2F0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc3QgbG9jYXRpb25Ob3JtYWxpemVkID0gcGFyc2VVUkwocGFyc2VRdWVyeSQxLCByYXdMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uLnBhdGgpO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlZFJvdXRlID0gbWF0Y2hlci5yZXNvbHZlKHsgcGF0aDogbG9jYXRpb25Ob3JtYWxpemVkLnBhdGggfSwgY3VycmVudExvY2F0aW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGhyZWYgPSByb3V0ZXJIaXN0b3J5LmNyZWF0ZUhyZWYobG9jYXRpb25Ob3JtYWxpemVkLmZ1bGxQYXRoKTtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaHJlZi5zdGFydHNXaXRoKCcvLycpKVxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBMb2NhdGlvbiBcIiR7cmF3TG9jYXRpb259XCIgcmVzb2x2ZWQgdG8gXCIke2hyZWZ9XCIuIEEgcmVzb2x2ZWQgbG9jYXRpb24gY2Fubm90IHN0YXJ0IHdpdGggbXVsdGlwbGUgc2xhc2hlcy5gKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghbWF0Y2hlZFJvdXRlLm1hdGNoZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYE5vIG1hdGNoIGZvdW5kIGZvciBsb2NhdGlvbiB3aXRoIHBhdGggXCIke3Jhd0xvY2F0aW9ufVwiYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbG9jYXRpb25Ob3JtYWxpemVkIGlzIGFsd2F5cyBhIG5ldyBvYmplY3RcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ24obG9jYXRpb25Ob3JtYWxpemVkLCBtYXRjaGVkUm91dGUsIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGRlY29kZVBhcmFtcyhtYXRjaGVkUm91dGUucGFyYW1zKSxcbiAgICAgICAgICAgICAgICBoYXNoOiBkZWNvZGUobG9jYXRpb25Ob3JtYWxpemVkLmhhc2gpLFxuICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgaHJlZixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzUm91dGVMb2NhdGlvbihyYXdMb2NhdGlvbikpIHtcbiAgICAgICAgICAgIHdhcm4oYHJvdXRlci5yZXNvbHZlKCkgd2FzIHBhc3NlZCBhbiBpbnZhbGlkIGxvY2F0aW9uLiBUaGlzIHdpbGwgZmFpbCBpbiBwcm9kdWN0aW9uLlxcbi0gTG9jYXRpb246YCwgcmF3TG9jYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoe30pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBtYXRjaGVyTG9jYXRpb247XG4gICAgICAgIC8vIHBhdGggY291bGQgYmUgcmVsYXRpdmUgaW4gb2JqZWN0IGFzIHdlbGxcbiAgICAgICAgaWYgKHJhd0xvY2F0aW9uLnBhdGggIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgICdwYXJhbXMnIGluIHJhd0xvY2F0aW9uICYmXG4gICAgICAgICAgICAgICAgISgnbmFtZScgaW4gcmF3TG9jYXRpb24pICYmXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdGhlIHR5cGUgaXMgbmV2ZXJcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhyYXdMb2NhdGlvbi5wYXJhbXMpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHdhcm4oYFBhdGggXCIke3Jhd0xvY2F0aW9uLnBhdGh9XCIgd2FzIHBhc3NlZCB3aXRoIHBhcmFtcyBidXQgdGhleSB3aWxsIGJlIGlnbm9yZWQuIFVzZSBhIG5hbWVkIHJvdXRlIGFsb25nc2lkZSBwYXJhbXMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hdGNoZXJMb2NhdGlvbiA9IGFzc2lnbih7fSwgcmF3TG9jYXRpb24sIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXJzZVVSTChwYXJzZVF1ZXJ5JDEsIHJhd0xvY2F0aW9uLnBhdGgsIGN1cnJlbnRMb2NhdGlvbi5wYXRoKS5wYXRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgYW55IG51bGxpc2ggcGFyYW1cbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFBhcmFtcyA9IGFzc2lnbih7fSwgcmF3TG9jYXRpb24ucGFyYW1zKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRhcmdldFBhcmFtcykge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRQYXJhbXNba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRQYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwYXNzIGVuY29kZWQgdmFsdWVzIHRvIHRoZSBtYXRjaGVyLCBzbyBpdCBjYW4gcHJvZHVjZSBlbmNvZGVkIHBhdGggYW5kIGZ1bGxQYXRoXG4gICAgICAgICAgICBtYXRjaGVyTG9jYXRpb24gPSBhc3NpZ24oe30sIHJhd0xvY2F0aW9uLCB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiBlbmNvZGVQYXJhbXModGFyZ2V0UGFyYW1zKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY3VycmVudCBsb2NhdGlvbiBwYXJhbXMgYXJlIGRlY29kZWQsIHdlIG5lZWQgdG8gZW5jb2RlIHRoZW0gaW4gY2FzZSB0aGVcbiAgICAgICAgICAgIC8vIG1hdGNoZXIgbWVyZ2VzIHRoZSBwYXJhbXNcbiAgICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbi5wYXJhbXMgPSBlbmNvZGVQYXJhbXMoY3VycmVudExvY2F0aW9uLnBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWF0Y2hlZFJvdXRlID0gbWF0Y2hlci5yZXNvbHZlKG1hdGNoZXJMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKTtcbiAgICAgICAgY29uc3QgaGFzaCA9IHJhd0xvY2F0aW9uLmhhc2ggfHwgJyc7XG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaGFzaCAmJiAhaGFzaC5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgIHdhcm4oYEEgXFxgaGFzaFxcYCBzaG91bGQgYWx3YXlzIHN0YXJ0IHdpdGggdGhlIGNoYXJhY3RlciBcIiNcIi4gUmVwbGFjZSBcIiR7aGFzaH1cIiB3aXRoIFwiIyR7aGFzaH1cIi5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGUgbWF0Y2hlciBtaWdodCBoYXZlIG1lcmdlZCBjdXJyZW50IGxvY2F0aW9uIHBhcmFtcywgc29cbiAgICAgICAgLy8gd2UgbmVlZCB0byBydW4gdGhlIGRlY29kaW5nIGFnYWluXG4gICAgICAgIG1hdGNoZWRSb3V0ZS5wYXJhbXMgPSBub3JtYWxpemVQYXJhbXMoZGVjb2RlUGFyYW1zKG1hdGNoZWRSb3V0ZS5wYXJhbXMpKTtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBzdHJpbmdpZnlVUkwoc3RyaW5naWZ5UXVlcnkkMSwgYXNzaWduKHt9LCByYXdMb2NhdGlvbiwge1xuICAgICAgICAgICAgaGFzaDogZW5jb2RlSGFzaChoYXNoKSxcbiAgICAgICAgICAgIHBhdGg6IG1hdGNoZWRSb3V0ZS5wYXRoLFxuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGhyZWYgPSByb3V0ZXJIaXN0b3J5LmNyZWF0ZUhyZWYoZnVsbFBhdGgpO1xuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICBpZiAoaHJlZi5zdGFydHNXaXRoKCcvLycpKSB7XG4gICAgICAgICAgICAgICAgd2FybihgTG9jYXRpb24gXCIke3Jhd0xvY2F0aW9ufVwiIHJlc29sdmVkIHRvIFwiJHtocmVmfVwiLiBBIHJlc29sdmVkIGxvY2F0aW9uIGNhbm5vdCBzdGFydCB3aXRoIG11bHRpcGxlIHNsYXNoZXMuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghbWF0Y2hlZFJvdXRlLm1hdGNoZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgd2FybihgTm8gbWF0Y2ggZm91bmQgZm9yIGxvY2F0aW9uIHdpdGggcGF0aCBcIiR7cmF3TG9jYXRpb24ucGF0aCAhPSBudWxsID8gcmF3TG9jYXRpb24ucGF0aCA6IHJhd0xvY2F0aW9ufVwiYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFzc2lnbih7XG4gICAgICAgICAgICBmdWxsUGF0aCxcbiAgICAgICAgICAgIC8vIGtlZXAgdGhlIGhhc2ggZW5jb2RlZCBzbyBmdWxsUGF0aCBpcyBlZmZlY3RpdmVseSBwYXRoICsgZW5jb2RlZFF1ZXJ5ICtcbiAgICAgICAgICAgIC8vIGhhc2hcbiAgICAgICAgICAgIGhhc2gsXG4gICAgICAgICAgICBxdWVyeTogXG4gICAgICAgICAgICAvLyBpZiB0aGUgdXNlciBpcyB1c2luZyBhIGN1c3RvbSBxdWVyeSBsaWIgbGlrZSBxcywgd2UgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgLy8gbmVzdGVkIG9iamVjdHMsIHNvIHdlIGtlZXAgdGhlIHF1ZXJ5IGFzIGlzLCBtZWFuaW5nIGl0IGNhbiBjb250YWluXG4gICAgICAgICAgICAvLyBudW1iZXJzIGF0IGAkcm91dGUucXVlcnlgLCBidXQgYXQgdGhlIHBvaW50LCB0aGUgdXNlciB3aWxsIGhhdmUgdG9cbiAgICAgICAgICAgIC8vIHVzZSB0aGVpciBvd24gdHlwZSBhbnl3YXkuXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy8zMjgjaXNzdWVjb21tZW50LTY0OTQ4MTU2N1xuICAgICAgICAgICAgc3RyaW5naWZ5UXVlcnkkMSA9PT0gc3RyaW5naWZ5UXVlcnlcbiAgICAgICAgICAgICAgICA/IG5vcm1hbGl6ZVF1ZXJ5KHJhd0xvY2F0aW9uLnF1ZXJ5KVxuICAgICAgICAgICAgICAgIDogKHJhd0xvY2F0aW9uLnF1ZXJ5IHx8IHt9KSxcbiAgICAgICAgfSwgbWF0Y2hlZFJvdXRlLCB7XG4gICAgICAgICAgICByZWRpcmVjdGVkRnJvbTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaHJlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxvY2F0aW9uQXNPYmplY3QodG8pIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0byA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gcGFyc2VVUkwocGFyc2VRdWVyeSQxLCB0bywgY3VycmVudFJvdXRlLnZhbHVlLnBhdGgpXG4gICAgICAgICAgICA6IGFzc2lnbih7fSwgdG8pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbih0bywgZnJvbSkge1xuICAgICAgICBpZiAocGVuZGluZ0xvY2F0aW9uICE9PSB0bykge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJvdXRlckVycm9yKDggLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0NBTkNFTExFRCAqLywge1xuICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBwdXNoKHRvKSB7XG4gICAgICAgIHJldHVybiBwdXNoV2l0aFJlZGlyZWN0KHRvKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVwbGFjZSh0bykge1xuICAgICAgICByZXR1cm4gcHVzaChhc3NpZ24obG9jYXRpb25Bc09iamVjdCh0byksIHsgcmVwbGFjZTogdHJ1ZSB9KSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlZGlyZWN0UmVjb3JkKHRvKSB7XG4gICAgICAgIGNvbnN0IGxhc3RNYXRjaGVkID0gdG8ubWF0Y2hlZFt0by5tYXRjaGVkLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdE1hdGNoZWQgJiYgbGFzdE1hdGNoZWQucmVkaXJlY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcmVkaXJlY3QgfSA9IGxhc3RNYXRjaGVkO1xuICAgICAgICAgICAgbGV0IG5ld1RhcmdldExvY2F0aW9uID0gdHlwZW9mIHJlZGlyZWN0ID09PSAnZnVuY3Rpb24nID8gcmVkaXJlY3QodG8pIDogcmVkaXJlY3Q7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5ld1RhcmdldExvY2F0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG5ld1RhcmdldExvY2F0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgbmV3VGFyZ2V0TG9jYXRpb24uaW5jbHVkZXMoJz8nKSB8fCBuZXdUYXJnZXRMb2NhdGlvbi5pbmNsdWRlcygnIycpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChuZXdUYXJnZXRMb2NhdGlvbiA9IGxvY2F0aW9uQXNPYmplY3QobmV3VGFyZ2V0TG9jYXRpb24pKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAvLyBmb3JjZSBlbXB0eSBwYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHBhdGg6IG5ld1RhcmdldExvY2F0aW9uIH07XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogZm9yY2UgZW1wdHkgcGFyYW1zIHdoZW4gYSBzdHJpbmcgaXMgcGFzc2VkIHRvIGxldFxuICAgICAgICAgICAgICAgIC8vIHRoZSByb3V0ZXIgcGFyc2UgdGhlbSBhZ2FpblxuICAgICAgICAgICAgICAgIG5ld1RhcmdldExvY2F0aW9uLnBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxuICAgICAgICAgICAgICAgIG5ld1RhcmdldExvY2F0aW9uLnBhdGggPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICEoJ25hbWUnIGluIG5ld1RhcmdldExvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgIHdhcm4oYEludmFsaWQgcmVkaXJlY3QgZm91bmQ6XFxuJHtKU09OLnN0cmluZ2lmeShuZXdUYXJnZXRMb2NhdGlvbiwgbnVsbCwgMil9XFxuIHdoZW4gbmF2aWdhdGluZyB0byBcIiR7dG8uZnVsbFBhdGh9XCIuIEEgcmVkaXJlY3QgbXVzdCBjb250YWluIGEgbmFtZSBvciBwYXRoLiBUaGlzIHdpbGwgYnJlYWsgaW4gcHJvZHVjdGlvbi5gKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVkaXJlY3QnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhc3NpZ24oe1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiB0by5xdWVyeSxcbiAgICAgICAgICAgICAgICBoYXNoOiB0by5oYXNoLFxuICAgICAgICAgICAgICAgIC8vIGF2b2lkIHRyYW5zZmVycmluZyBwYXJhbXMgaWYgdGhlIHJlZGlyZWN0IGhhcyBhIHBhdGhcbiAgICAgICAgICAgICAgICBwYXJhbXM6IG5ld1RhcmdldExvY2F0aW9uLnBhdGggIT0gbnVsbCA/IHt9IDogdG8ucGFyYW1zLFxuICAgICAgICAgICAgfSwgbmV3VGFyZ2V0TG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHB1c2hXaXRoUmVkaXJlY3QodG8sIHJlZGlyZWN0ZWRGcm9tKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldExvY2F0aW9uID0gKHBlbmRpbmdMb2NhdGlvbiA9IHJlc29sdmUodG8pKTtcbiAgICAgICAgY29uc3QgZnJvbSA9IGN1cnJlbnRSb3V0ZS52YWx1ZTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRvLnN0YXRlO1xuICAgICAgICBjb25zdCBmb3JjZSA9IHRvLmZvcmNlO1xuICAgICAgICAvLyB0byBjb3VsZCBiZSBhIHN0cmluZyB3aGVyZSBgcmVwbGFjZWAgaXMgYSBmdW5jdGlvblxuICAgICAgICBjb25zdCByZXBsYWNlID0gdG8ucmVwbGFjZSA9PT0gdHJ1ZTtcbiAgICAgICAgY29uc3Qgc2hvdWxkUmVkaXJlY3QgPSBoYW5kbGVSZWRpcmVjdFJlY29yZCh0YXJnZXRMb2NhdGlvbik7XG4gICAgICAgIGlmIChzaG91bGRSZWRpcmVjdClcbiAgICAgICAgICAgIHJldHVybiBwdXNoV2l0aFJlZGlyZWN0KGFzc2lnbihsb2NhdGlvbkFzT2JqZWN0KHNob3VsZFJlZGlyZWN0KSwge1xuICAgICAgICAgICAgICAgIHN0YXRlOiB0eXBlb2Ygc2hvdWxkUmVkaXJlY3QgPT09ICdvYmplY3QnXG4gICAgICAgICAgICAgICAgICAgID8gYXNzaWduKHt9LCBkYXRhLCBzaG91bGRSZWRpcmVjdC5zdGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgOiBkYXRhLFxuICAgICAgICAgICAgICAgIGZvcmNlLFxuICAgICAgICAgICAgICAgIHJlcGxhY2UsXG4gICAgICAgICAgICB9KSwgXG4gICAgICAgICAgICAvLyBrZWVwIG9yaWdpbmFsIHJlZGlyZWN0ZWRGcm9tIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgcmVkaXJlY3RlZEZyb20gfHwgdGFyZ2V0TG9jYXRpb24pO1xuICAgICAgICAvLyBpZiBpdCB3YXMgYSByZWRpcmVjdCB3ZSBhbHJlYWR5IGNhbGxlZCBgcHVzaFdpdGhSZWRpcmVjdGAgYWJvdmVcbiAgICAgICAgY29uc3QgdG9Mb2NhdGlvbiA9IHRhcmdldExvY2F0aW9uO1xuICAgICAgICB0b0xvY2F0aW9uLnJlZGlyZWN0ZWRGcm9tID0gcmVkaXJlY3RlZEZyb207XG4gICAgICAgIGxldCBmYWlsdXJlO1xuICAgICAgICBpZiAoIWZvcmNlICYmIGlzU2FtZVJvdXRlTG9jYXRpb24oc3RyaW5naWZ5UXVlcnkkMSwgZnJvbSwgdGFyZ2V0TG9jYXRpb24pKSB7XG4gICAgICAgICAgICBmYWlsdXJlID0gY3JlYXRlUm91dGVyRXJyb3IoMTYgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0RVUExJQ0FURUQgKi8sIHsgdG86IHRvTG9jYXRpb24sIGZyb20gfSk7XG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHNjcm9sbCB0byBhbGxvdyBzY3JvbGxpbmcgdG8gdGhlIHNhbWUgYW5jaG9yXG4gICAgICAgICAgICBoYW5kbGVTY3JvbGwoZnJvbSwgZnJvbSwgXG4gICAgICAgICAgICAvLyB0aGlzIGlzIGEgcHVzaCwgdGhlIG9ubHkgd2F5IGZvciBpdCB0byBiZSB0cmlnZ2VyZWQgZnJvbSBhXG4gICAgICAgICAgICAvLyBoaXN0b3J5Lmxpc3RlbiBpcyB3aXRoIGEgcmVkaXJlY3QsIHdoaWNoIG1ha2VzIGl0IGJlY29tZSBhIHB1c2hcbiAgICAgICAgICAgIHRydWUsIFxuICAgICAgICAgICAgLy8gVGhpcyBjYW5ub3QgYmUgdGhlIGZpcnN0IG5hdmlnYXRpb24gYmVjYXVzZSB0aGUgaW5pdGlhbCBsb2NhdGlvblxuICAgICAgICAgICAgLy8gY2Fubm90IGJlIG1hbnVhbGx5IG5hdmlnYXRlZCB0b1xuICAgICAgICAgICAgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoZmFpbHVyZSA/IFByb21pc2UucmVzb2x2ZShmYWlsdXJlKSA6IG5hdmlnYXRlKHRvTG9jYXRpb24sIGZyb20pKVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvcilcbiAgICAgICAgICAgID8gLy8gbmF2aWdhdGlvbiByZWRpcmVjdHMgc3RpbGwgbWFyayB0aGUgcm91dGVyIGFzIHJlYWR5XG4gICAgICAgICAgICAgICAgaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvciwgMiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fR1VBUkRfUkVESVJFQ1QgKi8pXG4gICAgICAgICAgICAgICAgICAgID8gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgOiBtYXJrQXNSZWFkeShlcnJvcikgLy8gYWxzbyByZXR1cm5zIHRoZSBlcnJvclxuICAgICAgICAgICAgOiAvLyByZWplY3QgYW55IHVua25vd24gZXJyb3JcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXJyb3IoZXJyb3IsIHRvTG9jYXRpb24sIGZyb20pKVxuICAgICAgICAgICAgLnRoZW4oKGZhaWx1cmUpID0+IHtcbiAgICAgICAgICAgIGlmIChmYWlsdXJlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmF2aWdhdGlvbkZhaWx1cmUoZmFpbHVyZSwgMiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fR1VBUkRfUkVESVJFQ1QgKi8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSByZWRpcmVjdGluZyB0byB0aGUgc2FtZSBsb2NhdGlvbiB3ZSB3ZXJlIGFscmVhZHkgYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2FtZVJvdXRlTG9jYXRpb24oc3RyaW5naWZ5UXVlcnkkMSwgcmVzb2x2ZShmYWlsdXJlLnRvKSwgdG9Mb2NhdGlvbikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCB3ZSBoYXZlIGRvbmUgaXQgYSBjb3VwbGUgb2YgdGltZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBhZGRlZCBvbmx5IGluIGRldlxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlZGlyZWN0ZWRGcm9tLl9jb3VudCA9IHJlZGlyZWN0ZWRGcm9tLl9jb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdGVkRnJvbS5fY291bnQgKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAxKSA+IDMwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBEZXRlY3RlZCBhIHBvc3NpYmx5IGluZmluaXRlIHJlZGlyZWN0aW9uIGluIGEgbmF2aWdhdGlvbiBndWFyZCB3aGVuIGdvaW5nIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3RvTG9jYXRpb24uZnVsbFBhdGh9XCIuIEFib3J0aW5nIHRvIGF2b2lkIGEgU3RhY2sgT3ZlcmZsb3cuXFxuIEFyZSB5b3UgYWx3YXlzIHJldHVybmluZyBhIG5ldyBsb2NhdGlvbiB3aXRoaW4gYSBuYXZpZ2F0aW9uIGd1YXJkPyBUaGF0IHdvdWxkIGxlYWQgdG8gdGhpcyBlcnJvci4gT25seSByZXR1cm4gd2hlbiByZWRpcmVjdGluZyBvciBhYm9ydGluZywgdGhhdCBzaG91bGQgZml4IHRoaXMuIFRoaXMgbWlnaHQgYnJlYWsgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdJbmZpbml0ZSByZWRpcmVjdCBpbiBuYXZpZ2F0aW9uIGd1YXJkJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwdXNoV2l0aFJlZGlyZWN0KFxuICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIG9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlIGFuIGV4aXN0aW5nIHJlcGxhY2VtZW50IGJ1dCBhbGxvdyB0aGUgcmVkaXJlY3QgdG8gb3ZlcnJpZGUgaXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2UsXG4gICAgICAgICAgICAgICAgICAgIH0sIGxvY2F0aW9uQXNPYmplY3QoZmFpbHVyZS50byksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0eXBlb2YgZmFpbHVyZS50byA9PT0gJ29iamVjdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFzc2lnbih7fSwgZGF0YSwgZmFpbHVyZS50by5zdGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZSxcbiAgICAgICAgICAgICAgICAgICAgfSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgcmVkaXJlY3RlZEZyb20gaWYgYW55XG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tIHx8IHRvTG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGZhaWwgd2UgZG9uJ3QgZmluYWxpemUgdGhlIG5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICBmYWlsdXJlID0gZmluYWxpemVOYXZpZ2F0aW9uKHRvTG9jYXRpb24sIGZyb20sIHRydWUsIHJlcGxhY2UsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJpZ2dlckFmdGVyRWFjaCh0b0xvY2F0aW9uLCBmcm9tLCBmYWlsdXJlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWlsdXJlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIHRvIHJlamVjdCBhbmQgc2tpcCBhbGwgbmF2aWdhdGlvbiBndWFyZHMgaWYgYSBuZXcgbmF2aWdhdGlvbiBoYXBwZW5lZFxuICAgICAqIEBwYXJhbSB0b1xuICAgICAqIEBwYXJhbSBmcm9tXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb25BbmRSZWplY3QodG8sIGZyb20pIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbih0bywgZnJvbSk7XG4gICAgICAgIHJldHVybiBlcnJvciA/IFByb21pc2UucmVqZWN0KGVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBydW5XaXRoQ29udGV4dChmbikge1xuICAgICAgICBjb25zdCBhcHAgPSBpbnN0YWxsZWRBcHBzLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgLy8gc3VwcG9ydCBWdWUgPCAzLjNcbiAgICAgICAgcmV0dXJuIGFwcCAmJiB0eXBlb2YgYXBwLnJ1bldpdGhDb250ZXh0ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICA/IGFwcC5ydW5XaXRoQ29udGV4dChmbilcbiAgICAgICAgICAgIDogZm4oKTtcbiAgICB9XG4gICAgLy8gVE9ETzogcmVmYWN0b3IgdGhlIHdob2xlIGJlZm9yZSBndWFyZHMgYnkgaW50ZXJuYWxseSB1c2luZyByb3V0ZXIuYmVmb3JlRWFjaFxuICAgIGZ1bmN0aW9uIG5hdmlnYXRlKHRvLCBmcm9tKSB7XG4gICAgICAgIGxldCBndWFyZHM7XG4gICAgICAgIGNvbnN0IFtsZWF2aW5nUmVjb3JkcywgdXBkYXRpbmdSZWNvcmRzLCBlbnRlcmluZ1JlY29yZHNdID0gZXh0cmFjdENoYW5naW5nUmVjb3Jkcyh0bywgZnJvbSk7XG4gICAgICAgIC8vIGFsbCBjb21wb25lbnRzIGhlcmUgaGF2ZSBiZWVuIHJlc29sdmVkIG9uY2UgYmVjYXVzZSB3ZSBhcmUgbGVhdmluZ1xuICAgICAgICBndWFyZHMgPSBleHRyYWN0Q29tcG9uZW50c0d1YXJkcyhsZWF2aW5nUmVjb3Jkcy5yZXZlcnNlKCksICdiZWZvcmVSb3V0ZUxlYXZlJywgdG8sIGZyb20pO1xuICAgICAgICAvLyBsZWF2aW5nUmVjb3JkcyBpcyBhbHJlYWR5IHJldmVyc2VkXG4gICAgICAgIGZvciAoY29uc3QgcmVjb3JkIG9mIGxlYXZpbmdSZWNvcmRzKSB7XG4gICAgICAgICAgICByZWNvcmQubGVhdmVHdWFyZHMuZm9yRWFjaChndWFyZCA9PiB7XG4gICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrID0gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb25BbmRSZWplY3QuYmluZChudWxsLCB0bywgZnJvbSk7XG4gICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcbiAgICAgICAgLy8gcnVuIHRoZSBxdWV1ZSBvZiBwZXIgcm91dGUgYmVmb3JlUm91dGVMZWF2ZSBndWFyZHNcbiAgICAgICAgcmV0dXJuIChydW5HdWFyZFF1ZXVlKGd1YXJkcylcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGdsb2JhbCBndWFyZHMgYmVmb3JlRWFjaFxuICAgICAgICAgICAgZ3VhcmRzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGd1YXJkIG9mIGJlZm9yZUd1YXJkcy5saXN0KCkpIHtcbiAgICAgICAgICAgICAgICBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xuICAgICAgICAgICAgcmV0dXJuIHJ1bkd1YXJkUXVldWUoZ3VhcmRzKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGluIGNvbXBvbmVudHMgYmVmb3JlUm91dGVVcGRhdGVcbiAgICAgICAgICAgIGd1YXJkcyA9IGV4dHJhY3RDb21wb25lbnRzR3VhcmRzKHVwZGF0aW5nUmVjb3JkcywgJ2JlZm9yZVJvdXRlVXBkYXRlJywgdG8sIGZyb20pO1xuICAgICAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgdXBkYXRpbmdSZWNvcmRzKSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkLnVwZGF0ZUd1YXJkcy5mb3JFYWNoKGd1YXJkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcbiAgICAgICAgICAgIC8vIHJ1biB0aGUgcXVldWUgb2YgcGVyIHJvdXRlIGJlZm9yZUVudGVyIGd1YXJkc1xuICAgICAgICAgICAgcmV0dXJuIHJ1bkd1YXJkUXVldWUoZ3VhcmRzKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGNoZWNrIHRoZSByb3V0ZSBiZWZvcmVFbnRlclxuICAgICAgICAgICAgZ3VhcmRzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBlbnRlcmluZ1JlY29yZHMpIHtcbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgdHJpZ2dlciBiZWZvcmVFbnRlciBvbiByZXVzZWQgdmlld3NcbiAgICAgICAgICAgICAgICBpZiAocmVjb3JkLmJlZm9yZUVudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KHJlY29yZC5iZWZvcmVFbnRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmVmb3JlRW50ZXIgb2YgcmVjb3JkLmJlZm9yZUVudGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oYmVmb3JlRW50ZXIsIHRvLCBmcm9tKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBndWFyZHMucHVzaChndWFyZFRvUHJvbWlzZUZuKHJlY29yZC5iZWZvcmVFbnRlciwgdG8sIGZyb20pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcbiAgICAgICAgICAgIC8vIHJ1biB0aGUgcXVldWUgb2YgcGVyIHJvdXRlIGJlZm9yZUVudGVyIGd1YXJkc1xuICAgICAgICAgICAgcmV0dXJuIHJ1bkd1YXJkUXVldWUoZ3VhcmRzKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIE5PVEU6IGF0IHRoaXMgcG9pbnQgdG8ubWF0Y2hlZCBpcyBub3JtYWxpemVkIGFuZCBkb2VzIG5vdCBjb250YWluIGFueSAoKSA9PiBQcm9taXNlPENvbXBvbmVudD5cbiAgICAgICAgICAgIC8vIGNsZWFyIGV4aXN0aW5nIGVudGVyQ2FsbGJhY2tzLCB0aGVzZSBhcmUgYWRkZWQgYnkgZXh0cmFjdENvbXBvbmVudHNHdWFyZHNcbiAgICAgICAgICAgIHRvLm1hdGNoZWQuZm9yRWFjaChyZWNvcmQgPT4gKHJlY29yZC5lbnRlckNhbGxiYWNrcyA9IHt9KSk7XG4gICAgICAgICAgICAvLyBjaGVjayBpbi1jb21wb25lbnQgYmVmb3JlUm91dGVFbnRlclxuICAgICAgICAgICAgZ3VhcmRzID0gZXh0cmFjdENvbXBvbmVudHNHdWFyZHMoZW50ZXJpbmdSZWNvcmRzLCAnYmVmb3JlUm91dGVFbnRlcicsIHRvLCBmcm9tLCBydW5XaXRoQ29udGV4dCk7XG4gICAgICAgICAgICBndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XG4gICAgICAgICAgICAvLyBydW4gdGhlIHF1ZXVlIG9mIHBlciByb3V0ZSBiZWZvcmVFbnRlciBndWFyZHNcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvLyBjaGVjayBnbG9iYWwgZ3VhcmRzIGJlZm9yZVJlc29sdmVcbiAgICAgICAgICAgIGd1YXJkcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBndWFyZCBvZiBiZWZvcmVSZXNvbHZlR3VhcmRzLmxpc3QoKSkge1xuICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XG4gICAgICAgICAgICByZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLy8gY2F0Y2ggYW55IG5hdmlnYXRpb24gY2FuY2VsZWRcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnIsIDggLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0NBTkNFTExFRCAqLylcbiAgICAgICAgICAgID8gZXJyXG4gICAgICAgICAgICA6IFByb21pc2UucmVqZWN0KGVycikpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdHJpZ2dlckFmdGVyRWFjaCh0bywgZnJvbSwgZmFpbHVyZSkge1xuICAgICAgICAvLyBuYXZpZ2F0aW9uIGlzIGNvbmZpcm1lZCwgY2FsbCBhZnRlckd1YXJkc1xuICAgICAgICAvLyBUT0RPOiB3cmFwIHdpdGggZXJyb3IgaGFuZGxlcnNcbiAgICAgICAgYWZ0ZXJHdWFyZHNcbiAgICAgICAgICAgIC5saXN0KClcbiAgICAgICAgICAgIC5mb3JFYWNoKGd1YXJkID0+IHJ1bldpdGhDb250ZXh0KCgpID0+IGd1YXJkKHRvLCBmcm9tLCBmYWlsdXJlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiAtIENsZWFucyB1cCBhbnkgbmF2aWdhdGlvbiBndWFyZHNcbiAgICAgKiAtIENoYW5nZXMgdGhlIHVybCBpZiBuZWNlc3NhcnlcbiAgICAgKiAtIENhbGxzIHRoZSBzY3JvbGxCZWhhdmlvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmFsaXplTmF2aWdhdGlvbih0b0xvY2F0aW9uLCBmcm9tLCBpc1B1c2gsIHJlcGxhY2UsIGRhdGEpIHtcbiAgICAgICAgLy8gYSBtb3JlIHJlY2VudCBuYXZpZ2F0aW9uIHRvb2sgcGxhY2VcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbih0b0xvY2F0aW9uLCBmcm9tKTtcbiAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICAvLyBvbmx5IGNvbnNpZGVyIGFzIHB1c2ggaWYgaXQncyBub3QgdGhlIGZpcnN0IG5hdmlnYXRpb25cbiAgICAgICAgY29uc3QgaXNGaXJzdE5hdmlnYXRpb24gPSBmcm9tID09PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEO1xuICAgICAgICBjb25zdCBzdGF0ZSA9ICFpc0Jyb3dzZXIgPyB7fSA6IGhpc3Rvcnkuc3RhdGU7XG4gICAgICAgIC8vIGNoYW5nZSBVUkwgb25seSBpZiB0aGUgdXNlciBkaWQgYSBwdXNoL3JlcGxhY2UgYW5kIGlmIGl0J3Mgbm90IHRoZSBpbml0aWFsIG5hdmlnYXRpb24gYmVjYXVzZVxuICAgICAgICAvLyBpdCdzIGp1c3QgcmVmbGVjdGluZyB0aGUgdXJsXG4gICAgICAgIGlmIChpc1B1c2gpIHtcbiAgICAgICAgICAgIC8vIG9uIHRoZSBpbml0aWFsIG5hdmlnYXRpb24sIHdlIHdhbnQgdG8gcmV1c2UgdGhlIHNjcm9sbCBwb3NpdGlvbiBmcm9tXG4gICAgICAgICAgICAvLyBoaXN0b3J5IHN0YXRlIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgaWYgKHJlcGxhY2UgfHwgaXNGaXJzdE5hdmlnYXRpb24pXG4gICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5yZXBsYWNlKHRvTG9jYXRpb24uZnVsbFBhdGgsIGFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogaXNGaXJzdE5hdmlnYXRpb24gJiYgc3RhdGUgJiYgc3RhdGUuc2Nyb2xsLFxuICAgICAgICAgICAgICAgIH0sIGRhdGEpKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByb3V0ZXJIaXN0b3J5LnB1c2godG9Mb2NhdGlvbi5mdWxsUGF0aCwgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWNjZXB0IGN1cnJlbnQgbmF2aWdhdGlvblxuICAgICAgICBjdXJyZW50Um91dGUudmFsdWUgPSB0b0xvY2F0aW9uO1xuICAgICAgICBoYW5kbGVTY3JvbGwodG9Mb2NhdGlvbiwgZnJvbSwgaXNQdXNoLCBpc0ZpcnN0TmF2aWdhdGlvbik7XG4gICAgICAgIG1hcmtBc1JlYWR5KCk7XG4gICAgfVxuICAgIGxldCByZW1vdmVIaXN0b3J5TGlzdGVuZXI7XG4gICAgLy8gYXR0YWNoIGxpc3RlbmVyIHRvIGhpc3RvcnkgdG8gdHJpZ2dlciBuYXZpZ2F0aW9uc1xuICAgIGZ1bmN0aW9uIHNldHVwTGlzdGVuZXJzKCkge1xuICAgICAgICAvLyBhdm9pZCBzZXR0aW5nIHVwIGxpc3RlbmVycyB0d2ljZSBkdWUgdG8gYW4gaW52YWxpZCBmaXJzdCBuYXZpZ2F0aW9uXG4gICAgICAgIGlmIChyZW1vdmVIaXN0b3J5TGlzdGVuZXIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJlbW92ZUhpc3RvcnlMaXN0ZW5lciA9IHJvdXRlckhpc3RvcnkubGlzdGVuKCh0bywgX2Zyb20sIGluZm8pID0+IHtcbiAgICAgICAgICAgIGlmICghcm91dGVyLmxpc3RlbmluZylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvLyBjYW5ub3QgYmUgYSByZWRpcmVjdCByb3V0ZSBiZWNhdXNlIGl0IHdhcyBpbiBoaXN0b3J5XG4gICAgICAgICAgICBjb25zdCB0b0xvY2F0aW9uID0gcmVzb2x2ZSh0byk7XG4gICAgICAgICAgICAvLyBkdWUgdG8gZHluYW1pYyByb3V0aW5nLCBhbmQgdG8gaGFzaCBoaXN0b3J5IHdpdGggbWFudWFsIG5hdmlnYXRpb25cbiAgICAgICAgICAgIC8vIChtYW51YWxseSBjaGFuZ2luZyB0aGUgdXJsIG9yIGNhbGxpbmcgaGlzdG9yeS5oYXNoID0gJyMvc29tZXdoZXJlJyksXG4gICAgICAgICAgICAvLyB0aGVyZSBjb3VsZCBiZSBhIHJlZGlyZWN0IHJlY29yZCBpbiBoaXN0b3J5XG4gICAgICAgICAgICBjb25zdCBzaG91bGRSZWRpcmVjdCA9IGhhbmRsZVJlZGlyZWN0UmVjb3JkKHRvTG9jYXRpb24pO1xuICAgICAgICAgICAgaWYgKHNob3VsZFJlZGlyZWN0KSB7XG4gICAgICAgICAgICAgICAgcHVzaFdpdGhSZWRpcmVjdChhc3NpZ24oc2hvdWxkUmVkaXJlY3QsIHsgcmVwbGFjZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSksIHRvTG9jYXRpb24pLmNhdGNoKG5vb3ApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBlbmRpbmdMb2NhdGlvbiA9IHRvTG9jYXRpb247XG4gICAgICAgICAgICBjb25zdCBmcm9tID0gY3VycmVudFJvdXRlLnZhbHVlO1xuICAgICAgICAgICAgLy8gVE9ETzogc2hvdWxkIGJlIG1vdmVkIHRvIHdlYiBoaXN0b3J5P1xuICAgICAgICAgICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgICAgICAgICAgIHNhdmVTY3JvbGxQb3NpdGlvbihnZXRTY3JvbGxLZXkoZnJvbS5mdWxsUGF0aCwgaW5mby5kZWx0YSksIGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5hdmlnYXRlKHRvTG9jYXRpb24sIGZyb20pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCA0IC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9BQk9SVEVEICovIHwgOCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEICovKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCAyIC8qIEVycm9yVHlwZXMuTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSGVyZSB3ZSBjb3VsZCBjYWxsIGlmIChpbmZvLmRlbHRhKSByb3V0ZXJIaXN0b3J5LmdvKC1pbmZvLmRlbHRhLFxuICAgICAgICAgICAgICAgICAgICAvLyBmYWxzZSkgYnV0IHRoaXMgaXMgYnVnIHByb25lIGFzIHdlIGhhdmUgbm8gd2F5IHRvIHdhaXQgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIG5hdmlnYXRpb24gdG8gYmUgZmluaXNoZWQgYmVmb3JlIGNhbGxpbmcgcHVzaFdpdGhSZWRpcmVjdC4gVXNpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBzZXRUaW1lb3V0IG9mIDE2bXMgc2VlbXMgdG8gd29yayBidXQgdGhlcmUgaXMgbm8gZ3VhcmFudGVlIGZvclxuICAgICAgICAgICAgICAgICAgICAvLyBpdCB0byB3b3JrIG9uIGV2ZXJ5IGJyb3dzZXIuIFNvIGluc3RlYWQgd2UgZG8gbm90IHJlc3RvcmUgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGhpc3RvcnkgZW50cnkgYW5kIHRyaWdnZXIgYSBuZXcgbmF2aWdhdGlvbiBhcyByZXF1ZXN0ZWQgYnkgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIG5hdmlnYXRpb24gZ3VhcmQuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBlcnJvciBpcyBhbHJlYWR5IGhhbmRsZWQgYnkgcm91dGVyLnB1c2ggd2UganVzdCB3YW50IHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZ2dpbmcgdGhlIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIHB1c2hXaXRoUmVkaXJlY3QoYXNzaWduKGxvY2F0aW9uQXNPYmplY3QoZXJyb3IudG8pLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSksIHRvTG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgYW4gdW5jYXVnaHQgcmVqZWN0aW9uLCBsZXQgcHVzaCBjYWxsIHRyaWdnZXJFcnJvclxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmYWlsdXJlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hbnVhbCBjaGFuZ2UgaW4gaGFzaCBoaXN0b3J5ICM5MTYgZW5kaW5nIHVwIGluIHRoZSBVUkwgbm90XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGFuZ2luZywgYnV0IGl0IHdhcyBjaGFuZ2VkIGJ5IHRoZSBtYW51YWwgdXJsIGNoYW5nZSwgc28gd2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gbWFudWFsbHkgY2hhbmdlIGl0IG91cnNlbHZlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmF2aWdhdGlvbkZhaWx1cmUoZmFpbHVyZSwgNCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQUJPUlRFRCAqLyB8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMTYgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0RVUExJQ0FURUQgKi8pICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWluZm8uZGVsdGEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLnR5cGUgPT09IE5hdmlnYXRpb25UeXBlLnBvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlckhpc3RvcnkuZ28oLTEsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChub29wKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgdGhlIHRoZW4gYnJhbmNoXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgcmVzdG9yZSBoaXN0b3J5IG9uIHVua25vd24gZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGluZm8uZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtaW5mby5kZWx0YSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB1bnJlY29nbml6ZWQgZXJyb3IsIHRyYW5zZmVyIHRvIHRoZSBnbG9iYWwgaGFuZGxlclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmlnZ2VyRXJyb3IoZXJyb3IsIHRvTG9jYXRpb24sIGZyb20pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbigoZmFpbHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIGZhaWx1cmUgPVxuICAgICAgICAgICAgICAgICAgICBmYWlsdXJlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGl6ZU5hdmlnYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciBuYXZpZ2F0aW9uLCBhbGwgbWF0Y2hlZCBjb21wb25lbnRzIGFyZSByZXNvbHZlZFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9Mb2NhdGlvbiwgZnJvbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIC8vIHJldmVydCB0aGUgbmF2aWdhdGlvblxuICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLmRlbHRhICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhIG5ldyBuYXZpZ2F0aW9uIGhhcyBiZWVuIHRyaWdnZXJlZCwgc28gd2UgZG8gbm90IHdhbnQgdG8gcmV2ZXJ0LCB0aGF0IHdpbGwgY2hhbmdlIHRoZSBjdXJyZW50IGhpc3RvcnlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVudHJ5IHdoaWxlIGEgZGlmZmVyZW50IHJvdXRlIGlzIGRpc3BsYXllZFxuICAgICAgICAgICAgICAgICAgICAgICAgIWlzTmF2aWdhdGlvbkZhaWx1cmUoZmFpbHVyZSwgOCAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fQ0FOQ0VMTEVEICovKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtaW5mby5kZWx0YSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluZm8udHlwZSA9PT0gTmF2aWdhdGlvblR5cGUucG9wICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDQgLyogRXJyb3JUeXBlcy5OQVZJR0FUSU9OX0FCT1JURUQgKi8gfCAxNiAvKiBFcnJvclR5cGVzLk5BVklHQVRJT05fRFVQTElDQVRFRCAqLykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hbnVhbCBjaGFuZ2UgaW4gaGFzaCBoaXN0b3J5ICM5MTZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgbGlrZSBhIHB1c2ggYnV0IGxhY2tzIHRoZSBpbmZvcm1hdGlvbiBvZiB0aGUgZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJIaXN0b3J5LmdvKC0xLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJpZ2dlckFmdGVyRWFjaCh0b0xvY2F0aW9uLCBmcm9tLCBmYWlsdXJlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgd2FybmluZ3MgaW4gdGhlIGNvbnNvbGUgYWJvdXQgdW5jYXVnaHQgcmVqZWN0aW9ucywgdGhleSBhcmUgbG9nZ2VkIGJ5IHRyaWdnZXJFcnJvcnNcbiAgICAgICAgICAgICAgICAuY2F0Y2gobm9vcCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBJbml0aWFsaXphdGlvbiBhbmQgRXJyb3JzXG4gICAgbGV0IHJlYWR5SGFuZGxlcnMgPSB1c2VDYWxsYmFja3MoKTtcbiAgICBsZXQgZXJyb3JMaXN0ZW5lcnMgPSB1c2VDYWxsYmFja3MoKTtcbiAgICBsZXQgcmVhZHk7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBlcnJvckxpc3RlbmVycyBhZGRlZCB2aWEgb25FcnJvciBhbmQgdGhyb3dzIHRoZSBlcnJvciBhcyB3ZWxsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBlcnJvciB0byB0aHJvd1xuICAgICAqIEBwYXJhbSB0byAtIGxvY2F0aW9uIHdlIHdlcmUgbmF2aWdhdGluZyB0byB3aGVuIHRoZSBlcnJvciBoYXBwZW5lZFxuICAgICAqIEBwYXJhbSBmcm9tIC0gbG9jYXRpb24gd2Ugd2VyZSBuYXZpZ2F0aW5nIGZyb20gd2hlbiB0aGUgZXJyb3IgaGFwcGVuZWRcbiAgICAgKiBAcmV0dXJucyB0aGUgZXJyb3IgYXMgYSByZWplY3RlZCBwcm9taXNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJpZ2dlckVycm9yKGVycm9yLCB0bywgZnJvbSkge1xuICAgICAgICBtYXJrQXNSZWFkeShlcnJvcik7XG4gICAgICAgIGNvbnN0IGxpc3QgPSBlcnJvckxpc3RlbmVycy5saXN0KCk7XG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgbGlzdC5mb3JFYWNoKGhhbmRsZXIgPT4gaGFuZGxlcihlcnJvciwgdG8sIGZyb20pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICB3YXJuKCd1bmNhdWdodCBlcnJvciBkdXJpbmcgcm91dGUgbmF2aWdhdGlvbjonKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlamVjdCB0aGUgZXJyb3Igbm8gbWF0dGVyIHRoZXJlIHdlcmUgZXJyb3IgbGlzdGVuZXJzIG9yIG5vdFxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1JlYWR5KCkge1xuICAgICAgICBpZiAocmVhZHkgJiYgY3VycmVudFJvdXRlLnZhbHVlICE9PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgcmVhZHlIYW5kbGVycy5hZGQoW3Jlc29sdmUsIHJlamVjdF0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFya0FzUmVhZHkoZXJyKSB7XG4gICAgICAgIGlmICghcmVhZHkpIHtcbiAgICAgICAgICAgIC8vIHN0aWxsIG5vdCByZWFkeSBpZiBhbiBlcnJvciBoYXBwZW5lZFxuICAgICAgICAgICAgcmVhZHkgPSAhZXJyO1xuICAgICAgICAgICAgc2V0dXBMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIHJlYWR5SGFuZGxlcnNcbiAgICAgICAgICAgICAgICAubGlzdCgpXG4gICAgICAgICAgICAgICAgLmZvckVhY2goKFtyZXNvbHZlLCByZWplY3RdKSA9PiAoZXJyID8gcmVqZWN0KGVycikgOiByZXNvbHZlKCkpKTtcbiAgICAgICAgICAgIHJlYWR5SGFuZGxlcnMucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXJyO1xuICAgIH1cbiAgICAvLyBTY3JvbGwgYmVoYXZpb3JcbiAgICBmdW5jdGlvbiBoYW5kbGVTY3JvbGwodG8sIGZyb20sIGlzUHVzaCwgaXNGaXJzdE5hdmlnYXRpb24pIHtcbiAgICAgICAgY29uc3QgeyBzY3JvbGxCZWhhdmlvciB9ID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCFpc0Jyb3dzZXIgfHwgIXNjcm9sbEJlaGF2aW9yKVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9ICghaXNQdXNoICYmIGdldFNhdmVkU2Nyb2xsUG9zaXRpb24oZ2V0U2Nyb2xsS2V5KHRvLmZ1bGxQYXRoLCAwKSkpIHx8XG4gICAgICAgICAgICAoKGlzRmlyc3ROYXZpZ2F0aW9uIHx8ICFpc1B1c2gpICYmXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5zdGF0ZSAmJlxuICAgICAgICAgICAgICAgIGhpc3Rvcnkuc3RhdGUuc2Nyb2xsKSB8fFxuICAgICAgICAgICAgbnVsbDtcbiAgICAgICAgcmV0dXJuIG5leHRUaWNrKClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHNjcm9sbEJlaGF2aW9yKHRvLCBmcm9tLCBzY3JvbGxQb3NpdGlvbikpXG4gICAgICAgICAgICAudGhlbihwb3NpdGlvbiA9PiBwb3NpdGlvbiAmJiBzY3JvbGxUb1Bvc2l0aW9uKHBvc2l0aW9uKSlcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gdHJpZ2dlckVycm9yKGVyciwgdG8sIGZyb20pKTtcbiAgICB9XG4gICAgY29uc3QgZ28gPSAoZGVsdGEpID0+IHJvdXRlckhpc3RvcnkuZ28oZGVsdGEpO1xuICAgIGxldCBzdGFydGVkO1xuICAgIGNvbnN0IGluc3RhbGxlZEFwcHMgPSBuZXcgU2V0KCk7XG4gICAgY29uc3Qgcm91dGVyID0ge1xuICAgICAgICBjdXJyZW50Um91dGUsXG4gICAgICAgIGxpc3RlbmluZzogdHJ1ZSxcbiAgICAgICAgYWRkUm91dGUsXG4gICAgICAgIHJlbW92ZVJvdXRlLFxuICAgICAgICBjbGVhclJvdXRlczogbWF0Y2hlci5jbGVhclJvdXRlcyxcbiAgICAgICAgaGFzUm91dGUsXG4gICAgICAgIGdldFJvdXRlcyxcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgcHVzaCxcbiAgICAgICAgcmVwbGFjZSxcbiAgICAgICAgZ28sXG4gICAgICAgIGJhY2s6ICgpID0+IGdvKC0xKSxcbiAgICAgICAgZm9yd2FyZDogKCkgPT4gZ28oMSksXG4gICAgICAgIGJlZm9yZUVhY2g6IGJlZm9yZUd1YXJkcy5hZGQsXG4gICAgICAgIGJlZm9yZVJlc29sdmU6IGJlZm9yZVJlc29sdmVHdWFyZHMuYWRkLFxuICAgICAgICBhZnRlckVhY2g6IGFmdGVyR3VhcmRzLmFkZCxcbiAgICAgICAgb25FcnJvcjogZXJyb3JMaXN0ZW5lcnMuYWRkLFxuICAgICAgICBpc1JlYWR5LFxuICAgICAgICBpbnN0YWxsKGFwcCkge1xuICAgICAgICAgICAgY29uc3Qgcm91dGVyID0gdGhpcztcbiAgICAgICAgICAgIGFwcC5jb21wb25lbnQoJ1JvdXRlckxpbmsnLCBSb3V0ZXJMaW5rKTtcbiAgICAgICAgICAgIGFwcC5jb21wb25lbnQoJ1JvdXRlclZpZXcnLCBSb3V0ZXJWaWV3KTtcbiAgICAgICAgICAgIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcm91dGVyID0gcm91dGVyO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcywgJyRyb3V0ZScsIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gdW5yZWYoY3VycmVudFJvdXRlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gdGhpcyBpbml0aWFsIG5hdmlnYXRpb24gaXMgb25seSBuZWNlc3Nhcnkgb24gY2xpZW50LCBvbiBzZXJ2ZXIgaXQgZG9lc24ndFxuICAgICAgICAgICAgLy8gbWFrZSBzZW5zZSBiZWNhdXNlIGl0IHdpbGwgY3JlYXRlIGFuIGV4dHJhIHVubmVjZXNzYXJ5IG5hdmlnYXRpb24gYW5kIGNvdWxkXG4gICAgICAgICAgICAvLyBsZWFkIHRvIHByb2JsZW1zXG4gICAgICAgICAgICBpZiAoaXNCcm93c2VyICYmXG4gICAgICAgICAgICAgICAgLy8gdXNlZCBmb3IgdGhlIGluaXRpYWwgbmF2aWdhdGlvbiBjbGllbnQgc2lkZSB0byBhdm9pZCBwdXNoaW5nXG4gICAgICAgICAgICAgICAgLy8gbXVsdGlwbGUgdGltZXMgd2hlbiB0aGUgcm91dGVyIGlzIHVzZWQgaW4gbXVsdGlwbGUgYXBwc1xuICAgICAgICAgICAgICAgICFzdGFydGVkICYmXG4gICAgICAgICAgICAgICAgY3VycmVudFJvdXRlLnZhbHVlID09PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKSB7XG4gICAgICAgICAgICAgICAgLy8gc2VlIGFib3ZlXG4gICAgICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcHVzaChyb3V0ZXJIaXN0b3J5LmxvY2F0aW9uKS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKVxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybignVW5leHBlY3RlZCBlcnJvciB3aGVuIHN0YXJ0aW5nIHRoZSByb3V0ZXI6JywgZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlYWN0aXZlUm91dGUgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVhY3RpdmVSb3V0ZSwga2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIGdldDogKCkgPT4gY3VycmVudFJvdXRlLnZhbHVlW2tleV0sXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcHAucHJvdmlkZShyb3V0ZXJLZXksIHJvdXRlcik7XG4gICAgICAgICAgICBhcHAucHJvdmlkZShyb3V0ZUxvY2F0aW9uS2V5LCBzaGFsbG93UmVhY3RpdmUocmVhY3RpdmVSb3V0ZSkpO1xuICAgICAgICAgICAgYXBwLnByb3ZpZGUocm91dGVyVmlld0xvY2F0aW9uS2V5LCBjdXJyZW50Um91dGUpO1xuICAgICAgICAgICAgY29uc3QgdW5tb3VudEFwcCA9IGFwcC51bm1vdW50O1xuICAgICAgICAgICAgaW5zdGFsbGVkQXBwcy5hZGQoYXBwKTtcbiAgICAgICAgICAgIGFwcC51bm1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGluc3RhbGxlZEFwcHMuZGVsZXRlKGFwcCk7XG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvdXRlciBpcyBub3QgYXR0YWNoZWQgdG8gYW4gYXBwIGFueW1vcmVcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFsbGVkQXBwcy5zaXplIDwgMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpbnZhbGlkYXRlIHRoZSBjdXJyZW50IG5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRDtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSGlzdG9yeUxpc3RlbmVyICYmIHJlbW92ZUhpc3RvcnlMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVIaXN0b3J5TGlzdGVuZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Um91dGUudmFsdWUgPSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEO1xuICAgICAgICAgICAgICAgICAgICBzdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJlYWR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVubW91bnRBcHAoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBUT0RPOiB0aGlzIHByb2JhYmx5IG5lZWRzIHRvIGJlIHVwZGF0ZWQgc28gaXQgY2FuIGJlIHVzZWQgYnkgdnVlLXRlcm11aVxuICAgICAgICAgICAgaWYgKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiBpc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgICAgICBhZGREZXZ0b29scyhhcHAsIHJvdXRlciwgbWF0Y2hlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICAvLyBUT0RPOiB0eXBlIHRoaXMgYXMgTmF2aWdhdGlvbkd1YXJkUmV0dXJuIG9yIHNpbWlsYXIgaW5zdGVhZCBvZiBhbnlcbiAgICBmdW5jdGlvbiBydW5HdWFyZFF1ZXVlKGd1YXJkcykge1xuICAgICAgICByZXR1cm4gZ3VhcmRzLnJlZHVjZSgocHJvbWlzZSwgZ3VhcmQpID0+IHByb21pc2UudGhlbigoKSA9PiBydW5XaXRoQ29udGV4dChndWFyZCkpLCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgfVxuICAgIHJldHVybiByb3V0ZXI7XG59XG5mdW5jdGlvbiBleHRyYWN0Q2hhbmdpbmdSZWNvcmRzKHRvLCBmcm9tKSB7XG4gICAgY29uc3QgbGVhdmluZ1JlY29yZHMgPSBbXTtcbiAgICBjb25zdCB1cGRhdGluZ1JlY29yZHMgPSBbXTtcbiAgICBjb25zdCBlbnRlcmluZ1JlY29yZHMgPSBbXTtcbiAgICBjb25zdCBsZW4gPSBNYXRoLm1heChmcm9tLm1hdGNoZWQubGVuZ3RoLCB0by5tYXRjaGVkLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjb25zdCByZWNvcmRGcm9tID0gZnJvbS5tYXRjaGVkW2ldO1xuICAgICAgICBpZiAocmVjb3JkRnJvbSkge1xuICAgICAgICAgICAgaWYgKHRvLm1hdGNoZWQuZmluZChyZWNvcmQgPT4gaXNTYW1lUm91dGVSZWNvcmQocmVjb3JkLCByZWNvcmRGcm9tKSkpXG4gICAgICAgICAgICAgICAgdXBkYXRpbmdSZWNvcmRzLnB1c2gocmVjb3JkRnJvbSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbGVhdmluZ1JlY29yZHMucHVzaChyZWNvcmRGcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWNvcmRUbyA9IHRvLm1hdGNoZWRbaV07XG4gICAgICAgIGlmIChyZWNvcmRUbykge1xuICAgICAgICAgICAgLy8gdGhlIHR5cGUgZG9lc24ndCBtYXR0ZXIgYmVjYXVzZSB3ZSBhcmUgY29tcGFyaW5nIHBlciByZWZlcmVuY2VcbiAgICAgICAgICAgIGlmICghZnJvbS5tYXRjaGVkLmZpbmQocmVjb3JkID0+IGlzU2FtZVJvdXRlUmVjb3JkKHJlY29yZCwgcmVjb3JkVG8pKSkge1xuICAgICAgICAgICAgICAgIGVudGVyaW5nUmVjb3Jkcy5wdXNoKHJlY29yZFRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW2xlYXZpbmdSZWNvcmRzLCB1cGRhdGluZ1JlY29yZHMsIGVudGVyaW5nUmVjb3Jkc107XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcm91dGVyIGluc3RhbmNlLiBFcXVpdmFsZW50IHRvIHVzaW5nIGAkcm91dGVyYCBpbnNpZGVcbiAqIHRlbXBsYXRlcy5cbiAqL1xuZnVuY3Rpb24gdXNlUm91dGVyKCkge1xuICAgIHJldHVybiBpbmplY3Qocm91dGVyS2V5KTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCByb3V0ZSBsb2NhdGlvbi4gRXF1aXZhbGVudCB0byB1c2luZyBgJHJvdXRlYCBpbnNpZGVcbiAqIHRlbXBsYXRlcy5cbiAqL1xuZnVuY3Rpb24gdXNlUm91dGUoX25hbWUpIHtcbiAgICByZXR1cm4gaW5qZWN0KHJvdXRlTG9jYXRpb25LZXkpO1xufVxuXG5leHBvcnQgeyBOYXZpZ2F0aW9uRmFpbHVyZVR5cGUsIFJvdXRlckxpbmssIFJvdXRlclZpZXcsIFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQgYXMgU1RBUlRfTE9DQVRJT04sIGNyZWF0ZU1lbW9yeUhpc3RvcnksIGNyZWF0ZVJvdXRlciwgY3JlYXRlUm91dGVyTWF0Y2hlciwgY3JlYXRlV2ViSGFzaEhpc3RvcnksIGNyZWF0ZVdlYkhpc3RvcnksIGlzTmF2aWdhdGlvbkZhaWx1cmUsIGxvYWRSb3V0ZUxvY2F0aW9uLCBtYXRjaGVkUm91dGVLZXksIG9uQmVmb3JlUm91dGVMZWF2ZSwgb25CZWZvcmVSb3V0ZVVwZGF0ZSwgcGFyc2VRdWVyeSwgcm91dGVMb2NhdGlvbktleSwgcm91dGVyS2V5LCByb3V0ZXJWaWV3TG9jYXRpb25LZXksIHN0cmluZ2lmeVF1ZXJ5LCB1c2VMaW5rLCB1c2VSb3V0ZSwgdXNlUm91dGVyLCB2aWV3RGVwdGhLZXkgfTtcbiIsIjx0ZW1wbGF0ZT5cbiAgPHJvdXRlci12aWV3IC8+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0IHNldHVwPlxuaW1wb3J0IHsgd2F0Y2ggfSBmcm9tICd2dWUnXG5pbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInXG5cbmNvbnN0IHJvdXRlID0gdXNlUm91dGUoKVxuXG53YXRjaChcbiAgKCkgPT4gcm91dGUubWV0YS50aXRsZSxcbiAgKHRpdGxlKSA9PiB7XG4gICAgZG9jdW1lbnQudGl0bGUgPSB0aXRsZSB8fCAnU3R5bGx1cyBDb250cm9sZSdcbiAgfSxcbiAgeyBpbW1lZGlhdGU6IHRydWUgfSxcbilcbjwvc2NyaXB0PlxuIiwidmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2dldFByb3RvT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2VzbSA9IChmbiwgcmVzKSA9PiBmdW5jdGlvbiBfX2luaXQoKSB7XG4gIHJldHVybiBmbiAmJiAocmVzID0gKDAsIGZuW19fZ2V0T3duUHJvcE5hbWVzKGZuKVswXV0pKGZuID0gMCkpLCByZXM7XG59O1xudmFyIF9fY29tbW9uSlMgPSAoY2IsIG1vZCkgPT4gZnVuY3Rpb24gX19yZXF1aXJlKCkge1xuICByZXR1cm4gbW9kIHx8ICgwLCBjYltfX2dldE93blByb3BOYW1lcyhjYilbMF1dKSgobW9kID0geyBleHBvcnRzOiB7fSB9KS5leHBvcnRzLCBtb2QpLCBtb2QuZXhwb3J0cztcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0VTTSA9IChtb2QsIGlzTm9kZU1vZGUsIHRhcmdldDIpID0+ICh0YXJnZXQyID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoXG4gIC8vIElmIHRoZSBpbXBvcnRlciBpcyBpbiBub2RlIGNvbXBhdGliaWxpdHkgbW9kZSBvciB0aGlzIGlzIG5vdCBhbiBFU01cbiAgLy8gZmlsZSB0aGF0IGhhcyBiZWVuIGNvbnZlcnRlZCB0byBhIENvbW1vbkpTIGZpbGUgdXNpbmcgYSBCYWJlbC1cbiAgLy8gY29tcGF0aWJsZSB0cmFuc2Zvcm0gKGkuZS4gXCJfX2VzTW9kdWxlXCIgaGFzIG5vdCBiZWVuIHNldCksIHRoZW4gc2V0XG4gIC8vIFwiZGVmYXVsdFwiIHRvIHRoZSBDb21tb25KUyBcIm1vZHVsZS5leHBvcnRzXCIgZm9yIG5vZGUgY29tcGF0aWJpbGl0eS5cbiAgaXNOb2RlTW9kZSB8fCAhbW9kIHx8ICFtb2QuX19lc01vZHVsZSA/IF9fZGVmUHJvcCh0YXJnZXQyLCBcImRlZmF1bHRcIiwgeyB2YWx1ZTogbW9kLCBlbnVtZXJhYmxlOiB0cnVlIH0pIDogdGFyZ2V0MixcbiAgbW9kXG4pKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3RzdXBAOC40LjBfQG1pY3Jvc29mdCthcGktZXh0cmFjdG9yQDcuNTEuMV9AdHlwZXMrbm9kZUAyMi4xMy4xNF9faml0aUAyLjQuMl9wb3N0Y3NzQDguNV85NmViMDVhOWQ2NTM0MzAyMWU1Mzc5MWRkODNmMzc3My9ub2RlX21vZHVsZXMvdHN1cC9hc3NldHMvZXNtX3NoaW1zLmpzXG52YXIgaW5pdF9lc21fc2hpbXMgPSBfX2VzbSh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3RzdXBAOC40LjBfQG1pY3Jvc29mdCthcGktZXh0cmFjdG9yQDcuNTEuMV9AdHlwZXMrbm9kZUAyMi4xMy4xNF9faml0aUAyLjQuMl9wb3N0Y3NzQDguNV85NmViMDVhOWQ2NTM0MzAyMWU1Mzc5MWRkODNmMzc3My9ub2RlX21vZHVsZXMvdHN1cC9hc3NldHMvZXNtX3NoaW1zLmpzXCIoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vcmZkY0AxLjQuMS9ub2RlX21vZHVsZXMvcmZkYy9pbmRleC5qc1xudmFyIHJlcXVpcmVfcmZkYyA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9yZmRjQDEuNC4xL25vZGVfbW9kdWxlcy9yZmRjL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaW5pdF9lc21fc2hpbXMoKTtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHJmZGMyO1xuICAgIGZ1bmN0aW9uIGNvcHlCdWZmZXIoY3VyKSB7XG4gICAgICBpZiAoY3VyIGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShjdXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBjdXIuY29uc3RydWN0b3IoY3VyLmJ1ZmZlci5zbGljZSgpLCBjdXIuYnl0ZU9mZnNldCwgY3VyLmxlbmd0aCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJmZGMyKG9wdHMpIHtcbiAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgICAgaWYgKG9wdHMuY2lyY2xlcykgcmV0dXJuIHJmZGNDaXJjbGVzKG9wdHMpO1xuICAgICAgY29uc3QgY29uc3RydWN0b3JIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBjb25zdHJ1Y3RvckhhbmRsZXJzLnNldChEYXRlLCAobykgPT4gbmV3IERhdGUobykpO1xuICAgICAgY29uc3RydWN0b3JIYW5kbGVycy5zZXQoTWFwLCAobywgZm4pID0+IG5ldyBNYXAoY2xvbmVBcnJheShBcnJheS5mcm9tKG8pLCBmbikpKTtcbiAgICAgIGNvbnN0cnVjdG9ySGFuZGxlcnMuc2V0KFNldCwgKG8sIGZuKSA9PiBuZXcgU2V0KGNsb25lQXJyYXkoQXJyYXkuZnJvbShvKSwgZm4pKSk7XG4gICAgICBpZiAob3B0cy5jb25zdHJ1Y3RvckhhbmRsZXJzKSB7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlcjIgb2Ygb3B0cy5jb25zdHJ1Y3RvckhhbmRsZXJzKSB7XG4gICAgICAgICAgY29uc3RydWN0b3JIYW5kbGVycy5zZXQoaGFuZGxlcjJbMF0sIGhhbmRsZXIyWzFdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGhhbmRsZXIgPSBudWxsO1xuICAgICAgcmV0dXJuIG9wdHMucHJvdG8gPyBjbG9uZVByb3RvIDogY2xvbmU7XG4gICAgICBmdW5jdGlvbiBjbG9uZUFycmF5KGEsIGZuKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgICAgY29uc3QgYTIgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBrID0ga2V5c1tpXTtcbiAgICAgICAgICBjb25zdCBjdXIgPSBhW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgYTJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBhMltrXSA9IGhhbmRsZXIoY3VyLCBmbik7XG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoY3VyKSkge1xuICAgICAgICAgICAgYTJba10gPSBjb3B5QnVmZmVyKGN1cik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGEyW2tdID0gZm4oY3VyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGEyO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gY2xvbmUobykge1xuICAgICAgICBpZiAodHlwZW9mIG8gIT09IFwib2JqZWN0XCIgfHwgbyA9PT0gbnVsbCkgcmV0dXJuIG87XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG8pKSByZXR1cm4gY2xvbmVBcnJheShvLCBjbG9uZSk7XG4gICAgICAgIGlmIChvLmNvbnN0cnVjdG9yICE9PSBPYmplY3QgJiYgKGhhbmRsZXIgPSBjb25zdHJ1Y3RvckhhbmRsZXJzLmdldChvLmNvbnN0cnVjdG9yKSkpIHtcbiAgICAgICAgICByZXR1cm4gaGFuZGxlcihvLCBjbG9uZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbzIgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIG8pIHtcbiAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobywgaykgPT09IGZhbHNlKSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCBjdXIgPSBvW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbzJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGhhbmRsZXIoY3VyLCBjbG9uZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoY3VyKSkge1xuICAgICAgICAgICAgbzJba10gPSBjb3B5QnVmZmVyKGN1cik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8yW2tdID0gY2xvbmUoY3VyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG8yO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gY2xvbmVQcm90byhvKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbyAhPT0gXCJvYmplY3RcIiB8fCBvID09PSBudWxsKSByZXR1cm4gbztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobykpIHJldHVybiBjbG9uZUFycmF5KG8sIGNsb25lUHJvdG8pO1xuICAgICAgICBpZiAoby5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0ICYmIChoYW5kbGVyID0gY29uc3RydWN0b3JIYW5kbGVycy5nZXQoby5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIobywgY2xvbmVQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbzIgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIG8pIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBvW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbzJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGhhbmRsZXIoY3VyLCBjbG9uZVByb3RvKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhjdXIpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGNvcHlCdWZmZXIoY3VyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbzJba10gPSBjbG9uZVByb3RvKGN1cik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvMjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmZkY0NpcmNsZXMob3B0cykge1xuICAgICAgY29uc3QgcmVmcyA9IFtdO1xuICAgICAgY29uc3QgcmVmc05ldyA9IFtdO1xuICAgICAgY29uc3QgY29uc3RydWN0b3JIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBjb25zdHJ1Y3RvckhhbmRsZXJzLnNldChEYXRlLCAobykgPT4gbmV3IERhdGUobykpO1xuICAgICAgY29uc3RydWN0b3JIYW5kbGVycy5zZXQoTWFwLCAobywgZm4pID0+IG5ldyBNYXAoY2xvbmVBcnJheShBcnJheS5mcm9tKG8pLCBmbikpKTtcbiAgICAgIGNvbnN0cnVjdG9ySGFuZGxlcnMuc2V0KFNldCwgKG8sIGZuKSA9PiBuZXcgU2V0KGNsb25lQXJyYXkoQXJyYXkuZnJvbShvKSwgZm4pKSk7XG4gICAgICBpZiAob3B0cy5jb25zdHJ1Y3RvckhhbmRsZXJzKSB7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlcjIgb2Ygb3B0cy5jb25zdHJ1Y3RvckhhbmRsZXJzKSB7XG4gICAgICAgICAgY29uc3RydWN0b3JIYW5kbGVycy5zZXQoaGFuZGxlcjJbMF0sIGhhbmRsZXIyWzFdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGhhbmRsZXIgPSBudWxsO1xuICAgICAgcmV0dXJuIG9wdHMucHJvdG8gPyBjbG9uZVByb3RvIDogY2xvbmU7XG4gICAgICBmdW5jdGlvbiBjbG9uZUFycmF5KGEsIGZuKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgICAgY29uc3QgYTIgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBrID0ga2V5c1tpXTtcbiAgICAgICAgICBjb25zdCBjdXIgPSBhW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgYTJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBhMltrXSA9IGhhbmRsZXIoY3VyLCBmbik7XG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoY3VyKSkge1xuICAgICAgICAgICAgYTJba10gPSBjb3B5QnVmZmVyKGN1cik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcmVmcy5pbmRleE9mKGN1cik7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGEyW2tdID0gcmVmc05ld1tpbmRleF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhMltrXSA9IGZuKGN1cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhMjtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGNsb25lKG8pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvICE9PSBcIm9iamVjdFwiIHx8IG8gPT09IG51bGwpIHJldHVybiBvO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvKSkgcmV0dXJuIGNsb25lQXJyYXkobywgY2xvbmUpO1xuICAgICAgICBpZiAoby5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0ICYmIChoYW5kbGVyID0gY29uc3RydWN0b3JIYW5kbGVycy5nZXQoby5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIobywgY2xvbmUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8yID0ge307XG4gICAgICAgIHJlZnMucHVzaChvKTtcbiAgICAgICAgcmVmc05ldy5wdXNoKG8yKTtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIG8pIHtcbiAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobywgaykgPT09IGZhbHNlKSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCBjdXIgPSBvW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbzJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGhhbmRsZXIoY3VyLCBjbG9uZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoY3VyKSkge1xuICAgICAgICAgICAgbzJba10gPSBjb3B5QnVmZmVyKGN1cik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSByZWZzLmluZGV4T2YoY3VyKTtcbiAgICAgICAgICAgIGlmIChpICE9PSAtMSkge1xuICAgICAgICAgICAgICBvMltrXSA9IHJlZnNOZXdbaV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvMltrXSA9IGNsb25lKGN1cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlZnMucG9wKCk7XG4gICAgICAgIHJlZnNOZXcucG9wKCk7XG4gICAgICAgIHJldHVybiBvMjtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGNsb25lUHJvdG8obykge1xuICAgICAgICBpZiAodHlwZW9mIG8gIT09IFwib2JqZWN0XCIgfHwgbyA9PT0gbnVsbCkgcmV0dXJuIG87XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG8pKSByZXR1cm4gY2xvbmVBcnJheShvLCBjbG9uZVByb3RvKTtcbiAgICAgICAgaWYgKG8uY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KG8uY29uc3RydWN0b3IpKSkge1xuICAgICAgICAgIHJldHVybiBoYW5kbGVyKG8sIGNsb25lUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8yID0ge307XG4gICAgICAgIHJlZnMucHVzaChvKTtcbiAgICAgICAgcmVmc05ldy5wdXNoKG8yKTtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIG8pIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBvW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbzJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGhhbmRsZXIoY3VyLCBjbG9uZVByb3RvKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhjdXIpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGNvcHlCdWZmZXIoY3VyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaSA9IHJlZnMuaW5kZXhPZihjdXIpO1xuICAgICAgICAgICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICAgICAgICAgIG8yW2tdID0gcmVmc05ld1tpXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG8yW2tdID0gY2xvbmVQcm90byhjdXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZWZzLnBvcCgpO1xuICAgICAgICByZWZzTmV3LnBvcCgpO1xuICAgICAgICByZXR1cm4gbzI7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLy8gc3JjL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvY29uc3RhbnRzLnRzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIFZJRVdfTU9ERV9TVE9SQUdFX0tFWSA9IFwiX192dWUtZGV2dG9vbHMtdmlldy1tb2RlX19cIjtcbnZhciBWSVRFX1BMVUdJTl9ERVRFQ1RFRF9TVE9SQUdFX0tFWSA9IFwiX192dWUtZGV2dG9vbHMtdml0ZS1wbHVnaW4tZGV0ZWN0ZWRfX1wiO1xudmFyIFZJVEVfUExVR0lOX0NMSUVOVF9VUkxfU1RPUkFHRV9LRVkgPSBcIl9fdnVlLWRldnRvb2xzLXZpdGUtcGx1Z2luLWNsaWVudC11cmxfX1wiO1xudmFyIEJST0FEQ0FTVF9DSEFOTkVMX05BTUUgPSBcIl9fdnVlLWRldnRvb2xzLWJyb2FkY2FzdC1jaGFubmVsX19cIjtcblxuLy8gc3JjL2Vudi50c1xuaW5pdF9lc21fc2hpbXMoKTtcbnZhciBpc0Jyb3dzZXIgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiO1xudmFyIHRhcmdldCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge307XG52YXIgaXNJbkNocm9tZVBhbmVsID0gdHlwZW9mIHRhcmdldC5jaHJvbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgISF0YXJnZXQuY2hyb21lLmRldnRvb2xzO1xudmFyIGlzSW5JZnJhbWUgPSBpc0Jyb3dzZXIgJiYgdGFyZ2V0LnNlbGYgIT09IHRhcmdldC50b3A7XG52YXIgX2E7XG52YXIgaXNJbkVsZWN0cm9uID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoKF9hID0gbmF2aWdhdG9yLnVzZXJBZ2VudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJlbGVjdHJvblwiKSk7XG52YXIgaXNOdXh0QXBwID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhIXdpbmRvdy5fX05VWFRfXztcbnZhciBpc0luU2VwYXJhdGVXaW5kb3cgPSAhaXNJbklmcmFtZSAmJiAhaXNJbkNocm9tZVBhbmVsICYmICFpc0luRWxlY3Ryb247XG5cbi8vIHNyYy9nZW5lcmFsLnRzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIGltcG9ydF9yZmRjID0gX190b0VTTShyZXF1aXJlX3JmZGMoKSwgMSk7XG5mdW5jdGlvbiBOT09QKCkge1xufVxudmFyIGlzTnVtZXJpYyA9IChzdHIpID0+IGAkeytzdHJ9YCA9PT0gc3RyO1xudmFyIGlzTWFjT1MgPSAoKSA9PiAobmF2aWdhdG9yID09IG51bGwgPyB2b2lkIDAgOiBuYXZpZ2F0b3IucGxhdGZvcm0pID8gbmF2aWdhdG9yID09IG51bGwgPyB2b2lkIDAgOiBuYXZpZ2F0b3IucGxhdGZvcm0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcIm1hY1wiKSA6IC9NYWNpbnRvc2gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG52YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstXy9dKShcXHcpL2c7XG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcbnZhciBrZWJhYml6ZVJFID0gLyhbYS16MC05XSkoW0EtWl0pL2c7XG5mdW5jdGlvbiB0b1VwcGVyKF8sIGMpIHtcbiAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiBcIlwiO1xufVxuZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XG4gIHJldHVybiBzdHIgJiYgYCR7c3RyfWAucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKTtcbn1cbmZ1bmN0aW9uIGNhbWVsaXplKHN0cikge1xuICByZXR1cm4gc3RyICYmIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpO1xufVxuZnVuY3Rpb24ga2ViYWJpemUoc3RyKSB7XG4gIHJldHVybiBzdHIgJiYgc3RyLnJlcGxhY2Uoa2ViYWJpemVSRSwgKF8sIGxvd2VyQ2FzZUNoYXJhY3RlciwgdXBwZXJDYXNlTGV0dGVyKSA9PiB7XG4gICAgcmV0dXJuIGAke2xvd2VyQ2FzZUNoYXJhY3Rlcn0tJHt1cHBlckNhc2VMZXR0ZXJ9YDtcbiAgfSkudG9Mb3dlckNhc2UoKTtcbn1cbmZ1bmN0aW9uIGJhc2VuYW1lKGZpbGVuYW1lLCBleHQpIHtcbiAgbGV0IG5vcm1hbGl6ZWRGaWxlbmFtZSA9IGZpbGVuYW1lLnJlcGxhY2UoL15bYS16XTovaSwgXCJcIikucmVwbGFjZSgvXFxcXC9nLCBcIi9cIik7XG4gIGlmIChub3JtYWxpemVkRmlsZW5hbWUuZW5kc1dpdGgoYGluZGV4JHtleHR9YCkpIHtcbiAgICBub3JtYWxpemVkRmlsZW5hbWUgPSBub3JtYWxpemVkRmlsZW5hbWUucmVwbGFjZShgL2luZGV4JHtleHR9YCwgZXh0KTtcbiAgfVxuICBjb25zdCBsYXN0U2xhc2hJbmRleCA9IG5vcm1hbGl6ZWRGaWxlbmFtZS5sYXN0SW5kZXhPZihcIi9cIik7XG4gIGNvbnN0IGJhc2VOYW1lV2l0aEV4dCA9IG5vcm1hbGl6ZWRGaWxlbmFtZS5zdWJzdHJpbmcobGFzdFNsYXNoSW5kZXggKyAxKTtcbiAgaWYgKGV4dCkge1xuICAgIGNvbnN0IGV4dEluZGV4ID0gYmFzZU5hbWVXaXRoRXh0Lmxhc3RJbmRleE9mKGV4dCk7XG4gICAgcmV0dXJuIGJhc2VOYW1lV2l0aEV4dC5zdWJzdHJpbmcoMCwgZXh0SW5kZXgpO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuZnVuY3Rpb24gc29ydEJ5S2V5KHN0YXRlKSB7XG4gIHJldHVybiBzdGF0ZSAmJiBzdGF0ZS5zbGljZSgpLnNvcnQoKGEsIGIpID0+IHtcbiAgICBpZiAoYS5rZXkgPCBiLmtleSlcbiAgICAgIHJldHVybiAtMTtcbiAgICBpZiAoYS5rZXkgPiBiLmtleSlcbiAgICAgIHJldHVybiAxO1xuICAgIHJldHVybiAwO1xuICB9KTtcbn1cbnZhciBIVFRQX1VSTF9SRSA9IC9eaHR0cHM/OlxcL1xcLy87XG5mdW5jdGlvbiBpc1VybFN0cmluZyhzdHIpIHtcbiAgcmV0dXJuIHN0ci5zdGFydHNXaXRoKFwiL1wiKSB8fCBIVFRQX1VSTF9SRS50ZXN0KHN0cik7XG59XG52YXIgZGVlcENsb25lID0gKDAsIGltcG9ydF9yZmRjLmRlZmF1bHQpKHsgY2lyY2xlczogdHJ1ZSB9KTtcbmZ1bmN0aW9uIHJhbmRvbVN0cigpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xufVxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUgIT09IG51bGw7XG59XG5mdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGlzU2V0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFNldDtcbn1cbmZ1bmN0aW9uIGlzTWFwKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIE1hcDtcbn1cbmV4cG9ydCB7XG4gIEJST0FEQ0FTVF9DSEFOTkVMX05BTUUsXG4gIE5PT1AsXG4gIFZJRVdfTU9ERV9TVE9SQUdFX0tFWSxcbiAgVklURV9QTFVHSU5fQ0xJRU5UX1VSTF9TVE9SQUdFX0tFWSxcbiAgVklURV9QTFVHSU5fREVURUNURURfU1RPUkFHRV9LRVksXG4gIGJhc2VuYW1lLFxuICBjYW1lbGl6ZSxcbiAgY2xhc3NpZnksXG4gIGRlZXBDbG9uZSxcbiAgaXNBcnJheSxcbiAgaXNCcm93c2VyLFxuICBpc0luQ2hyb21lUGFuZWwsXG4gIGlzSW5FbGVjdHJvbixcbiAgaXNJbklmcmFtZSxcbiAgaXNJblNlcGFyYXRlV2luZG93LFxuICBpc01hY09TLFxuICBpc01hcCxcbiAgaXNOdW1lcmljLFxuICBpc051eHRBcHAsXG4gIGlzT2JqZWN0LFxuICBpc1NldCxcbiAgaXNVcmxTdHJpbmcsXG4gIGtlYmFiaXplLFxuICByYW5kb21TdHIsXG4gIHNvcnRCeUtleSxcbiAgdGFyZ2V0XG59O1xuIiwiY29uc3QgREVCT1VOQ0VfREVGQVVMVFMgPSB7XG4gIHRyYWlsaW5nOiB0cnVlXG59O1xuZnVuY3Rpb24gZGVib3VuY2UoZm4sIHdhaXQgPSAyNSwgb3B0aW9ucyA9IHt9KSB7XG4gIG9wdGlvbnMgPSB7IC4uLkRFQk9VTkNFX0RFRkFVTFRTLCAuLi5vcHRpb25zIH07XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKHdhaXQpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkV4cGVjdGVkIGB3YWl0YCB0byBiZSBhIGZpbml0ZSBudW1iZXJcIik7XG4gIH1cbiAgbGV0IGxlYWRpbmdWYWx1ZTtcbiAgbGV0IHRpbWVvdXQ7XG4gIGxldCByZXNvbHZlTGlzdCA9IFtdO1xuICBsZXQgY3VycmVudFByb21pc2U7XG4gIGxldCB0cmFpbGluZ0FyZ3M7XG4gIGNvbnN0IGFwcGx5Rm4gPSAoX3RoaXMsIGFyZ3MpID0+IHtcbiAgICBjdXJyZW50UHJvbWlzZSA9IF9hcHBseVByb21pc2VkKGZuLCBfdGhpcywgYXJncyk7XG4gICAgY3VycmVudFByb21pc2UuZmluYWxseSgoKSA9PiB7XG4gICAgICBjdXJyZW50UHJvbWlzZSA9IG51bGw7XG4gICAgICBpZiAob3B0aW9ucy50cmFpbGluZyAmJiB0cmFpbGluZ0FyZ3MgJiYgIXRpbWVvdXQpIHtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IGFwcGx5Rm4oX3RoaXMsIHRyYWlsaW5nQXJncyk7XG4gICAgICAgIHRyYWlsaW5nQXJncyA9IG51bGw7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjdXJyZW50UHJvbWlzZTtcbiAgfTtcbiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICBpZiAoY3VycmVudFByb21pc2UpIHtcbiAgICAgIGlmIChvcHRpb25zLnRyYWlsaW5nKSB7XG4gICAgICAgIHRyYWlsaW5nQXJncyA9IGFyZ3M7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VycmVudFByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3Qgc2hvdWxkQ2FsbE5vdyA9ICF0aW1lb3V0ICYmIG9wdGlvbnMubGVhZGluZztcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBvcHRpb25zLmxlYWRpbmcgPyBsZWFkaW5nVmFsdWUgOiBhcHBseUZuKHRoaXMsIGFyZ3MpO1xuICAgICAgICBmb3IgKGNvbnN0IF9yZXNvbHZlIG9mIHJlc29sdmVMaXN0KSB7XG4gICAgICAgICAgX3Jlc29sdmUocHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZUxpc3QgPSBbXTtcbiAgICAgIH0sIHdhaXQpO1xuICAgICAgaWYgKHNob3VsZENhbGxOb3cpIHtcbiAgICAgICAgbGVhZGluZ1ZhbHVlID0gYXBwbHlGbih0aGlzLCBhcmdzKTtcbiAgICAgICAgcmVzb2x2ZShsZWFkaW5nVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZUxpc3QucHVzaChyZXNvbHZlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIF9hcHBseVByb21pc2VkKGZuLCBfdGhpcywgYXJncykge1xuICByZXR1cm4gYXdhaXQgZm4uYXBwbHkoX3RoaXMsIGFyZ3MpO1xufVxuXG5leHBvcnQgeyBkZWJvdW5jZSB9O1xuIiwiZnVuY3Rpb24gZmxhdEhvb2tzKGNvbmZpZ0hvb2tzLCBob29rcyA9IHt9LCBwYXJlbnROYW1lKSB7XG4gIGZvciAoY29uc3Qga2V5IGluIGNvbmZpZ0hvb2tzKSB7XG4gICAgY29uc3Qgc3ViSG9vayA9IGNvbmZpZ0hvb2tzW2tleV07XG4gICAgY29uc3QgbmFtZSA9IHBhcmVudE5hbWUgPyBgJHtwYXJlbnROYW1lfToke2tleX1gIDoga2V5O1xuICAgIGlmICh0eXBlb2Ygc3ViSG9vayA9PT0gXCJvYmplY3RcIiAmJiBzdWJIb29rICE9PSBudWxsKSB7XG4gICAgICBmbGF0SG9va3Moc3ViSG9vaywgaG9va3MsIG5hbWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHN1Ykhvb2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaG9va3NbbmFtZV0gPSBzdWJIb29rO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaG9va3M7XG59XG5mdW5jdGlvbiBtZXJnZUhvb2tzKC4uLmhvb2tzKSB7XG4gIGNvbnN0IGZpbmFsSG9va3MgPSB7fTtcbiAgZm9yIChjb25zdCBob29rIG9mIGhvb2tzKSB7XG4gICAgY29uc3QgZmxhdGVuSG9vayA9IGZsYXRIb29rcyhob29rKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmbGF0ZW5Ib29rKSB7XG4gICAgICBpZiAoZmluYWxIb29rc1trZXldKSB7XG4gICAgICAgIGZpbmFsSG9va3Nba2V5XS5wdXNoKGZsYXRlbkhvb2tba2V5XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaW5hbEhvb2tzW2tleV0gPSBbZmxhdGVuSG9va1trZXldXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgaW4gZmluYWxIb29rcykge1xuICAgIGlmIChmaW5hbEhvb2tzW2tleV0ubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgYXJyYXkgPSBmaW5hbEhvb2tzW2tleV07XG4gICAgICBmaW5hbEhvb2tzW2tleV0gPSAoLi4uYXJndW1lbnRzXykgPT4gc2VyaWFsKGFycmF5LCAoZnVuY3Rpb25fKSA9PiBmdW5jdGlvbl8oLi4uYXJndW1lbnRzXykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaW5hbEhvb2tzW2tleV0gPSBmaW5hbEhvb2tzW2tleV1bMF07XG4gICAgfVxuICB9XG4gIHJldHVybiBmaW5hbEhvb2tzO1xufVxuZnVuY3Rpb24gc2VyaWFsKHRhc2tzLCBmdW5jdGlvbl8pIHtcbiAgcmV0dXJuIHRhc2tzLnJlZHVjZShcbiAgICAocHJvbWlzZSwgdGFzaykgPT4gcHJvbWlzZS50aGVuKCgpID0+IGZ1bmN0aW9uXyh0YXNrKSksXG4gICAgUHJvbWlzZS5yZXNvbHZlKClcbiAgKTtcbn1cbmNvbnN0IGRlZmF1bHRUYXNrID0geyBydW46IChmdW5jdGlvbl8pID0+IGZ1bmN0aW9uXygpIH07XG5jb25zdCBfY3JlYXRlVGFzayA9ICgpID0+IGRlZmF1bHRUYXNrO1xuY29uc3QgY3JlYXRlVGFzayA9IHR5cGVvZiBjb25zb2xlLmNyZWF0ZVRhc2sgIT09IFwidW5kZWZpbmVkXCIgPyBjb25zb2xlLmNyZWF0ZVRhc2sgOiBfY3JlYXRlVGFzaztcbmZ1bmN0aW9uIHNlcmlhbFRhc2tDYWxsZXIoaG9va3MsIGFyZ3MpIHtcbiAgY29uc3QgbmFtZSA9IGFyZ3Muc2hpZnQoKTtcbiAgY29uc3QgdGFzayA9IGNyZWF0ZVRhc2sobmFtZSk7XG4gIHJldHVybiBob29rcy5yZWR1Y2UoXG4gICAgKHByb21pc2UsIGhvb2tGdW5jdGlvbikgPT4gcHJvbWlzZS50aGVuKCgpID0+IHRhc2sucnVuKCgpID0+IGhvb2tGdW5jdGlvbiguLi5hcmdzKSkpLFxuICAgIFByb21pc2UucmVzb2x2ZSgpXG4gICk7XG59XG5mdW5jdGlvbiBwYXJhbGxlbFRhc2tDYWxsZXIoaG9va3MsIGFyZ3MpIHtcbiAgY29uc3QgbmFtZSA9IGFyZ3Muc2hpZnQoKTtcbiAgY29uc3QgdGFzayA9IGNyZWF0ZVRhc2sobmFtZSk7XG4gIHJldHVybiBQcm9taXNlLmFsbChob29rcy5tYXAoKGhvb2spID0+IHRhc2sucnVuKCgpID0+IGhvb2soLi4uYXJncykpKSk7XG59XG5mdW5jdGlvbiBzZXJpYWxDYWxsZXIoaG9va3MsIGFyZ3VtZW50c18pIHtcbiAgcmV0dXJuIGhvb2tzLnJlZHVjZShcbiAgICAocHJvbWlzZSwgaG9va0Z1bmN0aW9uKSA9PiBwcm9taXNlLnRoZW4oKCkgPT4gaG9va0Z1bmN0aW9uKC4uLmFyZ3VtZW50c18gfHwgW10pKSxcbiAgICBQcm9taXNlLnJlc29sdmUoKVxuICApO1xufVxuZnVuY3Rpb24gcGFyYWxsZWxDYWxsZXIoaG9va3MsIGFyZ3MpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKGhvb2tzLm1hcCgoaG9vaykgPT4gaG9vayguLi5hcmdzIHx8IFtdKSkpO1xufVxuZnVuY3Rpb24gY2FsbEVhY2hXaXRoKGNhbGxiYWNrcywgYXJnMCkge1xuICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIFsuLi5jYWxsYmFja3NdKSB7XG4gICAgY2FsbGJhY2soYXJnMCk7XG4gIH1cbn1cblxuY2xhc3MgSG9va2FibGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9ob29rcyA9IHt9O1xuICAgIHRoaXMuX2JlZm9yZSA9IHZvaWQgMDtcbiAgICB0aGlzLl9hZnRlciA9IHZvaWQgMDtcbiAgICB0aGlzLl9kZXByZWNhdGVkTWVzc2FnZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5fZGVwcmVjYXRlZEhvb2tzID0ge307XG4gICAgdGhpcy5ob29rID0gdGhpcy5ob29rLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jYWxsSG9vayA9IHRoaXMuY2FsbEhvb2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmNhbGxIb29rV2l0aCA9IHRoaXMuY2FsbEhvb2tXaXRoLmJpbmQodGhpcyk7XG4gIH1cbiAgaG9vayhuYW1lLCBmdW5jdGlvbl8sIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICghbmFtZSB8fCB0eXBlb2YgZnVuY3Rpb25fICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBvcmlnaW5hbE5hbWUgPSBuYW1lO1xuICAgIGxldCBkZXA7XG4gICAgd2hpbGUgKHRoaXMuX2RlcHJlY2F0ZWRIb29rc1tuYW1lXSkge1xuICAgICAgZGVwID0gdGhpcy5fZGVwcmVjYXRlZEhvb2tzW25hbWVdO1xuICAgICAgbmFtZSA9IGRlcC50bztcbiAgICB9XG4gICAgaWYgKGRlcCAmJiAhb3B0aW9ucy5hbGxvd0RlcHJlY2F0ZWQpIHtcbiAgICAgIGxldCBtZXNzYWdlID0gZGVwLm1lc3NhZ2U7XG4gICAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgICAgbWVzc2FnZSA9IGAke29yaWdpbmFsTmFtZX0gaG9vayBoYXMgYmVlbiBkZXByZWNhdGVkYCArIChkZXAudG8gPyBgLCBwbGVhc2UgdXNlICR7ZGVwLnRvfWAgOiBcIlwiKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5fZGVwcmVjYXRlZE1lc3NhZ2VzKSB7XG4gICAgICAgIHRoaXMuX2RlcHJlY2F0ZWRNZXNzYWdlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuX2RlcHJlY2F0ZWRNZXNzYWdlcy5oYXMobWVzc2FnZSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLl9kZXByZWNhdGVkTWVzc2FnZXMuYWRkKG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZ1bmN0aW9uXy5uYW1lKSB7XG4gICAgICB0cnkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZnVuY3Rpb25fLCBcIm5hbWVcIiwge1xuICAgICAgICAgIGdldDogKCkgPT4gXCJfXCIgKyBuYW1lLnJlcGxhY2UoL1xcVysvZywgXCJfXCIpICsgXCJfaG9va19jYlwiLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9ob29rc1tuYW1lXSA9IHRoaXMuX2hvb2tzW25hbWVdIHx8IFtdO1xuICAgIHRoaXMuX2hvb2tzW25hbWVdLnB1c2goZnVuY3Rpb25fKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGZ1bmN0aW9uXykge1xuICAgICAgICB0aGlzLnJlbW92ZUhvb2sobmFtZSwgZnVuY3Rpb25fKTtcbiAgICAgICAgZnVuY3Rpb25fID0gdm9pZCAwO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgaG9va09uY2UobmFtZSwgZnVuY3Rpb25fKSB7XG4gICAgbGV0IF91bnJlZztcbiAgICBsZXQgX2Z1bmN0aW9uID0gKC4uLmFyZ3VtZW50c18pID0+IHtcbiAgICAgIGlmICh0eXBlb2YgX3VucmVnID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgX3VucmVnKCk7XG4gICAgICB9XG4gICAgICBfdW5yZWcgPSB2b2lkIDA7XG4gICAgICBfZnVuY3Rpb24gPSB2b2lkIDA7XG4gICAgICByZXR1cm4gZnVuY3Rpb25fKC4uLmFyZ3VtZW50c18pO1xuICAgIH07XG4gICAgX3VucmVnID0gdGhpcy5ob29rKG5hbWUsIF9mdW5jdGlvbik7XG4gICAgcmV0dXJuIF91bnJlZztcbiAgfVxuICByZW1vdmVIb29rKG5hbWUsIGZ1bmN0aW9uXykge1xuICAgIGlmICh0aGlzLl9ob29rc1tuYW1lXSkge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9ob29rc1tuYW1lXS5pbmRleE9mKGZ1bmN0aW9uXyk7XG4gICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIHRoaXMuX2hvb2tzW25hbWVdLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5faG9va3NbbmFtZV0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ob29rc1tuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZGVwcmVjYXRlSG9vayhuYW1lLCBkZXByZWNhdGVkKSB7XG4gICAgdGhpcy5fZGVwcmVjYXRlZEhvb2tzW25hbWVdID0gdHlwZW9mIGRlcHJlY2F0ZWQgPT09IFwic3RyaW5nXCIgPyB7IHRvOiBkZXByZWNhdGVkIH0gOiBkZXByZWNhdGVkO1xuICAgIGNvbnN0IF9ob29rcyA9IHRoaXMuX2hvb2tzW25hbWVdIHx8IFtdO1xuICAgIGRlbGV0ZSB0aGlzLl9ob29rc1tuYW1lXTtcbiAgICBmb3IgKGNvbnN0IGhvb2sgb2YgX2hvb2tzKSB7XG4gICAgICB0aGlzLmhvb2sobmFtZSwgaG9vayk7XG4gICAgfVxuICB9XG4gIGRlcHJlY2F0ZUhvb2tzKGRlcHJlY2F0ZWRIb29rcykge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5fZGVwcmVjYXRlZEhvb2tzLCBkZXByZWNhdGVkSG9va3MpO1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiBkZXByZWNhdGVkSG9va3MpIHtcbiAgICAgIHRoaXMuZGVwcmVjYXRlSG9vayhuYW1lLCBkZXByZWNhdGVkSG9va3NbbmFtZV0pO1xuICAgIH1cbiAgfVxuICBhZGRIb29rcyhjb25maWdIb29rcykge1xuICAgIGNvbnN0IGhvb2tzID0gZmxhdEhvb2tzKGNvbmZpZ0hvb2tzKTtcbiAgICBjb25zdCByZW1vdmVGbnMgPSBPYmplY3Qua2V5cyhob29rcykubWFwKFxuICAgICAgKGtleSkgPT4gdGhpcy5ob29rKGtleSwgaG9va3Nba2V5XSlcbiAgICApO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IHVucmVnIG9mIHJlbW92ZUZucy5zcGxpY2UoMCwgcmVtb3ZlRm5zLmxlbmd0aCkpIHtcbiAgICAgICAgdW5yZWcoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHJlbW92ZUhvb2tzKGNvbmZpZ0hvb2tzKSB7XG4gICAgY29uc3QgaG9va3MgPSBmbGF0SG9va3MoY29uZmlnSG9va3MpO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGhvb2tzKSB7XG4gICAgICB0aGlzLnJlbW92ZUhvb2soa2V5LCBob29rc1trZXldKTtcbiAgICB9XG4gIH1cbiAgcmVtb3ZlQWxsSG9va3MoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5faG9va3MpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ob29rc1trZXldO1xuICAgIH1cbiAgfVxuICBjYWxsSG9vayhuYW1lLCAuLi5hcmd1bWVudHNfKSB7XG4gICAgYXJndW1lbnRzXy51bnNoaWZ0KG5hbWUpO1xuICAgIHJldHVybiB0aGlzLmNhbGxIb29rV2l0aChzZXJpYWxUYXNrQ2FsbGVyLCBuYW1lLCAuLi5hcmd1bWVudHNfKTtcbiAgfVxuICBjYWxsSG9va1BhcmFsbGVsKG5hbWUsIC4uLmFyZ3VtZW50c18pIHtcbiAgICBhcmd1bWVudHNfLnVuc2hpZnQobmFtZSk7XG4gICAgcmV0dXJuIHRoaXMuY2FsbEhvb2tXaXRoKHBhcmFsbGVsVGFza0NhbGxlciwgbmFtZSwgLi4uYXJndW1lbnRzXyk7XG4gIH1cbiAgY2FsbEhvb2tXaXRoKGNhbGxlciwgbmFtZSwgLi4uYXJndW1lbnRzXykge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5fYmVmb3JlIHx8IHRoaXMuX2FmdGVyID8geyBuYW1lLCBhcmdzOiBhcmd1bWVudHNfLCBjb250ZXh0OiB7fSB9IDogdm9pZCAwO1xuICAgIGlmICh0aGlzLl9iZWZvcmUpIHtcbiAgICAgIGNhbGxFYWNoV2l0aCh0aGlzLl9iZWZvcmUsIGV2ZW50KTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gY2FsbGVyKFxuICAgICAgbmFtZSBpbiB0aGlzLl9ob29rcyA/IFsuLi50aGlzLl9ob29rc1tuYW1lXV0gOiBbXSxcbiAgICAgIGFyZ3VtZW50c19cbiAgICApO1xuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICByZXR1cm4gcmVzdWx0LmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fYWZ0ZXIgJiYgZXZlbnQpIHtcbiAgICAgICAgICBjYWxsRWFjaFdpdGgodGhpcy5fYWZ0ZXIsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hZnRlciAmJiBldmVudCkge1xuICAgICAgY2FsbEVhY2hXaXRoKHRoaXMuX2FmdGVyLCBldmVudCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgYmVmb3JlRWFjaChmdW5jdGlvbl8pIHtcbiAgICB0aGlzLl9iZWZvcmUgPSB0aGlzLl9iZWZvcmUgfHwgW107XG4gICAgdGhpcy5fYmVmb3JlLnB1c2goZnVuY3Rpb25fKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2JlZm9yZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fYmVmb3JlLmluZGV4T2YoZnVuY3Rpb25fKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIHRoaXMuX2JlZm9yZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBhZnRlckVhY2goZnVuY3Rpb25fKSB7XG4gICAgdGhpcy5fYWZ0ZXIgPSB0aGlzLl9hZnRlciB8fCBbXTtcbiAgICB0aGlzLl9hZnRlci5wdXNoKGZ1bmN0aW9uXyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9hZnRlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fYWZ0ZXIuaW5kZXhPZihmdW5jdGlvbl8pO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5fYWZ0ZXIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUhvb2tzKCkge1xuICByZXR1cm4gbmV3IEhvb2thYmxlKCk7XG59XG5cbmNvbnN0IGlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCI7XG5mdW5jdGlvbiBjcmVhdGVEZWJ1Z2dlcihob29rcywgX29wdGlvbnMgPSB7fSkge1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGluc3BlY3Q6IGlzQnJvd3NlcixcbiAgICBncm91cDogaXNCcm93c2VyLFxuICAgIGZpbHRlcjogKCkgPT4gdHJ1ZSxcbiAgICAuLi5fb3B0aW9uc1xuICB9O1xuICBjb25zdCBfZmlsdGVyID0gb3B0aW9ucy5maWx0ZXI7XG4gIGNvbnN0IGZpbHRlciA9IHR5cGVvZiBfZmlsdGVyID09PSBcInN0cmluZ1wiID8gKG5hbWUpID0+IG5hbWUuc3RhcnRzV2l0aChfZmlsdGVyKSA6IF9maWx0ZXI7XG4gIGNvbnN0IF90YWcgPSBvcHRpb25zLnRhZyA/IGBbJHtvcHRpb25zLnRhZ31dIGAgOiBcIlwiO1xuICBjb25zdCBsb2dQcmVmaXggPSAoZXZlbnQpID0+IF90YWcgKyBldmVudC5uYW1lICsgXCJcIi5wYWRFbmQoZXZlbnQuX2lkLCBcIlxcMFwiKTtcbiAgY29uc3QgX2lkQ3RyID0ge307XG4gIGNvbnN0IHVuc3Vic2NyaWJlQmVmb3JlID0gaG9va3MuYmVmb3JlRWFjaCgoZXZlbnQpID0+IHtcbiAgICBpZiAoZmlsdGVyICE9PSB2b2lkIDAgJiYgIWZpbHRlcihldmVudC5uYW1lKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfaWRDdHJbZXZlbnQubmFtZV0gPSBfaWRDdHJbZXZlbnQubmFtZV0gfHwgMDtcbiAgICBldmVudC5faWQgPSBfaWRDdHJbZXZlbnQubmFtZV0rKztcbiAgICBjb25zb2xlLnRpbWUobG9nUHJlZml4KGV2ZW50KSk7XG4gIH0pO1xuICBjb25zdCB1bnN1YnNjcmliZUFmdGVyID0gaG9va3MuYWZ0ZXJFYWNoKChldmVudCkgPT4ge1xuICAgIGlmIChmaWx0ZXIgIT09IHZvaWQgMCAmJiAhZmlsdGVyKGV2ZW50Lm5hbWUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmdyb3VwKSB7XG4gICAgICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKGV2ZW50Lm5hbWUpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5pbnNwZWN0KSB7XG4gICAgICBjb25zb2xlLnRpbWVMb2cobG9nUHJlZml4KGV2ZW50KSwgZXZlbnQuYXJncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUudGltZUVuZChsb2dQcmVmaXgoZXZlbnQpKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZ3JvdXApIHtcbiAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgICB9XG4gICAgX2lkQ3RyW2V2ZW50Lm5hbWVdLS07XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIC8qKiBTdG9wIGRlYnVnZ2luZyBhbmQgcmVtb3ZlIGxpc3RlbmVycyAqL1xuICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZUJlZm9yZSgpO1xuICAgICAgdW5zdWJzY3JpYmVBZnRlcigpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IHsgSG9va2FibGUsIGNyZWF0ZURlYnVnZ2VyLCBjcmVhdGVIb29rcywgZmxhdEhvb2tzLCBtZXJnZUhvb2tzLCBwYXJhbGxlbENhbGxlciwgc2VyaWFsLCBzZXJpYWxDYWxsZXIgfTtcbiIsInZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRQcm90b09mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19lc20gPSAoZm4sIHJlcykgPT4gZnVuY3Rpb24gX19pbml0KCkge1xuICByZXR1cm4gZm4gJiYgKHJlcyA9ICgwLCBmbltfX2dldE93blByb3BOYW1lcyhmbilbMF1dKShmbiA9IDApKSwgcmVzO1xufTtcbnZhciBfX2NvbW1vbkpTID0gKGNiLCBtb2QpID0+IGZ1bmN0aW9uIF9fcmVxdWlyZSgpIHtcbiAgcmV0dXJuIG1vZCB8fCAoMCwgY2JbX19nZXRPd25Qcm9wTmFtZXMoY2IpWzBdXSkoKG1vZCA9IHsgZXhwb3J0czoge30gfSkuZXhwb3J0cywgbW9kKSwgbW9kLmV4cG9ydHM7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcbiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSlcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXG4gICAgICAgIF9fZGVmUHJvcCh0bywga2V5LCB7IGdldDogKCkgPT4gZnJvbVtrZXldLCBlbnVtZXJhYmxlOiAhKGRlc2MgPSBfX2dldE93blByb3BEZXNjKGZyb20sIGtleSkpIHx8IGRlc2MuZW51bWVyYWJsZSB9KTtcbiAgfVxuICByZXR1cm4gdG87XG59O1xudmFyIF9fdG9FU00gPSAobW9kLCBpc05vZGVNb2RlLCB0YXJnZXQyMikgPT4gKHRhcmdldDIyID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoXG4gIC8vIElmIHRoZSBpbXBvcnRlciBpcyBpbiBub2RlIGNvbXBhdGliaWxpdHkgbW9kZSBvciB0aGlzIGlzIG5vdCBhbiBFU01cbiAgLy8gZmlsZSB0aGF0IGhhcyBiZWVuIGNvbnZlcnRlZCB0byBhIENvbW1vbkpTIGZpbGUgdXNpbmcgYSBCYWJlbC1cbiAgLy8gY29tcGF0aWJsZSB0cmFuc2Zvcm0gKGkuZS4gXCJfX2VzTW9kdWxlXCIgaGFzIG5vdCBiZWVuIHNldCksIHRoZW4gc2V0XG4gIC8vIFwiZGVmYXVsdFwiIHRvIHRoZSBDb21tb25KUyBcIm1vZHVsZS5leHBvcnRzXCIgZm9yIG5vZGUgY29tcGF0aWJpbGl0eS5cbiAgaXNOb2RlTW9kZSB8fCAhbW9kIHx8ICFtb2QuX19lc01vZHVsZSA/IF9fZGVmUHJvcCh0YXJnZXQyMiwgXCJkZWZhdWx0XCIsIHsgdmFsdWU6IG1vZCwgZW51bWVyYWJsZTogdHJ1ZSB9KSA6IHRhcmdldDIyLFxuICBtb2RcbikpO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vdHN1cEA4LjQuMF9AbWljcm9zb2Z0K2FwaS1leHRyYWN0b3JANy41MS4xX0B0eXBlcytub2RlQDIyLjEzLjE0X19qaXRpQDIuNC4yX3Bvc3Rjc3NAOC41Xzk2ZWIwNWE5ZDY1MzQzMDIxZTUzNzkxZGQ4M2YzNzczL25vZGVfbW9kdWxlcy90c3VwL2Fzc2V0cy9lc21fc2hpbXMuanNcbnZhciBpbml0X2VzbV9zaGltcyA9IF9fZXNtKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vdHN1cEA4LjQuMF9AbWljcm9zb2Z0K2FwaS1leHRyYWN0b3JANy41MS4xX0B0eXBlcytub2RlQDIyLjEzLjE0X19qaXRpQDIuNC4yX3Bvc3Rjc3NAOC41Xzk2ZWIwNWE5ZDY1MzQzMDIxZTUzNzkxZGQ4M2YzNzczL25vZGVfbW9kdWxlcy90c3VwL2Fzc2V0cy9lc21fc2hpbXMuanNcIigpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgfVxufSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zcGVha2luZ3VybEAxNC4wLjEvbm9kZV9tb2R1bGVzL3NwZWFraW5ndXJsL2xpYi9zcGVha2luZ3VybC5qc1xudmFyIHJlcXVpcmVfc3BlYWtpbmd1cmwgPSBfX2NvbW1vbkpTKHtcbiAgXCIuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3BlYWtpbmd1cmxAMTQuMC4xL25vZGVfbW9kdWxlcy9zcGVha2luZ3VybC9saWIvc3BlYWtpbmd1cmwuanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpbml0X2VzbV9zaGltcygpO1xuICAgIChmdW5jdGlvbihyb290KSB7XG4gICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgIHZhciBjaGFyTWFwID0ge1xuICAgICAgICAvLyBsYXRpblxuICAgICAgICBcIlxceEMwXCI6IFwiQVwiLFxuICAgICAgICBcIlxceEMxXCI6IFwiQVwiLFxuICAgICAgICBcIlxceEMyXCI6IFwiQVwiLFxuICAgICAgICBcIlxceEMzXCI6IFwiQVwiLFxuICAgICAgICBcIlxceEM0XCI6IFwiQWVcIixcbiAgICAgICAgXCJcXHhDNVwiOiBcIkFcIixcbiAgICAgICAgXCJcXHhDNlwiOiBcIkFFXCIsXG4gICAgICAgIFwiXFx4QzdcIjogXCJDXCIsXG4gICAgICAgIFwiXFx4QzhcIjogXCJFXCIsXG4gICAgICAgIFwiXFx4QzlcIjogXCJFXCIsXG4gICAgICAgIFwiXFx4Q0FcIjogXCJFXCIsXG4gICAgICAgIFwiXFx4Q0JcIjogXCJFXCIsXG4gICAgICAgIFwiXFx4Q0NcIjogXCJJXCIsXG4gICAgICAgIFwiXFx4Q0RcIjogXCJJXCIsXG4gICAgICAgIFwiXFx4Q0VcIjogXCJJXCIsXG4gICAgICAgIFwiXFx4Q0ZcIjogXCJJXCIsXG4gICAgICAgIFwiXFx4RDBcIjogXCJEXCIsXG4gICAgICAgIFwiXFx4RDFcIjogXCJOXCIsXG4gICAgICAgIFwiXFx4RDJcIjogXCJPXCIsXG4gICAgICAgIFwiXFx4RDNcIjogXCJPXCIsXG4gICAgICAgIFwiXFx4RDRcIjogXCJPXCIsXG4gICAgICAgIFwiXFx4RDVcIjogXCJPXCIsXG4gICAgICAgIFwiXFx4RDZcIjogXCJPZVwiLFxuICAgICAgICBcIlxcdTAxNTBcIjogXCJPXCIsXG4gICAgICAgIFwiXFx4RDhcIjogXCJPXCIsXG4gICAgICAgIFwiXFx4RDlcIjogXCJVXCIsXG4gICAgICAgIFwiXFx4REFcIjogXCJVXCIsXG4gICAgICAgIFwiXFx4REJcIjogXCJVXCIsXG4gICAgICAgIFwiXFx4RENcIjogXCJVZVwiLFxuICAgICAgICBcIlxcdTAxNzBcIjogXCJVXCIsXG4gICAgICAgIFwiXFx4RERcIjogXCJZXCIsXG4gICAgICAgIFwiXFx4REVcIjogXCJUSFwiLFxuICAgICAgICBcIlxceERGXCI6IFwic3NcIixcbiAgICAgICAgXCJcXHhFMFwiOiBcImFcIixcbiAgICAgICAgXCJcXHhFMVwiOiBcImFcIixcbiAgICAgICAgXCJcXHhFMlwiOiBcImFcIixcbiAgICAgICAgXCJcXHhFM1wiOiBcImFcIixcbiAgICAgICAgXCJcXHhFNFwiOiBcImFlXCIsXG4gICAgICAgIFwiXFx4RTVcIjogXCJhXCIsXG4gICAgICAgIFwiXFx4RTZcIjogXCJhZVwiLFxuICAgICAgICBcIlxceEU3XCI6IFwiY1wiLFxuICAgICAgICBcIlxceEU4XCI6IFwiZVwiLFxuICAgICAgICBcIlxceEU5XCI6IFwiZVwiLFxuICAgICAgICBcIlxceEVBXCI6IFwiZVwiLFxuICAgICAgICBcIlxceEVCXCI6IFwiZVwiLFxuICAgICAgICBcIlxceEVDXCI6IFwiaVwiLFxuICAgICAgICBcIlxceEVEXCI6IFwiaVwiLFxuICAgICAgICBcIlxceEVFXCI6IFwiaVwiLFxuICAgICAgICBcIlxceEVGXCI6IFwiaVwiLFxuICAgICAgICBcIlxceEYwXCI6IFwiZFwiLFxuICAgICAgICBcIlxceEYxXCI6IFwiblwiLFxuICAgICAgICBcIlxceEYyXCI6IFwib1wiLFxuICAgICAgICBcIlxceEYzXCI6IFwib1wiLFxuICAgICAgICBcIlxceEY0XCI6IFwib1wiLFxuICAgICAgICBcIlxceEY1XCI6IFwib1wiLFxuICAgICAgICBcIlxceEY2XCI6IFwib2VcIixcbiAgICAgICAgXCJcXHUwMTUxXCI6IFwib1wiLFxuICAgICAgICBcIlxceEY4XCI6IFwib1wiLFxuICAgICAgICBcIlxceEY5XCI6IFwidVwiLFxuICAgICAgICBcIlxceEZBXCI6IFwidVwiLFxuICAgICAgICBcIlxceEZCXCI6IFwidVwiLFxuICAgICAgICBcIlxceEZDXCI6IFwidWVcIixcbiAgICAgICAgXCJcXHUwMTcxXCI6IFwidVwiLFxuICAgICAgICBcIlxceEZEXCI6IFwieVwiLFxuICAgICAgICBcIlxceEZFXCI6IFwidGhcIixcbiAgICAgICAgXCJcXHhGRlwiOiBcInlcIixcbiAgICAgICAgXCJcXHUxRTlFXCI6IFwiU1NcIixcbiAgICAgICAgLy8gbGFuZ3VhZ2Ugc3BlY2lmaWNcbiAgICAgICAgLy8gQXJhYmljXG4gICAgICAgIFwiXFx1MDYyN1wiOiBcImFcIixcbiAgICAgICAgXCJcXHUwNjIzXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTA2MjVcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDYyMlwiOiBcImFhXCIsXG4gICAgICAgIFwiXFx1MDYyNFwiOiBcInVcIixcbiAgICAgICAgXCJcXHUwNjI2XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTA2MjFcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDYyOFwiOiBcImJcIixcbiAgICAgICAgXCJcXHUwNjJBXCI6IFwidFwiLFxuICAgICAgICBcIlxcdTA2MkJcIjogXCJ0aFwiLFxuICAgICAgICBcIlxcdTA2MkNcIjogXCJqXCIsXG4gICAgICAgIFwiXFx1MDYyRFwiOiBcImhcIixcbiAgICAgICAgXCJcXHUwNjJFXCI6IFwia2hcIixcbiAgICAgICAgXCJcXHUwNjJGXCI6IFwiZFwiLFxuICAgICAgICBcIlxcdTA2MzBcIjogXCJ0aFwiLFxuICAgICAgICBcIlxcdTA2MzFcIjogXCJyXCIsXG4gICAgICAgIFwiXFx1MDYzMlwiOiBcInpcIixcbiAgICAgICAgXCJcXHUwNjMzXCI6IFwic1wiLFxuICAgICAgICBcIlxcdTA2MzRcIjogXCJzaFwiLFxuICAgICAgICBcIlxcdTA2MzVcIjogXCJzXCIsXG4gICAgICAgIFwiXFx1MDYzNlwiOiBcImRoXCIsXG4gICAgICAgIFwiXFx1MDYzN1wiOiBcInRcIixcbiAgICAgICAgXCJcXHUwNjM4XCI6IFwielwiLFxuICAgICAgICBcIlxcdTA2MzlcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDYzQVwiOiBcImdoXCIsXG4gICAgICAgIFwiXFx1MDY0MVwiOiBcImZcIixcbiAgICAgICAgXCJcXHUwNjQyXCI6IFwicVwiLFxuICAgICAgICBcIlxcdTA2NDNcIjogXCJrXCIsXG4gICAgICAgIFwiXFx1MDY0NFwiOiBcImxcIixcbiAgICAgICAgXCJcXHUwNjQ1XCI6IFwibVwiLFxuICAgICAgICBcIlxcdTA2NDZcIjogXCJuXCIsXG4gICAgICAgIFwiXFx1MDY0N1wiOiBcImhcIixcbiAgICAgICAgXCJcXHUwNjQ4XCI6IFwid1wiLFxuICAgICAgICBcIlxcdTA2NEFcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MDY0OVwiOiBcImFcIixcbiAgICAgICAgXCJcXHUwNjI5XCI6IFwiaFwiLFxuICAgICAgICBcIlxcdUZFRkJcIjogXCJsYVwiLFxuICAgICAgICBcIlxcdUZFRjdcIjogXCJsYWFcIixcbiAgICAgICAgXCJcXHVGRUY5XCI6IFwibGFpXCIsXG4gICAgICAgIFwiXFx1RkVGNVwiOiBcImxhYVwiLFxuICAgICAgICAvLyBQZXJzaWFuIGFkZGl0aW9uYWwgY2hhcmFjdGVycyB0aGFuIEFyYWJpY1xuICAgICAgICBcIlxcdTA2QUZcIjogXCJnXCIsXG4gICAgICAgIFwiXFx1MDY4NlwiOiBcImNoXCIsXG4gICAgICAgIFwiXFx1MDY3RVwiOiBcInBcIixcbiAgICAgICAgXCJcXHUwNjk4XCI6IFwiemhcIixcbiAgICAgICAgXCJcXHUwNkE5XCI6IFwia1wiLFxuICAgICAgICBcIlxcdTA2Q0NcIjogXCJ5XCIsXG4gICAgICAgIC8vIEFyYWJpYyBkaWFjdHJpY3NcbiAgICAgICAgXCJcXHUwNjRFXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTA2NEJcIjogXCJhblwiLFxuICAgICAgICBcIlxcdTA2NTBcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MDY0RFwiOiBcImVuXCIsXG4gICAgICAgIFwiXFx1MDY0RlwiOiBcInVcIixcbiAgICAgICAgXCJcXHUwNjRDXCI6IFwib25cIixcbiAgICAgICAgXCJcXHUwNjUyXCI6IFwiXCIsXG4gICAgICAgIC8vIEFyYWJpYyBudW1iZXJzXG4gICAgICAgIFwiXFx1MDY2MFwiOiBcIjBcIixcbiAgICAgICAgXCJcXHUwNjYxXCI6IFwiMVwiLFxuICAgICAgICBcIlxcdTA2NjJcIjogXCIyXCIsXG4gICAgICAgIFwiXFx1MDY2M1wiOiBcIjNcIixcbiAgICAgICAgXCJcXHUwNjY0XCI6IFwiNFwiLFxuICAgICAgICBcIlxcdTA2NjVcIjogXCI1XCIsXG4gICAgICAgIFwiXFx1MDY2NlwiOiBcIjZcIixcbiAgICAgICAgXCJcXHUwNjY3XCI6IFwiN1wiLFxuICAgICAgICBcIlxcdTA2NjhcIjogXCI4XCIsXG4gICAgICAgIFwiXFx1MDY2OVwiOiBcIjlcIixcbiAgICAgICAgLy8gUGVyc2lhbiBudW1iZXJzXG4gICAgICAgIFwiXFx1MDZGMFwiOiBcIjBcIixcbiAgICAgICAgXCJcXHUwNkYxXCI6IFwiMVwiLFxuICAgICAgICBcIlxcdTA2RjJcIjogXCIyXCIsXG4gICAgICAgIFwiXFx1MDZGM1wiOiBcIjNcIixcbiAgICAgICAgXCJcXHUwNkY0XCI6IFwiNFwiLFxuICAgICAgICBcIlxcdTA2RjVcIjogXCI1XCIsXG4gICAgICAgIFwiXFx1MDZGNlwiOiBcIjZcIixcbiAgICAgICAgXCJcXHUwNkY3XCI6IFwiN1wiLFxuICAgICAgICBcIlxcdTA2RjhcIjogXCI4XCIsXG4gICAgICAgIFwiXFx1MDZGOVwiOiBcIjlcIixcbiAgICAgICAgLy8gQnVybWVzZSBjb25zb25hbnRzXG4gICAgICAgIFwiXFx1MTAwMFwiOiBcImtcIixcbiAgICAgICAgXCJcXHUxMDAxXCI6IFwia2hcIixcbiAgICAgICAgXCJcXHUxMDAyXCI6IFwiZ1wiLFxuICAgICAgICBcIlxcdTEwMDNcIjogXCJnYVwiLFxuICAgICAgICBcIlxcdTEwMDRcIjogXCJuZ1wiLFxuICAgICAgICBcIlxcdTEwMDVcIjogXCJzXCIsXG4gICAgICAgIFwiXFx1MTAwNlwiOiBcInNhXCIsXG4gICAgICAgIFwiXFx1MTAwN1wiOiBcInpcIixcbiAgICAgICAgXCJcXHUxMDA1XFx1MTAzQlwiOiBcInphXCIsXG4gICAgICAgIFwiXFx1MTAwQVwiOiBcIm55XCIsXG4gICAgICAgIFwiXFx1MTAwQlwiOiBcInRcIixcbiAgICAgICAgXCJcXHUxMDBDXCI6IFwidGFcIixcbiAgICAgICAgXCJcXHUxMDBEXCI6IFwiZFwiLFxuICAgICAgICBcIlxcdTEwMEVcIjogXCJkYVwiLFxuICAgICAgICBcIlxcdTEwMEZcIjogXCJuYVwiLFxuICAgICAgICBcIlxcdTEwMTBcIjogXCJ0XCIsXG4gICAgICAgIFwiXFx1MTAxMVwiOiBcInRhXCIsXG4gICAgICAgIFwiXFx1MTAxMlwiOiBcImRcIixcbiAgICAgICAgXCJcXHUxMDEzXCI6IFwiZGFcIixcbiAgICAgICAgXCJcXHUxMDE0XCI6IFwiblwiLFxuICAgICAgICBcIlxcdTEwMTVcIjogXCJwXCIsXG4gICAgICAgIFwiXFx1MTAxNlwiOiBcInBhXCIsXG4gICAgICAgIFwiXFx1MTAxN1wiOiBcImJcIixcbiAgICAgICAgXCJcXHUxMDE4XCI6IFwiYmFcIixcbiAgICAgICAgXCJcXHUxMDE5XCI6IFwibVwiLFxuICAgICAgICBcIlxcdTEwMUFcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MTAxQlwiOiBcInlhXCIsXG4gICAgICAgIFwiXFx1MTAxQ1wiOiBcImxcIixcbiAgICAgICAgXCJcXHUxMDFEXCI6IFwid1wiLFxuICAgICAgICBcIlxcdTEwMUVcIjogXCJ0aFwiLFxuICAgICAgICBcIlxcdTEwMUZcIjogXCJoXCIsXG4gICAgICAgIFwiXFx1MTAyMFwiOiBcImxhXCIsXG4gICAgICAgIFwiXFx1MTAyMVwiOiBcImFcIixcbiAgICAgICAgLy8gY29uc29uYW50IGNoYXJhY3RlciBjb21ib3NcbiAgICAgICAgXCJcXHUxMDNDXCI6IFwieVwiLFxuICAgICAgICBcIlxcdTEwM0JcIjogXCJ5YVwiLFxuICAgICAgICBcIlxcdTEwM0RcIjogXCJ3XCIsXG4gICAgICAgIFwiXFx1MTAzQ1xcdTEwM0RcIjogXCJ5d1wiLFxuICAgICAgICBcIlxcdTEwM0JcXHUxMDNEXCI6IFwieXdhXCIsXG4gICAgICAgIFwiXFx1MTAzRVwiOiBcImhcIixcbiAgICAgICAgLy8gaW5kZXBlbmRlbnQgdm93ZWxzXG4gICAgICAgIFwiXFx1MTAyN1wiOiBcImVcIixcbiAgICAgICAgXCJcXHUxMDRGXCI6IFwiLWVcIixcbiAgICAgICAgXCJcXHUxMDIzXCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTEwMjRcIjogXCItaVwiLFxuICAgICAgICBcIlxcdTEwMDlcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MTAyNlwiOiBcIi11XCIsXG4gICAgICAgIFwiXFx1MTAyOVwiOiBcImF3XCIsXG4gICAgICAgIFwiXFx1MTAxRVxcdTEwM0NcXHUxMDMxXFx1MTAyQ1wiOiBcImF3XCIsXG4gICAgICAgIFwiXFx1MTAyQVwiOiBcImF3XCIsXG4gICAgICAgIC8vIG51bWJlcnNcbiAgICAgICAgXCJcXHUxMDQwXCI6IFwiMFwiLFxuICAgICAgICBcIlxcdTEwNDFcIjogXCIxXCIsXG4gICAgICAgIFwiXFx1MTA0MlwiOiBcIjJcIixcbiAgICAgICAgXCJcXHUxMDQzXCI6IFwiM1wiLFxuICAgICAgICBcIlxcdTEwNDRcIjogXCI0XCIsXG4gICAgICAgIFwiXFx1MTA0NVwiOiBcIjVcIixcbiAgICAgICAgXCJcXHUxMDQ2XCI6IFwiNlwiLFxuICAgICAgICBcIlxcdTEwNDdcIjogXCI3XCIsXG4gICAgICAgIFwiXFx1MTA0OFwiOiBcIjhcIixcbiAgICAgICAgXCJcXHUxMDQ5XCI6IFwiOVwiLFxuICAgICAgICAvLyB2aXJhbWEgYW5kIHRvbmUgbWFya3Mgd2hpY2ggYXJlIHNpbGVudCBpbiB0cmFuc2xpdGVyYXRpb25cbiAgICAgICAgXCJcXHUxMDM5XCI6IFwiXCIsXG4gICAgICAgIFwiXFx1MTAzN1wiOiBcIlwiLFxuICAgICAgICBcIlxcdTEwMzhcIjogXCJcIixcbiAgICAgICAgLy8gQ3plY2hcbiAgICAgICAgXCJcXHUwMTBEXCI6IFwiY1wiLFxuICAgICAgICBcIlxcdTAxMEZcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MDExQlwiOiBcImVcIixcbiAgICAgICAgXCJcXHUwMTQ4XCI6IFwiblwiLFxuICAgICAgICBcIlxcdTAxNTlcIjogXCJyXCIsXG4gICAgICAgIFwiXFx1MDE2MVwiOiBcInNcIixcbiAgICAgICAgXCJcXHUwMTY1XCI6IFwidFwiLFxuICAgICAgICBcIlxcdTAxNkZcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MDE3RVwiOiBcInpcIixcbiAgICAgICAgXCJcXHUwMTBDXCI6IFwiQ1wiLFxuICAgICAgICBcIlxcdTAxMEVcIjogXCJEXCIsXG4gICAgICAgIFwiXFx1MDExQVwiOiBcIkVcIixcbiAgICAgICAgXCJcXHUwMTQ3XCI6IFwiTlwiLFxuICAgICAgICBcIlxcdTAxNThcIjogXCJSXCIsXG4gICAgICAgIFwiXFx1MDE2MFwiOiBcIlNcIixcbiAgICAgICAgXCJcXHUwMTY0XCI6IFwiVFwiLFxuICAgICAgICBcIlxcdTAxNkVcIjogXCJVXCIsXG4gICAgICAgIFwiXFx1MDE3RFwiOiBcIlpcIixcbiAgICAgICAgLy8gRGhpdmVoaVxuICAgICAgICBcIlxcdTA3ODBcIjogXCJoXCIsXG4gICAgICAgIFwiXFx1MDc4MVwiOiBcInNoXCIsXG4gICAgICAgIFwiXFx1MDc4MlwiOiBcIm5cIixcbiAgICAgICAgXCJcXHUwNzgzXCI6IFwiclwiLFxuICAgICAgICBcIlxcdTA3ODRcIjogXCJiXCIsXG4gICAgICAgIFwiXFx1MDc4NVwiOiBcImxoXCIsXG4gICAgICAgIFwiXFx1MDc4NlwiOiBcImtcIixcbiAgICAgICAgXCJcXHUwNzg3XCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTA3ODhcIjogXCJ2XCIsXG4gICAgICAgIFwiXFx1MDc4OVwiOiBcIm1cIixcbiAgICAgICAgXCJcXHUwNzhBXCI6IFwiZlwiLFxuICAgICAgICBcIlxcdTA3OEJcIjogXCJkaFwiLFxuICAgICAgICBcIlxcdTA3OENcIjogXCJ0aFwiLFxuICAgICAgICBcIlxcdTA3OERcIjogXCJsXCIsXG4gICAgICAgIFwiXFx1MDc4RVwiOiBcImdcIixcbiAgICAgICAgXCJcXHUwNzhGXCI6IFwiZ25cIixcbiAgICAgICAgXCJcXHUwNzkwXCI6IFwic1wiLFxuICAgICAgICBcIlxcdTA3OTFcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MDc5MlwiOiBcInpcIixcbiAgICAgICAgXCJcXHUwNzkzXCI6IFwidFwiLFxuICAgICAgICBcIlxcdTA3OTRcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MDc5NVwiOiBcInBcIixcbiAgICAgICAgXCJcXHUwNzk2XCI6IFwialwiLFxuICAgICAgICBcIlxcdTA3OTdcIjogXCJjaFwiLFxuICAgICAgICBcIlxcdTA3OThcIjogXCJ0dFwiLFxuICAgICAgICBcIlxcdTA3OTlcIjogXCJoaFwiLFxuICAgICAgICBcIlxcdTA3OUFcIjogXCJraFwiLFxuICAgICAgICBcIlxcdTA3OUJcIjogXCJ0aFwiLFxuICAgICAgICBcIlxcdTA3OUNcIjogXCJ6XCIsXG4gICAgICAgIFwiXFx1MDc5RFwiOiBcInNoXCIsXG4gICAgICAgIFwiXFx1MDc5RVwiOiBcInNcIixcbiAgICAgICAgXCJcXHUwNzlGXCI6IFwiZFwiLFxuICAgICAgICBcIlxcdTA3QTBcIjogXCJ0XCIsXG4gICAgICAgIFwiXFx1MDdBMVwiOiBcInpcIixcbiAgICAgICAgXCJcXHUwN0EyXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTA3QTNcIjogXCJnaFwiLFxuICAgICAgICBcIlxcdTA3QTRcIjogXCJxXCIsXG4gICAgICAgIFwiXFx1MDdBNVwiOiBcIndcIixcbiAgICAgICAgXCJcXHUwN0E2XCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTA3QTdcIjogXCJhYVwiLFxuICAgICAgICBcIlxcdTA3QThcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDdBOVwiOiBcImVlXCIsXG4gICAgICAgIFwiXFx1MDdBQVwiOiBcInVcIixcbiAgICAgICAgXCJcXHUwN0FCXCI6IFwib29cIixcbiAgICAgICAgXCJcXHUwN0FDXCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTA3QURcIjogXCJleVwiLFxuICAgICAgICBcIlxcdTA3QUVcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MDdBRlwiOiBcIm9hXCIsXG4gICAgICAgIFwiXFx1MDdCMFwiOiBcIlwiLFxuICAgICAgICAvLyBHZW9yZ2lhbiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Sb21hbml6YXRpb25fb2ZfR2VvcmdpYW5cbiAgICAgICAgLy8gTmF0aW9uYWwgc3lzdGVtICgyMDAyKVxuICAgICAgICBcIlxcdTEwRDBcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MTBEMVwiOiBcImJcIixcbiAgICAgICAgXCJcXHUxMEQyXCI6IFwiZ1wiLFxuICAgICAgICBcIlxcdTEwRDNcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MTBENFwiOiBcImVcIixcbiAgICAgICAgXCJcXHUxMEQ1XCI6IFwidlwiLFxuICAgICAgICBcIlxcdTEwRDZcIjogXCJ6XCIsXG4gICAgICAgIFwiXFx1MTBEN1wiOiBcInRcIixcbiAgICAgICAgXCJcXHUxMEQ4XCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTEwRDlcIjogXCJrXCIsXG4gICAgICAgIFwiXFx1MTBEQVwiOiBcImxcIixcbiAgICAgICAgXCJcXHUxMERCXCI6IFwibVwiLFxuICAgICAgICBcIlxcdTEwRENcIjogXCJuXCIsXG4gICAgICAgIFwiXFx1MTBERFwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxMERFXCI6IFwicFwiLFxuICAgICAgICBcIlxcdTEwREZcIjogXCJ6aFwiLFxuICAgICAgICBcIlxcdTEwRTBcIjogXCJyXCIsXG4gICAgICAgIFwiXFx1MTBFMVwiOiBcInNcIixcbiAgICAgICAgXCJcXHUxMEUyXCI6IFwidFwiLFxuICAgICAgICBcIlxcdTEwRTNcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MTBFNFwiOiBcInBcIixcbiAgICAgICAgXCJcXHUxMEU1XCI6IFwia1wiLFxuICAgICAgICBcIlxcdTEwRTZcIjogXCJnaFwiLFxuICAgICAgICBcIlxcdTEwRTdcIjogXCJxXCIsXG4gICAgICAgIFwiXFx1MTBFOFwiOiBcInNoXCIsXG4gICAgICAgIFwiXFx1MTBFOVwiOiBcImNoXCIsXG4gICAgICAgIFwiXFx1MTBFQVwiOiBcInRzXCIsXG4gICAgICAgIFwiXFx1MTBFQlwiOiBcImR6XCIsXG4gICAgICAgIFwiXFx1MTBFQ1wiOiBcInRzXCIsXG4gICAgICAgIFwiXFx1MTBFRFwiOiBcImNoXCIsXG4gICAgICAgIFwiXFx1MTBFRVwiOiBcImtoXCIsXG4gICAgICAgIFwiXFx1MTBFRlwiOiBcImpcIixcbiAgICAgICAgXCJcXHUxMEYwXCI6IFwiaFwiLFxuICAgICAgICAvLyBHcmVla1xuICAgICAgICBcIlxcdTAzQjFcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDNCMlwiOiBcInZcIixcbiAgICAgICAgXCJcXHUwM0IzXCI6IFwiZ1wiLFxuICAgICAgICBcIlxcdTAzQjRcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MDNCNVwiOiBcImVcIixcbiAgICAgICAgXCJcXHUwM0I2XCI6IFwielwiLFxuICAgICAgICBcIlxcdTAzQjdcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDNCOFwiOiBcInRoXCIsXG4gICAgICAgIFwiXFx1MDNCOVwiOiBcImlcIixcbiAgICAgICAgXCJcXHUwM0JBXCI6IFwia1wiLFxuICAgICAgICBcIlxcdTAzQkJcIjogXCJsXCIsXG4gICAgICAgIFwiXFx1MDNCQ1wiOiBcIm1cIixcbiAgICAgICAgXCJcXHUwM0JEXCI6IFwiblwiLFxuICAgICAgICBcIlxcdTAzQkVcIjogXCJrc1wiLFxuICAgICAgICBcIlxcdTAzQkZcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MDNDMFwiOiBcInBcIixcbiAgICAgICAgXCJcXHUwM0MxXCI6IFwiclwiLFxuICAgICAgICBcIlxcdTAzQzNcIjogXCJzXCIsXG4gICAgICAgIFwiXFx1MDNDNFwiOiBcInRcIixcbiAgICAgICAgXCJcXHUwM0M1XCI6IFwieVwiLFxuICAgICAgICBcIlxcdTAzQzZcIjogXCJmXCIsXG4gICAgICAgIFwiXFx1MDNDN1wiOiBcInhcIixcbiAgICAgICAgXCJcXHUwM0M4XCI6IFwicHNcIixcbiAgICAgICAgXCJcXHUwM0M5XCI6IFwib1wiLFxuICAgICAgICBcIlxcdTAzQUNcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDNBRFwiOiBcImVcIixcbiAgICAgICAgXCJcXHUwM0FGXCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTAzQ0NcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MDNDRFwiOiBcInlcIixcbiAgICAgICAgXCJcXHUwM0FFXCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTAzQ0VcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MDNDMlwiOiBcInNcIixcbiAgICAgICAgXCJcXHUwM0NBXCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTAzQjBcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MDNDQlwiOiBcInlcIixcbiAgICAgICAgXCJcXHUwMzkwXCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTAzOTFcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MDM5MlwiOiBcIkJcIixcbiAgICAgICAgXCJcXHUwMzkzXCI6IFwiR1wiLFxuICAgICAgICBcIlxcdTAzOTRcIjogXCJEXCIsXG4gICAgICAgIFwiXFx1MDM5NVwiOiBcIkVcIixcbiAgICAgICAgXCJcXHUwMzk2XCI6IFwiWlwiLFxuICAgICAgICBcIlxcdTAzOTdcIjogXCJJXCIsXG4gICAgICAgIFwiXFx1MDM5OFwiOiBcIlRIXCIsXG4gICAgICAgIFwiXFx1MDM5OVwiOiBcIklcIixcbiAgICAgICAgXCJcXHUwMzlBXCI6IFwiS1wiLFxuICAgICAgICBcIlxcdTAzOUJcIjogXCJMXCIsXG4gICAgICAgIFwiXFx1MDM5Q1wiOiBcIk1cIixcbiAgICAgICAgXCJcXHUwMzlEXCI6IFwiTlwiLFxuICAgICAgICBcIlxcdTAzOUVcIjogXCJLU1wiLFxuICAgICAgICBcIlxcdTAzOUZcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MDNBMFwiOiBcIlBcIixcbiAgICAgICAgXCJcXHUwM0ExXCI6IFwiUlwiLFxuICAgICAgICBcIlxcdTAzQTNcIjogXCJTXCIsXG4gICAgICAgIFwiXFx1MDNBNFwiOiBcIlRcIixcbiAgICAgICAgXCJcXHUwM0E1XCI6IFwiWVwiLFxuICAgICAgICBcIlxcdTAzQTZcIjogXCJGXCIsXG4gICAgICAgIFwiXFx1MDNBN1wiOiBcIlhcIixcbiAgICAgICAgXCJcXHUwM0E4XCI6IFwiUFNcIixcbiAgICAgICAgXCJcXHUwM0E5XCI6IFwiT1wiLFxuICAgICAgICBcIlxcdTAzODZcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MDM4OFwiOiBcIkVcIixcbiAgICAgICAgXCJcXHUwMzhBXCI6IFwiSVwiLFxuICAgICAgICBcIlxcdTAzOENcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MDM4RVwiOiBcIllcIixcbiAgICAgICAgXCJcXHUwMzg5XCI6IFwiSVwiLFxuICAgICAgICBcIlxcdTAzOEZcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MDNBQVwiOiBcIklcIixcbiAgICAgICAgXCJcXHUwM0FCXCI6IFwiWVwiLFxuICAgICAgICAvLyBMYXR2aWFuXG4gICAgICAgIFwiXFx1MDEwMVwiOiBcImFcIixcbiAgICAgICAgLy8gJ8SNJzogJ2MnLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgXCJcXHUwMTEzXCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTAxMjNcIjogXCJnXCIsXG4gICAgICAgIFwiXFx1MDEyQlwiOiBcImlcIixcbiAgICAgICAgXCJcXHUwMTM3XCI6IFwia1wiLFxuICAgICAgICBcIlxcdTAxM0NcIjogXCJsXCIsXG4gICAgICAgIFwiXFx1MDE0NlwiOiBcIm5cIixcbiAgICAgICAgLy8gJ8WhJzogJ3MnLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgXCJcXHUwMTZCXCI6IFwidVwiLFxuICAgICAgICAvLyAnxb4nOiAneicsIC8vIGR1cGxpY2F0ZVxuICAgICAgICBcIlxcdTAxMDBcIjogXCJBXCIsXG4gICAgICAgIC8vICfEjCc6ICdDJywgLy8gZHVwbGljYXRlXG4gICAgICAgIFwiXFx1MDExMlwiOiBcIkVcIixcbiAgICAgICAgXCJcXHUwMTIyXCI6IFwiR1wiLFxuICAgICAgICBcIlxcdTAxMkFcIjogXCJJXCIsXG4gICAgICAgIFwiXFx1MDEzNlwiOiBcImtcIixcbiAgICAgICAgXCJcXHUwMTNCXCI6IFwiTFwiLFxuICAgICAgICBcIlxcdTAxNDVcIjogXCJOXCIsXG4gICAgICAgIC8vICfFoCc6ICdTJywgLy8gZHVwbGljYXRlXG4gICAgICAgIFwiXFx1MDE2QVwiOiBcIlVcIixcbiAgICAgICAgLy8gJ8W9JzogJ1onLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgLy8gTWFjZWRvbmlhblxuICAgICAgICBcIlxcdTA0MENcIjogXCJLalwiLFxuICAgICAgICBcIlxcdTA0NUNcIjogXCJralwiLFxuICAgICAgICBcIlxcdTA0MDlcIjogXCJMalwiLFxuICAgICAgICBcIlxcdTA0NTlcIjogXCJsalwiLFxuICAgICAgICBcIlxcdTA0MEFcIjogXCJOalwiLFxuICAgICAgICBcIlxcdTA0NUFcIjogXCJualwiLFxuICAgICAgICBcIlxcdTA0MjJcXHUwNDQxXCI6IFwiVHNcIixcbiAgICAgICAgXCJcXHUwNDQyXFx1MDQ0MVwiOiBcInRzXCIsXG4gICAgICAgIC8vIFBvbGlzaFxuICAgICAgICBcIlxcdTAxMDVcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDEwN1wiOiBcImNcIixcbiAgICAgICAgXCJcXHUwMTE5XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTAxNDJcIjogXCJsXCIsXG4gICAgICAgIFwiXFx1MDE0NFwiOiBcIm5cIixcbiAgICAgICAgLy8gJ8OzJzogJ28nLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgXCJcXHUwMTVCXCI6IFwic1wiLFxuICAgICAgICBcIlxcdTAxN0FcIjogXCJ6XCIsXG4gICAgICAgIFwiXFx1MDE3Q1wiOiBcInpcIixcbiAgICAgICAgXCJcXHUwMTA0XCI6IFwiQVwiLFxuICAgICAgICBcIlxcdTAxMDZcIjogXCJDXCIsXG4gICAgICAgIFwiXFx1MDExOFwiOiBcIkVcIixcbiAgICAgICAgXCJcXHUwMTQxXCI6IFwiTFwiLFxuICAgICAgICBcIlxcdTAxNDNcIjogXCJOXCIsXG4gICAgICAgIFwiXFx1MDE1QVwiOiBcIlNcIixcbiAgICAgICAgXCJcXHUwMTc5XCI6IFwiWlwiLFxuICAgICAgICBcIlxcdTAxN0JcIjogXCJaXCIsXG4gICAgICAgIC8vIFVrcmFuaWFuXG4gICAgICAgIFwiXFx1MDQwNFwiOiBcIlllXCIsXG4gICAgICAgIFwiXFx1MDQwNlwiOiBcIklcIixcbiAgICAgICAgXCJcXHUwNDA3XCI6IFwiWWlcIixcbiAgICAgICAgXCJcXHUwNDkwXCI6IFwiR1wiLFxuICAgICAgICBcIlxcdTA0NTRcIjogXCJ5ZVwiLFxuICAgICAgICBcIlxcdTA0NTZcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDQ1N1wiOiBcInlpXCIsXG4gICAgICAgIFwiXFx1MDQ5MVwiOiBcImdcIixcbiAgICAgICAgLy8gUm9tYW5pYW5cbiAgICAgICAgXCJcXHUwMTAzXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTAxMDJcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MDIxOVwiOiBcInNcIixcbiAgICAgICAgXCJcXHUwMjE4XCI6IFwiU1wiLFxuICAgICAgICAvLyAnxZ8nOiAncycsIC8vIGR1cGxpY2F0ZVxuICAgICAgICAvLyAnxZ4nOiAnUycsIC8vIGR1cGxpY2F0ZVxuICAgICAgICBcIlxcdTAyMUJcIjogXCJ0XCIsXG4gICAgICAgIFwiXFx1MDIxQVwiOiBcIlRcIixcbiAgICAgICAgXCJcXHUwMTYzXCI6IFwidFwiLFxuICAgICAgICBcIlxcdTAxNjJcIjogXCJUXCIsXG4gICAgICAgIC8vIFJ1c3NpYW4gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUm9tYW5pemF0aW9uX29mX1J1c3NpYW5cbiAgICAgICAgLy8gSUNBT1xuICAgICAgICBcIlxcdTA0MzBcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDQzMVwiOiBcImJcIixcbiAgICAgICAgXCJcXHUwNDMyXCI6IFwidlwiLFxuICAgICAgICBcIlxcdTA0MzNcIjogXCJnXCIsXG4gICAgICAgIFwiXFx1MDQzNFwiOiBcImRcIixcbiAgICAgICAgXCJcXHUwNDM1XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTA0NTFcIjogXCJ5b1wiLFxuICAgICAgICBcIlxcdTA0MzZcIjogXCJ6aFwiLFxuICAgICAgICBcIlxcdTA0MzdcIjogXCJ6XCIsXG4gICAgICAgIFwiXFx1MDQzOFwiOiBcImlcIixcbiAgICAgICAgXCJcXHUwNDM5XCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTA0M0FcIjogXCJrXCIsXG4gICAgICAgIFwiXFx1MDQzQlwiOiBcImxcIixcbiAgICAgICAgXCJcXHUwNDNDXCI6IFwibVwiLFxuICAgICAgICBcIlxcdTA0M0RcIjogXCJuXCIsXG4gICAgICAgIFwiXFx1MDQzRVwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUwNDNGXCI6IFwicFwiLFxuICAgICAgICBcIlxcdTA0NDBcIjogXCJyXCIsXG4gICAgICAgIFwiXFx1MDQ0MVwiOiBcInNcIixcbiAgICAgICAgXCJcXHUwNDQyXCI6IFwidFwiLFxuICAgICAgICBcIlxcdTA0NDNcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MDQ0NFwiOiBcImZcIixcbiAgICAgICAgXCJcXHUwNDQ1XCI6IFwia2hcIixcbiAgICAgICAgXCJcXHUwNDQ2XCI6IFwiY1wiLFxuICAgICAgICBcIlxcdTA0NDdcIjogXCJjaFwiLFxuICAgICAgICBcIlxcdTA0NDhcIjogXCJzaFwiLFxuICAgICAgICBcIlxcdTA0NDlcIjogXCJzaFwiLFxuICAgICAgICBcIlxcdTA0NEFcIjogXCJcIixcbiAgICAgICAgXCJcXHUwNDRCXCI6IFwieVwiLFxuICAgICAgICBcIlxcdTA0NENcIjogXCJcIixcbiAgICAgICAgXCJcXHUwNDREXCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTA0NEVcIjogXCJ5dVwiLFxuICAgICAgICBcIlxcdTA0NEZcIjogXCJ5YVwiLFxuICAgICAgICBcIlxcdTA0MTBcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MDQxMVwiOiBcIkJcIixcbiAgICAgICAgXCJcXHUwNDEyXCI6IFwiVlwiLFxuICAgICAgICBcIlxcdTA0MTNcIjogXCJHXCIsXG4gICAgICAgIFwiXFx1MDQxNFwiOiBcIkRcIixcbiAgICAgICAgXCJcXHUwNDE1XCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTA0MDFcIjogXCJZb1wiLFxuICAgICAgICBcIlxcdTA0MTZcIjogXCJaaFwiLFxuICAgICAgICBcIlxcdTA0MTdcIjogXCJaXCIsXG4gICAgICAgIFwiXFx1MDQxOFwiOiBcIklcIixcbiAgICAgICAgXCJcXHUwNDE5XCI6IFwiSVwiLFxuICAgICAgICBcIlxcdTA0MUFcIjogXCJLXCIsXG4gICAgICAgIFwiXFx1MDQxQlwiOiBcIkxcIixcbiAgICAgICAgXCJcXHUwNDFDXCI6IFwiTVwiLFxuICAgICAgICBcIlxcdTA0MURcIjogXCJOXCIsXG4gICAgICAgIFwiXFx1MDQxRVwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUwNDFGXCI6IFwiUFwiLFxuICAgICAgICBcIlxcdTA0MjBcIjogXCJSXCIsXG4gICAgICAgIFwiXFx1MDQyMVwiOiBcIlNcIixcbiAgICAgICAgXCJcXHUwNDIyXCI6IFwiVFwiLFxuICAgICAgICBcIlxcdTA0MjNcIjogXCJVXCIsXG4gICAgICAgIFwiXFx1MDQyNFwiOiBcIkZcIixcbiAgICAgICAgXCJcXHUwNDI1XCI6IFwiS2hcIixcbiAgICAgICAgXCJcXHUwNDI2XCI6IFwiQ1wiLFxuICAgICAgICBcIlxcdTA0MjdcIjogXCJDaFwiLFxuICAgICAgICBcIlxcdTA0MjhcIjogXCJTaFwiLFxuICAgICAgICBcIlxcdTA0MjlcIjogXCJTaFwiLFxuICAgICAgICBcIlxcdTA0MkFcIjogXCJcIixcbiAgICAgICAgXCJcXHUwNDJCXCI6IFwiWVwiLFxuICAgICAgICBcIlxcdTA0MkNcIjogXCJcIixcbiAgICAgICAgXCJcXHUwNDJEXCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTA0MkVcIjogXCJZdVwiLFxuICAgICAgICBcIlxcdTA0MkZcIjogXCJZYVwiLFxuICAgICAgICAvLyBTZXJiaWFuXG4gICAgICAgIFwiXFx1MDQ1MlwiOiBcImRqXCIsXG4gICAgICAgIFwiXFx1MDQ1OFwiOiBcImpcIixcbiAgICAgICAgLy8gJ9GZJzogJ2xqJywgIC8vIGR1cGxpY2F0ZVxuICAgICAgICAvLyAn0ZonOiAnbmonLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgXCJcXHUwNDVCXCI6IFwiY1wiLFxuICAgICAgICBcIlxcdTA0NUZcIjogXCJkelwiLFxuICAgICAgICBcIlxcdTA0MDJcIjogXCJEalwiLFxuICAgICAgICBcIlxcdTA0MDhcIjogXCJqXCIsXG4gICAgICAgIC8vICfQiSc6ICdMaicsIC8vIGR1cGxpY2F0ZVxuICAgICAgICAvLyAn0IonOiAnTmonLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgXCJcXHUwNDBCXCI6IFwiQ1wiLFxuICAgICAgICBcIlxcdTA0MEZcIjogXCJEelwiLFxuICAgICAgICAvLyBTbG92YWtcbiAgICAgICAgXCJcXHUwMTNFXCI6IFwibFwiLFxuICAgICAgICBcIlxcdTAxM0FcIjogXCJsXCIsXG4gICAgICAgIFwiXFx1MDE1NVwiOiBcInJcIixcbiAgICAgICAgXCJcXHUwMTNEXCI6IFwiTFwiLFxuICAgICAgICBcIlxcdTAxMzlcIjogXCJMXCIsXG4gICAgICAgIFwiXFx1MDE1NFwiOiBcIlJcIixcbiAgICAgICAgLy8gVHVya2lzaFxuICAgICAgICBcIlxcdTAxNUZcIjogXCJzXCIsXG4gICAgICAgIFwiXFx1MDE1RVwiOiBcIlNcIixcbiAgICAgICAgXCJcXHUwMTMxXCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTAxMzBcIjogXCJJXCIsXG4gICAgICAgIC8vICfDpyc6ICdjJywgLy8gZHVwbGljYXRlXG4gICAgICAgIC8vICfDhyc6ICdDJywgLy8gZHVwbGljYXRlXG4gICAgICAgIC8vICfDvCc6ICd1JywgLy8gZHVwbGljYXRlLCBzZWUgbGFuZ0NoYXJNYXBcbiAgICAgICAgLy8gJ8OcJzogJ1UnLCAvLyBkdXBsaWNhdGUsIHNlZSBsYW5nQ2hhck1hcFxuICAgICAgICAvLyAnw7YnOiAnbycsIC8vIGR1cGxpY2F0ZSwgc2VlIGxhbmdDaGFyTWFwXG4gICAgICAgIC8vICfDlic6ICdPJywgLy8gZHVwbGljYXRlLCBzZWUgbGFuZ0NoYXJNYXBcbiAgICAgICAgXCJcXHUwMTFGXCI6IFwiZ1wiLFxuICAgICAgICBcIlxcdTAxMUVcIjogXCJHXCIsXG4gICAgICAgIC8vIFZpZXRuYW1lc2VcbiAgICAgICAgXCJcXHUxRUEzXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTFFQTJcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MUVCM1wiOiBcImFcIixcbiAgICAgICAgXCJcXHUxRUIyXCI6IFwiQVwiLFxuICAgICAgICBcIlxcdTFFQTlcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MUVBOFwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUwMTExXCI6IFwiZFwiLFxuICAgICAgICBcIlxcdTAxMTBcIjogXCJEXCIsXG4gICAgICAgIFwiXFx1MUVCOVwiOiBcImVcIixcbiAgICAgICAgXCJcXHUxRUI4XCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTFFQkRcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MUVCQ1wiOiBcIkVcIixcbiAgICAgICAgXCJcXHUxRUJCXCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTFFQkFcIjogXCJFXCIsXG4gICAgICAgIFwiXFx1MUVCRlwiOiBcImVcIixcbiAgICAgICAgXCJcXHUxRUJFXCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTFFQzFcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MUVDMFwiOiBcIkVcIixcbiAgICAgICAgXCJcXHUxRUM3XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTFFQzZcIjogXCJFXCIsXG4gICAgICAgIFwiXFx1MUVDNVwiOiBcImVcIixcbiAgICAgICAgXCJcXHUxRUM0XCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTFFQzNcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MUVDMlwiOiBcIkVcIixcbiAgICAgICAgXCJcXHUxRUNGXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFQ0RcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MUVDQ1wiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxRUQxXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFRDBcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MUVEM1wiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxRUQyXCI6IFwiT1wiLFxuICAgICAgICBcIlxcdTFFRDVcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MUVENFwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUxRUQ5XCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFRDhcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MUVEN1wiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxRUQ2XCI6IFwiT1wiLFxuICAgICAgICBcIlxcdTAxQTFcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MDFBMFwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUxRURCXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFREFcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MUVERFwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxRURDXCI6IFwiT1wiLFxuICAgICAgICBcIlxcdTFFRTNcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MUVFMlwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUxRUUxXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFRTBcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MUVERVwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxRURGXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFQ0JcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MUVDQVwiOiBcIklcIixcbiAgICAgICAgXCJcXHUwMTI5XCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTAxMjhcIjogXCJJXCIsXG4gICAgICAgIFwiXFx1MUVDOVwiOiBcImlcIixcbiAgICAgICAgXCJcXHUxRUM4XCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTFFRTdcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MUVFNlwiOiBcIlVcIixcbiAgICAgICAgXCJcXHUxRUU1XCI6IFwidVwiLFxuICAgICAgICBcIlxcdTFFRTRcIjogXCJVXCIsXG4gICAgICAgIFwiXFx1MDE2OVwiOiBcInVcIixcbiAgICAgICAgXCJcXHUwMTY4XCI6IFwiVVwiLFxuICAgICAgICBcIlxcdTAxQjBcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MDFBRlwiOiBcIlVcIixcbiAgICAgICAgXCJcXHUxRUU5XCI6IFwidVwiLFxuICAgICAgICBcIlxcdTFFRThcIjogXCJVXCIsXG4gICAgICAgIFwiXFx1MUVFQlwiOiBcInVcIixcbiAgICAgICAgXCJcXHUxRUVBXCI6IFwiVVwiLFxuICAgICAgICBcIlxcdTFFRjFcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MUVGMFwiOiBcIlVcIixcbiAgICAgICAgXCJcXHUxRUVGXCI6IFwidVwiLFxuICAgICAgICBcIlxcdTFFRUVcIjogXCJVXCIsXG4gICAgICAgIFwiXFx1MUVFRFwiOiBcInVcIixcbiAgICAgICAgXCJcXHUxRUVDXCI6IFwiXFx1MDFCMFwiLFxuICAgICAgICBcIlxcdTFFRjdcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MUVGNlwiOiBcInlcIixcbiAgICAgICAgXCJcXHUxRUYzXCI6IFwieVwiLFxuICAgICAgICBcIlxcdTFFRjJcIjogXCJZXCIsXG4gICAgICAgIFwiXFx1MUVGNVwiOiBcInlcIixcbiAgICAgICAgXCJcXHUxRUY0XCI6IFwiWVwiLFxuICAgICAgICBcIlxcdTFFRjlcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MUVGOFwiOiBcIllcIixcbiAgICAgICAgXCJcXHUxRUExXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTFFQTBcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MUVBNVwiOiBcImFcIixcbiAgICAgICAgXCJcXHUxRUE0XCI6IFwiQVwiLFxuICAgICAgICBcIlxcdTFFQTdcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MUVBNlwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUxRUFEXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTFFQUNcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MUVBQlwiOiBcImFcIixcbiAgICAgICAgXCJcXHUxRUFBXCI6IFwiQVwiLFxuICAgICAgICAvLyAnxIMnOiAnYScsIC8vIGR1cGxpY2F0ZVxuICAgICAgICAvLyAnxIInOiAnQScsIC8vIGR1cGxpY2F0ZVxuICAgICAgICBcIlxcdTFFQUZcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MUVBRVwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUxRUIxXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTFFQjBcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MUVCN1wiOiBcImFcIixcbiAgICAgICAgXCJcXHUxRUI2XCI6IFwiQVwiLFxuICAgICAgICBcIlxcdTFFQjVcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MUVCNFwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUyNEVBXCI6IFwiMFwiLFxuICAgICAgICBcIlxcdTI0NjBcIjogXCIxXCIsXG4gICAgICAgIFwiXFx1MjQ2MVwiOiBcIjJcIixcbiAgICAgICAgXCJcXHUyNDYyXCI6IFwiM1wiLFxuICAgICAgICBcIlxcdTI0NjNcIjogXCI0XCIsXG4gICAgICAgIFwiXFx1MjQ2NFwiOiBcIjVcIixcbiAgICAgICAgXCJcXHUyNDY1XCI6IFwiNlwiLFxuICAgICAgICBcIlxcdTI0NjZcIjogXCI3XCIsXG4gICAgICAgIFwiXFx1MjQ2N1wiOiBcIjhcIixcbiAgICAgICAgXCJcXHUyNDY4XCI6IFwiOVwiLFxuICAgICAgICBcIlxcdTI0NjlcIjogXCIxMFwiLFxuICAgICAgICBcIlxcdTI0NkFcIjogXCIxMVwiLFxuICAgICAgICBcIlxcdTI0NkJcIjogXCIxMlwiLFxuICAgICAgICBcIlxcdTI0NkNcIjogXCIxM1wiLFxuICAgICAgICBcIlxcdTI0NkRcIjogXCIxNFwiLFxuICAgICAgICBcIlxcdTI0NkVcIjogXCIxNVwiLFxuICAgICAgICBcIlxcdTI0NkZcIjogXCIxNlwiLFxuICAgICAgICBcIlxcdTI0NzBcIjogXCIxN1wiLFxuICAgICAgICBcIlxcdTI0NzFcIjogXCIxOFwiLFxuICAgICAgICBcIlxcdTI0NzJcIjogXCIxOFwiLFxuICAgICAgICBcIlxcdTI0NzNcIjogXCIxOFwiLFxuICAgICAgICBcIlxcdTI0RjVcIjogXCIxXCIsXG4gICAgICAgIFwiXFx1MjRGNlwiOiBcIjJcIixcbiAgICAgICAgXCJcXHUyNEY3XCI6IFwiM1wiLFxuICAgICAgICBcIlxcdTI0RjhcIjogXCI0XCIsXG4gICAgICAgIFwiXFx1MjRGOVwiOiBcIjVcIixcbiAgICAgICAgXCJcXHUyNEZBXCI6IFwiNlwiLFxuICAgICAgICBcIlxcdTI0RkJcIjogXCI3XCIsXG4gICAgICAgIFwiXFx1MjRGQ1wiOiBcIjhcIixcbiAgICAgICAgXCJcXHUyNEZEXCI6IFwiOVwiLFxuICAgICAgICBcIlxcdTI0RkVcIjogXCIxMFwiLFxuICAgICAgICBcIlxcdTI0RkZcIjogXCIwXCIsXG4gICAgICAgIFwiXFx1MjRFQlwiOiBcIjExXCIsXG4gICAgICAgIFwiXFx1MjRFQ1wiOiBcIjEyXCIsXG4gICAgICAgIFwiXFx1MjRFRFwiOiBcIjEzXCIsXG4gICAgICAgIFwiXFx1MjRFRVwiOiBcIjE0XCIsXG4gICAgICAgIFwiXFx1MjRFRlwiOiBcIjE1XCIsXG4gICAgICAgIFwiXFx1MjRGMFwiOiBcIjE2XCIsXG4gICAgICAgIFwiXFx1MjRGMVwiOiBcIjE3XCIsXG4gICAgICAgIFwiXFx1MjRGMlwiOiBcIjE4XCIsXG4gICAgICAgIFwiXFx1MjRGM1wiOiBcIjE5XCIsXG4gICAgICAgIFwiXFx1MjRGNFwiOiBcIjIwXCIsXG4gICAgICAgIFwiXFx1MjRCNlwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUyNEI3XCI6IFwiQlwiLFxuICAgICAgICBcIlxcdTI0QjhcIjogXCJDXCIsXG4gICAgICAgIFwiXFx1MjRCOVwiOiBcIkRcIixcbiAgICAgICAgXCJcXHUyNEJBXCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTI0QkJcIjogXCJGXCIsXG4gICAgICAgIFwiXFx1MjRCQ1wiOiBcIkdcIixcbiAgICAgICAgXCJcXHUyNEJEXCI6IFwiSFwiLFxuICAgICAgICBcIlxcdTI0QkVcIjogXCJJXCIsXG4gICAgICAgIFwiXFx1MjRCRlwiOiBcIkpcIixcbiAgICAgICAgXCJcXHUyNEMwXCI6IFwiS1wiLFxuICAgICAgICBcIlxcdTI0QzFcIjogXCJMXCIsXG4gICAgICAgIFwiXFx1MjRDMlwiOiBcIk1cIixcbiAgICAgICAgXCJcXHUyNEMzXCI6IFwiTlwiLFxuICAgICAgICBcIlxcdTI0QzRcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MjRDNVwiOiBcIlBcIixcbiAgICAgICAgXCJcXHUyNEM2XCI6IFwiUVwiLFxuICAgICAgICBcIlxcdTI0QzdcIjogXCJSXCIsXG4gICAgICAgIFwiXFx1MjRDOFwiOiBcIlNcIixcbiAgICAgICAgXCJcXHUyNEM5XCI6IFwiVFwiLFxuICAgICAgICBcIlxcdTI0Q0FcIjogXCJVXCIsXG4gICAgICAgIFwiXFx1MjRDQlwiOiBcIlZcIixcbiAgICAgICAgXCJcXHUyNENDXCI6IFwiV1wiLFxuICAgICAgICBcIlxcdTI0Q0RcIjogXCJYXCIsXG4gICAgICAgIFwiXFx1MjRDRVwiOiBcIllcIixcbiAgICAgICAgXCJcXHUyNENGXCI6IFwiWlwiLFxuICAgICAgICBcIlxcdTI0RDBcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MjREMVwiOiBcImJcIixcbiAgICAgICAgXCJcXHUyNEQyXCI6IFwiY1wiLFxuICAgICAgICBcIlxcdTI0RDNcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MjRENFwiOiBcImVcIixcbiAgICAgICAgXCJcXHUyNEQ1XCI6IFwiZlwiLFxuICAgICAgICBcIlxcdTI0RDZcIjogXCJnXCIsXG4gICAgICAgIFwiXFx1MjREN1wiOiBcImhcIixcbiAgICAgICAgXCJcXHUyNEQ4XCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTI0RDlcIjogXCJqXCIsXG4gICAgICAgIFwiXFx1MjREQVwiOiBcImtcIixcbiAgICAgICAgXCJcXHUyNERCXCI6IFwibFwiLFxuICAgICAgICBcIlxcdTI0RENcIjogXCJtXCIsXG4gICAgICAgIFwiXFx1MjRERFwiOiBcIm5cIixcbiAgICAgICAgXCJcXHUyNERFXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTI0REZcIjogXCJwXCIsXG4gICAgICAgIFwiXFx1MjRFMFwiOiBcInFcIixcbiAgICAgICAgXCJcXHUyNEUxXCI6IFwiclwiLFxuICAgICAgICBcIlxcdTI0RTJcIjogXCJzXCIsXG4gICAgICAgIFwiXFx1MjRFM1wiOiBcInRcIixcbiAgICAgICAgXCJcXHUyNEU0XCI6IFwidVwiLFxuICAgICAgICBcIlxcdTI0RTZcIjogXCJ2XCIsXG4gICAgICAgIFwiXFx1MjRFNVwiOiBcIndcIixcbiAgICAgICAgXCJcXHUyNEU3XCI6IFwieFwiLFxuICAgICAgICBcIlxcdTI0RThcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MjRFOVwiOiBcInpcIixcbiAgICAgICAgLy8gc3ltYm9sc1xuICAgICAgICBcIlxcdTIwMUNcIjogJ1wiJyxcbiAgICAgICAgXCJcXHUyMDFEXCI6ICdcIicsXG4gICAgICAgIFwiXFx1MjAxOFwiOiBcIidcIixcbiAgICAgICAgXCJcXHUyMDE5XCI6IFwiJ1wiLFxuICAgICAgICBcIlxcdTIyMDJcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MDE5MlwiOiBcImZcIixcbiAgICAgICAgXCJcXHUyMTIyXCI6IFwiKFRNKVwiLFxuICAgICAgICBcIlxceEE5XCI6IFwiKEMpXCIsXG4gICAgICAgIFwiXFx1MDE1M1wiOiBcIm9lXCIsXG4gICAgICAgIFwiXFx1MDE1MlwiOiBcIk9FXCIsXG4gICAgICAgIFwiXFx4QUVcIjogXCIoUilcIixcbiAgICAgICAgXCJcXHUyMDIwXCI6IFwiK1wiLFxuICAgICAgICBcIlxcdTIxMjBcIjogXCIoU00pXCIsXG4gICAgICAgIFwiXFx1MjAyNlwiOiBcIi4uLlwiLFxuICAgICAgICBcIlxcdTAyREFcIjogXCJvXCIsXG4gICAgICAgIFwiXFx4QkFcIjogXCJvXCIsXG4gICAgICAgIFwiXFx4QUFcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MjAyMlwiOiBcIipcIixcbiAgICAgICAgXCJcXHUxMDRBXCI6IFwiLFwiLFxuICAgICAgICBcIlxcdTEwNEJcIjogXCIuXCIsXG4gICAgICAgIC8vIGN1cnJlbmN5XG4gICAgICAgIFwiJFwiOiBcIlVTRFwiLFxuICAgICAgICBcIlxcdTIwQUNcIjogXCJFVVJcIixcbiAgICAgICAgXCJcXHUyMEEyXCI6IFwiQlJOXCIsXG4gICAgICAgIFwiXFx1MjBBM1wiOiBcIkZSRlwiLFxuICAgICAgICBcIlxceEEzXCI6IFwiR0JQXCIsXG4gICAgICAgIFwiXFx1MjBBNFwiOiBcIklUTFwiLFxuICAgICAgICBcIlxcdTIwQTZcIjogXCJOR05cIixcbiAgICAgICAgXCJcXHUyMEE3XCI6IFwiRVNQXCIsXG4gICAgICAgIFwiXFx1MjBBOVwiOiBcIktSV1wiLFxuICAgICAgICBcIlxcdTIwQUFcIjogXCJJTFNcIixcbiAgICAgICAgXCJcXHUyMEFCXCI6IFwiVk5EXCIsXG4gICAgICAgIFwiXFx1MjBBRFwiOiBcIkxBS1wiLFxuICAgICAgICBcIlxcdTIwQUVcIjogXCJNTlRcIixcbiAgICAgICAgXCJcXHUyMEFGXCI6IFwiR1JEXCIsXG4gICAgICAgIFwiXFx1MjBCMVwiOiBcIkFSU1wiLFxuICAgICAgICBcIlxcdTIwQjJcIjogXCJQWUdcIixcbiAgICAgICAgXCJcXHUyMEIzXCI6IFwiQVJBXCIsXG4gICAgICAgIFwiXFx1MjBCNFwiOiBcIlVBSFwiLFxuICAgICAgICBcIlxcdTIwQjVcIjogXCJHSFNcIixcbiAgICAgICAgXCJcXHhBMlwiOiBcImNlbnRcIixcbiAgICAgICAgXCJcXHhBNVwiOiBcIkNOWVwiLFxuICAgICAgICBcIlxcdTUxNDNcIjogXCJDTllcIixcbiAgICAgICAgXCJcXHU1MTg2XCI6IFwiWUVOXCIsXG4gICAgICAgIFwiXFx1RkRGQ1wiOiBcIklSUlwiLFxuICAgICAgICBcIlxcdTIwQTBcIjogXCJFV0VcIixcbiAgICAgICAgXCJcXHUwRTNGXCI6IFwiVEhCXCIsXG4gICAgICAgIFwiXFx1MjBBOFwiOiBcIklOUlwiLFxuICAgICAgICBcIlxcdTIwQjlcIjogXCJJTlJcIixcbiAgICAgICAgXCJcXHUyMEIwXCI6IFwiUEZcIixcbiAgICAgICAgXCJcXHUyMEJBXCI6IFwiVFJZXCIsXG4gICAgICAgIFwiXFx1MDYwQlwiOiBcIkFGTlwiLFxuICAgICAgICBcIlxcdTIwQkNcIjogXCJBWk5cIixcbiAgICAgICAgXCJcXHUwNDNCXFx1MDQzMlwiOiBcIkJHTlwiLFxuICAgICAgICBcIlxcdTE3REJcIjogXCJLSFJcIixcbiAgICAgICAgXCJcXHUyMEExXCI6IFwiQ1JDXCIsXG4gICAgICAgIFwiXFx1MjBCOFwiOiBcIktaVFwiLFxuICAgICAgICBcIlxcdTA0MzRcXHUwNDM1XFx1MDQzRFwiOiBcIk1LRFwiLFxuICAgICAgICBcInpcXHUwMTQyXCI6IFwiUExOXCIsXG4gICAgICAgIFwiXFx1MjBCRFwiOiBcIlJVQlwiLFxuICAgICAgICBcIlxcdTIwQkVcIjogXCJHRUxcIlxuICAgICAgfTtcbiAgICAgIHZhciBsb29rQWhlYWRDaGFyQXJyYXkgPSBbXG4gICAgICAgIC8vIGJ1cm1lc2VcbiAgICAgICAgXCJcXHUxMDNBXCIsXG4gICAgICAgIC8vIERoaXZlaGlcbiAgICAgICAgXCJcXHUwN0IwXCJcbiAgICAgIF07XG4gICAgICB2YXIgZGlhdHJpY01hcCA9IHtcbiAgICAgICAgLy8gQnVybWVzZVxuICAgICAgICAvLyBkZXBlbmRlbnQgdm93ZWxzXG4gICAgICAgIFwiXFx1MTAyQ1wiOiBcImFcIixcbiAgICAgICAgXCJcXHUxMDJCXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTEwMzFcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MTAzMlwiOiBcImVcIixcbiAgICAgICAgXCJcXHUxMDJEXCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTEwMkVcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MTAyRFxcdTEwMkZcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MTAyRlwiOiBcInVcIixcbiAgICAgICAgXCJcXHUxMDMwXCI6IFwidVwiLFxuICAgICAgICBcIlxcdTEwMzFcXHUxMDJCXFx1MTAwNFxcdTEwM0FcIjogXCJhdW5nXCIsXG4gICAgICAgIFwiXFx1MTAzMVxcdTEwMkNcIjogXCJhd1wiLFxuICAgICAgICBcIlxcdTEwMzFcXHUxMDJDXFx1MTAzQVwiOiBcImF3XCIsXG4gICAgICAgIFwiXFx1MTAzMVxcdTEwMkJcIjogXCJhd1wiLFxuICAgICAgICBcIlxcdTEwMzFcXHUxMDJCXFx1MTAzQVwiOiBcImF3XCIsXG4gICAgICAgIFwiXFx1MTAzQVwiOiBcIlxcdTEwM0FcIixcbiAgICAgICAgLy8gdGhpcyBpcyBzcGVjaWFsIGNhc2UgYnV0IHRoZSBjaGFyYWN0ZXIgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gbGF0aW4gaW4gdGhlIGNvZGVcbiAgICAgICAgXCJcXHUxMDAwXFx1MTAzQVwiOiBcImV0XCIsXG4gICAgICAgIFwiXFx1MTAyRFxcdTEwMkZcXHUxMDAwXFx1MTAzQVwiOiBcImFpa1wiLFxuICAgICAgICBcIlxcdTEwMzFcXHUxMDJDXFx1MTAwMFxcdTEwM0FcIjogXCJhdWtcIixcbiAgICAgICAgXCJcXHUxMDA0XFx1MTAzQVwiOiBcImluXCIsXG4gICAgICAgIFwiXFx1MTAyRFxcdTEwMkZcXHUxMDA0XFx1MTAzQVwiOiBcImFpbmdcIixcbiAgICAgICAgXCJcXHUxMDMxXFx1MTAyQ1xcdTEwMDRcXHUxMDNBXCI6IFwiYXVuZ1wiLFxuICAgICAgICBcIlxcdTEwMDVcXHUxMDNBXCI6IFwiaXRcIixcbiAgICAgICAgXCJcXHUxMDBBXFx1MTAzQVwiOiBcImlcIixcbiAgICAgICAgXCJcXHUxMDEwXFx1MTAzQVwiOiBcImF0XCIsXG4gICAgICAgIFwiXFx1MTAyRFxcdTEwMTBcXHUxMDNBXCI6IFwiZWlrXCIsXG4gICAgICAgIFwiXFx1MTAyRlxcdTEwMTBcXHUxMDNBXCI6IFwib2tcIixcbiAgICAgICAgXCJcXHUxMDNEXFx1MTAxMFxcdTEwM0FcIjogXCJ1dFwiLFxuICAgICAgICBcIlxcdTEwMzFcXHUxMDEwXFx1MTAzQVwiOiBcIml0XCIsXG4gICAgICAgIFwiXFx1MTAxMlxcdTEwM0FcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MTAyRFxcdTEwMkZcXHUxMDEyXFx1MTAzQVwiOiBcIm9rXCIsXG4gICAgICAgIFwiXFx1MTAyRlxcdTEwMTJcXHUxMDNBXCI6IFwiYWl0XCIsXG4gICAgICAgIFwiXFx1MTAxNFxcdTEwM0FcIjogXCJhblwiLFxuICAgICAgICBcIlxcdTEwMkNcXHUxMDE0XFx1MTAzQVwiOiBcImFuXCIsXG4gICAgICAgIFwiXFx1MTAyRFxcdTEwMTRcXHUxMDNBXCI6IFwiZWluXCIsXG4gICAgICAgIFwiXFx1MTAyRlxcdTEwMTRcXHUxMDNBXCI6IFwib25cIixcbiAgICAgICAgXCJcXHUxMDNEXFx1MTAxNFxcdTEwM0FcIjogXCJ1blwiLFxuICAgICAgICBcIlxcdTEwMTVcXHUxMDNBXCI6IFwiYXRcIixcbiAgICAgICAgXCJcXHUxMDJEXFx1MTAxNVxcdTEwM0FcIjogXCJlaWtcIixcbiAgICAgICAgXCJcXHUxMDJGXFx1MTAxNVxcdTEwM0FcIjogXCJva1wiLFxuICAgICAgICBcIlxcdTEwM0RcXHUxMDE1XFx1MTAzQVwiOiBcInV0XCIsXG4gICAgICAgIFwiXFx1MTAxNFxcdTEwM0FcXHUxMDJGXFx1MTAxNVxcdTEwM0FcIjogXCJudWJcIixcbiAgICAgICAgXCJcXHUxMDE5XFx1MTAzQVwiOiBcImFuXCIsXG4gICAgICAgIFwiXFx1MTAyRFxcdTEwMTlcXHUxMDNBXCI6IFwiZWluXCIsXG4gICAgICAgIFwiXFx1MTAyRlxcdTEwMTlcXHUxMDNBXCI6IFwib25cIixcbiAgICAgICAgXCJcXHUxMDNEXFx1MTAxOVxcdTEwM0FcIjogXCJ1blwiLFxuICAgICAgICBcIlxcdTEwMUFcXHUxMDNBXCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTEwMkRcXHUxMDJGXFx1MTAxQ1xcdTEwM0FcIjogXCJvbFwiLFxuICAgICAgICBcIlxcdTEwMDlcXHUxMDNBXCI6IFwiaW5cIixcbiAgICAgICAgXCJcXHUxMDM2XCI6IFwiYW5cIixcbiAgICAgICAgXCJcXHUxMDJEXFx1MTAzNlwiOiBcImVpblwiLFxuICAgICAgICBcIlxcdTEwMkZcXHUxMDM2XCI6IFwib25cIixcbiAgICAgICAgLy8gRGhpdmVoaVxuICAgICAgICBcIlxcdTA3QTZcXHUwNzg3XFx1MDdCMFwiOiBcImFoXCIsXG4gICAgICAgIFwiXFx1MDdBNlxcdTA3ODFcXHUwN0IwXCI6IFwiYWhcIlxuICAgICAgfTtcbiAgICAgIHZhciBsYW5nQ2hhck1hcCA9IHtcbiAgICAgICAgXCJlblwiOiB7fSxcbiAgICAgICAgLy8gZGVmYXVsdCBsYW5ndWFnZVxuICAgICAgICBcImF6XCI6IHtcbiAgICAgICAgICAvLyBBemVyYmFpamFuaVxuICAgICAgICAgIFwiXFx4RTdcIjogXCJjXCIsXG4gICAgICAgICAgXCJcXHUwMjU5XCI6IFwiZVwiLFxuICAgICAgICAgIFwiXFx1MDExRlwiOiBcImdcIixcbiAgICAgICAgICBcIlxcdTAxMzFcIjogXCJpXCIsXG4gICAgICAgICAgXCJcXHhGNlwiOiBcIm9cIixcbiAgICAgICAgICBcIlxcdTAxNUZcIjogXCJzXCIsXG4gICAgICAgICAgXCJcXHhGQ1wiOiBcInVcIixcbiAgICAgICAgICBcIlxceEM3XCI6IFwiQ1wiLFxuICAgICAgICAgIFwiXFx1MDE4RlwiOiBcIkVcIixcbiAgICAgICAgICBcIlxcdTAxMUVcIjogXCJHXCIsXG4gICAgICAgICAgXCJcXHUwMTMwXCI6IFwiSVwiLFxuICAgICAgICAgIFwiXFx4RDZcIjogXCJPXCIsXG4gICAgICAgICAgXCJcXHUwMTVFXCI6IFwiU1wiLFxuICAgICAgICAgIFwiXFx4RENcIjogXCJVXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJjc1wiOiB7XG4gICAgICAgICAgLy8gQ3plY2hcbiAgICAgICAgICBcIlxcdTAxMERcIjogXCJjXCIsXG4gICAgICAgICAgXCJcXHUwMTBGXCI6IFwiZFwiLFxuICAgICAgICAgIFwiXFx1MDExQlwiOiBcImVcIixcbiAgICAgICAgICBcIlxcdTAxNDhcIjogXCJuXCIsXG4gICAgICAgICAgXCJcXHUwMTU5XCI6IFwiclwiLFxuICAgICAgICAgIFwiXFx1MDE2MVwiOiBcInNcIixcbiAgICAgICAgICBcIlxcdTAxNjVcIjogXCJ0XCIsXG4gICAgICAgICAgXCJcXHUwMTZGXCI6IFwidVwiLFxuICAgICAgICAgIFwiXFx1MDE3RVwiOiBcInpcIixcbiAgICAgICAgICBcIlxcdTAxMENcIjogXCJDXCIsXG4gICAgICAgICAgXCJcXHUwMTBFXCI6IFwiRFwiLFxuICAgICAgICAgIFwiXFx1MDExQVwiOiBcIkVcIixcbiAgICAgICAgICBcIlxcdTAxNDdcIjogXCJOXCIsXG4gICAgICAgICAgXCJcXHUwMTU4XCI6IFwiUlwiLFxuICAgICAgICAgIFwiXFx1MDE2MFwiOiBcIlNcIixcbiAgICAgICAgICBcIlxcdTAxNjRcIjogXCJUXCIsXG4gICAgICAgICAgXCJcXHUwMTZFXCI6IFwiVVwiLFxuICAgICAgICAgIFwiXFx1MDE3RFwiOiBcIlpcIlxuICAgICAgICB9LFxuICAgICAgICBcImZpXCI6IHtcbiAgICAgICAgICAvLyBGaW5uaXNoXG4gICAgICAgICAgLy8gJ8OlJzogJ2EnLCBkdXBsaWNhdGUgc2VlIGNoYXJNYXAvbGF0aW5cbiAgICAgICAgICAvLyAnw4UnOiAnQScsIGR1cGxpY2F0ZSBzZWUgY2hhck1hcC9sYXRpblxuICAgICAgICAgIFwiXFx4RTRcIjogXCJhXCIsXG4gICAgICAgICAgLy8gb2tcbiAgICAgICAgICBcIlxceEM0XCI6IFwiQVwiLFxuICAgICAgICAgIC8vIG9rXG4gICAgICAgICAgXCJcXHhGNlwiOiBcIm9cIixcbiAgICAgICAgICAvLyBva1xuICAgICAgICAgIFwiXFx4RDZcIjogXCJPXCJcbiAgICAgICAgICAvLyBva1xuICAgICAgICB9LFxuICAgICAgICBcImh1XCI6IHtcbiAgICAgICAgICAvLyBIdW5nYXJpYW5cbiAgICAgICAgICBcIlxceEU0XCI6IFwiYVwiLFxuICAgICAgICAgIC8vIG9rXG4gICAgICAgICAgXCJcXHhDNFwiOiBcIkFcIixcbiAgICAgICAgICAvLyBva1xuICAgICAgICAgIC8vICfDoSc6ICdhJywgZHVwbGljYXRlIHNlZSBjaGFyTWFwL2xhdGluXG4gICAgICAgICAgLy8gJ8OBJzogJ0EnLCBkdXBsaWNhdGUgc2VlIGNoYXJNYXAvbGF0aW5cbiAgICAgICAgICBcIlxceEY2XCI6IFwib1wiLFxuICAgICAgICAgIC8vIG9rXG4gICAgICAgICAgXCJcXHhENlwiOiBcIk9cIixcbiAgICAgICAgICAvLyBva1xuICAgICAgICAgIC8vICfFkSc6ICdvJywgZHVwbGljYXRlIHNlZSBjaGFyTWFwL2xhdGluXG4gICAgICAgICAgLy8gJ8WQJzogJ08nLCBkdXBsaWNhdGUgc2VlIGNoYXJNYXAvbGF0aW5cbiAgICAgICAgICBcIlxceEZDXCI6IFwidVwiLFxuICAgICAgICAgIFwiXFx4RENcIjogXCJVXCIsXG4gICAgICAgICAgXCJcXHUwMTcxXCI6IFwidVwiLFxuICAgICAgICAgIFwiXFx1MDE3MFwiOiBcIlVcIlxuICAgICAgICB9LFxuICAgICAgICBcImx0XCI6IHtcbiAgICAgICAgICAvLyBMaXRodWFuaWFuXG4gICAgICAgICAgXCJcXHUwMTA1XCI6IFwiYVwiLFxuICAgICAgICAgIFwiXFx1MDEwRFwiOiBcImNcIixcbiAgICAgICAgICBcIlxcdTAxMTlcIjogXCJlXCIsXG4gICAgICAgICAgXCJcXHUwMTE3XCI6IFwiZVwiLFxuICAgICAgICAgIFwiXFx1MDEyRlwiOiBcImlcIixcbiAgICAgICAgICBcIlxcdTAxNjFcIjogXCJzXCIsXG4gICAgICAgICAgXCJcXHUwMTczXCI6IFwidVwiLFxuICAgICAgICAgIFwiXFx1MDE2QlwiOiBcInVcIixcbiAgICAgICAgICBcIlxcdTAxN0VcIjogXCJ6XCIsXG4gICAgICAgICAgXCJcXHUwMTA0XCI6IFwiQVwiLFxuICAgICAgICAgIFwiXFx1MDEwQ1wiOiBcIkNcIixcbiAgICAgICAgICBcIlxcdTAxMThcIjogXCJFXCIsXG4gICAgICAgICAgXCJcXHUwMTE2XCI6IFwiRVwiLFxuICAgICAgICAgIFwiXFx1MDEyRVwiOiBcIklcIixcbiAgICAgICAgICBcIlxcdTAxNjBcIjogXCJTXCIsXG4gICAgICAgICAgXCJcXHUwMTcyXCI6IFwiVVwiLFxuICAgICAgICAgIFwiXFx1MDE2QVwiOiBcIlVcIlxuICAgICAgICB9LFxuICAgICAgICBcImx2XCI6IHtcbiAgICAgICAgICAvLyBMYXR2aWFuXG4gICAgICAgICAgXCJcXHUwMTAxXCI6IFwiYVwiLFxuICAgICAgICAgIFwiXFx1MDEwRFwiOiBcImNcIixcbiAgICAgICAgICBcIlxcdTAxMTNcIjogXCJlXCIsXG4gICAgICAgICAgXCJcXHUwMTIzXCI6IFwiZ1wiLFxuICAgICAgICAgIFwiXFx1MDEyQlwiOiBcImlcIixcbiAgICAgICAgICBcIlxcdTAxMzdcIjogXCJrXCIsXG4gICAgICAgICAgXCJcXHUwMTNDXCI6IFwibFwiLFxuICAgICAgICAgIFwiXFx1MDE0NlwiOiBcIm5cIixcbiAgICAgICAgICBcIlxcdTAxNjFcIjogXCJzXCIsXG4gICAgICAgICAgXCJcXHUwMTZCXCI6IFwidVwiLFxuICAgICAgICAgIFwiXFx1MDE3RVwiOiBcInpcIixcbiAgICAgICAgICBcIlxcdTAxMDBcIjogXCJBXCIsXG4gICAgICAgICAgXCJcXHUwMTBDXCI6IFwiQ1wiLFxuICAgICAgICAgIFwiXFx1MDExMlwiOiBcIkVcIixcbiAgICAgICAgICBcIlxcdTAxMjJcIjogXCJHXCIsXG4gICAgICAgICAgXCJcXHUwMTJBXCI6IFwiaVwiLFxuICAgICAgICAgIFwiXFx1MDEzNlwiOiBcImtcIixcbiAgICAgICAgICBcIlxcdTAxM0JcIjogXCJMXCIsXG4gICAgICAgICAgXCJcXHUwMTQ1XCI6IFwiTlwiLFxuICAgICAgICAgIFwiXFx1MDE2MFwiOiBcIlNcIixcbiAgICAgICAgICBcIlxcdTAxNkFcIjogXCJ1XCIsXG4gICAgICAgICAgXCJcXHUwMTdEXCI6IFwiWlwiXG4gICAgICAgIH0sXG4gICAgICAgIFwicGxcIjoge1xuICAgICAgICAgIC8vIFBvbGlzaFxuICAgICAgICAgIFwiXFx1MDEwNVwiOiBcImFcIixcbiAgICAgICAgICBcIlxcdTAxMDdcIjogXCJjXCIsXG4gICAgICAgICAgXCJcXHUwMTE5XCI6IFwiZVwiLFxuICAgICAgICAgIFwiXFx1MDE0MlwiOiBcImxcIixcbiAgICAgICAgICBcIlxcdTAxNDRcIjogXCJuXCIsXG4gICAgICAgICAgXCJcXHhGM1wiOiBcIm9cIixcbiAgICAgICAgICBcIlxcdTAxNUJcIjogXCJzXCIsXG4gICAgICAgICAgXCJcXHUwMTdBXCI6IFwielwiLFxuICAgICAgICAgIFwiXFx1MDE3Q1wiOiBcInpcIixcbiAgICAgICAgICBcIlxcdTAxMDRcIjogXCJBXCIsXG4gICAgICAgICAgXCJcXHUwMTA2XCI6IFwiQ1wiLFxuICAgICAgICAgIFwiXFx1MDExOFwiOiBcImVcIixcbiAgICAgICAgICBcIlxcdTAxNDFcIjogXCJMXCIsXG4gICAgICAgICAgXCJcXHUwMTQzXCI6IFwiTlwiLFxuICAgICAgICAgIFwiXFx4RDNcIjogXCJPXCIsXG4gICAgICAgICAgXCJcXHUwMTVBXCI6IFwiU1wiLFxuICAgICAgICAgIFwiXFx1MDE3OVwiOiBcIlpcIixcbiAgICAgICAgICBcIlxcdTAxN0JcIjogXCJaXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJzdlwiOiB7XG4gICAgICAgICAgLy8gU3dlZGlzaFxuICAgICAgICAgIC8vICfDpSc6ICdhJywgZHVwbGljYXRlIHNlZSBjaGFyTWFwL2xhdGluXG4gICAgICAgICAgLy8gJ8OFJzogJ0EnLCBkdXBsaWNhdGUgc2VlIGNoYXJNYXAvbGF0aW5cbiAgICAgICAgICBcIlxceEU0XCI6IFwiYVwiLFxuICAgICAgICAgIC8vIG9rXG4gICAgICAgICAgXCJcXHhDNFwiOiBcIkFcIixcbiAgICAgICAgICAvLyBva1xuICAgICAgICAgIFwiXFx4RjZcIjogXCJvXCIsXG4gICAgICAgICAgLy8gb2tcbiAgICAgICAgICBcIlxceEQ2XCI6IFwiT1wiXG4gICAgICAgICAgLy8gb2tcbiAgICAgICAgfSxcbiAgICAgICAgXCJza1wiOiB7XG4gICAgICAgICAgLy8gU2xvdmFrXG4gICAgICAgICAgXCJcXHhFNFwiOiBcImFcIixcbiAgICAgICAgICBcIlxceEM0XCI6IFwiQVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwic3JcIjoge1xuICAgICAgICAgIC8vIFNlcmJpYW5cbiAgICAgICAgICBcIlxcdTA0NTlcIjogXCJsalwiLFxuICAgICAgICAgIFwiXFx1MDQ1QVwiOiBcIm5qXCIsXG4gICAgICAgICAgXCJcXHUwNDA5XCI6IFwiTGpcIixcbiAgICAgICAgICBcIlxcdTA0MEFcIjogXCJOalwiLFxuICAgICAgICAgIFwiXFx1MDExMVwiOiBcImRqXCIsXG4gICAgICAgICAgXCJcXHUwMTEwXCI6IFwiRGpcIlxuICAgICAgICB9LFxuICAgICAgICBcInRyXCI6IHtcbiAgICAgICAgICAvLyBUdXJraXNoXG4gICAgICAgICAgXCJcXHhEQ1wiOiBcIlVcIixcbiAgICAgICAgICBcIlxceEQ2XCI6IFwiT1wiLFxuICAgICAgICAgIFwiXFx4RkNcIjogXCJ1XCIsXG4gICAgICAgICAgXCJcXHhGNlwiOiBcIm9cIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdmFyIHN5bWJvbE1hcCA9IHtcbiAgICAgICAgXCJhclwiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJsYS1uaWhheWFcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJob2JcIixcbiAgICAgICAgICBcIiZcIjogXCJ3YVwiLFxuICAgICAgICAgIFwifFwiOiBcImF3XCIsXG4gICAgICAgICAgXCI8XCI6IFwiYXFhbC1tZW5cIixcbiAgICAgICAgICBcIj5cIjogXCJha2Jhci1tZW5cIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJtYWptb3VcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwib21sYVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiYXpcIjoge30sXG4gICAgICAgIFwiY2FcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiaW5maW5pdFwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImFtb3JcIixcbiAgICAgICAgICBcIiZcIjogXCJpXCIsXG4gICAgICAgICAgXCJ8XCI6IFwib1wiLFxuICAgICAgICAgIFwiPFwiOiBcIm1lbnlzIHF1ZVwiLFxuICAgICAgICAgIFwiPlwiOiBcIm1lcyBxdWVcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzdW1hIGRlbHNcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwibW9uZWRhXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJjc1wiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJuZWtvbmVjbm9cIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJsYXNrYVwiLFxuICAgICAgICAgIFwiJlwiOiBcImFcIixcbiAgICAgICAgICBcInxcIjogXCJuZWJvXCIsXG4gICAgICAgICAgXCI8XCI6IFwibWVuc2kgbmV6XCIsXG4gICAgICAgICAgXCI+XCI6IFwidmV0c2kgbmV6XCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic291Y2V0XCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcIm1lbmFcIlxuICAgICAgICB9LFxuICAgICAgICBcImRlXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcInVuZW5kbGljaFwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcIkxpZWJlXCIsXG4gICAgICAgICAgXCImXCI6IFwidW5kXCIsXG4gICAgICAgICAgXCJ8XCI6IFwib2RlclwiLFxuICAgICAgICAgIFwiPFwiOiBcImtsZWluZXIgYWxzXCIsXG4gICAgICAgICAgXCI+XCI6IFwiZ3JvZXNzZXIgYWxzXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwiU3VtbWUgdm9uXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcIldhZWhydW5nXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJkdlwiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJrb2x1bnVsYWFcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJsb2FiaVwiLFxuICAgICAgICAgIFwiJlwiOiBcImFhaVwiLFxuICAgICAgICAgIFwifFwiOiBcIm5vb25lZVwiLFxuICAgICAgICAgIFwiPFwiOiBcImFoIHZ1cmUga3VkYVwiLFxuICAgICAgICAgIFwiPlwiOiBcImFoIHZ1cmUgYm9kdVwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcImp1bXVsYVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJmYWlzYWFcIlxuICAgICAgICB9LFxuICAgICAgICBcImVuXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImluZmluaXR5XCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwibG92ZVwiLFxuICAgICAgICAgIFwiJlwiOiBcImFuZFwiLFxuICAgICAgICAgIFwifFwiOiBcIm9yXCIsXG4gICAgICAgICAgXCI8XCI6IFwibGVzcyB0aGFuXCIsXG4gICAgICAgICAgXCI+XCI6IFwiZ3JlYXRlciB0aGFuXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic3VtXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcImN1cnJlbmN5XCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJlc1wiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJpbmZpbml0b1wiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImFtb3JcIixcbiAgICAgICAgICBcIiZcIjogXCJ5XCIsXG4gICAgICAgICAgXCJ8XCI6IFwidVwiLFxuICAgICAgICAgIFwiPFwiOiBcIm1lbm9zIHF1ZVwiLFxuICAgICAgICAgIFwiPlwiOiBcIm1hcyBxdWVcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzdW1hIGRlIGxvc1wiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJtb25lZGFcIlxuICAgICAgICB9LFxuICAgICAgICBcImZhXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImJpLW5haGF5YXRcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJlc2hnaFwiLFxuICAgICAgICAgIFwiJlwiOiBcInZhXCIsXG4gICAgICAgICAgXCJ8XCI6IFwieWFcIixcbiAgICAgICAgICBcIjxcIjogXCJrYW10YXItYXpcIixcbiAgICAgICAgICBcIj5cIjogXCJiaXNodGFyLWF6XCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwibWFqbW9vZVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJ2YWhlZFwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiZmlcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiYWFyZXR0b215eXNcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJyYWtrYXVzXCIsXG4gICAgICAgICAgXCImXCI6IFwiamFcIixcbiAgICAgICAgICBcInxcIjogXCJ0YWlcIixcbiAgICAgICAgICBcIjxcIjogXCJwaWVuZW1waSBrdWluXCIsXG4gICAgICAgICAgXCI+XCI6IFwic3V1cmVtcGkga3VpblwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInN1bW1hXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcInZhbHV1dHRhXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJmclwiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJpbmZpbmltZW50XCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwiQW1vdXJcIixcbiAgICAgICAgICBcIiZcIjogXCJldFwiLFxuICAgICAgICAgIFwifFwiOiBcIm91XCIsXG4gICAgICAgICAgXCI8XCI6IFwibW9pbnMgcXVlXCIsXG4gICAgICAgICAgXCI+XCI6IFwic3VwZXJpZXVyZSBhXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic29tbWUgZGVzXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcIm1vbm5haWVcIlxuICAgICAgICB9LFxuICAgICAgICBcImdlXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcInVzYXNydWxvYmFcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJzaXF2YXJ1bGlcIixcbiAgICAgICAgICBcIiZcIjogXCJkYVwiLFxuICAgICAgICAgIFwifFwiOiBcImFuXCIsXG4gICAgICAgICAgXCI8XCI6IFwibmFrbGViaVwiLFxuICAgICAgICAgIFwiPlwiOiBcIm1ldGlcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJqYW1pXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcInZhbHV0YVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiZ3JcIjoge30sXG4gICAgICAgIFwiaHVcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwidmVndGVsZW5cIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJzemVyZWxlbVwiLFxuICAgICAgICAgIFwiJlwiOiBcImVzXCIsXG4gICAgICAgICAgXCJ8XCI6IFwidmFneVwiLFxuICAgICAgICAgIFwiPFwiOiBcImtpc2ViYiBtaW50XCIsXG4gICAgICAgICAgXCI+XCI6IFwibmFneW9iYiBtaW50XCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic3p1bW1hXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcInBlbnpuZW1cIlxuICAgICAgICB9LFxuICAgICAgICBcIml0XCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImluZmluaXRvXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwiYW1vcmVcIixcbiAgICAgICAgICBcIiZcIjogXCJlXCIsXG4gICAgICAgICAgXCJ8XCI6IFwib1wiLFxuICAgICAgICAgIFwiPFwiOiBcIm1pbm9yZSBkaVwiLFxuICAgICAgICAgIFwiPlwiOiBcIm1hZ2dpb3JlIGRpXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic29tbWFcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwibW9uZXRhXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJsdFwiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJiZWdhbHliZVwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcIm1laWxlXCIsXG4gICAgICAgICAgXCImXCI6IFwiaXJcIixcbiAgICAgICAgICBcInxcIjogXCJhclwiLFxuICAgICAgICAgIFwiPFwiOiBcIm1hemlhdSBuZWlcIixcbiAgICAgICAgICBcIj5cIjogXCJkYXVnaWF1IG5laVwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInN1bWFcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwidmFsaXV0YVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwibHZcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiYmV6Z2FsaWJhXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwibWlsZXN0aWJhXCIsXG4gICAgICAgICAgXCImXCI6IFwidW5cIixcbiAgICAgICAgICBcInxcIjogXCJ2YWlcIixcbiAgICAgICAgICBcIjxcIjogXCJtYXphayBuZWthXCIsXG4gICAgICAgICAgXCI+XCI6IFwibGllbGFrcyBuZWthXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic3VtbWFcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwidmFsdXRhXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJteVwiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwia3dhaGtoeWFldFwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImFzYW9uYXNtZVwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImFraHlhaXRcIixcbiAgICAgICAgICBcIiZcIjogXCJuaGluXCIsXG4gICAgICAgICAgXCJ8XCI6IFwidGhvXCIsXG4gICAgICAgICAgXCI8XCI6IFwibmdldGhhd1wiLFxuICAgICAgICAgIFwiPlwiOiBcImt5aXRoYXdcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJwYXVuZ2xkXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcIm5nd2VreWVcIlxuICAgICAgICB9LFxuICAgICAgICBcIm1rXCI6IHt9LFxuICAgICAgICBcIm5sXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcIm9uZWluZGlnXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwibGllZmRlXCIsXG4gICAgICAgICAgXCImXCI6IFwiZW5cIixcbiAgICAgICAgICBcInxcIjogXCJvZlwiLFxuICAgICAgICAgIFwiPFwiOiBcImtsZWluZXIgZGFuXCIsXG4gICAgICAgICAgXCI+XCI6IFwiZ3JvdGVyIGRhblwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInNvbVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJ2YWx1dGFcIlxuICAgICAgICB9LFxuICAgICAgICBcInBsXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcIm5pZXNrb25jem9ub3NjXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwibWlsb3NjXCIsXG4gICAgICAgICAgXCImXCI6IFwiaVwiLFxuICAgICAgICAgIFwifFwiOiBcImx1YlwiLFxuICAgICAgICAgIFwiPFwiOiBcIm1uaWVqc3plIG5pelwiLFxuICAgICAgICAgIFwiPlwiOiBcIndpZWtzemUgbml6XCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic3VtYVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJ3YWx1dGFcIlxuICAgICAgICB9LFxuICAgICAgICBcInB0XCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImluZmluaXRvXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwiYW1vclwiLFxuICAgICAgICAgIFwiJlwiOiBcImVcIixcbiAgICAgICAgICBcInxcIjogXCJvdVwiLFxuICAgICAgICAgIFwiPFwiOiBcIm1lbm9yIHF1ZVwiLFxuICAgICAgICAgIFwiPlwiOiBcIm1haW9yIHF1ZVwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInNvbWFcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwibW9lZGFcIlxuICAgICAgICB9LFxuICAgICAgICBcInJvXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImluZmluaXRcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJkcmFnb3N0ZVwiLFxuICAgICAgICAgIFwiJlwiOiBcInNpXCIsXG4gICAgICAgICAgXCJ8XCI6IFwic2F1XCIsXG4gICAgICAgICAgXCI8XCI6IFwibWFpIG1pYyBjYVwiLFxuICAgICAgICAgIFwiPlwiOiBcIm1haSBtYXJlIGNhXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic3VtYVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJ2YWx1dGFcIlxuICAgICAgICB9LFxuICAgICAgICBcInJ1XCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImJlc2tvbmVjaG5vXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwibHVib3ZcIixcbiAgICAgICAgICBcIiZcIjogXCJpXCIsXG4gICAgICAgICAgXCJ8XCI6IFwiaWxpXCIsXG4gICAgICAgICAgXCI8XCI6IFwibWVuc2hlXCIsXG4gICAgICAgICAgXCI+XCI6IFwiYm9sc2hlXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic3VtbWFcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwidmFsanV0YVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwic2tcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwibmVrb25lY25vXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwibGFza2FcIixcbiAgICAgICAgICBcIiZcIjogXCJhXCIsXG4gICAgICAgICAgXCJ8XCI6IFwiYWxlYm9cIixcbiAgICAgICAgICBcIjxcIjogXCJtZW5laiBha29cIixcbiAgICAgICAgICBcIj5cIjogXCJ2aWFjIGFrb1wiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInN1Y2V0XCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcIm1lbmFcIlxuICAgICAgICB9LFxuICAgICAgICBcInNyXCI6IHt9LFxuICAgICAgICBcInRyXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcInNvbnN1emx1a1wiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImFza1wiLFxuICAgICAgICAgIFwiJlwiOiBcInZlXCIsXG4gICAgICAgICAgXCJ8XCI6IFwidmV5YVwiLFxuICAgICAgICAgIFwiPFwiOiBcImt1Y3VrdHVyXCIsXG4gICAgICAgICAgXCI+XCI6IFwiYnV5dWt0dXJcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJ0b3BsYW1cIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwicGFyYSBiaXJpbWlcIlxuICAgICAgICB9LFxuICAgICAgICBcInVrXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImJlemtpbmVjaG5pc3RcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJsdWJvdlwiLFxuICAgICAgICAgIFwiJlwiOiBcImlcIixcbiAgICAgICAgICBcInxcIjogXCJhYm9cIixcbiAgICAgICAgICBcIjxcIjogXCJtZW5zaGVcIixcbiAgICAgICAgICBcIj5cIjogXCJiaWxzaGVcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzdW1hXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcInZhbGp1dGFcIlxuICAgICAgICB9LFxuICAgICAgICBcInZuXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcInZvIGN1Y1wiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcInlldVwiLFxuICAgICAgICAgIFwiJlwiOiBcInZhXCIsXG4gICAgICAgICAgXCJ8XCI6IFwiaG9hY1wiLFxuICAgICAgICAgIFwiPFwiOiBcIm5obyBob25cIixcbiAgICAgICAgICBcIj5cIjogXCJsb24gaG9uXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwidG9uZ1wiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJ0aWVuIHRlXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHZhciB1cmljQ2hhcnMgPSBbXCI7XCIsIFwiP1wiLCBcIjpcIiwgXCJAXCIsIFwiJlwiLCBcIj1cIiwgXCIrXCIsIFwiJFwiLCBcIixcIiwgXCIvXCJdLmpvaW4oXCJcIik7XG4gICAgICB2YXIgdXJpY05vU2xhc2hDaGFycyA9IFtcIjtcIiwgXCI/XCIsIFwiOlwiLCBcIkBcIiwgXCImXCIsIFwiPVwiLCBcIitcIiwgXCIkXCIsIFwiLFwiXS5qb2luKFwiXCIpO1xuICAgICAgdmFyIG1hcmtDaGFycyA9IFtcIi5cIiwgXCIhXCIsIFwiflwiLCBcIipcIiwgXCInXCIsIFwiKFwiLCBcIilcIl0uam9pbihcIlwiKTtcbiAgICAgIHZhciBnZXRTbHVnID0gZnVuY3Rpb24gZ2V0U2x1ZzIoaW5wdXQsIG9wdHMpIHtcbiAgICAgICAgdmFyIHNlcGFyYXRvciA9IFwiLVwiO1xuICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgdmFyIGRpYXRyaWNTdHJpbmcgPSBcIlwiO1xuICAgICAgICB2YXIgY29udmVydFN5bWJvbHMgPSB0cnVlO1xuICAgICAgICB2YXIgY3VzdG9tUmVwbGFjZW1lbnRzID0ge307XG4gICAgICAgIHZhciBtYWludGFpbkNhc2U7XG4gICAgICAgIHZhciB0aXRsZUNhc2U7XG4gICAgICAgIHZhciB0cnVuY2F0ZTtcbiAgICAgICAgdmFyIHVyaWNGbGFnO1xuICAgICAgICB2YXIgdXJpY05vU2xhc2hGbGFnO1xuICAgICAgICB2YXIgbWFya0ZsYWc7XG4gICAgICAgIHZhciBzeW1ib2w7XG4gICAgICAgIHZhciBsYW5nQ2hhcjtcbiAgICAgICAgdmFyIGx1Y2t5O1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgdmFyIGNoO1xuICAgICAgICB2YXIgbDtcbiAgICAgICAgdmFyIGxhc3RDaGFyV2FzU3ltYm9sO1xuICAgICAgICB2YXIgbGFzdENoYXJXYXNEaWF0cmljO1xuICAgICAgICB2YXIgYWxsb3dlZENoYXJzID0gXCJcIjtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHNlcGFyYXRvciA9IG9wdHM7XG4gICAgICAgIH1cbiAgICAgICAgc3ltYm9sID0gc3ltYm9sTWFwLmVuO1xuICAgICAgICBsYW5nQ2hhciA9IGxhbmdDaGFyTWFwLmVuO1xuICAgICAgICBpZiAodHlwZW9mIG9wdHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBtYWludGFpbkNhc2UgPSBvcHRzLm1haW50YWluQ2FzZSB8fCBmYWxzZTtcbiAgICAgICAgICBjdXN0b21SZXBsYWNlbWVudHMgPSBvcHRzLmN1c3RvbSAmJiB0eXBlb2Ygb3B0cy5jdXN0b20gPT09IFwib2JqZWN0XCIgPyBvcHRzLmN1c3RvbSA6IGN1c3RvbVJlcGxhY2VtZW50cztcbiAgICAgICAgICB0cnVuY2F0ZSA9ICtvcHRzLnRydW5jYXRlID4gMSAmJiBvcHRzLnRydW5jYXRlIHx8IGZhbHNlO1xuICAgICAgICAgIHVyaWNGbGFnID0gb3B0cy51cmljIHx8IGZhbHNlO1xuICAgICAgICAgIHVyaWNOb1NsYXNoRmxhZyA9IG9wdHMudXJpY05vU2xhc2ggfHwgZmFsc2U7XG4gICAgICAgICAgbWFya0ZsYWcgPSBvcHRzLm1hcmsgfHwgZmFsc2U7XG4gICAgICAgICAgY29udmVydFN5bWJvbHMgPSBvcHRzLnN5bWJvbHMgPT09IGZhbHNlIHx8IG9wdHMubGFuZyA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgICAgc2VwYXJhdG9yID0gb3B0cy5zZXBhcmF0b3IgfHwgc2VwYXJhdG9yO1xuICAgICAgICAgIGlmICh1cmljRmxhZykge1xuICAgICAgICAgICAgYWxsb3dlZENoYXJzICs9IHVyaWNDaGFycztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHVyaWNOb1NsYXNoRmxhZykge1xuICAgICAgICAgICAgYWxsb3dlZENoYXJzICs9IHVyaWNOb1NsYXNoQ2hhcnM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChtYXJrRmxhZykge1xuICAgICAgICAgICAgYWxsb3dlZENoYXJzICs9IG1hcmtDaGFycztcbiAgICAgICAgICB9XG4gICAgICAgICAgc3ltYm9sID0gb3B0cy5sYW5nICYmIHN5bWJvbE1hcFtvcHRzLmxhbmddICYmIGNvbnZlcnRTeW1ib2xzID8gc3ltYm9sTWFwW29wdHMubGFuZ10gOiBjb252ZXJ0U3ltYm9scyA/IHN5bWJvbE1hcC5lbiA6IHt9O1xuICAgICAgICAgIGxhbmdDaGFyID0gb3B0cy5sYW5nICYmIGxhbmdDaGFyTWFwW29wdHMubGFuZ10gPyBsYW5nQ2hhck1hcFtvcHRzLmxhbmddIDogb3B0cy5sYW5nID09PSBmYWxzZSB8fCBvcHRzLmxhbmcgPT09IHRydWUgPyB7fSA6IGxhbmdDaGFyTWFwLmVuO1xuICAgICAgICAgIGlmIChvcHRzLnRpdGxlQ2FzZSAmJiB0eXBlb2Ygb3B0cy50aXRsZUNhc2UubGVuZ3RoID09PSBcIm51bWJlclwiICYmIEFycmF5LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9wdHMudGl0bGVDYXNlKSkge1xuICAgICAgICAgICAgb3B0cy50aXRsZUNhc2UuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgIGN1c3RvbVJlcGxhY2VtZW50c1t2ICsgXCJcIl0gPSB2ICsgXCJcIjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGl0bGVDYXNlID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGl0bGVDYXNlID0gISFvcHRzLnRpdGxlQ2FzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9wdHMuY3VzdG9tICYmIHR5cGVvZiBvcHRzLmN1c3RvbS5sZW5ndGggPT09IFwibnVtYmVyXCIgJiYgQXJyYXkucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob3B0cy5jdXN0b20pKSB7XG4gICAgICAgICAgICBvcHRzLmN1c3RvbS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgY3VzdG9tUmVwbGFjZW1lbnRzW3YgKyBcIlwiXSA9IHYgKyBcIlwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIE9iamVjdC5rZXlzKGN1c3RvbVJlcGxhY2VtZW50cykuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICB2YXIgcjtcbiAgICAgICAgICAgIGlmICh2Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgciA9IG5ldyBSZWdFeHAoXCJcXFxcYlwiICsgZXNjYXBlQ2hhcnModikgKyBcIlxcXFxiXCIsIFwiZ2lcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByID0gbmV3IFJlZ0V4cChlc2NhcGVDaGFycyh2KSwgXCJnaVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZShyLCBjdXN0b21SZXBsYWNlbWVudHNbdl0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGZvciAoY2ggaW4gY3VzdG9tUmVwbGFjZW1lbnRzKSB7XG4gICAgICAgICAgICBhbGxvd2VkQ2hhcnMgKz0gY2g7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFsbG93ZWRDaGFycyArPSBzZXBhcmF0b3I7XG4gICAgICAgIGFsbG93ZWRDaGFycyA9IGVzY2FwZUNoYXJzKGFsbG93ZWRDaGFycyk7XG4gICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvKF5cXHMrfFxccyskKS9nLCBcIlwiKTtcbiAgICAgICAgbGFzdENoYXJXYXNTeW1ib2wgPSBmYWxzZTtcbiAgICAgICAgbGFzdENoYXJXYXNEaWF0cmljID0gZmFsc2U7XG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSBpbnB1dC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBjaCA9IGlucHV0W2ldO1xuICAgICAgICAgIGlmIChpc1JlcGxhY2VkQ3VzdG9tQ2hhcihjaCwgY3VzdG9tUmVwbGFjZW1lbnRzKSkge1xuICAgICAgICAgICAgbGFzdENoYXJXYXNTeW1ib2wgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGxhbmdDaGFyW2NoXSkge1xuICAgICAgICAgICAgY2ggPSBsYXN0Q2hhcldhc1N5bWJvbCAmJiBsYW5nQ2hhcltjaF0ubWF0Y2goL1tBLVphLXowLTldLykgPyBcIiBcIiArIGxhbmdDaGFyW2NoXSA6IGxhbmdDaGFyW2NoXTtcbiAgICAgICAgICAgIGxhc3RDaGFyV2FzU3ltYm9sID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIGlmIChjaCBpbiBjaGFyTWFwKSB7XG4gICAgICAgICAgICBpZiAoaSArIDEgPCBsICYmIGxvb2tBaGVhZENoYXJBcnJheS5pbmRleE9mKGlucHV0W2kgKyAxXSkgPj0gMCkge1xuICAgICAgICAgICAgICBkaWF0cmljU3RyaW5nICs9IGNoO1xuICAgICAgICAgICAgICBjaCA9IFwiXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RDaGFyV2FzRGlhdHJpYyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBjaCA9IGRpYXRyaWNNYXBbZGlhdHJpY1N0cmluZ10gKyBjaGFyTWFwW2NoXTtcbiAgICAgICAgICAgICAgZGlhdHJpY1N0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaCA9IGxhc3RDaGFyV2FzU3ltYm9sICYmIGNoYXJNYXBbY2hdLm1hdGNoKC9bQS1aYS16MC05XS8pID8gXCIgXCIgKyBjaGFyTWFwW2NoXSA6IGNoYXJNYXBbY2hdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdENoYXJXYXNTeW1ib2wgPSBmYWxzZTtcbiAgICAgICAgICAgIGxhc3RDaGFyV2FzRGlhdHJpYyA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2ggaW4gZGlhdHJpY01hcCkge1xuICAgICAgICAgICAgZGlhdHJpY1N0cmluZyArPSBjaDtcbiAgICAgICAgICAgIGNoID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChpID09PSBsIC0gMSkge1xuICAgICAgICAgICAgICBjaCA9IGRpYXRyaWNNYXBbZGlhdHJpY1N0cmluZ107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0Q2hhcldhc0RpYXRyaWMgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAvLyBwcm9jZXNzIHN5bWJvbCBjaGFyc1xuICAgICAgICAgICAgc3ltYm9sW2NoXSAmJiAhKHVyaWNGbGFnICYmIHVyaWNDaGFycy5pbmRleE9mKGNoKSAhPT0gLTEpICYmICEodXJpY05vU2xhc2hGbGFnICYmIHVyaWNOb1NsYXNoQ2hhcnMuaW5kZXhPZihjaCkgIT09IC0xKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY2ggPSBsYXN0Q2hhcldhc1N5bWJvbCB8fCByZXN1bHQuc3Vic3RyKC0xKS5tYXRjaCgvW0EtWmEtejAtOV0vKSA/IHNlcGFyYXRvciArIHN5bWJvbFtjaF0gOiBzeW1ib2xbY2hdO1xuICAgICAgICAgICAgY2ggKz0gaW5wdXRbaSArIDFdICE9PSB2b2lkIDAgJiYgaW5wdXRbaSArIDFdLm1hdGNoKC9bQS1aYS16MC05XS8pID8gc2VwYXJhdG9yIDogXCJcIjtcbiAgICAgICAgICAgIGxhc3RDaGFyV2FzU3ltYm9sID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGxhc3RDaGFyV2FzRGlhdHJpYyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBjaCA9IGRpYXRyaWNNYXBbZGlhdHJpY1N0cmluZ10gKyBjaDtcbiAgICAgICAgICAgICAgZGlhdHJpY1N0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICAgIGxhc3RDaGFyV2FzRGlhdHJpYyA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0Q2hhcldhc1N5bWJvbCAmJiAoL1tBLVphLXowLTldLy50ZXN0KGNoKSB8fCByZXN1bHQuc3Vic3RyKC0xKS5tYXRjaCgvQS1aYS16MC05XS8pKSkge1xuICAgICAgICAgICAgICBjaCA9IFwiIFwiICsgY2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0Q2hhcldhc1N5bWJvbCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQgKz0gY2gucmVwbGFjZShuZXcgUmVnRXhwKFwiW15cXFxcd1xcXFxzXCIgKyBhbGxvd2VkQ2hhcnMgKyBcIl8tXVwiLCBcImdcIiksIHNlcGFyYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpdGxlQ2FzZSkge1xuICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC8oXFx3KShcXFMqKS9nLCBmdW5jdGlvbihfLCBpMiwgcikge1xuICAgICAgICAgICAgdmFyIGogPSBpMi50b1VwcGVyQ2FzZSgpICsgKHIgIT09IG51bGwgPyByIDogXCJcIik7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoY3VzdG9tUmVwbGFjZW1lbnRzKS5pbmRleE9mKGoudG9Mb3dlckNhc2UoKSkgPCAwID8gaiA6IGoudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXFxzKy9nLCBzZXBhcmF0b3IpLnJlcGxhY2UobmV3IFJlZ0V4cChcIlxcXFxcIiArIHNlcGFyYXRvciArIFwiK1wiLCBcImdcIiksIHNlcGFyYXRvcikucmVwbGFjZShuZXcgUmVnRXhwKFwiKF5cXFxcXCIgKyBzZXBhcmF0b3IgKyBcIit8XFxcXFwiICsgc2VwYXJhdG9yICsgXCIrJClcIiwgXCJnXCIpLCBcIlwiKTtcbiAgICAgICAgaWYgKHRydW5jYXRlICYmIHJlc3VsdC5sZW5ndGggPiB0cnVuY2F0ZSkge1xuICAgICAgICAgIGx1Y2t5ID0gcmVzdWx0LmNoYXJBdCh0cnVuY2F0ZSkgPT09IHNlcGFyYXRvcjtcbiAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc2xpY2UoMCwgdHJ1bmNhdGUpO1xuICAgICAgICAgIGlmICghbHVja3kpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCByZXN1bHQubGFzdEluZGV4T2Yoc2VwYXJhdG9yKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbWFpbnRhaW5DYXNlICYmICF0aXRsZUNhc2UpIHtcbiAgICAgICAgICByZXN1bHQgPSByZXN1bHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICAgIHZhciBjcmVhdGVTbHVnID0gZnVuY3Rpb24gY3JlYXRlU2x1ZzIob3B0cykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZ2V0U2x1Z1dpdGhDb25maWcoaW5wdXQpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0U2x1ZyhpbnB1dCwgb3B0cyk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgdmFyIGVzY2FwZUNoYXJzID0gZnVuY3Rpb24gZXNjYXBlQ2hhcnMyKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC9bLVxcXFxeJCorPy4oKXxbXFxde31cXC9dL2csIFwiXFxcXCQmXCIpO1xuICAgICAgfTtcbiAgICAgIHZhciBpc1JlcGxhY2VkQ3VzdG9tQ2hhciA9IGZ1bmN0aW9uKGNoLCBjdXN0b21SZXBsYWNlbWVudHMpIHtcbiAgICAgICAgZm9yICh2YXIgYyBpbiBjdXN0b21SZXBsYWNlbWVudHMpIHtcbiAgICAgICAgICBpZiAoY3VzdG9tUmVwbGFjZW1lbnRzW2NdID09PSBjaCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBnZXRTbHVnO1xuICAgICAgICBtb2R1bGUuZXhwb3J0cy5jcmVhdGVTbHVnID0gY3JlYXRlU2x1ZztcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbXSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFNsdWc7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAocm9vdC5nZXRTbHVnIHx8IHJvb3QuY3JlYXRlU2x1Zykge1xuICAgICAgICAgICAgdGhyb3cgXCJzcGVha2luZ3VybDogZ2xvYmFscyBleGlzdHMgLyhnZXRTbHVnfGNyZWF0ZVNsdWcpL1wiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByb290LmdldFNsdWcgPSBnZXRTbHVnO1xuICAgICAgICAgICAgcm9vdC5jcmVhdGVTbHVnID0gY3JlYXRlU2x1ZztcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pKGV4cG9ydHMpO1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NwZWFraW5ndXJsQDE0LjAuMS9ub2RlX21vZHVsZXMvc3BlYWtpbmd1cmwvaW5kZXguanNcbnZhciByZXF1aXJlX3NwZWFraW5ndXJsMiA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zcGVha2luZ3VybEAxNC4wLjEvbm9kZV9tb2R1bGVzL3NwZWFraW5ndXJsL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaW5pdF9lc21fc2hpbXMoKTtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmVfc3BlYWtpbmd1cmwoKTtcbiAgfVxufSk7XG5cbi8vIHNyYy9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2NvcmUvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBpc051eHRBcHAsIHRhcmdldCBhcyB0YXJnZXQxMyB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuXG4vLyBzcmMvY29tcGF0L2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5mdW5jdGlvbiBvbkxlZ2FjeURldlRvb2xzUGx1Z2luQXBpQXZhaWxhYmxlKGNiKSB7XG4gIGlmICh0YXJnZXQuX19WVUVfREVWVE9PTFNfUExVR0lOX0FQSV9BVkFJTEFCTEVfXykge1xuICAgIGNiKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIFwiX19WVUVfREVWVE9PTFNfUExVR0lOX0FQSV9BVkFJTEFCTEVfX1wiLCB7XG4gICAgc2V0KHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUpXG4gICAgICAgIGNiKCk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8vIHNyYy9jdHgvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0MTEgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcblxuLy8gc3JjL2N0eC9hcGkudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0OSB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuXG4vLyBzcmMvY29yZS9jb21wb25lbnQtaGlnaGxpZ2h0ZXIvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9ib3VuZGluZy1yZWN0LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvdXRpbHMvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBiYXNlbmFtZSwgY2xhc3NpZnkgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbmZ1bmN0aW9uIGdldENvbXBvbmVudFR5cGVOYW1lKG9wdGlvbnMpIHtcbiAgdmFyIF9hMjU7XG4gIGNvbnN0IG5hbWUgPSBvcHRpb25zLm5hbWUgfHwgb3B0aW9ucy5fY29tcG9uZW50VGFnIHx8IG9wdGlvbnMuX19WVUVfREVWVE9PTFNfQ09NUE9ORU5UX0dVU1NFRF9OQU1FX18gfHwgb3B0aW9ucy5fX25hbWU7XG4gIGlmIChuYW1lID09PSBcImluZGV4XCIgJiYgKChfYTI1ID0gb3B0aW9ucy5fX2ZpbGUpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LmVuZHNXaXRoKFwiaW5kZXgudnVlXCIpKSkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIHJldHVybiBuYW1lO1xufVxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50RmlsZU5hbWUob3B0aW9ucykge1xuICBjb25zdCBmaWxlID0gb3B0aW9ucy5fX2ZpbGU7XG4gIGlmIChmaWxlKVxuICAgIHJldHVybiBjbGFzc2lmeShiYXNlbmFtZShmaWxlLCBcIi52dWVcIikpO1xufVxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZShvcHRpb25zKSB7XG4gIGNvbnN0IG5hbWUgPSBvcHRpb25zLmRpc3BsYXlOYW1lIHx8IG9wdGlvbnMubmFtZSB8fCBvcHRpb25zLl9jb21wb25lbnRUYWc7XG4gIGlmIChuYW1lKVxuICAgIHJldHVybiBuYW1lO1xuICByZXR1cm4gZ2V0Q29tcG9uZW50RmlsZU5hbWUob3B0aW9ucyk7XG59XG5mdW5jdGlvbiBzYXZlQ29tcG9uZW50R3Vzc2VkTmFtZShpbnN0YW5jZSwgbmFtZSkge1xuICBpbnN0YW5jZS50eXBlLl9fVlVFX0RFVlRPT0xTX0NPTVBPTkVOVF9HVVNTRURfTkFNRV9fID0gbmFtZTtcbiAgcmV0dXJuIG5hbWU7XG59XG5mdW5jdGlvbiBnZXRBcHBSZWNvcmQoaW5zdGFuY2UpIHtcbiAgaWYgKGluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9fKVxuICAgIHJldHVybiBpbnN0YW5jZS5fX1ZVRV9ERVZUT09MU19ORVhUX0FQUF9SRUNPUkRfXztcbiAgZWxzZSBpZiAoaW5zdGFuY2Uucm9vdClcbiAgICByZXR1cm4gaW5zdGFuY2UuYXBwQ29udGV4dC5hcHAuX19WVUVfREVWVE9PTFNfTkVYVF9BUFBfUkVDT1JEX187XG59XG5hc3luYyBmdW5jdGlvbiBnZXRDb21wb25lbnRJZChvcHRpb25zKSB7XG4gIGNvbnN0IHsgYXBwLCB1aWQsIGluc3RhbmNlIH0gPSBvcHRpb25zO1xuICB0cnkge1xuICAgIGlmIChpbnN0YW5jZS5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fKVxuICAgICAgcmV0dXJuIGluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX187XG4gICAgY29uc3QgYXBwUmVjb3JkID0gYXdhaXQgZ2V0QXBwUmVjb3JkKGFwcCk7XG4gICAgaWYgKCFhcHBSZWNvcmQpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBpc1Jvb3QgPSBhcHBSZWNvcmQucm9vdEluc3RhbmNlID09PSBpbnN0YW5jZTtcbiAgICByZXR1cm4gYCR7YXBwUmVjb3JkLmlkfToke2lzUm9vdCA/IFwicm9vdFwiIDogdWlkfWA7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxufVxuZnVuY3Rpb24gaXNGcmFnbWVudChpbnN0YW5jZSkge1xuICB2YXIgX2EyNSwgX2IyNTtcbiAgY29uc3Qgc3ViVHJlZVR5cGUgPSAoX2EyNSA9IGluc3RhbmNlLnN1YlRyZWUpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnR5cGU7XG4gIGNvbnN0IGFwcFJlY29yZCA9IGdldEFwcFJlY29yZChpbnN0YW5jZSk7XG4gIGlmIChhcHBSZWNvcmQpIHtcbiAgICByZXR1cm4gKChfYjI1ID0gYXBwUmVjb3JkID09IG51bGwgPyB2b2lkIDAgOiBhcHBSZWNvcmQudHlwZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LkZyYWdtZW50KSA9PT0gc3ViVHJlZVR5cGU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNCZWluZ0Rlc3Ryb3llZChpbnN0YW5jZSkge1xuICByZXR1cm4gaW5zdGFuY2UuX2lzQmVpbmdEZXN0cm95ZWQgfHwgaW5zdGFuY2UuaXNVbm1vdW50ZWQ7XG59XG5mdW5jdGlvbiBnZXRJbnN0YW5jZU5hbWUoaW5zdGFuY2UpIHtcbiAgdmFyIF9hMjUsIF9iMjUsIF9jO1xuICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50VHlwZU5hbWUoKGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS50eXBlKSB8fCB7fSk7XG4gIGlmIChuYW1lKVxuICAgIHJldHVybiBuYW1lO1xuICBpZiAoKGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS5yb290KSA9PT0gaW5zdGFuY2UpXG4gICAgcmV0dXJuIFwiUm9vdFwiO1xuICBmb3IgKGNvbnN0IGtleSBpbiAoX2IyNSA9IChfYTI1ID0gaW5zdGFuY2UucGFyZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS50eXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2IyNS5jb21wb25lbnRzKSB7XG4gICAgaWYgKGluc3RhbmNlLnBhcmVudC50eXBlLmNvbXBvbmVudHNba2V5XSA9PT0gKGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS50eXBlKSlcbiAgICAgIHJldHVybiBzYXZlQ29tcG9uZW50R3Vzc2VkTmFtZShpbnN0YW5jZSwga2V5KTtcbiAgfVxuICBmb3IgKGNvbnN0IGtleSBpbiAoX2MgPSBpbnN0YW5jZS5hcHBDb250ZXh0KSA9PSBudWxsID8gdm9pZCAwIDogX2MuY29tcG9uZW50cykge1xuICAgIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbXBvbmVudHNba2V5XSA9PT0gKGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS50eXBlKSlcbiAgICAgIHJldHVybiBzYXZlQ29tcG9uZW50R3Vzc2VkTmFtZShpbnN0YW5jZSwga2V5KTtcbiAgfVxuICBjb25zdCBmaWxlTmFtZSA9IGdldENvbXBvbmVudEZpbGVOYW1lKChpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UudHlwZSkgfHwge30pO1xuICBpZiAoZmlsZU5hbWUpXG4gICAgcmV0dXJuIGZpbGVOYW1lO1xuICByZXR1cm4gXCJBbm9ueW1vdXMgQ29tcG9uZW50XCI7XG59XG5mdW5jdGlvbiBnZXRVbmlxdWVDb21wb25lbnRJZChpbnN0YW5jZSkge1xuICB2YXIgX2EyNSwgX2IyNSwgX2M7XG4gIGNvbnN0IGFwcElkID0gKF9jID0gKF9iMjUgPSAoX2EyNSA9IGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS5hcHBDb250ZXh0KSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5hcHApID09IG51bGwgPyB2b2lkIDAgOiBfYjI1Ll9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9JRF9fKSAhPSBudWxsID8gX2MgOiAwO1xuICBjb25zdCBpbnN0YW5jZUlkID0gaW5zdGFuY2UgPT09IChpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2Uucm9vdCkgPyBcInJvb3RcIiA6IGluc3RhbmNlLnVpZDtcbiAgcmV0dXJuIGAke2FwcElkfToke2luc3RhbmNlSWR9YDtcbn1cbmZ1bmN0aW9uIGdldFJlbmRlcktleSh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbClcbiAgICByZXR1cm4gXCJcIjtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gdmFsdWU7XG4gIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIilcbiAgICByZXR1cm4gYCcke3ZhbHVlfSdgO1xuICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSlcbiAgICByZXR1cm4gXCJBcnJheVwiO1xuICBlbHNlXG4gICAgcmV0dXJuIFwiT2JqZWN0XCI7XG59XG5mdW5jdGlvbiByZXR1cm5FcnJvcihjYikge1xuICB0cnkge1xuICAgIHJldHVybiBjYigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGU7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldENvbXBvbmVudEluc3RhbmNlKGFwcFJlY29yZCwgaW5zdGFuY2VJZCkge1xuICBpbnN0YW5jZUlkID0gaW5zdGFuY2VJZCB8fCBgJHthcHBSZWNvcmQuaWR9OnJvb3RgO1xuICBjb25zdCBpbnN0YW5jZSA9IGFwcFJlY29yZC5pbnN0YW5jZU1hcC5nZXQoaW5zdGFuY2VJZCk7XG4gIHJldHVybiBpbnN0YW5jZSB8fCBhcHBSZWNvcmQuaW5zdGFuY2VNYXAuZ2V0KFwiOnJvb3RcIik7XG59XG5mdW5jdGlvbiBlbnN1cmVQcm9wZXJ0eUV4aXN0cyhvYmosIGtleSwgc2tpcE9iakNoZWNrID0gZmFsc2UpIHtcbiAgcmV0dXJuIHNraXBPYmpDaGVjayA/IGtleSBpbiBvYmogOiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIG9iaiAhPT0gbnVsbCA/IGtleSBpbiBvYmogOiBmYWxzZTtcbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL2JvdW5kaW5nLXJlY3QudHNcbmZ1bmN0aW9uIGNyZWF0ZVJlY3QoKSB7XG4gIGNvbnN0IHJlY3QgPSB7XG4gICAgdG9wOiAwLFxuICAgIGJvdHRvbTogMCxcbiAgICBsZWZ0OiAwLFxuICAgIHJpZ2h0OiAwLFxuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgIHJldHVybiByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0O1xuICAgIH0sXG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgIHJldHVybiByZWN0LmJvdHRvbSAtIHJlY3QudG9wO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHJlY3Q7XG59XG52YXIgcmFuZ2U7XG5mdW5jdGlvbiBnZXRUZXh0UmVjdChub2RlKSB7XG4gIGlmICghcmFuZ2UpXG4gICAgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICByYW5nZS5zZWxlY3ROb2RlKG5vZGUpO1xuICByZXR1cm4gcmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG59XG5mdW5jdGlvbiBnZXRGcmFnbWVudFJlY3Qodm5vZGUpIHtcbiAgY29uc3QgcmVjdCA9IGNyZWF0ZVJlY3QoKTtcbiAgaWYgKCF2bm9kZS5jaGlsZHJlbilcbiAgICByZXR1cm4gcmVjdDtcbiAgZm9yIChsZXQgaSA9IDAsIGwgPSB2bm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBjb25zdCBjaGlsZFZub2RlID0gdm5vZGUuY2hpbGRyZW5baV07XG4gICAgbGV0IGNoaWxkUmVjdDtcbiAgICBpZiAoY2hpbGRWbm9kZS5jb21wb25lbnQpIHtcbiAgICAgIGNoaWxkUmVjdCA9IGdldENvbXBvbmVudEJvdW5kaW5nUmVjdChjaGlsZFZub2RlLmNvbXBvbmVudCk7XG4gICAgfSBlbHNlIGlmIChjaGlsZFZub2RlLmVsKSB7XG4gICAgICBjb25zdCBlbCA9IGNoaWxkVm5vZGUuZWw7XG4gICAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgfHwgZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KVxuICAgICAgICBjaGlsZFJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGVsc2UgaWYgKGVsLm5vZGVUeXBlID09PSAzICYmIGVsLmRhdGEudHJpbSgpKVxuICAgICAgICBjaGlsZFJlY3QgPSBnZXRUZXh0UmVjdChlbCk7XG4gICAgfVxuICAgIGlmIChjaGlsZFJlY3QpXG4gICAgICBtZXJnZVJlY3RzKHJlY3QsIGNoaWxkUmVjdCk7XG4gIH1cbiAgcmV0dXJuIHJlY3Q7XG59XG5mdW5jdGlvbiBtZXJnZVJlY3RzKGEsIGIpIHtcbiAgaWYgKCFhLnRvcCB8fCBiLnRvcCA8IGEudG9wKVxuICAgIGEudG9wID0gYi50b3A7XG4gIGlmICghYS5ib3R0b20gfHwgYi5ib3R0b20gPiBhLmJvdHRvbSlcbiAgICBhLmJvdHRvbSA9IGIuYm90dG9tO1xuICBpZiAoIWEubGVmdCB8fCBiLmxlZnQgPCBhLmxlZnQpXG4gICAgYS5sZWZ0ID0gYi5sZWZ0O1xuICBpZiAoIWEucmlnaHQgfHwgYi5yaWdodCA+IGEucmlnaHQpXG4gICAgYS5yaWdodCA9IGIucmlnaHQ7XG4gIHJldHVybiBhO1xufVxudmFyIERFRkFVTFRfUkVDVCA9IHtcbiAgdG9wOiAwLFxuICBsZWZ0OiAwLFxuICByaWdodDogMCxcbiAgYm90dG9tOiAwLFxuICB3aWR0aDogMCxcbiAgaGVpZ2h0OiAwXG59O1xuZnVuY3Rpb24gZ2V0Q29tcG9uZW50Qm91bmRpbmdSZWN0KGluc3RhbmNlKSB7XG4gIGNvbnN0IGVsID0gaW5zdGFuY2Uuc3ViVHJlZS5lbDtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gREVGQVVMVF9SRUNUO1xuICB9XG4gIGlmIChpc0ZyYWdtZW50KGluc3RhbmNlKSlcbiAgICByZXR1cm4gZ2V0RnJhZ21lbnRSZWN0KGluc3RhbmNlLnN1YlRyZWUpO1xuICBlbHNlIGlmICgoZWwgPT0gbnVsbCA/IHZvaWQgMCA6IGVsLm5vZGVUeXBlKSA9PT0gMSlcbiAgICByZXR1cm4gZWwgPT0gbnVsbCA/IHZvaWQgMCA6IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBlbHNlIGlmIChpbnN0YW5jZS5zdWJUcmVlLmNvbXBvbmVudClcbiAgICByZXR1cm4gZ2V0Q29tcG9uZW50Qm91bmRpbmdSZWN0KGluc3RhbmNlLnN1YlRyZWUuY29tcG9uZW50KTtcbiAgZWxzZVxuICAgIHJldHVybiBERUZBVUxUX1JFQ1Q7XG59XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC90cmVlL2VsLnRzXG5pbml0X2VzbV9zaGltcygpO1xuZnVuY3Rpb24gZ2V0Um9vdEVsZW1lbnRzRnJvbUNvbXBvbmVudEluc3RhbmNlKGluc3RhbmNlKSB7XG4gIGlmIChpc0ZyYWdtZW50KGluc3RhbmNlKSlcbiAgICByZXR1cm4gZ2V0RnJhZ21lbnRSb290RWxlbWVudHMoaW5zdGFuY2Uuc3ViVHJlZSk7XG4gIGlmICghaW5zdGFuY2Uuc3ViVHJlZSlcbiAgICByZXR1cm4gW107XG4gIHJldHVybiBbaW5zdGFuY2Uuc3ViVHJlZS5lbF07XG59XG5mdW5jdGlvbiBnZXRGcmFnbWVudFJvb3RFbGVtZW50cyh2bm9kZSkge1xuICBpZiAoIXZub2RlLmNoaWxkcmVuKVxuICAgIHJldHVybiBbXTtcbiAgY29uc3QgbGlzdCA9IFtdO1xuICB2bm9kZS5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZFZub2RlKSA9PiB7XG4gICAgaWYgKGNoaWxkVm5vZGUuY29tcG9uZW50KVxuICAgICAgbGlzdC5wdXNoKC4uLmdldFJvb3RFbGVtZW50c0Zyb21Db21wb25lbnRJbnN0YW5jZShjaGlsZFZub2RlLmNvbXBvbmVudCkpO1xuICAgIGVsc2UgaWYgKGNoaWxkVm5vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IGNoaWxkVm5vZGUuZWwpXG4gICAgICBsaXN0LnB1c2goY2hpbGRWbm9kZS5lbCk7XG4gIH0pO1xuICByZXR1cm4gbGlzdDtcbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50LWhpZ2hsaWdodGVyL2luZGV4LnRzXG52YXIgQ09OVEFJTkVSX0VMRU1FTlRfSUQgPSBcIl9fdnVlLWRldnRvb2xzLWNvbXBvbmVudC1pbnNwZWN0b3JfX1wiO1xudmFyIENBUkRfRUxFTUVOVF9JRCA9IFwiX192dWUtZGV2dG9vbHMtY29tcG9uZW50LWluc3BlY3Rvcl9fY2FyZF9fXCI7XG52YXIgQ09NUE9ORU5UX05BTUVfRUxFTUVOVF9JRCA9IFwiX192dWUtZGV2dG9vbHMtY29tcG9uZW50LWluc3BlY3Rvcl9fbmFtZV9fXCI7XG52YXIgSU5ESUNBVE9SX0VMRU1FTlRfSUQgPSBcIl9fdnVlLWRldnRvb2xzLWNvbXBvbmVudC1pbnNwZWN0b3JfX2luZGljYXRvcl9fXCI7XG52YXIgY29udGFpbmVyU3R5bGVzID0ge1xuICBkaXNwbGF5OiBcImJsb2NrXCIsXG4gIHpJbmRleDogMjE0NzQ4MzY0MCxcbiAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgYmFja2dyb3VuZENvbG9yOiBcIiM0MmI4ODMyNVwiLFxuICBib3JkZXI6IFwiMXB4IHNvbGlkICM0MmI4ODM1MFwiLFxuICBib3JkZXJSYWRpdXM6IFwiNXB4XCIsXG4gIHRyYW5zaXRpb246IFwiYWxsIDAuMXMgZWFzZS1pblwiLFxuICBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIlxufTtcbnZhciBjYXJkU3R5bGVzID0ge1xuICBmb250RmFtaWx5OiBcIkFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWZcIixcbiAgcGFkZGluZzogXCI1cHggOHB4XCIsXG4gIGJvcmRlclJhZGl1czogXCI0cHhcIixcbiAgdGV4dEFsaWduOiBcImxlZnRcIixcbiAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgbGVmdDogMCxcbiAgY29sb3I6IFwiI2U5ZTllOVwiLFxuICBmb250U2l6ZTogXCIxNHB4XCIsXG4gIGZvbnRXZWlnaHQ6IDYwMCxcbiAgbGluZUhlaWdodDogXCIyNHB4XCIsXG4gIGJhY2tncm91bmRDb2xvcjogXCIjNDJiODgzXCIsXG4gIGJveFNoYWRvdzogXCIwIDFweCAzcHggMCByZ2JhKDAsIDAsIDAsIDAuMSksIDAgMXB4IDJweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4xKVwiXG59O1xudmFyIGluZGljYXRvclN0eWxlcyA9IHtcbiAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbiAgZm9udFdlaWdodDogNDAwLFxuICBmb250U3R5bGU6IFwibm9ybWFsXCIsXG4gIGZvbnRTaXplOiBcIjEycHhcIixcbiAgb3BhY2l0eTogMC43XG59O1xuZnVuY3Rpb24gZ2V0Q29udGFpbmVyRWxlbWVudCgpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKENPTlRBSU5FUl9FTEVNRU5UX0lEKTtcbn1cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KCkge1xuICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ0FSRF9FTEVNRU5UX0lEKTtcbn1cbmZ1bmN0aW9uIGdldEluZGljYXRvckVsZW1lbnQoKSB7XG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChJTkRJQ0FUT1JfRUxFTUVOVF9JRCk7XG59XG5mdW5jdGlvbiBnZXROYW1lRWxlbWVudCgpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKENPTVBPTkVOVF9OQU1FX0VMRU1FTlRfSUQpO1xufVxuZnVuY3Rpb24gZ2V0U3R5bGVzKGJvdW5kcykge1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IGAke01hdGgucm91bmQoYm91bmRzLmxlZnQgKiAxMDApIC8gMTAwfXB4YCxcbiAgICB0b3A6IGAke01hdGgucm91bmQoYm91bmRzLnRvcCAqIDEwMCkgLyAxMDB9cHhgLFxuICAgIHdpZHRoOiBgJHtNYXRoLnJvdW5kKGJvdW5kcy53aWR0aCAqIDEwMCkgLyAxMDB9cHhgLFxuICAgIGhlaWdodDogYCR7TWF0aC5yb3VuZChib3VuZHMuaGVpZ2h0ICogMTAwKSAvIDEwMH1weGBcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZShvcHRpb25zKSB7XG4gIHZhciBfYTI1O1xuICBjb25zdCBjb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNvbnRhaW5lckVsLmlkID0gKF9hMjUgPSBvcHRpb25zLmVsZW1lbnRJZCkgIT0gbnVsbCA/IF9hMjUgOiBDT05UQUlORVJfRUxFTUVOVF9JRDtcbiAgT2JqZWN0LmFzc2lnbihjb250YWluZXJFbC5zdHlsZSwge1xuICAgIC4uLmNvbnRhaW5lclN0eWxlcyxcbiAgICAuLi5nZXRTdHlsZXMob3B0aW9ucy5ib3VuZHMpLFxuICAgIC4uLm9wdGlvbnMuc3R5bGVcbiAgfSk7XG4gIGNvbnN0IGNhcmRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICBjYXJkRWwuaWQgPSBDQVJEX0VMRU1FTlRfSUQ7XG4gIE9iamVjdC5hc3NpZ24oY2FyZEVsLnN0eWxlLCB7XG4gICAgLi4uY2FyZFN0eWxlcyxcbiAgICB0b3A6IG9wdGlvbnMuYm91bmRzLnRvcCA8IDM1ID8gMCA6IFwiLTM1cHhcIlxuICB9KTtcbiAgY29uc3QgbmFtZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gIG5hbWVFbC5pZCA9IENPTVBPTkVOVF9OQU1FX0VMRU1FTlRfSUQ7XG4gIG5hbWVFbC5pbm5lckhUTUwgPSBgJmx0OyR7b3B0aW9ucy5uYW1lfSZndDsmbmJzcDsmbmJzcDtgO1xuICBjb25zdCBpbmRpY2F0b3JFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xuICBpbmRpY2F0b3JFbC5pZCA9IElORElDQVRPUl9FTEVNRU5UX0lEO1xuICBpbmRpY2F0b3JFbC5pbm5lckhUTUwgPSBgJHtNYXRoLnJvdW5kKG9wdGlvbnMuYm91bmRzLndpZHRoICogMTAwKSAvIDEwMH0geCAke01hdGgucm91bmQob3B0aW9ucy5ib3VuZHMuaGVpZ2h0ICogMTAwKSAvIDEwMH1gO1xuICBPYmplY3QuYXNzaWduKGluZGljYXRvckVsLnN0eWxlLCBpbmRpY2F0b3JTdHlsZXMpO1xuICBjYXJkRWwuYXBwZW5kQ2hpbGQobmFtZUVsKTtcbiAgY2FyZEVsLmFwcGVuZENoaWxkKGluZGljYXRvckVsKTtcbiAgY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoY2FyZEVsKTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXJFbCk7XG4gIHJldHVybiBjb250YWluZXJFbDtcbn1cbmZ1bmN0aW9uIHVwZGF0ZShvcHRpb25zKSB7XG4gIGNvbnN0IGNvbnRhaW5lckVsID0gZ2V0Q29udGFpbmVyRWxlbWVudCgpO1xuICBjb25zdCBjYXJkRWwgPSBnZXRDYXJkRWxlbWVudCgpO1xuICBjb25zdCBuYW1lRWwgPSBnZXROYW1lRWxlbWVudCgpO1xuICBjb25zdCBpbmRpY2F0b3JFbCA9IGdldEluZGljYXRvckVsZW1lbnQoKTtcbiAgaWYgKGNvbnRhaW5lckVsKSB7XG4gICAgT2JqZWN0LmFzc2lnbihjb250YWluZXJFbC5zdHlsZSwge1xuICAgICAgLi4uY29udGFpbmVyU3R5bGVzLFxuICAgICAgLi4uZ2V0U3R5bGVzKG9wdGlvbnMuYm91bmRzKVxuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oY2FyZEVsLnN0eWxlLCB7XG4gICAgICB0b3A6IG9wdGlvbnMuYm91bmRzLnRvcCA8IDM1ID8gMCA6IFwiLTM1cHhcIlxuICAgIH0pO1xuICAgIG5hbWVFbC5pbm5lckhUTUwgPSBgJmx0OyR7b3B0aW9ucy5uYW1lfSZndDsmbmJzcDsmbmJzcDtgO1xuICAgIGluZGljYXRvckVsLmlubmVySFRNTCA9IGAke01hdGgucm91bmQob3B0aW9ucy5ib3VuZHMud2lkdGggKiAxMDApIC8gMTAwfSB4ICR7TWF0aC5yb3VuZChvcHRpb25zLmJvdW5kcy5oZWlnaHQgKiAxMDApIC8gMTAwfWA7XG4gIH1cbn1cbmZ1bmN0aW9uIGhpZ2hsaWdodChpbnN0YW5jZSkge1xuICBjb25zdCBib3VuZHMgPSBnZXRDb21wb25lbnRCb3VuZGluZ1JlY3QoaW5zdGFuY2UpO1xuICBpZiAoIWJvdW5kcy53aWR0aCAmJiAhYm91bmRzLmhlaWdodClcbiAgICByZXR1cm47XG4gIGNvbnN0IG5hbWUgPSBnZXRJbnN0YW5jZU5hbWUoaW5zdGFuY2UpO1xuICBjb25zdCBjb250YWluZXIgPSBnZXRDb250YWluZXJFbGVtZW50KCk7XG4gIGNvbnRhaW5lciA/IHVwZGF0ZSh7IGJvdW5kcywgbmFtZSB9KSA6IGNyZWF0ZSh7IGJvdW5kcywgbmFtZSB9KTtcbn1cbmZ1bmN0aW9uIHVuaGlnaGxpZ2h0KCkge1xuICBjb25zdCBlbCA9IGdldENvbnRhaW5lckVsZW1lbnQoKTtcbiAgaWYgKGVsKVxuICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn1cbnZhciBpbnNwZWN0SW5zdGFuY2UgPSBudWxsO1xuZnVuY3Rpb24gaW5zcGVjdEZuKGUpIHtcbiAgY29uc3QgdGFyZ2V0MjIgPSBlLnRhcmdldDtcbiAgaWYgKHRhcmdldDIyKSB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSB0YXJnZXQyMi5fX3Z1ZVBhcmVudENvbXBvbmVudDtcbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgIGluc3BlY3RJbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgICAgY29uc3QgZWwgPSBpbnN0YW5jZS52bm9kZS5lbDtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICBjb25zdCBib3VuZHMgPSBnZXRDb21wb25lbnRCb3VuZGluZ1JlY3QoaW5zdGFuY2UpO1xuICAgICAgICBjb25zdCBuYW1lID0gZ2V0SW5zdGFuY2VOYW1lKGluc3RhbmNlKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZ2V0Q29udGFpbmVyRWxlbWVudCgpO1xuICAgICAgICBjb250YWluZXIgPyB1cGRhdGUoeyBib3VuZHMsIG5hbWUgfSkgOiBjcmVhdGUoeyBib3VuZHMsIG5hbWUgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBzZWxlY3RDb21wb25lbnRGbihlLCBjYikge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIGlmIChpbnNwZWN0SW5zdGFuY2UpIHtcbiAgICBjb25zdCB1bmlxdWVDb21wb25lbnRJZCA9IGdldFVuaXF1ZUNvbXBvbmVudElkKGluc3BlY3RJbnN0YW5jZSk7XG4gICAgY2IodW5pcXVlQ29tcG9uZW50SWQpO1xuICB9XG59XG52YXIgaW5zcGVjdENvbXBvbmVudEhpZ2hMaWdodGVyU2VsZWN0Rm4gPSBudWxsO1xuZnVuY3Rpb24gY2FuY2VsSW5zcGVjdENvbXBvbmVudEhpZ2hMaWdodGVyKCkge1xuICB1bmhpZ2hsaWdodCgpO1xuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBpbnNwZWN0Rm4pO1xuICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGluc3BlY3RDb21wb25lbnRIaWdoTGlnaHRlclNlbGVjdEZuLCB0cnVlKTtcbiAgaW5zcGVjdENvbXBvbmVudEhpZ2hMaWdodGVyU2VsZWN0Rm4gPSBudWxsO1xufVxuZnVuY3Rpb24gaW5zcGVjdENvbXBvbmVudEhpZ2hMaWdodGVyKCkge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBpbnNwZWN0Rm4pO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBmdW5jdGlvbiBvblNlbGVjdChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgc2VsZWN0Q29tcG9uZW50Rm4oZSwgKGlkKSA9PiB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb25TZWxlY3QsIHRydWUpO1xuICAgICAgICBpbnNwZWN0Q29tcG9uZW50SGlnaExpZ2h0ZXJTZWxlY3RGbiA9IG51bGw7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGluc3BlY3RGbik7XG4gICAgICAgIGNvbnN0IGVsID0gZ2V0Q29udGFpbmVyRWxlbWVudCgpO1xuICAgICAgICBpZiAoZWwpXG4gICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICByZXNvbHZlKEpTT04uc3RyaW5naWZ5KHsgaWQgfSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGluc3BlY3RDb21wb25lbnRIaWdoTGlnaHRlclNlbGVjdEZuID0gb25TZWxlY3Q7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvblNlbGVjdCwgdHJ1ZSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gc2Nyb2xsVG9Db21wb25lbnQob3B0aW9ucykge1xuICBjb25zdCBpbnN0YW5jZSA9IGdldENvbXBvbmVudEluc3RhbmNlKGFjdGl2ZUFwcFJlY29yZC52YWx1ZSwgb3B0aW9ucy5pZCk7XG4gIGlmIChpbnN0YW5jZSkge1xuICAgIGNvbnN0IFtlbF0gPSBnZXRSb290RWxlbWVudHNGcm9tQ29tcG9uZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgIGlmICh0eXBlb2YgZWwuc2Nyb2xsSW50b1ZpZXcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgZWwuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJvdW5kcyA9IGdldENvbXBvbmVudEJvdW5kaW5nUmVjdChpbnN0YW5jZSk7XG4gICAgICBjb25zdCBzY3JvbGxUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29uc3Qgc3R5bGVzID0ge1xuICAgICAgICAuLi5nZXRTdHlsZXMoYm91bmRzKSxcbiAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIlxuICAgICAgfTtcbiAgICAgIE9iamVjdC5hc3NpZ24oc2Nyb2xsVGFyZ2V0LnN0eWxlLCBzdHlsZXMpO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JvbGxUYXJnZXQpO1xuICAgICAgc2Nyb2xsVGFyZ2V0LnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsVGFyZ2V0KTtcbiAgICAgIH0sIDJlMyk7XG4gICAgfVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgYm91bmRzID0gZ2V0Q29tcG9uZW50Qm91bmRpbmdSZWN0KGluc3RhbmNlKTtcbiAgICAgIGlmIChib3VuZHMud2lkdGggfHwgYm91bmRzLmhlaWdodCkge1xuICAgICAgICBjb25zdCBuYW1lID0gZ2V0SW5zdGFuY2VOYW1lKGluc3RhbmNlKTtcbiAgICAgICAgY29uc3QgZWwyID0gZ2V0Q29udGFpbmVyRWxlbWVudCgpO1xuICAgICAgICBlbDIgPyB1cGRhdGUoeyAuLi5vcHRpb25zLCBuYW1lLCBib3VuZHMgfSkgOiBjcmVhdGUoeyAuLi5vcHRpb25zLCBuYW1lLCBib3VuZHMgfSk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmIChlbDIpXG4gICAgICAgICAgICBlbDIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9LCAxNTAwKTtcbiAgICAgIH1cbiAgICB9LCAxMjAwKTtcbiAgfVxufVxuXG4vLyBzcmMvY29yZS9jb21wb25lbnQtaW5zcGVjdG9yL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDIgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbnZhciBfYSwgX2I7XG4oX2IgPSAoX2EgPSB0YXJnZXQyKS5fX1ZVRV9ERVZUT09MU19DT01QT05FTlRfSU5TUEVDVE9SX0VOQUJMRURfXykgIT0gbnVsbCA/IF9iIDogX2EuX19WVUVfREVWVE9PTFNfQ09NUE9ORU5UX0lOU1BFQ1RPUl9FTkFCTEVEX18gPSB0cnVlO1xuZnVuY3Rpb24gdG9nZ2xlQ29tcG9uZW50SW5zcGVjdG9yRW5hYmxlZChlbmFibGVkKSB7XG4gIHRhcmdldDIuX19WVUVfREVWVE9PTFNfQ09NUE9ORU5UX0lOU1BFQ1RPUl9FTkFCTEVEX18gPSBlbmFibGVkO1xufVxuZnVuY3Rpb24gd2FpdEZvckluc3BlY3RvckluaXQoY2IpIHtcbiAgbGV0IHRvdGFsID0gMDtcbiAgY29uc3QgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgaWYgKHRhcmdldDIuX19WVUVfSU5TUEVDVE9SX18pIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgdG90YWwgKz0gMzA7XG4gICAgICBjYigpO1xuICAgIH1cbiAgICBpZiAodG90YWwgPj0gLyogNXMgKi9cbiAgICA1ZTMpXG4gICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgfSwgMzApO1xufVxuZnVuY3Rpb24gc2V0dXBJbnNwZWN0b3IoKSB7XG4gIGNvbnN0IGluc3BlY3RvciA9IHRhcmdldDIuX19WVUVfSU5TUEVDVE9SX187XG4gIGNvbnN0IF9vcGVuSW5FZGl0b3IgPSBpbnNwZWN0b3Iub3BlbkluRWRpdG9yO1xuICBpbnNwZWN0b3Iub3BlbkluRWRpdG9yID0gYXN5bmMgKC4uLnBhcmFtcykgPT4ge1xuICAgIGluc3BlY3Rvci5kaXNhYmxlKCk7XG4gICAgX29wZW5JbkVkaXRvciguLi5wYXJhbXMpO1xuICB9O1xufVxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50SW5zcGVjdG9yKCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICAgIHNldHVwSW5zcGVjdG9yKCk7XG4gICAgICByZXNvbHZlKHRhcmdldDIuX19WVUVfSU5TUEVDVE9SX18pO1xuICAgIH1cbiAgICBpZiAoIXRhcmdldDIuX19WVUVfSU5TUEVDVE9SX18pIHtcbiAgICAgIHdhaXRGb3JJbnNwZWN0b3JJbml0KCgpID0+IHtcbiAgICAgICAgc2V0dXAoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXR1cCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9lZGl0b3IudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9zaGFyZWQvc3R1Yi12dWUudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5mdW5jdGlvbiBpc1JlYWRvbmx5KHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1JlYWRvbmx5XCIgLyogSVNfUkVBRE9OTFkgKi9dKTtcbn1cbmZ1bmN0aW9uIGlzUmVhY3RpdmUodmFsdWUpIHtcbiAgaWYgKGlzUmVhZG9ubHkodmFsdWUpKSB7XG4gICAgcmV0dXJuIGlzUmVhY3RpdmUodmFsdWVbXCJfX3ZfcmF3XCIgLyogUkFXICovXSk7XG4gIH1cbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhY3RpdmVcIiAvKiBJU19SRUFDVElWRSAqL10pO1xufVxuZnVuY3Rpb24gaXNSZWYocikge1xuICByZXR1cm4gISEociAmJiByLl9fdl9pc1JlZiA9PT0gdHJ1ZSk7XG59XG5mdW5jdGlvbiB0b1JhdyhvYnNlcnZlZCkge1xuICBjb25zdCByYXcgPSBvYnNlcnZlZCAmJiBvYnNlcnZlZFtcIl9fdl9yYXdcIiAvKiBSQVcgKi9dO1xuICByZXR1cm4gcmF3ID8gdG9SYXcocmF3KSA6IG9ic2VydmVkO1xufVxudmFyIEZyYWdtZW50ID0gU3ltYm9sLmZvcihcInYtZmd0XCIpO1xuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvZWRpdG9yLnRzXG52YXIgU3RhdGVFZGl0b3IgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVmRWRpdG9yID0gbmV3IFJlZlN0YXRlRWRpdG9yKCk7XG4gIH1cbiAgc2V0KG9iamVjdCwgcGF0aCwgdmFsdWUsIGNiKSB7XG4gICAgY29uc3Qgc2VjdGlvbnMgPSBBcnJheS5pc0FycmF5KHBhdGgpID8gcGF0aCA6IHBhdGguc3BsaXQoXCIuXCIpO1xuICAgIGNvbnN0IG1hcmtSZWYgPSBmYWxzZTtcbiAgICB3aGlsZSAoc2VjdGlvbnMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IHNlY3Rpb25zLnNoaWZ0KCk7XG4gICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgTWFwKVxuICAgICAgICBvYmplY3QgPSBvYmplY3QuZ2V0KHNlY3Rpb24pO1xuICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgU2V0KVxuICAgICAgICBvYmplY3QgPSBBcnJheS5mcm9tKG9iamVjdC52YWx1ZXMoKSlbc2VjdGlvbl07XG4gICAgICBlbHNlIG9iamVjdCA9IG9iamVjdFtzZWN0aW9uXTtcbiAgICAgIGlmICh0aGlzLnJlZkVkaXRvci5pc1JlZihvYmplY3QpKVxuICAgICAgICBvYmplY3QgPSB0aGlzLnJlZkVkaXRvci5nZXQob2JqZWN0KTtcbiAgICB9XG4gICAgY29uc3QgZmllbGQgPSBzZWN0aW9uc1swXTtcbiAgICBjb25zdCBpdGVtID0gdGhpcy5yZWZFZGl0b3IuZ2V0KG9iamVjdClbZmllbGRdO1xuICAgIGlmIChjYikge1xuICAgICAgY2Iob2JqZWN0LCBmaWVsZCwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5yZWZFZGl0b3IuaXNSZWYoaXRlbSkpXG4gICAgICAgIHRoaXMucmVmRWRpdG9yLnNldChpdGVtLCB2YWx1ZSk7XG4gICAgICBlbHNlIGlmIChtYXJrUmVmKVxuICAgICAgICBvYmplY3RbZmllbGRdID0gdmFsdWU7XG4gICAgICBlbHNlXG4gICAgICAgIG9iamVjdFtmaWVsZF0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgZ2V0KG9iamVjdCwgcGF0aCkge1xuICAgIGNvbnN0IHNlY3Rpb25zID0gQXJyYXkuaXNBcnJheShwYXRoKSA/IHBhdGggOiBwYXRoLnNwbGl0KFwiLlwiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgTWFwKVxuICAgICAgICBvYmplY3QgPSBvYmplY3QuZ2V0KHNlY3Rpb25zW2ldKTtcbiAgICAgIGVsc2VcbiAgICAgICAgb2JqZWN0ID0gb2JqZWN0W3NlY3Rpb25zW2ldXTtcbiAgICAgIGlmICh0aGlzLnJlZkVkaXRvci5pc1JlZihvYmplY3QpKVxuICAgICAgICBvYmplY3QgPSB0aGlzLnJlZkVkaXRvci5nZXQob2JqZWN0KTtcbiAgICAgIGlmICghb2JqZWN0KVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG4gIGhhcyhvYmplY3QsIHBhdGgsIHBhcmVudCA9IGZhbHNlKSB7XG4gICAgaWYgKHR5cGVvZiBvYmplY3QgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgY29uc3Qgc2VjdGlvbnMgPSBBcnJheS5pc0FycmF5KHBhdGgpID8gcGF0aC5zbGljZSgpIDogcGF0aC5zcGxpdChcIi5cIik7XG4gICAgY29uc3Qgc2l6ZSA9ICFwYXJlbnQgPyAxIDogMjtcbiAgICB3aGlsZSAob2JqZWN0ICYmIHNlY3Rpb25zLmxlbmd0aCA+IHNpemUpIHtcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSBzZWN0aW9ucy5zaGlmdCgpO1xuICAgICAgb2JqZWN0ID0gb2JqZWN0W3NlY3Rpb25dO1xuICAgICAgaWYgKHRoaXMucmVmRWRpdG9yLmlzUmVmKG9iamVjdCkpXG4gICAgICAgIG9iamVjdCA9IHRoaXMucmVmRWRpdG9yLmdldChvYmplY3QpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgc2VjdGlvbnNbMF0pO1xuICB9XG4gIGNyZWF0ZURlZmF1bHRTZXRDYWxsYmFjayhzdGF0ZSkge1xuICAgIHJldHVybiAob2JqZWN0LCBmaWVsZCwgdmFsdWUpID0+IHtcbiAgICAgIGlmIChzdGF0ZS5yZW1vdmUgfHwgc3RhdGUubmV3S2V5KSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpXG4gICAgICAgICAgb2JqZWN0LnNwbGljZShmaWVsZCwgMSk7XG4gICAgICAgIGVsc2UgaWYgKHRvUmF3KG9iamVjdCkgaW5zdGFuY2VvZiBNYXApXG4gICAgICAgICAgb2JqZWN0LmRlbGV0ZShmaWVsZCk7XG4gICAgICAgIGVsc2UgaWYgKHRvUmF3KG9iamVjdCkgaW5zdGFuY2VvZiBTZXQpXG4gICAgICAgICAgb2JqZWN0LmRlbGV0ZShBcnJheS5mcm9tKG9iamVjdC52YWx1ZXMoKSlbZmllbGRdKTtcbiAgICAgICAgZWxzZSBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KG9iamVjdCwgZmllbGQpO1xuICAgICAgfVxuICAgICAgaWYgKCFzdGF0ZS5yZW1vdmUpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0MjIgPSBvYmplY3Rbc3RhdGUubmV3S2V5IHx8IGZpZWxkXTtcbiAgICAgICAgaWYgKHRoaXMucmVmRWRpdG9yLmlzUmVmKHRhcmdldDIyKSlcbiAgICAgICAgICB0aGlzLnJlZkVkaXRvci5zZXQodGFyZ2V0MjIsIHZhbHVlKTtcbiAgICAgICAgZWxzZSBpZiAodG9SYXcob2JqZWN0KSBpbnN0YW5jZW9mIE1hcClcbiAgICAgICAgICBvYmplY3Quc2V0KHN0YXRlLm5ld0tleSB8fCBmaWVsZCwgdmFsdWUpO1xuICAgICAgICBlbHNlIGlmICh0b1JhdyhvYmplY3QpIGluc3RhbmNlb2YgU2V0KVxuICAgICAgICAgIG9iamVjdC5hZGQodmFsdWUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgb2JqZWN0W3N0YXRlLm5ld0tleSB8fCBmaWVsZF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xudmFyIFJlZlN0YXRlRWRpdG9yID0gY2xhc3Mge1xuICBzZXQocmVmLCB2YWx1ZSkge1xuICAgIGlmIChpc1JlZihyZWYpKSB7XG4gICAgICByZWYudmFsdWUgPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJlZiBpbnN0YW5jZW9mIFNldCAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZWYuY2xlYXIoKTtcbiAgICAgICAgdmFsdWUuZm9yRWFjaCgodikgPT4gcmVmLmFkZCh2KSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGN1cnJlbnRLZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICAgICAgaWYgKHJlZiBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICBjb25zdCBwcmV2aW91c0tleXNTZXQyID0gbmV3IFNldChyZWYua2V5cygpKTtcbiAgICAgICAgY3VycmVudEtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgcmVmLnNldChrZXksIFJlZmxlY3QuZ2V0KHZhbHVlLCBrZXkpKTtcbiAgICAgICAgICBwcmV2aW91c0tleXNTZXQyLmRlbGV0ZShrZXkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJldmlvdXNLZXlzU2V0Mi5mb3JFYWNoKChrZXkpID0+IHJlZi5kZWxldGUoa2V5KSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByZXZpb3VzS2V5c1NldCA9IG5ldyBTZXQoT2JqZWN0LmtleXMocmVmKSk7XG4gICAgICBjdXJyZW50S2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgUmVmbGVjdC5zZXQocmVmLCBrZXksIFJlZmxlY3QuZ2V0KHZhbHVlLCBrZXkpKTtcbiAgICAgICAgcHJldmlvdXNLZXlzU2V0LmRlbGV0ZShrZXkpO1xuICAgICAgfSk7XG4gICAgICBwcmV2aW91c0tleXNTZXQuZm9yRWFjaCgoa2V5KSA9PiBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHJlZiwga2V5KSk7XG4gICAgfVxuICB9XG4gIGdldChyZWYpIHtcbiAgICByZXR1cm4gaXNSZWYocmVmKSA/IHJlZi52YWx1ZSA6IHJlZjtcbiAgfVxuICBpc1JlZihyZWYpIHtcbiAgICByZXR1cm4gaXNSZWYocmVmKSB8fCBpc1JlYWN0aXZlKHJlZik7XG4gIH1cbn07XG5hc3luYyBmdW5jdGlvbiBlZGl0Q29tcG9uZW50U3RhdGUocGF5bG9hZCwgc3RhdGVFZGl0b3IyKSB7XG4gIGNvbnN0IHsgcGF0aCwgbm9kZUlkLCBzdGF0ZSwgdHlwZSB9ID0gcGF5bG9hZDtcbiAgY29uc3QgaW5zdGFuY2UgPSBnZXRDb21wb25lbnRJbnN0YW5jZShhY3RpdmVBcHBSZWNvcmQudmFsdWUsIG5vZGVJZCk7XG4gIGlmICghaW5zdGFuY2UpXG4gICAgcmV0dXJuO1xuICBjb25zdCB0YXJnZXRQYXRoID0gcGF0aC5zbGljZSgpO1xuICBsZXQgdGFyZ2V0MjI7XG4gIGlmIChPYmplY3Qua2V5cyhpbnN0YW5jZS5wcm9wcykuaW5jbHVkZXMocGF0aFswXSkpIHtcbiAgICB0YXJnZXQyMiA9IGluc3RhbmNlLnByb3BzO1xuICB9IGVsc2UgaWYgKGluc3RhbmNlLmRldnRvb2xzUmF3U2V0dXBTdGF0ZSAmJiBPYmplY3Qua2V5cyhpbnN0YW5jZS5kZXZ0b29sc1Jhd1NldHVwU3RhdGUpLmluY2x1ZGVzKHBhdGhbMF0pKSB7XG4gICAgdGFyZ2V0MjIgPSBpbnN0YW5jZS5kZXZ0b29sc1Jhd1NldHVwU3RhdGU7XG4gIH0gZWxzZSBpZiAoaW5zdGFuY2UuZGF0YSAmJiBPYmplY3Qua2V5cyhpbnN0YW5jZS5kYXRhKS5pbmNsdWRlcyhwYXRoWzBdKSkge1xuICAgIHRhcmdldDIyID0gaW5zdGFuY2UuZGF0YTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQyMiA9IGluc3RhbmNlLnByb3h5O1xuICB9XG4gIGlmICh0YXJnZXQyMiAmJiB0YXJnZXRQYXRoKSB7XG4gICAgaWYgKHN0YXRlLnR5cGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZSA9PT0gXCJyZWFjdGl2ZVwiKSB7XG4gICAgfVxuICAgIHN0YXRlRWRpdG9yMi5zZXQodGFyZ2V0MjIsIHRhcmdldFBhdGgsIHN0YXRlLnZhbHVlLCBzdGF0ZUVkaXRvcjIuY3JlYXRlRGVmYXVsdFNldENhbGxiYWNrKHN0YXRlKSk7XG4gIH1cbn1cbnZhciBzdGF0ZUVkaXRvciA9IG5ldyBTdGF0ZUVkaXRvcigpO1xuYXN5bmMgZnVuY3Rpb24gZWRpdFN0YXRlKHBheWxvYWQpIHtcbiAgZWRpdENvbXBvbmVudFN0YXRlKHBheWxvYWQsIHN0YXRlRWRpdG9yKTtcbn1cblxuLy8gc3JjL2NvcmUvb3Blbi1pbi1lZGl0b3IvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0NSB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuXG4vLyBzcmMvY3R4L3N0YXRlLnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIGdsb2JhbCwgaXNVcmxTdHJpbmcgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbmltcG9ydCB7IGRlYm91bmNlIGFzIGRlYm91bmNlMyB9IGZyb20gXCJwZXJmZWN0LWRlYm91bmNlXCI7XG5cbi8vIHNyYy9jb3JlL3RpbWVsaW5lL3N0b3JhZ2UudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBpc0Jyb3dzZXIgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbnZhciBUSU1FTElORV9MQVlFUlNfU1RBVEVfU1RPUkFHRV9JRCA9IFwiX19WVUVfREVWVE9PTFNfS0lUX1RJTUVMSU5FX0xBWUVSU19TVEFURV9fXCI7XG5mdW5jdGlvbiBhZGRUaW1lbGluZUxheWVyc1N0YXRlVG9TdG9yYWdlKHN0YXRlKSB7XG4gIGlmICghaXNCcm93c2VyIHx8IHR5cGVvZiBsb2NhbFN0b3JhZ2UgPT09IFwidW5kZWZpbmVkXCIgfHwgbG9jYWxTdG9yYWdlID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFRJTUVMSU5FX0xBWUVSU19TVEFURV9TVE9SQUdFX0lELCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xufVxuZnVuY3Rpb24gZ2V0VGltZWxpbmVMYXllcnNTdGF0ZUZyb21TdG9yYWdlKCkge1xuICBpZiAoIWlzQnJvd3NlciB8fCB0eXBlb2YgbG9jYWxTdG9yYWdlID09PSBcInVuZGVmaW5lZFwiIHx8IGxvY2FsU3RvcmFnZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiB7XG4gICAgICByZWNvcmRpbmdTdGF0ZTogZmFsc2UsXG4gICAgICBtb3VzZUV2ZW50RW5hYmxlZDogZmFsc2UsXG4gICAgICBrZXlib2FyZEV2ZW50RW5hYmxlZDogZmFsc2UsXG4gICAgICBjb21wb25lbnRFdmVudEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgcGVyZm9ybWFuY2VFdmVudEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgc2VsZWN0ZWQ6IFwiXCJcbiAgICB9O1xuICB9XG4gIGNvbnN0IHN0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVElNRUxJTkVfTEFZRVJTX1NUQVRFX1NUT1JBR0VfSUQpO1xuICByZXR1cm4gc3RhdGUgPyBKU09OLnBhcnNlKHN0YXRlKSA6IHtcbiAgICByZWNvcmRpbmdTdGF0ZTogZmFsc2UsXG4gICAgbW91c2VFdmVudEVuYWJsZWQ6IGZhbHNlLFxuICAgIGtleWJvYXJkRXZlbnRFbmFibGVkOiBmYWxzZSxcbiAgICBjb21wb25lbnRFdmVudEVuYWJsZWQ6IGZhbHNlLFxuICAgIHBlcmZvcm1hbmNlRXZlbnRFbmFibGVkOiBmYWxzZSxcbiAgICBzZWxlY3RlZDogXCJcIlxuICB9O1xufVxuXG4vLyBzcmMvY3R4L2hvb2sudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBjcmVhdGVIb29rcyB9IGZyb20gXCJob29rYWJsZVwiO1xuaW1wb3J0IHsgZGVib3VuY2UgYXMgZGVib3VuY2UyIH0gZnJvbSBcInBlcmZlY3QtZGVib3VuY2VcIjtcblxuLy8gc3JjL2N0eC9pbnNwZWN0b3IudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0NCB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tIFwicGVyZmVjdC1kZWJvdW5jZVwiO1xuXG4vLyBzcmMvY3R4L3RpbWVsaW5lLnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDMgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbnZhciBfYTIsIF9iMjtcbihfYjIgPSAoX2EyID0gdGFyZ2V0MykuX19WVUVfREVWVE9PTFNfS0lUX1RJTUVMSU5FX0xBWUVSUykgIT0gbnVsbCA/IF9iMiA6IF9hMi5fX1ZVRV9ERVZUT09MU19LSVRfVElNRUxJTkVfTEFZRVJTID0gW107XG52YXIgZGV2dG9vbHNUaW1lbGluZUxheWVycyA9IG5ldyBQcm94eSh0YXJnZXQzLl9fVlVFX0RFVlRPT0xTX0tJVF9USU1FTElORV9MQVlFUlMsIHtcbiAgZ2V0KHRhcmdldDIyLCBwcm9wLCByZWNlaXZlcikge1xuICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQyMiwgcHJvcCwgcmVjZWl2ZXIpO1xuICB9XG59KTtcbmZ1bmN0aW9uIGFkZFRpbWVsaW5lTGF5ZXIob3B0aW9ucywgZGVzY3JpcHRvcikge1xuICBkZXZ0b29sc1N0YXRlLnRpbWVsaW5lTGF5ZXJzU3RhdGVbZGVzY3JpcHRvci5pZF0gPSBmYWxzZTtcbiAgZGV2dG9vbHNUaW1lbGluZUxheWVycy5wdXNoKHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGRlc2NyaXB0b3JJZDogZGVzY3JpcHRvci5pZCxcbiAgICBhcHBSZWNvcmQ6IGdldEFwcFJlY29yZChkZXNjcmlwdG9yLmFwcClcbiAgfSk7XG59XG5mdW5jdGlvbiB1cGRhdGVUaW1lbGluZUxheWVyc1N0YXRlKHN0YXRlKSB7XG4gIGNvbnN0IHVwZGF0ZWRTdGF0ZSA9IHtcbiAgICAuLi5kZXZ0b29sc1N0YXRlLnRpbWVsaW5lTGF5ZXJzU3RhdGUsXG4gICAgLi4uc3RhdGVcbiAgfTtcbiAgYWRkVGltZWxpbmVMYXllcnNTdGF0ZVRvU3RvcmFnZSh1cGRhdGVkU3RhdGUpO1xuICB1cGRhdGVEZXZUb29sc1N0YXRlKHtcbiAgICB0aW1lbGluZUxheWVyc1N0YXRlOiB1cGRhdGVkU3RhdGVcbiAgfSk7XG59XG5cbi8vIHNyYy9jdHgvaW5zcGVjdG9yLnRzXG52YXIgX2EzLCBfYjM7XG4oX2IzID0gKF9hMyA9IHRhcmdldDQpLl9fVlVFX0RFVlRPT0xTX0tJVF9JTlNQRUNUT1JfXykgIT0gbnVsbCA/IF9iMyA6IF9hMy5fX1ZVRV9ERVZUT09MU19LSVRfSU5TUEVDVE9SX18gPSBbXTtcbnZhciBkZXZ0b29sc0luc3BlY3RvciA9IG5ldyBQcm94eSh0YXJnZXQ0Ll9fVlVFX0RFVlRPT0xTX0tJVF9JTlNQRUNUT1JfXywge1xuICBnZXQodGFyZ2V0MjIsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldDIyLCBwcm9wLCByZWNlaXZlcik7XG4gIH1cbn0pO1xudmFyIGNhbGxJbnNwZWN0b3JVcGRhdGVkSG9vayA9IGRlYm91bmNlKCgpID0+IHtcbiAgZGV2dG9vbHNDb250ZXh0Lmhvb2tzLmNhbGxIb29rKFwic2VuZEluc3BlY3RvclRvQ2xpZW50XCIgLyogU0VORF9JTlNQRUNUT1JfVE9fQ0xJRU5UICovLCBnZXRBY3RpdmVJbnNwZWN0b3JzKCkpO1xufSk7XG5mdW5jdGlvbiBhZGRJbnNwZWN0b3IoaW5zcGVjdG9yLCBkZXNjcmlwdG9yKSB7XG4gIHZhciBfYTI1LCBfYjI1O1xuICBkZXZ0b29sc0luc3BlY3Rvci5wdXNoKHtcbiAgICBvcHRpb25zOiBpbnNwZWN0b3IsXG4gICAgZGVzY3JpcHRvcixcbiAgICB0cmVlRmlsdGVyUGxhY2Vob2xkZXI6IChfYTI1ID0gaW5zcGVjdG9yLnRyZWVGaWx0ZXJQbGFjZWhvbGRlcikgIT0gbnVsbCA/IF9hMjUgOiBcIlNlYXJjaCB0cmVlLi4uXCIsXG4gICAgc3RhdGVGaWx0ZXJQbGFjZWhvbGRlcjogKF9iMjUgPSBpbnNwZWN0b3Iuc3RhdGVGaWx0ZXJQbGFjZWhvbGRlcikgIT0gbnVsbCA/IF9iMjUgOiBcIlNlYXJjaCBzdGF0ZS4uLlwiLFxuICAgIHRyZWVGaWx0ZXI6IFwiXCIsXG4gICAgc2VsZWN0ZWROb2RlSWQ6IFwiXCIsXG4gICAgYXBwUmVjb3JkOiBnZXRBcHBSZWNvcmQoZGVzY3JpcHRvci5hcHApXG4gIH0pO1xuICBjYWxsSW5zcGVjdG9yVXBkYXRlZEhvb2soKTtcbn1cbmZ1bmN0aW9uIGdldEFjdGl2ZUluc3BlY3RvcnMoKSB7XG4gIHJldHVybiBkZXZ0b29sc0luc3BlY3Rvci5maWx0ZXIoKGluc3BlY3RvcikgPT4gaW5zcGVjdG9yLmRlc2NyaXB0b3IuYXBwID09PSBhY3RpdmVBcHBSZWNvcmQudmFsdWUuYXBwKS5maWx0ZXIoKGluc3BlY3RvcikgPT4gaW5zcGVjdG9yLmRlc2NyaXB0b3IuaWQgIT09IFwiY29tcG9uZW50c1wiKS5tYXAoKGluc3BlY3RvcikgPT4ge1xuICAgIHZhciBfYTI1O1xuICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBpbnNwZWN0b3IuZGVzY3JpcHRvcjtcbiAgICBjb25zdCBvcHRpb25zID0gaW5zcGVjdG9yLm9wdGlvbnM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBvcHRpb25zLmlkLFxuICAgICAgbGFiZWw6IG9wdGlvbnMubGFiZWwsXG4gICAgICBsb2dvOiBkZXNjcmlwdG9yLmxvZ28sXG4gICAgICBpY29uOiBgY3VzdG9tLWljLWJhc2VsaW5lLSR7KF9hMjUgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmljb24pID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnJlcGxhY2UoL18vZywgXCItXCIpfWAsXG4gICAgICBwYWNrYWdlTmFtZTogZGVzY3JpcHRvci5wYWNrYWdlTmFtZSxcbiAgICAgIGhvbWVwYWdlOiBkZXNjcmlwdG9yLmhvbWVwYWdlLFxuICAgICAgcGx1Z2luSWQ6IGRlc2NyaXB0b3IuaWRcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEluc3BlY3RvckluZm8oaWQpIHtcbiAgY29uc3QgaW5zcGVjdG9yID0gZ2V0SW5zcGVjdG9yKGlkLCBhY3RpdmVBcHBSZWNvcmQudmFsdWUuYXBwKTtcbiAgaWYgKCFpbnNwZWN0b3IpXG4gICAgcmV0dXJuO1xuICBjb25zdCBkZXNjcmlwdG9yID0gaW5zcGVjdG9yLmRlc2NyaXB0b3I7XG4gIGNvbnN0IG9wdGlvbnMgPSBpbnNwZWN0b3Iub3B0aW9ucztcbiAgY29uc3QgdGltZWxpbmVMYXllcnMgPSBkZXZ0b29sc1RpbWVsaW5lTGF5ZXJzLmZpbHRlcigobGF5ZXIpID0+IGxheWVyLmRlc2NyaXB0b3JJZCA9PT0gZGVzY3JpcHRvci5pZCkubWFwKChpdGVtKSA9PiAoe1xuICAgIGlkOiBpdGVtLmlkLFxuICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxuICAgIGNvbG9yOiBpdGVtLmNvbG9yXG4gIH0pKTtcbiAgcmV0dXJuIHtcbiAgICBpZDogb3B0aW9ucy5pZCxcbiAgICBsYWJlbDogb3B0aW9ucy5sYWJlbCxcbiAgICBsb2dvOiBkZXNjcmlwdG9yLmxvZ28sXG4gICAgcGFja2FnZU5hbWU6IGRlc2NyaXB0b3IucGFja2FnZU5hbWUsXG4gICAgaG9tZXBhZ2U6IGRlc2NyaXB0b3IuaG9tZXBhZ2UsXG4gICAgdGltZWxpbmVMYXllcnMsXG4gICAgdHJlZUZpbHRlclBsYWNlaG9sZGVyOiBpbnNwZWN0b3IudHJlZUZpbHRlclBsYWNlaG9sZGVyLFxuICAgIHN0YXRlRmlsdGVyUGxhY2Vob2xkZXI6IGluc3BlY3Rvci5zdGF0ZUZpbHRlclBsYWNlaG9sZGVyXG4gIH07XG59XG5mdW5jdGlvbiBnZXRJbnNwZWN0b3IoaWQsIGFwcCkge1xuICByZXR1cm4gZGV2dG9vbHNJbnNwZWN0b3IuZmluZCgoaW5zcGVjdG9yKSA9PiBpbnNwZWN0b3Iub3B0aW9ucy5pZCA9PT0gaWQgJiYgKGFwcCA/IGluc3BlY3Rvci5kZXNjcmlwdG9yLmFwcCA9PT0gYXBwIDogdHJ1ZSkpO1xufVxuZnVuY3Rpb24gZ2V0SW5zcGVjdG9yQWN0aW9ucyhpZCkge1xuICBjb25zdCBpbnNwZWN0b3IgPSBnZXRJbnNwZWN0b3IoaWQpO1xuICByZXR1cm4gaW5zcGVjdG9yID09IG51bGwgPyB2b2lkIDAgOiBpbnNwZWN0b3Iub3B0aW9ucy5hY3Rpb25zO1xufVxuZnVuY3Rpb24gZ2V0SW5zcGVjdG9yTm9kZUFjdGlvbnMoaWQpIHtcbiAgY29uc3QgaW5zcGVjdG9yID0gZ2V0SW5zcGVjdG9yKGlkKTtcbiAgcmV0dXJuIGluc3BlY3RvciA9PSBudWxsID8gdm9pZCAwIDogaW5zcGVjdG9yLm9wdGlvbnMubm9kZUFjdGlvbnM7XG59XG5cbi8vIHNyYy9jdHgvaG9vay50c1xudmFyIERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5cyA9IC8qIEBfX1BVUkVfXyAqLyAoKERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5czIpID0+IHtcbiAgRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMltcIlZJU0lUX0NPTVBPTkVOVF9UUkVFXCJdID0gXCJ2aXNpdENvbXBvbmVudFRyZWVcIjtcbiAgRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMltcIklOU1BFQ1RfQ09NUE9ORU5UXCJdID0gXCJpbnNwZWN0Q29tcG9uZW50XCI7XG4gIERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5czJbXCJFRElUX0NPTVBPTkVOVF9TVEFURVwiXSA9IFwiZWRpdENvbXBvbmVudFN0YXRlXCI7XG4gIERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5czJbXCJHRVRfSU5TUEVDVE9SX1RSRUVcIl0gPSBcImdldEluc3BlY3RvclRyZWVcIjtcbiAgRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMltcIkdFVF9JTlNQRUNUT1JfU1RBVEVcIl0gPSBcImdldEluc3BlY3RvclN0YXRlXCI7XG4gIERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5czJbXCJFRElUX0lOU1BFQ1RPUl9TVEFURVwiXSA9IFwiZWRpdEluc3BlY3RvclN0YXRlXCI7XG4gIERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5czJbXCJJTlNQRUNUX1RJTUVMSU5FX0VWRU5UXCJdID0gXCJpbnNwZWN0VGltZWxpbmVFdmVudFwiO1xuICBEZXZUb29sc1Y2UGx1Z2luQVBJSG9va0tleXMyW1wiVElNRUxJTkVfQ0xFQVJFRFwiXSA9IFwidGltZWxpbmVDbGVhcmVkXCI7XG4gIERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5czJbXCJTRVRfUExVR0lOX1NFVFRJTkdTXCJdID0gXCJzZXRQbHVnaW5TZXR0aW5nc1wiO1xuICByZXR1cm4gRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMjtcbn0pKERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5cyB8fCB7fSk7XG52YXIgRGV2VG9vbHNDb250ZXh0SG9va0tleXMgPSAvKiBAX19QVVJFX18gKi8gKChEZXZUb29sc0NvbnRleHRIb29rS2V5czIpID0+IHtcbiAgRGV2VG9vbHNDb250ZXh0SG9va0tleXMyW1wiQUREX0lOU1BFQ1RPUlwiXSA9IFwiYWRkSW5zcGVjdG9yXCI7XG4gIERldlRvb2xzQ29udGV4dEhvb2tLZXlzMltcIlNFTkRfSU5TUEVDVE9SX1RSRUVcIl0gPSBcInNlbmRJbnNwZWN0b3JUcmVlXCI7XG4gIERldlRvb2xzQ29udGV4dEhvb2tLZXlzMltcIlNFTkRfSU5TUEVDVE9SX1NUQVRFXCJdID0gXCJzZW5kSW5zcGVjdG9yU3RhdGVcIjtcbiAgRGV2VG9vbHNDb250ZXh0SG9va0tleXMyW1wiQ1VTVE9NX0lOU1BFQ1RPUl9TRUxFQ1RfTk9ERVwiXSA9IFwiY3VzdG9tSW5zcGVjdG9yU2VsZWN0Tm9kZVwiO1xuICBEZXZUb29sc0NvbnRleHRIb29rS2V5czJbXCJUSU1FTElORV9MQVlFUl9BRERFRFwiXSA9IFwidGltZWxpbmVMYXllckFkZGVkXCI7XG4gIERldlRvb2xzQ29udGV4dEhvb2tLZXlzMltcIlRJTUVMSU5FX0VWRU5UX0FEREVEXCJdID0gXCJ0aW1lbGluZUV2ZW50QWRkZWRcIjtcbiAgRGV2VG9vbHNDb250ZXh0SG9va0tleXMyW1wiR0VUX0NPTVBPTkVOVF9JTlNUQU5DRVNcIl0gPSBcImdldENvbXBvbmVudEluc3RhbmNlc1wiO1xuICBEZXZUb29sc0NvbnRleHRIb29rS2V5czJbXCJHRVRfQ09NUE9ORU5UX0JPVU5EU1wiXSA9IFwiZ2V0Q29tcG9uZW50Qm91bmRzXCI7XG4gIERldlRvb2xzQ29udGV4dEhvb2tLZXlzMltcIkdFVF9DT01QT05FTlRfTkFNRVwiXSA9IFwiZ2V0Q29tcG9uZW50TmFtZVwiO1xuICBEZXZUb29sc0NvbnRleHRIb29rS2V5czJbXCJDT01QT05FTlRfSElHSExJR0hUXCJdID0gXCJjb21wb25lbnRIaWdobGlnaHRcIjtcbiAgRGV2VG9vbHNDb250ZXh0SG9va0tleXMyW1wiQ09NUE9ORU5UX1VOSElHSExJR0hUXCJdID0gXCJjb21wb25lbnRVbmhpZ2hsaWdodFwiO1xuICByZXR1cm4gRGV2VG9vbHNDb250ZXh0SG9va0tleXMyO1xufSkoRGV2VG9vbHNDb250ZXh0SG9va0tleXMgfHwge30pO1xudmFyIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMgPSAvKiBAX19QVVJFX18gKi8gKChEZXZUb29sc01lc3NhZ2luZ0hvb2tLZXlzMikgPT4ge1xuICBEZXZUb29sc01lc3NhZ2luZ0hvb2tLZXlzMltcIlNFTkRfSU5TUEVDVE9SX1RSRUVfVE9fQ0xJRU5UXCJdID0gXCJzZW5kSW5zcGVjdG9yVHJlZVRvQ2xpZW50XCI7XG4gIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMyW1wiU0VORF9JTlNQRUNUT1JfU1RBVEVfVE9fQ0xJRU5UXCJdID0gXCJzZW5kSW5zcGVjdG9yU3RhdGVUb0NsaWVudFwiO1xuICBEZXZUb29sc01lc3NhZ2luZ0hvb2tLZXlzMltcIlNFTkRfVElNRUxJTkVfRVZFTlRfVE9fQ0xJRU5UXCJdID0gXCJzZW5kVGltZWxpbmVFdmVudFRvQ2xpZW50XCI7XG4gIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMyW1wiU0VORF9JTlNQRUNUT1JfVE9fQ0xJRU5UXCJdID0gXCJzZW5kSW5zcGVjdG9yVG9DbGllbnRcIjtcbiAgRGV2VG9vbHNNZXNzYWdpbmdIb29rS2V5czJbXCJTRU5EX0FDVElWRV9BUFBfVU5NT1VOVEVEX1RPX0NMSUVOVFwiXSA9IFwic2VuZEFjdGl2ZUFwcFVwZGF0ZWRUb0NsaWVudFwiO1xuICBEZXZUb29sc01lc3NhZ2luZ0hvb2tLZXlzMltcIkRFVlRPT0xTX1NUQVRFX1VQREFURURcIl0gPSBcImRldnRvb2xzU3RhdGVVcGRhdGVkXCI7XG4gIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMyW1wiREVWVE9PTFNfQ09OTkVDVEVEX1VQREFURURcIl0gPSBcImRldnRvb2xzQ29ubmVjdGVkVXBkYXRlZFwiO1xuICBEZXZUb29sc01lc3NhZ2luZ0hvb2tLZXlzMltcIlJPVVRFUl9JTkZPX1VQREFURURcIl0gPSBcInJvdXRlckluZm9VcGRhdGVkXCI7XG4gIHJldHVybiBEZXZUb29sc01lc3NhZ2luZ0hvb2tLZXlzMjtcbn0pKERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMgfHwge30pO1xuZnVuY3Rpb24gY3JlYXRlRGV2VG9vbHNDdHhIb29rcygpIHtcbiAgY29uc3QgaG9va3MyID0gY3JlYXRlSG9va3MoKTtcbiAgaG9va3MyLmhvb2soXCJhZGRJbnNwZWN0b3JcIiAvKiBBRERfSU5TUEVDVE9SICovLCAoeyBpbnNwZWN0b3IsIHBsdWdpbiB9KSA9PiB7XG4gICAgYWRkSW5zcGVjdG9yKGluc3BlY3RvciwgcGx1Z2luLmRlc2NyaXB0b3IpO1xuICB9KTtcbiAgY29uc3QgZGVib3VuY2VTZW5kSW5zcGVjdG9yVHJlZSA9IGRlYm91bmNlMihhc3luYyAoeyBpbnNwZWN0b3JJZCwgcGx1Z2luIH0pID0+IHtcbiAgICB2YXIgX2EyNTtcbiAgICBpZiAoIWluc3BlY3RvcklkIHx8ICEoKF9hMjUgPSBwbHVnaW4gPT0gbnVsbCA/IHZvaWQgMCA6IHBsdWdpbi5kZXNjcmlwdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5hcHApIHx8IGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBpbnNwZWN0b3IgPSBnZXRJbnNwZWN0b3IoaW5zcGVjdG9ySWQsIHBsdWdpbi5kZXNjcmlwdG9yLmFwcCk7XG4gICAgY29uc3QgX3BheWxvYWQgPSB7XG4gICAgICBhcHA6IHBsdWdpbi5kZXNjcmlwdG9yLmFwcCxcbiAgICAgIGluc3BlY3RvcklkLFxuICAgICAgZmlsdGVyOiAoaW5zcGVjdG9yID09IG51bGwgPyB2b2lkIDAgOiBpbnNwZWN0b3IudHJlZUZpbHRlcikgfHwgXCJcIixcbiAgICAgIHJvb3ROb2RlczogW11cbiAgICB9O1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBob29rczIuY2FsbEhvb2tXaXRoKGFzeW5jIChjYWxsYmFja3MpID0+IHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tzLm1hcCgoY2IpID0+IGNiKF9wYXlsb2FkKSkpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9LCBcImdldEluc3BlY3RvclRyZWVcIiAvKiBHRVRfSU5TUEVDVE9SX1RSRUUgKi8pO1xuICAgIH0pO1xuICAgIGhvb2tzMi5jYWxsSG9va1dpdGgoYXN5bmMgKGNhbGxiYWNrcykgPT4ge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tzLm1hcCgoY2IpID0+IGNiKHtcbiAgICAgICAgaW5zcGVjdG9ySWQsXG4gICAgICAgIHJvb3ROb2RlczogX3BheWxvYWQucm9vdE5vZGVzXG4gICAgICB9KSkpO1xuICAgIH0sIFwic2VuZEluc3BlY3RvclRyZWVUb0NsaWVudFwiIC8qIFNFTkRfSU5TUEVDVE9SX1RSRUVfVE9fQ0xJRU5UICovKTtcbiAgfSwgMTIwKTtcbiAgaG9va3MyLmhvb2soXCJzZW5kSW5zcGVjdG9yVHJlZVwiIC8qIFNFTkRfSU5TUEVDVE9SX1RSRUUgKi8sIGRlYm91bmNlU2VuZEluc3BlY3RvclRyZWUpO1xuICBjb25zdCBkZWJvdW5jZVNlbmRJbnNwZWN0b3JTdGF0ZSA9IGRlYm91bmNlMihhc3luYyAoeyBpbnNwZWN0b3JJZCwgcGx1Z2luIH0pID0+IHtcbiAgICB2YXIgX2EyNTtcbiAgICBpZiAoIWluc3BlY3RvcklkIHx8ICEoKF9hMjUgPSBwbHVnaW4gPT0gbnVsbCA/IHZvaWQgMCA6IHBsdWdpbi5kZXNjcmlwdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5hcHApIHx8IGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBpbnNwZWN0b3IgPSBnZXRJbnNwZWN0b3IoaW5zcGVjdG9ySWQsIHBsdWdpbi5kZXNjcmlwdG9yLmFwcCk7XG4gICAgY29uc3QgX3BheWxvYWQgPSB7XG4gICAgICBhcHA6IHBsdWdpbi5kZXNjcmlwdG9yLmFwcCxcbiAgICAgIGluc3BlY3RvcklkLFxuICAgICAgbm9kZUlkOiAoaW5zcGVjdG9yID09IG51bGwgPyB2b2lkIDAgOiBpbnNwZWN0b3Iuc2VsZWN0ZWROb2RlSWQpIHx8IFwiXCIsXG4gICAgICBzdGF0ZTogbnVsbFxuICAgIH07XG4gICAgY29uc3QgY3R4ID0ge1xuICAgICAgY3VycmVudFRhYjogYGN1c3RvbS1pbnNwZWN0b3I6JHtpbnNwZWN0b3JJZH1gXG4gICAgfTtcbiAgICBpZiAoX3BheWxvYWQubm9kZUlkKSB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBob29rczIuY2FsbEhvb2tXaXRoKGFzeW5jIChjYWxsYmFja3MpID0+IHtcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja3MubWFwKChjYikgPT4gY2IoX3BheWxvYWQsIGN0eCkpKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIFwiZ2V0SW5zcGVjdG9yU3RhdGVcIiAvKiBHRVRfSU5TUEVDVE9SX1NUQVRFICovKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBob29rczIuY2FsbEhvb2tXaXRoKGFzeW5jIChjYWxsYmFja3MpID0+IHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrcy5tYXAoKGNiKSA9PiBjYih7XG4gICAgICAgIGluc3BlY3RvcklkLFxuICAgICAgICBub2RlSWQ6IF9wYXlsb2FkLm5vZGVJZCxcbiAgICAgICAgc3RhdGU6IF9wYXlsb2FkLnN0YXRlXG4gICAgICB9KSkpO1xuICAgIH0sIFwic2VuZEluc3BlY3RvclN0YXRlVG9DbGllbnRcIiAvKiBTRU5EX0lOU1BFQ1RPUl9TVEFURV9UT19DTElFTlQgKi8pO1xuICB9LCAxMjApO1xuICBob29rczIuaG9vayhcInNlbmRJbnNwZWN0b3JTdGF0ZVwiIC8qIFNFTkRfSU5TUEVDVE9SX1NUQVRFICovLCBkZWJvdW5jZVNlbmRJbnNwZWN0b3JTdGF0ZSk7XG4gIGhvb2tzMi5ob29rKFwiY3VzdG9tSW5zcGVjdG9yU2VsZWN0Tm9kZVwiIC8qIENVU1RPTV9JTlNQRUNUT1JfU0VMRUNUX05PREUgKi8sICh7IGluc3BlY3RvcklkLCBub2RlSWQsIHBsdWdpbiB9KSA9PiB7XG4gICAgY29uc3QgaW5zcGVjdG9yID0gZ2V0SW5zcGVjdG9yKGluc3BlY3RvcklkLCBwbHVnaW4uZGVzY3JpcHRvci5hcHApO1xuICAgIGlmICghaW5zcGVjdG9yKVxuICAgICAgcmV0dXJuO1xuICAgIGluc3BlY3Rvci5zZWxlY3RlZE5vZGVJZCA9IG5vZGVJZDtcbiAgfSk7XG4gIGhvb2tzMi5ob29rKFwidGltZWxpbmVMYXllckFkZGVkXCIgLyogVElNRUxJTkVfTEFZRVJfQURERUQgKi8sICh7IG9wdGlvbnMsIHBsdWdpbiB9KSA9PiB7XG4gICAgYWRkVGltZWxpbmVMYXllcihvcHRpb25zLCBwbHVnaW4uZGVzY3JpcHRvcik7XG4gIH0pO1xuICBob29rczIuaG9vayhcInRpbWVsaW5lRXZlbnRBZGRlZFwiIC8qIFRJTUVMSU5FX0VWRU5UX0FEREVEICovLCAoeyBvcHRpb25zLCBwbHVnaW4gfSkgPT4ge1xuICAgIHZhciBfYTI1O1xuICAgIGNvbnN0IGludGVybmFsTGF5ZXJJZHMgPSBbXCJwZXJmb3JtYW5jZVwiLCBcImNvbXBvbmVudC1ldmVudFwiLCBcImtleWJvYXJkXCIsIFwibW91c2VcIl07XG4gICAgaWYgKGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZCB8fCAhKChfYTI1ID0gZGV2dG9vbHNTdGF0ZS50aW1lbGluZUxheWVyc1N0YXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNVtwbHVnaW4uZGVzY3JpcHRvci5pZF0pICYmICFpbnRlcm5hbExheWVySWRzLmluY2x1ZGVzKG9wdGlvbnMubGF5ZXJJZCkpXG4gICAgICByZXR1cm47XG4gICAgaG9va3MyLmNhbGxIb29rV2l0aChhc3luYyAoY2FsbGJhY2tzKSA9PiB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja3MubWFwKChjYikgPT4gY2Iob3B0aW9ucykpKTtcbiAgICB9LCBcInNlbmRUaW1lbGluZUV2ZW50VG9DbGllbnRcIiAvKiBTRU5EX1RJTUVMSU5FX0VWRU5UX1RPX0NMSUVOVCAqLyk7XG4gIH0pO1xuICBob29rczIuaG9vayhcImdldENvbXBvbmVudEluc3RhbmNlc1wiIC8qIEdFVF9DT01QT05FTlRfSU5TVEFOQ0VTICovLCBhc3luYyAoeyBhcHAgfSkgPT4ge1xuICAgIGNvbnN0IGFwcFJlY29yZCA9IGFwcC5fX1ZVRV9ERVZUT09MU19ORVhUX0FQUF9SRUNPUkRfXztcbiAgICBpZiAoIWFwcFJlY29yZClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGFwcElkID0gYXBwUmVjb3JkLmlkLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgaW5zdGFuY2VzID0gWy4uLmFwcFJlY29yZC5pbnN0YW5jZU1hcF0uZmlsdGVyKChba2V5XSkgPT4ga2V5LnNwbGl0KFwiOlwiKVswXSA9PT0gYXBwSWQpLm1hcCgoWywgaW5zdGFuY2VdKSA9PiBpbnN0YW5jZSk7XG4gICAgcmV0dXJuIGluc3RhbmNlcztcbiAgfSk7XG4gIGhvb2tzMi5ob29rKFwiZ2V0Q29tcG9uZW50Qm91bmRzXCIgLyogR0VUX0NPTVBPTkVOVF9CT1VORFMgKi8sIGFzeW5jICh7IGluc3RhbmNlIH0pID0+IHtcbiAgICBjb25zdCBib3VuZHMgPSBnZXRDb21wb25lbnRCb3VuZGluZ1JlY3QoaW5zdGFuY2UpO1xuICAgIHJldHVybiBib3VuZHM7XG4gIH0pO1xuICBob29rczIuaG9vayhcImdldENvbXBvbmVudE5hbWVcIiAvKiBHRVRfQ09NUE9ORU5UX05BTUUgKi8sICh7IGluc3RhbmNlIH0pID0+IHtcbiAgICBjb25zdCBuYW1lID0gZ2V0SW5zdGFuY2VOYW1lKGluc3RhbmNlKTtcbiAgICByZXR1cm4gbmFtZTtcbiAgfSk7XG4gIGhvb2tzMi5ob29rKFwiY29tcG9uZW50SGlnaGxpZ2h0XCIgLyogQ09NUE9ORU5UX0hJR0hMSUdIVCAqLywgKHsgdWlkIH0pID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5pbnN0YW5jZU1hcC5nZXQodWlkKTtcbiAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgIGhpZ2hsaWdodChpbnN0YW5jZSk7XG4gICAgfVxuICB9KTtcbiAgaG9va3MyLmhvb2soXCJjb21wb25lbnRVbmhpZ2hsaWdodFwiIC8qIENPTVBPTkVOVF9VTkhJR0hMSUdIVCAqLywgKCkgPT4ge1xuICAgIHVuaGlnaGxpZ2h0KCk7XG4gIH0pO1xuICByZXR1cm4gaG9va3MyO1xufVxuXG4vLyBzcmMvY3R4L3N0YXRlLnRzXG52YXIgX2E0LCBfYjQ7XG4oX2I0ID0gKF9hNCA9IGdsb2JhbCkuX19WVUVfREVWVE9PTFNfS0lUX0FQUF9SRUNPUkRTX18pICE9IG51bGwgPyBfYjQgOiBfYTQuX19WVUVfREVWVE9PTFNfS0lUX0FQUF9SRUNPUkRTX18gPSBbXTtcbnZhciBfYTUsIF9iNTtcbihfYjUgPSAoX2E1ID0gZ2xvYmFsKS5fX1ZVRV9ERVZUT09MU19LSVRfQUNUSVZFX0FQUF9SRUNPUkRfXykgIT0gbnVsbCA/IF9iNSA6IF9hNS5fX1ZVRV9ERVZUT09MU19LSVRfQUNUSVZFX0FQUF9SRUNPUkRfXyA9IHt9O1xudmFyIF9hNiwgX2I2O1xuKF9iNiA9IChfYTYgPSBnbG9iYWwpLl9fVlVFX0RFVlRPT0xTX0tJVF9BQ1RJVkVfQVBQX1JFQ09SRF9JRF9fKSAhPSBudWxsID8gX2I2IDogX2E2Ll9fVlVFX0RFVlRPT0xTX0tJVF9BQ1RJVkVfQVBQX1JFQ09SRF9JRF9fID0gXCJcIjtcbnZhciBfYTcsIF9iNztcbihfYjcgPSAoX2E3ID0gZ2xvYmFsKS5fX1ZVRV9ERVZUT09MU19LSVRfQ1VTVE9NX1RBQlNfXykgIT0gbnVsbCA/IF9iNyA6IF9hNy5fX1ZVRV9ERVZUT09MU19LSVRfQ1VTVE9NX1RBQlNfXyA9IFtdO1xudmFyIF9hOCwgX2I4O1xuKF9iOCA9IChfYTggPSBnbG9iYWwpLl9fVlVFX0RFVlRPT0xTX0tJVF9DVVNUT01fQ09NTUFORFNfXykgIT0gbnVsbCA/IF9iOCA6IF9hOC5fX1ZVRV9ERVZUT09MU19LSVRfQ1VTVE9NX0NPTU1BTkRTX18gPSBbXTtcbnZhciBTVEFURV9LRVkgPSBcIl9fVlVFX0RFVlRPT0xTX0tJVF9HTE9CQUxfU1RBVEVfX1wiO1xuZnVuY3Rpb24gaW5pdFN0YXRlRmFjdG9yeSgpIHtcbiAgcmV0dXJuIHtcbiAgICBjb25uZWN0ZWQ6IGZhbHNlLFxuICAgIGNsaWVudENvbm5lY3RlZDogZmFsc2UsXG4gICAgdml0ZVBsdWdpbkRldGVjdGVkOiB0cnVlLFxuICAgIGFwcFJlY29yZHM6IFtdLFxuICAgIGFjdGl2ZUFwcFJlY29yZElkOiBcIlwiLFxuICAgIHRhYnM6IFtdLFxuICAgIGNvbW1hbmRzOiBbXSxcbiAgICBoaWdoUGVyZk1vZGVFbmFibGVkOiB0cnVlLFxuICAgIGRldnRvb2xzQ2xpZW50RGV0ZWN0ZWQ6IHt9LFxuICAgIHBlcmZVbmlxdWVHcm91cElkOiAwLFxuICAgIHRpbWVsaW5lTGF5ZXJzU3RhdGU6IGdldFRpbWVsaW5lTGF5ZXJzU3RhdGVGcm9tU3RvcmFnZSgpXG4gIH07XG59XG52YXIgX2E5LCBfYjk7XG4oX2I5ID0gKF9hOSA9IGdsb2JhbClbU1RBVEVfS0VZXSkgIT0gbnVsbCA/IF9iOSA6IF9hOVtTVEFURV9LRVldID0gaW5pdFN0YXRlRmFjdG9yeSgpO1xudmFyIGNhbGxTdGF0ZVVwZGF0ZWRIb29rID0gZGVib3VuY2UzKChzdGF0ZSkgPT4ge1xuICBkZXZ0b29sc0NvbnRleHQuaG9va3MuY2FsbEhvb2soXCJkZXZ0b29sc1N0YXRlVXBkYXRlZFwiIC8qIERFVlRPT0xTX1NUQVRFX1VQREFURUQgKi8sIHsgc3RhdGUgfSk7XG59KTtcbnZhciBjYWxsQ29ubmVjdGVkVXBkYXRlZEhvb2sgPSBkZWJvdW5jZTMoKHN0YXRlLCBvbGRTdGF0ZSkgPT4ge1xuICBkZXZ0b29sc0NvbnRleHQuaG9va3MuY2FsbEhvb2soXCJkZXZ0b29sc0Nvbm5lY3RlZFVwZGF0ZWRcIiAvKiBERVZUT09MU19DT05ORUNURURfVVBEQVRFRCAqLywgeyBzdGF0ZSwgb2xkU3RhdGUgfSk7XG59KTtcbnZhciBkZXZ0b29sc0FwcFJlY29yZHMgPSBuZXcgUHJveHkoZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9BUFBfUkVDT1JEU19fLCB7XG4gIGdldChfdGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgIGlmIChwcm9wID09PSBcInZhbHVlXCIpXG4gICAgICByZXR1cm4gZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9BUFBfUkVDT1JEU19fO1xuICAgIHJldHVybiBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FQUF9SRUNPUkRTX19bcHJvcF07XG4gIH1cbn0pO1xudmFyIGFkZERldlRvb2xzQXBwUmVjb3JkID0gKGFwcCkgPT4ge1xuICBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FQUF9SRUNPUkRTX18gPSBbXG4gICAgLi4uZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9BUFBfUkVDT1JEU19fLFxuICAgIGFwcFxuICBdO1xufTtcbnZhciByZW1vdmVEZXZUb29sc0FwcFJlY29yZCA9IChhcHApID0+IHtcbiAgZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9BUFBfUkVDT1JEU19fID0gZGV2dG9vbHNBcHBSZWNvcmRzLnZhbHVlLmZpbHRlcigocmVjb3JkKSA9PiByZWNvcmQuYXBwICE9PSBhcHApO1xufTtcbnZhciBhY3RpdmVBcHBSZWNvcmQgPSBuZXcgUHJveHkoZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9BQ1RJVkVfQVBQX1JFQ09SRF9fLCB7XG4gIGdldChfdGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgIGlmIChwcm9wID09PSBcInZhbHVlXCIpXG4gICAgICByZXR1cm4gZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9BQ1RJVkVfQVBQX1JFQ09SRF9fO1xuICAgIGVsc2UgaWYgKHByb3AgPT09IFwiaWRcIilcbiAgICAgIHJldHVybiBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FDVElWRV9BUFBfUkVDT1JEX0lEX187XG4gICAgcmV0dXJuIGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQUNUSVZFX0FQUF9SRUNPUkRfX1twcm9wXTtcbiAgfVxufSk7XG5mdW5jdGlvbiB1cGRhdGVBbGxTdGF0ZXMoKSB7XG4gIGNhbGxTdGF0ZVVwZGF0ZWRIb29rKHtcbiAgICAuLi5nbG9iYWxbU1RBVEVfS0VZXSxcbiAgICBhcHBSZWNvcmRzOiBkZXZ0b29sc0FwcFJlY29yZHMudmFsdWUsXG4gICAgYWN0aXZlQXBwUmVjb3JkSWQ6IGFjdGl2ZUFwcFJlY29yZC5pZCxcbiAgICB0YWJzOiBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0NVU1RPTV9UQUJTX18sXG4gICAgY29tbWFuZHM6IGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQ1VTVE9NX0NPTU1BTkRTX19cbiAgfSk7XG59XG5mdW5jdGlvbiBzZXRBY3RpdmVBcHBSZWNvcmQoYXBwKSB7XG4gIGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQUNUSVZFX0FQUF9SRUNPUkRfXyA9IGFwcDtcbiAgdXBkYXRlQWxsU3RhdGVzKCk7XG59XG5mdW5jdGlvbiBzZXRBY3RpdmVBcHBSZWNvcmRJZChpZCkge1xuICBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FDVElWRV9BUFBfUkVDT1JEX0lEX18gPSBpZDtcbiAgdXBkYXRlQWxsU3RhdGVzKCk7XG59XG52YXIgZGV2dG9vbHNTdGF0ZSA9IG5ldyBQcm94eShnbG9iYWxbU1RBVEVfS0VZXSwge1xuICBnZXQodGFyZ2V0MjIsIHByb3BlcnR5KSB7XG4gICAgaWYgKHByb3BlcnR5ID09PSBcImFwcFJlY29yZHNcIikge1xuICAgICAgcmV0dXJuIGRldnRvb2xzQXBwUmVjb3JkcztcbiAgICB9IGVsc2UgaWYgKHByb3BlcnR5ID09PSBcImFjdGl2ZUFwcFJlY29yZElkXCIpIHtcbiAgICAgIHJldHVybiBhY3RpdmVBcHBSZWNvcmQuaWQ7XG4gICAgfSBlbHNlIGlmIChwcm9wZXJ0eSA9PT0gXCJ0YWJzXCIpIHtcbiAgICAgIHJldHVybiBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0NVU1RPTV9UQUJTX187XG4gICAgfSBlbHNlIGlmIChwcm9wZXJ0eSA9PT0gXCJjb21tYW5kc1wiKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9DVVNUT01fQ09NTUFORFNfXztcbiAgICB9XG4gICAgcmV0dXJuIGdsb2JhbFtTVEFURV9LRVldW3Byb3BlcnR5XTtcbiAgfSxcbiAgZGVsZXRlUHJvcGVydHkodGFyZ2V0MjIsIHByb3BlcnR5KSB7XG4gICAgZGVsZXRlIHRhcmdldDIyW3Byb3BlcnR5XTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgc2V0KHRhcmdldDIyLCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBjb25zdCBvbGRTdGF0ZSA9IHsgLi4uZ2xvYmFsW1NUQVRFX0tFWV0gfTtcbiAgICB0YXJnZXQyMltwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBnbG9iYWxbU1RBVEVfS0VZXVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufSk7XG5mdW5jdGlvbiByZXNldERldlRvb2xzU3RhdGUoKSB7XG4gIE9iamVjdC5hc3NpZ24oZ2xvYmFsW1NUQVRFX0tFWV0sIGluaXRTdGF0ZUZhY3RvcnkoKSk7XG59XG5mdW5jdGlvbiB1cGRhdGVEZXZUb29sc1N0YXRlKHN0YXRlKSB7XG4gIGNvbnN0IG9sZFN0YXRlID0ge1xuICAgIC4uLmdsb2JhbFtTVEFURV9LRVldLFxuICAgIGFwcFJlY29yZHM6IGRldnRvb2xzQXBwUmVjb3Jkcy52YWx1ZSxcbiAgICBhY3RpdmVBcHBSZWNvcmRJZDogYWN0aXZlQXBwUmVjb3JkLmlkXG4gIH07XG4gIGlmIChvbGRTdGF0ZS5jb25uZWN0ZWQgIT09IHN0YXRlLmNvbm5lY3RlZCAmJiBzdGF0ZS5jb25uZWN0ZWQgfHwgb2xkU3RhdGUuY2xpZW50Q29ubmVjdGVkICE9PSBzdGF0ZS5jbGllbnRDb25uZWN0ZWQgJiYgc3RhdGUuY2xpZW50Q29ubmVjdGVkKSB7XG4gICAgY2FsbENvbm5lY3RlZFVwZGF0ZWRIb29rKGdsb2JhbFtTVEFURV9LRVldLCBvbGRTdGF0ZSk7XG4gIH1cbiAgT2JqZWN0LmFzc2lnbihnbG9iYWxbU1RBVEVfS0VZXSwgc3RhdGUpO1xuICB1cGRhdGVBbGxTdGF0ZXMoKTtcbn1cbmZ1bmN0aW9uIG9uRGV2VG9vbHNDb25uZWN0ZWQoZm4pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgaWYgKGRldnRvb2xzU3RhdGUuY29ubmVjdGVkKSB7XG4gICAgICBmbigpO1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH1cbiAgICBkZXZ0b29sc0NvbnRleHQuaG9va3MuaG9vayhcImRldnRvb2xzQ29ubmVjdGVkVXBkYXRlZFwiIC8qIERFVlRPT0xTX0NPTk5FQ1RFRF9VUERBVEVEICovLCAoeyBzdGF0ZSB9KSA9PiB7XG4gICAgICBpZiAoc3RhdGUuY29ubmVjdGVkKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG52YXIgcmVzb2x2ZUljb24gPSAoaWNvbikgPT4ge1xuICBpZiAoIWljb24pXG4gICAgcmV0dXJuO1xuICBpZiAoaWNvbi5zdGFydHNXaXRoKFwiYmFzZWxpbmUtXCIpKSB7XG4gICAgcmV0dXJuIGBjdXN0b20taWMtJHtpY29ufWA7XG4gIH1cbiAgaWYgKGljb24uc3RhcnRzV2l0aChcImktXCIpIHx8IGlzVXJsU3RyaW5nKGljb24pKVxuICAgIHJldHVybiBpY29uO1xuICByZXR1cm4gYGN1c3RvbS1pYy1iYXNlbGluZS0ke2ljb259YDtcbn07XG5mdW5jdGlvbiBhZGRDdXN0b21UYWIodGFiKSB7XG4gIGNvbnN0IHRhYnMgPSBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0NVU1RPTV9UQUJTX187XG4gIGlmICh0YWJzLnNvbWUoKHQpID0+IHQubmFtZSA9PT0gdGFiLm5hbWUpKVxuICAgIHJldHVybjtcbiAgdGFicy5wdXNoKHtcbiAgICAuLi50YWIsXG4gICAgaWNvbjogcmVzb2x2ZUljb24odGFiLmljb24pXG4gIH0pO1xuICB1cGRhdGVBbGxTdGF0ZXMoKTtcbn1cbmZ1bmN0aW9uIGFkZEN1c3RvbUNvbW1hbmQoYWN0aW9uKSB7XG4gIGNvbnN0IGNvbW1hbmRzID0gZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9DVVNUT01fQ09NTUFORFNfXztcbiAgaWYgKGNvbW1hbmRzLnNvbWUoKHQpID0+IHQuaWQgPT09IGFjdGlvbi5pZCkpXG4gICAgcmV0dXJuO1xuICBjb21tYW5kcy5wdXNoKHtcbiAgICAuLi5hY3Rpb24sXG4gICAgaWNvbjogcmVzb2x2ZUljb24oYWN0aW9uLmljb24pLFxuICAgIGNoaWxkcmVuOiBhY3Rpb24uY2hpbGRyZW4gPyBhY3Rpb24uY2hpbGRyZW4ubWFwKChjaGlsZCkgPT4gKHtcbiAgICAgIC4uLmNoaWxkLFxuICAgICAgaWNvbjogcmVzb2x2ZUljb24oY2hpbGQuaWNvbilcbiAgICB9KSkgOiB2b2lkIDBcbiAgfSk7XG4gIHVwZGF0ZUFsbFN0YXRlcygpO1xufVxuZnVuY3Rpb24gcmVtb3ZlQ3VzdG9tQ29tbWFuZChhY3Rpb25JZCkge1xuICBjb25zdCBjb21tYW5kcyA9IGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQ1VTVE9NX0NPTU1BTkRTX187XG4gIGNvbnN0IGluZGV4ID0gY29tbWFuZHMuZmluZEluZGV4KCh0KSA9PiB0LmlkID09PSBhY3Rpb25JZCk7XG4gIGlmIChpbmRleCA9PT0gLTEpXG4gICAgcmV0dXJuO1xuICBjb21tYW5kcy5zcGxpY2UoaW5kZXgsIDEpO1xuICB1cGRhdGVBbGxTdGF0ZXMoKTtcbn1cbmZ1bmN0aW9uIHRvZ2dsZUNsaWVudENvbm5lY3RlZChzdGF0ZSkge1xuICB1cGRhdGVEZXZUb29sc1N0YXRlKHsgY2xpZW50Q29ubmVjdGVkOiBzdGF0ZSB9KTtcbn1cblxuLy8gc3JjL2NvcmUvb3Blbi1pbi1lZGl0b3IvaW5kZXgudHNcbmZ1bmN0aW9uIHNldE9wZW5JbkVkaXRvckJhc2VVcmwodXJsKSB7XG4gIHRhcmdldDUuX19WVUVfREVWVE9PTFNfT1BFTl9JTl9FRElUT1JfQkFTRV9VUkxfXyA9IHVybDtcbn1cbmZ1bmN0aW9uIG9wZW5JbkVkaXRvcihvcHRpb25zID0ge30pIHtcbiAgdmFyIF9hMjUsIF9iMjUsIF9jO1xuICBjb25zdCB7IGZpbGUsIGhvc3QsIGJhc2VVcmwgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luLCBsaW5lID0gMCwgY29sdW1uID0gMCB9ID0gb3B0aW9ucztcbiAgaWYgKGZpbGUpIHtcbiAgICBpZiAoaG9zdCA9PT0gXCJjaHJvbWUtZXh0ZW5zaW9uXCIpIHtcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZS5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXFxcXFxcIik7XG4gICAgICBjb25zdCBfYmFzZVVybCA9IChfYjI1ID0gKF9hMjUgPSB3aW5kb3cuVlVFX0RFVlRPT0xTX0NPTkZJRykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUub3BlbkluRWRpdG9ySG9zdCkgIT0gbnVsbCA/IF9iMjUgOiBcIi9cIjtcbiAgICAgIGZldGNoKGAke19iYXNlVXJsfV9fb3Blbi1pbi1lZGl0b3I/ZmlsZT0ke2VuY29kZVVSSShmaWxlKX1gKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgY29uc3QgbXNnID0gYE9wZW5pbmcgY29tcG9uZW50ICR7ZmlsZU5hbWV9IGZhaWxlZGA7XG4gICAgICAgICAgY29uc29sZS5sb2coYCVjJHttc2d9YCwgXCJjb2xvcjpyZWRcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZGV2dG9vbHNTdGF0ZS52aXRlUGx1Z2luRGV0ZWN0ZWQpIHtcbiAgICAgIGNvbnN0IF9iYXNlVXJsID0gKF9jID0gdGFyZ2V0NS5fX1ZVRV9ERVZUT09MU19PUEVOX0lOX0VESVRPUl9CQVNFX1VSTF9fKSAhPSBudWxsID8gX2MgOiBiYXNlVXJsO1xuICAgICAgdGFyZ2V0NS5fX1ZVRV9JTlNQRUNUT1JfXy5vcGVuSW5FZGl0b3IoX2Jhc2VVcmwsIGZpbGUsIGxpbmUsIGNvbHVtbik7XG4gICAgfVxuICB9XG59XG5cbi8vIHNyYy9jb3JlL3BsdWdpbi9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQ4IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5cbi8vIHNyYy9hcGkvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9hcGkvdjYvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9jb3JlL3BsdWdpbi9wbHVnaW4tc2V0dGluZ3MudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9jdHgvcGx1Z2luLnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDYgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbnZhciBfYTEwLCBfYjEwO1xuKF9iMTAgPSAoX2ExMCA9IHRhcmdldDYpLl9fVlVFX0RFVlRPT0xTX0tJVF9QTFVHSU5fQlVGRkVSX18pICE9IG51bGwgPyBfYjEwIDogX2ExMC5fX1ZVRV9ERVZUT09MU19LSVRfUExVR0lOX0JVRkZFUl9fID0gW107XG52YXIgZGV2dG9vbHNQbHVnaW5CdWZmZXIgPSBuZXcgUHJveHkodGFyZ2V0Ni5fX1ZVRV9ERVZUT09MU19LSVRfUExVR0lOX0JVRkZFUl9fLCB7XG4gIGdldCh0YXJnZXQyMiwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0MjIsIHByb3AsIHJlY2VpdmVyKTtcbiAgfVxufSk7XG5mdW5jdGlvbiBhZGREZXZUb29sc1BsdWdpblRvQnVmZmVyKHBsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm4pIHtcbiAgZGV2dG9vbHNQbHVnaW5CdWZmZXIucHVzaChbcGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbl0pO1xufVxuXG4vLyBzcmMvY29yZS9wbHVnaW4vcGx1Z2luLXNldHRpbmdzLnRzXG5mdW5jdGlvbiBfZ2V0U2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgY29uc3QgX3NldHRpbmdzID0ge307XG4gIE9iamVjdC5rZXlzKHNldHRpbmdzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBfc2V0dGluZ3Nba2V5XSA9IHNldHRpbmdzW2tleV0uZGVmYXVsdFZhbHVlO1xuICB9KTtcbiAgcmV0dXJuIF9zZXR0aW5ncztcbn1cbmZ1bmN0aW9uIGdldFBsdWdpbkxvY2FsS2V5KHBsdWdpbklkKSB7XG4gIHJldHVybiBgX19WVUVfREVWVE9PTFNfTkVYVF9QTFVHSU5fU0VUVElOR1NfXyR7cGx1Z2luSWR9X19gO1xufVxuZnVuY3Rpb24gZ2V0UGx1Z2luU2V0dGluZ3NPcHRpb25zKHBsdWdpbklkKSB7XG4gIHZhciBfYTI1LCBfYjI1LCBfYztcbiAgY29uc3QgaXRlbSA9IChfYjI1ID0gKF9hMjUgPSBkZXZ0b29sc1BsdWdpbkJ1ZmZlci5maW5kKChpdGVtMikgPT4ge1xuICAgIHZhciBfYTI2O1xuICAgIHJldHVybiBpdGVtMlswXS5pZCA9PT0gcGx1Z2luSWQgJiYgISEoKF9hMjYgPSBpdGVtMlswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjYuc2V0dGluZ3MpO1xuICB9KSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjVbMF0pICE9IG51bGwgPyBfYjI1IDogbnVsbDtcbiAgcmV0dXJuIChfYyA9IGl0ZW0gPT0gbnVsbCA/IHZvaWQgMCA6IGl0ZW0uc2V0dGluZ3MpICE9IG51bGwgPyBfYyA6IG51bGw7XG59XG5mdW5jdGlvbiBnZXRQbHVnaW5TZXR0aW5ncyhwbHVnaW5JZCwgZmFsbGJhY2tWYWx1ZSkge1xuICB2YXIgX2EyNSwgX2IyNSwgX2M7XG4gIGNvbnN0IGxvY2FsS2V5ID0gZ2V0UGx1Z2luTG9jYWxLZXkocGx1Z2luSWQpO1xuICBpZiAobG9jYWxLZXkpIHtcbiAgICBjb25zdCBsb2NhbFNldHRpbmdzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obG9jYWxLZXkpO1xuICAgIGlmIChsb2NhbFNldHRpbmdzKSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFNldHRpbmdzKTtcbiAgICB9XG4gIH1cbiAgaWYgKHBsdWdpbklkKSB7XG4gICAgY29uc3QgaXRlbSA9IChfYjI1ID0gKF9hMjUgPSBkZXZ0b29sc1BsdWdpbkJ1ZmZlci5maW5kKChpdGVtMikgPT4gaXRlbTJbMF0uaWQgPT09IHBsdWdpbklkKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjVbMF0pICE9IG51bGwgPyBfYjI1IDogbnVsbDtcbiAgICByZXR1cm4gX2dldFNldHRpbmdzKChfYyA9IGl0ZW0gPT0gbnVsbCA/IHZvaWQgMCA6IGl0ZW0uc2V0dGluZ3MpICE9IG51bGwgPyBfYyA6IHt9KTtcbiAgfVxuICByZXR1cm4gX2dldFNldHRpbmdzKGZhbGxiYWNrVmFsdWUpO1xufVxuZnVuY3Rpb24gaW5pdFBsdWdpblNldHRpbmdzKHBsdWdpbklkLCBzZXR0aW5ncykge1xuICBjb25zdCBsb2NhbEtleSA9IGdldFBsdWdpbkxvY2FsS2V5KHBsdWdpbklkKTtcbiAgY29uc3QgbG9jYWxTZXR0aW5ncyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxvY2FsS2V5KTtcbiAgaWYgKCFsb2NhbFNldHRpbmdzKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxLZXksIEpTT04uc3RyaW5naWZ5KF9nZXRTZXR0aW5ncyhzZXR0aW5ncykpKTtcbiAgfVxufVxuZnVuY3Rpb24gc2V0UGx1Z2luU2V0dGluZ3MocGx1Z2luSWQsIGtleSwgdmFsdWUpIHtcbiAgY29uc3QgbG9jYWxLZXkgPSBnZXRQbHVnaW5Mb2NhbEtleShwbHVnaW5JZCk7XG4gIGNvbnN0IGxvY2FsU2V0dGluZ3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbEtleSk7XG4gIGNvbnN0IHBhcnNlZExvY2FsU2V0dGluZ3MgPSBKU09OLnBhcnNlKGxvY2FsU2V0dGluZ3MgfHwgXCJ7fVwiKTtcbiAgY29uc3QgdXBkYXRlZCA9IHtcbiAgICAuLi5wYXJzZWRMb2NhbFNldHRpbmdzLFxuICAgIFtrZXldOiB2YWx1ZVxuICB9O1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbEtleSwgSlNPTi5zdHJpbmdpZnkodXBkYXRlZCkpO1xuICBkZXZ0b29sc0NvbnRleHQuaG9va3MuY2FsbEhvb2tXaXRoKChjYWxsYmFja3MpID0+IHtcbiAgICBjYWxsYmFja3MuZm9yRWFjaCgoY2IpID0+IGNiKHtcbiAgICAgIHBsdWdpbklkLFxuICAgICAga2V5LFxuICAgICAgb2xkVmFsdWU6IHBhcnNlZExvY2FsU2V0dGluZ3Nba2V5XSxcbiAgICAgIG5ld1ZhbHVlOiB2YWx1ZSxcbiAgICAgIHNldHRpbmdzOiB1cGRhdGVkXG4gICAgfSkpO1xuICB9LCBcInNldFBsdWdpblNldHRpbmdzXCIgLyogU0VUX1BMVUdJTl9TRVRUSU5HUyAqLyk7XG59XG5cbi8vIHNyYy9ob29rL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDcgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbmltcG9ydCB7IGNyZWF0ZUhvb2tzIGFzIGNyZWF0ZUhvb2tzMiB9IGZyb20gXCJob29rYWJsZVwiO1xuXG4vLyBzcmMvdHlwZXMvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy90eXBlcy9hcHAudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy90eXBlcy9jb21tYW5kLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvdHlwZXMvY29tcG9uZW50LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvdHlwZXMvaG9vay50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3R5cGVzL2luc3BlY3Rvci50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3R5cGVzL3BsdWdpbi50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3R5cGVzL3JvdXRlci50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3R5cGVzL3RhYi50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3R5cGVzL3RpbWVsaW5lLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvaG9vay9pbmRleC50c1xudmFyIF9hMTEsIF9iMTE7XG52YXIgZGV2dG9vbHNIb29rcyA9IChfYjExID0gKF9hMTEgPSB0YXJnZXQ3KS5fX1ZVRV9ERVZUT09MU19IT09LKSAhPSBudWxsID8gX2IxMSA6IF9hMTEuX19WVUVfREVWVE9PTFNfSE9PSyA9IGNyZWF0ZUhvb2tzMigpO1xudmFyIG9uID0ge1xuICB2dWVBcHBJbml0KGZuKSB7XG4gICAgZGV2dG9vbHNIb29rcy5ob29rKFwiYXBwOmluaXRcIiAvKiBBUFBfSU5JVCAqLywgZm4pO1xuICB9LFxuICB2dWVBcHBVbm1vdW50KGZuKSB7XG4gICAgZGV2dG9vbHNIb29rcy5ob29rKFwiYXBwOnVubW91bnRcIiAvKiBBUFBfVU5NT1VOVCAqLywgZm4pO1xuICB9LFxuICB2dWVBcHBDb25uZWN0ZWQoZm4pIHtcbiAgICBkZXZ0b29sc0hvb2tzLmhvb2soXCJhcHA6Y29ubmVjdGVkXCIgLyogQVBQX0NPTk5FQ1RFRCAqLywgZm4pO1xuICB9LFxuICBjb21wb25lbnRBZGRlZChmbikge1xuICAgIHJldHVybiBkZXZ0b29sc0hvb2tzLmhvb2soXCJjb21wb25lbnQ6YWRkZWRcIiAvKiBDT01QT05FTlRfQURERUQgKi8sIGZuKTtcbiAgfSxcbiAgY29tcG9uZW50RW1pdChmbikge1xuICAgIHJldHVybiBkZXZ0b29sc0hvb2tzLmhvb2soXCJjb21wb25lbnQ6ZW1pdFwiIC8qIENPTVBPTkVOVF9FTUlUICovLCBmbik7XG4gIH0sXG4gIGNvbXBvbmVudFVwZGF0ZWQoZm4pIHtcbiAgICByZXR1cm4gZGV2dG9vbHNIb29rcy5ob29rKFwiY29tcG9uZW50OnVwZGF0ZWRcIiAvKiBDT01QT05FTlRfVVBEQVRFRCAqLywgZm4pO1xuICB9LFxuICBjb21wb25lbnRSZW1vdmVkKGZuKSB7XG4gICAgcmV0dXJuIGRldnRvb2xzSG9va3MuaG9vayhcImNvbXBvbmVudDpyZW1vdmVkXCIgLyogQ09NUE9ORU5UX1JFTU9WRUQgKi8sIGZuKTtcbiAgfSxcbiAgc2V0dXBEZXZ0b29sc1BsdWdpbihmbikge1xuICAgIGRldnRvb2xzSG9va3MuaG9vayhcImRldnRvb2xzLXBsdWdpbjpzZXR1cFwiIC8qIFNFVFVQX0RFVlRPT0xTX1BMVUdJTiAqLywgZm4pO1xuICB9LFxuICBwZXJmU3RhcnQoZm4pIHtcbiAgICByZXR1cm4gZGV2dG9vbHNIb29rcy5ob29rKFwicGVyZjpzdGFydFwiIC8qIFBFUkZPUk1BTkNFX1NUQVJUICovLCBmbik7XG4gIH0sXG4gIHBlcmZFbmQoZm4pIHtcbiAgICByZXR1cm4gZGV2dG9vbHNIb29rcy5ob29rKFwicGVyZjplbmRcIiAvKiBQRVJGT1JNQU5DRV9FTkQgKi8sIGZuKTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZURldlRvb2xzSG9vaygpIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJ2dWUtZGV2dG9vbHMtbmV4dFwiLFxuICAgIGRldnRvb2xzVmVyc2lvbjogXCI3LjBcIixcbiAgICBlbmFibGVkOiBmYWxzZSxcbiAgICBhcHBSZWNvcmRzOiBbXSxcbiAgICBhcHBzOiBbXSxcbiAgICBldmVudHM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgb24oZXZlbnQsIGZuKSB7XG4gICAgICB2YXIgX2EyNTtcbiAgICAgIGlmICghdGhpcy5ldmVudHMuaGFzKGV2ZW50KSlcbiAgICAgICAgdGhpcy5ldmVudHMuc2V0KGV2ZW50LCBbXSk7XG4gICAgICAoX2EyNSA9IHRoaXMuZXZlbnRzLmdldChldmVudCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnB1c2goZm4pO1xuICAgICAgcmV0dXJuICgpID0+IHRoaXMub2ZmKGV2ZW50LCBmbik7XG4gICAgfSxcbiAgICBvbmNlKGV2ZW50LCBmbikge1xuICAgICAgY29uc3Qgb25jZUZuID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgdGhpcy5vZmYoZXZlbnQsIG9uY2VGbik7XG4gICAgICAgIGZuKC4uLmFyZ3MpO1xuICAgICAgfTtcbiAgICAgIHRoaXMub24oZXZlbnQsIG9uY2VGbik7XG4gICAgICByZXR1cm4gW2V2ZW50LCBvbmNlRm5dO1xuICAgIH0sXG4gICAgb2ZmKGV2ZW50LCBmbikge1xuICAgICAgaWYgKHRoaXMuZXZlbnRzLmhhcyhldmVudCkpIHtcbiAgICAgICAgY29uc3QgZXZlbnRDYWxsYmFja3MgPSB0aGlzLmV2ZW50cy5nZXQoZXZlbnQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IGV2ZW50Q2FsbGJhY2tzLmluZGV4T2YoZm4pO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgIGV2ZW50Q2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBlbWl0KGV2ZW50LCAuLi5wYXlsb2FkKSB7XG4gICAgICBpZiAodGhpcy5ldmVudHMuaGFzKGV2ZW50KSlcbiAgICAgICAgdGhpcy5ldmVudHMuZ2V0KGV2ZW50KS5mb3JFYWNoKChmbikgPT4gZm4oLi4ucGF5bG9hZCkpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIHN1YnNjcmliZURldlRvb2xzSG9vayhob29rMikge1xuICBob29rMi5vbihcImFwcDppbml0XCIgLyogQVBQX0lOSVQgKi8sIChhcHAsIHZlcnNpb24sIHR5cGVzKSA9PiB7XG4gICAgdmFyIF9hMjUsIF9iMjUsIF9jO1xuICAgIGlmICgoX2MgPSAoX2IyNSA9IChfYTI1ID0gYXBwID09IG51bGwgPyB2b2lkIDAgOiBhcHAuX2luc3RhbmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS50eXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2IyNS5kZXZ0b29scykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmhpZGUpXG4gICAgICByZXR1cm47XG4gICAgZGV2dG9vbHNIb29rcy5jYWxsSG9vayhcImFwcDppbml0XCIgLyogQVBQX0lOSVQgKi8sIGFwcCwgdmVyc2lvbiwgdHlwZXMpO1xuICB9KTtcbiAgaG9vazIub24oXCJhcHA6dW5tb3VudFwiIC8qIEFQUF9VTk1PVU5UICovLCAoYXBwKSA9PiB7XG4gICAgZGV2dG9vbHNIb29rcy5jYWxsSG9vayhcImFwcDp1bm1vdW50XCIgLyogQVBQX1VOTU9VTlQgKi8sIGFwcCk7XG4gIH0pO1xuICBob29rMi5vbihcImNvbXBvbmVudDphZGRlZFwiIC8qIENPTVBPTkVOVF9BRERFRCAqLywgYXN5bmMgKGFwcCwgdWlkLCBwYXJlbnRVaWQsIGNvbXBvbmVudCkgPT4ge1xuICAgIHZhciBfYTI1LCBfYjI1LCBfYztcbiAgICBpZiAoKChfYyA9IChfYjI1ID0gKF9hMjUgPSBhcHAgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcC5faW5zdGFuY2UpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnR5cGUpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LmRldnRvb2xzKSA9PSBudWxsID8gdm9pZCAwIDogX2MuaGlkZSkgfHwgZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGlmICghYXBwIHx8IHR5cGVvZiB1aWQgIT09IFwibnVtYmVyXCIgJiYgIXVpZCB8fCAhY29tcG9uZW50KVxuICAgICAgcmV0dXJuO1xuICAgIGRldnRvb2xzSG9va3MuY2FsbEhvb2soXCJjb21wb25lbnQ6YWRkZWRcIiAvKiBDT01QT05FTlRfQURERUQgKi8sIGFwcCwgdWlkLCBwYXJlbnRVaWQsIGNvbXBvbmVudCk7XG4gIH0pO1xuICBob29rMi5vbihcImNvbXBvbmVudDp1cGRhdGVkXCIgLyogQ09NUE9ORU5UX1VQREFURUQgKi8sIChhcHAsIHVpZCwgcGFyZW50VWlkLCBjb21wb25lbnQpID0+IHtcbiAgICBpZiAoIWFwcCB8fCB0eXBlb2YgdWlkICE9PSBcIm51bWJlclwiICYmICF1aWQgfHwgIWNvbXBvbmVudCB8fCBkZXZ0b29sc1N0YXRlLmhpZ2hQZXJmTW9kZUVuYWJsZWQpXG4gICAgICByZXR1cm47XG4gICAgZGV2dG9vbHNIb29rcy5jYWxsSG9vayhcImNvbXBvbmVudDp1cGRhdGVkXCIgLyogQ09NUE9ORU5UX1VQREFURUQgKi8sIGFwcCwgdWlkLCBwYXJlbnRVaWQsIGNvbXBvbmVudCk7XG4gIH0pO1xuICBob29rMi5vbihcImNvbXBvbmVudDpyZW1vdmVkXCIgLyogQ09NUE9ORU5UX1JFTU9WRUQgKi8sIGFzeW5jIChhcHAsIHVpZCwgcGFyZW50VWlkLCBjb21wb25lbnQpID0+IHtcbiAgICBpZiAoIWFwcCB8fCB0eXBlb2YgdWlkICE9PSBcIm51bWJlclwiICYmICF1aWQgfHwgIWNvbXBvbmVudCB8fCBkZXZ0b29sc1N0YXRlLmhpZ2hQZXJmTW9kZUVuYWJsZWQpXG4gICAgICByZXR1cm47XG4gICAgZGV2dG9vbHNIb29rcy5jYWxsSG9vayhcImNvbXBvbmVudDpyZW1vdmVkXCIgLyogQ09NUE9ORU5UX1JFTU9WRUQgKi8sIGFwcCwgdWlkLCBwYXJlbnRVaWQsIGNvbXBvbmVudCk7XG4gIH0pO1xuICBob29rMi5vbihcImNvbXBvbmVudDplbWl0XCIgLyogQ09NUE9ORU5UX0VNSVQgKi8sIGFzeW5jIChhcHAsIGluc3RhbmNlLCBldmVudCwgcGFyYW1zKSA9PiB7XG4gICAgaWYgKCFhcHAgfHwgIWluc3RhbmNlIHx8IGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwiY29tcG9uZW50OmVtaXRcIiAvKiBDT01QT05FTlRfRU1JVCAqLywgYXBwLCBpbnN0YW5jZSwgZXZlbnQsIHBhcmFtcyk7XG4gIH0pO1xuICBob29rMi5vbihcInBlcmY6c3RhcnRcIiAvKiBQRVJGT1JNQU5DRV9TVEFSVCAqLywgKGFwcCwgdWlkLCB2bSwgdHlwZSwgdGltZSkgPT4ge1xuICAgIGlmICghYXBwIHx8IGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwicGVyZjpzdGFydFwiIC8qIFBFUkZPUk1BTkNFX1NUQVJUICovLCBhcHAsIHVpZCwgdm0sIHR5cGUsIHRpbWUpO1xuICB9KTtcbiAgaG9vazIub24oXCJwZXJmOmVuZFwiIC8qIFBFUkZPUk1BTkNFX0VORCAqLywgKGFwcCwgdWlkLCB2bSwgdHlwZSwgdGltZSkgPT4ge1xuICAgIGlmICghYXBwIHx8IGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwicGVyZjplbmRcIiAvKiBQRVJGT1JNQU5DRV9FTkQgKi8sIGFwcCwgdWlkLCB2bSwgdHlwZSwgdGltZSk7XG4gIH0pO1xuICBob29rMi5vbihcImRldnRvb2xzLXBsdWdpbjpzZXR1cFwiIC8qIFNFVFVQX0RFVlRPT0xTX1BMVUdJTiAqLywgKHBsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm4sIG9wdGlvbnMpID0+IHtcbiAgICBpZiAoKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMudGFyZ2V0KSA9PT0gXCJsZWdhY3lcIilcbiAgICAgIHJldHVybjtcbiAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwiZGV2dG9vbHMtcGx1Z2luOnNldHVwXCIgLyogU0VUVVBfREVWVE9PTFNfUExVR0lOICovLCBwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuKTtcbiAgfSk7XG59XG52YXIgaG9vayA9IHtcbiAgb24sXG4gIHNldHVwRGV2VG9vbHNQbHVnaW4ocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbikge1xuICAgIHJldHVybiBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwiZGV2dG9vbHMtcGx1Z2luOnNldHVwXCIgLyogU0VUVVBfREVWVE9PTFNfUExVR0lOICovLCBwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuKTtcbiAgfVxufTtcblxuLy8gc3JjL2FwaS92Ni9pbmRleC50c1xudmFyIERldlRvb2xzVjZQbHVnaW5BUEkgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHsgcGx1Z2luLCBjdHggfSkge1xuICAgIHRoaXMuaG9va3MgPSBjdHguaG9va3M7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cbiAgZ2V0IG9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBjb21wb25lbnQgaW5zcGVjdG9yXG4gICAgICB2aXNpdENvbXBvbmVudFRyZWU6IChoYW5kbGVyKSA9PiB7XG4gICAgICAgIHRoaXMuaG9va3MuaG9vayhcInZpc2l0Q29tcG9uZW50VHJlZVwiIC8qIFZJU0lUX0NPTVBPTkVOVF9UUkVFICovLCBoYW5kbGVyKTtcbiAgICAgIH0sXG4gICAgICBpbnNwZWN0Q29tcG9uZW50OiAoaGFuZGxlcikgPT4ge1xuICAgICAgICB0aGlzLmhvb2tzLmhvb2soXCJpbnNwZWN0Q29tcG9uZW50XCIgLyogSU5TUEVDVF9DT01QT05FTlQgKi8sIGhhbmRsZXIpO1xuICAgICAgfSxcbiAgICAgIGVkaXRDb21wb25lbnRTdGF0ZTogKGhhbmRsZXIpID0+IHtcbiAgICAgICAgdGhpcy5ob29rcy5ob29rKFwiZWRpdENvbXBvbmVudFN0YXRlXCIgLyogRURJVF9DT01QT05FTlRfU1RBVEUgKi8sIGhhbmRsZXIpO1xuICAgICAgfSxcbiAgICAgIC8vIGN1c3RvbSBpbnNwZWN0b3JcbiAgICAgIGdldEluc3BlY3RvclRyZWU6IChoYW5kbGVyKSA9PiB7XG4gICAgICAgIHRoaXMuaG9va3MuaG9vayhcImdldEluc3BlY3RvclRyZWVcIiAvKiBHRVRfSU5TUEVDVE9SX1RSRUUgKi8sIGhhbmRsZXIpO1xuICAgICAgfSxcbiAgICAgIGdldEluc3BlY3RvclN0YXRlOiAoaGFuZGxlcikgPT4ge1xuICAgICAgICB0aGlzLmhvb2tzLmhvb2soXCJnZXRJbnNwZWN0b3JTdGF0ZVwiIC8qIEdFVF9JTlNQRUNUT1JfU1RBVEUgKi8sIGhhbmRsZXIpO1xuICAgICAgfSxcbiAgICAgIGVkaXRJbnNwZWN0b3JTdGF0ZTogKGhhbmRsZXIpID0+IHtcbiAgICAgICAgdGhpcy5ob29rcy5ob29rKFwiZWRpdEluc3BlY3RvclN0YXRlXCIgLyogRURJVF9JTlNQRUNUT1JfU1RBVEUgKi8sIGhhbmRsZXIpO1xuICAgICAgfSxcbiAgICAgIC8vIHRpbWVsaW5lXG4gICAgICBpbnNwZWN0VGltZWxpbmVFdmVudDogKGhhbmRsZXIpID0+IHtcbiAgICAgICAgdGhpcy5ob29rcy5ob29rKFwiaW5zcGVjdFRpbWVsaW5lRXZlbnRcIiAvKiBJTlNQRUNUX1RJTUVMSU5FX0VWRU5UICovLCBoYW5kbGVyKTtcbiAgICAgIH0sXG4gICAgICB0aW1lbGluZUNsZWFyZWQ6IChoYW5kbGVyKSA9PiB7XG4gICAgICAgIHRoaXMuaG9va3MuaG9vayhcInRpbWVsaW5lQ2xlYXJlZFwiIC8qIFRJTUVMSU5FX0NMRUFSRUQgKi8sIGhhbmRsZXIpO1xuICAgICAgfSxcbiAgICAgIC8vIHNldHRpbmdzXG4gICAgICBzZXRQbHVnaW5TZXR0aW5nczogKGhhbmRsZXIpID0+IHtcbiAgICAgICAgdGhpcy5ob29rcy5ob29rKFwic2V0UGx1Z2luU2V0dGluZ3NcIiAvKiBTRVRfUExVR0lOX1NFVFRJTkdTICovLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIC8vIGNvbXBvbmVudCBpbnNwZWN0b3JcbiAgbm90aWZ5Q29tcG9uZW50VXBkYXRlKGluc3RhbmNlKSB7XG4gICAgdmFyIF9hMjU7XG4gICAgaWYgKGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbnNwZWN0b3IgPSBnZXRBY3RpdmVJbnNwZWN0b3JzKCkuZmluZCgoaSkgPT4gaS5wYWNrYWdlTmFtZSA9PT0gdGhpcy5wbHVnaW4uZGVzY3JpcHRvci5wYWNrYWdlTmFtZSk7XG4gICAgaWYgKGluc3BlY3RvciA9PSBudWxsID8gdm9pZCAwIDogaW5zcGVjdG9yLmlkKSB7XG4gICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgY29uc3QgYXJncyA9IFtcbiAgICAgICAgICBpbnN0YW5jZS5hcHBDb250ZXh0LmFwcCxcbiAgICAgICAgICBpbnN0YW5jZS51aWQsXG4gICAgICAgICAgKF9hMjUgPSBpbnN0YW5jZS5wYXJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnVpZCxcbiAgICAgICAgICBpbnN0YW5jZVxuICAgICAgICBdO1xuICAgICAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwiY29tcG9uZW50OnVwZGF0ZWRcIiAvKiBDT01QT05FTlRfVVBEQVRFRCAqLywgLi4uYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwiY29tcG9uZW50OnVwZGF0ZWRcIiAvKiBDT01QT05FTlRfVVBEQVRFRCAqLyk7XG4gICAgICB9XG4gICAgICB0aGlzLmhvb2tzLmNhbGxIb29rKFwic2VuZEluc3BlY3RvclN0YXRlXCIgLyogU0VORF9JTlNQRUNUT1JfU1RBVEUgKi8sIHsgaW5zcGVjdG9ySWQ6IGluc3BlY3Rvci5pZCwgcGx1Z2luOiB0aGlzLnBsdWdpbiB9KTtcbiAgICB9XG4gIH1cbiAgLy8gY3VzdG9tIGluc3BlY3RvclxuICBhZGRJbnNwZWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuaG9va3MuY2FsbEhvb2soXCJhZGRJbnNwZWN0b3JcIiAvKiBBRERfSU5TUEVDVE9SICovLCB7IGluc3BlY3Rvcjogb3B0aW9ucywgcGx1Z2luOiB0aGlzLnBsdWdpbiB9KTtcbiAgICBpZiAodGhpcy5wbHVnaW4uZGVzY3JpcHRvci5zZXR0aW5ncykge1xuICAgICAgaW5pdFBsdWdpblNldHRpbmdzKG9wdGlvbnMuaWQsIHRoaXMucGx1Z2luLmRlc2NyaXB0b3Iuc2V0dGluZ3MpO1xuICAgIH1cbiAgfVxuICBzZW5kSW5zcGVjdG9yVHJlZShpbnNwZWN0b3JJZCkge1xuICAgIGlmIChkZXZ0b29sc1N0YXRlLmhpZ2hQZXJmTW9kZUVuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5ob29rcy5jYWxsSG9vayhcInNlbmRJbnNwZWN0b3JUcmVlXCIgLyogU0VORF9JTlNQRUNUT1JfVFJFRSAqLywgeyBpbnNwZWN0b3JJZCwgcGx1Z2luOiB0aGlzLnBsdWdpbiB9KTtcbiAgfVxuICBzZW5kSW5zcGVjdG9yU3RhdGUoaW5zcGVjdG9ySWQpIHtcbiAgICBpZiAoZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaG9va3MuY2FsbEhvb2soXCJzZW5kSW5zcGVjdG9yU3RhdGVcIiAvKiBTRU5EX0lOU1BFQ1RPUl9TVEFURSAqLywgeyBpbnNwZWN0b3JJZCwgcGx1Z2luOiB0aGlzLnBsdWdpbiB9KTtcbiAgfVxuICBzZWxlY3RJbnNwZWN0b3JOb2RlKGluc3BlY3RvcklkLCBub2RlSWQpIHtcbiAgICB0aGlzLmhvb2tzLmNhbGxIb29rKFwiY3VzdG9tSW5zcGVjdG9yU2VsZWN0Tm9kZVwiIC8qIENVU1RPTV9JTlNQRUNUT1JfU0VMRUNUX05PREUgKi8sIHsgaW5zcGVjdG9ySWQsIG5vZGVJZCwgcGx1Z2luOiB0aGlzLnBsdWdpbiB9KTtcbiAgfVxuICB2aXNpdENvbXBvbmVudFRyZWUocGF5bG9hZCkge1xuICAgIHJldHVybiB0aGlzLmhvb2tzLmNhbGxIb29rKFwidmlzaXRDb21wb25lbnRUcmVlXCIgLyogVklTSVRfQ09NUE9ORU5UX1RSRUUgKi8sIHBheWxvYWQpO1xuICB9XG4gIC8vIHRpbWVsaW5lXG4gIG5vdygpIHtcbiAgICBpZiAoZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIERhdGUubm93KCk7XG4gIH1cbiAgYWRkVGltZWxpbmVMYXllcihvcHRpb25zKSB7XG4gICAgdGhpcy5ob29rcy5jYWxsSG9vayhcInRpbWVsaW5lTGF5ZXJBZGRlZFwiIC8qIFRJTUVMSU5FX0xBWUVSX0FEREVEICovLCB7IG9wdGlvbnMsIHBsdWdpbjogdGhpcy5wbHVnaW4gfSk7XG4gIH1cbiAgYWRkVGltZWxpbmVFdmVudChvcHRpb25zKSB7XG4gICAgaWYgKGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhvb2tzLmNhbGxIb29rKFwidGltZWxpbmVFdmVudEFkZGVkXCIgLyogVElNRUxJTkVfRVZFTlRfQURERUQgKi8sIHsgb3B0aW9ucywgcGx1Z2luOiB0aGlzLnBsdWdpbiB9KTtcbiAgfVxuICAvLyBzZXR0aW5nc1xuICBnZXRTZXR0aW5ncyhwbHVnaW5JZCkge1xuICAgIHJldHVybiBnZXRQbHVnaW5TZXR0aW5ncyhwbHVnaW5JZCAhPSBudWxsID8gcGx1Z2luSWQgOiB0aGlzLnBsdWdpbi5kZXNjcmlwdG9yLmlkLCB0aGlzLnBsdWdpbi5kZXNjcmlwdG9yLnNldHRpbmdzKTtcbiAgfVxuICAvLyB1dGlsaXRpZXNcbiAgZ2V0Q29tcG9uZW50SW5zdGFuY2VzKGFwcCkge1xuICAgIHJldHVybiB0aGlzLmhvb2tzLmNhbGxIb29rKFwiZ2V0Q29tcG9uZW50SW5zdGFuY2VzXCIgLyogR0VUX0NPTVBPTkVOVF9JTlNUQU5DRVMgKi8sIHsgYXBwIH0pO1xuICB9XG4gIGdldENvbXBvbmVudEJvdW5kcyhpbnN0YW5jZSkge1xuICAgIHJldHVybiB0aGlzLmhvb2tzLmNhbGxIb29rKFwiZ2V0Q29tcG9uZW50Qm91bmRzXCIgLyogR0VUX0NPTVBPTkVOVF9CT1VORFMgKi8sIHsgaW5zdGFuY2UgfSk7XG4gIH1cbiAgZ2V0Q29tcG9uZW50TmFtZShpbnN0YW5jZSkge1xuICAgIHJldHVybiB0aGlzLmhvb2tzLmNhbGxIb29rKFwiZ2V0Q29tcG9uZW50TmFtZVwiIC8qIEdFVF9DT01QT05FTlRfTkFNRSAqLywgeyBpbnN0YW5jZSB9KTtcbiAgfVxuICBoaWdobGlnaHRFbGVtZW50KGluc3RhbmNlKSB7XG4gICAgY29uc3QgdWlkID0gaW5zdGFuY2UuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXztcbiAgICByZXR1cm4gdGhpcy5ob29rcy5jYWxsSG9vayhcImNvbXBvbmVudEhpZ2hsaWdodFwiIC8qIENPTVBPTkVOVF9ISUdITElHSFQgKi8sIHsgdWlkIH0pO1xuICB9XG4gIHVuaGlnaGxpZ2h0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5ob29rcy5jYWxsSG9vayhcImNvbXBvbmVudFVuaGlnaGxpZ2h0XCIgLyogQ09NUE9ORU5UX1VOSElHSExJR0hUICovKTtcbiAgfVxufTtcblxuLy8gc3JjL2FwaS9pbmRleC50c1xudmFyIERldlRvb2xzUGx1Z2luQVBJID0gRGV2VG9vbHNWNlBsdWdpbkFQSTtcblxuLy8gc3JjL2NvcmUvcGx1Z2luL2NvbXBvbmVudHMudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBkZWJvdW5jZSBhcyBkZWJvdW5jZTQgfSBmcm9tIFwicGVyZmVjdC1kZWJvdW5jZVwiO1xuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9wcm9jZXNzLnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgY2FtZWxpemUgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL2NvbnN0YW50cy50c1xuaW5pdF9lc21fc2hpbXMoKTtcbnZhciB2dWVCdWlsdGlucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgXCJuZXh0VGlja1wiLFxuICBcImRlZmluZUNvbXBvbmVudFwiLFxuICBcImRlZmluZUFzeW5jQ29tcG9uZW50XCIsXG4gIFwiZGVmaW5lQ3VzdG9tRWxlbWVudFwiLFxuICBcInJlZlwiLFxuICBcImNvbXB1dGVkXCIsXG4gIFwicmVhY3RpdmVcIixcbiAgXCJyZWFkb25seVwiLFxuICBcIndhdGNoRWZmZWN0XCIsXG4gIFwid2F0Y2hQb3N0RWZmZWN0XCIsXG4gIFwid2F0Y2hTeW5jRWZmZWN0XCIsXG4gIFwid2F0Y2hcIixcbiAgXCJpc1JlZlwiLFxuICBcInVucmVmXCIsXG4gIFwidG9SZWZcIixcbiAgXCJ0b1JlZnNcIixcbiAgXCJpc1Byb3h5XCIsXG4gIFwiaXNSZWFjdGl2ZVwiLFxuICBcImlzUmVhZG9ubHlcIixcbiAgXCJzaGFsbG93UmVmXCIsXG4gIFwidHJpZ2dlclJlZlwiLFxuICBcImN1c3RvbVJlZlwiLFxuICBcInNoYWxsb3dSZWFjdGl2ZVwiLFxuICBcInNoYWxsb3dSZWFkb25seVwiLFxuICBcInRvUmF3XCIsXG4gIFwibWFya1Jhd1wiLFxuICBcImVmZmVjdFNjb3BlXCIsXG4gIFwiZ2V0Q3VycmVudFNjb3BlXCIsXG4gIFwib25TY29wZURpc3Bvc2VcIixcbiAgXCJvbk1vdW50ZWRcIixcbiAgXCJvblVwZGF0ZWRcIixcbiAgXCJvblVubW91bnRlZFwiLFxuICBcIm9uQmVmb3JlTW91bnRcIixcbiAgXCJvbkJlZm9yZVVwZGF0ZVwiLFxuICBcIm9uQmVmb3JlVW5tb3VudFwiLFxuICBcIm9uRXJyb3JDYXB0dXJlZFwiLFxuICBcIm9uUmVuZGVyVHJhY2tlZFwiLFxuICBcIm9uUmVuZGVyVHJpZ2dlcmVkXCIsXG4gIFwib25BY3RpdmF0ZWRcIixcbiAgXCJvbkRlYWN0aXZhdGVkXCIsXG4gIFwib25TZXJ2ZXJQcmVmZXRjaFwiLFxuICBcInByb3ZpZGVcIixcbiAgXCJpbmplY3RcIixcbiAgXCJoXCIsXG4gIFwibWVyZ2VQcm9wc1wiLFxuICBcImNsb25lVk5vZGVcIixcbiAgXCJpc1ZOb2RlXCIsXG4gIFwicmVzb2x2ZUNvbXBvbmVudFwiLFxuICBcInJlc29sdmVEaXJlY3RpdmVcIixcbiAgXCJ3aXRoRGlyZWN0aXZlc1wiLFxuICBcIndpdGhNb2RpZmllcnNcIlxuXSk7XG52YXIgc3ltYm9sUkUgPSAvXlxcW25hdGl2ZSBTeW1ib2wgU3ltYm9sXFwoKC4qKVxcKVxcXSQvO1xudmFyIHJhd1R5cGVSRSA9IC9eXFxbb2JqZWN0IChcXHcrKVxcXSQvO1xudmFyIHNwZWNpYWxUeXBlUkUgPSAvXlxcW25hdGl2ZSAoXFx3KykgKC4qPykoPD4oKFtcXHNcXFNdKSopKT9cXF0kLztcbnZhciBmblR5cGVSRSA9IC9eKD86ZnVuY3Rpb258Y2xhc3MpIChcXHcrKS87XG52YXIgTUFYX1NUUklOR19TSVpFID0gMWU0O1xudmFyIE1BWF9BUlJBWV9TSVpFID0gNWUzO1xudmFyIFVOREVGSU5FRCA9IFwiX192dWVfZGV2dG9vbF91bmRlZmluZWRfX1wiO1xudmFyIElORklOSVRZID0gXCJfX3Z1ZV9kZXZ0b29sX2luZmluaXR5X19cIjtcbnZhciBORUdBVElWRV9JTkZJTklUWSA9IFwiX192dWVfZGV2dG9vbF9uZWdhdGl2ZV9pbmZpbml0eV9fXCI7XG52YXIgTkFOID0gXCJfX3Z1ZV9kZXZ0b29sX25hbl9fXCI7XG52YXIgRVNDID0ge1xuICBcIjxcIjogXCImbHQ7XCIsXG4gIFwiPlwiOiBcIiZndDtcIixcbiAgJ1wiJzogXCImcXVvdDtcIixcbiAgXCImXCI6IFwiJmFtcDtcIlxufTtcblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL3V0aWwudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9pcy50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIGlzVnVlSW5zdGFuY2UodmFsdWUpIHtcbiAgaWYgKCFlbnN1cmVQcm9wZXJ0eUV4aXN0cyh2YWx1ZSwgXCJfXCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZS5fKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmtleXModmFsdWUuXykuaW5jbHVkZXMoXCJ2bm9kZVwiKTtcbn1cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIjtcbn1cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT0gbnVsbClcbiAgICByZXR1cm4gdHJ1ZTtcbiAgY29uc3QgdHlwZSA9IHR5cGVvZiBkYXRhO1xuICByZXR1cm4gdHlwZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlID09PSBcIm51bWJlclwiIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiO1xufVxuZnVuY3Rpb24gaXNSZWYyKHJhdykge1xuICByZXR1cm4gISFyYXcuX192X2lzUmVmO1xufVxuZnVuY3Rpb24gaXNDb21wdXRlZChyYXcpIHtcbiAgcmV0dXJuIGlzUmVmMihyYXcpICYmICEhcmF3LmVmZmVjdDtcbn1cbmZ1bmN0aW9uIGlzUmVhY3RpdmUyKHJhdykge1xuICByZXR1cm4gISFyYXcuX192X2lzUmVhY3RpdmU7XG59XG5mdW5jdGlvbiBpc1JlYWRPbmx5KHJhdykge1xuICByZXR1cm4gISFyYXcuX192X2lzUmVhZG9ubHk7XG59XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS91dGlsLnRzXG52YXIgdG9rZW5NYXAgPSB7XG4gIFtVTkRFRklORURdOiBcInVuZGVmaW5lZFwiLFxuICBbTkFOXTogXCJOYU5cIixcbiAgW0lORklOSVRZXTogXCJJbmZpbml0eVwiLFxuICBbTkVHQVRJVkVfSU5GSU5JVFldOiBcIi1JbmZpbml0eVwiXG59O1xudmFyIHJldmVyc2VkVG9rZW5NYXAgPSBPYmplY3QuZW50cmllcyh0b2tlbk1hcCkucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICBhY2NbdmFsdWVdID0ga2V5O1xuICByZXR1cm4gYWNjO1xufSwge30pO1xuZnVuY3Rpb24gaW50ZXJuYWxTdGF0ZVRva2VuVG9TdHJpbmcodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsKVxuICAgIHJldHVybiBcIm51bGxcIjtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB0b2tlbk1hcFt2YWx1ZV0gfHwgZmFsc2U7XG59XG5mdW5jdGlvbiByZXBsYWNlVG9rZW5Ub1N0cmluZyh2YWx1ZSkge1xuICBjb25zdCByZXBsYWNlUmVnZXggPSBuZXcgUmVnRXhwKGBcIigke09iamVjdC5rZXlzKHRva2VuTWFwKS5qb2luKFwifFwiKX0pXCJgLCBcImdcIik7XG4gIHJldHVybiB2YWx1ZS5yZXBsYWNlKHJlcGxhY2VSZWdleCwgKF8sIGcxKSA9PiB0b2tlbk1hcFtnMV0pO1xufVxuZnVuY3Rpb24gcmVwbGFjZVN0cmluZ1RvVG9rZW4odmFsdWUpIHtcbiAgY29uc3QgbGl0ZXJhbFZhbHVlID0gcmV2ZXJzZWRUb2tlbk1hcFt2YWx1ZS50cmltKCldO1xuICBpZiAobGl0ZXJhbFZhbHVlKVxuICAgIHJldHVybiBgXCIke2xpdGVyYWxWYWx1ZX1cImA7XG4gIGNvbnN0IHJlcGxhY2VSZWdleCA9IG5ldyBSZWdFeHAoYDpcXFxccyooJHtPYmplY3Qua2V5cyhyZXZlcnNlZFRva2VuTWFwKS5qb2luKFwifFwiKX0pYCwgXCJnXCIpO1xuICByZXR1cm4gdmFsdWUucmVwbGFjZShyZXBsYWNlUmVnZXgsIChfLCBnMSkgPT4gYDpcIiR7cmV2ZXJzZWRUb2tlbk1hcFtnMV19XCJgKTtcbn1cbmZ1bmN0aW9uIGdldFByb3BUeXBlKHR5cGUpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpXG4gICAgcmV0dXJuIHR5cGUubWFwKCh0KSA9PiBnZXRQcm9wVHlwZSh0KSkuam9pbihcIiBvciBcIik7XG4gIGlmICh0eXBlID09IG51bGwpXG4gICAgcmV0dXJuIFwibnVsbFwiO1xuICBjb25zdCBtYXRjaCA9IHR5cGUudG9TdHJpbmcoKS5tYXRjaChmblR5cGVSRSk7XG4gIHJldHVybiB0eXBlb2YgdHlwZSA9PT0gXCJmdW5jdGlvblwiID8gbWF0Y2ggJiYgbWF0Y2hbMV0gfHwgXCJhbnlcIiA6IFwiYW55XCI7XG59XG5mdW5jdGlvbiBzYW5pdGl6ZShkYXRhKSB7XG4gIGlmICghaXNQcmltaXRpdmUoZGF0YSkgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSkgJiYgIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGEpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59XG5mdW5jdGlvbiBnZXRTZXR1cFN0YXRlVHlwZShyYXcpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVmOiBpc1JlZjIocmF3KSxcbiAgICAgIGNvbXB1dGVkOiBpc0NvbXB1dGVkKHJhdyksXG4gICAgICByZWFjdGl2ZTogaXNSZWFjdGl2ZTIocmF3KSxcbiAgICAgIHJlYWRvbmx5OiBpc1JlYWRPbmx5KHJhdylcbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZjogZmFsc2UsXG4gICAgICBjb21wdXRlZDogZmFsc2UsXG4gICAgICByZWFjdGl2ZTogZmFsc2UsXG4gICAgICByZWFkb25seTogZmFsc2VcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiB0b1JhdzIodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5fX3ZfcmF3KVxuICAgIHJldHVybiB2YWx1ZS5fX3ZfcmF3O1xuICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBlc2NhcGUocykge1xuICByZXR1cm4gcy5yZXBsYWNlKC9bPD5cIiZdL2csIChzMikgPT4ge1xuICAgIHJldHVybiBFU0NbczJdIHx8IHMyO1xuICB9KTtcbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL3Byb2Nlc3MudHNcbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyh0bywgZnJvbSwgaW5zdGFuY2UpIHtcbiAgaWYgKHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpXG4gICAgZnJvbSA9IGZyb20ub3B0aW9ucztcbiAgaWYgKCFmcm9tKVxuICAgIHJldHVybiB0bztcbiAgY29uc3QgeyBtaXhpbnMsIGV4dGVuZHM6IGV4dGVuZHNPcHRpb25zIH0gPSBmcm9tO1xuICBleHRlbmRzT3B0aW9ucyAmJiBtZXJnZU9wdGlvbnModG8sIGV4dGVuZHNPcHRpb25zLCBpbnN0YW5jZSk7XG4gIG1peGlucyAmJiBtaXhpbnMuZm9yRWFjaChcbiAgICAobSkgPT4gbWVyZ2VPcHRpb25zKHRvLCBtLCBpbnN0YW5jZSlcbiAgKTtcbiAgZm9yIChjb25zdCBrZXkgb2YgW1wiY29tcHV0ZWRcIiwgXCJpbmplY3RcIl0pIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcbiAgICAgIGlmICghdG9ba2V5XSlcbiAgICAgICAgdG9ba2V5XSA9IGZyb21ba2V5XTtcbiAgICAgIGVsc2VcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0b1trZXldLCBmcm9tW2tleV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG87XG59XG5mdW5jdGlvbiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkge1xuICBjb25zdCByYXcgPSBpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UudHlwZTtcbiAgaWYgKCFyYXcpXG4gICAgcmV0dXJuIHt9O1xuICBjb25zdCB7IG1peGlucywgZXh0ZW5kczogZXh0ZW5kc09wdGlvbnMgfSA9IHJhdztcbiAgY29uc3QgZ2xvYmFsTWl4aW5zID0gaW5zdGFuY2UuYXBwQ29udGV4dC5taXhpbnM7XG4gIGlmICghZ2xvYmFsTWl4aW5zLmxlbmd0aCAmJiAhbWl4aW5zICYmICFleHRlbmRzT3B0aW9ucylcbiAgICByZXR1cm4gcmF3O1xuICBjb25zdCBvcHRpb25zID0ge307XG4gIGdsb2JhbE1peGlucy5mb3JFYWNoKChtKSA9PiBtZXJnZU9wdGlvbnMob3B0aW9ucywgbSwgaW5zdGFuY2UpKTtcbiAgbWVyZ2VPcHRpb25zKG9wdGlvbnMsIHJhdywgaW5zdGFuY2UpO1xuICByZXR1cm4gb3B0aW9ucztcbn1cbmZ1bmN0aW9uIHByb2Nlc3NQcm9wcyhpbnN0YW5jZSkge1xuICB2YXIgX2EyNTtcbiAgY29uc3QgcHJvcHMgPSBbXTtcbiAgY29uc3QgcHJvcERlZmluaXRpb25zID0gKF9hMjUgPSBpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UudHlwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUucHJvcHM7XG4gIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS5wcm9wcykge1xuICAgIGNvbnN0IHByb3BEZWZpbml0aW9uID0gcHJvcERlZmluaXRpb25zID8gcHJvcERlZmluaXRpb25zW2tleV0gOiBudWxsO1xuICAgIGNvbnN0IGNhbWVsaXplS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICBwcm9wcy5wdXNoKHtcbiAgICAgIHR5cGU6IFwicHJvcHNcIixcbiAgICAgIGtleTogY2FtZWxpemVLZXksXG4gICAgICB2YWx1ZTogcmV0dXJuRXJyb3IoKCkgPT4gaW5zdGFuY2UucHJvcHNba2V5XSksXG4gICAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICAgIG1ldGE6IHByb3BEZWZpbml0aW9uID8ge1xuICAgICAgICB0eXBlOiBwcm9wRGVmaW5pdGlvbi50eXBlID8gZ2V0UHJvcFR5cGUocHJvcERlZmluaXRpb24udHlwZSkgOiBcImFueVwiLFxuICAgICAgICByZXF1aXJlZDogISFwcm9wRGVmaW5pdGlvbi5yZXF1aXJlZCxcbiAgICAgICAgLi4ucHJvcERlZmluaXRpb24uZGVmYXVsdCA/IHtcbiAgICAgICAgICBkZWZhdWx0OiBwcm9wRGVmaW5pdGlvbi5kZWZhdWx0LnRvU3RyaW5nKClcbiAgICAgICAgfSA6IHt9XG4gICAgICB9IDogeyB0eXBlOiBcImludmFsaWRcIiB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHByb3BzO1xufVxuZnVuY3Rpb24gcHJvY2Vzc1N0YXRlKGluc3RhbmNlKSB7XG4gIGNvbnN0IHR5cGUgPSBpbnN0YW5jZS50eXBlO1xuICBjb25zdCBwcm9wcyA9IHR5cGUgPT0gbnVsbCA/IHZvaWQgMCA6IHR5cGUucHJvcHM7XG4gIGNvbnN0IGdldHRlcnMgPSB0eXBlLnZ1ZXggJiYgdHlwZS52dWV4LmdldHRlcnM7XG4gIGNvbnN0IGNvbXB1dGVkRGVmcyA9IHR5cGUuY29tcHV0ZWQ7XG4gIGNvbnN0IGRhdGEgPSB7XG4gICAgLi4uaW5zdGFuY2UuZGF0YSxcbiAgICAuLi5pbnN0YW5jZS5yZW5kZXJDb250ZXh0XG4gIH07XG4gIHJldHVybiBPYmplY3Qua2V5cyhkYXRhKS5maWx0ZXIoKGtleSkgPT4gIShwcm9wcyAmJiBrZXkgaW4gcHJvcHMpICYmICEoZ2V0dGVycyAmJiBrZXkgaW4gZ2V0dGVycykgJiYgIShjb21wdXRlZERlZnMgJiYga2V5IGluIGNvbXB1dGVkRGVmcykpLm1hcCgoa2V5KSA9PiAoe1xuICAgIGtleSxcbiAgICB0eXBlOiBcImRhdGFcIixcbiAgICB2YWx1ZTogcmV0dXJuRXJyb3IoKCkgPT4gZGF0YVtrZXldKSxcbiAgICBlZGl0YWJsZTogdHJ1ZVxuICB9KSk7XG59XG5mdW5jdGlvbiBnZXRTdGF0ZVR5cGVBbmROYW1lKGluZm8pIHtcbiAgY29uc3Qgc3RhdGVUeXBlID0gaW5mby5jb21wdXRlZCA/IFwiY29tcHV0ZWRcIiA6IGluZm8ucmVmID8gXCJyZWZcIiA6IGluZm8ucmVhY3RpdmUgPyBcInJlYWN0aXZlXCIgOiBudWxsO1xuICBjb25zdCBzdGF0ZVR5cGVOYW1lID0gc3RhdGVUeXBlID8gYCR7c3RhdGVUeXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpfSR7c3RhdGVUeXBlLnNsaWNlKDEpfWAgOiBudWxsO1xuICByZXR1cm4ge1xuICAgIHN0YXRlVHlwZSxcbiAgICBzdGF0ZVR5cGVOYW1lXG4gIH07XG59XG5mdW5jdGlvbiBwcm9jZXNzU2V0dXBTdGF0ZShpbnN0YW5jZSkge1xuICBjb25zdCByYXcgPSBpbnN0YW5jZS5kZXZ0b29sc1Jhd1NldHVwU3RhdGUgfHwge307XG4gIHJldHVybiBPYmplY3Qua2V5cyhpbnN0YW5jZS5zZXR1cFN0YXRlKS5maWx0ZXIoKGtleSkgPT4gIXZ1ZUJ1aWx0aW5zLmhhcyhrZXkpICYmIGtleS5zcGxpdCgvKD89W0EtWl0pLylbMF0gIT09IFwidXNlXCIpLm1hcCgoa2V5KSA9PiB7XG4gICAgdmFyIF9hMjUsIF9iMjUsIF9jLCBfZDtcbiAgICBjb25zdCB2YWx1ZSA9IHJldHVybkVycm9yKCgpID0+IHRvUmF3MihpbnN0YW5jZS5zZXR1cFN0YXRlW2tleV0pKTtcbiAgICBjb25zdCBhY2Nlc3NFcnJvciA9IHZhbHVlIGluc3RhbmNlb2YgRXJyb3I7XG4gICAgY29uc3QgcmF3RGF0YSA9IHJhd1trZXldO1xuICAgIGxldCByZXN1bHQ7XG4gICAgbGV0IGlzT3RoZXJUeXBlID0gYWNjZXNzRXJyb3IgfHwgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgZW5zdXJlUHJvcGVydHlFeGlzdHModmFsdWUsIFwicmVuZGVyXCIpICYmIHR5cGVvZiB2YWx1ZS5yZW5kZXIgPT09IFwiZnVuY3Rpb25cIiB8fCBlbnN1cmVQcm9wZXJ0eUV4aXN0cyh2YWx1ZSwgXCJfX2FzeW5jTG9hZGVyXCIpICYmIHR5cGVvZiB2YWx1ZS5fX2FzeW5jTG9hZGVyID09PSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICYmIChcInNldHVwXCIgaW4gdmFsdWUgfHwgXCJwcm9wc1wiIGluIHZhbHVlKSB8fCAvXnZbQS1aXS8udGVzdChrZXkpO1xuICAgIGlmIChyYXdEYXRhICYmICFhY2Nlc3NFcnJvcikge1xuICAgICAgY29uc3QgaW5mbyA9IGdldFNldHVwU3RhdGVUeXBlKHJhd0RhdGEpO1xuICAgICAgY29uc3QgeyBzdGF0ZVR5cGUsIHN0YXRlVHlwZU5hbWUgfSA9IGdldFN0YXRlVHlwZUFuZE5hbWUoaW5mbyk7XG4gICAgICBjb25zdCBpc1N0YXRlID0gaW5mby5yZWYgfHwgaW5mby5jb21wdXRlZCB8fCBpbmZvLnJlYWN0aXZlO1xuICAgICAgY29uc3QgcmF3MiA9IGVuc3VyZVByb3BlcnR5RXhpc3RzKHJhd0RhdGEsIFwiZWZmZWN0XCIpID8gKChfYjI1ID0gKF9hMjUgPSByYXdEYXRhLmVmZmVjdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUucmF3KSA9PSBudWxsID8gdm9pZCAwIDogX2IyNS50b1N0cmluZygpKSB8fCAoKF9kID0gKF9jID0gcmF3RGF0YS5lZmZlY3QpID09IG51bGwgPyB2b2lkIDAgOiBfYy5mbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnRvU3RyaW5nKCkpIDogbnVsbDtcbiAgICAgIGlmIChzdGF0ZVR5cGUpXG4gICAgICAgIGlzT3RoZXJUeXBlID0gZmFsc2U7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIC4uLnN0YXRlVHlwZSA/IHsgc3RhdGVUeXBlLCBzdGF0ZVR5cGVOYW1lIH0gOiB7fSxcbiAgICAgICAgLi4ucmF3MiA/IHsgcmF3OiByYXcyIH0gOiB7fSxcbiAgICAgICAgZWRpdGFibGU6IGlzU3RhdGUgJiYgIWluZm8ucmVhZG9ubHlcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSBpc090aGVyVHlwZSA/IFwic2V0dXAgKG90aGVyKVwiIDogXCJzZXR1cFwiO1xuICAgIHJldHVybiB7XG4gICAgICBrZXksXG4gICAgICB2YWx1ZSxcbiAgICAgIHR5cGUsXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGlnbm9yZVxuICAgICAgLi4ucmVzdWx0XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiBwcm9jZXNzQ29tcHV0ZWQoaW5zdGFuY2UsIG1lcmdlZFR5cGUpIHtcbiAgY29uc3QgdHlwZSA9IG1lcmdlZFR5cGU7XG4gIGNvbnN0IGNvbXB1dGVkID0gW107XG4gIGNvbnN0IGRlZnMgPSB0eXBlLmNvbXB1dGVkIHx8IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBkZWZzKSB7XG4gICAgY29uc3QgZGVmID0gZGVmc1trZXldO1xuICAgIGNvbnN0IHR5cGUyID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiICYmIGRlZi52dWV4ID8gXCJ2dWV4IGJpbmRpbmdzXCIgOiBcImNvbXB1dGVkXCI7XG4gICAgY29tcHV0ZWQucHVzaCh7XG4gICAgICB0eXBlOiB0eXBlMixcbiAgICAgIGtleSxcbiAgICAgIHZhbHVlOiByZXR1cm5FcnJvcigoKSA9PiB7XG4gICAgICAgIHZhciBfYTI1O1xuICAgICAgICByZXR1cm4gKF9hMjUgPSBpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UucHJveHkpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1W2tleV07XG4gICAgICB9KSxcbiAgICAgIGVkaXRhYmxlOiB0eXBlb2YgZGVmLnNldCA9PT0gXCJmdW5jdGlvblwiXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGNvbXB1dGVkO1xufVxuZnVuY3Rpb24gcHJvY2Vzc0F0dHJzKGluc3RhbmNlKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhpbnN0YW5jZS5hdHRycykubWFwKChrZXkpID0+ICh7XG4gICAgdHlwZTogXCJhdHRyc1wiLFxuICAgIGtleSxcbiAgICB2YWx1ZTogcmV0dXJuRXJyb3IoKCkgPT4gaW5zdGFuY2UuYXR0cnNba2V5XSlcbiAgfSkpO1xufVxuZnVuY3Rpb24gcHJvY2Vzc1Byb3ZpZGUoaW5zdGFuY2UpIHtcbiAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyhpbnN0YW5jZS5wcm92aWRlcykubWFwKChrZXkpID0+ICh7XG4gICAgdHlwZTogXCJwcm92aWRlZFwiLFxuICAgIGtleToga2V5LnRvU3RyaW5nKCksXG4gICAgdmFsdWU6IHJldHVybkVycm9yKCgpID0+IGluc3RhbmNlLnByb3ZpZGVzW2tleV0pXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NJbmplY3QoaW5zdGFuY2UsIG1lcmdlZFR5cGUpIHtcbiAgaWYgKCEobWVyZ2VkVHlwZSA9PSBudWxsID8gdm9pZCAwIDogbWVyZ2VkVHlwZS5pbmplY3QpKVxuICAgIHJldHVybiBbXTtcbiAgbGV0IGtleXMgPSBbXTtcbiAgbGV0IGRlZmF1bHRWYWx1ZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobWVyZ2VkVHlwZS5pbmplY3QpKSB7XG4gICAga2V5cyA9IG1lcmdlZFR5cGUuaW5qZWN0Lm1hcCgoa2V5KSA9PiAoe1xuICAgICAga2V5LFxuICAgICAgb3JpZ2luYWxLZXk6IGtleVxuICAgIH0pKTtcbiAgfSBlbHNlIHtcbiAgICBrZXlzID0gUmVmbGVjdC5vd25LZXlzKG1lcmdlZFR5cGUuaW5qZWN0KS5tYXAoKGtleSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBtZXJnZWRUeXBlLmluamVjdFtrZXldO1xuICAgICAgbGV0IG9yaWdpbmFsS2V5O1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwic3ltYm9sXCIpIHtcbiAgICAgICAgb3JpZ2luYWxLZXkgPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9yaWdpbmFsS2V5ID0gdmFsdWUuZnJvbTtcbiAgICAgICAgZGVmYXVsdFZhbHVlID0gdmFsdWUuZGVmYXVsdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleSxcbiAgICAgICAgb3JpZ2luYWxLZXlcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGtleXMubWFwKCh7IGtleSwgb3JpZ2luYWxLZXkgfSkgPT4gKHtcbiAgICB0eXBlOiBcImluamVjdGVkXCIsXG4gICAga2V5OiBvcmlnaW5hbEtleSAmJiBrZXkgIT09IG9yaWdpbmFsS2V5ID8gYCR7b3JpZ2luYWxLZXkudG9TdHJpbmcoKX0gXFx1Mjc5RSAke2tleS50b1N0cmluZygpfWAgOiBrZXkudG9TdHJpbmcoKSxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgdmFsdWU6IHJldHVybkVycm9yKCgpID0+IGluc3RhbmNlLmN0eC5oYXNPd25Qcm9wZXJ0eShrZXkpID8gaW5zdGFuY2UuY3R4W2tleV0gOiBpbnN0YW5jZS5wcm92aWRlcy5oYXNPd25Qcm9wZXJ0eShvcmlnaW5hbEtleSkgPyBpbnN0YW5jZS5wcm92aWRlc1tvcmlnaW5hbEtleV0gOiBkZWZhdWx0VmFsdWUpXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NSZWZzKGluc3RhbmNlKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhpbnN0YW5jZS5yZWZzKS5tYXAoKGtleSkgPT4gKHtcbiAgICB0eXBlOiBcInRlbXBsYXRlIHJlZnNcIixcbiAgICBrZXksXG4gICAgdmFsdWU6IHJldHVybkVycm9yKCgpID0+IGluc3RhbmNlLnJlZnNba2V5XSlcbiAgfSkpO1xufVxuZnVuY3Rpb24gcHJvY2Vzc0V2ZW50TGlzdGVuZXJzKGluc3RhbmNlKSB7XG4gIHZhciBfYTI1LCBfYjI1O1xuICBjb25zdCBlbWl0c0RlZmluaXRpb24gPSBpbnN0YW5jZS50eXBlLmVtaXRzO1xuICBjb25zdCBkZWNsYXJlZEVtaXRzID0gQXJyYXkuaXNBcnJheShlbWl0c0RlZmluaXRpb24pID8gZW1pdHNEZWZpbml0aW9uIDogT2JqZWN0LmtleXMoZW1pdHNEZWZpbml0aW9uICE9IG51bGwgPyBlbWl0c0RlZmluaXRpb24gOiB7fSk7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cygoX2IyNSA9IChfYTI1ID0gaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLnZub2RlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5wcm9wcykgIT0gbnVsbCA/IF9iMjUgOiB7fSk7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgY29uc3QgW3ByZWZpeCwgLi4uZXZlbnROYW1lUGFydHNdID0ga2V5LnNwbGl0KC8oPz1bQS1aXSkvKTtcbiAgICBpZiAocHJlZml4ID09PSBcIm9uXCIpIHtcbiAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IGV2ZW50TmFtZVBhcnRzLmpvaW4oXCItXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBpc0RlY2xhcmVkID0gZGVjbGFyZWRFbWl0cy5pbmNsdWRlcyhldmVudE5hbWUpO1xuICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICB0eXBlOiBcImV2ZW50IGxpc3RlbmVyc1wiLFxuICAgICAgICBrZXk6IGV2ZW50TmFtZSxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBfY3VzdG9tOiB7XG4gICAgICAgICAgICBkaXNwbGF5VGV4dDogaXNEZWNsYXJlZCA/IFwiXFx1MjcwNSBEZWNsYXJlZFwiIDogXCJcXHUyNkEwXFx1RkUwRiBOb3QgZGVjbGFyZWRcIixcbiAgICAgICAgICAgIGtleTogaXNEZWNsYXJlZCA/IFwiXFx1MjcwNSBEZWNsYXJlZFwiIDogXCJcXHUyNkEwXFx1RkUwRiBOb3QgZGVjbGFyZWRcIixcbiAgICAgICAgICAgIHZhbHVlOiBpc0RlY2xhcmVkID8gXCJcXHUyNzA1IERlY2xhcmVkXCIgOiBcIlxcdTI2QTBcXHVGRTBGIE5vdCBkZWNsYXJlZFwiLFxuICAgICAgICAgICAgdG9vbHRpcFRleHQ6ICFpc0RlY2xhcmVkID8gYFRoZSBldmVudCA8Y29kZT4ke2V2ZW50TmFtZX08L2NvZGU+IGlzIG5vdCBkZWNsYXJlZCBpbiB0aGUgPGNvZGU+ZW1pdHM8L2NvZGU+IG9wdGlvbi4gSXQgd2lsbCBsZWFrIGludG8gdGhlIGNvbXBvbmVudCdzIGF0dHJpYnV0ZXMgKDxjb2RlPiRhdHRyczwvY29kZT4pLmAgOiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NJbnN0YW5jZVN0YXRlKGluc3RhbmNlKSB7XG4gIGNvbnN0IG1lcmdlZFR5cGUgPSByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSk7XG4gIHJldHVybiBwcm9jZXNzUHJvcHMoaW5zdGFuY2UpLmNvbmNhdChcbiAgICBwcm9jZXNzU3RhdGUoaW5zdGFuY2UpLFxuICAgIHByb2Nlc3NTZXR1cFN0YXRlKGluc3RhbmNlKSxcbiAgICBwcm9jZXNzQ29tcHV0ZWQoaW5zdGFuY2UsIG1lcmdlZFR5cGUpLFxuICAgIHByb2Nlc3NBdHRycyhpbnN0YW5jZSksXG4gICAgcHJvY2Vzc1Byb3ZpZGUoaW5zdGFuY2UpLFxuICAgIHByb2Nlc3NJbmplY3QoaW5zdGFuY2UsIG1lcmdlZFR5cGUpLFxuICAgIHByb2Nlc3NSZWZzKGluc3RhbmNlKSxcbiAgICBwcm9jZXNzRXZlbnRMaXN0ZW5lcnMoaW5zdGFuY2UpXG4gICk7XG59XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9pbmRleC50c1xuZnVuY3Rpb24gZ2V0SW5zdGFuY2VTdGF0ZShwYXJhbXMpIHtcbiAgdmFyIF9hMjU7XG4gIGNvbnN0IGluc3RhbmNlID0gZ2V0Q29tcG9uZW50SW5zdGFuY2UoYWN0aXZlQXBwUmVjb3JkLnZhbHVlLCBwYXJhbXMuaW5zdGFuY2VJZCk7XG4gIGNvbnN0IGlkID0gZ2V0VW5pcXVlQ29tcG9uZW50SWQoaW5zdGFuY2UpO1xuICBjb25zdCBuYW1lID0gZ2V0SW5zdGFuY2VOYW1lKGluc3RhbmNlKTtcbiAgY29uc3QgZmlsZSA9IChfYTI1ID0gaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLnR5cGUpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1Ll9fZmlsZTtcbiAgY29uc3Qgc3RhdGUgPSBwcm9jZXNzSW5zdGFuY2VTdGF0ZShpbnN0YW5jZSk7XG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgbmFtZSxcbiAgICBmaWxlLFxuICAgIHN0YXRlLFxuICAgIGluc3RhbmNlXG4gIH07XG59XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC90cmVlL3dhbGtlci50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3RyZWUvZmlsdGVyLnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgY2xhc3NpZnkgYXMgY2xhc3NpZnkyLCBrZWJhYml6ZSB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIENvbXBvbmVudEZpbHRlciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoZmlsdGVyKSB7XG4gICAgdGhpcy5maWx0ZXIgPSBmaWx0ZXIgfHwgXCJcIjtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gaW5zdGFuY2UgaXMgcXVhbGlmaWVkLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZXxWbm9kZX0gaW5zdGFuY2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzUXVhbGlmaWVkKGluc3RhbmNlKSB7XG4gICAgY29uc3QgbmFtZSA9IGdldEluc3RhbmNlTmFtZShpbnN0YW5jZSk7XG4gICAgcmV0dXJuIGNsYXNzaWZ5MihuYW1lKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuZmlsdGVyKSB8fCBrZWJhYml6ZShuYW1lKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuZmlsdGVyKTtcbiAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudEZpbHRlcihmaWx0ZXJUZXh0KSB7XG4gIHJldHVybiBuZXcgQ29tcG9uZW50RmlsdGVyKGZpbHRlclRleHQpO1xufVxuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvdHJlZS93YWxrZXIudHNcbnZhciBDb21wb25lbnRXYWxrZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAvLyBEZWR1cGUgaW5zdGFuY2VzIChTb21lIGluc3RhbmNlcyBtYXkgYmUgYm90aCBvbiBhIGNvbXBvbmVudCBhbmQgb24gYSBjaGlsZCBhYnN0cmFjdC9mdW5jdGlvbmFsIGNvbXBvbmVudClcbiAgICB0aGlzLmNhcHR1cmVJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHsgZmlsdGVyVGV4dCA9IFwiXCIsIG1heERlcHRoLCByZWN1cnNpdmVseSwgYXBpIH0gPSBvcHRpb25zO1xuICAgIHRoaXMuY29tcG9uZW50RmlsdGVyID0gY3JlYXRlQ29tcG9uZW50RmlsdGVyKGZpbHRlclRleHQpO1xuICAgIHRoaXMubWF4RGVwdGggPSBtYXhEZXB0aDtcbiAgICB0aGlzLnJlY3Vyc2l2ZWx5ID0gcmVjdXJzaXZlbHk7XG4gICAgdGhpcy5hcGkgPSBhcGk7XG4gIH1cbiAgZ2V0Q29tcG9uZW50VHJlZShpbnN0YW5jZSkge1xuICAgIHRoaXMuY2FwdHVyZUlkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgcmV0dXJuIHRoaXMuZmluZFF1YWxpZmllZENoaWxkcmVuKGluc3RhbmNlLCAwKTtcbiAgfVxuICBnZXRDb21wb25lbnRQYXJlbnRzKGluc3RhbmNlKSB7XG4gICAgdGhpcy5jYXB0dXJlSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBjb25zdCBwYXJlbnRzID0gW107XG4gICAgdGhpcy5jYXB0dXJlSWQoaW5zdGFuY2UpO1xuICAgIGxldCBwYXJlbnQgPSBpbnN0YW5jZTtcbiAgICB3aGlsZSAocGFyZW50ID0gcGFyZW50LnBhcmVudCkge1xuICAgICAgdGhpcy5jYXB0dXJlSWQocGFyZW50KTtcbiAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gcGFyZW50cztcbiAgfVxuICBjYXB0dXJlSWQoaW5zdGFuY2UpIHtcbiAgICBpZiAoIWluc3RhbmNlKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgaWQgPSBpbnN0YW5jZS5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fICE9IG51bGwgPyBpbnN0YW5jZS5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fIDogZ2V0VW5pcXVlQ29tcG9uZW50SWQoaW5zdGFuY2UpO1xuICAgIGluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18gPSBpZDtcbiAgICBpZiAodGhpcy5jYXB0dXJlSWRzLmhhcyhpZCkpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBlbHNlXG4gICAgICB0aGlzLmNhcHR1cmVJZHMuc2V0KGlkLCB2b2lkIDApO1xuICAgIHRoaXMubWFyayhpbnN0YW5jZSk7XG4gICAgcmV0dXJuIGlkO1xuICB9XG4gIC8qKlxuICAgKiBDYXB0dXJlIHRoZSBtZXRhIGluZm9ybWF0aW9uIG9mIGFuIGluc3RhbmNlLiAocmVjdXJzaXZlKVxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gaW5zdGFuY2VcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKi9cbiAgYXN5bmMgY2FwdHVyZShpbnN0YW5jZSwgZGVwdGgpIHtcbiAgICB2YXIgX2EyNTtcbiAgICBpZiAoIWluc3RhbmNlKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgaWQgPSB0aGlzLmNhcHR1cmVJZChpbnN0YW5jZSk7XG4gICAgY29uc3QgbmFtZSA9IGdldEluc3RhbmNlTmFtZShpbnN0YW5jZSk7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmdldEludGVybmFsSW5zdGFuY2VDaGlsZHJlbihpbnN0YW5jZS5zdWJUcmVlKS5maWx0ZXIoKGNoaWxkKSA9PiAhaXNCZWluZ0Rlc3Ryb3llZChjaGlsZCkpO1xuICAgIGNvbnN0IHBhcmVudHMgPSB0aGlzLmdldENvbXBvbmVudFBhcmVudHMoaW5zdGFuY2UpIHx8IFtdO1xuICAgIGNvbnN0IGluYWN0aXZlID0gISFpbnN0YW5jZS5pc0RlYWN0aXZhdGVkIHx8IHBhcmVudHMuc29tZSgocGFyZW50KSA9PiBwYXJlbnQuaXNEZWFjdGl2YXRlZCk7XG4gICAgY29uc3QgdHJlZU5vZGUgPSB7XG4gICAgICB1aWQ6IGluc3RhbmNlLnVpZCxcbiAgICAgIGlkLFxuICAgICAgbmFtZSxcbiAgICAgIHJlbmRlcktleTogZ2V0UmVuZGVyS2V5KGluc3RhbmNlLnZub2RlID8gaW5zdGFuY2Uudm5vZGUua2V5IDogbnVsbCksXG4gICAgICBpbmFjdGl2ZSxcbiAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgIGlzRnJhZ21lbnQ6IGlzRnJhZ21lbnQoaW5zdGFuY2UpLFxuICAgICAgdGFnczogdHlwZW9mIGluc3RhbmNlLnR5cGUgIT09IFwiZnVuY3Rpb25cIiA/IFtdIDogW1xuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6IFwiZnVuY3Rpb25hbFwiLFxuICAgICAgICAgIHRleHRDb2xvcjogNTU5MjQwNSxcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IDE1NjU4NzM0XG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBhdXRvT3BlbjogdGhpcy5yZWN1cnNpdmVseSxcbiAgICAgIGZpbGU6IGluc3RhbmNlLnR5cGUuX19maWxlIHx8IFwiXCJcbiAgICB9O1xuICAgIGlmIChkZXB0aCA8IHRoaXMubWF4RGVwdGggfHwgaW5zdGFuY2UudHlwZS5fX2lzS2VlcEFsaXZlIHx8IHBhcmVudHMuc29tZSgocGFyZW50KSA9PiBwYXJlbnQudHlwZS5fX2lzS2VlcEFsaXZlKSkge1xuICAgICAgdHJlZU5vZGUuY2hpbGRyZW4gPSBhd2FpdCBQcm9taXNlLmFsbChjaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiB0aGlzLmNhcHR1cmUoY2hpbGQsIGRlcHRoICsgMSkpLmZpbHRlcihCb29sZWFuKSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzS2VlcEFsaXZlKGluc3RhbmNlKSkge1xuICAgICAgY29uc3QgY2FjaGVkQ29tcG9uZW50cyA9IHRoaXMuZ2V0S2VlcEFsaXZlQ2FjaGVkSW5zdGFuY2VzKGluc3RhbmNlKTtcbiAgICAgIGNvbnN0IGNoaWxkcmVuSWRzID0gY2hpbGRyZW4ubWFwKChjaGlsZCkgPT4gY2hpbGQuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXyk7XG4gICAgICBmb3IgKGNvbnN0IGNhY2hlZENoaWxkIG9mIGNhY2hlZENvbXBvbmVudHMpIHtcbiAgICAgICAgaWYgKCFjaGlsZHJlbklkcy5pbmNsdWRlcyhjYWNoZWRDaGlsZC5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fKSkge1xuICAgICAgICAgIGNvbnN0IG5vZGUgPSBhd2FpdCB0aGlzLmNhcHR1cmUoeyAuLi5jYWNoZWRDaGlsZCwgaXNEZWFjdGl2YXRlZDogdHJ1ZSB9LCBkZXB0aCArIDEpO1xuICAgICAgICAgIGlmIChub2RlKVxuICAgICAgICAgICAgdHJlZU5vZGUuY2hpbGRyZW4ucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByb290RWxlbWVudHMgPSBnZXRSb290RWxlbWVudHNGcm9tQ29tcG9uZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgIGNvbnN0IGZpcnN0RWxlbWVudCA9IHJvb3RFbGVtZW50c1swXTtcbiAgICBpZiAoZmlyc3RFbGVtZW50ID09IG51bGwgPyB2b2lkIDAgOiBmaXJzdEVsZW1lbnQucGFyZW50RWxlbWVudCkge1xuICAgICAgY29uc3QgcGFyZW50SW5zdGFuY2UgPSBpbnN0YW5jZS5wYXJlbnQ7XG4gICAgICBjb25zdCBwYXJlbnRSb290RWxlbWVudHMgPSBwYXJlbnRJbnN0YW5jZSA/IGdldFJvb3RFbGVtZW50c0Zyb21Db21wb25lbnRJbnN0YW5jZShwYXJlbnRJbnN0YW5jZSkgOiBbXTtcbiAgICAgIGxldCBlbCA9IGZpcnN0RWxlbWVudDtcbiAgICAgIGNvbnN0IGluZGV4TGlzdCA9IFtdO1xuICAgICAgZG8ge1xuICAgICAgICBpbmRleExpc3QucHVzaChBcnJheS5mcm9tKGVsLnBhcmVudEVsZW1lbnQuY2hpbGROb2RlcykuaW5kZXhPZihlbCkpO1xuICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gICAgICB9IHdoaWxlIChlbC5wYXJlbnRFbGVtZW50ICYmIHBhcmVudFJvb3RFbGVtZW50cy5sZW5ndGggJiYgIXBhcmVudFJvb3RFbGVtZW50cy5pbmNsdWRlcyhlbCkpO1xuICAgICAgdHJlZU5vZGUuZG9tT3JkZXIgPSBpbmRleExpc3QucmV2ZXJzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmVlTm9kZS5kb21PcmRlciA9IFstMV07XG4gICAgfVxuICAgIGlmICgoX2EyNSA9IGluc3RhbmNlLnN1c3BlbnNlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5zdXNwZW5zZUtleSkge1xuICAgICAgdHJlZU5vZGUudGFncy5wdXNoKHtcbiAgICAgICAgbGFiZWw6IGluc3RhbmNlLnN1c3BlbnNlLnN1c3BlbnNlS2V5LFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IDE0OTc5ODEyLFxuICAgICAgICB0ZXh0Q29sb3I6IDE2Nzc3MjE1XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWFyayhpbnN0YW5jZSwgdHJ1ZSk7XG4gICAgfVxuICAgIHRoaXMuYXBpLnZpc2l0Q29tcG9uZW50VHJlZSh7XG4gICAgICB0cmVlTm9kZSxcbiAgICAgIGNvbXBvbmVudEluc3RhbmNlOiBpbnN0YW5jZSxcbiAgICAgIGFwcDogaW5zdGFuY2UuYXBwQ29udGV4dC5hcHAsXG4gICAgICBmaWx0ZXI6IHRoaXMuY29tcG9uZW50RmlsdGVyLmZpbHRlclxuICAgIH0pO1xuICAgIHJldHVybiB0cmVlTm9kZTtcbiAgfVxuICAvKipcbiAgICogRmluZCBxdWFsaWZpZWQgY2hpbGRyZW4gZnJvbSBhIHNpbmdsZSBpbnN0YW5jZS5cbiAgICogSWYgdGhlIGluc3RhbmNlIGl0c2VsZiBpcyBxdWFsaWZpZWQsIGp1c3QgcmV0dXJuIGl0c2VsZi5cbiAgICogVGhpcyBpcyBvayBiZWNhdXNlIFtdLmNvbmNhdCB3b3JrcyBpbiBib3RoIGNhc2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZXxWbm9kZX0gaW5zdGFuY2VcbiAgICogQHJldHVybiB7VnVlfEFycmF5fVxuICAgKi9cbiAgYXN5bmMgZmluZFF1YWxpZmllZENoaWxkcmVuKGluc3RhbmNlLCBkZXB0aCkge1xuICAgIHZhciBfYTI1O1xuICAgIGlmICh0aGlzLmNvbXBvbmVudEZpbHRlci5pc1F1YWxpZmllZChpbnN0YW5jZSkgJiYgISgoX2EyNSA9IGluc3RhbmNlLnR5cGUuZGV2dG9vbHMpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LmhpZGUpKSB7XG4gICAgICByZXR1cm4gW2F3YWl0IHRoaXMuY2FwdHVyZShpbnN0YW5jZSwgZGVwdGgpXTtcbiAgICB9IGVsc2UgaWYgKGluc3RhbmNlLnN1YlRyZWUpIHtcbiAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLmlzS2VlcEFsaXZlKGluc3RhbmNlKSA/IHRoaXMuZ2V0S2VlcEFsaXZlQ2FjaGVkSW5zdGFuY2VzKGluc3RhbmNlKSA6IHRoaXMuZ2V0SW50ZXJuYWxJbnN0YW5jZUNoaWxkcmVuKGluc3RhbmNlLnN1YlRyZWUpO1xuICAgICAgcmV0dXJuIHRoaXMuZmluZFF1YWxpZmllZENoaWxkcmVuRnJvbUxpc3QobGlzdCwgZGVwdGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBJdGVyYXRlIHRocm91Z2ggYW4gYXJyYXkgb2YgaW5zdGFuY2VzIGFuZCBmbGF0dGVuIGl0IGludG9cbiAgICogYW4gYXJyYXkgb2YgcXVhbGlmaWVkIGluc3RhbmNlcy4gVGhpcyBpcyBhIGRlcHRoLWZpcnN0XG4gICAqIHRyYXZlcnNhbCAtIGUuZy4gaWYgYW4gaW5zdGFuY2UgaXMgbm90IG1hdGNoZWQsIHdlIHdpbGxcbiAgICogcmVjdXJzaXZlbHkgZ28gZGVlcGVyIHVudGlsIGEgcXVhbGlmaWVkIGNoaWxkIGlzIGZvdW5kLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBpbnN0YW5jZXNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBhc3luYyBmaW5kUXVhbGlmaWVkQ2hpbGRyZW5Gcm9tTGlzdChpbnN0YW5jZXMsIGRlcHRoKSB7XG4gICAgaW5zdGFuY2VzID0gaW5zdGFuY2VzLmZpbHRlcigoY2hpbGQpID0+IHtcbiAgICAgIHZhciBfYTI1O1xuICAgICAgcmV0dXJuICFpc0JlaW5nRGVzdHJveWVkKGNoaWxkKSAmJiAhKChfYTI1ID0gY2hpbGQudHlwZS5kZXZ0b29scykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUuaGlkZSk7XG4gICAgfSk7XG4gICAgaWYgKCF0aGlzLmNvbXBvbmVudEZpbHRlci5maWx0ZXIpXG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaW5zdGFuY2VzLm1hcCgoY2hpbGQpID0+IHRoaXMuY2FwdHVyZShjaGlsZCwgZGVwdGgpKSk7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGF3YWl0IFByb21pc2UuYWxsKGluc3RhbmNlcy5tYXAoKGkpID0+IHRoaXMuZmluZFF1YWxpZmllZENoaWxkcmVuKGksIGRlcHRoKSkpKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGNoaWxkcmVuIGZyb20gYSBjb21wb25lbnQgaW5zdGFuY2UuXG4gICAqL1xuICBnZXRJbnRlcm5hbEluc3RhbmNlQ2hpbGRyZW4oc3ViVHJlZSwgc3VzcGVuc2UgPSBudWxsKSB7XG4gICAgY29uc3QgbGlzdCA9IFtdO1xuICAgIGlmIChzdWJUcmVlKSB7XG4gICAgICBpZiAoc3ViVHJlZS5jb21wb25lbnQpIHtcbiAgICAgICAgIXN1c3BlbnNlID8gbGlzdC5wdXNoKHN1YlRyZWUuY29tcG9uZW50KSA6IGxpc3QucHVzaCh7IC4uLnN1YlRyZWUuY29tcG9uZW50LCBzdXNwZW5zZSB9KTtcbiAgICAgIH0gZWxzZSBpZiAoc3ViVHJlZS5zdXNwZW5zZSkge1xuICAgICAgICBjb25zdCBzdXNwZW5zZUtleSA9ICFzdWJUcmVlLnN1c3BlbnNlLmlzSW5GYWxsYmFjayA/IFwic3VzcGVuc2UgZGVmYXVsdFwiIDogXCJzdXNwZW5zZSBmYWxsYmFja1wiO1xuICAgICAgICBsaXN0LnB1c2goLi4udGhpcy5nZXRJbnRlcm5hbEluc3RhbmNlQ2hpbGRyZW4oc3ViVHJlZS5zdXNwZW5zZS5hY3RpdmVCcmFuY2gsIHsgLi4uc3ViVHJlZS5zdXNwZW5zZSwgc3VzcGVuc2VLZXkgfSkpO1xuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHN1YlRyZWUuY2hpbGRyZW4pKSB7XG4gICAgICAgIHN1YlRyZWUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGRTdWJUcmVlKSA9PiB7XG4gICAgICAgICAgaWYgKGNoaWxkU3ViVHJlZS5jb21wb25lbnQpXG4gICAgICAgICAgICAhc3VzcGVuc2UgPyBsaXN0LnB1c2goY2hpbGRTdWJUcmVlLmNvbXBvbmVudCkgOiBsaXN0LnB1c2goeyAuLi5jaGlsZFN1YlRyZWUuY29tcG9uZW50LCBzdXNwZW5zZSB9KTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBsaXN0LnB1c2goLi4udGhpcy5nZXRJbnRlcm5hbEluc3RhbmNlQ2hpbGRyZW4oY2hpbGRTdWJUcmVlLCBzdXNwZW5zZSkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpc3QuZmlsdGVyKChjaGlsZCkgPT4ge1xuICAgICAgdmFyIF9hMjU7XG4gICAgICByZXR1cm4gIWlzQmVpbmdEZXN0cm95ZWQoY2hpbGQpICYmICEoKF9hMjUgPSBjaGlsZC50eXBlLmRldnRvb2xzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5oaWRlKTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogTWFyayBhbiBpbnN0YW5jZSBhcyBjYXB0dXJlZCBhbmQgc3RvcmUgaXQgaW4gdGhlIGluc3RhbmNlIG1hcC5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IGluc3RhbmNlXG4gICAqL1xuICBtYXJrKGluc3RhbmNlLCBmb3JjZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgaW5zdGFuY2VNYXAgPSBnZXRBcHBSZWNvcmQoaW5zdGFuY2UpLmluc3RhbmNlTWFwO1xuICAgIGlmIChmb3JjZSB8fCAhaW5zdGFuY2VNYXAuaGFzKGluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18pKSB7XG4gICAgICBpbnN0YW5jZU1hcC5zZXQoaW5zdGFuY2UuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXywgaW5zdGFuY2UpO1xuICAgICAgYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmluc3RhbmNlTWFwID0gaW5zdGFuY2VNYXA7XG4gICAgfVxuICB9XG4gIGlzS2VlcEFsaXZlKGluc3RhbmNlKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLnR5cGUuX19pc0tlZXBBbGl2ZSAmJiBpbnN0YW5jZS5fX3ZfY2FjaGU7XG4gIH1cbiAgZ2V0S2VlcEFsaXZlQ2FjaGVkSW5zdGFuY2VzKGluc3RhbmNlKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oaW5zdGFuY2UuX192X2NhY2hlLnZhbHVlcygpKS5tYXAoKHZub2RlKSA9PiB2bm9kZS5jb21wb25lbnQpLmZpbHRlcihCb29sZWFuKTtcbiAgfVxufTtcblxuLy8gc3JjL2NvcmUvdGltZWxpbmUvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBpc0Jyb3dzZXIgYXMgaXNCcm93c2VyMiB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuXG4vLyBzcmMvY29yZS90aW1lbGluZS9wZXJmLnRzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIG1hcmtFbmRRdWV1ZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG52YXIgUEVSRk9STUFOQ0VfRVZFTlRfTEFZRVJfSUQgPSBcInBlcmZvcm1hbmNlXCI7XG5hc3luYyBmdW5jdGlvbiBwZXJmb3JtYW5jZU1hcmtTdGFydChhcGksIGFwcCwgdWlkLCB2bSwgdHlwZSwgdGltZSkge1xuICBjb25zdCBhcHBSZWNvcmQgPSBhd2FpdCBnZXRBcHBSZWNvcmQoYXBwKTtcbiAgaWYgKCFhcHBSZWNvcmQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29tcG9uZW50TmFtZSA9IGdldEluc3RhbmNlTmFtZSh2bSkgfHwgXCJVbmtub3duIENvbXBvbmVudFwiO1xuICBjb25zdCBncm91cElkID0gZGV2dG9vbHNTdGF0ZS5wZXJmVW5pcXVlR3JvdXBJZCsrO1xuICBjb25zdCBncm91cEtleSA9IGAke3VpZH0tJHt0eXBlfWA7XG4gIGFwcFJlY29yZC5wZXJmR3JvdXBJZHMuc2V0KGdyb3VwS2V5LCB7IGdyb3VwSWQsIHRpbWUgfSk7XG4gIGF3YWl0IGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICBsYXllcklkOiBQRVJGT1JNQU5DRV9FVkVOVF9MQVlFUl9JRCxcbiAgICBldmVudDoge1xuICAgICAgdGltZTogRGF0ZS5ub3coKSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY29tcG9uZW50OiBjb21wb25lbnROYW1lLFxuICAgICAgICB0eXBlLFxuICAgICAgICBtZWFzdXJlOiBcInN0YXJ0XCJcbiAgICAgIH0sXG4gICAgICB0aXRsZTogY29tcG9uZW50TmFtZSxcbiAgICAgIHN1YnRpdGxlOiB0eXBlLFxuICAgICAgZ3JvdXBJZFxuICAgIH1cbiAgfSk7XG4gIGlmIChtYXJrRW5kUXVldWUuaGFzKGdyb3VwS2V5KSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGFwcDogYXBwMixcbiAgICAgIHVpZDogdWlkMixcbiAgICAgIGluc3RhbmNlLFxuICAgICAgdHlwZTogdHlwZTIsXG4gICAgICB0aW1lOiB0aW1lMlxuICAgIH0gPSBtYXJrRW5kUXVldWUuZ2V0KGdyb3VwS2V5KTtcbiAgICBtYXJrRW5kUXVldWUuZGVsZXRlKGdyb3VwS2V5KTtcbiAgICBhd2FpdCBwZXJmb3JtYW5jZU1hcmtFbmQoXG4gICAgICBhcGksXG4gICAgICBhcHAyLFxuICAgICAgdWlkMixcbiAgICAgIGluc3RhbmNlLFxuICAgICAgdHlwZTIsXG4gICAgICB0aW1lMlxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIHBlcmZvcm1hbmNlTWFya0VuZChhcGksIGFwcCwgdWlkLCB2bSwgdHlwZSwgdGltZSkge1xuICBjb25zdCBhcHBSZWNvcmQgPSBnZXRBcHBSZWNvcmQoYXBwKTtcbiAgaWYgKCFhcHBSZWNvcmQpXG4gICAgcmV0dXJuO1xuICBjb25zdCBjb21wb25lbnROYW1lID0gZ2V0SW5zdGFuY2VOYW1lKHZtKSB8fCBcIlVua25vd24gQ29tcG9uZW50XCI7XG4gIGNvbnN0IGdyb3VwS2V5ID0gYCR7dWlkfS0ke3R5cGV9YDtcbiAgY29uc3QgZ3JvdXBJbmZvID0gYXBwUmVjb3JkLnBlcmZHcm91cElkcy5nZXQoZ3JvdXBLZXkpO1xuICBpZiAoZ3JvdXBJbmZvKSB7XG4gICAgY29uc3QgZ3JvdXBJZCA9IGdyb3VwSW5mby5ncm91cElkO1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IGdyb3VwSW5mby50aW1lO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gdGltZSAtIHN0YXJ0VGltZTtcbiAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICBsYXllcklkOiBQRVJGT1JNQU5DRV9FVkVOVF9MQVlFUl9JRCxcbiAgICAgIGV2ZW50OiB7XG4gICAgICAgIHRpbWU6IERhdGUubm93KCksXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjb21wb25lbnQ6IGNvbXBvbmVudE5hbWUsXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBtZWFzdXJlOiBcImVuZFwiLFxuICAgICAgICAgIGR1cmF0aW9uOiB7XG4gICAgICAgICAgICBfY3VzdG9tOiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiRHVyYXRpb25cIixcbiAgICAgICAgICAgICAgdmFsdWU6IGR1cmF0aW9uLFxuICAgICAgICAgICAgICBkaXNwbGF5OiBgJHtkdXJhdGlvbn0gbXNgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0aXRsZTogY29tcG9uZW50TmFtZSxcbiAgICAgICAgc3VidGl0bGU6IHR5cGUsXG4gICAgICAgIGdyb3VwSWRcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBtYXJrRW5kUXVldWUuc2V0KGdyb3VwS2V5LCB7IGFwcCwgdWlkLCBpbnN0YW5jZTogdm0sIHR5cGUsIHRpbWUgfSk7XG4gIH1cbn1cblxuLy8gc3JjL2NvcmUvdGltZWxpbmUvaW5kZXgudHNcbnZhciBDT01QT05FTlRfRVZFTlRfTEFZRVJfSUQgPSBcImNvbXBvbmVudC1ldmVudFwiO1xuZnVuY3Rpb24gc2V0dXBCdWlsdGluVGltZWxpbmVMYXllcnMoYXBpKSB7XG4gIGlmICghaXNCcm93c2VyMilcbiAgICByZXR1cm47XG4gIGFwaS5hZGRUaW1lbGluZUxheWVyKHtcbiAgICBpZDogXCJtb3VzZVwiLFxuICAgIGxhYmVsOiBcIk1vdXNlXCIsXG4gICAgY29sb3I6IDEwNzY4ODE1XG4gIH0pO1xuICBbXCJtb3VzZWRvd25cIiwgXCJtb3VzZXVwXCIsIFwiY2xpY2tcIiwgXCJkYmxjbGlja1wiXS5mb3JFYWNoKChldmVudFR5cGUpID0+IHtcbiAgICBpZiAoIWRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZS5yZWNvcmRpbmdTdGF0ZSB8fCAhZGV2dG9vbHNTdGF0ZS50aW1lbGluZUxheWVyc1N0YXRlLm1vdXNlRXZlbnRFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICBhd2FpdCBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgIGxheWVySWQ6IFwibW91c2VcIixcbiAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6IGV2ZW50VHlwZSxcbiAgICAgICAgICAgIHg6IGV2ZW50LmNsaWVudFgsXG4gICAgICAgICAgICB5OiBldmVudC5jbGllbnRZXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aXRsZTogZXZlbnRUeXBlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIHtcbiAgICAgIGNhcHR1cmU6IHRydWUsXG4gICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG4gIH0pO1xuICBhcGkuYWRkVGltZWxpbmVMYXllcih7XG4gICAgaWQ6IFwia2V5Ym9hcmRcIixcbiAgICBsYWJlbDogXCJLZXlib2FyZFwiLFxuICAgIGNvbG9yOiA4NDc1MDU1XG4gIH0pO1xuICBbXCJrZXl1cFwiLCBcImtleWRvd25cIiwgXCJrZXlwcmVzc1wiXS5mb3JFYWNoKChldmVudFR5cGUpID0+IHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgaWYgKCFkZXZ0b29sc1N0YXRlLnRpbWVsaW5lTGF5ZXJzU3RhdGUucmVjb3JkaW5nU3RhdGUgfHwgIWRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZS5rZXlib2FyZEV2ZW50RW5hYmxlZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgYXdhaXQgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xuICAgICAgICBsYXllcklkOiBcImtleWJvYXJkXCIsXG4gICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiBldmVudFR5cGUsXG4gICAgICAgICAgICBrZXk6IGV2ZW50LmtleSxcbiAgICAgICAgICAgIGN0cmxLZXk6IGV2ZW50LmN0cmxLZXksXG4gICAgICAgICAgICBzaGlmdEtleTogZXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgICBhbHRLZXk6IGV2ZW50LmFsdEtleSxcbiAgICAgICAgICAgIG1ldGFLZXk6IGV2ZW50Lm1ldGFLZXlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpdGxlOiBldmVudC5rZXlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcbiAgfSk7XG4gIGFwaS5hZGRUaW1lbGluZUxheWVyKHtcbiAgICBpZDogQ09NUE9ORU5UX0VWRU5UX0xBWUVSX0lELFxuICAgIGxhYmVsOiBcIkNvbXBvbmVudCBldmVudHNcIixcbiAgICBjb2xvcjogNTIyNjYzN1xuICB9KTtcbiAgaG9vay5vbi5jb21wb25lbnRFbWl0KGFzeW5jIChhcHAsIGluc3RhbmNlLCBldmVudCwgcGFyYW1zKSA9PiB7XG4gICAgaWYgKCFkZXZ0b29sc1N0YXRlLnRpbWVsaW5lTGF5ZXJzU3RhdGUucmVjb3JkaW5nU3RhdGUgfHwgIWRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZS5jb21wb25lbnRFdmVudEVuYWJsZWQpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgYXBwUmVjb3JkID0gYXdhaXQgZ2V0QXBwUmVjb3JkKGFwcCk7XG4gICAgaWYgKCFhcHBSZWNvcmQpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgY29tcG9uZW50SWQgPSBgJHthcHBSZWNvcmQuaWR9OiR7aW5zdGFuY2UudWlkfWA7XG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGdldEluc3RhbmNlTmFtZShpbnN0YW5jZSkgfHwgXCJVbmtub3duIENvbXBvbmVudFwiO1xuICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgIGxheWVySWQ6IENPTVBPTkVOVF9FVkVOVF9MQVlFUl9JRCxcbiAgICAgIGV2ZW50OiB7XG4gICAgICAgIHRpbWU6IERhdGUubm93KCksXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjb21wb25lbnQ6IHtcbiAgICAgICAgICAgIF9jdXN0b206IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjb21wb25lbnQtZGVmaW5pdGlvblwiLFxuICAgICAgICAgICAgICBkaXNwbGF5OiBjb21wb25lbnROYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICBwYXJhbXNcbiAgICAgICAgfSxcbiAgICAgICAgdGl0bGU6IGV2ZW50LFxuICAgICAgICBzdWJ0aXRsZTogYGJ5ICR7Y29tcG9uZW50TmFtZX1gLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgY29tcG9uZW50SWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgYXBpLmFkZFRpbWVsaW5lTGF5ZXIoe1xuICAgIGlkOiBcInBlcmZvcm1hbmNlXCIsXG4gICAgbGFiZWw6IFBFUkZPUk1BTkNFX0VWRU5UX0xBWUVSX0lELFxuICAgIGNvbG9yOiA0MzA3MDUwXG4gIH0pO1xuICBob29rLm9uLnBlcmZTdGFydCgoYXBwLCB1aWQsIHZtLCB0eXBlLCB0aW1lKSA9PiB7XG4gICAgaWYgKCFkZXZ0b29sc1N0YXRlLnRpbWVsaW5lTGF5ZXJzU3RhdGUucmVjb3JkaW5nU3RhdGUgfHwgIWRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZS5wZXJmb3JtYW5jZUV2ZW50RW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBwZXJmb3JtYW5jZU1hcmtTdGFydChhcGksIGFwcCwgdWlkLCB2bSwgdHlwZSwgdGltZSk7XG4gIH0pO1xuICBob29rLm9uLnBlcmZFbmQoKGFwcCwgdWlkLCB2bSwgdHlwZSwgdGltZSkgPT4ge1xuICAgIGlmICghZGV2dG9vbHNTdGF0ZS50aW1lbGluZUxheWVyc1N0YXRlLnJlY29yZGluZ1N0YXRlIHx8ICFkZXZ0b29sc1N0YXRlLnRpbWVsaW5lTGF5ZXJzU3RhdGUucGVyZm9ybWFuY2VFdmVudEVuYWJsZWQpXG4gICAgICByZXR1cm47XG4gICAgcGVyZm9ybWFuY2VNYXJrRW5kKGFwaSwgYXBwLCB1aWQsIHZtLCB0eXBlLCB0aW1lKTtcbiAgfSk7XG59XG5cbi8vIHNyYy9jb3JlL3ZtL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIE1BWF8kVk0gPSAxMDtcbnZhciAkdm1RdWV1ZSA9IFtdO1xuZnVuY3Rpb24gZXhwb3NlSW5zdGFuY2VUb1dpbmRvdyhjb21wb25lbnRJbnN0YW5jZSkge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICByZXR1cm47XG4gIGNvbnN0IHdpbiA9IHdpbmRvdztcbiAgaWYgKCFjb21wb25lbnRJbnN0YW5jZSlcbiAgICByZXR1cm47XG4gIHdpbi4kdm0gPSBjb21wb25lbnRJbnN0YW5jZTtcbiAgaWYgKCR2bVF1ZXVlWzBdICE9PSBjb21wb25lbnRJbnN0YW5jZSkge1xuICAgIGlmICgkdm1RdWV1ZS5sZW5ndGggPj0gTUFYXyRWTSkge1xuICAgICAgJHZtUXVldWUucG9wKCk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAkdm1RdWV1ZS5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcbiAgICAgIHdpbltgJHZtJHtpfWBdID0gJHZtUXVldWVbaV0gPSAkdm1RdWV1ZVtpIC0gMV07XG4gICAgfVxuICAgIHdpbi4kdm0wID0gJHZtUXVldWVbMF0gPSBjb21wb25lbnRJbnN0YW5jZTtcbiAgfVxufVxuXG4vLyBzcmMvY29yZS9wbHVnaW4vY29tcG9uZW50cy50c1xudmFyIElOU1BFQ1RPUl9JRCA9IFwiY29tcG9uZW50c1wiO1xuZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50c0RldlRvb2xzUGx1Z2luKGFwcCkge1xuICBjb25zdCBkZXNjcmlwdG9yID0ge1xuICAgIGlkOiBJTlNQRUNUT1JfSUQsXG4gICAgbGFiZWw6IFwiQ29tcG9uZW50c1wiLFxuICAgIGFwcFxuICB9O1xuICBjb25zdCBzZXR1cEZuID0gKGFwaSkgPT4ge1xuICAgIGFwaS5hZGRJbnNwZWN0b3Ioe1xuICAgICAgaWQ6IElOU1BFQ1RPUl9JRCxcbiAgICAgIGxhYmVsOiBcIkNvbXBvbmVudHNcIixcbiAgICAgIHRyZWVGaWx0ZXJQbGFjZWhvbGRlcjogXCJTZWFyY2ggY29tcG9uZW50c1wiXG4gICAgfSk7XG4gICAgc2V0dXBCdWlsdGluVGltZWxpbmVMYXllcnMoYXBpKTtcbiAgICBhcGkub24uZ2V0SW5zcGVjdG9yVHJlZShhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gSU5TUEVDVE9SX0lEKSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q29tcG9uZW50SW5zdGFuY2UoYWN0aXZlQXBwUmVjb3JkLnZhbHVlLCBwYXlsb2FkLmluc3RhbmNlSWQpO1xuICAgICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICBjb25zdCB3YWxrZXIyID0gbmV3IENvbXBvbmVudFdhbGtlcih7XG4gICAgICAgICAgICBmaWx0ZXJUZXh0OiBwYXlsb2FkLmZpbHRlcixcbiAgICAgICAgICAgIC8vIEBUT0RPOiBzaG91bGQgbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZT9cbiAgICAgICAgICAgIG1heERlcHRoOiAxMDAsXG4gICAgICAgICAgICByZWN1cnNpdmVseTogZmFsc2UsXG4gICAgICAgICAgICBhcGlcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBwYXlsb2FkLnJvb3ROb2RlcyA9IGF3YWl0IHdhbGtlcjIuZ2V0Q29tcG9uZW50VHJlZShpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBhcGkub24uZ2V0SW5zcGVjdG9yU3RhdGUoYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICAgIHZhciBfYTI1O1xuICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gSU5TUEVDVE9SX0lEKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGdldEluc3RhbmNlU3RhdGUoe1xuICAgICAgICAgIGluc3RhbmNlSWQ6IHBheWxvYWQubm9kZUlkXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjb21wb25lbnRJbnN0YW5jZSA9IHJlc3VsdC5pbnN0YW5jZTtcbiAgICAgICAgY29uc3QgYXBwMiA9IChfYTI1ID0gcmVzdWx0Lmluc3RhbmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5hcHBDb250ZXh0LmFwcDtcbiAgICAgICAgY29uc3QgX3BheWxvYWQgPSB7XG4gICAgICAgICAgY29tcG9uZW50SW5zdGFuY2UsXG4gICAgICAgICAgYXBwOiBhcHAyLFxuICAgICAgICAgIGluc3RhbmNlRGF0YTogcmVzdWx0XG4gICAgICAgIH07XG4gICAgICAgIGRldnRvb2xzQ29udGV4dC5ob29rcy5jYWxsSG9va1dpdGgoKGNhbGxiYWNrcykgPT4ge1xuICAgICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKChjYikgPT4gY2IoX3BheWxvYWQpKTtcbiAgICAgICAgfSwgXCJpbnNwZWN0Q29tcG9uZW50XCIgLyogSU5TUEVDVF9DT01QT05FTlQgKi8pO1xuICAgICAgICBwYXlsb2FkLnN0YXRlID0gcmVzdWx0O1xuICAgICAgICBleHBvc2VJbnN0YW5jZVRvV2luZG93KGNvbXBvbmVudEluc3RhbmNlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBhcGkub24uZWRpdEluc3BlY3RvclN0YXRlKGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSBJTlNQRUNUT1JfSUQpIHtcbiAgICAgICAgZWRpdFN0YXRlKHBheWxvYWQpO1xuICAgICAgICBhd2FpdCBhcGkuc2VuZEluc3BlY3RvclN0YXRlKFwiY29tcG9uZW50c1wiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBkZWJvdW5jZVNlbmRJbnNwZWN0b3JUcmVlID0gZGVib3VuY2U0KCgpID0+IHtcbiAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShJTlNQRUNUT1JfSUQpO1xuICAgIH0sIDEyMCk7XG4gICAgY29uc3QgZGVib3VuY2VTZW5kSW5zcGVjdG9yU3RhdGUgPSBkZWJvdW5jZTQoKCkgPT4ge1xuICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xuICAgIH0sIDEyMCk7XG4gICAgY29uc3QgY29tcG9uZW50QWRkZWRDbGVhbnVwID0gaG9vay5vbi5jb21wb25lbnRBZGRlZChhc3luYyAoYXBwMiwgdWlkLCBwYXJlbnRVaWQsIGNvbXBvbmVudCkgPT4ge1xuICAgICAgdmFyIF9hMjUsIF9iMjUsIF9jO1xuICAgICAgaWYgKGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaWYgKChfYyA9IChfYjI1ID0gKF9hMjUgPSBhcHAyID09IG51bGwgPyB2b2lkIDAgOiBhcHAyLl9pbnN0YW5jZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUudHlwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMjUuZGV2dG9vbHMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5oaWRlKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoIWFwcDIgfHwgdHlwZW9mIHVpZCAhPT0gXCJudW1iZXJcIiAmJiAhdWlkIHx8ICFjb21wb25lbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IGlkID0gYXdhaXQgZ2V0Q29tcG9uZW50SWQoe1xuICAgICAgICBhcHA6IGFwcDIsXG4gICAgICAgIHVpZCxcbiAgICAgICAgaW5zdGFuY2U6IGNvbXBvbmVudFxuICAgICAgfSk7XG4gICAgICBjb25zdCBhcHBSZWNvcmQgPSBhd2FpdCBnZXRBcHBSZWNvcmQoYXBwMik7XG4gICAgICBpZiAoY29tcG9uZW50KSB7XG4gICAgICAgIGlmIChjb21wb25lbnQuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXyA9PSBudWxsKVxuICAgICAgICAgIGNvbXBvbmVudC5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fID0gaWQ7XG4gICAgICAgIGlmICghKGFwcFJlY29yZCA9PSBudWxsID8gdm9pZCAwIDogYXBwUmVjb3JkLmluc3RhbmNlTWFwLmhhcyhpZCkpKSB7XG4gICAgICAgICAgYXBwUmVjb3JkID09IG51bGwgPyB2b2lkIDAgOiBhcHBSZWNvcmQuaW5zdGFuY2VNYXAuc2V0KGlkLCBjb21wb25lbnQpO1xuICAgICAgICAgIGlmIChhY3RpdmVBcHBSZWNvcmQudmFsdWUuaWQgPT09IChhcHBSZWNvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcFJlY29yZC5pZCkpXG4gICAgICAgICAgICBhY3RpdmVBcHBSZWNvcmQudmFsdWUuaW5zdGFuY2VNYXAgPSBhcHBSZWNvcmQuaW5zdGFuY2VNYXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghYXBwUmVjb3JkKVxuICAgICAgICByZXR1cm47XG4gICAgICBkZWJvdW5jZVNlbmRJbnNwZWN0b3JUcmVlKCk7XG4gICAgfSk7XG4gICAgY29uc3QgY29tcG9uZW50VXBkYXRlZENsZWFudXAgPSBob29rLm9uLmNvbXBvbmVudFVwZGF0ZWQoYXN5bmMgKGFwcDIsIHVpZCwgcGFyZW50VWlkLCBjb21wb25lbnQpID0+IHtcbiAgICAgIHZhciBfYTI1LCBfYjI1LCBfYztcbiAgICAgIGlmIChkZXZ0b29sc1N0YXRlLmhpZ2hQZXJmTW9kZUVuYWJsZWQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmICgoX2MgPSAoX2IyNSA9IChfYTI1ID0gYXBwMiA9PSBudWxsID8gdm9pZCAwIDogYXBwMi5faW5zdGFuY2UpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnR5cGUpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LmRldnRvb2xzKSA9PSBudWxsID8gdm9pZCAwIDogX2MuaGlkZSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaWYgKCFhcHAyIHx8IHR5cGVvZiB1aWQgIT09IFwibnVtYmVyXCIgJiYgIXVpZCB8fCAhY29tcG9uZW50KVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCBpZCA9IGF3YWl0IGdldENvbXBvbmVudElkKHtcbiAgICAgICAgYXBwOiBhcHAyLFxuICAgICAgICB1aWQsXG4gICAgICAgIGluc3RhbmNlOiBjb21wb25lbnRcbiAgICAgIH0pO1xuICAgICAgY29uc3QgYXBwUmVjb3JkID0gYXdhaXQgZ2V0QXBwUmVjb3JkKGFwcDIpO1xuICAgICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoY29tcG9uZW50Ll9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18gPT0gbnVsbClcbiAgICAgICAgICBjb21wb25lbnQuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXyA9IGlkO1xuICAgICAgICBpZiAoIShhcHBSZWNvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcFJlY29yZC5pbnN0YW5jZU1hcC5oYXMoaWQpKSkge1xuICAgICAgICAgIGFwcFJlY29yZCA9PSBudWxsID8gdm9pZCAwIDogYXBwUmVjb3JkLmluc3RhbmNlTWFwLnNldChpZCwgY29tcG9uZW50KTtcbiAgICAgICAgICBpZiAoYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmlkID09PSAoYXBwUmVjb3JkID09IG51bGwgPyB2b2lkIDAgOiBhcHBSZWNvcmQuaWQpKVxuICAgICAgICAgICAgYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmluc3RhbmNlTWFwID0gYXBwUmVjb3JkLmluc3RhbmNlTWFwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWFwcFJlY29yZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgZGVib3VuY2VTZW5kSW5zcGVjdG9yVHJlZSgpO1xuICAgICAgZGVib3VuY2VTZW5kSW5zcGVjdG9yU3RhdGUoKTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wb25lbnRSZW1vdmVkQ2xlYW51cCA9IGhvb2sub24uY29tcG9uZW50UmVtb3ZlZChhc3luYyAoYXBwMiwgdWlkLCBwYXJlbnRVaWQsIGNvbXBvbmVudCkgPT4ge1xuICAgICAgdmFyIF9hMjUsIF9iMjUsIF9jO1xuICAgICAgaWYgKGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaWYgKChfYyA9IChfYjI1ID0gKF9hMjUgPSBhcHAyID09IG51bGwgPyB2b2lkIDAgOiBhcHAyLl9pbnN0YW5jZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUudHlwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMjUuZGV2dG9vbHMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5oaWRlKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoIWFwcDIgfHwgdHlwZW9mIHVpZCAhPT0gXCJudW1iZXJcIiAmJiAhdWlkIHx8ICFjb21wb25lbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IGFwcFJlY29yZCA9IGF3YWl0IGdldEFwcFJlY29yZChhcHAyKTtcbiAgICAgIGlmICghYXBwUmVjb3JkKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCBpZCA9IGF3YWl0IGdldENvbXBvbmVudElkKHtcbiAgICAgICAgYXBwOiBhcHAyLFxuICAgICAgICB1aWQsXG4gICAgICAgIGluc3RhbmNlOiBjb21wb25lbnRcbiAgICAgIH0pO1xuICAgICAgYXBwUmVjb3JkID09IG51bGwgPyB2b2lkIDAgOiBhcHBSZWNvcmQuaW5zdGFuY2VNYXAuZGVsZXRlKGlkKTtcbiAgICAgIGlmIChhY3RpdmVBcHBSZWNvcmQudmFsdWUuaWQgPT09IChhcHBSZWNvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcFJlY29yZC5pZCkpXG4gICAgICAgIGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5pbnN0YW5jZU1hcCA9IGFwcFJlY29yZC5pbnN0YW5jZU1hcDtcbiAgICAgIGRlYm91bmNlU2VuZEluc3BlY3RvclRyZWUoKTtcbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIFtkZXNjcmlwdG9yLCBzZXR1cEZuXTtcbn1cblxuLy8gc3JjL2NvcmUvcGx1Z2luL2luZGV4LnRzXG52YXIgX2ExMiwgX2IxMjtcbihfYjEyID0gKF9hMTIgPSB0YXJnZXQ4KS5fX1ZVRV9ERVZUT09MU19LSVRfX1JFR0lTVEVSRURfUExVR0lOX0FQUFNfXykgIT0gbnVsbCA/IF9iMTIgOiBfYTEyLl9fVlVFX0RFVlRPT0xTX0tJVF9fUkVHSVNURVJFRF9QTFVHSU5fQVBQU19fID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbmZ1bmN0aW9uIHNldHVwRGV2VG9vbHNQbHVnaW4ocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbikge1xuICByZXR1cm4gaG9vay5zZXR1cERldlRvb2xzUGx1Z2luKHBsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm4pO1xufVxuZnVuY3Rpb24gY2FsbERldlRvb2xzUGx1Z2luU2V0dXBGbihwbHVnaW4sIGFwcCkge1xuICBjb25zdCBbcGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbl0gPSBwbHVnaW47XG4gIGlmIChwbHVnaW5EZXNjcmlwdG9yLmFwcCAhPT0gYXBwKVxuICAgIHJldHVybjtcbiAgY29uc3QgYXBpID0gbmV3IERldlRvb2xzUGx1Z2luQVBJKHtcbiAgICBwbHVnaW46IHtcbiAgICAgIHNldHVwRm4sXG4gICAgICBkZXNjcmlwdG9yOiBwbHVnaW5EZXNjcmlwdG9yXG4gICAgfSxcbiAgICBjdHg6IGRldnRvb2xzQ29udGV4dFxuICB9KTtcbiAgaWYgKHBsdWdpbkRlc2NyaXB0b3IucGFja2FnZU5hbWUgPT09IFwidnVleFwiKSB7XG4gICAgYXBpLm9uLmVkaXRJbnNwZWN0b3JTdGF0ZSgocGF5bG9hZCkgPT4ge1xuICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShwYXlsb2FkLmluc3BlY3RvcklkKTtcbiAgICB9KTtcbiAgfVxuICBzZXR1cEZuKGFwaSk7XG59XG5mdW5jdGlvbiByZW1vdmVSZWdpc3RlcmVkUGx1Z2luQXBwKGFwcCkge1xuICB0YXJnZXQ4Ll9fVlVFX0RFVlRPT0xTX0tJVF9fUkVHSVNURVJFRF9QTFVHSU5fQVBQU19fLmRlbGV0ZShhcHApO1xufVxuZnVuY3Rpb24gcmVnaXN0ZXJEZXZUb29sc1BsdWdpbihhcHAsIG9wdGlvbnMpIHtcbiAgaWYgKHRhcmdldDguX19WVUVfREVWVE9PTFNfS0lUX19SRUdJU1RFUkVEX1BMVUdJTl9BUFBTX18uaGFzKGFwcCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZCAmJiAhKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaW5zcGVjdGluZ0NvbXBvbmVudCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGFyZ2V0OC5fX1ZVRV9ERVZUT09MU19LSVRfX1JFR0lTVEVSRURfUExVR0lOX0FQUFNfXy5hZGQoYXBwKTtcbiAgZGV2dG9vbHNQbHVnaW5CdWZmZXIuZm9yRWFjaCgocGx1Z2luKSA9PiB7XG4gICAgY2FsbERldlRvb2xzUGx1Z2luU2V0dXBGbihwbHVnaW4sIGFwcCk7XG4gIH0pO1xufVxuXG4vLyBzcmMvY29yZS9yb3V0ZXIvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBkZWVwQ2xvbmUsIHRhcmdldCBhcyBnbG9iYWwzIH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5pbXBvcnQgeyBkZWJvdW5jZSBhcyBkZWJvdW5jZTUgfSBmcm9tIFwicGVyZmVjdC1kZWJvdW5jZVwiO1xuXG4vLyBzcmMvY3R4L3JvdXRlci50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyBnbG9iYWwyIH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG52YXIgUk9VVEVSX0tFWSA9IFwiX19WVUVfREVWVE9PTFNfUk9VVEVSX19cIjtcbnZhciBST1VURVJfSU5GT19LRVkgPSBcIl9fVlVFX0RFVlRPT0xTX1JPVVRFUl9JTkZPX19cIjtcbnZhciBfYTEzLCBfYjEzO1xuKF9iMTMgPSAoX2ExMyA9IGdsb2JhbDIpW1JPVVRFUl9JTkZPX0tFWV0pICE9IG51bGwgPyBfYjEzIDogX2ExM1tST1VURVJfSU5GT19LRVldID0ge1xuICBjdXJyZW50Um91dGU6IG51bGwsXG4gIHJvdXRlczogW11cbn07XG52YXIgX2ExNCwgX2IxNDtcbihfYjE0ID0gKF9hMTQgPSBnbG9iYWwyKVtST1VURVJfS0VZXSkgIT0gbnVsbCA/IF9iMTQgOiBfYTE0W1JPVVRFUl9LRVldID0ge307XG52YXIgZGV2dG9vbHNSb3V0ZXJJbmZvID0gbmV3IFByb3h5KGdsb2JhbDJbUk9VVEVSX0lORk9fS0VZXSwge1xuICBnZXQodGFyZ2V0MjIsIHByb3BlcnR5KSB7XG4gICAgcmV0dXJuIGdsb2JhbDJbUk9VVEVSX0lORk9fS0VZXVtwcm9wZXJ0eV07XG4gIH1cbn0pO1xudmFyIGRldnRvb2xzUm91dGVyID0gbmV3IFByb3h5KGdsb2JhbDJbUk9VVEVSX0tFWV0sIHtcbiAgZ2V0KHRhcmdldDIyLCBwcm9wZXJ0eSkge1xuICAgIGlmIChwcm9wZXJ0eSA9PT0gXCJ2YWx1ZVwiKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsMltST1VURVJfS0VZXTtcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBzcmMvY29yZS9yb3V0ZXIvaW5kZXgudHNcbmZ1bmN0aW9uIGdldFJvdXRlcyhyb3V0ZXIpIHtcbiAgY29uc3Qgcm91dGVzTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgcmV0dXJuICgocm91dGVyID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXIuZ2V0Um91dGVzKCkpIHx8IFtdKS5maWx0ZXIoKGkpID0+ICFyb3V0ZXNNYXAuaGFzKGkucGF0aCkgJiYgcm91dGVzTWFwLnNldChpLnBhdGgsIDEpKTtcbn1cbmZ1bmN0aW9uIGZpbHRlclJvdXRlcyhyb3V0ZXMpIHtcbiAgcmV0dXJuIHJvdXRlcy5tYXAoKGl0ZW0pID0+IHtcbiAgICBsZXQgeyBwYXRoLCBuYW1lLCBjaGlsZHJlbiwgbWV0YSB9ID0gaXRlbTtcbiAgICBpZiAoY2hpbGRyZW4gPT0gbnVsbCA/IHZvaWQgMCA6IGNoaWxkcmVuLmxlbmd0aClcbiAgICAgIGNoaWxkcmVuID0gZmlsdGVyUm91dGVzKGNoaWxkcmVuKTtcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aCxcbiAgICAgIG5hbWUsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIG1ldGFcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIGZpbHRlckN1cnJlbnRSb3V0ZShyb3V0ZSkge1xuICBpZiAocm91dGUpIHtcbiAgICBjb25zdCB7IGZ1bGxQYXRoLCBoYXNoLCBocmVmLCBwYXRoLCBuYW1lLCBtYXRjaGVkLCBwYXJhbXMsIHF1ZXJ5IH0gPSByb3V0ZTtcbiAgICByZXR1cm4ge1xuICAgICAgZnVsbFBhdGgsXG4gICAgICBoYXNoLFxuICAgICAgaHJlZixcbiAgICAgIHBhdGgsXG4gICAgICBuYW1lLFxuICAgICAgcGFyYW1zLFxuICAgICAgcXVlcnksXG4gICAgICBtYXRjaGVkOiBmaWx0ZXJSb3V0ZXMobWF0Y2hlZClcbiAgICB9O1xuICB9XG4gIHJldHVybiByb3V0ZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVJvdXRlckluZm8oYXBwUmVjb3JkLCBhY3RpdmVBcHBSZWNvcmQyKSB7XG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIF9hMjU7XG4gICAgY29uc3Qgcm91dGVyID0gKF9hMjUgPSBhcHBSZWNvcmQuYXBwKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcm91dGVyO1xuICAgIGNvbnN0IGN1cnJlbnRSb3V0ZSA9IGZpbHRlckN1cnJlbnRSb3V0ZShyb3V0ZXIgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlci5jdXJyZW50Um91dGUudmFsdWUpO1xuICAgIGNvbnN0IHJvdXRlcyA9IGZpbHRlclJvdXRlcyhnZXRSb3V0ZXMocm91dGVyKSk7XG4gICAgY29uc3QgYyA9IGNvbnNvbGUud2FybjtcbiAgICBjb25zb2xlLndhcm4gPSAoKSA9PiB7XG4gICAgfTtcbiAgICBnbG9iYWwzW1JPVVRFUl9JTkZPX0tFWV0gPSB7XG4gICAgICBjdXJyZW50Um91dGU6IGN1cnJlbnRSb3V0ZSA/IGRlZXBDbG9uZShjdXJyZW50Um91dGUpIDoge30sXG4gICAgICByb3V0ZXM6IGRlZXBDbG9uZShyb3V0ZXMpXG4gICAgfTtcbiAgICBnbG9iYWwzW1JPVVRFUl9LRVldID0gcm91dGVyO1xuICAgIGNvbnNvbGUud2FybiA9IGM7XG4gIH1cbiAgaW5pdCgpO1xuICBob29rLm9uLmNvbXBvbmVudFVwZGF0ZWQoZGVib3VuY2U1KCgpID0+IHtcbiAgICB2YXIgX2EyNTtcbiAgICBpZiAoKChfYTI1ID0gYWN0aXZlQXBwUmVjb3JkMi52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUuYXBwKSAhPT0gYXBwUmVjb3JkLmFwcClcbiAgICAgIHJldHVybjtcbiAgICBpbml0KCk7XG4gICAgaWYgKGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBkZXZ0b29sc0NvbnRleHQuaG9va3MuY2FsbEhvb2soXCJyb3V0ZXJJbmZvVXBkYXRlZFwiIC8qIFJPVVRFUl9JTkZPX1VQREFURUQgKi8sIHsgc3RhdGU6IGdsb2JhbDNbUk9VVEVSX0lORk9fS0VZXSB9KTtcbiAgfSwgMjAwKSk7XG59XG5cbi8vIHNyYy9jdHgvYXBpLnRzXG5mdW5jdGlvbiBjcmVhdGVEZXZUb29sc0FwaShob29rczIpIHtcbiAgcmV0dXJuIHtcbiAgICAvLyBnZXQgaW5zcGVjdG9yIHRyZWVcbiAgICBhc3luYyBnZXRJbnNwZWN0b3JUcmVlKHBheWxvYWQpIHtcbiAgICAgIGNvbnN0IF9wYXlsb2FkID0ge1xuICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICBhcHA6IGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5hcHAsXG4gICAgICAgIHJvb3ROb2RlczogW11cbiAgICAgIH07XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBob29rczIuY2FsbEhvb2tXaXRoKGFzeW5jIChjYWxsYmFja3MpID0+IHtcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja3MubWFwKChjYikgPT4gY2IoX3BheWxvYWQpKSk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9LCBcImdldEluc3BlY3RvclRyZWVcIiAvKiBHRVRfSU5TUEVDVE9SX1RSRUUgKi8pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gX3BheWxvYWQucm9vdE5vZGVzO1xuICAgIH0sXG4gICAgLy8gZ2V0IGluc3BlY3RvciBzdGF0ZVxuICAgIGFzeW5jIGdldEluc3BlY3RvclN0YXRlKHBheWxvYWQpIHtcbiAgICAgIGNvbnN0IF9wYXlsb2FkID0ge1xuICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICBhcHA6IGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5hcHAsXG4gICAgICAgIHN0YXRlOiBudWxsXG4gICAgICB9O1xuICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICBjdXJyZW50VGFiOiBgY3VzdG9tLWluc3BlY3Rvcjoke3BheWxvYWQuaW5zcGVjdG9ySWR9YFxuICAgICAgfTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGhvb2tzMi5jYWxsSG9va1dpdGgoYXN5bmMgKGNhbGxiYWNrcykgPT4ge1xuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrcy5tYXAoKGNiKSA9PiBjYihfcGF5bG9hZCwgY3R4KSkpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSwgXCJnZXRJbnNwZWN0b3JTdGF0ZVwiIC8qIEdFVF9JTlNQRUNUT1JfU1RBVEUgKi8pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gX3BheWxvYWQuc3RhdGU7XG4gICAgfSxcbiAgICAvLyBlZGl0IGluc3BlY3RvciBzdGF0ZVxuICAgIGVkaXRJbnNwZWN0b3JTdGF0ZShwYXlsb2FkKSB7XG4gICAgICBjb25zdCBzdGF0ZUVkaXRvcjIgPSBuZXcgU3RhdGVFZGl0b3IoKTtcbiAgICAgIGNvbnN0IF9wYXlsb2FkID0ge1xuICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICBhcHA6IGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5hcHAsXG4gICAgICAgIHNldDogKG9iaiwgcGF0aCA9IHBheWxvYWQucGF0aCwgdmFsdWUgPSBwYXlsb2FkLnN0YXRlLnZhbHVlLCBjYikgPT4ge1xuICAgICAgICAgIHN0YXRlRWRpdG9yMi5zZXQob2JqLCBwYXRoLCB2YWx1ZSwgY2IgfHwgc3RhdGVFZGl0b3IyLmNyZWF0ZURlZmF1bHRTZXRDYWxsYmFjayhwYXlsb2FkLnN0YXRlKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBob29rczIuY2FsbEhvb2tXaXRoKChjYWxsYmFja3MpID0+IHtcbiAgICAgICAgY2FsbGJhY2tzLmZvckVhY2goKGNiKSA9PiBjYihfcGF5bG9hZCkpO1xuICAgICAgfSwgXCJlZGl0SW5zcGVjdG9yU3RhdGVcIiAvKiBFRElUX0lOU1BFQ1RPUl9TVEFURSAqLyk7XG4gICAgfSxcbiAgICAvLyBzZW5kIGluc3BlY3RvciBzdGF0ZVxuICAgIHNlbmRJbnNwZWN0b3JTdGF0ZShpbnNwZWN0b3JJZCkge1xuICAgICAgY29uc3QgaW5zcGVjdG9yID0gZ2V0SW5zcGVjdG9yKGluc3BlY3RvcklkKTtcbiAgICAgIGhvb2tzMi5jYWxsSG9vayhcInNlbmRJbnNwZWN0b3JTdGF0ZVwiIC8qIFNFTkRfSU5TUEVDVE9SX1NUQVRFICovLCB7IGluc3BlY3RvcklkLCBwbHVnaW46IHtcbiAgICAgICAgZGVzY3JpcHRvcjogaW5zcGVjdG9yLmRlc2NyaXB0b3IsXG4gICAgICAgIHNldHVwRm46ICgpID0+ICh7fSlcbiAgICAgIH0gfSk7XG4gICAgfSxcbiAgICAvLyBpbnNwZWN0IGNvbXBvbmVudCBpbnNwZWN0b3JcbiAgICBpbnNwZWN0Q29tcG9uZW50SW5zcGVjdG9yKCkge1xuICAgICAgcmV0dXJuIGluc3BlY3RDb21wb25lbnRIaWdoTGlnaHRlcigpO1xuICAgIH0sXG4gICAgLy8gY2FuY2VsIGluc3BlY3QgY29tcG9uZW50IGluc3BlY3RvclxuICAgIGNhbmNlbEluc3BlY3RDb21wb25lbnRJbnNwZWN0b3IoKSB7XG4gICAgICByZXR1cm4gY2FuY2VsSW5zcGVjdENvbXBvbmVudEhpZ2hMaWdodGVyKCk7XG4gICAgfSxcbiAgICAvLyBnZXQgY29tcG9uZW50IHJlbmRlciBjb2RlXG4gICAgZ2V0Q29tcG9uZW50UmVuZGVyQ29kZShpZCkge1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDb21wb25lbnRJbnN0YW5jZShhY3RpdmVBcHBSZWNvcmQudmFsdWUsIGlkKTtcbiAgICAgIGlmIChpbnN0YW5jZSlcbiAgICAgICAgcmV0dXJuICEodHlwZW9mIChpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UudHlwZSkgPT09IFwiZnVuY3Rpb25cIikgPyBpbnN0YW5jZS5yZW5kZXIudG9TdHJpbmcoKSA6IGluc3RhbmNlLnR5cGUudG9TdHJpbmcoKTtcbiAgICB9LFxuICAgIC8vIHNjcm9sbCB0byBjb21wb25lbnRcbiAgICBzY3JvbGxUb0NvbXBvbmVudChpZCkge1xuICAgICAgcmV0dXJuIHNjcm9sbFRvQ29tcG9uZW50KHsgaWQgfSk7XG4gICAgfSxcbiAgICAvLyBvcGVuIGluIGVkaXRvclxuICAgIG9wZW5JbkVkaXRvcixcbiAgICAvLyBnZXQgdnVlIGluc3BlY3RvclxuICAgIGdldFZ1ZUluc3BlY3RvcjogZ2V0Q29tcG9uZW50SW5zcGVjdG9yLFxuICAgIC8vIHRvZ2dsZSBhcHBcbiAgICB0b2dnbGVBcHAoaWQsIG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IGFwcFJlY29yZCA9IGRldnRvb2xzQXBwUmVjb3Jkcy52YWx1ZS5maW5kKChyZWNvcmQpID0+IHJlY29yZC5pZCA9PT0gaWQpO1xuICAgICAgaWYgKGFwcFJlY29yZCkge1xuICAgICAgICBzZXRBY3RpdmVBcHBSZWNvcmRJZChpZCk7XG4gICAgICAgIHNldEFjdGl2ZUFwcFJlY29yZChhcHBSZWNvcmQpO1xuICAgICAgICBub3JtYWxpemVSb3V0ZXJJbmZvKGFwcFJlY29yZCwgYWN0aXZlQXBwUmVjb3JkKTtcbiAgICAgICAgY2FsbEluc3BlY3RvclVwZGF0ZWRIb29rKCk7XG4gICAgICAgIHJlZ2lzdGVyRGV2VG9vbHNQbHVnaW4oYXBwUmVjb3JkLmFwcCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBpbnNwZWN0IGRvbVxuICAgIGluc3BlY3RET00oaW5zdGFuY2VJZCkge1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDb21wb25lbnRJbnN0YW5jZShhY3RpdmVBcHBSZWNvcmQudmFsdWUsIGluc3RhbmNlSWQpO1xuICAgICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgIGNvbnN0IFtlbF0gPSBnZXRSb290RWxlbWVudHNGcm9tQ29tcG9uZW50SW5zdGFuY2UoaW5zdGFuY2UpO1xuICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICB0YXJnZXQ5Ll9fVlVFX0RFVlRPT0xTX0lOU1BFQ1RfRE9NX1RBUkdFVF9fID0gZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHVwZGF0ZVBsdWdpblNldHRpbmdzKHBsdWdpbklkLCBrZXksIHZhbHVlKSB7XG4gICAgICBzZXRQbHVnaW5TZXR0aW5ncyhwbHVnaW5JZCwga2V5LCB2YWx1ZSk7XG4gICAgfSxcbiAgICBnZXRQbHVnaW5TZXR0aW5ncyhwbHVnaW5JZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3B0aW9uczogZ2V0UGx1Z2luU2V0dGluZ3NPcHRpb25zKHBsdWdpbklkKSxcbiAgICAgICAgdmFsdWVzOiBnZXRQbHVnaW5TZXR0aW5ncyhwbHVnaW5JZClcbiAgICAgIH07XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvY3R4L2Vudi50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQxMCB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIF9hMTUsIF9iMTU7XG4oX2IxNSA9IChfYTE1ID0gdGFyZ2V0MTApLl9fVlVFX0RFVlRPT0xTX0VOVl9fKSAhPSBudWxsID8gX2IxNSA6IF9hMTUuX19WVUVfREVWVE9PTFNfRU5WX18gPSB7XG4gIHZpdGVQbHVnaW5EZXRlY3RlZDogZmFsc2Vcbn07XG5mdW5jdGlvbiBnZXREZXZUb29sc0VudigpIHtcbiAgcmV0dXJuIHRhcmdldDEwLl9fVlVFX0RFVlRPT0xTX0VOVl9fO1xufVxuZnVuY3Rpb24gc2V0RGV2VG9vbHNFbnYoZW52KSB7XG4gIHRhcmdldDEwLl9fVlVFX0RFVlRPT0xTX0VOVl9fID0ge1xuICAgIC4uLnRhcmdldDEwLl9fVlVFX0RFVlRPT0xTX0VOVl9fLFxuICAgIC4uLmVudlxuICB9O1xufVxuXG4vLyBzcmMvY3R4L2luZGV4LnRzXG52YXIgaG9va3MgPSBjcmVhdGVEZXZUb29sc0N0eEhvb2tzKCk7XG52YXIgX2ExNiwgX2IxNjtcbihfYjE2ID0gKF9hMTYgPSB0YXJnZXQxMSkuX19WVUVfREVWVE9PTFNfS0lUX0NPTlRFWFRfXykgIT0gbnVsbCA/IF9iMTYgOiBfYTE2Ll9fVlVFX0RFVlRPT0xTX0tJVF9DT05URVhUX18gPSB7XG4gIGhvb2tzLFxuICBnZXQgc3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmRldnRvb2xzU3RhdGUsXG4gICAgICBhY3RpdmVBcHBSZWNvcmRJZDogYWN0aXZlQXBwUmVjb3JkLmlkLFxuICAgICAgYWN0aXZlQXBwUmVjb3JkOiBhY3RpdmVBcHBSZWNvcmQudmFsdWUsXG4gICAgICBhcHBSZWNvcmRzOiBkZXZ0b29sc0FwcFJlY29yZHMudmFsdWVcbiAgICB9O1xuICB9LFxuICBhcGk6IGNyZWF0ZURldlRvb2xzQXBpKGhvb2tzKVxufTtcbnZhciBkZXZ0b29sc0NvbnRleHQgPSB0YXJnZXQxMS5fX1ZVRV9ERVZUT09MU19LSVRfQ09OVEVYVF9fO1xuXG4vLyBzcmMvY29yZS9hcHAvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG52YXIgaW1wb3J0X3NwZWFraW5ndXJsID0gX190b0VTTShyZXF1aXJlX3NwZWFraW5ndXJsMigpLCAxKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQxMiB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIF9hMTcsIF9iMTc7XG52YXIgYXBwUmVjb3JkSW5mbyA9IChfYjE3ID0gKF9hMTcgPSB0YXJnZXQxMikuX19WVUVfREVWVE9PTFNfTkVYVF9BUFBfUkVDT1JEX0lORk9fXykgIT0gbnVsbCA/IF9iMTcgOiBfYTE3Ll9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9JTkZPX18gPSB7XG4gIGlkOiAwLFxuICBhcHBJZHM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KClcbn07XG5mdW5jdGlvbiBnZXRBcHBSZWNvcmROYW1lKGFwcCwgZmFsbGJhY2tOYW1lKSB7XG4gIHZhciBfYTI1O1xuICByZXR1cm4gKChfYTI1ID0gYXBwID09IG51bGwgPyB2b2lkIDAgOiBhcHAuX2NvbXBvbmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUubmFtZSkgfHwgYEFwcCAke2ZhbGxiYWNrTmFtZX1gO1xufVxuZnVuY3Rpb24gZ2V0QXBwUm9vdEluc3RhbmNlKGFwcCkge1xuICB2YXIgX2EyNSwgX2IyNSwgX2MsIF9kO1xuICBpZiAoYXBwLl9pbnN0YW5jZSlcbiAgICByZXR1cm4gYXBwLl9pbnN0YW5jZTtcbiAgZWxzZSBpZiAoKF9iMjUgPSAoX2EyNSA9IGFwcC5fY29udGFpbmVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5fdm5vZGUpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LmNvbXBvbmVudClcbiAgICByZXR1cm4gKF9kID0gKF9jID0gYXBwLl9jb250YWluZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYy5fdm5vZGUpID09IG51bGwgPyB2b2lkIDAgOiBfZC5jb21wb25lbnQ7XG59XG5mdW5jdGlvbiByZW1vdmVBcHBSZWNvcmRJZChhcHApIHtcbiAgY29uc3QgaWQgPSBhcHAuX19WVUVfREVWVE9PTFNfTkVYVF9BUFBfUkVDT1JEX0lEX187XG4gIGlmIChpZCAhPSBudWxsKSB7XG4gICAgYXBwUmVjb3JkSW5mby5hcHBJZHMuZGVsZXRlKGlkKTtcbiAgICBhcHBSZWNvcmRJbmZvLmlkLS07XG4gIH1cbn1cbmZ1bmN0aW9uIGdldEFwcFJlY29yZElkKGFwcCwgZGVmYXVsdElkKSB7XG4gIGlmIChhcHAuX19WVUVfREVWVE9PTFNfTkVYVF9BUFBfUkVDT1JEX0lEX18gIT0gbnVsbClcbiAgICByZXR1cm4gYXBwLl9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9JRF9fO1xuICBsZXQgaWQgPSBkZWZhdWx0SWQgIT0gbnVsbCA/IGRlZmF1bHRJZCA6IChhcHBSZWNvcmRJbmZvLmlkKyspLnRvU3RyaW5nKCk7XG4gIGlmIChkZWZhdWx0SWQgJiYgYXBwUmVjb3JkSW5mby5hcHBJZHMuaGFzKGlkKSkge1xuICAgIGxldCBjb3VudCA9IDE7XG4gICAgd2hpbGUgKGFwcFJlY29yZEluZm8uYXBwSWRzLmhhcyhgJHtkZWZhdWx0SWR9XyR7Y291bnR9YCkpXG4gICAgICBjb3VudCsrO1xuICAgIGlkID0gYCR7ZGVmYXVsdElkfV8ke2NvdW50fWA7XG4gIH1cbiAgYXBwUmVjb3JkSW5mby5hcHBJZHMuYWRkKGlkKTtcbiAgYXBwLl9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9JRF9fID0gaWQ7XG4gIHJldHVybiBpZDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUFwcFJlY29yZChhcHAsIHR5cGVzKSB7XG4gIGNvbnN0IHJvb3RJbnN0YW5jZSA9IGdldEFwcFJvb3RJbnN0YW5jZShhcHApO1xuICBpZiAocm9vdEluc3RhbmNlKSB7XG4gICAgYXBwUmVjb3JkSW5mby5pZCsrO1xuICAgIGNvbnN0IG5hbWUgPSBnZXRBcHBSZWNvcmROYW1lKGFwcCwgYXBwUmVjb3JkSW5mby5pZC50b1N0cmluZygpKTtcbiAgICBjb25zdCBpZCA9IGdldEFwcFJlY29yZElkKGFwcCwgKDAsIGltcG9ydF9zcGVha2luZ3VybC5kZWZhdWx0KShuYW1lKSk7XG4gICAgY29uc3QgcmVjb3JkID0ge1xuICAgICAgaWQsXG4gICAgICBuYW1lLFxuICAgICAgdHlwZXMsXG4gICAgICBpbnN0YW5jZU1hcDogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSxcbiAgICAgIHBlcmZHcm91cElkczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSxcbiAgICAgIHJvb3RJbnN0YW5jZVxuICAgIH07XG4gICAgYXBwLl9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9fID0gcmVjb3JkO1xuICAgIGNvbnN0IHJvb3RJZCA9IGAke3JlY29yZC5pZH06cm9vdGA7XG4gICAgcmVjb3JkLmluc3RhbmNlTWFwLnNldChyb290SWQsIHJlY29yZC5yb290SW5zdGFuY2UpO1xuICAgIHJlY29yZC5yb290SW5zdGFuY2UuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXyA9IHJvb3RJZDtcbiAgICByZXR1cm4gcmVjb3JkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7fTtcbiAgfVxufVxuXG4vLyBzcmMvY29yZS9pbmRleC50c1xuZnVuY3Rpb24gaW5pdERldlRvb2xzKCkge1xuICB2YXIgX2EyNTtcbiAgdXBkYXRlRGV2VG9vbHNTdGF0ZSh7XG4gICAgdml0ZVBsdWdpbkRldGVjdGVkOiBnZXREZXZUb29sc0VudigpLnZpdGVQbHVnaW5EZXRlY3RlZFxuICB9KTtcbiAgY29uc3QgaXNEZXZUb29sc05leHQgPSAoKF9hMjUgPSB0YXJnZXQxMy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5pZCkgPT09IFwidnVlLWRldnRvb2xzLW5leHRcIjtcbiAgaWYgKHRhcmdldDEzLl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiYgaXNEZXZUb29sc05leHQpXG4gICAgcmV0dXJuO1xuICBjb25zdCBfZGV2dG9vbHNIb29rID0gY3JlYXRlRGV2VG9vbHNIb29rKCk7XG4gIGlmICh0YXJnZXQxMy5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRhcmdldDEzLl9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18uZm9yRWFjaCgoY2IpID0+IGNiKF9kZXZ0b29sc0hvb2spKTtcbiAgICAgIHRhcmdldDEzLl9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPSBbXTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW3Z1ZS1kZXZ0b29sc10gRXJyb3IgZHVyaW5nIGhvb2sgcmVwbGF5XCIsIGUpO1xuICAgIH1cbiAgfVxuICBfZGV2dG9vbHNIb29rLm9uY2UoXCJpbml0XCIsIChWdWUpID0+IHtcbiAgICB0YXJnZXQxMy5fX1ZVRV9ERVZUT09MU19WVUUyX0FQUF9ERVRFQ1RFRF9fID0gdHJ1ZTtcbiAgICBjb25zb2xlLmxvZyhcIiVjW19fX19fVnVlIERldlRvb2xzIHY3IGxvZ19fX19fXVwiLCBcImNvbG9yOiByZWQ7IGZvbnQtYm9sZDogNjAwOyBmb250LXNpemU6IDE2cHg7XCIpO1xuICAgIGNvbnNvbGUubG9nKFwiJWNWdWUgRGV2VG9vbHMgdjcgZGV0ZWN0ZWQgaW4geW91ciBWdWUyIHByb2plY3QuIHY3IG9ubHkgc3VwcG9ydHMgVnVlMyBhbmQgd2lsbCBub3Qgd29yay5cIiwgXCJmb250LWJvbGQ6IDUwMDsgZm9udC1zaXplOiAxNHB4O1wiKTtcbiAgICBjb25zdCB1cmwgPSBcImh0dHBzOi8vY2hyb21ld2Vic3RvcmUuZ29vZ2xlLmNvbS9kZXRhaWwvdnVlanMtZGV2dG9vbHMvaWFham1sY2VwbGVjYmxqaWFsaGhrbWVkamxwZGJsaHBcIjtcbiAgICBjb25zb2xlLmxvZyhgJWNUaGUgbGVnYWN5IHZlcnNpb24gdGhhdCBzdXBwb3J0cyBib3RoIFZ1ZSAyIGFuZCBWdWUgMyBoYXMgYmVlbiBtb3ZlZCB0byAlYyAke3VybH1gLCBcImZvbnQtc2l6ZTogMTRweDtcIiwgXCJ0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgY3Vyc29yOiBwb2ludGVyO2ZvbnQtc2l6ZTogMTRweDtcIik7XG4gICAgY29uc29sZS5sb2coXCIlY1BsZWFzZSBpbnN0YWxsIGFuZCBlbmFibGUgb25seSB0aGUgbGVnYWN5IHZlcnNpb24gZm9yIHlvdXIgVnVlMiBhcHAuXCIsIFwiZm9udC1ib2xkOiA1MDA7IGZvbnQtc2l6ZTogMTRweDtcIik7XG4gICAgY29uc29sZS5sb2coXCIlY1tfX19fX1Z1ZSBEZXZUb29scyB2NyBsb2dfX19fX11cIiwgXCJjb2xvcjogcmVkOyBmb250LWJvbGQ6IDYwMDsgZm9udC1zaXplOiAxNnB4O1wiKTtcbiAgfSk7XG4gIGhvb2sub24uc2V0dXBEZXZ0b29sc1BsdWdpbigocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbikgPT4ge1xuICAgIHZhciBfYTI2O1xuICAgIGFkZERldlRvb2xzUGx1Z2luVG9CdWZmZXIocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbik7XG4gICAgY29uc3QgeyBhcHAgfSA9IChfYTI2ID0gYWN0aXZlQXBwUmVjb3JkKSAhPSBudWxsID8gX2EyNiA6IHt9O1xuICAgIGlmIChwbHVnaW5EZXNjcmlwdG9yLnNldHRpbmdzKSB7XG4gICAgICBpbml0UGx1Z2luU2V0dGluZ3MocGx1Z2luRGVzY3JpcHRvci5pZCwgcGx1Z2luRGVzY3JpcHRvci5zZXR0aW5ncyk7XG4gICAgfVxuICAgIGlmICghYXBwKVxuICAgICAgcmV0dXJuO1xuICAgIGNhbGxEZXZUb29sc1BsdWdpblNldHVwRm4oW3BsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm5dLCBhcHApO1xuICB9KTtcbiAgb25MZWdhY3lEZXZUb29sc1BsdWdpbkFwaUF2YWlsYWJsZSgoKSA9PiB7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBsdWdpbkJ1ZmZlciA9IGRldnRvb2xzUGx1Z2luQnVmZmVyLmZpbHRlcigoW2l0ZW1dKSA9PiBpdGVtLmlkICE9PSBcImNvbXBvbmVudHNcIik7XG4gICAgbm9ybWFsaXplZFBsdWdpbkJ1ZmZlci5mb3JFYWNoKChbcGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbl0pID0+IHtcbiAgICAgIF9kZXZ0b29sc0hvb2suZW1pdChcImRldnRvb2xzLXBsdWdpbjpzZXR1cFwiIC8qIFNFVFVQX0RFVlRPT0xTX1BMVUdJTiAqLywgcGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbiwgeyB0YXJnZXQ6IFwibGVnYWN5XCIgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBob29rLm9uLnZ1ZUFwcEluaXQoYXN5bmMgKGFwcCwgdmVyc2lvbiwgdHlwZXMpID0+IHtcbiAgICBjb25zdCBhcHBSZWNvcmQgPSBjcmVhdGVBcHBSZWNvcmQoYXBwLCB0eXBlcyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZEFwcFJlY29yZCA9IHtcbiAgICAgIC4uLmFwcFJlY29yZCxcbiAgICAgIGFwcCxcbiAgICAgIHZlcnNpb25cbiAgICB9O1xuICAgIGFkZERldlRvb2xzQXBwUmVjb3JkKG5vcm1hbGl6ZWRBcHBSZWNvcmQpO1xuICAgIGlmIChkZXZ0b29sc0FwcFJlY29yZHMudmFsdWUubGVuZ3RoID09PSAxKSB7XG4gICAgICBzZXRBY3RpdmVBcHBSZWNvcmQobm9ybWFsaXplZEFwcFJlY29yZCk7XG4gICAgICBzZXRBY3RpdmVBcHBSZWNvcmRJZChub3JtYWxpemVkQXBwUmVjb3JkLmlkKTtcbiAgICAgIG5vcm1hbGl6ZVJvdXRlckluZm8obm9ybWFsaXplZEFwcFJlY29yZCwgYWN0aXZlQXBwUmVjb3JkKTtcbiAgICAgIHJlZ2lzdGVyRGV2VG9vbHNQbHVnaW4obm9ybWFsaXplZEFwcFJlY29yZC5hcHApO1xuICAgIH1cbiAgICBzZXR1cERldlRvb2xzUGx1Z2luKC4uLmNyZWF0ZUNvbXBvbmVudHNEZXZUb29sc1BsdWdpbihub3JtYWxpemVkQXBwUmVjb3JkLmFwcCkpO1xuICAgIHVwZGF0ZURldlRvb2xzU3RhdGUoe1xuICAgICAgY29ubmVjdGVkOiB0cnVlXG4gICAgfSk7XG4gICAgX2RldnRvb2xzSG9vay5hcHBzLnB1c2goYXBwKTtcbiAgfSk7XG4gIGhvb2sub24udnVlQXBwVW5tb3VudChhc3luYyAoYXBwKSA9PiB7XG4gICAgY29uc3QgYWN0aXZlUmVjb3JkcyA9IGRldnRvb2xzQXBwUmVjb3Jkcy52YWx1ZS5maWx0ZXIoKGFwcFJlY29yZCkgPT4gYXBwUmVjb3JkLmFwcCAhPT0gYXBwKTtcbiAgICBpZiAoYWN0aXZlUmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHVwZGF0ZURldlRvb2xzU3RhdGUoe1xuICAgICAgICBjb25uZWN0ZWQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmVtb3ZlRGV2VG9vbHNBcHBSZWNvcmQoYXBwKTtcbiAgICByZW1vdmVBcHBSZWNvcmRJZChhcHApO1xuICAgIGlmIChhY3RpdmVBcHBSZWNvcmQudmFsdWUuYXBwID09PSBhcHApIHtcbiAgICAgIHNldEFjdGl2ZUFwcFJlY29yZChhY3RpdmVSZWNvcmRzWzBdKTtcbiAgICAgIGRldnRvb2xzQ29udGV4dC5ob29rcy5jYWxsSG9vayhcInNlbmRBY3RpdmVBcHBVcGRhdGVkVG9DbGllbnRcIiAvKiBTRU5EX0FDVElWRV9BUFBfVU5NT1VOVEVEX1RPX0NMSUVOVCAqLyk7XG4gICAgfVxuICAgIHRhcmdldDEzLl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18uYXBwcy5zcGxpY2UodGFyZ2V0MTMuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5hcHBzLmluZGV4T2YoYXBwKSwgMSk7XG4gICAgcmVtb3ZlUmVnaXN0ZXJlZFBsdWdpbkFwcChhcHApO1xuICB9KTtcbiAgc3Vic2NyaWJlRGV2VG9vbHNIb29rKF9kZXZ0b29sc0hvb2spO1xuICBpZiAoIXRhcmdldDEzLl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0MTMsIFwiX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfX1wiLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfZGV2dG9vbHNIb29rO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGlmICghaXNOdXh0QXBwKSB7XG4gICAgICBPYmplY3QuYXNzaWduKF9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18sIF9kZXZ0b29sc0hvb2spO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gb25EZXZUb29sc0NsaWVudENvbm5lY3RlZChmbikge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAoZGV2dG9vbHNTdGF0ZS5jb25uZWN0ZWQgJiYgZGV2dG9vbHNTdGF0ZS5jbGllbnRDb25uZWN0ZWQpIHtcbiAgICAgIGZuKCk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRldnRvb2xzQ29udGV4dC5ob29rcy5ob29rKFwiZGV2dG9vbHNDb25uZWN0ZWRVcGRhdGVkXCIgLyogREVWVE9PTFNfQ09OTkVDVEVEX1VQREFURUQgKi8sICh7IHN0YXRlIH0pID0+IHtcbiAgICAgIGlmIChzdGF0ZS5jb25uZWN0ZWQgJiYgc3RhdGUuY2xpZW50Q29ubmVjdGVkKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbi8vIHNyYy9jb3JlL2hpZ2gtcGVyZi1tb2RlL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuZnVuY3Rpb24gdG9nZ2xlSGlnaFBlcmZNb2RlKHN0YXRlKSB7XG4gIGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZCA9IHN0YXRlICE9IG51bGwgPyBzdGF0ZSA6ICFkZXZ0b29sc1N0YXRlLmhpZ2hQZXJmTW9kZUVuYWJsZWQ7XG4gIGlmICghc3RhdGUgJiYgYWN0aXZlQXBwUmVjb3JkLnZhbHVlKSB7XG4gICAgcmVnaXN0ZXJEZXZUb29sc1BsdWdpbihhY3RpdmVBcHBSZWNvcmQudmFsdWUuYXBwKTtcbiAgfVxufVxuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvZm9ybWF0LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvcmV2aXZlci50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQxNCB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuZnVuY3Rpb24gcmV2aXZlU2V0KHZhbCkge1xuICBjb25zdCByZXN1bHQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICBjb25zdCBsaXN0ID0gdmFsLl9jdXN0b20udmFsdWU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHZhbHVlID0gbGlzdFtpXTtcbiAgICByZXN1bHQuYWRkKHJldml2ZSh2YWx1ZSkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiByZXZpdmVNYXAodmFsKSB7XG4gIGNvbnN0IHJlc3VsdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGNvbnN0IGxpc3QgPSB2YWwuX2N1c3RvbS52YWx1ZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBsaXN0W2ldO1xuICAgIHJlc3VsdC5zZXQoa2V5LCByZXZpdmUodmFsdWUpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcmV2aXZlKHZhbCkge1xuICBpZiAodmFsID09PSBVTkRFRklORUQpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9IGVsc2UgaWYgKHZhbCA9PT0gSU5GSU5JVFkpIHtcbiAgICByZXR1cm4gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICB9IGVsc2UgaWYgKHZhbCA9PT0gTkVHQVRJVkVfSU5GSU5JVFkpIHtcbiAgICByZXR1cm4gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuICB9IGVsc2UgaWYgKHZhbCA9PT0gTkFOKSB7XG4gICAgcmV0dXJuIE51bWJlci5OYU47XG4gIH0gZWxzZSBpZiAodmFsICYmIHZhbC5fY3VzdG9tKSB7XG4gICAgY29uc3QgeyBfY3VzdG9tOiBjdXN0b20gfSA9IHZhbDtcbiAgICBpZiAoY3VzdG9tLnR5cGUgPT09IFwiY29tcG9uZW50XCIpXG4gICAgICByZXR1cm4gYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmluc3RhbmNlTWFwLmdldChjdXN0b20uaWQpO1xuICAgIGVsc2UgaWYgKGN1c3RvbS50eXBlID09PSBcIm1hcFwiKVxuICAgICAgcmV0dXJuIHJldml2ZU1hcCh2YWwpO1xuICAgIGVsc2UgaWYgKGN1c3RvbS50eXBlID09PSBcInNldFwiKVxuICAgICAgcmV0dXJuIHJldml2ZVNldCh2YWwpO1xuICAgIGVsc2UgaWYgKGN1c3RvbS50eXBlID09PSBcImJpZ2ludFwiKVxuICAgICAgcmV0dXJuIEJpZ0ludChjdXN0b20udmFsdWUpO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiByZXZpdmUoY3VzdG9tLnZhbHVlKTtcbiAgfSBlbHNlIGlmIChzeW1ib2xSRS50ZXN0KHZhbCkpIHtcbiAgICBjb25zdCBbLCBzdHJpbmddID0gc3ltYm9sUkUuZXhlYyh2YWwpO1xuICAgIHJldHVybiBTeW1ib2wuZm9yKHN0cmluZyk7XG4gIH0gZWxzZSBpZiAoc3BlY2lhbFR5cGVSRS50ZXN0KHZhbCkpIHtcbiAgICBjb25zdCBbLCB0eXBlLCBzdHJpbmcsICwgZGV0YWlsc10gPSBzcGVjaWFsVHlwZVJFLmV4ZWModmFsKTtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgdGFyZ2V0MTRbdHlwZV0oc3RyaW5nKTtcbiAgICBpZiAodHlwZSA9PT0gXCJFcnJvclwiICYmIGRldGFpbHMpXG4gICAgICByZXN1bHQuc3RhY2sgPSBkZXRhaWxzO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxufVxuZnVuY3Rpb24gcmV2aXZlcihrZXksIHZhbHVlKSB7XG4gIHJldHVybiByZXZpdmUodmFsdWUpO1xufVxuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvZm9ybWF0LnRzXG5mdW5jdGlvbiBnZXRJbnNwZWN0b3JTdGF0ZVZhbHVlVHlwZSh2YWx1ZSwgcmF3ID0gdHJ1ZSkge1xuICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICBpZiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSA9PT0gVU5ERUZJTkVEIHx8IHZhbHVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIFwibnVsbFwiO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiIHx8IHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdmFsdWUgPT09IElORklOSVRZIHx8IHZhbHVlID09PSBORUdBVElWRV9JTkZJTklUWSB8fCB2YWx1ZSA9PT0gTkFOKSB7XG4gICAgcmV0dXJuIFwibGl0ZXJhbFwiO1xuICB9IGVsc2UgaWYgKHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5fY3VzdG9tKSB7XG4gICAgaWYgKHJhdyB8fCB2YWx1ZS5fY3VzdG9tLmRpc3BsYXkgIT0gbnVsbCB8fCB2YWx1ZS5fY3VzdG9tLmRpc3BsYXlUZXh0ICE9IG51bGwpXG4gICAgICByZXR1cm4gXCJjdXN0b21cIjtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gZ2V0SW5zcGVjdG9yU3RhdGVWYWx1ZVR5cGUodmFsdWUuX2N1c3RvbS52YWx1ZSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgdHlwZU1hdGNoID0gc3BlY2lhbFR5cGVSRS5leGVjKHZhbHVlKTtcbiAgICBpZiAodHlwZU1hdGNoKSB7XG4gICAgICBjb25zdCBbLCB0eXBlMl0gPSB0eXBlTWF0Y2g7XG4gICAgICByZXR1cm4gYG5hdGl2ZSAke3R5cGUyfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgIH1cbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCAodmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLl9pc0FycmF5KSkge1xuICAgIHJldHVybiBcImFycmF5XCI7XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gXCJwbGFpbi1vYmplY3RcIjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG4gIH1cbn1cbmZ1bmN0aW9uIGZvcm1hdEluc3BlY3RvclN0YXRlVmFsdWUodmFsdWUsIHF1b3RlcyA9IGZhbHNlLCBvcHRpb25zKSB7XG4gIHZhciBfYTI1LCBfYjI1LCBfYztcbiAgY29uc3QgeyBjdXN0b21DbGFzcyB9ID0gb3B0aW9ucyAhPSBudWxsID8gb3B0aW9ucyA6IHt9O1xuICBsZXQgcmVzdWx0O1xuICBjb25zdCB0eXBlID0gZ2V0SW5zcGVjdG9yU3RhdGVWYWx1ZVR5cGUodmFsdWUsIGZhbHNlKTtcbiAgaWYgKHR5cGUgIT09IFwiY3VzdG9tXCIgJiYgKHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5fY3VzdG9tKSlcbiAgICB2YWx1ZSA9IHZhbHVlLl9jdXN0b20udmFsdWU7XG4gIGlmIChyZXN1bHQgPSBpbnRlcm5hbFN0YXRlVG9rZW5Ub1N0cmluZyh2YWx1ZSkpIHtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiY3VzdG9tXCIpIHtcbiAgICBjb25zdCBuZXN0ZWROYW1lID0gKChfYTI1ID0gdmFsdWUuX2N1c3RvbS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUuX2N1c3RvbSkgJiYgZm9ybWF0SW5zcGVjdG9yU3RhdGVWYWx1ZSh2YWx1ZS5fY3VzdG9tLnZhbHVlLCBxdW90ZXMsIG9wdGlvbnMpO1xuICAgIHJldHVybiBuZXN0ZWROYW1lIHx8IHZhbHVlLl9jdXN0b20uZGlzcGxheVRleHQgfHwgdmFsdWUuX2N1c3RvbS5kaXNwbGF5O1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiYXJyYXlcIikge1xuICAgIHJldHVybiBgQXJyYXlbJHt2YWx1ZS5sZW5ndGh9XWA7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJwbGFpbi1vYmplY3RcIikge1xuICAgIHJldHVybiBgT2JqZWN0JHtPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID8gXCJcIiA6IFwiIChlbXB0eSlcIn1gO1xuICB9IGVsc2UgaWYgKHR5cGUgPT0gbnVsbCA/IHZvaWQgMCA6IHR5cGUuaW5jbHVkZXMoXCJuYXRpdmVcIikpIHtcbiAgICByZXR1cm4gZXNjYXBlKChfYjI1ID0gc3BlY2lhbFR5cGVSRS5leGVjKHZhbHVlKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMjVbMl0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IHR5cGVNYXRjaCA9IHZhbHVlLm1hdGNoKHJhd1R5cGVSRSk7XG4gICAgaWYgKHR5cGVNYXRjaCkge1xuICAgICAgdmFsdWUgPSBlc2NhcGVTdHJpbmcodHlwZU1hdGNoWzFdKTtcbiAgICB9IGVsc2UgaWYgKHF1b3Rlcykge1xuICAgICAgdmFsdWUgPSBgPHNwYW4+XCI8L3NwYW4+JHsoY3VzdG9tQ2xhc3MgPT0gbnVsbCA/IHZvaWQgMCA6IGN1c3RvbUNsYXNzLnN0cmluZykgPyBgPHNwYW4gY2xhc3M9JHtjdXN0b21DbGFzcy5zdHJpbmd9PiR7ZXNjYXBlU3RyaW5nKHZhbHVlKX08L3NwYW4+YCA6IGVzY2FwZVN0cmluZyh2YWx1ZSl9PHNwYW4+XCI8L3NwYW4+YDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSAoY3VzdG9tQ2xhc3MgPT0gbnVsbCA/IHZvaWQgMCA6IGN1c3RvbUNsYXNzLnN0cmluZykgPyBgPHNwYW4gY2xhc3M9XCIkeyhfYyA9IGN1c3RvbUNsYXNzID09IG51bGwgPyB2b2lkIDAgOiBjdXN0b21DbGFzcy5zdHJpbmcpICE9IG51bGwgPyBfYyA6IFwiXCJ9XCI+JHtlc2NhcGVTdHJpbmcodmFsdWUpfTwvc3Bhbj5gIDogZXNjYXBlU3RyaW5nKHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gZXNjYXBlU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiBlc2NhcGUodmFsdWUpLnJlcGxhY2UoLyAvZywgXCImbmJzcDtcIikucmVwbGFjZSgvXFxuL2csIFwiPHNwYW4+XFxcXG48L3NwYW4+XCIpO1xufVxuZnVuY3Rpb24gZ2V0UmF3KHZhbHVlKSB7XG4gIHZhciBfYTI1LCBfYjI1LCBfYztcbiAgbGV0IGN1c3RvbVR5cGU7XG4gIGNvbnN0IGlzQ3VzdG9tID0gZ2V0SW5zcGVjdG9yU3RhdGVWYWx1ZVR5cGUodmFsdWUpID09PSBcImN1c3RvbVwiO1xuICBsZXQgaW5oZXJpdCA9IHt9O1xuICBpZiAoaXNDdXN0b20pIHtcbiAgICBjb25zdCBkYXRhID0gdmFsdWU7XG4gICAgY29uc3QgY3VzdG9tVmFsdWUgPSAoX2EyNSA9IGRhdGEuX2N1c3RvbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUudmFsdWU7XG4gICAgY29uc3QgY3VycmVudEN1c3RvbVR5cGUgPSAoX2IyNSA9IGRhdGEuX2N1c3RvbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMjUudHlwZTtcbiAgICBjb25zdCBuZXN0ZWRDdXN0b20gPSB0eXBlb2YgY3VzdG9tVmFsdWUgPT09IFwib2JqZWN0XCIgJiYgY3VzdG9tVmFsdWUgIT09IG51bGwgJiYgXCJfY3VzdG9tXCIgaW4gY3VzdG9tVmFsdWUgPyBnZXRSYXcoY3VzdG9tVmFsdWUpIDogeyBpbmhlcml0OiB2b2lkIDAsIHZhbHVlOiB2b2lkIDAsIGN1c3RvbVR5cGU6IHZvaWQgMCB9O1xuICAgIGluaGVyaXQgPSBuZXN0ZWRDdXN0b20uaW5oZXJpdCB8fCAoKF9jID0gZGF0YS5fY3VzdG9tKSA9PSBudWxsID8gdm9pZCAwIDogX2MuZmllbGRzKSB8fCB7fTtcbiAgICB2YWx1ZSA9IG5lc3RlZEN1c3RvbS52YWx1ZSB8fCBjdXN0b21WYWx1ZTtcbiAgICBjdXN0b21UeXBlID0gbmVzdGVkQ3VzdG9tLmN1c3RvbVR5cGUgfHwgY3VycmVudEN1c3RvbVR5cGU7XG4gIH1cbiAgaWYgKHZhbHVlICYmIHZhbHVlLl9pc0FycmF5KVxuICAgIHZhbHVlID0gdmFsdWUuaXRlbXM7XG4gIHJldHVybiB7IHZhbHVlLCBpbmhlcml0LCBjdXN0b21UeXBlIH07XG59XG5mdW5jdGlvbiB0b0VkaXQodmFsdWUsIGN1c3RvbVR5cGUpIHtcbiAgaWYgKGN1c3RvbVR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgcmV0dXJuIHZhbHVlO1xuICBpZiAoY3VzdG9tVHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgcmV0dXJuIHZhbHVlO1xuICByZXR1cm4gcmVwbGFjZVRva2VuVG9TdHJpbmcoSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbn1cbmZ1bmN0aW9uIHRvU3VibWl0KHZhbHVlLCBjdXN0b21UeXBlKSB7XG4gIGlmIChjdXN0b21UeXBlID09PSBcImJpZ2ludFwiKVxuICAgIHJldHVybiBCaWdJbnQodmFsdWUpO1xuICBpZiAoY3VzdG9tVHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKTtcbiAgcmV0dXJuIEpTT04ucGFyc2UocmVwbGFjZVN0cmluZ1RvVG9rZW4odmFsdWUpLCByZXZpdmVyKTtcbn1cblxuLy8gc3JjL2NvcmUvZGV2dG9vbHMtY2xpZW50L2RldGVjdGVkLnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDE1IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5mdW5jdGlvbiB1cGRhdGVEZXZUb29sc0NsaWVudERldGVjdGVkKHBhcmFtcykge1xuICBkZXZ0b29sc1N0YXRlLmRldnRvb2xzQ2xpZW50RGV0ZWN0ZWQgPSB7XG4gICAgLi4uZGV2dG9vbHNTdGF0ZS5kZXZ0b29sc0NsaWVudERldGVjdGVkLFxuICAgIC4uLnBhcmFtc1xuICB9O1xuICBjb25zdCBkZXZ0b29sc0NsaWVudFZpc2libGUgPSBPYmplY3QudmFsdWVzKGRldnRvb2xzU3RhdGUuZGV2dG9vbHNDbGllbnREZXRlY3RlZCkuc29tZShCb29sZWFuKTtcbiAgdG9nZ2xlSGlnaFBlcmZNb2RlKCFkZXZ0b29sc0NsaWVudFZpc2libGUpO1xufVxudmFyIF9hMTgsIF9iMTg7XG4oX2IxOCA9IChfYTE4ID0gdGFyZ2V0MTUpLl9fVlVFX0RFVlRPT0xTX1VQREFURV9DTElFTlRfREVURUNURURfXykgIT0gbnVsbCA/IF9iMTggOiBfYTE4Ll9fVlVFX0RFVlRPT0xTX1VQREFURV9DTElFTlRfREVURUNURURfXyA9IHVwZGF0ZURldlRvb2xzQ2xpZW50RGV0ZWN0ZWQ7XG5cbi8vIHNyYy9tZXNzYWdpbmcvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0MjEgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbmltcG9ydCB7IGNyZWF0ZUJpcnBjLCBjcmVhdGVCaXJwY0dyb3VwIH0gZnJvbSBcImJpcnBjXCI7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2Jyb2FkY2FzdC1jaGFubmVsL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC9pbmRleC5qc1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvY2xhc3MtcmVnaXN0cnkuanNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdXBlcmpzb25AMi4yLjIvbm9kZV9tb2R1bGVzL3N1cGVyanNvbi9kaXN0L3JlZ2lzdHJ5LmpzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC9kb3VibGUtaW5kZXhlZC1rdi5qc1xuaW5pdF9lc21fc2hpbXMoKTtcbnZhciBEb3VibGVJbmRleGVkS1YgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMua2V5VG9WYWx1ZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy52YWx1ZVRvS2V5ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgfVxuICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMua2V5VG9WYWx1ZS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgdGhpcy52YWx1ZVRvS2V5LnNldCh2YWx1ZSwga2V5KTtcbiAgfVxuICBnZXRCeUtleShrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5rZXlUb1ZhbHVlLmdldChrZXkpO1xuICB9XG4gIGdldEJ5VmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZVRvS2V5LmdldCh2YWx1ZSk7XG4gIH1cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5rZXlUb1ZhbHVlLmNsZWFyKCk7XG4gICAgdGhpcy52YWx1ZVRvS2V5LmNsZWFyKCk7XG4gIH1cbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdXBlcmpzb25AMi4yLjIvbm9kZV9tb2R1bGVzL3N1cGVyanNvbi9kaXN0L3JlZ2lzdHJ5LmpzXG52YXIgUmVnaXN0cnkgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGdlbmVyYXRlSWRlbnRpZmllcikge1xuICAgIHRoaXMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZ2VuZXJhdGVJZGVudGlmaWVyO1xuICAgIHRoaXMua3YgPSBuZXcgRG91YmxlSW5kZXhlZEtWKCk7XG4gIH1cbiAgcmVnaXN0ZXIodmFsdWUsIGlkZW50aWZpZXIpIHtcbiAgICBpZiAodGhpcy5rdi5nZXRCeVZhbHVlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWlkZW50aWZpZXIpIHtcbiAgICAgIGlkZW50aWZpZXIgPSB0aGlzLmdlbmVyYXRlSWRlbnRpZmllcih2YWx1ZSk7XG4gICAgfVxuICAgIHRoaXMua3Yuc2V0KGlkZW50aWZpZXIsIHZhbHVlKTtcbiAgfVxuICBjbGVhcigpIHtcbiAgICB0aGlzLmt2LmNsZWFyKCk7XG4gIH1cbiAgZ2V0SWRlbnRpZmllcih2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmt2LmdldEJ5VmFsdWUodmFsdWUpO1xuICB9XG4gIGdldFZhbHVlKGlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gdGhpcy5rdi5nZXRCeUtleShpZGVudGlmaWVyKTtcbiAgfVxufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvY2xhc3MtcmVnaXN0cnkuanNcbnZhciBDbGFzc1JlZ2lzdHJ5ID0gY2xhc3MgZXh0ZW5kcyBSZWdpc3RyeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKChjKSA9PiBjLm5hbWUpO1xuICAgIHRoaXMuY2xhc3NUb0FsbG93ZWRQcm9wcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIH1cbiAgcmVnaXN0ZXIodmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGlmIChvcHRpb25zLmFsbG93UHJvcHMpIHtcbiAgICAgICAgdGhpcy5jbGFzc1RvQWxsb3dlZFByb3BzLnNldCh2YWx1ZSwgb3B0aW9ucy5hbGxvd1Byb3BzKTtcbiAgICAgIH1cbiAgICAgIHN1cGVyLnJlZ2lzdGVyKHZhbHVlLCBvcHRpb25zLmlkZW50aWZpZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdXBlci5yZWdpc3Rlcih2YWx1ZSwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIGdldEFsbG93ZWRQcm9wcyh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmNsYXNzVG9BbGxvd2VkUHJvcHMuZ2V0KHZhbHVlKTtcbiAgfVxufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvY3VzdG9tLXRyYW5zZm9ybWVyLXJlZ2lzdHJ5LmpzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC91dGlsLmpzXG5pbml0X2VzbV9zaGltcygpO1xuZnVuY3Rpb24gdmFsdWVzT2ZPYmoocmVjb3JkKSB7XG4gIGlmIChcInZhbHVlc1wiIGluIE9iamVjdCkge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHJlY29yZCk7XG4gIH1cbiAgY29uc3QgdmFsdWVzID0gW107XG4gIGZvciAoY29uc3Qga2V5IGluIHJlY29yZCkge1xuICAgIGlmIChyZWNvcmQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdmFsdWVzLnB1c2gocmVjb3JkW2tleV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsdWVzO1xufVxuZnVuY3Rpb24gZmluZChyZWNvcmQsIHByZWRpY2F0ZSkge1xuICBjb25zdCB2YWx1ZXMgPSB2YWx1ZXNPZk9iaihyZWNvcmQpO1xuICBpZiAoXCJmaW5kXCIgaW4gdmFsdWVzKSB7XG4gICAgcmV0dXJuIHZhbHVlcy5maW5kKHByZWRpY2F0ZSk7XG4gIH1cbiAgY29uc3QgdmFsdWVzTm90TmV2ZXIgPSB2YWx1ZXM7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzTm90TmV2ZXIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc05vdE5ldmVyW2ldO1xuICAgIGlmIChwcmVkaWNhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiB2b2lkIDA7XG59XG5mdW5jdGlvbiBmb3JFYWNoKHJlY29yZCwgcnVuKSB7XG4gIE9iamVjdC5lbnRyaWVzKHJlY29yZCkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiBydW4odmFsdWUsIGtleSkpO1xufVxuZnVuY3Rpb24gaW5jbHVkZXMoYXJyLCB2YWx1ZSkge1xuICByZXR1cm4gYXJyLmluZGV4T2YodmFsdWUpICE9PSAtMTtcbn1cbmZ1bmN0aW9uIGZpbmRBcnIocmVjb3JkLCBwcmVkaWNhdGUpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNvcmQubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB2YWx1ZSA9IHJlY29yZFtpXTtcbiAgICBpZiAocHJlZGljYXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufVxuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC9jdXN0b20tdHJhbnNmb3JtZXItcmVnaXN0cnkuanNcbnZhciBDdXN0b21UcmFuc2Zvcm1lclJlZ2lzdHJ5ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnRyYW5zZm9tZXJzID0ge307XG4gIH1cbiAgcmVnaXN0ZXIodHJhbnNmb3JtZXIpIHtcbiAgICB0aGlzLnRyYW5zZm9tZXJzW3RyYW5zZm9ybWVyLm5hbWVdID0gdHJhbnNmb3JtZXI7XG4gIH1cbiAgZmluZEFwcGxpY2FibGUodikge1xuICAgIHJldHVybiBmaW5kKHRoaXMudHJhbnNmb21lcnMsICh0cmFuc2Zvcm1lcikgPT4gdHJhbnNmb3JtZXIuaXNBcHBsaWNhYmxlKHYpKTtcbiAgfVxuICBmaW5kQnlOYW1lKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2ZvbWVyc1tuYW1lXTtcbiAgfVxufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvcGxhaW5lci5qc1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvaXMuanNcbmluaXRfZXNtX3NoaW1zKCk7XG52YXIgZ2V0VHlwZSA9IChwYXlsb2FkKSA9PiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocGF5bG9hZCkuc2xpY2UoOCwgLTEpO1xudmFyIGlzVW5kZWZpbmVkID0gKHBheWxvYWQpID0+IHR5cGVvZiBwYXlsb2FkID09PSBcInVuZGVmaW5lZFwiO1xudmFyIGlzTnVsbCA9IChwYXlsb2FkKSA9PiBwYXlsb2FkID09PSBudWxsO1xudmFyIGlzUGxhaW5PYmplY3QyID0gKHBheWxvYWQpID0+IHtcbiAgaWYgKHR5cGVvZiBwYXlsb2FkICE9PSBcIm9iamVjdFwiIHx8IHBheWxvYWQgPT09IG51bGwpXG4gICAgcmV0dXJuIGZhbHNlO1xuICBpZiAocGF5bG9hZCA9PT0gT2JqZWN0LnByb3RvdHlwZSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YocGF5bG9hZCkgPT09IG51bGwpXG4gICAgcmV0dXJuIHRydWU7XG4gIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YocGF5bG9hZCkgPT09IE9iamVjdC5wcm90b3R5cGU7XG59O1xudmFyIGlzRW1wdHlPYmplY3QgPSAocGF5bG9hZCkgPT4gaXNQbGFpbk9iamVjdDIocGF5bG9hZCkgJiYgT2JqZWN0LmtleXMocGF5bG9hZCkubGVuZ3RoID09PSAwO1xudmFyIGlzQXJyYXkgPSAocGF5bG9hZCkgPT4gQXJyYXkuaXNBcnJheShwYXlsb2FkKTtcbnZhciBpc1N0cmluZyA9IChwYXlsb2FkKSA9PiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIjtcbnZhciBpc051bWJlciA9IChwYXlsb2FkKSA9PiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJudW1iZXJcIiAmJiAhaXNOYU4ocGF5bG9hZCk7XG52YXIgaXNCb29sZWFuID0gKHBheWxvYWQpID0+IHR5cGVvZiBwYXlsb2FkID09PSBcImJvb2xlYW5cIjtcbnZhciBpc1JlZ0V4cCA9IChwYXlsb2FkKSA9PiBwYXlsb2FkIGluc3RhbmNlb2YgUmVnRXhwO1xudmFyIGlzTWFwID0gKHBheWxvYWQpID0+IHBheWxvYWQgaW5zdGFuY2VvZiBNYXA7XG52YXIgaXNTZXQgPSAocGF5bG9hZCkgPT4gcGF5bG9hZCBpbnN0YW5jZW9mIFNldDtcbnZhciBpc1N5bWJvbCA9IChwYXlsb2FkKSA9PiBnZXRUeXBlKHBheWxvYWQpID09PSBcIlN5bWJvbFwiO1xudmFyIGlzRGF0ZSA9IChwYXlsb2FkKSA9PiBwYXlsb2FkIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4ocGF5bG9hZC52YWx1ZU9mKCkpO1xudmFyIGlzRXJyb3IgPSAocGF5bG9hZCkgPT4gcGF5bG9hZCBpbnN0YW5jZW9mIEVycm9yO1xudmFyIGlzTmFOVmFsdWUgPSAocGF5bG9hZCkgPT4gdHlwZW9mIHBheWxvYWQgPT09IFwibnVtYmVyXCIgJiYgaXNOYU4ocGF5bG9hZCk7XG52YXIgaXNQcmltaXRpdmUyID0gKHBheWxvYWQpID0+IGlzQm9vbGVhbihwYXlsb2FkKSB8fCBpc051bGwocGF5bG9hZCkgfHwgaXNVbmRlZmluZWQocGF5bG9hZCkgfHwgaXNOdW1iZXIocGF5bG9hZCkgfHwgaXNTdHJpbmcocGF5bG9hZCkgfHwgaXNTeW1ib2wocGF5bG9hZCk7XG52YXIgaXNCaWdpbnQgPSAocGF5bG9hZCkgPT4gdHlwZW9mIHBheWxvYWQgPT09IFwiYmlnaW50XCI7XG52YXIgaXNJbmZpbml0ZSA9IChwYXlsb2FkKSA9PiBwYXlsb2FkID09PSBJbmZpbml0eSB8fCBwYXlsb2FkID09PSAtSW5maW5pdHk7XG52YXIgaXNUeXBlZEFycmF5ID0gKHBheWxvYWQpID0+IEFycmF5QnVmZmVyLmlzVmlldyhwYXlsb2FkKSAmJiAhKHBheWxvYWQgaW5zdGFuY2VvZiBEYXRhVmlldyk7XG52YXIgaXNVUkwgPSAocGF5bG9hZCkgPT4gcGF5bG9hZCBpbnN0YW5jZW9mIFVSTDtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvcGF0aHN0cmluZ2lmaWVyLmpzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIGVzY2FwZUtleSA9IChrZXkpID0+IGtleS5yZXBsYWNlKC9cXC4vZywgXCJcXFxcLlwiKTtcbnZhciBzdHJpbmdpZnlQYXRoID0gKHBhdGgpID0+IHBhdGgubWFwKFN0cmluZykubWFwKGVzY2FwZUtleSkuam9pbihcIi5cIik7XG52YXIgcGFyc2VQYXRoID0gKHN0cmluZykgPT4ge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgbGV0IHNlZ21lbnQgPSBcIlwiO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBjaGFyID0gc3RyaW5nLmNoYXJBdChpKTtcbiAgICBjb25zdCBpc0VzY2FwZWREb3QgPSBjaGFyID09PSBcIlxcXFxcIiAmJiBzdHJpbmcuY2hhckF0KGkgKyAxKSA9PT0gXCIuXCI7XG4gICAgaWYgKGlzRXNjYXBlZERvdCkge1xuICAgICAgc2VnbWVudCArPSBcIi5cIjtcbiAgICAgIGkrKztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCBpc0VuZE9mU2VnbWVudCA9IGNoYXIgPT09IFwiLlwiO1xuICAgIGlmIChpc0VuZE9mU2VnbWVudCkge1xuICAgICAgcmVzdWx0LnB1c2goc2VnbWVudCk7XG4gICAgICBzZWdtZW50ID0gXCJcIjtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBzZWdtZW50ICs9IGNoYXI7XG4gIH1cbiAgY29uc3QgbGFzdFNlZ21lbnQgPSBzZWdtZW50O1xuICByZXN1bHQucHVzaChsYXN0U2VnbWVudCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC90cmFuc2Zvcm1lci5qc1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIHNpbXBsZVRyYW5zZm9ybWF0aW9uKGlzQXBwbGljYWJsZSwgYW5ub3RhdGlvbiwgdHJhbnNmb3JtLCB1bnRyYW5zZm9ybSkge1xuICByZXR1cm4ge1xuICAgIGlzQXBwbGljYWJsZSxcbiAgICBhbm5vdGF0aW9uLFxuICAgIHRyYW5zZm9ybSxcbiAgICB1bnRyYW5zZm9ybVxuICB9O1xufVxudmFyIHNpbXBsZVJ1bGVzID0gW1xuICBzaW1wbGVUcmFuc2Zvcm1hdGlvbihpc1VuZGVmaW5lZCwgXCJ1bmRlZmluZWRcIiwgKCkgPT4gbnVsbCwgKCkgPT4gdm9pZCAwKSxcbiAgc2ltcGxlVHJhbnNmb3JtYXRpb24oaXNCaWdpbnQsIFwiYmlnaW50XCIsICh2KSA9PiB2LnRvU3RyaW5nKCksICh2KSA9PiB7XG4gICAgaWYgKHR5cGVvZiBCaWdJbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHJldHVybiBCaWdJbnQodik7XG4gICAgfVxuICAgIGNvbnNvbGUuZXJyb3IoXCJQbGVhc2UgYWRkIGEgQmlnSW50IHBvbHlmaWxsLlwiKTtcbiAgICByZXR1cm4gdjtcbiAgfSksXG4gIHNpbXBsZVRyYW5zZm9ybWF0aW9uKGlzRGF0ZSwgXCJEYXRlXCIsICh2KSA9PiB2LnRvSVNPU3RyaW5nKCksICh2KSA9PiBuZXcgRGF0ZSh2KSksXG4gIHNpbXBsZVRyYW5zZm9ybWF0aW9uKGlzRXJyb3IsIFwiRXJyb3JcIiwgKHYsIHN1cGVySnNvbikgPT4ge1xuICAgIGNvbnN0IGJhc2VFcnJvciA9IHtcbiAgICAgIG5hbWU6IHYubmFtZSxcbiAgICAgIG1lc3NhZ2U6IHYubWVzc2FnZVxuICAgIH07XG4gICAgc3VwZXJKc29uLmFsbG93ZWRFcnJvclByb3BzLmZvckVhY2goKHByb3ApID0+IHtcbiAgICAgIGJhc2VFcnJvcltwcm9wXSA9IHZbcHJvcF07XG4gICAgfSk7XG4gICAgcmV0dXJuIGJhc2VFcnJvcjtcbiAgfSwgKHYsIHN1cGVySnNvbikgPT4ge1xuICAgIGNvbnN0IGUgPSBuZXcgRXJyb3Iodi5tZXNzYWdlKTtcbiAgICBlLm5hbWUgPSB2Lm5hbWU7XG4gICAgZS5zdGFjayA9IHYuc3RhY2s7XG4gICAgc3VwZXJKc29uLmFsbG93ZWRFcnJvclByb3BzLmZvckVhY2goKHByb3ApID0+IHtcbiAgICAgIGVbcHJvcF0gPSB2W3Byb3BdO1xuICAgIH0pO1xuICAgIHJldHVybiBlO1xuICB9KSxcbiAgc2ltcGxlVHJhbnNmb3JtYXRpb24oaXNSZWdFeHAsIFwicmVnZXhwXCIsICh2KSA9PiBcIlwiICsgdiwgKHJlZ2V4KSA9PiB7XG4gICAgY29uc3QgYm9keSA9IHJlZ2V4LnNsaWNlKDEsIHJlZ2V4Lmxhc3RJbmRleE9mKFwiL1wiKSk7XG4gICAgY29uc3QgZmxhZ3MgPSByZWdleC5zbGljZShyZWdleC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChib2R5LCBmbGFncyk7XG4gIH0pLFxuICBzaW1wbGVUcmFuc2Zvcm1hdGlvbihcbiAgICBpc1NldCxcbiAgICBcInNldFwiLFxuICAgIC8vIChzZXRzIG9ubHkgZXhpc3QgaW4gZXM2KylcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXM1L25vLWVzNi1tZXRob2RzXG4gICAgKHYpID0+IFsuLi52LnZhbHVlcygpXSxcbiAgICAodikgPT4gbmV3IFNldCh2KVxuICApLFxuICBzaW1wbGVUcmFuc2Zvcm1hdGlvbihpc01hcCwgXCJtYXBcIiwgKHYpID0+IFsuLi52LmVudHJpZXMoKV0sICh2KSA9PiBuZXcgTWFwKHYpKSxcbiAgc2ltcGxlVHJhbnNmb3JtYXRpb24oKHYpID0+IGlzTmFOVmFsdWUodikgfHwgaXNJbmZpbml0ZSh2KSwgXCJudW1iZXJcIiwgKHYpID0+IHtcbiAgICBpZiAoaXNOYU5WYWx1ZSh2KSkge1xuICAgICAgcmV0dXJuIFwiTmFOXCI7XG4gICAgfVxuICAgIGlmICh2ID4gMCkge1xuICAgICAgcmV0dXJuIFwiSW5maW5pdHlcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiLUluZmluaXR5XCI7XG4gICAgfVxuICB9LCBOdW1iZXIpLFxuICBzaW1wbGVUcmFuc2Zvcm1hdGlvbigodikgPT4gdiA9PT0gMCAmJiAxIC8gdiA9PT0gLUluZmluaXR5LCBcIm51bWJlclwiLCAoKSA9PiB7XG4gICAgcmV0dXJuIFwiLTBcIjtcbiAgfSwgTnVtYmVyKSxcbiAgc2ltcGxlVHJhbnNmb3JtYXRpb24oaXNVUkwsIFwiVVJMXCIsICh2KSA9PiB2LnRvU3RyaW5nKCksICh2KSA9PiBuZXcgVVJMKHYpKVxuXTtcbmZ1bmN0aW9uIGNvbXBvc2l0ZVRyYW5zZm9ybWF0aW9uKGlzQXBwbGljYWJsZSwgYW5ub3RhdGlvbiwgdHJhbnNmb3JtLCB1bnRyYW5zZm9ybSkge1xuICByZXR1cm4ge1xuICAgIGlzQXBwbGljYWJsZSxcbiAgICBhbm5vdGF0aW9uLFxuICAgIHRyYW5zZm9ybSxcbiAgICB1bnRyYW5zZm9ybVxuICB9O1xufVxudmFyIHN5bWJvbFJ1bGUgPSBjb21wb3NpdGVUcmFuc2Zvcm1hdGlvbigocywgc3VwZXJKc29uKSA9PiB7XG4gIGlmIChpc1N5bWJvbChzKSkge1xuICAgIGNvbnN0IGlzUmVnaXN0ZXJlZCA9ICEhc3VwZXJKc29uLnN5bWJvbFJlZ2lzdHJ5LmdldElkZW50aWZpZXIocyk7XG4gICAgcmV0dXJuIGlzUmVnaXN0ZXJlZDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59LCAocywgc3VwZXJKc29uKSA9PiB7XG4gIGNvbnN0IGlkZW50aWZpZXIgPSBzdXBlckpzb24uc3ltYm9sUmVnaXN0cnkuZ2V0SWRlbnRpZmllcihzKTtcbiAgcmV0dXJuIFtcInN5bWJvbFwiLCBpZGVudGlmaWVyXTtcbn0sICh2KSA9PiB2LmRlc2NyaXB0aW9uLCAoXywgYSwgc3VwZXJKc29uKSA9PiB7XG4gIGNvbnN0IHZhbHVlID0gc3VwZXJKc29uLnN5bWJvbFJlZ2lzdHJ5LmdldFZhbHVlKGFbMV0pO1xuICBpZiAoIXZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIGRlc2VyaWFsaXplIHVua25vd24gc3ltYm9sXCIpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn0pO1xudmFyIGNvbnN0cnVjdG9yVG9OYW1lID0gW1xuICBJbnQ4QXJyYXksXG4gIFVpbnQ4QXJyYXksXG4gIEludDE2QXJyYXksXG4gIFVpbnQxNkFycmF5LFxuICBJbnQzMkFycmF5LFxuICBVaW50MzJBcnJheSxcbiAgRmxvYXQzMkFycmF5LFxuICBGbG9hdDY0QXJyYXksXG4gIFVpbnQ4Q2xhbXBlZEFycmF5XG5dLnJlZHVjZSgob2JqLCBjdG9yKSA9PiB7XG4gIG9ialtjdG9yLm5hbWVdID0gY3RvcjtcbiAgcmV0dXJuIG9iajtcbn0sIHt9KTtcbnZhciB0eXBlZEFycmF5UnVsZSA9IGNvbXBvc2l0ZVRyYW5zZm9ybWF0aW9uKGlzVHlwZWRBcnJheSwgKHYpID0+IFtcInR5cGVkLWFycmF5XCIsIHYuY29uc3RydWN0b3IubmFtZV0sICh2KSA9PiBbLi4udl0sICh2LCBhKSA9PiB7XG4gIGNvbnN0IGN0b3IgPSBjb25zdHJ1Y3RvclRvTmFtZVthWzFdXTtcbiAgaWYgKCFjdG9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIGRlc2VyaWFsaXplIHVua25vd24gdHlwZWQgYXJyYXlcIik7XG4gIH1cbiAgcmV0dXJuIG5ldyBjdG9yKHYpO1xufSk7XG5mdW5jdGlvbiBpc0luc3RhbmNlT2ZSZWdpc3RlcmVkQ2xhc3MocG90ZW50aWFsQ2xhc3MsIHN1cGVySnNvbikge1xuICBpZiAocG90ZW50aWFsQ2xhc3MgPT0gbnVsbCA/IHZvaWQgMCA6IHBvdGVudGlhbENsYXNzLmNvbnN0cnVjdG9yKSB7XG4gICAgY29uc3QgaXNSZWdpc3RlcmVkID0gISFzdXBlckpzb24uY2xhc3NSZWdpc3RyeS5nZXRJZGVudGlmaWVyKHBvdGVudGlhbENsYXNzLmNvbnN0cnVjdG9yKTtcbiAgICByZXR1cm4gaXNSZWdpc3RlcmVkO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbnZhciBjbGFzc1J1bGUgPSBjb21wb3NpdGVUcmFuc2Zvcm1hdGlvbihpc0luc3RhbmNlT2ZSZWdpc3RlcmVkQ2xhc3MsIChjbGF6eiwgc3VwZXJKc29uKSA9PiB7XG4gIGNvbnN0IGlkZW50aWZpZXIgPSBzdXBlckpzb24uY2xhc3NSZWdpc3RyeS5nZXRJZGVudGlmaWVyKGNsYXp6LmNvbnN0cnVjdG9yKTtcbiAgcmV0dXJuIFtcImNsYXNzXCIsIGlkZW50aWZpZXJdO1xufSwgKGNsYXp6LCBzdXBlckpzb24pID0+IHtcbiAgY29uc3QgYWxsb3dlZFByb3BzID0gc3VwZXJKc29uLmNsYXNzUmVnaXN0cnkuZ2V0QWxsb3dlZFByb3BzKGNsYXp6LmNvbnN0cnVjdG9yKTtcbiAgaWYgKCFhbGxvd2VkUHJvcHMpIHtcbiAgICByZXR1cm4geyAuLi5jbGF6eiB9O1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBhbGxvd2VkUHJvcHMuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgIHJlc3VsdFtwcm9wXSA9IGNsYXp6W3Byb3BdO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn0sICh2LCBhLCBzdXBlckpzb24pID0+IHtcbiAgY29uc3QgY2xhenogPSBzdXBlckpzb24uY2xhc3NSZWdpc3RyeS5nZXRWYWx1ZShhWzFdKTtcbiAgaWYgKCFjbGF6eikge1xuICAgIHRocm93IG5ldyBFcnJvcihgVHJ5aW5nIHRvIGRlc2VyaWFsaXplIHVua25vd24gY2xhc3MgJyR7YVsxXX0nIC0gY2hlY2sgaHR0cHM6Ly9naXRodWIuY29tL2JsaXR6LWpzL3N1cGVyanNvbi9pc3N1ZXMvMTE2I2lzc3VlY29tbWVudC03NzM5OTY1NjRgKTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKGNsYXp6LnByb3RvdHlwZSksIHYpO1xufSk7XG52YXIgY3VzdG9tUnVsZSA9IGNvbXBvc2l0ZVRyYW5zZm9ybWF0aW9uKCh2YWx1ZSwgc3VwZXJKc29uKSA9PiB7XG4gIHJldHVybiAhIXN1cGVySnNvbi5jdXN0b21UcmFuc2Zvcm1lclJlZ2lzdHJ5LmZpbmRBcHBsaWNhYmxlKHZhbHVlKTtcbn0sICh2YWx1ZSwgc3VwZXJKc29uKSA9PiB7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gc3VwZXJKc29uLmN1c3RvbVRyYW5zZm9ybWVyUmVnaXN0cnkuZmluZEFwcGxpY2FibGUodmFsdWUpO1xuICByZXR1cm4gW1wiY3VzdG9tXCIsIHRyYW5zZm9ybWVyLm5hbWVdO1xufSwgKHZhbHVlLCBzdXBlckpzb24pID0+IHtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBzdXBlckpzb24uY3VzdG9tVHJhbnNmb3JtZXJSZWdpc3RyeS5maW5kQXBwbGljYWJsZSh2YWx1ZSk7XG4gIHJldHVybiB0cmFuc2Zvcm1lci5zZXJpYWxpemUodmFsdWUpO1xufSwgKHYsIGEsIHN1cGVySnNvbikgPT4ge1xuICBjb25zdCB0cmFuc2Zvcm1lciA9IHN1cGVySnNvbi5jdXN0b21UcmFuc2Zvcm1lclJlZ2lzdHJ5LmZpbmRCeU5hbWUoYVsxXSk7XG4gIGlmICghdHJhbnNmb3JtZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcnlpbmcgdG8gZGVzZXJpYWxpemUgdW5rbm93biBjdXN0b20gdmFsdWVcIik7XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybWVyLmRlc2VyaWFsaXplKHYpO1xufSk7XG52YXIgY29tcG9zaXRlUnVsZXMgPSBbY2xhc3NSdWxlLCBzeW1ib2xSdWxlLCBjdXN0b21SdWxlLCB0eXBlZEFycmF5UnVsZV07XG52YXIgdHJhbnNmb3JtVmFsdWUgPSAodmFsdWUsIHN1cGVySnNvbikgPT4ge1xuICBjb25zdCBhcHBsaWNhYmxlQ29tcG9zaXRlUnVsZSA9IGZpbmRBcnIoY29tcG9zaXRlUnVsZXMsIChydWxlKSA9PiBydWxlLmlzQXBwbGljYWJsZSh2YWx1ZSwgc3VwZXJKc29uKSk7XG4gIGlmIChhcHBsaWNhYmxlQ29tcG9zaXRlUnVsZSkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogYXBwbGljYWJsZUNvbXBvc2l0ZVJ1bGUudHJhbnNmb3JtKHZhbHVlLCBzdXBlckpzb24pLFxuICAgICAgdHlwZTogYXBwbGljYWJsZUNvbXBvc2l0ZVJ1bGUuYW5ub3RhdGlvbih2YWx1ZSwgc3VwZXJKc29uKVxuICAgIH07XG4gIH1cbiAgY29uc3QgYXBwbGljYWJsZVNpbXBsZVJ1bGUgPSBmaW5kQXJyKHNpbXBsZVJ1bGVzLCAocnVsZSkgPT4gcnVsZS5pc0FwcGxpY2FibGUodmFsdWUsIHN1cGVySnNvbikpO1xuICBpZiAoYXBwbGljYWJsZVNpbXBsZVJ1bGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IGFwcGxpY2FibGVTaW1wbGVSdWxlLnRyYW5zZm9ybSh2YWx1ZSwgc3VwZXJKc29uKSxcbiAgICAgIHR5cGU6IGFwcGxpY2FibGVTaW1wbGVSdWxlLmFubm90YXRpb25cbiAgICB9O1xuICB9XG4gIHJldHVybiB2b2lkIDA7XG59O1xudmFyIHNpbXBsZVJ1bGVzQnlBbm5vdGF0aW9uID0ge307XG5zaW1wbGVSdWxlcy5mb3JFYWNoKChydWxlKSA9PiB7XG4gIHNpbXBsZVJ1bGVzQnlBbm5vdGF0aW9uW3J1bGUuYW5ub3RhdGlvbl0gPSBydWxlO1xufSk7XG52YXIgdW50cmFuc2Zvcm1WYWx1ZSA9IChqc29uLCB0eXBlLCBzdXBlckpzb24pID0+IHtcbiAgaWYgKGlzQXJyYXkodHlwZSkpIHtcbiAgICBzd2l0Y2ggKHR5cGVbMF0pIHtcbiAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgcmV0dXJuIHN5bWJvbFJ1bGUudW50cmFuc2Zvcm0oanNvbiwgdHlwZSwgc3VwZXJKc29uKTtcbiAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICByZXR1cm4gY2xhc3NSdWxlLnVudHJhbnNmb3JtKGpzb24sIHR5cGUsIHN1cGVySnNvbik7XG4gICAgICBjYXNlIFwiY3VzdG9tXCI6XG4gICAgICAgIHJldHVybiBjdXN0b21SdWxlLnVudHJhbnNmb3JtKGpzb24sIHR5cGUsIHN1cGVySnNvbik7XG4gICAgICBjYXNlIFwidHlwZWQtYXJyYXlcIjpcbiAgICAgICAgcmV0dXJuIHR5cGVkQXJyYXlSdWxlLnVudHJhbnNmb3JtKGpzb24sIHR5cGUsIHN1cGVySnNvbik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHRyYW5zZm9ybWF0aW9uOiBcIiArIHR5cGUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCB0cmFuc2Zvcm1hdGlvbiA9IHNpbXBsZVJ1bGVzQnlBbm5vdGF0aW9uW3R5cGVdO1xuICAgIGlmICghdHJhbnNmb3JtYXRpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gdHJhbnNmb3JtYXRpb246IFwiICsgdHlwZSk7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1hdGlvbi51bnRyYW5zZm9ybShqc29uLCBzdXBlckpzb24pO1xuICB9XG59O1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC9hY2Nlc3NEZWVwLmpzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIGdldE50aEtleSA9ICh2YWx1ZSwgbikgPT4ge1xuICBpZiAobiA+IHZhbHVlLnNpemUpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW5kZXggb3V0IG9mIGJvdW5kc1wiKTtcbiAgY29uc3Qga2V5cyA9IHZhbHVlLmtleXMoKTtcbiAgd2hpbGUgKG4gPiAwKSB7XG4gICAga2V5cy5uZXh0KCk7XG4gICAgbi0tO1xuICB9XG4gIHJldHVybiBrZXlzLm5leHQoKS52YWx1ZTtcbn07XG5mdW5jdGlvbiB2YWxpZGF0ZVBhdGgocGF0aCkge1xuICBpZiAoaW5jbHVkZXMocGF0aCwgXCJfX3Byb3RvX19cIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJfX3Byb3RvX18gaXMgbm90IGFsbG93ZWQgYXMgYSBwcm9wZXJ0eVwiKTtcbiAgfVxuICBpZiAoaW5jbHVkZXMocGF0aCwgXCJwcm90b3R5cGVcIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJwcm90b3R5cGUgaXMgbm90IGFsbG93ZWQgYXMgYSBwcm9wZXJ0eVwiKTtcbiAgfVxuICBpZiAoaW5jbHVkZXMocGF0aCwgXCJjb25zdHJ1Y3RvclwiKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImNvbnN0cnVjdG9yIGlzIG5vdCBhbGxvd2VkIGFzIGEgcHJvcGVydHlcIik7XG4gIH1cbn1cbnZhciBnZXREZWVwID0gKG9iamVjdCwgcGF0aCkgPT4ge1xuICB2YWxpZGF0ZVBhdGgocGF0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGtleSA9IHBhdGhbaV07XG4gICAgaWYgKGlzU2V0KG9iamVjdCkpIHtcbiAgICAgIG9iamVjdCA9IGdldE50aEtleShvYmplY3QsICtrZXkpO1xuICAgIH0gZWxzZSBpZiAoaXNNYXAob2JqZWN0KSkge1xuICAgICAgY29uc3Qgcm93ID0gK2tleTtcbiAgICAgIGNvbnN0IHR5cGUgPSArcGF0aFsrK2ldID09PSAwID8gXCJrZXlcIiA6IFwidmFsdWVcIjtcbiAgICAgIGNvbnN0IGtleU9mUm93ID0gZ2V0TnRoS2V5KG9iamVjdCwgcm93KTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwia2V5XCI6XG4gICAgICAgICAgb2JqZWN0ID0ga2V5T2ZSb3c7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ2YWx1ZVwiOlxuICAgICAgICAgIG9iamVjdCA9IG9iamVjdC5nZXQoa2V5T2ZSb3cpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvYmplY3QgPSBvYmplY3Rba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn07XG52YXIgc2V0RGVlcCA9IChvYmplY3QsIHBhdGgsIG1hcHBlcikgPT4ge1xuICB2YWxpZGF0ZVBhdGgocGF0aCk7XG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBtYXBwZXIob2JqZWN0KTtcbiAgfVxuICBsZXQgcGFyZW50ID0gb2JqZWN0O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgY29uc3Qga2V5ID0gcGF0aFtpXTtcbiAgICBpZiAoaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICBjb25zdCBpbmRleCA9ICtrZXk7XG4gICAgICBwYXJlbnQgPSBwYXJlbnRbaW5kZXhdO1xuICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdDIocGFyZW50KSkge1xuICAgICAgcGFyZW50ID0gcGFyZW50W2tleV07XG4gICAgfSBlbHNlIGlmIChpc1NldChwYXJlbnQpKSB7XG4gICAgICBjb25zdCByb3cgPSAra2V5O1xuICAgICAgcGFyZW50ID0gZ2V0TnRoS2V5KHBhcmVudCwgcm93KTtcbiAgICB9IGVsc2UgaWYgKGlzTWFwKHBhcmVudCkpIHtcbiAgICAgIGNvbnN0IGlzRW5kID0gaSA9PT0gcGF0aC5sZW5ndGggLSAyO1xuICAgICAgaWYgKGlzRW5kKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY29uc3Qgcm93ID0gK2tleTtcbiAgICAgIGNvbnN0IHR5cGUgPSArcGF0aFsrK2ldID09PSAwID8gXCJrZXlcIiA6IFwidmFsdWVcIjtcbiAgICAgIGNvbnN0IGtleU9mUm93ID0gZ2V0TnRoS2V5KHBhcmVudCwgcm93KTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwia2V5XCI6XG4gICAgICAgICAgcGFyZW50ID0ga2V5T2ZSb3c7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ2YWx1ZVwiOlxuICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5nZXQoa2V5T2ZSb3cpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjb25zdCBsYXN0S2V5ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICBpZiAoaXNBcnJheShwYXJlbnQpKSB7XG4gICAgcGFyZW50WytsYXN0S2V5XSA9IG1hcHBlcihwYXJlbnRbK2xhc3RLZXldKTtcbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0MihwYXJlbnQpKSB7XG4gICAgcGFyZW50W2xhc3RLZXldID0gbWFwcGVyKHBhcmVudFtsYXN0S2V5XSk7XG4gIH1cbiAgaWYgKGlzU2V0KHBhcmVudCkpIHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IGdldE50aEtleShwYXJlbnQsICtsYXN0S2V5KTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IG1hcHBlcihvbGRWYWx1ZSk7XG4gICAgaWYgKG9sZFZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgcGFyZW50LmRlbGV0ZShvbGRWYWx1ZSk7XG4gICAgICBwYXJlbnQuYWRkKG5ld1ZhbHVlKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzTWFwKHBhcmVudCkpIHtcbiAgICBjb25zdCByb3cgPSArcGF0aFtwYXRoLmxlbmd0aCAtIDJdO1xuICAgIGNvbnN0IGtleVRvUm93ID0gZ2V0TnRoS2V5KHBhcmVudCwgcm93KTtcbiAgICBjb25zdCB0eXBlID0gK2xhc3RLZXkgPT09IDAgPyBcImtleVwiIDogXCJ2YWx1ZVwiO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBcImtleVwiOiB7XG4gICAgICAgIGNvbnN0IG5ld0tleSA9IG1hcHBlcihrZXlUb1Jvdyk7XG4gICAgICAgIHBhcmVudC5zZXQobmV3S2V5LCBwYXJlbnQuZ2V0KGtleVRvUm93KSk7XG4gICAgICAgIGlmIChuZXdLZXkgIT09IGtleVRvUm93KSB7XG4gICAgICAgICAgcGFyZW50LmRlbGV0ZShrZXlUb1Jvdyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwidmFsdWVcIjoge1xuICAgICAgICBwYXJlbnQuc2V0KGtleVRvUm93LCBtYXBwZXIocGFyZW50LmdldChrZXlUb1JvdykpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmplY3Q7XG59O1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC9wbGFpbmVyLmpzXG5mdW5jdGlvbiB0cmF2ZXJzZSh0cmVlLCB3YWxrZXIyLCBvcmlnaW4gPSBbXSkge1xuICBpZiAoIXRyZWUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCFpc0FycmF5KHRyZWUpKSB7XG4gICAgZm9yRWFjaCh0cmVlLCAoc3VidHJlZSwga2V5KSA9PiB0cmF2ZXJzZShzdWJ0cmVlLCB3YWxrZXIyLCBbLi4ub3JpZ2luLCAuLi5wYXJzZVBhdGgoa2V5KV0pKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgW25vZGVWYWx1ZSwgY2hpbGRyZW5dID0gdHJlZTtcbiAgaWYgKGNoaWxkcmVuKSB7XG4gICAgZm9yRWFjaChjaGlsZHJlbiwgKGNoaWxkLCBrZXkpID0+IHtcbiAgICAgIHRyYXZlcnNlKGNoaWxkLCB3YWxrZXIyLCBbLi4ub3JpZ2luLCAuLi5wYXJzZVBhdGgoa2V5KV0pO1xuICAgIH0pO1xuICB9XG4gIHdhbGtlcjIobm9kZVZhbHVlLCBvcmlnaW4pO1xufVxuZnVuY3Rpb24gYXBwbHlWYWx1ZUFubm90YXRpb25zKHBsYWluLCBhbm5vdGF0aW9ucywgc3VwZXJKc29uKSB7XG4gIHRyYXZlcnNlKGFubm90YXRpb25zLCAodHlwZSwgcGF0aCkgPT4ge1xuICAgIHBsYWluID0gc2V0RGVlcChwbGFpbiwgcGF0aCwgKHYpID0+IHVudHJhbnNmb3JtVmFsdWUodiwgdHlwZSwgc3VwZXJKc29uKSk7XG4gIH0pO1xuICByZXR1cm4gcGxhaW47XG59XG5mdW5jdGlvbiBhcHBseVJlZmVyZW50aWFsRXF1YWxpdHlBbm5vdGF0aW9ucyhwbGFpbiwgYW5ub3RhdGlvbnMpIHtcbiAgZnVuY3Rpb24gYXBwbHkoaWRlbnRpY2FsUGF0aHMsIHBhdGgpIHtcbiAgICBjb25zdCBvYmplY3QgPSBnZXREZWVwKHBsYWluLCBwYXJzZVBhdGgocGF0aCkpO1xuICAgIGlkZW50aWNhbFBhdGhzLm1hcChwYXJzZVBhdGgpLmZvckVhY2goKGlkZW50aWNhbE9iamVjdFBhdGgpID0+IHtcbiAgICAgIHBsYWluID0gc2V0RGVlcChwbGFpbiwgaWRlbnRpY2FsT2JqZWN0UGF0aCwgKCkgPT4gb2JqZWN0KTtcbiAgICB9KTtcbiAgfVxuICBpZiAoaXNBcnJheShhbm5vdGF0aW9ucykpIHtcbiAgICBjb25zdCBbcm9vdCwgb3RoZXJdID0gYW5ub3RhdGlvbnM7XG4gICAgcm9vdC5mb3JFYWNoKChpZGVudGljYWxQYXRoKSA9PiB7XG4gICAgICBwbGFpbiA9IHNldERlZXAocGxhaW4sIHBhcnNlUGF0aChpZGVudGljYWxQYXRoKSwgKCkgPT4gcGxhaW4pO1xuICAgIH0pO1xuICAgIGlmIChvdGhlcikge1xuICAgICAgZm9yRWFjaChvdGhlciwgYXBwbHkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3JFYWNoKGFubm90YXRpb25zLCBhcHBseSk7XG4gIH1cbiAgcmV0dXJuIHBsYWluO1xufVxudmFyIGlzRGVlcCA9IChvYmplY3QsIHN1cGVySnNvbikgPT4gaXNQbGFpbk9iamVjdDIob2JqZWN0KSB8fCBpc0FycmF5KG9iamVjdCkgfHwgaXNNYXAob2JqZWN0KSB8fCBpc1NldChvYmplY3QpIHx8IGlzSW5zdGFuY2VPZlJlZ2lzdGVyZWRDbGFzcyhvYmplY3QsIHN1cGVySnNvbik7XG5mdW5jdGlvbiBhZGRJZGVudGl0eShvYmplY3QsIHBhdGgsIGlkZW50aXRpZXMpIHtcbiAgY29uc3QgZXhpc3RpbmdTZXQgPSBpZGVudGl0aWVzLmdldChvYmplY3QpO1xuICBpZiAoZXhpc3RpbmdTZXQpIHtcbiAgICBleGlzdGluZ1NldC5wdXNoKHBhdGgpO1xuICB9IGVsc2Uge1xuICAgIGlkZW50aXRpZXMuc2V0KG9iamVjdCwgW3BhdGhdKTtcbiAgfVxufVxuZnVuY3Rpb24gZ2VuZXJhdGVSZWZlcmVudGlhbEVxdWFsaXR5QW5ub3RhdGlvbnMoaWRlbnRpdGl0ZXMsIGRlZHVwZSkge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgbGV0IHJvb3RFcXVhbGl0eVBhdGhzID0gdm9pZCAwO1xuICBpZGVudGl0aXRlcy5mb3JFYWNoKChwYXRocykgPT4ge1xuICAgIGlmIChwYXRocy5sZW5ndGggPD0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWRlZHVwZSkge1xuICAgICAgcGF0aHMgPSBwYXRocy5tYXAoKHBhdGgpID0+IHBhdGgubWFwKFN0cmluZykpLnNvcnQoKGEsIGIpID0+IGEubGVuZ3RoIC0gYi5sZW5ndGgpO1xuICAgIH1cbiAgICBjb25zdCBbcmVwcmVzZW50YXRpdmVQYXRoLCAuLi5pZGVudGljYWxQYXRoc10gPSBwYXRocztcbiAgICBpZiAocmVwcmVzZW50YXRpdmVQYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcm9vdEVxdWFsaXR5UGF0aHMgPSBpZGVudGljYWxQYXRocy5tYXAoc3RyaW5naWZ5UGF0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtzdHJpbmdpZnlQYXRoKHJlcHJlc2VudGF0aXZlUGF0aCldID0gaWRlbnRpY2FsUGF0aHMubWFwKHN0cmluZ2lmeVBhdGgpO1xuICAgIH1cbiAgfSk7XG4gIGlmIChyb290RXF1YWxpdHlQYXRocykge1xuICAgIGlmIChpc0VtcHR5T2JqZWN0KHJlc3VsdCkpIHtcbiAgICAgIHJldHVybiBbcm9vdEVxdWFsaXR5UGF0aHNdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW3Jvb3RFcXVhbGl0eVBhdGhzLCByZXN1bHRdO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaXNFbXB0eU9iamVjdChyZXN1bHQpID8gdm9pZCAwIDogcmVzdWx0O1xuICB9XG59XG52YXIgd2Fsa2VyID0gKG9iamVjdCwgaWRlbnRpdGllcywgc3VwZXJKc29uLCBkZWR1cGUsIHBhdGggPSBbXSwgb2JqZWN0c0luVGhpc1BhdGggPSBbXSwgc2Vlbk9iamVjdHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKSA9PiB7XG4gIHZhciBfYTI1O1xuICBjb25zdCBwcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTIob2JqZWN0KTtcbiAgaWYgKCFwcmltaXRpdmUpIHtcbiAgICBhZGRJZGVudGl0eShvYmplY3QsIHBhdGgsIGlkZW50aXRpZXMpO1xuICAgIGNvbnN0IHNlZW4gPSBzZWVuT2JqZWN0cy5nZXQob2JqZWN0KTtcbiAgICBpZiAoc2Vlbikge1xuICAgICAgcmV0dXJuIGRlZHVwZSA/IHtcbiAgICAgICAgdHJhbnNmb3JtZWRWYWx1ZTogbnVsbFxuICAgICAgfSA6IHNlZW47XG4gICAgfVxuICB9XG4gIGlmICghaXNEZWVwKG9iamVjdCwgc3VwZXJKc29uKSkge1xuICAgIGNvbnN0IHRyYW5zZm9ybWVkMiA9IHRyYW5zZm9ybVZhbHVlKG9iamVjdCwgc3VwZXJKc29uKTtcbiAgICBjb25zdCByZXN1bHQyID0gdHJhbnNmb3JtZWQyID8ge1xuICAgICAgdHJhbnNmb3JtZWRWYWx1ZTogdHJhbnNmb3JtZWQyLnZhbHVlLFxuICAgICAgYW5ub3RhdGlvbnM6IFt0cmFuc2Zvcm1lZDIudHlwZV1cbiAgICB9IDoge1xuICAgICAgdHJhbnNmb3JtZWRWYWx1ZTogb2JqZWN0XG4gICAgfTtcbiAgICBpZiAoIXByaW1pdGl2ZSkge1xuICAgICAgc2Vlbk9iamVjdHMuc2V0KG9iamVjdCwgcmVzdWx0Mik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQyO1xuICB9XG4gIGlmIChpbmNsdWRlcyhvYmplY3RzSW5UaGlzUGF0aCwgb2JqZWN0KSkge1xuICAgIHJldHVybiB7XG4gICAgICB0cmFuc2Zvcm1lZFZhbHVlOiBudWxsXG4gICAgfTtcbiAgfVxuICBjb25zdCB0cmFuc2Zvcm1hdGlvblJlc3VsdCA9IHRyYW5zZm9ybVZhbHVlKG9iamVjdCwgc3VwZXJKc29uKTtcbiAgY29uc3QgdHJhbnNmb3JtZWQgPSAoX2EyNSA9IHRyYW5zZm9ybWF0aW9uUmVzdWx0ID09IG51bGwgPyB2b2lkIDAgOiB0cmFuc2Zvcm1hdGlvblJlc3VsdC52YWx1ZSkgIT0gbnVsbCA/IF9hMjUgOiBvYmplY3Q7XG4gIGNvbnN0IHRyYW5zZm9ybWVkVmFsdWUgPSBpc0FycmF5KHRyYW5zZm9ybWVkKSA/IFtdIDoge307XG4gIGNvbnN0IGlubmVyQW5ub3RhdGlvbnMgPSB7fTtcbiAgZm9yRWFjaCh0cmFuc2Zvcm1lZCwgKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgIGlmIChpbmRleCA9PT0gXCJfX3Byb3RvX19cIiB8fCBpbmRleCA9PT0gXCJjb25zdHJ1Y3RvclwiIHx8IGluZGV4ID09PSBcInByb3RvdHlwZVwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERldGVjdGVkIHByb3BlcnR5ICR7aW5kZXh9LiBUaGlzIGlzIGEgcHJvdG90eXBlIHBvbGx1dGlvbiByaXNrLCBwbGVhc2UgcmVtb3ZlIGl0IGZyb20geW91ciBvYmplY3QuYCk7XG4gICAgfVxuICAgIGNvbnN0IHJlY3Vyc2l2ZVJlc3VsdCA9IHdhbGtlcih2YWx1ZSwgaWRlbnRpdGllcywgc3VwZXJKc29uLCBkZWR1cGUsIFsuLi5wYXRoLCBpbmRleF0sIFsuLi5vYmplY3RzSW5UaGlzUGF0aCwgb2JqZWN0XSwgc2Vlbk9iamVjdHMpO1xuICAgIHRyYW5zZm9ybWVkVmFsdWVbaW5kZXhdID0gcmVjdXJzaXZlUmVzdWx0LnRyYW5zZm9ybWVkVmFsdWU7XG4gICAgaWYgKGlzQXJyYXkocmVjdXJzaXZlUmVzdWx0LmFubm90YXRpb25zKSkge1xuICAgICAgaW5uZXJBbm5vdGF0aW9uc1tpbmRleF0gPSByZWN1cnNpdmVSZXN1bHQuYW5ub3RhdGlvbnM7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0MihyZWN1cnNpdmVSZXN1bHQuYW5ub3RhdGlvbnMpKSB7XG4gICAgICBmb3JFYWNoKHJlY3Vyc2l2ZVJlc3VsdC5hbm5vdGF0aW9ucywgKHRyZWUsIGtleSkgPT4ge1xuICAgICAgICBpbm5lckFubm90YXRpb25zW2VzY2FwZUtleShpbmRleCkgKyBcIi5cIiArIGtleV0gPSB0cmVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgcmVzdWx0ID0gaXNFbXB0eU9iamVjdChpbm5lckFubm90YXRpb25zKSA/IHtcbiAgICB0cmFuc2Zvcm1lZFZhbHVlLFxuICAgIGFubm90YXRpb25zOiAhIXRyYW5zZm9ybWF0aW9uUmVzdWx0ID8gW3RyYW5zZm9ybWF0aW9uUmVzdWx0LnR5cGVdIDogdm9pZCAwXG4gIH0gOiB7XG4gICAgdHJhbnNmb3JtZWRWYWx1ZSxcbiAgICBhbm5vdGF0aW9uczogISF0cmFuc2Zvcm1hdGlvblJlc3VsdCA/IFt0cmFuc2Zvcm1hdGlvblJlc3VsdC50eXBlLCBpbm5lckFubm90YXRpb25zXSA6IGlubmVyQW5ub3RhdGlvbnNcbiAgfTtcbiAgaWYgKCFwcmltaXRpdmUpIHtcbiAgICBzZWVuT2JqZWN0cy5zZXQob2JqZWN0LCByZXN1bHQpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vY29weS1hbnl0aGluZ0AzLjAuNS9ub2RlX21vZHVsZXMvY29weS1hbnl0aGluZy9kaXN0L2luZGV4LmpzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vaXMtd2hhdEA0LjEuMTYvbm9kZV9tb2R1bGVzL2lzLXdoYXQvZGlzdC9pbmRleC5qc1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIGdldFR5cGUyKHBheWxvYWQpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwYXlsb2FkKS5zbGljZSg4LCAtMSk7XG59XG5mdW5jdGlvbiBpc0FycmF5MihwYXlsb2FkKSB7XG4gIHJldHVybiBnZXRUeXBlMihwYXlsb2FkKSA9PT0gXCJBcnJheVwiO1xufVxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdDMocGF5bG9hZCkge1xuICBpZiAoZ2V0VHlwZTIocGF5bG9hZCkgIT09IFwiT2JqZWN0XCIpXG4gICAgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBwcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocGF5bG9hZCk7XG4gIHJldHVybiAhIXByb3RvdHlwZSAmJiBwcm90b3R5cGUuY29uc3RydWN0b3IgPT09IE9iamVjdCAmJiBwcm90b3R5cGUgPT09IE9iamVjdC5wcm90b3R5cGU7XG59XG5mdW5jdGlvbiBpc051bGwyKHBheWxvYWQpIHtcbiAgcmV0dXJuIGdldFR5cGUyKHBheWxvYWQpID09PSBcIk51bGxcIjtcbn1cbmZ1bmN0aW9uIGlzT25lT2YoYSwgYiwgYywgZCwgZSkge1xuICByZXR1cm4gKHZhbHVlKSA9PiBhKHZhbHVlKSB8fCBiKHZhbHVlKSB8fCAhIWMgJiYgYyh2YWx1ZSkgfHwgISFkICYmIGQodmFsdWUpIHx8ICEhZSAmJiBlKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkMihwYXlsb2FkKSB7XG4gIHJldHVybiBnZXRUeXBlMihwYXlsb2FkKSA9PT0gXCJVbmRlZmluZWRcIjtcbn1cbnZhciBpc051bGxPclVuZGVmaW5lZCA9IGlzT25lT2YoaXNOdWxsMiwgaXNVbmRlZmluZWQyKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2NvcHktYW55dGhpbmdAMy4wLjUvbm9kZV9tb2R1bGVzL2NvcHktYW55dGhpbmcvZGlzdC9pbmRleC5qc1xuZnVuY3Rpb24gYXNzaWduUHJvcChjYXJyeSwga2V5LCBuZXdWYWwsIG9yaWdpbmFsT2JqZWN0LCBpbmNsdWRlTm9uZW51bWVyYWJsZSkge1xuICBjb25zdCBwcm9wVHlwZSA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwob3JpZ2luYWxPYmplY3QsIGtleSkgPyBcImVudW1lcmFibGVcIiA6IFwibm9uZW51bWVyYWJsZVwiO1xuICBpZiAocHJvcFR5cGUgPT09IFwiZW51bWVyYWJsZVwiKVxuICAgIGNhcnJ5W2tleV0gPSBuZXdWYWw7XG4gIGlmIChpbmNsdWRlTm9uZW51bWVyYWJsZSAmJiBwcm9wVHlwZSA9PT0gXCJub25lbnVtZXJhYmxlXCIpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2FycnksIGtleSwge1xuICAgICAgdmFsdWU6IG5ld1ZhbCxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gY29weSh0YXJnZXQyMiwgb3B0aW9ucyA9IHt9KSB7XG4gIGlmIChpc0FycmF5Mih0YXJnZXQyMikpIHtcbiAgICByZXR1cm4gdGFyZ2V0MjIubWFwKChpdGVtKSA9PiBjb3B5KGl0ZW0sIG9wdGlvbnMpKTtcbiAgfVxuICBpZiAoIWlzUGxhaW5PYmplY3QzKHRhcmdldDIyKSkge1xuICAgIHJldHVybiB0YXJnZXQyMjtcbiAgfVxuICBjb25zdCBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldDIyKTtcbiAgY29uc3Qgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0MjIpO1xuICByZXR1cm4gWy4uLnByb3BzLCAuLi5zeW1ib2xzXS5yZWR1Y2UoKGNhcnJ5LCBrZXkpID0+IHtcbiAgICBpZiAoaXNBcnJheTIob3B0aW9ucy5wcm9wcykgJiYgIW9wdGlvbnMucHJvcHMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgcmV0dXJuIGNhcnJ5O1xuICAgIH1cbiAgICBjb25zdCB2YWwgPSB0YXJnZXQyMltrZXldO1xuICAgIGNvbnN0IG5ld1ZhbCA9IGNvcHkodmFsLCBvcHRpb25zKTtcbiAgICBhc3NpZ25Qcm9wKGNhcnJ5LCBrZXksIG5ld1ZhbCwgdGFyZ2V0MjIsIG9wdGlvbnMubm9uZW51bWVyYWJsZSk7XG4gICAgcmV0dXJuIGNhcnJ5O1xuICB9LCB7fSk7XG59XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdXBlcmpzb25AMi4yLjIvbm9kZV9tb2R1bGVzL3N1cGVyanNvbi9kaXN0L2luZGV4LmpzXG52YXIgU3VwZXJKU09OID0gY2xhc3Mge1xuICAvKipcbiAgICogQHBhcmFtIGRlZHVwZVJlZmVyZW50aWFsRXF1YWxpdGllcyAgSWYgdHJ1ZSwgU3VwZXJKU09OIHdpbGwgbWFrZSBzdXJlIG9ubHkgb25lIGluc3RhbmNlIG9mIHJlZmVyZW50aWFsbHkgZXF1YWwgb2JqZWN0cyBhcmUgc2VyaWFsaXplZCBhbmQgdGhlIHJlc3QgYXJlIHJlcGxhY2VkIHdpdGggYG51bGxgLlxuICAgKi9cbiAgY29uc3RydWN0b3IoeyBkZWR1cGUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICB0aGlzLmNsYXNzUmVnaXN0cnkgPSBuZXcgQ2xhc3NSZWdpc3RyeSgpO1xuICAgIHRoaXMuc3ltYm9sUmVnaXN0cnkgPSBuZXcgUmVnaXN0cnkoKHMpID0+IHtcbiAgICAgIHZhciBfYTI1O1xuICAgICAgcmV0dXJuIChfYTI1ID0gcy5kZXNjcmlwdGlvbikgIT0gbnVsbCA/IF9hMjUgOiBcIlwiO1xuICAgIH0pO1xuICAgIHRoaXMuY3VzdG9tVHJhbnNmb3JtZXJSZWdpc3RyeSA9IG5ldyBDdXN0b21UcmFuc2Zvcm1lclJlZ2lzdHJ5KCk7XG4gICAgdGhpcy5hbGxvd2VkRXJyb3JQcm9wcyA9IFtdO1xuICAgIHRoaXMuZGVkdXBlID0gZGVkdXBlO1xuICB9XG4gIHNlcmlhbGl6ZShvYmplY3QpIHtcbiAgICBjb25zdCBpZGVudGl0aWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICBjb25zdCBvdXRwdXQgPSB3YWxrZXIob2JqZWN0LCBpZGVudGl0aWVzLCB0aGlzLCB0aGlzLmRlZHVwZSk7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAganNvbjogb3V0cHV0LnRyYW5zZm9ybWVkVmFsdWVcbiAgICB9O1xuICAgIGlmIChvdXRwdXQuYW5ub3RhdGlvbnMpIHtcbiAgICAgIHJlcy5tZXRhID0ge1xuICAgICAgICAuLi5yZXMubWV0YSxcbiAgICAgICAgdmFsdWVzOiBvdXRwdXQuYW5ub3RhdGlvbnNcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGVxdWFsaXR5QW5ub3RhdGlvbnMgPSBnZW5lcmF0ZVJlZmVyZW50aWFsRXF1YWxpdHlBbm5vdGF0aW9ucyhpZGVudGl0aWVzLCB0aGlzLmRlZHVwZSk7XG4gICAgaWYgKGVxdWFsaXR5QW5ub3RhdGlvbnMpIHtcbiAgICAgIHJlcy5tZXRhID0ge1xuICAgICAgICAuLi5yZXMubWV0YSxcbiAgICAgICAgcmVmZXJlbnRpYWxFcXVhbGl0aWVzOiBlcXVhbGl0eUFubm90YXRpb25zXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIGRlc2VyaWFsaXplKHBheWxvYWQpIHtcbiAgICBjb25zdCB7IGpzb24sIG1ldGEgfSA9IHBheWxvYWQ7XG4gICAgbGV0IHJlc3VsdCA9IGNvcHkoanNvbik7XG4gICAgaWYgKG1ldGEgPT0gbnVsbCA/IHZvaWQgMCA6IG1ldGEudmFsdWVzKSB7XG4gICAgICByZXN1bHQgPSBhcHBseVZhbHVlQW5ub3RhdGlvbnMocmVzdWx0LCBtZXRhLnZhbHVlcywgdGhpcyk7XG4gICAgfVxuICAgIGlmIChtZXRhID09IG51bGwgPyB2b2lkIDAgOiBtZXRhLnJlZmVyZW50aWFsRXF1YWxpdGllcykge1xuICAgICAgcmVzdWx0ID0gYXBwbHlSZWZlcmVudGlhbEVxdWFsaXR5QW5ub3RhdGlvbnMocmVzdWx0LCBtZXRhLnJlZmVyZW50aWFsRXF1YWxpdGllcyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgc3RyaW5naWZ5KG9iamVjdCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnNlcmlhbGl6ZShvYmplY3QpKTtcbiAgfVxuICBwYXJzZShzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5kZXNlcmlhbGl6ZShKU09OLnBhcnNlKHN0cmluZykpO1xuICB9XG4gIHJlZ2lzdGVyQ2xhc3Modiwgb3B0aW9ucykge1xuICAgIHRoaXMuY2xhc3NSZWdpc3RyeS5yZWdpc3Rlcih2LCBvcHRpb25zKTtcbiAgfVxuICByZWdpc3RlclN5bWJvbCh2LCBpZGVudGlmaWVyKSB7XG4gICAgdGhpcy5zeW1ib2xSZWdpc3RyeS5yZWdpc3Rlcih2LCBpZGVudGlmaWVyKTtcbiAgfVxuICByZWdpc3RlckN1c3RvbSh0cmFuc2Zvcm1lciwgbmFtZSkge1xuICAgIHRoaXMuY3VzdG9tVHJhbnNmb3JtZXJSZWdpc3RyeS5yZWdpc3Rlcih7XG4gICAgICBuYW1lLFxuICAgICAgLi4udHJhbnNmb3JtZXJcbiAgICB9KTtcbiAgfVxuICBhbGxvd0Vycm9yUHJvcHMoLi4ucHJvcHMpIHtcbiAgICB0aGlzLmFsbG93ZWRFcnJvclByb3BzLnB1c2goLi4ucHJvcHMpO1xuICB9XG59O1xuU3VwZXJKU09OLmRlZmF1bHRJbnN0YW5jZSA9IG5ldyBTdXBlckpTT04oKTtcblN1cGVySlNPTi5zZXJpYWxpemUgPSBTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlLnNlcmlhbGl6ZS5iaW5kKFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UpO1xuU3VwZXJKU09OLmRlc2VyaWFsaXplID0gU3VwZXJKU09OLmRlZmF1bHRJbnN0YW5jZS5kZXNlcmlhbGl6ZS5iaW5kKFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UpO1xuU3VwZXJKU09OLnN0cmluZ2lmeSA9IFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2Uuc3RyaW5naWZ5LmJpbmQoU3VwZXJKU09OLmRlZmF1bHRJbnN0YW5jZSk7XG5TdXBlckpTT04ucGFyc2UgPSBTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlLnBhcnNlLmJpbmQoU3VwZXJKU09OLmRlZmF1bHRJbnN0YW5jZSk7XG5TdXBlckpTT04ucmVnaXN0ZXJDbGFzcyA9IFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UucmVnaXN0ZXJDbGFzcy5iaW5kKFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UpO1xuU3VwZXJKU09OLnJlZ2lzdGVyU3ltYm9sID0gU3VwZXJKU09OLmRlZmF1bHRJbnN0YW5jZS5yZWdpc3RlclN5bWJvbC5iaW5kKFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UpO1xuU3VwZXJKU09OLnJlZ2lzdGVyQ3VzdG9tID0gU3VwZXJKU09OLmRlZmF1bHRJbnN0YW5jZS5yZWdpc3RlckN1c3RvbS5iaW5kKFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UpO1xuU3VwZXJKU09OLmFsbG93RXJyb3JQcm9wcyA9IFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UuYWxsb3dFcnJvclByb3BzLmJpbmQoU3VwZXJKU09OLmRlZmF1bHRJbnN0YW5jZSk7XG52YXIgc2VyaWFsaXplID0gU3VwZXJKU09OLnNlcmlhbGl6ZTtcbnZhciBkZXNlcmlhbGl6ZSA9IFN1cGVySlNPTi5kZXNlcmlhbGl6ZTtcbnZhciBzdHJpbmdpZnkgPSBTdXBlckpTT04uc3RyaW5naWZ5O1xudmFyIHBhcnNlID0gU3VwZXJKU09OLnBhcnNlO1xudmFyIHJlZ2lzdGVyQ2xhc3MgPSBTdXBlckpTT04ucmVnaXN0ZXJDbGFzcztcbnZhciByZWdpc3RlckN1c3RvbSA9IFN1cGVySlNPTi5yZWdpc3RlckN1c3RvbTtcbnZhciByZWdpc3RlclN5bWJvbCA9IFN1cGVySlNPTi5yZWdpc3RlclN5bWJvbDtcbnZhciBhbGxvd0Vycm9yUHJvcHMgPSBTdXBlckpTT04uYWxsb3dFcnJvclByb3BzO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvYnJvYWRjYXN0LWNoYW5uZWwvY29udGV4dC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbnZhciBfX0RFVlRPT0xTX0tJVF9CUk9BRENBU1RfTUVTU0FHSU5HX0VWRU5UX0tFWSA9IFwiX19kZXZ0b29scy1raXQtYnJvYWRjYXN0LW1lc3NhZ2luZy1ldmVudC1rZXlfX1wiO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvYnJvYWRjYXN0LWNoYW5uZWwvaW5kZXgudHNcbnZhciBCUk9BRENBU1RfQ0hBTk5FTF9OQU1FID0gXCJfX2RldnRvb2xzLWtpdDpicm9hZGNhc3QtY2hhbm5lbF9fXCI7XG5mdW5jdGlvbiBjcmVhdGVCcm9hZGNhc3RDaGFubmVsKCkge1xuICBjb25zdCBjaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoQlJPQURDQVNUX0NIQU5ORUxfTkFNRSk7XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICAgIGNoYW5uZWwucG9zdE1lc3NhZ2UoU3VwZXJKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGV2ZW50OiBfX0RFVlRPT0xTX0tJVF9CUk9BRENBU1RfTUVTU0FHSU5HX0VWRU5UX0tFWSxcbiAgICAgICAgZGF0YVxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgICBjaGFubmVsLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBTdXBlckpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGlmIChwYXJzZWQuZXZlbnQgPT09IF9fREVWVE9PTFNfS0lUX0JST0FEQ0FTVF9NRVNTQUdJTkdfRVZFTlRfS0VZKSB7XG4gICAgICAgICAgaGFuZGxlcihwYXJzZWQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZWxlY3Ryb24vaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9lbGVjdHJvbi9jbGllbnQudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9lbGVjdHJvbi9jb250ZXh0LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDE2IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG52YXIgX19FTEVDVFJPTl9DTElFTlRfQ09OVEVYVF9fID0gXCJlbGVjdHJvbjpjbGllbnQtY29udGV4dFwiO1xudmFyIF9fRUxFQ1RST05fUlBPWFlfQ09OVEVYVF9fID0gXCJlbGVjdHJvbjpwcm94eS1jb250ZXh0XCI7XG52YXIgX19FTEVDVFJPTl9TRVJWRVJfQ09OVEVYVF9fID0gXCJlbGVjdHJvbjpzZXJ2ZXItY29udGV4dFwiO1xudmFyIF9fREVWVE9PTFNfS0lUX0VMRUNUUk9OX01FU1NBR0lOR19FVkVOVF9LRVlfXyA9IHtcbiAgLy8gY2xpZW50XG4gIENMSUVOVF9UT19QUk9YWTogXCJjbGllbnQtPnByb3h5XCIsXG4gIC8vIG9uOiBwcm94eS0+Y2xpZW50XG4gIC8vIHByb3h5XG4gIFBST1hZX1RPX0NMSUVOVDogXCJwcm94eS0+Y2xpZW50XCIsXG4gIC8vIG9uOiBzZXJ2ZXItPnByb3h5XG4gIFBST1hZX1RPX1NFUlZFUjogXCJwcm94eS0+c2VydmVyXCIsXG4gIC8vIG9uOiBjbGllbnQtPnByb3h5XG4gIC8vIHNlcnZlclxuICBTRVJWRVJfVE9fUFJPWFk6IFwic2VydmVyLT5wcm94eVwiXG4gIC8vIG9uOiBwcm94eS0+c2VydmVyXG59O1xuZnVuY3Rpb24gZ2V0RWxlY3Ryb25DbGllbnRDb250ZXh0KCkge1xuICByZXR1cm4gdGFyZ2V0MTZbX19FTEVDVFJPTl9DTElFTlRfQ09OVEVYVF9fXTtcbn1cbmZ1bmN0aW9uIHNldEVsZWN0cm9uQ2xpZW50Q29udGV4dChjb250ZXh0KSB7XG4gIHRhcmdldDE2W19fRUxFQ1RST05fQ0xJRU5UX0NPTlRFWFRfX10gPSBjb250ZXh0O1xufVxuZnVuY3Rpb24gZ2V0RWxlY3Ryb25Qcm94eUNvbnRleHQoKSB7XG4gIHJldHVybiB0YXJnZXQxNltfX0VMRUNUUk9OX1JQT1hZX0NPTlRFWFRfX107XG59XG5mdW5jdGlvbiBzZXRFbGVjdHJvblByb3h5Q29udGV4dChjb250ZXh0KSB7XG4gIHRhcmdldDE2W19fRUxFQ1RST05fUlBPWFlfQ09OVEVYVF9fXSA9IGNvbnRleHQ7XG59XG5mdW5jdGlvbiBnZXRFbGVjdHJvblNlcnZlckNvbnRleHQoKSB7XG4gIHJldHVybiB0YXJnZXQxNltfX0VMRUNUUk9OX1NFUlZFUl9DT05URVhUX19dO1xufVxuZnVuY3Rpb24gc2V0RWxlY3Ryb25TZXJ2ZXJDb250ZXh0KGNvbnRleHQpIHtcbiAgdGFyZ2V0MTZbX19FTEVDVFJPTl9TRVJWRVJfQ09OVEVYVF9fXSA9IGNvbnRleHQ7XG59XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9lbGVjdHJvbi9jbGllbnQudHNcbmZ1bmN0aW9uIGNyZWF0ZUVsZWN0cm9uQ2xpZW50Q2hhbm5lbCgpIHtcbiAgY29uc3Qgc29ja2V0ID0gZ2V0RWxlY3Ryb25DbGllbnRDb250ZXh0KCk7XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICAgIHNvY2tldC5lbWl0KF9fREVWVE9PTFNfS0lUX0VMRUNUUk9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5DTElFTlRfVE9fUFJPWFksIFN1cGVySlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIH0sXG4gICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgICBzb2NrZXQub24oX19ERVZUT09MU19LSVRfRUxFQ1RST05fTUVTU0FHSU5HX0VWRU5UX0tFWV9fLlBST1hZX1RPX0NMSUVOVCwgKGUpID0+IHtcbiAgICAgICAgaGFuZGxlcihTdXBlckpTT04ucGFyc2UoZSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZWxlY3Ryb24vcHJveHkudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5mdW5jdGlvbiBjcmVhdGVFbGVjdHJvblByb3h5Q2hhbm5lbCgpIHtcbiAgY29uc3Qgc29ja2V0ID0gZ2V0RWxlY3Ryb25Qcm94eUNvbnRleHQoKTtcbiAgcmV0dXJuIHtcbiAgICBwb3N0OiAoZGF0YSkgPT4ge1xuICAgIH0sXG4gICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgICBzb2NrZXQub24oX19ERVZUT09MU19LSVRfRUxFQ1RST05fTUVTU0FHSU5HX0VWRU5UX0tFWV9fLlNFUlZFUl9UT19QUk9YWSwgKGRhdGEpID0+IHtcbiAgICAgICAgc29ja2V0LmJyb2FkY2FzdC5lbWl0KF9fREVWVE9PTFNfS0lUX0VMRUNUUk9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5QUk9YWV9UT19DTElFTlQsIGRhdGEpO1xuICAgICAgfSk7XG4gICAgICBzb2NrZXQub24oX19ERVZUT09MU19LSVRfRUxFQ1RST05fTUVTU0FHSU5HX0VWRU5UX0tFWV9fLkNMSUVOVF9UT19QUk9YWSwgKGRhdGEpID0+IHtcbiAgICAgICAgc29ja2V0LmJyb2FkY2FzdC5lbWl0KF9fREVWVE9PTFNfS0lUX0VMRUNUUk9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5QUk9YWV9UT19TRVJWRVIsIGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZWxlY3Ryb24vc2VydmVyLnRzXG5pbml0X2VzbV9zaGltcygpO1xuZnVuY3Rpb24gY3JlYXRlRWxlY3Ryb25TZXJ2ZXJDaGFubmVsKCkge1xuICBjb25zdCBzb2NrZXQgPSBnZXRFbGVjdHJvblNlcnZlckNvbnRleHQoKTtcbiAgcmV0dXJuIHtcbiAgICBwb3N0OiAoZGF0YSkgPT4ge1xuICAgICAgc29ja2V0LmVtaXQoX19ERVZUT09MU19LSVRfRUxFQ1RST05fTUVTU0FHSU5HX0VWRU5UX0tFWV9fLlNFUlZFUl9UT19QUk9YWSwgU3VwZXJKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgfSxcbiAgICBvbjogKGhhbmRsZXIpID0+IHtcbiAgICAgIHNvY2tldC5vbihfX0RFVlRPT0xTX0tJVF9FTEVDVFJPTl9NRVNTQUdJTkdfRVZFTlRfS0VZX18uUFJPWFlfVE9fU0VSVkVSLCAoZGF0YSkgPT4ge1xuICAgICAgICBoYW5kbGVyKFN1cGVySlNPTi5wYXJzZShkYXRhKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9leHRlbnNpb24vaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9leHRlbnNpb24vY2xpZW50LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZXh0ZW5zaW9uL2NvbnRleHQudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0MTcgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbnZhciBfX0VYVEVOU0lPTl9DTElFTlRfQ09OVEVYVF9fID0gXCJlbGVjdHJvbjpjbGllbnQtY29udGV4dFwiO1xudmFyIF9fREVWVE9PTFNfS0lUX0VYVEVOU0lPTl9NRVNTQUdJTkdfRVZFTlRfS0VZX18gPSB7XG4gIC8vIGNsaWVudFxuICBDTElFTlRfVE9fUFJPWFk6IFwiY2xpZW50LT5wcm94eVwiLFxuICAvLyBvbjogcHJveHktPmNsaWVudFxuICAvLyBwcm94eVxuICBQUk9YWV9UT19DTElFTlQ6IFwicHJveHktPmNsaWVudFwiLFxuICAvLyBvbjogc2VydmVyLT5wcm94eVxuICBQUk9YWV9UT19TRVJWRVI6IFwicHJveHktPnNlcnZlclwiLFxuICAvLyBvbjogY2xpZW50LT5wcm94eVxuICAvLyBzZXJ2ZXJcbiAgU0VSVkVSX1RPX1BST1hZOiBcInNlcnZlci0+cHJveHlcIlxuICAvLyBvbjogcHJveHktPnNlcnZlclxufTtcbmZ1bmN0aW9uIGdldEV4dGVuc2lvbkNsaWVudENvbnRleHQoKSB7XG4gIHJldHVybiB0YXJnZXQxN1tfX0VYVEVOU0lPTl9DTElFTlRfQ09OVEVYVF9fXTtcbn1cbmZ1bmN0aW9uIHNldEV4dGVuc2lvbkNsaWVudENvbnRleHQoY29udGV4dCkge1xuICB0YXJnZXQxN1tfX0VYVEVOU0lPTl9DTElFTlRfQ09OVEVYVF9fXSA9IGNvbnRleHQ7XG59XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9leHRlbnNpb24vY2xpZW50LnRzXG5mdW5jdGlvbiBjcmVhdGVFeHRlbnNpb25DbGllbnRDaGFubmVsKCkge1xuICBsZXQgZGlzY29ubmVjdGVkID0gZmFsc2U7XG4gIGxldCBwb3J0ID0gbnVsbDtcbiAgbGV0IHJlY29ubmVjdFRpbWVyID0gbnVsbDtcbiAgbGV0IG9uTWVzc2FnZUhhbmRsZXIgPSBudWxsO1xuICBmdW5jdGlvbiBjb25uZWN0KCkge1xuICAgIHRyeSB7XG4gICAgICBjbGVhclRpbWVvdXQocmVjb25uZWN0VGltZXIpO1xuICAgICAgcG9ydCA9IGNocm9tZS5ydW50aW1lLmNvbm5lY3Qoe1xuICAgICAgICBuYW1lOiBgJHtjaHJvbWUuZGV2dG9vbHMuaW5zcGVjdGVkV2luZG93LnRhYklkfWBcbiAgICAgIH0pO1xuICAgICAgc2V0RXh0ZW5zaW9uQ2xpZW50Q29udGV4dChwb3J0KTtcbiAgICAgIGRpc2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgcG9ydCA9PSBudWxsID8gdm9pZCAwIDogcG9ydC5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIob25NZXNzYWdlSGFuZGxlcik7XG4gICAgICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKSA9PiB7XG4gICAgICAgIGRpc2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHBvcnQgPT0gbnVsbCA/IHZvaWQgMCA6IHBvcnQub25NZXNzYWdlLnJlbW92ZUxpc3RlbmVyKG9uTWVzc2FnZUhhbmRsZXIpO1xuICAgICAgICByZWNvbm5lY3RUaW1lciA9IHNldFRpbWVvdXQoY29ubmVjdCwgMWUzKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGRpc2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgfVxuICB9XG4gIGNvbm5lY3QoKTtcbiAgcmV0dXJuIHtcbiAgICBwb3N0OiAoZGF0YSkgPT4ge1xuICAgICAgaWYgKGRpc2Nvbm5lY3RlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwb3J0ID09IG51bGwgPyB2b2lkIDAgOiBwb3J0LnBvc3RNZXNzYWdlKFN1cGVySlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIH0sXG4gICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgICBvbk1lc3NhZ2VIYW5kbGVyID0gKGRhdGEpID0+IHtcbiAgICAgICAgaWYgKGRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVyKFN1cGVySlNPTi5wYXJzZShkYXRhKSk7XG4gICAgICB9O1xuICAgICAgcG9ydCA9PSBudWxsID8gdm9pZCAwIDogcG9ydC5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIob25NZXNzYWdlSGFuZGxlcik7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZXh0ZW5zaW9uL3Byb3h5LnRzXG5pbml0X2VzbV9zaGltcygpO1xuZnVuY3Rpb24gY3JlYXRlRXh0ZW5zaW9uUHJveHlDaGFubmVsKCkge1xuICBjb25zdCBwb3J0ID0gY2hyb21lLnJ1bnRpbWUuY29ubmVjdCh7XG4gICAgbmFtZTogXCJjb250ZW50LXNjcmlwdFwiXG4gIH0pO1xuICBmdW5jdGlvbiBzZW5kTWVzc2FnZVRvVXNlckFwcChwYXlsb2FkKSB7XG4gICAgd2luZG93LnBvc3RNZXNzYWdlKHtcbiAgICAgIHNvdXJjZTogX19ERVZUT09MU19LSVRfRVhURU5TSU9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5QUk9YWV9UT19TRVJWRVIsXG4gICAgICBwYXlsb2FkXG4gICAgfSwgXCIqXCIpO1xuICB9XG4gIGZ1bmN0aW9uIHNlbmRNZXNzYWdlVG9EZXZUb29sc0NsaWVudChlKSB7XG4gICAgaWYgKGUuZGF0YSAmJiBlLmRhdGEuc291cmNlID09PSBfX0RFVlRPT0xTX0tJVF9FWFRFTlNJT05fTUVTU0FHSU5HX0VWRU5UX0tFWV9fLlNFUlZFUl9UT19QUk9YWSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcG9ydC5wb3N0TWVzc2FnZShlLmRhdGEucGF5bG9hZCk7XG4gICAgICB9IGNhdGNoIChlMikge1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwb3J0Lm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihzZW5kTWVzc2FnZVRvVXNlckFwcCk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBzZW5kTWVzc2FnZVRvRGV2VG9vbHNDbGllbnQpO1xuICBwb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcigoKSA9PiB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHNlbmRNZXNzYWdlVG9EZXZUb29sc0NsaWVudCk7XG4gICAgc2VuZE1lc3NhZ2VUb1VzZXJBcHAoU3VwZXJKU09OLnN0cmluZ2lmeSh7XG4gICAgICBldmVudDogXCJzaHV0ZG93blwiXG4gICAgfSkpO1xuICB9KTtcbiAgc2VuZE1lc3NhZ2VUb1VzZXJBcHAoU3VwZXJKU09OLnN0cmluZ2lmeSh7XG4gICAgZXZlbnQ6IFwiaW5pdFwiXG4gIH0pKTtcbiAgcmV0dXJuIHtcbiAgICBwb3N0OiAoZGF0YSkgPT4ge1xuICAgIH0sXG4gICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZXh0ZW5zaW9uL3NlcnZlci50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIGNyZWF0ZUV4dGVuc2lvblNlcnZlckNoYW5uZWwoKSB7XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHNvdXJjZTogX19ERVZUT09MU19LSVRfRVhURU5TSU9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5TRVJWRVJfVE9fUFJPWFksXG4gICAgICAgIHBheWxvYWQ6IFN1cGVySlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sIFwiKlwiKTtcbiAgICB9LFxuICAgIG9uOiAoaGFuZGxlcikgPT4ge1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmRhdGEuc291cmNlID09PSBfX0RFVlRPT0xTX0tJVF9FWFRFTlNJT05fTUVTU0FHSU5HX0VWRU5UX0tFWV9fLlBST1hZX1RPX1NFUlZFUiAmJiBldmVudC5kYXRhLnBheWxvYWQpIHtcbiAgICAgICAgICBoYW5kbGVyKFN1cGVySlNPTi5wYXJzZShldmVudC5kYXRhLnBheWxvYWQpKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBsaXN0ZW5lcik7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbGlzdGVuZXIpO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9pZnJhbWUvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9pZnJhbWUvY2xpZW50LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgaXNCcm93c2VyIGFzIGlzQnJvd3NlcjMgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2lmcmFtZS9jb250ZXh0LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDE4IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG52YXIgX19ERVZUT09MU19LSVRfSUZSQU1FX01FU1NBR0lOR19FVkVOVF9LRVkgPSBcIl9fZGV2dG9vbHMta2l0LWlmcmFtZS1tZXNzYWdpbmctZXZlbnQta2V5X19cIjtcbnZhciBfX0lGUkFNRV9TRVJWRVJfQ09OVEVYVF9fID0gXCJpZnJhbWU6c2VydmVyLWNvbnRleHRcIjtcbmZ1bmN0aW9uIGdldElmcmFtZVNlcnZlckNvbnRleHQoKSB7XG4gIHJldHVybiB0YXJnZXQxOFtfX0lGUkFNRV9TRVJWRVJfQ09OVEVYVF9fXTtcbn1cbmZ1bmN0aW9uIHNldElmcmFtZVNlcnZlckNvbnRleHQoY29udGV4dCkge1xuICB0YXJnZXQxOFtfX0lGUkFNRV9TRVJWRVJfQ09OVEVYVF9fXSA9IGNvbnRleHQ7XG59XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9pZnJhbWUvY2xpZW50LnRzXG5mdW5jdGlvbiBjcmVhdGVJZnJhbWVDbGllbnRDaGFubmVsKCkge1xuICBpZiAoIWlzQnJvd3NlcjMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICAgIH0sXG4gICAgICBvbjogKGhhbmRsZXIpID0+IHtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoU3VwZXJKU09OLnN0cmluZ2lmeSh7XG4gICAgICBldmVudDogX19ERVZUT09MU19LSVRfSUZSQU1FX01FU1NBR0lOR19FVkVOVF9LRVksXG4gICAgICBkYXRhXG4gICAgfSksIFwiKlwiKSxcbiAgICBvbjogKGhhbmRsZXIpID0+IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IFN1cGVySlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gd2luZG93LnBhcmVudCAmJiBwYXJzZWQuZXZlbnQgPT09IF9fREVWVE9PTFNfS0lUX0lGUkFNRV9NRVNTQUdJTkdfRVZFTlRfS0VZKSB7XG4gICAgICAgICAgaGFuZGxlcihwYXJzZWQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIH1cbiAgICB9KVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvaWZyYW1lL3NlcnZlci50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IGlzQnJvd3NlciBhcyBpc0Jyb3dzZXI0IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5mdW5jdGlvbiBjcmVhdGVJZnJhbWVTZXJ2ZXJDaGFubmVsKCkge1xuICBpZiAoIWlzQnJvd3NlcjQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICAgIH0sXG4gICAgICBvbjogKGhhbmRsZXIpID0+IHtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICAgIHZhciBfYTI1O1xuICAgICAgY29uc3QgaWZyYW1lID0gZ2V0SWZyYW1lU2VydmVyQ29udGV4dCgpO1xuICAgICAgKF9hMjUgPSBpZnJhbWUgPT0gbnVsbCA/IHZvaWQgMCA6IGlmcmFtZS5jb250ZW50V2luZG93KSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5wb3N0TWVzc2FnZShTdXBlckpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZXZlbnQ6IF9fREVWVE9PTFNfS0lUX0lGUkFNRV9NRVNTQUdJTkdfRVZFTlRfS0VZLFxuICAgICAgICBkYXRhXG4gICAgICB9KSwgXCIqXCIpO1xuICAgIH0sXG4gICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGdldElmcmFtZVNlcnZlckNvbnRleHQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBTdXBlckpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gKGlmcmFtZSA9PSBudWxsID8gdm9pZCAwIDogaWZyYW1lLmNvbnRlbnRXaW5kb3cpICYmIHBhcnNlZC5ldmVudCA9PT0gX19ERVZUT09MU19LSVRfSUZSQU1FX01FU1NBR0lOR19FVkVOVF9LRVkpIHtcbiAgICAgICAgICAgIGhhbmRsZXIocGFyc2VkLmRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy92aXRlL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvdml0ZS9jbGllbnQudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy92aXRlL2NvbnRleHQudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0MTkgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbnZhciBfX0RFVlRPT0xTX0tJVF9WSVRFX01FU1NBR0lOR19FVkVOVF9LRVkgPSBcIl9fZGV2dG9vbHMta2l0LXZpdGUtbWVzc2FnaW5nLWV2ZW50LWtleV9fXCI7XG52YXIgX19WSVRFX0NMSUVOVF9DT05URVhUX18gPSBcInZpdGU6Y2xpZW50LWNvbnRleHRcIjtcbnZhciBfX1ZJVEVfU0VSVkVSX0NPTlRFWFRfXyA9IFwidml0ZTpzZXJ2ZXItY29udGV4dFwiO1xuZnVuY3Rpb24gZ2V0Vml0ZUNsaWVudENvbnRleHQoKSB7XG4gIHJldHVybiB0YXJnZXQxOVtfX1ZJVEVfQ0xJRU5UX0NPTlRFWFRfX107XG59XG5mdW5jdGlvbiBzZXRWaXRlQ2xpZW50Q29udGV4dChjb250ZXh0KSB7XG4gIHRhcmdldDE5W19fVklURV9DTElFTlRfQ09OVEVYVF9fXSA9IGNvbnRleHQ7XG59XG5mdW5jdGlvbiBnZXRWaXRlU2VydmVyQ29udGV4dCgpIHtcbiAgcmV0dXJuIHRhcmdldDE5W19fVklURV9TRVJWRVJfQ09OVEVYVF9fXTtcbn1cbmZ1bmN0aW9uIHNldFZpdGVTZXJ2ZXJDb250ZXh0KGNvbnRleHQpIHtcbiAgdGFyZ2V0MTlbX19WSVRFX1NFUlZFUl9DT05URVhUX19dID0gY29udGV4dDtcbn1cblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL3ZpdGUvY2xpZW50LnRzXG5mdW5jdGlvbiBjcmVhdGVWaXRlQ2xpZW50Q2hhbm5lbCgpIHtcbiAgY29uc3QgY2xpZW50ID0gZ2V0Vml0ZUNsaWVudENvbnRleHQoKTtcbiAgcmV0dXJuIHtcbiAgICBwb3N0OiAoZGF0YSkgPT4ge1xuICAgICAgY2xpZW50ID09IG51bGwgPyB2b2lkIDAgOiBjbGllbnQuc2VuZChfX0RFVlRPT0xTX0tJVF9WSVRFX01FU1NBR0lOR19FVkVOVF9LRVksIFN1cGVySlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIH0sXG4gICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgICBjbGllbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGNsaWVudC5vbihfX0RFVlRPT0xTX0tJVF9WSVRFX01FU1NBR0lOR19FVkVOVF9LRVksIChldmVudCkgPT4ge1xuICAgICAgICBoYW5kbGVyKFN1cGVySlNPTi5wYXJzZShldmVudCkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvdml0ZS9zZXJ2ZXIudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5mdW5jdGlvbiBjcmVhdGVWaXRlU2VydmVyQ2hhbm5lbCgpIHtcbiAgdmFyIF9hMjU7XG4gIGNvbnN0IHZpdGVTZXJ2ZXIgPSBnZXRWaXRlU2VydmVyQ29udGV4dCgpO1xuICBjb25zdCB3cyA9IChfYTI1ID0gdml0ZVNlcnZlci5ob3QpICE9IG51bGwgPyBfYTI1IDogdml0ZVNlcnZlci53cztcbiAgcmV0dXJuIHtcbiAgICBwb3N0OiAoZGF0YSkgPT4gd3MgPT0gbnVsbCA/IHZvaWQgMCA6IHdzLnNlbmQoX19ERVZUT09MU19LSVRfVklURV9NRVNTQUdJTkdfRVZFTlRfS0VZLCBTdXBlckpTT04uc3RyaW5naWZ5KGRhdGEpKSxcbiAgICBvbjogKGhhbmRsZXIpID0+IHdzID09IG51bGwgPyB2b2lkIDAgOiB3cy5vbihfX0RFVlRPT0xTX0tJVF9WSVRFX01FU1NBR0lOR19FVkVOVF9LRVksIChldmVudCkgPT4ge1xuICAgICAgaGFuZGxlcihTdXBlckpTT04ucGFyc2UoZXZlbnQpKTtcbiAgICB9KVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvd3MvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy93cy9jbGllbnQudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy93cy9jb250ZXh0LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDIwIH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy93cy9zZXJ2ZXIudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9tZXNzYWdpbmcvaW5kZXgudHNcbnZhciBfYTE5LCBfYjE5O1xuKF9iMTkgPSAoX2ExOSA9IHRhcmdldDIxKS5fX1ZVRV9ERVZUT09MU19LSVRfTUVTU0FHRV9DSEFOTkVMU19fKSAhPSBudWxsID8gX2IxOSA6IF9hMTkuX19WVUVfREVWVE9PTFNfS0lUX01FU1NBR0VfQ0hBTk5FTFNfXyA9IFtdO1xudmFyIF9hMjAsIF9iMjA7XG4oX2IyMCA9IChfYTIwID0gdGFyZ2V0MjEpLl9fVlVFX0RFVlRPT0xTX0tJVF9SUENfQ0xJRU5UX18pICE9IG51bGwgPyBfYjIwIDogX2EyMC5fX1ZVRV9ERVZUT09MU19LSVRfUlBDX0NMSUVOVF9fID0gbnVsbDtcbnZhciBfYTIxLCBfYjIxO1xuKF9iMjEgPSAoX2EyMSA9IHRhcmdldDIxKS5fX1ZVRV9ERVZUT09MU19LSVRfUlBDX1NFUlZFUl9fKSAhPSBudWxsID8gX2IyMSA6IF9hMjEuX19WVUVfREVWVE9PTFNfS0lUX1JQQ19TRVJWRVJfXyA9IG51bGw7XG52YXIgX2EyMiwgX2IyMjtcbihfYjIyID0gKF9hMjIgPSB0YXJnZXQyMSkuX19WVUVfREVWVE9PTFNfS0lUX1ZJVEVfUlBDX0NMSUVOVF9fKSAhPSBudWxsID8gX2IyMiA6IF9hMjIuX19WVUVfREVWVE9PTFNfS0lUX1ZJVEVfUlBDX0NMSUVOVF9fID0gbnVsbDtcbnZhciBfYTIzLCBfYjIzO1xuKF9iMjMgPSAoX2EyMyA9IHRhcmdldDIxKS5fX1ZVRV9ERVZUT09MU19LSVRfVklURV9SUENfU0VSVkVSX18pICE9IG51bGwgPyBfYjIzIDogX2EyMy5fX1ZVRV9ERVZUT09MU19LSVRfVklURV9SUENfU0VSVkVSX18gPSBudWxsO1xudmFyIF9hMjQsIF9iMjQ7XG4oX2IyNCA9IChfYTI0ID0gdGFyZ2V0MjEpLl9fVlVFX0RFVlRPT0xTX0tJVF9CUk9BRENBU1RfUlBDX1NFUlZFUl9fKSAhPSBudWxsID8gX2IyNCA6IF9hMjQuX19WVUVfREVWVE9PTFNfS0lUX0JST0FEQ0FTVF9SUENfU0VSVkVSX18gPSBudWxsO1xuZnVuY3Rpb24gc2V0UnBjQ2xpZW50VG9HbG9iYWwocnBjKSB7XG4gIHRhcmdldDIxLl9fVlVFX0RFVlRPT0xTX0tJVF9SUENfQ0xJRU5UX18gPSBycGM7XG59XG5mdW5jdGlvbiBzZXRScGNTZXJ2ZXJUb0dsb2JhbChycGMpIHtcbiAgdGFyZ2V0MjEuX19WVUVfREVWVE9PTFNfS0lUX1JQQ19TRVJWRVJfXyA9IHJwYztcbn1cbmZ1bmN0aW9uIGdldFJwY0NsaWVudCgpIHtcbiAgcmV0dXJuIHRhcmdldDIxLl9fVlVFX0RFVlRPT0xTX0tJVF9SUENfQ0xJRU5UX187XG59XG5mdW5jdGlvbiBnZXRScGNTZXJ2ZXIoKSB7XG4gIHJldHVybiB0YXJnZXQyMS5fX1ZVRV9ERVZUT09MU19LSVRfUlBDX1NFUlZFUl9fO1xufVxuZnVuY3Rpb24gc2V0Vml0ZVJwY0NsaWVudFRvR2xvYmFsKHJwYykge1xuICB0YXJnZXQyMS5fX1ZVRV9ERVZUT09MU19LSVRfVklURV9SUENfQ0xJRU5UX18gPSBycGM7XG59XG5mdW5jdGlvbiBzZXRWaXRlUnBjU2VydmVyVG9HbG9iYWwocnBjKSB7XG4gIHRhcmdldDIxLl9fVlVFX0RFVlRPT0xTX0tJVF9WSVRFX1JQQ19TRVJWRVJfXyA9IHJwYztcbn1cbmZ1bmN0aW9uIGdldFZpdGVScGNDbGllbnQoKSB7XG4gIHJldHVybiB0YXJnZXQyMS5fX1ZVRV9ERVZUT09MU19LSVRfVklURV9SUENfQ0xJRU5UX187XG59XG5mdW5jdGlvbiBnZXRWaXRlUnBjU2VydmVyKCkge1xuICByZXR1cm4gdGFyZ2V0MjEuX19WVUVfREVWVE9PTFNfS0lUX1ZJVEVfUlBDX1NFUlZFUl9fO1xufVxuZnVuY3Rpb24gZ2V0Q2hhbm5lbChwcmVzZXQsIGhvc3QgPSBcImNsaWVudFwiKSB7XG4gIGNvbnN0IGNoYW5uZWwgPSB7XG4gICAgaWZyYW1lOiB7XG4gICAgICBjbGllbnQ6IGNyZWF0ZUlmcmFtZUNsaWVudENoYW5uZWwsXG4gICAgICBzZXJ2ZXI6IGNyZWF0ZUlmcmFtZVNlcnZlckNoYW5uZWxcbiAgICB9W2hvc3RdLFxuICAgIGVsZWN0cm9uOiB7XG4gICAgICBjbGllbnQ6IGNyZWF0ZUVsZWN0cm9uQ2xpZW50Q2hhbm5lbCxcbiAgICAgIHByb3h5OiBjcmVhdGVFbGVjdHJvblByb3h5Q2hhbm5lbCxcbiAgICAgIHNlcnZlcjogY3JlYXRlRWxlY3Ryb25TZXJ2ZXJDaGFubmVsXG4gICAgfVtob3N0XSxcbiAgICB2aXRlOiB7XG4gICAgICBjbGllbnQ6IGNyZWF0ZVZpdGVDbGllbnRDaGFubmVsLFxuICAgICAgc2VydmVyOiBjcmVhdGVWaXRlU2VydmVyQ2hhbm5lbFxuICAgIH1baG9zdF0sXG4gICAgYnJvYWRjYXN0OiB7XG4gICAgICBjbGllbnQ6IGNyZWF0ZUJyb2FkY2FzdENoYW5uZWwsXG4gICAgICBzZXJ2ZXI6IGNyZWF0ZUJyb2FkY2FzdENoYW5uZWxcbiAgICB9W2hvc3RdLFxuICAgIGV4dGVuc2lvbjoge1xuICAgICAgY2xpZW50OiBjcmVhdGVFeHRlbnNpb25DbGllbnRDaGFubmVsLFxuICAgICAgcHJveHk6IGNyZWF0ZUV4dGVuc2lvblByb3h5Q2hhbm5lbCxcbiAgICAgIHNlcnZlcjogY3JlYXRlRXh0ZW5zaW9uU2VydmVyQ2hhbm5lbFxuICAgIH1baG9zdF1cbiAgfVtwcmVzZXRdO1xuICByZXR1cm4gY2hhbm5lbCgpO1xufVxuZnVuY3Rpb24gY3JlYXRlUnBjQ2xpZW50KGZ1bmN0aW9ucywgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHsgY2hhbm5lbDogX2NoYW5uZWwsIG9wdGlvbnM6IF9vcHRpb25zLCBwcmVzZXQgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGNoYW5uZWwgPSBwcmVzZXQgPyBnZXRDaGFubmVsKHByZXNldCkgOiBfY2hhbm5lbDtcbiAgY29uc3QgcnBjID0gY3JlYXRlQmlycGMoZnVuY3Rpb25zLCB7XG4gICAgLi4uX29wdGlvbnMsXG4gICAgLi4uY2hhbm5lbCxcbiAgICB0aW1lb3V0OiAtMVxuICB9KTtcbiAgaWYgKHByZXNldCA9PT0gXCJ2aXRlXCIpIHtcbiAgICBzZXRWaXRlUnBjQ2xpZW50VG9HbG9iYWwocnBjKTtcbiAgICByZXR1cm47XG4gIH1cbiAgc2V0UnBjQ2xpZW50VG9HbG9iYWwocnBjKTtcbiAgcmV0dXJuIHJwYztcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJwY1NlcnZlcihmdW5jdGlvbnMsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7IGNoYW5uZWw6IF9jaGFubmVsLCBvcHRpb25zOiBfb3B0aW9ucywgcHJlc2V0IH0gPSBvcHRpb25zO1xuICBjb25zdCBjaGFubmVsID0gcHJlc2V0ID8gZ2V0Q2hhbm5lbChwcmVzZXQsIFwic2VydmVyXCIpIDogX2NoYW5uZWw7XG4gIGNvbnN0IHJwY1NlcnZlciA9IGdldFJwY1NlcnZlcigpO1xuICBpZiAoIXJwY1NlcnZlcikge1xuICAgIGNvbnN0IGdyb3VwID0gY3JlYXRlQmlycGNHcm91cChmdW5jdGlvbnMsIFtjaGFubmVsXSwge1xuICAgICAgLi4uX29wdGlvbnMsXG4gICAgICB0aW1lb3V0OiAtMVxuICAgIH0pO1xuICAgIGlmIChwcmVzZXQgPT09IFwidml0ZVwiKSB7XG4gICAgICBzZXRWaXRlUnBjU2VydmVyVG9HbG9iYWwoZ3JvdXApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRScGNTZXJ2ZXJUb0dsb2JhbChncm91cCk7XG4gIH0gZWxzZSB7XG4gICAgcnBjU2VydmVyLnVwZGF0ZUNoYW5uZWxzKChjaGFubmVscykgPT4ge1xuICAgICAgY2hhbm5lbHMucHVzaChjaGFubmVsKTtcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlUnBjUHJveHkob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHsgY2hhbm5lbDogX2NoYW5uZWwsIG9wdGlvbnM6IF9vcHRpb25zLCBwcmVzZXQgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGNoYW5uZWwgPSBwcmVzZXQgPyBnZXRDaGFubmVsKHByZXNldCwgXCJwcm94eVwiKSA6IF9jaGFubmVsO1xuICByZXR1cm4gY3JlYXRlQmlycGMoe30sIHtcbiAgICAuLi5fb3B0aW9ucyxcbiAgICAuLi5jaGFubmVsLFxuICAgIHRpbWVvdXQ6IC0xXG4gIH0pO1xufVxuXG4vLyBzcmMvc2hhcmVkL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvc2hhcmVkL2Vudi50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3NoYXJlZC90aW1lLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvc2hhcmVkL3V0aWwudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9yZXBsYWNlci50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL2N1c3RvbS50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIGdldEZ1bmN0aW9uRGV0YWlscyhmdW5jKSB7XG4gIGxldCBzdHJpbmcgPSBcIlwiO1xuICBsZXQgbWF0Y2hlcyA9IG51bGw7XG4gIHRyeSB7XG4gICAgc3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZnVuYyk7XG4gICAgbWF0Y2hlcyA9IFN0cmluZy5wcm90b3R5cGUubWF0Y2guY2FsbChzdHJpbmcsIC9cXChbXFxzXFxTXSo/XFwpLyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICBjb25zdCBtYXRjaCA9IG1hdGNoZXMgJiYgbWF0Y2hlc1swXTtcbiAgY29uc3QgYXJncyA9IHR5cGVvZiBtYXRjaCA9PT0gXCJzdHJpbmdcIiA/IG1hdGNoIDogXCIoPylcIjtcbiAgY29uc3QgbmFtZSA9IHR5cGVvZiBmdW5jLm5hbWUgPT09IFwic3RyaW5nXCIgPyBmdW5jLm5hbWUgOiBcIlwiO1xuICByZXR1cm4ge1xuICAgIF9jdXN0b206IHtcbiAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgIGRpc3BsYXlUZXh0OiBgPHNwYW4gc3R5bGU9XCJvcGFjaXR5Oi44O21hcmdpbi1yaWdodDo1cHg7XCI+ZnVuY3Rpb248L3NwYW4+IDxzcGFuIHN0eWxlPVwid2hpdGUtc3BhY2U6bm93cmFwO1wiPiR7ZXNjYXBlKG5hbWUpfSR7YXJnc308L3NwYW4+YCxcbiAgICAgIHRvb2x0aXBUZXh0OiBzdHJpbmcudHJpbSgpID8gYDxwcmU+JHtzdHJpbmd9PC9wcmU+YCA6IG51bGxcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBnZXRCaWdJbnREZXRhaWxzKHZhbCkge1xuICBjb25zdCBzdHJpbmdpZmllZEJpZ0ludCA9IEJpZ0ludC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpO1xuICByZXR1cm4ge1xuICAgIF9jdXN0b206IHtcbiAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICBkaXNwbGF5VGV4dDogYEJpZ0ludCgke3N0cmluZ2lmaWVkQmlnSW50fSlgLFxuICAgICAgdmFsdWU6IHN0cmluZ2lmaWVkQmlnSW50XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0RGF0ZURldGFpbHModmFsKSB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh2YWwuZ2V0VGltZSgpKTtcbiAgZGF0ZS5zZXRNaW51dGVzKGRhdGUuZ2V0TWludXRlcygpIC0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpKTtcbiAgcmV0dXJuIHtcbiAgICBfY3VzdG9tOiB7XG4gICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgIGRpc3BsYXlUZXh0OiBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCksXG4gICAgICB2YWx1ZTogZGF0ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIC0xKVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldE1hcERldGFpbHModmFsKSB7XG4gIGNvbnN0IGxpc3QgPSBPYmplY3QuZnJvbUVudHJpZXModmFsKTtcbiAgcmV0dXJuIHtcbiAgICBfY3VzdG9tOiB7XG4gICAgICB0eXBlOiBcIm1hcFwiLFxuICAgICAgZGlzcGxheVRleHQ6IFwiTWFwXCIsXG4gICAgICB2YWx1ZTogbGlzdCxcbiAgICAgIHJlYWRPbmx5OiB0cnVlLFxuICAgICAgZmllbGRzOiB7XG4gICAgICAgIGFic3RyYWN0OiB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0U2V0RGV0YWlscyh2YWwpIHtcbiAgY29uc3QgbGlzdCA9IEFycmF5LmZyb20odmFsKTtcbiAgcmV0dXJuIHtcbiAgICBfY3VzdG9tOiB7XG4gICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgZGlzcGxheVRleHQ6IGBTZXRbJHtsaXN0Lmxlbmd0aH1dYCxcbiAgICAgIHZhbHVlOiBsaXN0LFxuICAgICAgcmVhZE9ubHk6IHRydWVcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBnZXRDYXVnaHRHZXR0ZXJzKHN0b3JlKSB7XG4gIGNvbnN0IGdldHRlcnMgPSB7fTtcbiAgY29uc3Qgb3JpZ0dldHRlcnMgPSBzdG9yZS5nZXR0ZXJzIHx8IHt9O1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3JpZ0dldHRlcnMpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnZXR0ZXJzLCBrZXksIHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBnZXQ6ICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gb3JpZ0dldHRlcnNba2V5XTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGdldHRlcnM7XG59XG5mdW5jdGlvbiByZWR1Y2VTdGF0ZUxpc3QobGlzdCkge1xuICBpZiAoIWxpc3QubGVuZ3RoKVxuICAgIHJldHVybiB2b2lkIDA7XG4gIHJldHVybiBsaXN0LnJlZHVjZSgobWFwLCBpdGVtKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gaXRlbS50eXBlIHx8IFwiZGF0YVwiO1xuICAgIGNvbnN0IG9iaiA9IG1hcFtrZXldID0gbWFwW2tleV0gfHwge307XG4gICAgb2JqW2l0ZW0ua2V5XSA9IGl0ZW0udmFsdWU7XG4gICAgcmV0dXJuIG1hcDtcbiAgfSwge30pO1xufVxuZnVuY3Rpb24gbmFtZWROb2RlTWFwVG9PYmplY3QobWFwKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xuICBjb25zdCBsID0gbWFwLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBjb25zdCBub2RlID0gbWFwLml0ZW0oaSk7XG4gICAgcmVzdWx0W25vZGUubmFtZV0gPSBub2RlLnZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBnZXRTdG9yZURldGFpbHMoc3RvcmUpIHtcbiAgcmV0dXJuIHtcbiAgICBfY3VzdG9tOiB7XG4gICAgICB0eXBlOiBcInN0b3JlXCIsXG4gICAgICBkaXNwbGF5VGV4dDogXCJTdG9yZVwiLFxuICAgICAgdmFsdWU6IHtcbiAgICAgICAgc3RhdGU6IHN0b3JlLnN0YXRlLFxuICAgICAgICBnZXR0ZXJzOiBnZXRDYXVnaHRHZXR0ZXJzKHN0b3JlKVxuICAgICAgfSxcbiAgICAgIGZpZWxkczoge1xuICAgICAgICBhYnN0cmFjdDogdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFJvdXRlckRldGFpbHMocm91dGVyKSB7XG4gIHJldHVybiB7XG4gICAgX2N1c3RvbToge1xuICAgICAgdHlwZTogXCJyb3V0ZXJcIixcbiAgICAgIGRpc3BsYXlUZXh0OiBcIlZ1ZVJvdXRlclwiLFxuICAgICAgdmFsdWU6IHtcbiAgICAgICAgb3B0aW9uczogcm91dGVyLm9wdGlvbnMsXG4gICAgICAgIGN1cnJlbnRSb3V0ZTogcm91dGVyLmN1cnJlbnRSb3V0ZVxuICAgICAgfSxcbiAgICAgIGZpZWxkczoge1xuICAgICAgICBhYnN0cmFjdDogdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldEluc3RhbmNlRGV0YWlscyhpbnN0YW5jZSkge1xuICBpZiAoaW5zdGFuY2UuXylcbiAgICBpbnN0YW5jZSA9IGluc3RhbmNlLl87XG4gIGNvbnN0IHN0YXRlID0gcHJvY2Vzc0luc3RhbmNlU3RhdGUoaW5zdGFuY2UpO1xuICByZXR1cm4ge1xuICAgIF9jdXN0b206IHtcbiAgICAgIHR5cGU6IFwiY29tcG9uZW50XCIsXG4gICAgICBpZDogaW5zdGFuY2UuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXyxcbiAgICAgIGRpc3BsYXlUZXh0OiBnZXRJbnN0YW5jZU5hbWUoaW5zdGFuY2UpLFxuICAgICAgdG9vbHRpcFRleHQ6IFwiQ29tcG9uZW50IGluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogcmVkdWNlU3RhdGVMaXN0KHN0YXRlKSxcbiAgICAgIGZpZWxkczoge1xuICAgICAgICBhYnN0cmFjdDogdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldENvbXBvbmVudERlZmluaXRpb25EZXRhaWxzKGRlZmluaXRpb24pIHtcbiAgbGV0IGRpc3BsYXkgPSBnZXRDb21wb25lbnROYW1lKGRlZmluaXRpb24pO1xuICBpZiAoZGlzcGxheSkge1xuICAgIGlmIChkZWZpbml0aW9uLm5hbWUgJiYgZGVmaW5pdGlvbi5fX2ZpbGUpXG4gICAgICBkaXNwbGF5ICs9IGAgPHNwYW4+KCR7ZGVmaW5pdGlvbi5fX2ZpbGV9KTwvc3Bhbj5gO1xuICB9IGVsc2Uge1xuICAgIGRpc3BsYXkgPSBcIjxpPlVua25vd24gQ29tcG9uZW50PC9pPlwiO1xuICB9XG4gIHJldHVybiB7XG4gICAgX2N1c3RvbToge1xuICAgICAgdHlwZTogXCJjb21wb25lbnQtZGVmaW5pdGlvblwiLFxuICAgICAgZGlzcGxheVRleHQ6IGRpc3BsYXksXG4gICAgICB0b29sdGlwVGV4dDogXCJDb21wb25lbnQgZGVmaW5pdGlvblwiLFxuICAgICAgLi4uZGVmaW5pdGlvbi5fX2ZpbGUgPyB7XG4gICAgICAgIGZpbGU6IGRlZmluaXRpb24uX19maWxlXG4gICAgICB9IDoge31cbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBnZXRIVE1MRWxlbWVudERldGFpbHModmFsdWUpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4ge1xuICAgICAgX2N1c3RvbToge1xuICAgICAgICB0eXBlOiBcIkhUTUxFbGVtZW50XCIsXG4gICAgICAgIGRpc3BsYXlUZXh0OiBgPHNwYW4gY2xhc3M9XCJvcGFjaXR5LTMwXCI+Jmx0Ozwvc3Bhbj48c3BhbiBjbGFzcz1cInRleHQtYmx1ZS01MDBcIj4ke3ZhbHVlLnRhZ05hbWUudG9Mb3dlckNhc2UoKX08L3NwYW4+PHNwYW4gY2xhc3M9XCJvcGFjaXR5LTMwXCI+Jmd0Ozwvc3Bhbj5gLFxuICAgICAgICB2YWx1ZTogbmFtZWROb2RlTWFwVG9PYmplY3QodmFsdWUuYXR0cmlidXRlcylcbiAgICAgIH1cbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIF9jdXN0b206IHtcbiAgICAgICAgdHlwZTogXCJIVE1MRWxlbWVudFwiLFxuICAgICAgICBkaXNwbGF5VGV4dDogYDxzcGFuIGNsYXNzPVwidGV4dC1ibHVlLTUwMFwiPiR7U3RyaW5nKHZhbHVlKX08L3NwYW4+YFxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIHRyeUdldFJlZlZhbHVlKHJlZikge1xuICBpZiAoZW5zdXJlUHJvcGVydHlFeGlzdHMocmVmLCBcIl92YWx1ZVwiLCB0cnVlKSkge1xuICAgIHJldHVybiByZWYuX3ZhbHVlO1xuICB9XG4gIGlmIChlbnN1cmVQcm9wZXJ0eUV4aXN0cyhyZWYsIFwidmFsdWVcIiwgdHJ1ZSkpIHtcbiAgICByZXR1cm4gcmVmLnZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBnZXRPYmplY3REZXRhaWxzKG9iamVjdCkge1xuICB2YXIgX2EyNSwgX2IyNSwgX2MsIF9kO1xuICBjb25zdCBpbmZvID0gZ2V0U2V0dXBTdGF0ZVR5cGUob2JqZWN0KTtcbiAgY29uc3QgaXNTdGF0ZSA9IGluZm8ucmVmIHx8IGluZm8uY29tcHV0ZWQgfHwgaW5mby5yZWFjdGl2ZTtcbiAgaWYgKGlzU3RhdGUpIHtcbiAgICBjb25zdCBzdGF0ZVR5cGVOYW1lID0gaW5mby5jb21wdXRlZCA/IFwiQ29tcHV0ZWRcIiA6IGluZm8ucmVmID8gXCJSZWZcIiA6IGluZm8ucmVhY3RpdmUgPyBcIlJlYWN0aXZlXCIgOiBudWxsO1xuICAgIGNvbnN0IHZhbHVlID0gdG9SYXcyKGluZm8ucmVhY3RpdmUgPyBvYmplY3QgOiB0cnlHZXRSZWZWYWx1ZShvYmplY3QpKTtcbiAgICBjb25zdCByYXcgPSBlbnN1cmVQcm9wZXJ0eUV4aXN0cyhvYmplY3QsIFwiZWZmZWN0XCIpID8gKChfYjI1ID0gKF9hMjUgPSBvYmplY3QuZWZmZWN0KSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5yYXcpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LnRvU3RyaW5nKCkpIHx8ICgoX2QgPSAoX2MgPSBvYmplY3QuZWZmZWN0KSA9PSBudWxsID8gdm9pZCAwIDogX2MuZm4pID09IG51bGwgPyB2b2lkIDAgOiBfZC50b1N0cmluZygpKSA6IG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgIF9jdXN0b206IHtcbiAgICAgICAgdHlwZTogc3RhdGVUeXBlTmFtZSA9PSBudWxsID8gdm9pZCAwIDogc3RhdGVUeXBlTmFtZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICBzdGF0ZVR5cGVOYW1lLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgLi4ucmF3ID8geyB0b29sdGlwVGV4dDogYDxzcGFuIGNsYXNzPVwiZm9udC1tb25vXCI+JHtyYXd9PC9zcGFuPmAgfSA6IHt9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBpZiAoZW5zdXJlUHJvcGVydHlFeGlzdHMob2JqZWN0LCBcIl9fYXN5bmNMb2FkZXJcIikgJiYgdHlwZW9mIG9iamVjdC5fX2FzeW5jTG9hZGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX2N1c3RvbToge1xuICAgICAgICB0eXBlOiBcImNvbXBvbmVudC1kZWZpbml0aW9uXCIsXG4gICAgICAgIGRpc3BsYXk6IFwiQXN5bmMgY29tcG9uZW50IGRlZmluaXRpb25cIlxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL3JlcGxhY2VyLnRzXG5mdW5jdGlvbiBzdHJpbmdpZnlSZXBsYWNlcihrZXksIF92YWx1ZSwgZGVwdGgsIHNlZW5JbnN0YW5jZSkge1xuICB2YXIgX2EyNTtcbiAgaWYgKGtleSA9PT0gXCJjb21waWxlck9wdGlvbnNcIilcbiAgICByZXR1cm47XG4gIGNvbnN0IHZhbCA9IHRoaXNba2V5XTtcbiAgY29uc3QgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICBjb25zdCBsID0gdmFsLmxlbmd0aDtcbiAgICBpZiAobCA+IE1BWF9BUlJBWV9TSVpFKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBfaXNBcnJheTogdHJ1ZSxcbiAgICAgICAgbGVuZ3RoOiBsLFxuICAgICAgICBpdGVtczogdmFsLnNsaWNlKDAsIE1BWF9BUlJBWV9TSVpFKVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKHZhbC5sZW5ndGggPiBNQVhfU1RSSU5HX1NJWkUpXG4gICAgICByZXR1cm4gYCR7dmFsLnN1YnN0cmluZygwLCBNQVhfU1RSSU5HX1NJWkUpfS4uLiAoJHt2YWwubGVuZ3RofSB0b3RhbCBsZW5ndGgpYDtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gdmFsO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gVU5ERUZJTkVEO1xuICB9IGVsc2UgaWYgKHZhbCA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XG4gICAgcmV0dXJuIElORklOSVRZO1xuICB9IGVsc2UgaWYgKHZhbCA9PT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKSB7XG4gICAgcmV0dXJuIE5FR0FUSVZFX0lORklOSVRZO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBnZXRGdW5jdGlvbkRldGFpbHModmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBcInN5bWJvbFwiKSB7XG4gICAgcmV0dXJuIGBbbmF0aXZlIFN5bWJvbCAke1N5bWJvbC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpfV1gO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09IFwiYmlnaW50XCIpIHtcbiAgICByZXR1cm4gZ2V0QmlnSW50RGV0YWlscyh2YWwpO1xuICB9IGVsc2UgaWYgKHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgcHJvdG8gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKTtcbiAgICBpZiAocHJvdG8gPT09IFwiW29iamVjdCBNYXBdXCIpIHtcbiAgICAgIHJldHVybiBnZXRNYXBEZXRhaWxzKHZhbCk7XG4gICAgfSBlbHNlIGlmIChwcm90byA9PT0gXCJbb2JqZWN0IFNldF1cIikge1xuICAgICAgcmV0dXJuIGdldFNldERldGFpbHModmFsKTtcbiAgICB9IGVsc2UgaWYgKHByb3RvID09PSBcIltvYmplY3QgUmVnRXhwXVwiKSB7XG4gICAgICByZXR1cm4gYFtuYXRpdmUgUmVnRXhwICR7UmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCl9XWA7XG4gICAgfSBlbHNlIGlmIChwcm90byA9PT0gXCJbb2JqZWN0IERhdGVdXCIpIHtcbiAgICAgIHJldHVybiBnZXREYXRlRGV0YWlscyh2YWwpO1xuICAgIH0gZWxzZSBpZiAocHJvdG8gPT09IFwiW29iamVjdCBFcnJvcl1cIikge1xuICAgICAgcmV0dXJuIGBbbmF0aXZlIEVycm9yICR7dmFsLm1lc3NhZ2V9PD4ke3ZhbC5zdGFja31dYDtcbiAgICB9IGVsc2UgaWYgKGVuc3VyZVByb3BlcnR5RXhpc3RzKHZhbCwgXCJzdGF0ZVwiLCB0cnVlKSAmJiBlbnN1cmVQcm9wZXJ0eUV4aXN0cyh2YWwsIFwiX3ZtXCIsIHRydWUpKSB7XG4gICAgICByZXR1cm4gZ2V0U3RvcmVEZXRhaWxzKHZhbCk7XG4gICAgfSBlbHNlIGlmICh2YWwuY29uc3RydWN0b3IgJiYgdmFsLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiVnVlUm91dGVyXCIpIHtcbiAgICAgIHJldHVybiBnZXRSb3V0ZXJEZXRhaWxzKHZhbCk7XG4gICAgfSBlbHNlIGlmIChpc1Z1ZUluc3RhbmNlKHZhbCkpIHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudFZhbCA9IGdldEluc3RhbmNlRGV0YWlscyh2YWwpO1xuICAgICAgY29uc3QgcGFyZW50SW5zdGFuY2VEZXB0aCA9IHNlZW5JbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogc2Vlbkluc3RhbmNlLmdldCh2YWwpO1xuICAgICAgaWYgKHBhcmVudEluc3RhbmNlRGVwdGggJiYgcGFyZW50SW5zdGFuY2VEZXB0aCA8IGRlcHRoKSB7XG4gICAgICAgIHJldHVybiBgW1tDaXJjdWxhclJlZl1dIDwke2NvbXBvbmVudFZhbC5fY3VzdG9tLmRpc3BsYXlUZXh0fT5gO1xuICAgICAgfVxuICAgICAgc2Vlbkluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBzZWVuSW5zdGFuY2Uuc2V0KHZhbCwgZGVwdGgpO1xuICAgICAgcmV0dXJuIGNvbXBvbmVudFZhbDtcbiAgICB9IGVsc2UgaWYgKGVuc3VyZVByb3BlcnR5RXhpc3RzKHZhbCwgXCJyZW5kZXJcIiwgdHJ1ZSkgJiYgdHlwZW9mIHZhbC5yZW5kZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIGdldENvbXBvbmVudERlZmluaXRpb25EZXRhaWxzKHZhbCk7XG4gICAgfSBlbHNlIGlmICh2YWwuY29uc3RydWN0b3IgJiYgdmFsLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiVk5vZGVcIikge1xuICAgICAgcmV0dXJuIGBbbmF0aXZlIFZOb2RlIDwke3ZhbC50YWd9Pl1gO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIHZhbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICByZXR1cm4gZ2V0SFRNTEVsZW1lbnREZXRhaWxzKHZhbCk7XG4gICAgfSBlbHNlIGlmICgoKF9hMjUgPSB2YWwuY29uc3RydWN0b3IpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1Lm5hbWUpID09PSBcIlN0b3JlXCIgJiYgXCJfd3JhcHBlZEdldHRlcnNcIiBpbiB2YWwpIHtcbiAgICAgIHJldHVybiBcIltvYmplY3QgU3RvcmVdXCI7XG4gICAgfSBlbHNlIGlmIChlbnN1cmVQcm9wZXJ0eUV4aXN0cyh2YWwsIFwiY3VycmVudFJvdXRlXCIsIHRydWUpKSB7XG4gICAgICByZXR1cm4gXCJbb2JqZWN0IFJvdXRlcl1cIjtcbiAgICB9XG4gICAgY29uc3QgY3VzdG9tRGV0YWlscyA9IGdldE9iamVjdERldGFpbHModmFsKTtcbiAgICBpZiAoY3VzdG9tRGV0YWlscyAhPSBudWxsKVxuICAgICAgcmV0dXJuIGN1c3RvbURldGFpbHM7XG4gIH0gZWxzZSBpZiAoTnVtYmVyLmlzTmFOKHZhbCkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIHJldHVybiBzYW5pdGl6ZSh2YWwpO1xufVxuXG4vLyBzcmMvc2hhcmVkL3RyYW5zZmVyLnRzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIE1BWF9TRVJJQUxJWkVEX1NJWkUgPSAyICogMTAyNCAqIDEwMjQ7XG5mdW5jdGlvbiBpc09iamVjdChfZGF0YSwgcHJvdG8pIHtcbiAgcmV0dXJuIHByb3RvID09PSBcIltvYmplY3QgT2JqZWN0XVwiO1xufVxuZnVuY3Rpb24gaXNBcnJheTMoX2RhdGEsIHByb3RvKSB7XG4gIHJldHVybiBwcm90byA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xufVxuZnVuY3Rpb24gaXNWdWVSZWFjdGl2ZUxpbmtOb2RlKG5vZGUpIHtcbiAgdmFyIF9hMjU7XG4gIGNvbnN0IGNvbnN0cnVjdG9yTmFtZSA9IChfYTI1ID0gbm9kZSA9PSBudWxsID8gdm9pZCAwIDogbm9kZS5jb25zdHJ1Y3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUubmFtZTtcbiAgcmV0dXJuIGNvbnN0cnVjdG9yTmFtZSA9PT0gXCJEZXBcIiAmJiBcImFjdGl2ZUxpbmtcIiBpbiBub2RlIHx8IGNvbnN0cnVjdG9yTmFtZSA9PT0gXCJMaW5rXCIgJiYgXCJkZXBcIiBpbiBub2RlO1xufVxuZnVuY3Rpb24gZW5jb2RlKGRhdGEsIHJlcGxhY2VyLCBsaXN0LCBzZWVuLCBkZXB0aCA9IDAsIHNlZW5WdWVJbnN0YW5jZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpIHtcbiAgbGV0IHN0b3JlZDtcbiAgbGV0IGtleTtcbiAgbGV0IHZhbHVlO1xuICBsZXQgaTtcbiAgbGV0IGw7XG4gIGNvbnN0IHNlZW5JbmRleCA9IHNlZW4uZ2V0KGRhdGEpO1xuICBpZiAoc2VlbkluZGV4ICE9IG51bGwpXG4gICAgcmV0dXJuIHNlZW5JbmRleDtcbiAgY29uc3QgaW5kZXggPSBsaXN0Lmxlbmd0aDtcbiAgY29uc3QgcHJvdG8gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZGF0YSk7XG4gIGlmIChpc09iamVjdChkYXRhLCBwcm90bykpIHtcbiAgICBpZiAoaXNWdWVSZWFjdGl2ZUxpbmtOb2RlKGRhdGEpKSB7XG4gICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIHN0b3JlZCA9IHt9O1xuICAgIHNlZW4uc2V0KGRhdGEsIGluZGV4KTtcbiAgICBsaXN0LnB1c2goc3RvcmVkKTtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgZm9yIChpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKGtleSA9PT0gXCJjb21waWxlck9wdGlvbnNcIilcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgdmFsdWUgPSBkYXRhW2tleV07XG4gICAgICBjb25zdCBpc1ZtID0gdmFsdWUgIT0gbnVsbCAmJiBpc09iamVjdCh2YWx1ZSwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGEpKSAmJiBpc1Z1ZUluc3RhbmNlKHZhbHVlKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChyZXBsYWNlcikge1xuICAgICAgICAgIHZhbHVlID0gcmVwbGFjZXIuY2FsbChkYXRhLCBrZXksIHZhbHVlLCBkZXB0aCwgc2VlblZ1ZUluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB2YWx1ZSA9IGU7XG4gICAgICB9XG4gICAgICBzdG9yZWRba2V5XSA9IGVuY29kZSh2YWx1ZSwgcmVwbGFjZXIsIGxpc3QsIHNlZW4sIGRlcHRoICsgMSwgc2VlblZ1ZUluc3RhbmNlKTtcbiAgICAgIGlmIChpc1ZtKSB7XG4gICAgICAgIHNlZW5WdWVJbnN0YW5jZS5kZWxldGUodmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc0FycmF5MyhkYXRhLCBwcm90bykpIHtcbiAgICBzdG9yZWQgPSBbXTtcbiAgICBzZWVuLnNldChkYXRhLCBpbmRleCk7XG4gICAgbGlzdC5wdXNoKHN0b3JlZCk7XG4gICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IGRhdGFbaV07XG4gICAgICAgIGlmIChyZXBsYWNlcilcbiAgICAgICAgICB2YWx1ZSA9IHJlcGxhY2VyLmNhbGwoZGF0YSwgaSwgdmFsdWUsIGRlcHRoLCBzZWVuVnVlSW5zdGFuY2UpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB2YWx1ZSA9IGU7XG4gICAgICB9XG4gICAgICBzdG9yZWRbaV0gPSBlbmNvZGUodmFsdWUsIHJlcGxhY2VyLCBsaXN0LCBzZWVuLCBkZXB0aCArIDEsIHNlZW5WdWVJbnN0YW5jZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxpc3QucHVzaChkYXRhKTtcbiAgfVxuICByZXR1cm4gaW5kZXg7XG59XG5mdW5jdGlvbiBkZWNvZGUobGlzdCwgcmV2aXZlcjIgPSBudWxsKSB7XG4gIGxldCBpID0gbGlzdC5sZW5ndGg7XG4gIGxldCBqLCBrLCBkYXRhLCBrZXksIHZhbHVlLCBwcm90bztcbiAgd2hpbGUgKGktLSkge1xuICAgIGRhdGEgPSBsaXN0W2ldO1xuICAgIHByb3RvID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGEpO1xuICAgIGlmIChwcm90byA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgICAgZm9yIChqID0gMCwgayA9IGtleXMubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgIGtleSA9IGtleXNbal07XG4gICAgICAgIHZhbHVlID0gbGlzdFtkYXRhW2tleV1dO1xuICAgICAgICBpZiAocmV2aXZlcjIpXG4gICAgICAgICAgdmFsdWUgPSByZXZpdmVyMi5jYWxsKGRhdGEsIGtleSwgdmFsdWUpO1xuICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHByb3RvID09PSBcIltvYmplY3QgQXJyYXldXCIpIHtcbiAgICAgIGZvciAoaiA9IDAsIGsgPSBkYXRhLmxlbmd0aDsgaiA8IGs7IGorKykge1xuICAgICAgICB2YWx1ZSA9IGxpc3RbZGF0YVtqXV07XG4gICAgICAgIGlmIChyZXZpdmVyMilcbiAgICAgICAgICB2YWx1ZSA9IHJldml2ZXIyLmNhbGwoZGF0YSwgaiwgdmFsdWUpO1xuICAgICAgICBkYXRhW2pdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBzdHJpbmdpZnlDaXJjdWxhckF1dG9DaHVua3MoZGF0YSwgcmVwbGFjZXIgPSBudWxsLCBzcGFjZSA9IG51bGwpIHtcbiAgbGV0IHJlc3VsdDtcbiAgdHJ5IHtcbiAgICByZXN1bHQgPSBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gSlNPTi5zdHJpbmdpZnkoZGF0YSkgOiBKU09OLnN0cmluZ2lmeShkYXRhLCAoaywgdikgPT4ge1xuICAgICAgdmFyIF9hMjU7XG4gICAgICByZXR1cm4gKF9hMjUgPSByZXBsYWNlciA9PSBudWxsID8gdm9pZCAwIDogcmVwbGFjZXIoaywgdikpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LmNhbGwodGhpcyk7XG4gICAgfSwgc3BhY2UpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmVzdWx0ID0gc3RyaW5naWZ5U3RyaWN0Q2lyY3VsYXJBdXRvQ2h1bmtzKGRhdGEsIHJlcGxhY2VyLCBzcGFjZSk7XG4gIH1cbiAgaWYgKHJlc3VsdC5sZW5ndGggPiBNQVhfU0VSSUFMSVpFRF9TSVpFKSB7XG4gICAgY29uc3QgY2h1bmtDb3VudCA9IE1hdGguY2VpbChyZXN1bHQubGVuZ3RoIC8gTUFYX1NFUklBTElaRURfU0laRSk7XG4gICAgY29uc3QgY2h1bmtzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaHVua0NvdW50OyBpKyspXG4gICAgICBjaHVua3MucHVzaChyZXN1bHQuc2xpY2UoaSAqIE1BWF9TRVJJQUxJWkVEX1NJWkUsIChpICsgMSkgKiBNQVhfU0VSSUFMSVpFRF9TSVpFKSk7XG4gICAgcmV0dXJuIGNodW5rcztcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5U3RyaWN0Q2lyY3VsYXJBdXRvQ2h1bmtzKGRhdGEsIHJlcGxhY2VyID0gbnVsbCwgc3BhY2UgPSBudWxsKSB7XG4gIGNvbnN0IGxpc3QgPSBbXTtcbiAgZW5jb2RlKGRhdGEsIHJlcGxhY2VyLCBsaXN0LCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcbiAgcmV0dXJuIHNwYWNlID8gYCAke0pTT04uc3RyaW5naWZ5KGxpc3QsIG51bGwsIHNwYWNlKX1gIDogYCAke0pTT04uc3RyaW5naWZ5KGxpc3QpfWA7XG59XG5mdW5jdGlvbiBwYXJzZUNpcmN1bGFyQXV0b0NodW5rcyhkYXRhLCByZXZpdmVyMiA9IG51bGwpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpXG4gICAgZGF0YSA9IGRhdGEuam9pbihcIlwiKTtcbiAgY29uc3QgaGFzQ2lyY3VsYXIgPSAvXlxccy8udGVzdChkYXRhKTtcbiAgaWYgKCFoYXNDaXJjdWxhcikge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gSlNPTi5wYXJzZShkYXRhKSA6IEpTT04ucGFyc2UoZGF0YSwgcmV2aXZlcjIpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGxpc3QgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgIGRlY29kZShsaXN0LCByZXZpdmVyMik7XG4gICAgcmV0dXJuIGxpc3RbMF07XG4gIH1cbn1cblxuLy8gc3JjL3NoYXJlZC91dGlsLnRzXG5mdW5jdGlvbiBzdHJpbmdpZnkyKGRhdGEpIHtcbiAgcmV0dXJuIHN0cmluZ2lmeUNpcmN1bGFyQXV0b0NodW5rcyhkYXRhLCBzdHJpbmdpZnlSZXBsYWNlcik7XG59XG5mdW5jdGlvbiBwYXJzZTIoZGF0YSwgcmV2aXZlMiA9IGZhbHNlKSB7XG4gIGlmIChkYXRhID09IHZvaWQgMClcbiAgICByZXR1cm4ge307XG4gIHJldHVybiByZXZpdmUyID8gcGFyc2VDaXJjdWxhckF1dG9DaHVua3MoZGF0YSwgcmV2aXZlcikgOiBwYXJzZUNpcmN1bGFyQXV0b0NodW5rcyhkYXRhKTtcbn1cblxuLy8gc3JjL2luZGV4LnRzXG52YXIgZGV2dG9vbHMgPSB7XG4gIGhvb2ssXG4gIGluaXQ6ICgpID0+IHtcbiAgICBpbml0RGV2VG9vbHMoKTtcbiAgfSxcbiAgZ2V0IGN0eCgpIHtcbiAgICByZXR1cm4gZGV2dG9vbHNDb250ZXh0O1xuICB9LFxuICBnZXQgYXBpKCkge1xuICAgIHJldHVybiBkZXZ0b29sc0NvbnRleHQuYXBpO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgRGV2VG9vbHNDb250ZXh0SG9va0tleXMsXG4gIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMsXG4gIERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5cyxcbiAgSU5GSU5JVFksXG4gIE5BTixcbiAgTkVHQVRJVkVfSU5GSU5JVFksXG4gIFJPVVRFUl9JTkZPX0tFWSxcbiAgUk9VVEVSX0tFWSxcbiAgVU5ERUZJTkVELFxuICBhY3RpdmVBcHBSZWNvcmQsXG4gIGFkZEN1c3RvbUNvbW1hbmQsXG4gIGFkZEN1c3RvbVRhYixcbiAgYWRkRGV2VG9vbHNBcHBSZWNvcmQsXG4gIGFkZERldlRvb2xzUGx1Z2luVG9CdWZmZXIsXG4gIGFkZEluc3BlY3RvcixcbiAgY2FsbENvbm5lY3RlZFVwZGF0ZWRIb29rLFxuICBjYWxsRGV2VG9vbHNQbHVnaW5TZXR1cEZuLFxuICBjYWxsSW5zcGVjdG9yVXBkYXRlZEhvb2ssXG4gIGNhbGxTdGF0ZVVwZGF0ZWRIb29rLFxuICBjcmVhdGVDb21wb25lbnRzRGV2VG9vbHNQbHVnaW4sXG4gIGNyZWF0ZURldlRvb2xzQXBpLFxuICBjcmVhdGVEZXZUb29sc0N0eEhvb2tzLFxuICBjcmVhdGVScGNDbGllbnQsXG4gIGNyZWF0ZVJwY1Byb3h5LFxuICBjcmVhdGVScGNTZXJ2ZXIsXG4gIGRldnRvb2xzLFxuICBkZXZ0b29sc0FwcFJlY29yZHMsXG4gIGRldnRvb2xzQ29udGV4dCxcbiAgZGV2dG9vbHNJbnNwZWN0b3IsXG4gIGRldnRvb2xzUGx1Z2luQnVmZmVyLFxuICBkZXZ0b29sc1JvdXRlcixcbiAgZGV2dG9vbHNSb3V0ZXJJbmZvLFxuICBkZXZ0b29sc1N0YXRlLFxuICBlc2NhcGUsXG4gIGZvcm1hdEluc3BlY3RvclN0YXRlVmFsdWUsXG4gIGdldEFjdGl2ZUluc3BlY3RvcnMsXG4gIGdldERldlRvb2xzRW52LFxuICBnZXRFeHRlbnNpb25DbGllbnRDb250ZXh0LFxuICBnZXRJbnNwZWN0b3IsXG4gIGdldEluc3BlY3RvckFjdGlvbnMsXG4gIGdldEluc3BlY3RvckluZm8sXG4gIGdldEluc3BlY3Rvck5vZGVBY3Rpb25zLFxuICBnZXRJbnNwZWN0b3JTdGF0ZVZhbHVlVHlwZSxcbiAgZ2V0UmF3LFxuICBnZXRScGNDbGllbnQsXG4gIGdldFJwY1NlcnZlcixcbiAgZ2V0Vml0ZVJwY0NsaWVudCxcbiAgZ2V0Vml0ZVJwY1NlcnZlcixcbiAgaW5pdERldlRvb2xzLFxuICBpc1BsYWluT2JqZWN0LFxuICBvbkRldlRvb2xzQ2xpZW50Q29ubmVjdGVkLFxuICBvbkRldlRvb2xzQ29ubmVjdGVkLFxuICBwYXJzZTIgYXMgcGFyc2UsXG4gIHJlZ2lzdGVyRGV2VG9vbHNQbHVnaW4sXG4gIHJlbW92ZUN1c3RvbUNvbW1hbmQsXG4gIHJlbW92ZURldlRvb2xzQXBwUmVjb3JkLFxuICByZW1vdmVSZWdpc3RlcmVkUGx1Z2luQXBwLFxuICByZXNldERldlRvb2xzU3RhdGUsXG4gIHNldEFjdGl2ZUFwcFJlY29yZCxcbiAgc2V0QWN0aXZlQXBwUmVjb3JkSWQsXG4gIHNldERldlRvb2xzRW52LFxuICBzZXRFbGVjdHJvbkNsaWVudENvbnRleHQsXG4gIHNldEVsZWN0cm9uUHJveHlDb250ZXh0LFxuICBzZXRFbGVjdHJvblNlcnZlckNvbnRleHQsXG4gIHNldEV4dGVuc2lvbkNsaWVudENvbnRleHQsXG4gIHNldElmcmFtZVNlcnZlckNvbnRleHQsXG4gIHNldE9wZW5JbkVkaXRvckJhc2VVcmwsXG4gIHNldFJwY1NlcnZlclRvR2xvYmFsLFxuICBzZXRWaXRlQ2xpZW50Q29udGV4dCxcbiAgc2V0Vml0ZVJwY0NsaWVudFRvR2xvYmFsLFxuICBzZXRWaXRlUnBjU2VydmVyVG9HbG9iYWwsXG4gIHNldFZpdGVTZXJ2ZXJDb250ZXh0LFxuICBzZXR1cERldlRvb2xzUGx1Z2luLFxuICBzdHJpbmdpZnkyIGFzIHN0cmluZ2lmeSxcbiAgdG9FZGl0LFxuICB0b1N1Ym1pdCxcbiAgdG9nZ2xlQ2xpZW50Q29ubmVjdGVkLFxuICB0b2dnbGVDb21wb25lbnRJbnNwZWN0b3JFbmFibGVkLFxuICB0b2dnbGVIaWdoUGVyZk1vZGUsXG4gIHVwZGF0ZURldlRvb2xzQ2xpZW50RGV0ZWN0ZWQsXG4gIHVwZGF0ZURldlRvb2xzU3RhdGUsXG4gIHVwZGF0ZVRpbWVsaW5lTGF5ZXJzU3RhdGVcbn07XG4iLCIvKiFcbiAqIHBpbmlhIHYzLjAuMlxuICogKGMpIDIwMjUgRWR1YXJkbyBTYW4gTWFydGluIE1vcm90ZVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cbmltcG9ydCB7IGhhc0luamVjdGlvbkNvbnRleHQsIGluamVjdCwgdG9SYXcsIHdhdGNoLCB1bnJlZiwgbWFya1JhdywgZWZmZWN0U2NvcGUsIHJlZiwgaXNSZWYsIGlzUmVhY3RpdmUsIGdldEN1cnJlbnRTY29wZSwgb25TY29wZURpc3Bvc2UsIGdldEN1cnJlbnRJbnN0YW5jZSwgcmVhY3RpdmUsIHRvUmVmLCBuZXh0VGljaywgY29tcHV0ZWQsIHRvUmVmcyB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBzZXR1cERldnRvb2xzUGx1Z2luIH0gZnJvbSAnQHZ1ZS9kZXZ0b29scy1hcGknO1xuXG4vKipcbiAqIHNldEFjdGl2ZVBpbmlhIG11c3QgYmUgY2FsbGVkIHRvIGhhbmRsZSBTU1IgYXQgdGhlIHRvcCBvZiBmdW5jdGlvbnMgbGlrZVxuICogYGZldGNoYCwgYHNldHVwYCwgYHNlcnZlclByZWZldGNoYCBhbmQgb3RoZXJzXG4gKi9cbmxldCBhY3RpdmVQaW5pYTtcbi8qKlxuICogU2V0cyBvciB1bnNldHMgdGhlIGFjdGl2ZSBwaW5pYS4gVXNlZCBpbiBTU1IgYW5kIGludGVybmFsbHkgd2hlbiBjYWxsaW5nXG4gKiBhY3Rpb25zIGFuZCBnZXR0ZXJzXG4gKlxuICogQHBhcmFtIHBpbmlhIC0gUGluaWEgaW5zdGFuY2VcbiAqL1xuLy8gQHRzLWV4cGVjdC1lcnJvcjogY2Fubm90IGNvbnN0cmFpbiB0aGUgdHlwZSBvZiB0aGUgcmV0dXJuXG5jb25zdCBzZXRBY3RpdmVQaW5pYSA9IChwaW5pYSkgPT4gKGFjdGl2ZVBpbmlhID0gcGluaWEpO1xuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnRseSBhY3RpdmUgcGluaWEgaWYgdGhlcmUgaXMgYW55LlxuICovXG5jb25zdCBnZXRBY3RpdmVQaW5pYSA9ICgpID0+IChoYXNJbmplY3Rpb25Db250ZXh0KCkgJiYgaW5qZWN0KHBpbmlhU3ltYm9sKSkgfHwgYWN0aXZlUGluaWE7XG5jb25zdCBwaW5pYVN5bWJvbCA9ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBTeW1ib2woJ3BpbmlhJykgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBTeW1ib2woKSk7XG5cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxubykge1xuICAgIHJldHVybiAobyAmJlxuICAgICAgICB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pID09PSAnW29iamVjdCBPYmplY3RdJyAmJlxuICAgICAgICB0eXBlb2Ygby50b0pTT04gIT09ICdmdW5jdGlvbicpO1xufVxuLy8gdHlwZSBEZWVwUmVhZG9ubHk8VD4gPSB7IHJlYWRvbmx5IFtQIGluIGtleW9mIFRdOiBEZWVwUmVhZG9ubHk8VFtQXT4gfVxuLy8gVE9ETzogY2FuIHdlIGNoYW5nZSB0aGVzZSB0byBudW1iZXJzP1xuLyoqXG4gKiBQb3NzaWJsZSB0eXBlcyBmb3IgU3Vic2NyaXB0aW9uQ2FsbGJhY2tcbiAqL1xudmFyIE11dGF0aW9uVHlwZTtcbihmdW5jdGlvbiAoTXV0YXRpb25UeXBlKSB7XG4gICAgLyoqXG4gICAgICogRGlyZWN0IG11dGF0aW9uIG9mIHRoZSBzdGF0ZTpcbiAgICAgKlxuICAgICAqIC0gYHN0b3JlLm5hbWUgPSAnbmV3IG5hbWUnYFxuICAgICAqIC0gYHN0b3JlLiRzdGF0ZS5uYW1lID0gJ25ldyBuYW1lJ2BcbiAgICAgKiAtIGBzdG9yZS5saXN0LnB1c2goJ25ldyBpdGVtJylgXG4gICAgICovXG4gICAgTXV0YXRpb25UeXBlW1wiZGlyZWN0XCJdID0gXCJkaXJlY3RcIjtcbiAgICAvKipcbiAgICAgKiBNdXRhdGVkIHRoZSBzdGF0ZSB3aXRoIGAkcGF0Y2hgIGFuZCBhbiBvYmplY3RcbiAgICAgKlxuICAgICAqIC0gYHN0b3JlLiRwYXRjaCh7IG5hbWU6ICduZXdOYW1lJyB9KWBcbiAgICAgKi9cbiAgICBNdXRhdGlvblR5cGVbXCJwYXRjaE9iamVjdFwiXSA9IFwicGF0Y2ggb2JqZWN0XCI7XG4gICAgLyoqXG4gICAgICogTXV0YXRlZCB0aGUgc3RhdGUgd2l0aCBgJHBhdGNoYCBhbmQgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogLSBgc3RvcmUuJHBhdGNoKHN0YXRlID0+IHN0YXRlLm5hbWUgPSAnbmV3TmFtZScpYFxuICAgICAqL1xuICAgIE11dGF0aW9uVHlwZVtcInBhdGNoRnVuY3Rpb25cIl0gPSBcInBhdGNoIGZ1bmN0aW9uXCI7XG4gICAgLy8gbWF5YmUgcmVzZXQ/IGZvciAkc3RhdGUgPSB7fSBhbmQgJHJlc2V0XG59KShNdXRhdGlvblR5cGUgfHwgKE11dGF0aW9uVHlwZSA9IHt9KSk7XG5cbmNvbnN0IElTX0NMSUVOVCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuXG4vKlxuICogRmlsZVNhdmVyLmpzIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIE9yaWdpbmFsbHkgYnkgRWxpIEdyZXksIGFkYXB0ZWQgYXMgYW4gRVNNIG1vZHVsZSBieSBFZHVhcmRvIFNhbiBNYXJ0aW5cbiAqIE1vcm90ZS5cbiAqXG4gKiBMaWNlbnNlIDogTUlUXG4gKi9cbi8vIFRoZSBvbmUgYW5kIG9ubHkgd2F5IG9mIGdldHRpbmcgZ2xvYmFsIHNjb3BlIGluIGFsbCBlbnZpcm9ubWVudHNcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8zMjc3MTgyLzEwMDg5OTlcbmNvbnN0IF9nbG9iYWwgPSAvKiNfX1BVUkVfXyovICgoKSA9PiB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cud2luZG93ID09PSB3aW5kb3dcbiAgICA/IHdpbmRvd1xuICAgIDogdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZlxuICAgICAgICA/IHNlbGZcbiAgICAgICAgOiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWxcbiAgICAgICAgICAgID8gZ2xvYmFsXG4gICAgICAgICAgICA6IHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0J1xuICAgICAgICAgICAgICAgID8gZ2xvYmFsVGhpc1xuICAgICAgICAgICAgICAgIDogeyBIVE1MRWxlbWVudDogbnVsbCB9KSgpO1xuZnVuY3Rpb24gYm9tKGJsb2IsIHsgYXV0b0JvbSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXG4gICAgLy8gbm90ZTogeW91ciBicm93c2VyIHdpbGwgYXV0b21hdGljYWxseSBjb252ZXJ0IFVURi0xNiBVK0ZFRkYgdG8gRUYgQkIgQkZcbiAgICBpZiAoYXV0b0JvbSAmJlxuICAgICAgICAvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChibG9iLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbU3RyaW5nLmZyb21DaGFyQ29kZSgweGZlZmYpLCBibG9iXSwgeyB0eXBlOiBibG9iLnR5cGUgfSk7XG4gICAgfVxuICAgIHJldHVybiBibG9iO1xufVxuZnVuY3Rpb24gZG93bmxvYWQodXJsLCBuYW1lLCBvcHRzKSB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzYXZlQXMoeGhyLnJlc3BvbnNlLCBuYW1lLCBvcHRzKTtcbiAgICB9O1xuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdjb3VsZCBub3QgZG93bmxvYWQgZmlsZScpO1xuICAgIH07XG4gICAgeGhyLnNlbmQoKTtcbn1cbmZ1bmN0aW9uIGNvcnNFbmFibGVkKHVybCkge1xuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIC8vIHVzZSBzeW5jIHRvIGF2b2lkIHBvcHVwIGJsb2NrZXJcbiAgICB4aHIub3BlbignSEVBRCcsIHVybCwgZmFsc2UpO1xuICAgIHRyeSB7XG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7IH1cbiAgICByZXR1cm4geGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8PSAyOTk7XG59XG4vLyBgYS5jbGljaygpYCBkb2Vzbid0IHdvcmsgZm9yIGFsbCBicm93c2VycyAoIzQ2NSlcbmZ1bmN0aW9uIGNsaWNrKG5vZGUpIHtcbiAgICB0cnkge1xuICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBldnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snLCB7XG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZpZXc6IHdpbmRvdyxcbiAgICAgICAgICAgIGRldGFpbDogMCxcbiAgICAgICAgICAgIHNjcmVlblg6IDgwLFxuICAgICAgICAgICAgc2NyZWVuWTogMjAsXG4gICAgICAgICAgICBjbGllbnRYOiA4MCxcbiAgICAgICAgICAgIGNsaWVudFk6IDIwLFxuICAgICAgICAgICAgY3RybEtleTogZmFsc2UsXG4gICAgICAgICAgICBhbHRLZXk6IGZhbHNlLFxuICAgICAgICAgICAgc2hpZnRLZXk6IGZhbHNlLFxuICAgICAgICAgICAgbWV0YUtleTogZmFsc2UsXG4gICAgICAgICAgICBidXR0b246IDAsXG4gICAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgfVxufVxuY29uc3QgX25hdmlnYXRvciA9IHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnID8gbmF2aWdhdG9yIDogeyB1c2VyQWdlbnQ6ICcnIH07XG4vLyBEZXRlY3QgV2ViVmlldyBpbnNpZGUgYSBuYXRpdmUgbWFjT1MgYXBwIGJ5IHJ1bGluZyBvdXQgYWxsIGJyb3dzZXJzXG4vLyBXZSBqdXN0IG5lZWQgdG8gY2hlY2sgZm9yICdTYWZhcmknIGJlY2F1c2UgYWxsIG90aGVyIGJyb3dzZXJzIChiZXNpZGVzIEZpcmVmb3gpIGluY2x1ZGUgdGhhdCB0b29cbi8vIGh0dHBzOi8vd3d3LndoYXRpc215YnJvd3Nlci5jb20vZ3VpZGVzL3RoZS1sYXRlc3QtdXNlci1hZ2VudC9tYWNvc1xuY29uc3QgaXNNYWNPU1dlYlZpZXcgPSAvKiNfX1BVUkVfXyovICgoKSA9PiAvTWFjaW50b3NoLy50ZXN0KF9uYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgIC9BcHBsZVdlYktpdC8udGVzdChfbmF2aWdhdG9yLnVzZXJBZ2VudCkgJiZcbiAgICAhL1NhZmFyaS8udGVzdChfbmF2aWdhdG9yLnVzZXJBZ2VudCkpKCk7XG5jb25zdCBzYXZlQXMgPSAhSVNfQ0xJRU5UXG4gICAgPyAoKSA9PiB7IH0gLy8gbm9vcFxuICAgIDogLy8gVXNlIGRvd25sb2FkIGF0dHJpYnV0ZSBmaXJzdCBpZiBwb3NzaWJsZSAoIzE5MyBMdW1pYSBtb2JpbGUpIHVubGVzcyB0aGlzIGlzIGEgbWFjT1MgV2ViVmlldyBvciBtaW5pIHByb2dyYW1cbiAgICAgICAgdHlwZW9mIEhUTUxBbmNob3JFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgJ2Rvd25sb2FkJyBpbiBIVE1MQW5jaG9yRWxlbWVudC5wcm90b3R5cGUgJiZcbiAgICAgICAgICAgICFpc01hY09TV2ViVmlld1xuICAgICAgICAgICAgPyBkb3dubG9hZFNhdmVBc1xuICAgICAgICAgICAgOiAvLyBVc2UgbXNTYXZlT3JPcGVuQmxvYiBhcyBhIHNlY29uZCBhcHByb2FjaFxuICAgICAgICAgICAgICAgICdtc1NhdmVPck9wZW5CbG9iJyBpbiBfbmF2aWdhdG9yXG4gICAgICAgICAgICAgICAgICAgID8gbXNTYXZlQXNcbiAgICAgICAgICAgICAgICAgICAgOiAvLyBGYWxsYmFjayB0byB1c2luZyBGaWxlUmVhZGVyIGFuZCBhIHBvcHVwXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlU2F2ZXJTYXZlQXM7XG5mdW5jdGlvbiBkb3dubG9hZFNhdmVBcyhibG9iLCBuYW1lID0gJ2Rvd25sb2FkJywgb3B0cykge1xuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYS5kb3dubG9hZCA9IG5hbWU7XG4gICAgYS5yZWwgPSAnbm9vcGVuZXInOyAvLyB0YWJuYWJiaW5nXG4gICAgLy8gVE9ETzogZGV0ZWN0IGNocm9tZSBleHRlbnNpb25zICYgcGFja2FnZWQgYXBwc1xuICAgIC8vIGEudGFyZ2V0ID0gJ19ibGFuaydcbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIFN1cHBvcnQgcmVndWxhciBsaW5rc1xuICAgICAgICBhLmhyZWYgPSBibG9iO1xuICAgICAgICBpZiAoYS5vcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbikge1xuICAgICAgICAgICAgaWYgKGNvcnNFbmFibGVkKGEuaHJlZikpIHtcbiAgICAgICAgICAgICAgICBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGEudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgICAgICAgICAgICAgY2xpY2soYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbGljayhhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gU3VwcG9ydCBibG9ic1xuICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTtcbiAgICAgICAgfSwgNGU0KTsgLy8gNDBzXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xpY2soYSk7XG4gICAgICAgIH0sIDApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1zU2F2ZUFzKGJsb2IsIG5hbWUgPSAnZG93bmxvYWQnLCBvcHRzKSB7XG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoY29yc0VuYWJsZWQoYmxvYikpIHtcbiAgICAgICAgICAgIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIGEuaHJlZiA9IGJsb2I7XG4gICAgICAgICAgICBhLnRhcmdldCA9ICdfYmxhbmsnO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2xpY2soYSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZTogd29ya3Mgb24gd2luZG93c1xuICAgICAgICBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihib20oYmxvYiwgb3B0cyksIG5hbWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGZpbGVTYXZlclNhdmVBcyhibG9iLCBuYW1lLCBvcHRzLCBwb3B1cCkge1xuICAgIC8vIE9wZW4gYSBwb3B1cCBpbW1lZGlhdGVseSBkbyBnbyBhcm91bmQgcG9wdXAgYmxvY2tlclxuICAgIC8vIE1vc3RseSBvbmx5IGF2YWlsYWJsZSBvbiB1c2VyIGludGVyYWN0aW9uIGFuZCB0aGUgZmlsZVJlYWRlciBpcyBhc3luYyBzby4uLlxuICAgIHBvcHVwID0gcG9wdXAgfHwgb3BlbignJywgJ19ibGFuaycpO1xuICAgIGlmIChwb3B1cCkge1xuICAgICAgICBwb3B1cC5kb2N1bWVudC50aXRsZSA9IHBvcHVwLmRvY3VtZW50LmJvZHkuaW5uZXJUZXh0ID0gJ2Rvd25sb2FkaW5nLi4uJztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpO1xuICAgIGNvbnN0IGZvcmNlID0gYmxvYi50eXBlID09PSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcbiAgICBjb25zdCBpc1NhZmFyaSA9IC9jb25zdHJ1Y3Rvci9pLnRlc3QoU3RyaW5nKF9nbG9iYWwuSFRNTEVsZW1lbnQpKSB8fCAnc2FmYXJpJyBpbiBfZ2xvYmFsO1xuICAgIGNvbnN0IGlzQ2hyb21lSU9TID0gL0NyaU9TXFwvW1xcZF0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIGlmICgoaXNDaHJvbWVJT1MgfHwgKGZvcmNlICYmIGlzU2FmYXJpKSB8fCBpc01hY09TV2ViVmlldykgJiZcbiAgICAgICAgdHlwZW9mIEZpbGVSZWFkZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgVVJMc1xuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0IHVybCA9IHJlYWRlci5yZXN1bHQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBwb3B1cCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyByZWFkZXIucmVzdWx0IHR5cGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybCA9IGlzQ2hyb21lSU9TXG4gICAgICAgICAgICAgICAgPyB1cmxcbiAgICAgICAgICAgICAgICA6IHVybC5yZXBsYWNlKC9eZGF0YTpbXjtdKjsvLCAnZGF0YTphdHRhY2htZW50L2ZpbGU7Jyk7XG4gICAgICAgICAgICBpZiAocG9wdXApIHtcbiAgICAgICAgICAgICAgICBwb3B1cC5sb2NhdGlvbi5ocmVmID0gdXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24uYXNzaWduKHVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3B1cCA9IG51bGw7IC8vIHJldmVyc2UtdGFibmFiYmluZyAjNDYwXG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgaWYgKHBvcHVwKVxuICAgICAgICAgICAgcG9wdXAubG9jYXRpb24uYXNzaWduKHVybCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgICAgIHBvcHVwID0gbnVsbDsgLy8gcmV2ZXJzZS10YWJuYWJiaW5nICM0NjBcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIH0sIDRlNCk7IC8vIDQwc1xuICAgIH1cbn1cblxuLyoqXG4gKiBTaG93cyBhIHRvYXN0IG9yIGNvbnNvbGUubG9nXG4gKlxuICogQHBhcmFtIG1lc3NhZ2UgLSBtZXNzYWdlIHRvIGxvZ1xuICogQHBhcmFtIHR5cGUgLSBkaWZmZXJlbnQgY29sb3Igb2YgdGhlIHRvb2x0aXBcbiAqL1xuZnVuY3Rpb24gdG9hc3RNZXNzYWdlKG1lc3NhZ2UsIHR5cGUpIHtcbiAgICBjb25zdCBwaW5pYU1lc3NhZ2UgPSAn8J+NjSAnICsgbWVzc2FnZTtcbiAgICBpZiAodHlwZW9mIF9fVlVFX0RFVlRPT0xTX1RPQVNUX18gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gTm8gbG9uZ2VyIGF2YWlsYWJsZSA6KFxuICAgICAgICBfX1ZVRV9ERVZUT09MU19UT0FTVF9fKHBpbmlhTWVzc2FnZSwgdHlwZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihwaW5pYU1lc3NhZ2UpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSAnd2FybicpIHtcbiAgICAgICAgY29uc29sZS53YXJuKHBpbmlhTWVzc2FnZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhwaW5pYU1lc3NhZ2UpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzUGluaWEobykge1xuICAgIHJldHVybiAnX2EnIGluIG8gJiYgJ2luc3RhbGwnIGluIG87XG59XG5cbi8qKlxuICogVGhpcyBmaWxlIGNvbnRhaW4gZGV2dG9vbHMgYWN0aW9ucywgdGhleSBhcmUgbm90IFBpbmlhIGFjdGlvbnMuXG4gKi9cbi8vIC0tLVxuZnVuY3Rpb24gY2hlY2tDbGlwYm9hcmRBY2Nlc3MoKSB7XG4gICAgaWYgKCEoJ2NsaXBib2FyZCcgaW4gbmF2aWdhdG9yKSkge1xuICAgICAgICB0b2FzdE1lc3NhZ2UoYFlvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIENsaXBib2FyZCBBUElgLCAnZXJyb3InKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJlxuICAgICAgICBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2RvY3VtZW50IGlzIG5vdCBmb2N1c2VkJykpIHtcbiAgICAgICAgdG9hc3RNZXNzYWdlKCdZb3UgbmVlZCB0byBhY3RpdmF0ZSB0aGUgXCJFbXVsYXRlIGEgZm9jdXNlZCBwYWdlXCIgc2V0dGluZyBpbiB0aGUgXCJSZW5kZXJpbmdcIiBwYW5lbCBvZiBkZXZ0b29scy4nLCAnd2FybicpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsQ29weVN0YXRlKHBpbmlhKSB7XG4gICAgaWYgKGNoZWNrQ2xpcGJvYXJkQWNjZXNzKCkpXG4gICAgICAgIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChKU09OLnN0cmluZ2lmeShwaW5pYS5zdGF0ZS52YWx1ZSkpO1xuICAgICAgICB0b2FzdE1lc3NhZ2UoJ0dsb2JhbCBzdGF0ZSBjb3BpZWQgdG8gY2xpcGJvYXJkLicpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGNoZWNrTm90Rm9jdXNlZEVycm9yKGVycm9yKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gc2VyaWFsaXplIHRoZSBzdGF0ZS4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscy5gLCAnZXJyb3InKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsUGFzdGVTdGF0ZShwaW5pYSkge1xuICAgIGlmIChjaGVja0NsaXBib2FyZEFjY2VzcygpKVxuICAgICAgICByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgICAgbG9hZFN0b3Jlc1N0YXRlKHBpbmlhLCBKU09OLnBhcnNlKGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKSkpO1xuICAgICAgICB0b2FzdE1lc3NhZ2UoJ0dsb2JhbCBzdGF0ZSBwYXN0ZWQgZnJvbSBjbGlwYm9hcmQuJyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBkZXNlcmlhbGl6ZSB0aGUgc3RhdGUgZnJvbSBjbGlwYm9hcmQuIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGFjdGlvbkdsb2JhbFNhdmVTdGF0ZShwaW5pYSkge1xuICAgIHRyeSB7XG4gICAgICAgIHNhdmVBcyhuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocGluaWEuc3RhdGUudmFsdWUpXSwge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcsXG4gICAgICAgIH0pLCAncGluaWEtc3RhdGUuanNvbicpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gZXhwb3J0IHRoZSBzdGF0ZSBhcyBKU09OLiBDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLmAsICdlcnJvcicpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5sZXQgZmlsZUlucHV0O1xuZnVuY3Rpb24gZ2V0RmlsZU9wZW5lcigpIHtcbiAgICBpZiAoIWZpbGVJbnB1dCkge1xuICAgICAgICBmaWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBmaWxlSW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICAgICAgZmlsZUlucHV0LmFjY2VwdCA9ICcuanNvbic7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9wZW5GaWxlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgZmlsZUlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZmlsZUlucHV0LmZpbGVzO1xuICAgICAgICAgICAgICAgIGlmICghZmlsZXMpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlcy5pdGVtKDApO1xuICAgICAgICAgICAgICAgIGlmICghZmlsZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyB0ZXh0OiBhd2FpdCBmaWxlLnRleHQoKSwgZmlsZSB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlOiBUT0RPOiBjaGFuZ2VkIGZyb20gNC4zIHRvIDQuNFxuICAgICAgICAgICAgZmlsZUlucHV0Lm9uY2FuY2VsID0gKCkgPT4gcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgIGZpbGVJbnB1dC5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICAgICAgZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gb3BlbkZpbGU7XG59XG5hc3luYyBmdW5jdGlvbiBhY3Rpb25HbG9iYWxPcGVuU3RhdGVGaWxlKHBpbmlhKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3BlbiA9IGdldEZpbGVPcGVuZXIoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlbigpO1xuICAgICAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgeyB0ZXh0LCBmaWxlIH0gPSByZXN1bHQ7XG4gICAgICAgIGxvYWRTdG9yZXNTdGF0ZShwaW5pYSwgSlNPTi5wYXJzZSh0ZXh0KSk7XG4gICAgICAgIHRvYXN0TWVzc2FnZShgR2xvYmFsIHN0YXRlIGltcG9ydGVkIGZyb20gXCIke2ZpbGUubmFtZX1cIi5gKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRvYXN0TWVzc2FnZShgRmFpbGVkIHRvIGltcG9ydCB0aGUgc3RhdGUgZnJvbSBKU09OLiBDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLmAsICdlcnJvcicpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb2FkU3RvcmVzU3RhdGUocGluaWEsIHN0YXRlKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc3RhdGUpIHtcbiAgICAgICAgY29uc3Qgc3RvcmVTdGF0ZSA9IHBpbmlhLnN0YXRlLnZhbHVlW2tleV07XG4gICAgICAgIC8vIHN0b3JlIGlzIGFscmVhZHkgaW5zdGFudGlhdGVkLCBwYXRjaCBpdFxuICAgICAgICBpZiAoc3RvcmVTdGF0ZSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzdG9yZVN0YXRlLCBzdGF0ZVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHN0b3JlIGlzIG5vdCBpbnN0YW50aWF0ZWQsIHNldCB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVba2V5XSA9IHN0YXRlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdERpc3BsYXkoZGlzcGxheSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIF9jdXN0b206IHtcbiAgICAgICAgICAgIGRpc3BsYXksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmNvbnN0IFBJTklBX1JPT1RfTEFCRUwgPSAn8J+NjSBQaW5pYSAocm9vdCknO1xuY29uc3QgUElOSUFfUk9PVF9JRCA9ICdfcm9vdCc7XG5mdW5jdGlvbiBmb3JtYXRTdG9yZUZvckluc3BlY3RvclRyZWUoc3RvcmUpIHtcbiAgICByZXR1cm4gaXNQaW5pYShzdG9yZSlcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBpZDogUElOSUFfUk9PVF9JRCxcbiAgICAgICAgICAgIGxhYmVsOiBQSU5JQV9ST09UX0xBQkVMLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgaWQ6IHN0b3JlLiRpZCxcbiAgICAgICAgICAgIGxhYmVsOiBzdG9yZS4kaWQsXG4gICAgICAgIH07XG59XG5mdW5jdGlvbiBmb3JtYXRTdG9yZUZvckluc3BlY3RvclN0YXRlKHN0b3JlKSB7XG4gICAgaWYgKGlzUGluaWEoc3RvcmUpKSB7XG4gICAgICAgIGNvbnN0IHN0b3JlTmFtZXMgPSBBcnJheS5mcm9tKHN0b3JlLl9zLmtleXMoKSk7XG4gICAgICAgIGNvbnN0IHN0b3JlTWFwID0gc3RvcmUuX3M7XG4gICAgICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICAgICAgc3RhdGU6IHN0b3JlTmFtZXMubWFwKChzdG9yZUlkKSA9PiAoe1xuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGtleTogc3RvcmVJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmUuc3RhdGUudmFsdWVbc3RvcmVJZF0sXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBnZXR0ZXJzOiBzdG9yZU5hbWVzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaWQpID0+IHN0b3JlTWFwLmdldChpZCkuX2dldHRlcnMpXG4gICAgICAgICAgICAgICAgLm1hcCgoaWQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHN0b3JlTWFwLmdldChpZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBrZXk6IGlkLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmUuX2dldHRlcnMucmVkdWNlKChnZXR0ZXJzLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcnNba2V5XSA9IHN0b3JlW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVycztcbiAgICAgICAgICAgICAgICAgICAgfSwge30pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgICAgc3RhdGU6IE9iamVjdC5rZXlzKHN0b3JlLiRzdGF0ZSkubWFwKChrZXkpID0+ICh7XG4gICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHZhbHVlOiBzdG9yZS4kc3RhdGVba2V5XSxcbiAgICAgICAgfSkpLFxuICAgIH07XG4gICAgLy8gYXZvaWQgYWRkaW5nIGVtcHR5IGdldHRlcnNcbiAgICBpZiAoc3RvcmUuX2dldHRlcnMgJiYgc3RvcmUuX2dldHRlcnMubGVuZ3RoKSB7XG4gICAgICAgIHN0YXRlLmdldHRlcnMgPSBzdG9yZS5fZ2V0dGVycy5tYXAoKGdldHRlck5hbWUpID0+ICh7XG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBrZXk6IGdldHRlck5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogc3RvcmVbZ2V0dGVyTmFtZV0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaWYgKHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLnNpemUpIHtcbiAgICAgICAgc3RhdGUuY3VzdG9tUHJvcGVydGllcyA9IEFycmF5LmZyb20oc3RvcmUuX2N1c3RvbVByb3BlcnRpZXMpLm1hcCgoa2V5KSA9PiAoe1xuICAgICAgICAgICAgZWRpdGFibGU6IHRydWUsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB2YWx1ZTogc3RvcmVba2V5XSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGU7XG59XG5mdW5jdGlvbiBmb3JtYXRFdmVudERhdGEoZXZlbnRzKSB7XG4gICAgaWYgKCFldmVudHMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudHMpKSB7XG4gICAgICAgIC8vIFRPRE86IGhhbmRsZSBhZGQgYW5kIGRlbGV0ZSBmb3IgYXJyYXlzIGFuZCBvYmplY3RzXG4gICAgICAgIHJldHVybiBldmVudHMucmVkdWNlKChkYXRhLCBldmVudCkgPT4ge1xuICAgICAgICAgICAgZGF0YS5rZXlzLnB1c2goZXZlbnQua2V5KTtcbiAgICAgICAgICAgIGRhdGEub3BlcmF0aW9ucy5wdXNoKGV2ZW50LnR5cGUpO1xuICAgICAgICAgICAgZGF0YS5vbGRWYWx1ZVtldmVudC5rZXldID0gZXZlbnQub2xkVmFsdWU7XG4gICAgICAgICAgICBkYXRhLm5ld1ZhbHVlW2V2ZW50LmtleV0gPSBldmVudC5uZXdWYWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBvbGRWYWx1ZToge30sXG4gICAgICAgICAgICBrZXlzOiBbXSxcbiAgICAgICAgICAgIG9wZXJhdGlvbnM6IFtdLFxuICAgICAgICAgICAgbmV3VmFsdWU6IHt9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcGVyYXRpb246IGZvcm1hdERpc3BsYXkoZXZlbnRzLnR5cGUpLFxuICAgICAgICAgICAga2V5OiBmb3JtYXREaXNwbGF5KGV2ZW50cy5rZXkpLFxuICAgICAgICAgICAgb2xkVmFsdWU6IGV2ZW50cy5vbGRWYWx1ZSxcbiAgICAgICAgICAgIG5ld1ZhbHVlOiBldmVudHMubmV3VmFsdWUsXG4gICAgICAgIH07XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0TXV0YXRpb25UeXBlKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBNdXRhdGlvblR5cGUuZGlyZWN0OlxuICAgICAgICAgICAgcmV0dXJuICdtdXRhdGlvbic7XG4gICAgICAgIGNhc2UgTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gJyRwYXRjaCc7XG4gICAgICAgIGNhc2UgTXV0YXRpb25UeXBlLnBhdGNoT2JqZWN0OlxuICAgICAgICAgICAgcmV0dXJuICckcGF0Y2gnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICd1bmtub3duJztcbiAgICB9XG59XG5cbi8vIHRpbWVsaW5lIGNhbiBiZSBwYXVzZWQgd2hlbiBkaXJlY3RseSBjaGFuZ2luZyB0aGUgc3RhdGVcbmxldCBpc1RpbWVsaW5lQWN0aXZlID0gdHJ1ZTtcbmNvbnN0IGNvbXBvbmVudFN0YXRlVHlwZXMgPSBbXTtcbmNvbnN0IE1VVEFUSU9OU19MQVlFUl9JRCA9ICdwaW5pYTptdXRhdGlvbnMnO1xuY29uc3QgSU5TUEVDVE9SX0lEID0gJ3BpbmlhJztcbmNvbnN0IHsgYXNzaWduOiBhc3NpZ24kMSB9ID0gT2JqZWN0O1xuLyoqXG4gKiBHZXRzIHRoZSBkaXNwbGF5ZWQgbmFtZSBvZiBhIHN0b3JlIGluIGRldnRvb2xzXG4gKlxuICogQHBhcmFtIGlkIC0gaWQgb2YgdGhlIHN0b3JlXG4gKiBAcmV0dXJucyBhIGZvcm1hdHRlZCBzdHJpbmdcbiAqL1xuY29uc3QgZ2V0U3RvcmVUeXBlID0gKGlkKSA9PiAn8J+NjSAnICsgaWQ7XG4vKipcbiAqIEFkZCB0aGUgcGluaWEgcGx1Z2luIHdpdGhvdXQgYW55IHN0b3JlLiBBbGxvd3MgZGlzcGxheWluZyBhIFBpbmlhIHBsdWdpbiB0YWJcbiAqIGFzIHNvb24gYXMgaXQgaXMgYWRkZWQgdG8gdGhlIGFwcGxpY2F0aW9uLlxuICpcbiAqIEBwYXJhbSBhcHAgLSBWdWUgYXBwbGljYXRpb25cbiAqIEBwYXJhbSBwaW5pYSAtIHBpbmlhIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyUGluaWFEZXZ0b29scyhhcHAsIHBpbmlhKSB7XG4gICAgc2V0dXBEZXZ0b29sc1BsdWdpbih7XG4gICAgICAgIGlkOiAnZGV2LmVzbS5waW5pYScsXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXG4gICAgICAgIGxvZ286ICdodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9sb2dvLnN2ZycsXG4gICAgICAgIHBhY2thZ2VOYW1lOiAncGluaWEnLFxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlcyxcbiAgICAgICAgYXBwLFxuICAgIH0sIChhcGkpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGkubm93ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0b2FzdE1lc3NhZ2UoJ1lvdSBzZWVtIHRvIGJlIHVzaW5nIGFuIG91dGRhdGVkIHZlcnNpb24gb2YgVnVlIERldnRvb2xzLiBBcmUgeW91IHN0aWxsIHVzaW5nIHRoZSBCZXRhIHJlbGVhc2UgaW5zdGVhZCBvZiB0aGUgc3RhYmxlIG9uZT8gWW91IGNhbiBmaW5kIHRoZSBsaW5rcyBhdCBodHRwczovL2RldnRvb2xzLnZ1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBhcGkuYWRkVGltZWxpbmVMYXllcih7XG4gICAgICAgICAgICBpZDogTVVUQVRJT05TX0xBWUVSX0lELFxuICAgICAgICAgICAgbGFiZWw6IGBQaW5pYSDwn42NYCxcbiAgICAgICAgICAgIGNvbG9yOiAweGU1ZGY4OCxcbiAgICAgICAgfSk7XG4gICAgICAgIGFwaS5hZGRJbnNwZWN0b3Ioe1xuICAgICAgICAgICAgaWQ6IElOU1BFQ1RPUl9JRCxcbiAgICAgICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXG4gICAgICAgICAgICBpY29uOiAnc3RvcmFnZScsXG4gICAgICAgICAgICB0cmVlRmlsdGVyUGxhY2Vob2xkZXI6ICdTZWFyY2ggc3RvcmVzJyxcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdjb250ZW50X2NvcHknLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkdsb2JhbENvcHlTdGF0ZShwaW5pYSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdTZXJpYWxpemUgYW5kIGNvcHkgdGhlIHN0YXRlJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvbnRlbnRfcGFzdGUnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFjdGlvbkdsb2JhbFBhc3RlU3RhdGUocGluaWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdSZXBsYWNlIHRoZSBzdGF0ZSB3aXRoIHRoZSBjb250ZW50IG9mIHlvdXIgY2xpcGJvYXJkJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3NhdmUnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkdsb2JhbFNhdmVTdGF0ZShwaW5pYSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdTYXZlIHRoZSBzdGF0ZSBhcyBhIEpTT04gZmlsZScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdmb2xkZXJfb3BlbicsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYWN0aW9uR2xvYmFsT3BlblN0YXRlRmlsZShwaW5pYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ0ltcG9ydCB0aGUgc3RhdGUgZnJvbSBhIEpTT04gZmlsZScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBub2RlQWN0aW9uczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3Jlc3RvcmUnLFxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUmVzZXQgdGhlIHN0YXRlICh3aXRoIFwiJHJlc2V0XCIpJyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAobm9kZUlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChub2RlSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgQ2Fubm90IHJlc2V0IFwiJHtub2RlSWR9XCIgc3RvcmUgYmVjYXVzZSBpdCB3YXNuJ3QgZm91bmQuYCwgJ3dhcm4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdG9yZS4kcmVzZXQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYENhbm5vdCByZXNldCBcIiR7bm9kZUlkfVwiIHN0b3JlIGJlY2F1c2UgaXQgZG9lc24ndCBoYXZlIGEgXCIkcmVzZXRcIiBtZXRob2QgaW1wbGVtZW50ZWQuYCwgJ3dhcm4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLiRyZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgU3RvcmUgXCIke25vZGVJZH1cIiByZXNldC5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGFwaS5vbi5pbnNwZWN0Q29tcG9uZW50KChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm94eSA9IChwYXlsb2FkLmNvbXBvbmVudEluc3RhbmNlICYmXG4gICAgICAgICAgICAgICAgcGF5bG9hZC5jb21wb25lbnRJbnN0YW5jZS5wcm94eSk7XG4gICAgICAgICAgICBpZiAocHJveHkgJiYgcHJveHkuX3BTdG9yZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwaW5pYVN0b3JlcyA9IHBheWxvYWQuY29tcG9uZW50SW5zdGFuY2UucHJveHkuX3BTdG9yZXM7XG4gICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhwaW5pYVN0b3JlcykuZm9yRWFjaCgoc3RvcmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pbnN0YW5jZURhdGEuc3RhdGUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3N0YXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLl9pc09wdGlvbnNBUElcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRvUmF3KHN0b3JlLiRzdGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAncmVzdG9yZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdSZXNldCB0aGUgc3RhdGUgb2YgdGhpcyBzdG9yZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gc3RvcmUuJHJlc2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogLy8gTk9URTogd29ya2Fyb3VuZCB0byB1bndyYXAgdHJhbnNmZXJyZWQgcmVmc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLnJlZHVjZSgoc3RhdGUsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVba2V5XSA9IHN0b3JlLiRzdGF0ZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuX2dldHRlcnMgJiYgc3RvcmUuX2dldHRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICdnZXR0ZXJzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLl9nZXR0ZXJzLnJlZHVjZSgoZ2V0dGVycywga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzW2tleV0gPSBzdG9yZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UganVzdCB3YW50IHRvIHNob3cgaXQgaW4gZGV2dG9vbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcnNba2V5XSA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhcGkub24uZ2V0SW5zcGVjdG9yVHJlZSgocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gSU5TUEVDVE9SX0lEKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0b3JlcyA9IFtwaW5pYV07XG4gICAgICAgICAgICAgICAgc3RvcmVzID0gc3RvcmVzLmNvbmNhdChBcnJheS5mcm9tKHBpbmlhLl9zLnZhbHVlcygpKSk7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5yb290Tm9kZXMgPSAocGF5bG9hZC5maWx0ZXJcbiAgICAgICAgICAgICAgICAgICAgPyBzdG9yZXMuZmlsdGVyKChzdG9yZSkgPT4gJyRpZCcgaW4gc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3RvcmUuJGlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMocGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogUElOSUFfUk9PVF9MQUJFTC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBheWxvYWQuZmlsdGVyLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAgICAgICAgICAgICA6IHN0b3JlcykubWFwKGZvcm1hdFN0b3JlRm9ySW5zcGVjdG9yVHJlZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBFeHBvc2UgcGluaWEgaW5zdGFuY2UgYXMgJHBpbmlhIHRvIHdpbmRvd1xuICAgICAgICBnbG9iYWxUaGlzLiRwaW5pYSA9IHBpbmlhO1xuICAgICAgICBhcGkub24uZ2V0SW5zcGVjdG9yU3RhdGUoKHBheWxvYWQpID0+IHtcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluc3BlY3RlZFN0b3JlID0gcGF5bG9hZC5ub2RlSWQgPT09IFBJTklBX1JPT1RfSURcbiAgICAgICAgICAgICAgICAgICAgPyBwaW5pYVxuICAgICAgICAgICAgICAgICAgICA6IHBpbmlhLl9zLmdldChwYXlsb2FkLm5vZGVJZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnNwZWN0ZWRTdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGNvdWxkIGJlIHRoZSBzZWxlY3RlZCBzdG9yZSByZXN0b3JlZCBmb3IgYSBkaWZmZXJlbnQgcHJvamVjdFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBpdCdzIGJldHRlciBub3QgdG8gc2F5IGFueXRoaW5nIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5zcGVjdGVkU3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhwb3NlIHNlbGVjdGVkIHN0b3JlIGFzICRzdG9yZSB0byB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQubm9kZUlkICE9PSBQSU5JQV9ST09UX0lEKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy4kc3RvcmUgPSB0b1JhdyhpbnNwZWN0ZWRTdG9yZSk7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuc3RhdGUgPSBmb3JtYXRTdG9yZUZvckluc3BlY3RvclN0YXRlKGluc3BlY3RlZFN0b3JlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhcGkub24uZWRpdEluc3BlY3RvclN0YXRlKChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSBJTlNQRUNUT1JfSUQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnNwZWN0ZWRTdG9yZSA9IHBheWxvYWQubm9kZUlkID09PSBQSU5JQV9ST09UX0lEXG4gICAgICAgICAgICAgICAgICAgID8gcGluaWFcbiAgICAgICAgICAgICAgICAgICAgOiBwaW5pYS5fcy5nZXQocGF5bG9hZC5ub2RlSWQpO1xuICAgICAgICAgICAgICAgIGlmICghaW5zcGVjdGVkU3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgc3RvcmUgXCIke3BheWxvYWQubm9kZUlkfVwiIG5vdCBmb3VuZGAsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1BpbmlhKGluc3BlY3RlZFN0b3JlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2Nlc3Mgb25seSB0aGUgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSAxIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhaW5zcGVjdGVkU3RvcmUuX2N1c3RvbVByb3BlcnRpZXMuaGFzKHBhdGhbMF0pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoWzBdIGluIGluc3BlY3RlZFN0b3JlLiRzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCckc3RhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUm9vdCBhY2Nlc3MsIHdlIGNhbiBvbWl0IHRoZSBgLnZhbHVlYCBiZWNhdXNlIHRoZSBkZXZ0b29scyBBUEkgZG9lcyBpdCBmb3IgdXNcbiAgICAgICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCdzdGF0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5zZXQoaW5zcGVjdGVkU3RvcmUsIHBhdGgsIHBheWxvYWQuc3RhdGUudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXBpLm9uLmVkaXRDb21wb25lbnRTdGF0ZSgocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBheWxvYWQudHlwZS5zdGFydHNXaXRoKCfwn42NJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZUlkID0gcGF5bG9hZC50eXBlLnJlcGxhY2UoL17wn42NXFxzKi8sICcnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChzdG9yZUlkKTtcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2FzdE1lc3NhZ2UoYHN0b3JlIFwiJHtzdG9yZUlkfVwiIG5vdCBmb3VuZGAsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgaWYgKHBhdGhbMF0gIT09ICdzdGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgSW52YWxpZCBwYXRoIGZvciBzdG9yZSBcIiR7c3RvcmVJZH1cIjpcXG4ke3BhdGh9XFxuT25seSBzdGF0ZSBjYW4gYmUgbW9kaWZpZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJld3JpdGUgdGhlIGZpcnN0IGVudHJ5IHRvIGJlIGFibGUgdG8gZGlyZWN0bHkgc2V0IHRoZSBzdGF0ZSBhc1xuICAgICAgICAgICAgICAgIC8vIHdlbGwgYXMgYW55IG90aGVyIHBhdGhcbiAgICAgICAgICAgICAgICBwYXRoWzBdID0gJyRzdGF0ZSc7XG4gICAgICAgICAgICAgICAgaXNUaW1lbGluZUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHBheWxvYWQuc2V0KHN0b3JlLCBwYXRoLCBwYXlsb2FkLnN0YXRlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBhZGRTdG9yZVRvRGV2dG9vbHMoYXBwLCBzdG9yZSkge1xuICAgIGlmICghY29tcG9uZW50U3RhdGVUeXBlcy5pbmNsdWRlcyhnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSkpIHtcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlcy5wdXNoKGdldFN0b3JlVHlwZShzdG9yZS4kaWQpKTtcbiAgICB9XG4gICAgc2V0dXBEZXZ0b29sc1BsdWdpbih7XG4gICAgICAgIGlkOiAnZGV2LmVzbS5waW5pYScsXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXG4gICAgICAgIGxvZ286ICdodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9sb2dvLnN2ZycsXG4gICAgICAgIHBhY2thZ2VOYW1lOiAncGluaWEnLFxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlcyxcbiAgICAgICAgYXBwLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgbG9nU3RvcmVDaGFuZ2VzOiB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdOb3RpZnkgYWJvdXQgbmV3L2RlbGV0ZWQgc3RvcmVzJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHVzZUVtb2ppczoge1xuICAgICAgICAgICAgLy8gICBsYWJlbDogJ1VzZSBlbW9qaXMgaW4gbWVzc2FnZXMg4pqh77iPJyxcbiAgICAgICAgICAgIC8vICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgICAgLy8gICBkZWZhdWx0VmFsdWU6IHRydWUsXG4gICAgICAgICAgICAvLyB9LFxuICAgICAgICB9LFxuICAgIH0sIChhcGkpID0+IHtcbiAgICAgICAgLy8gZ3JhY2VmdWxseSBoYW5kbGUgZXJyb3JzXG4gICAgICAgIGNvbnN0IG5vdyA9IHR5cGVvZiBhcGkubm93ID09PSAnZnVuY3Rpb24nID8gYXBpLm5vdy5iaW5kKGFwaSkgOiBEYXRlLm5vdztcbiAgICAgICAgc3RvcmUuJG9uQWN0aW9uKCh7IGFmdGVyLCBvbkVycm9yLCBuYW1lLCBhcmdzIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwSWQgPSBydW5uaW5nQWN0aW9uSWQrKztcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+bqyAnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdzdGFydCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZvcm1hdERpc3BsYXkobmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBncm91cElkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFmdGVyKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+brCAnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvbkVycm9yKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+SpSAnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgICAgIHdhdGNoKCgpID0+IHVucmVmKHN0b3JlW25hbWVdKSwgKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzVGltZWxpbmVBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NoYW5nZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBhY3RpdmVBY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7IGRlZXA6IHRydWUgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdG9yZS4kc3Vic2NyaWJlKCh7IGV2ZW50cywgdHlwZSB9LCBzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xuICAgICAgICAgICAgaWYgKCFpc1RpbWVsaW5lQWN0aXZlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIC8vIHJvb3RTdG9yZS5zdGF0ZVtzdG9yZS5pZF0gPSBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0ge1xuICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBmb3JtYXRNdXRhdGlvblR5cGUodHlwZSksXG4gICAgICAgICAgICAgICAgZGF0YTogYXNzaWduJDEoeyBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpIH0sIGZvcm1hdEV2ZW50RGF0YShldmVudHMpKSxcbiAgICAgICAgICAgICAgICBncm91cElkOiBhY3RpdmVBY3Rpb24sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IE11dGF0aW9uVHlwZS5wYXRjaEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLnN1YnRpdGxlID0gJ+Kkte+4jyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBNdXRhdGlvblR5cGUucGF0Y2hPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBldmVudERhdGEuc3VidGl0bGUgPSAn8J+nqSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudHMgJiYgIUFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5zdWJ0aXRsZSA9IGV2ZW50cy50eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50cykge1xuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5kYXRhWydyYXdFdmVudChzKSddID0ge1xuICAgICAgICAgICAgICAgICAgICBfY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnRGVidWdnZXJFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdyYXcgRGVidWdnZXJFdmVudFtdJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBldmVudHMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50RGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB7IGRldGFjaGVkOiB0cnVlLCBmbHVzaDogJ3N5bmMnIH0pO1xuICAgICAgICBjb25zdCBob3RVcGRhdGUgPSBzdG9yZS5faG90VXBkYXRlO1xuICAgICAgICBzdG9yZS5faG90VXBkYXRlID0gbWFya1JhdygobmV3U3RvcmUpID0+IHtcbiAgICAgICAgICAgIGhvdFVwZGF0ZShuZXdTdG9yZSk7XG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ/CflKUgJyArIHN0b3JlLiRpZCxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdITVIgdXBkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmU6IGZvcm1hdERpc3BsYXkoc3RvcmUuJGlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm86IGZvcm1hdERpc3BsYXkoYEhNUiB1cGRhdGVgKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGRldnRvb2xzIHRvb1xuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7ICRkaXNwb3NlIH0gPSBzdG9yZTtcbiAgICAgICAgc3RvcmUuJGRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAkZGlzcG9zZSgpO1xuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcbiAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYERpc3Bvc2VkIFwiJHtzdG9yZS4kaWR9XCIgc3RvcmUg8J+XkWApO1xuICAgICAgICB9O1xuICAgICAgICAvLyB0cmlnZ2VyIGFuIHVwZGF0ZSBzbyBpdCBjYW4gZGlzcGxheSBuZXcgcmVnaXN0ZXJlZCBzdG9yZXNcbiAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xuICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcbiAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgXCIke3N0b3JlLiRpZH1cIiBzdG9yZSBpbnN0YWxsZWQg8J+GlWApO1xuICAgIH0pO1xufVxubGV0IHJ1bm5pbmdBY3Rpb25JZCA9IDA7XG5sZXQgYWN0aXZlQWN0aW9uO1xuLyoqXG4gKiBQYXRjaGVzIGEgc3RvcmUgdG8gZW5hYmxlIGFjdGlvbiBncm91cGluZyBpbiBkZXZ0b29scyBieSB3cmFwcGluZyB0aGUgc3RvcmUgd2l0aCBhIFByb3h5IHRoYXQgaXMgcGFzc2VkIGFzIHRoZVxuICogY29udGV4dCBvZiBhbGwgYWN0aW9ucywgYWxsb3dpbmcgdXMgdG8gc2V0IGBydW5uaW5nQWN0aW9uYCBvbiBlYWNoIGFjY2VzcyBhbmQgZWZmZWN0aXZlbHkgYXNzb2NpYXRpbmcgYW55IHN0YXRlXG4gKiBtdXRhdGlvbiB0byB0aGUgYWN0aW9uLlxuICpcbiAqIEBwYXJhbSBzdG9yZSAtIHN0b3JlIHRvIHBhdGNoXG4gKiBAcGFyYW0gYWN0aW9uTmFtZXMgLSBsaXN0IG9mIGFjdGlvbnN0IHRvIHBhdGNoXG4gKi9cbmZ1bmN0aW9uIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIGFjdGlvbk5hbWVzLCB3cmFwV2l0aFByb3h5KSB7XG4gICAgLy8gb3JpZ2luYWwgYWN0aW9ucyBvZiB0aGUgc3RvcmUgYXMgdGhleSBhcmUgZ2l2ZW4gYnkgcGluaWEuIFdlIGFyZSBnb2luZyB0byBvdmVycmlkZSB0aGVtXG4gICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbk5hbWVzLnJlZHVjZSgoc3RvcmVBY3Rpb25zLCBhY3Rpb25OYW1lKSA9PiB7XG4gICAgICAgIC8vIHVzZSB0b1JhdyB0byBhdm9pZCB0cmFja2luZyAjNTQxXG4gICAgICAgIHN0b3JlQWN0aW9uc1thY3Rpb25OYW1lXSA9IHRvUmF3KHN0b3JlKVthY3Rpb25OYW1lXTtcbiAgICAgICAgcmV0dXJuIHN0b3JlQWN0aW9ucztcbiAgICB9LCB7fSk7XG4gICAgZm9yIChjb25zdCBhY3Rpb25OYW1lIGluIGFjdGlvbnMpIHtcbiAgICAgICAgc3RvcmVbYWN0aW9uTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyB0aGUgcnVubmluZyBhY3Rpb24gaWQgaXMgaW5jcmVtZW50ZWQgaW4gYSBiZWZvcmUgYWN0aW9uIGhvb2tcbiAgICAgICAgICAgIGNvbnN0IF9hY3Rpb25JZCA9IHJ1bm5pbmdBY3Rpb25JZDtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrZWRTdG9yZSA9IHdyYXBXaXRoUHJveHlcbiAgICAgICAgICAgICAgICA/IG5ldyBQcm94eShzdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQoLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gX2FjdGlvbklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQoLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gX2FjdGlvbklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiBzdG9yZTtcbiAgICAgICAgICAgIC8vIEZvciBTZXR1cCBTdG9yZXMgd2UgbmVlZCBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1hc3luYy1jb250ZXh0XG4gICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSBfYWN0aW9uSWQ7XG4gICAgICAgICAgICBjb25zdCByZXRWYWx1ZSA9IGFjdGlvbnNbYWN0aW9uTmFtZV0uYXBwbHkodHJhY2tlZFN0b3JlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBzYWZlciBhcyBhc3luYyBhY3Rpb25zIGluIFNldHVwIFN0b3JlcyB3b3VsZCBhc3NvY2lhdGUgbXV0YXRpb25zIGRvbmUgb3V0c2lkZSBvZiB0aGUgYWN0aW9uXG4gICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gcmV0VmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBwaW5pYS51c2UoZGV2dG9vbHNQbHVnaW4pXG4gKi9cbmZ1bmN0aW9uIGRldnRvb2xzUGx1Z2luKHsgYXBwLCBzdG9yZSwgb3B0aW9ucyB9KSB7XG4gICAgLy8gSE1SIG1vZHVsZVxuICAgIGlmIChzdG9yZS4kaWQuc3RhcnRzV2l0aCgnX19ob3Q6JykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBkZXRlY3Qgb3B0aW9uIGFwaSB2cyBzZXR1cCBhcGlcbiAgICBzdG9yZS5faXNPcHRpb25zQVBJID0gISFvcHRpb25zLnN0YXRlO1xuICAgIC8vIERvIG5vdCBvdmVyd3JpdGUgYWN0aW9ucyBtb2NrZWQgYnkgQHBpbmlhL3Rlc3RpbmcgKCMyMjk4KVxuICAgIGlmICghc3RvcmUuX3AuX3Rlc3RpbmcpIHtcbiAgICAgICAgcGF0Y2hBY3Rpb25Gb3JHcm91cGluZyhzdG9yZSwgT2JqZWN0LmtleXMob3B0aW9ucy5hY3Rpb25zKSwgc3RvcmUuX2lzT3B0aW9uc0FQSSk7XG4gICAgICAgIC8vIFVwZ3JhZGUgdGhlIEhNUiB0byBhbHNvIHVwZGF0ZSB0aGUgbmV3IGFjdGlvbnNcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxIb3RVcGRhdGUgPSBzdG9yZS5faG90VXBkYXRlO1xuICAgICAgICB0b1JhdyhzdG9yZSkuX2hvdFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXdTdG9yZSkge1xuICAgICAgICAgICAgb3JpZ2luYWxIb3RVcGRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIE9iamVjdC5rZXlzKG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpLCAhIXN0b3JlLl9pc09wdGlvbnNBUEkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhZGRTdG9yZVRvRGV2dG9vbHMoYXBwLCBcbiAgICAvLyBGSVhNRTogaXMgdGhlcmUgYSB3YXkgdG8gYWxsb3cgdGhlIGFzc2lnbm1lbnQgZnJvbSBTdG9yZTxJZCwgUywgRywgQT4gdG8gU3RvcmVHZW5lcmljP1xuICAgIHN0b3JlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUGluaWEgaW5zdGFuY2UgdG8gYmUgdXNlZCBieSB0aGUgYXBwbGljYXRpb25cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGluaWEoKSB7XG4gICAgY29uc3Qgc2NvcGUgPSBlZmZlY3RTY29wZSh0cnVlKTtcbiAgICAvLyBOT1RFOiBoZXJlIHdlIGNvdWxkIGNoZWNrIHRoZSB3aW5kb3cgb2JqZWN0IGZvciBhIHN0YXRlIGFuZCBkaXJlY3RseSBzZXQgaXRcbiAgICAvLyBpZiB0aGVyZSBpcyBhbnl0aGluZyBsaWtlIGl0IHdpdGggVnVlIDMgU1NSXG4gICAgY29uc3Qgc3RhdGUgPSBzY29wZS5ydW4oKCkgPT4gcmVmKHt9KSk7XG4gICAgbGV0IF9wID0gW107XG4gICAgLy8gcGx1Z2lucyBhZGRlZCBiZWZvcmUgY2FsbGluZyBhcHAudXNlKHBpbmlhKVxuICAgIGxldCB0b0JlSW5zdGFsbGVkID0gW107XG4gICAgY29uc3QgcGluaWEgPSBtYXJrUmF3KHtcbiAgICAgICAgaW5zdGFsbChhcHApIHtcbiAgICAgICAgICAgIC8vIHRoaXMgYWxsb3dzIGNhbGxpbmcgdXNlU3RvcmUoKSBvdXRzaWRlIG9mIGEgY29tcG9uZW50IHNldHVwIGFmdGVyXG4gICAgICAgICAgICAvLyBpbnN0YWxsaW5nIHBpbmlhJ3MgcGx1Z2luXG4gICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XG4gICAgICAgICAgICBwaW5pYS5fYSA9IGFwcDtcbiAgICAgICAgICAgIGFwcC5wcm92aWRlKHBpbmlhU3ltYm9sLCBwaW5pYSk7XG4gICAgICAgICAgICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJHBpbmlhID0gcGluaWE7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgaWYgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgICAgICAgICByZWdpc3RlclBpbmlhRGV2dG9vbHMoYXBwLCBwaW5pYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b0JlSW5zdGFsbGVkLmZvckVhY2goKHBsdWdpbikgPT4gX3AucHVzaChwbHVnaW4pKTtcbiAgICAgICAgICAgIHRvQmVJbnN0YWxsZWQgPSBbXTtcbiAgICAgICAgfSxcbiAgICAgICAgdXNlKHBsdWdpbikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9hKSB7XG4gICAgICAgICAgICAgICAgdG9CZUluc3RhbGxlZC5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfcC5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgX3AsXG4gICAgICAgIC8vIGl0J3MgYWN0dWFsbHkgdW5kZWZpbmVkIGhlcmVcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBfYTogbnVsbCxcbiAgICAgICAgX2U6IHNjb3BlLFxuICAgICAgICBfczogbmV3IE1hcCgpLFxuICAgICAgICBzdGF0ZSxcbiAgICB9KTtcbiAgICAvLyBwaW5pYSBkZXZ0b29scyByZWx5IG9uIGRldiBvbmx5IGZlYXR1cmVzIHNvIHRoZXkgY2Fubm90IGJlIGZvcmNlZCB1bmxlc3NcbiAgICAvLyB0aGUgZGV2IGJ1aWxkIG9mIFZ1ZSBpcyB1c2VkLiBBdm9pZCBvbGQgYnJvd3NlcnMgbGlrZSBJRTExLlxuICAgIGlmICgoKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAodHlwZW9mIF9fVlVFX1BST0RfREVWVE9PTFNfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgX19WVUVfUFJPRF9ERVZUT09MU19fKSkgJiYgIShwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSkgJiYgSVNfQ0xJRU5UICYmIHR5cGVvZiBQcm94eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcGluaWEudXNlKGRldnRvb2xzUGx1Z2luKTtcbiAgICB9XG4gICAgcmV0dXJuIHBpbmlhO1xufVxuLyoqXG4gKiBEaXNwb3NlIGEgUGluaWEgaW5zdGFuY2UgYnkgc3RvcHBpbmcgaXRzIGVmZmVjdFNjb3BlIGFuZCByZW1vdmluZyB0aGUgc3RhdGUsIHBsdWdpbnMgYW5kIHN0b3Jlcy4gVGhpcyBpcyBtb3N0bHlcbiAqIHVzZWZ1bCBpbiB0ZXN0cywgd2l0aCBib3RoIGEgdGVzdGluZyBwaW5pYSBvciBhIHJlZ3VsYXIgcGluaWEgYW5kIGluIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSBtdWx0aXBsZSBwaW5pYSBpbnN0YW5jZXMuXG4gKiBPbmNlIGRpc3Bvc2VkLCB0aGUgcGluaWEgaW5zdGFuY2UgY2Fubm90IGJlIHVzZWQgYW55bW9yZS5cbiAqXG4gKiBAcGFyYW0gcGluaWEgLSBwaW5pYSBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBkaXNwb3NlUGluaWEocGluaWEpIHtcbiAgICBwaW5pYS5fZS5zdG9wKCk7XG4gICAgcGluaWEuX3MuY2xlYXIoKTtcbiAgICBwaW5pYS5fcC5zcGxpY2UoMCk7XG4gICAgcGluaWEuc3RhdGUudmFsdWUgPSB7fTtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBub24gdmFsaWRcbiAgICBwaW5pYS5fYSA9IG51bGw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgZnVuY3Rpb24gaXMgYSBgU3RvcmVEZWZpbml0aW9uYC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBvYmplY3QgdG8gdGVzdFxuICogQHJldHVybnMgdHJ1ZSBpZiBgZm5gIGlzIGEgU3RvcmVEZWZpbml0aW9uXG4gKi9cbmNvbnN0IGlzVXNlU3RvcmUgPSAoZm4pID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBmbi4kaWQgPT09ICdzdHJpbmcnO1xufTtcbi8qKlxuICogTXV0YXRlcyBpbiBwbGFjZSBgbmV3U3RhdGVgIHdpdGggYG9sZFN0YXRlYCB0byBfaG90IHVwZGF0ZV8gaXQuIEl0IHdpbGxcbiAqIHJlbW92ZSBhbnkga2V5IG5vdCBleGlzdGluZyBpbiBgbmV3U3RhdGVgIGFuZCByZWN1cnNpdmVseSBtZXJnZSBwbGFpblxuICogb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0gbmV3U3RhdGUgLSBuZXcgc3RhdGUgb2JqZWN0IHRvIGJlIHBhdGNoZWRcbiAqIEBwYXJhbSBvbGRTdGF0ZSAtIG9sZCBzdGF0ZSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHBhdGNoIG5ld1N0YXRlXG4gKiBAcmV0dXJucyAtIG5ld1N0YXRlXG4gKi9cbmZ1bmN0aW9uIHBhdGNoT2JqZWN0KG5ld1N0YXRlLCBvbGRTdGF0ZSkge1xuICAgIC8vIG5vIG5lZWQgdG8gZ28gdGhyb3VnaCBzeW1ib2xzIGJlY2F1c2UgdGhleSBjYW5ub3QgYmUgc2VyaWFsaXplZCBhbnl3YXlcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTdGF0ZSkge1xuICAgICAgICBjb25zdCBzdWJQYXRjaCA9IG9sZFN0YXRlW2tleV07XG4gICAgICAgIC8vIHNraXAgdGhlIHdob2xlIHN1YiB0cmVlXG4gICAgICAgIGlmICghKGtleSBpbiBuZXdTdGF0ZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gbmV3U3RhdGVba2V5XTtcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QodGFyZ2V0VmFsdWUpICYmXG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KHN1YlBhdGNoKSAmJlxuICAgICAgICAgICAgIWlzUmVmKHN1YlBhdGNoKSAmJlxuICAgICAgICAgICAgIWlzUmVhY3RpdmUoc3ViUGF0Y2gpKSB7XG4gICAgICAgICAgICBuZXdTdGF0ZVtrZXldID0gcGF0Y2hPYmplY3QodGFyZ2V0VmFsdWUsIHN1YlBhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIG9iamVjdHMgYXJlIGVpdGhlciBhIGJpdCBtb3JlIGNvbXBsZXggKGUuZy4gcmVmcykgb3IgcHJpbWl0aXZlcywgc28gd2VcbiAgICAgICAgICAgIC8vIGp1c3Qgc2V0IHRoZSB3aG9sZSB0aGluZ1xuICAgICAgICAgICAgbmV3U3RhdGVba2V5XSA9IHN1YlBhdGNoO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdTdGF0ZTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBfYWNjZXB0XyBmdW5jdGlvbiB0byBwYXNzIHRvIGBpbXBvcnQubWV0YS5ob3RgIGluIFZpdGUgYXBwbGljYXRpb25zLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqc1xuICogY29uc3QgdXNlVXNlciA9IGRlZmluZVN0b3JlKC4uLilcbiAqIGlmIChpbXBvcnQubWV0YS5ob3QpIHtcbiAqICAgaW1wb3J0Lm1ldGEuaG90LmFjY2VwdChhY2NlcHRITVJVcGRhdGUodXNlVXNlciwgaW1wb3J0Lm1ldGEuaG90KSlcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBpbml0aWFsVXNlU3RvcmUgLSByZXR1cm4gb2YgdGhlIGRlZmluZVN0b3JlIHRvIGhvdCB1cGRhdGVcbiAqIEBwYXJhbSBob3QgLSBgaW1wb3J0Lm1ldGEuaG90YFxuICovXG5mdW5jdGlvbiBhY2NlcHRITVJVcGRhdGUoaW5pdGlhbFVzZVN0b3JlLCBob3QpIHtcbiAgICAvLyBzdHJpcCBhcyBtdWNoIGFzIHBvc3NpYmxlIGZyb20gaWlmZS5wcm9kXG4gICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IHsgfTtcbiAgICB9XG4gICAgcmV0dXJuIChuZXdNb2R1bGUpID0+IHtcbiAgICAgICAgY29uc3QgcGluaWEgPSBob3QuZGF0YS5waW5pYSB8fCBpbml0aWFsVXNlU3RvcmUuX3BpbmlhO1xuICAgICAgICBpZiAoIXBpbmlhKSB7XG4gICAgICAgICAgICAvLyB0aGlzIHN0b3JlIGlzIHN0aWxsIG5vdCB1c2VkXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJlc2VydmUgdGhlIHBpbmlhIGluc3RhbmNlIGFjcm9zcyBsb2Fkc1xuICAgICAgICBob3QuZGF0YS5waW5pYSA9IHBpbmlhO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnZ290IGRhdGEnLCBuZXdTdG9yZSlcbiAgICAgICAgZm9yIChjb25zdCBleHBvcnROYW1lIGluIG5ld01vZHVsZSkge1xuICAgICAgICAgICAgY29uc3QgdXNlU3RvcmUgPSBuZXdNb2R1bGVbZXhwb3J0TmFtZV07XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2tpbmcgZm9yJywgZXhwb3J0TmFtZSlcbiAgICAgICAgICAgIGlmIChpc1VzZVN0b3JlKHVzZVN0b3JlKSAmJiBwaW5pYS5fcy5oYXModXNlU3RvcmUuJGlkKSkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBY2NlcHRpbmcgdXBkYXRlIGZvcicsIHVzZVN0b3JlLiRpZClcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHVzZVN0b3JlLiRpZDtcbiAgICAgICAgICAgICAgICBpZiAoaWQgIT09IGluaXRpYWxVc2VTdG9yZS4kaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGUgaWQgb2YgdGhlIHN0b3JlIGNoYW5nZWQgZnJvbSBcIiR7aW5pdGlhbFVzZVN0b3JlLiRpZH1cIiB0byBcIiR7aWR9XCIuIFJlbG9hZGluZy5gKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGltcG9ydC5tZXRhLmhvdC5pbnZhbGlkYXRlKClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvdC5pbnZhbGlkYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU3RvcmUgPSBwaW5pYS5fcy5nZXQoaWQpO1xuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdTdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1BpbmlhXTogc2tpcHBpbmcgaG1yIGJlY2F1c2Ugc3RvcmUgZG9lc24ndCBleGlzdCB5ZXRgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1c2VTdG9yZShwaW5pYSwgZXhpc3RpbmdTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCBub29wID0gKCkgPT4geyB9O1xuZnVuY3Rpb24gYWRkU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbnMsIGNhbGxiYWNrLCBkZXRhY2hlZCwgb25DbGVhbnVwID0gbm9vcCkge1xuICAgIHN1YnNjcmlwdGlvbnMucHVzaChjYWxsYmFjayk7XG4gICAgY29uc3QgcmVtb3ZlU3Vic2NyaXB0aW9uID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBpZHggPSBzdWJzY3JpcHRpb25zLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICBpZiAoaWR4ID4gLTEpIHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICBvbkNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKCFkZXRhY2hlZCAmJiBnZXRDdXJyZW50U2NvcGUoKSkge1xuICAgICAgICBvblNjb3BlRGlzcG9zZShyZW1vdmVTdWJzY3JpcHRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaXB0aW9uO1xufVxuZnVuY3Rpb24gdHJpZ2dlclN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucywgLi4uYXJncykge1xuICAgIHN1YnNjcmlwdGlvbnMuc2xpY2UoKS5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xuICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICB9KTtcbn1cblxuY29uc3QgZmFsbGJhY2tSdW5XaXRoQ29udGV4dCA9IChmbikgPT4gZm4oKTtcbi8qKlxuICogTWFya3MgYSBmdW5jdGlvbiBhcyBhbiBhY3Rpb24gZm9yIGAkb25BY3Rpb25gXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgQUNUSU9OX01BUktFUiA9IFN5bWJvbCgpO1xuLyoqXG4gKiBBY3Rpb24gbmFtZSBzeW1ib2wuIEFsbG93cyB0byBhZGQgYSBuYW1lIHRvIGFuIGFjdGlvbiBhZnRlciBkZWZpbmluZyBpdFxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IEFDVElPTl9OQU1FID0gU3ltYm9sKCk7XG5mdW5jdGlvbiBtZXJnZVJlYWN0aXZlT2JqZWN0cyh0YXJnZXQsIHBhdGNoVG9BcHBseSkge1xuICAgIC8vIEhhbmRsZSBNYXAgaW5zdGFuY2VzXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIE1hcCAmJiBwYXRjaFRvQXBwbHkgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgcGF0Y2hUb0FwcGx5LmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHRhcmdldC5zZXQoa2V5LCB2YWx1ZSkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBTZXQgJiYgcGF0Y2hUb0FwcGx5IGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgIC8vIEhhbmRsZSBTZXQgaW5zdGFuY2VzXG4gICAgICAgIHBhdGNoVG9BcHBseS5mb3JFYWNoKHRhcmdldC5hZGQsIHRhcmdldCk7XG4gICAgfVxuICAgIC8vIG5vIG5lZWQgdG8gZ28gdGhyb3VnaCBzeW1ib2xzIGJlY2F1c2UgdGhleSBjYW5ub3QgYmUgc2VyaWFsaXplZCBhbnl3YXlcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwYXRjaFRvQXBwbHkpIHtcbiAgICAgICAgaWYgKCFwYXRjaFRvQXBwbHkuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBzdWJQYXRjaCA9IHBhdGNoVG9BcHBseVtrZXldO1xuICAgICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IHRhcmdldFtrZXldO1xuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdCh0YXJnZXRWYWx1ZSkgJiZcbiAgICAgICAgICAgIGlzUGxhaW5PYmplY3Qoc3ViUGF0Y2gpICYmXG4gICAgICAgICAgICB0YXJnZXQuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxuICAgICAgICAgICAgIWlzUmVmKHN1YlBhdGNoKSAmJlxuICAgICAgICAgICAgIWlzUmVhY3RpdmUoc3ViUGF0Y2gpKSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBoZXJlIEkgd2FudGVkIHRvIHdhcm4gYWJvdXQgaW5jb25zaXN0ZW50IHR5cGVzIGJ1dCBpdCdzIG5vdCBwb3NzaWJsZSBiZWNhdXNlIGluIHNldHVwIHN0b3JlcyBvbmUgbWlnaHRcbiAgICAgICAgICAgIC8vIHN0YXJ0IHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5IGFzIGEgY2VydGFpbiB0eXBlIGUuZy4gYSBNYXAsIGFuZCB0aGVuIGZvciBzb21lIHJlYXNvbiwgZHVyaW5nIFNTUiwgY2hhbmdlIHRoYXRcbiAgICAgICAgICAgIC8vIHRvIGB1bmRlZmluZWRgLiBXaGVuIHRyeWluZyB0byBoeWRyYXRlLCB3ZSB3YW50IHRvIG92ZXJyaWRlIHRoZSBNYXAgd2l0aCBgdW5kZWZpbmVkYC5cbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gbWVyZ2VSZWFjdGl2ZU9iamVjdHModGFyZ2V0VmFsdWUsIHN1YlBhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHN1YlBhdGNoIGlzIGEgdmFsaWQgdmFsdWVcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc3ViUGF0Y2g7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmNvbnN0IHNraXBIeWRyYXRlU3ltYm9sID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgPyBTeW1ib2woJ3BpbmlhOnNraXBIeWRyYXRpb24nKVxuICAgIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gU3ltYm9sKCk7XG4vKipcbiAqIFRlbGxzIFBpbmlhIHRvIHNraXAgdGhlIGh5ZHJhdGlvbiBwcm9jZXNzIG9mIGEgZ2l2ZW4gb2JqZWN0LiBUaGlzIGlzIHVzZWZ1bCBpbiBzZXR1cCBzdG9yZXMgKG9ubHkpIHdoZW4geW91IHJldHVybiBhXG4gKiBzdGF0ZWZ1bCBvYmplY3QgaW4gdGhlIHN0b3JlIGJ1dCBpdCBpc24ndCByZWFsbHkgc3RhdGUuIGUuZy4gcmV0dXJuaW5nIGEgcm91dGVyIGluc3RhbmNlIGluIGEgc2V0dXAgc3RvcmUuXG4gKlxuICogQHBhcmFtIG9iaiAtIHRhcmdldCBvYmplY3RcbiAqIEByZXR1cm5zIG9ialxuICovXG5mdW5jdGlvbiBza2lwSHlkcmF0ZShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgc2tpcEh5ZHJhdGVTeW1ib2wsIHt9KTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgc2hvdWxkIGJlIGh5ZHJhdGVkXG4gKlxuICogQHBhcmFtIG9iaiAtIHRhcmdldCB2YXJpYWJsZVxuICogQHJldHVybnMgdHJ1ZSBpZiBgb2JqYCBzaG91bGQgYmUgaHlkcmF0ZWRcbiAqL1xuZnVuY3Rpb24gc2hvdWxkSHlkcmF0ZShvYmopIHtcbiAgICByZXR1cm4gKCFpc1BsYWluT2JqZWN0KG9iaikgfHxcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHNraXBIeWRyYXRlU3ltYm9sKSk7XG59XG5jb25zdCB7IGFzc2lnbiB9ID0gT2JqZWN0O1xuZnVuY3Rpb24gaXNDb21wdXRlZChvKSB7XG4gICAgcmV0dXJuICEhKGlzUmVmKG8pICYmIG8uZWZmZWN0KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNTdG9yZShpZCwgb3B0aW9ucywgcGluaWEsIGhvdCkge1xuICAgIGNvbnN0IHsgc3RhdGUsIGFjdGlvbnMsIGdldHRlcnMgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGluaWEuc3RhdGUudmFsdWVbaWRdO1xuICAgIGxldCBzdG9yZTtcbiAgICBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICAgICAgaWYgKCFpbml0aWFsU3RhdGUgJiYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgIWhvdCkpIHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVbaWRdID0gc3RhdGUgPyBzdGF0ZSgpIDoge307XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXZvaWQgY3JlYXRpbmcgYSBzdGF0ZSBpbiBwaW5pYS5zdGF0ZS52YWx1ZVxuICAgICAgICBjb25zdCBsb2NhbFN0YXRlID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdFxuICAgICAgICAgICAgPyAvLyB1c2UgcmVmKCkgdG8gdW53cmFwIHJlZnMgaW5zaWRlIHN0YXRlIFRPRE86IGNoZWNrIGlmIHRoaXMgaXMgc3RpbGwgbmVjZXNzYXJ5XG4gICAgICAgICAgICAgICAgdG9SZWZzKHJlZihzdGF0ZSA/IHN0YXRlKCkgOiB7fSkudmFsdWUpXG4gICAgICAgICAgICA6IHRvUmVmcyhwaW5pYS5zdGF0ZS52YWx1ZVtpZF0pO1xuICAgICAgICByZXR1cm4gYXNzaWduKGxvY2FsU3RhdGUsIGFjdGlvbnMsIE9iamVjdC5rZXlzKGdldHRlcnMgfHwge30pLnJlZHVjZSgoY29tcHV0ZWRHZXR0ZXJzLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5hbWUgaW4gbG9jYWxTdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgW/CfjY1dOiBBIGdldHRlciBjYW5ub3QgaGF2ZSB0aGUgc2FtZSBuYW1lIGFzIGFub3RoZXIgc3RhdGUgcHJvcGVydHkuIFJlbmFtZSBvbmUgb2YgdGhlbS4gRm91bmQgd2l0aCBcIiR7bmFtZX1cIiBpbiBzdG9yZSBcIiR7aWR9XCIuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wdXRlZEdldHRlcnNbbmFtZV0gPSBtYXJrUmF3KGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XG4gICAgICAgICAgICAgICAgLy8gaXQgd2FzIGNyZWF0ZWQganVzdCBiZWZvcmVcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChpZCk7XG4gICAgICAgICAgICAgICAgLy8gYWxsb3cgY3Jvc3MgdXNpbmcgc3RvcmVzXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBnZXR0ZXJzIVtuYW1lXS5jYWxsKGNvbnRleHQsIGNvbnRleHQpXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYXZvaWQgcmVhZGluZyB0aGUgZ2V0dGVyIHdoaWxlIGFzc2lnbmluZyB3aXRoIGEgZ2xvYmFsIHZhcmlhYmxlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldHRlcnNbbmFtZV0uY2FsbChzdG9yZSwgc3RvcmUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVkR2V0dGVycztcbiAgICAgICAgfSwge30pKTtcbiAgICB9XG4gICAgc3RvcmUgPSBjcmVhdGVTZXR1cFN0b3JlKGlkLCBzZXR1cCwgb3B0aW9ucywgcGluaWEsIGhvdCwgdHJ1ZSk7XG4gICAgcmV0dXJuIHN0b3JlO1xufVxuZnVuY3Rpb24gY3JlYXRlU2V0dXBTdG9yZSgkaWQsIHNldHVwLCBvcHRpb25zID0ge30sIHBpbmlhLCBob3QsIGlzT3B0aW9uc1N0b3JlKSB7XG4gICAgbGV0IHNjb3BlO1xuICAgIGNvbnN0IG9wdGlvbnNGb3JQbHVnaW4gPSBhc3NpZ24oeyBhY3Rpb25zOiB7fSB9LCBvcHRpb25zKTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFwaW5pYS5fZS5hY3RpdmUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQaW5pYSBkZXN0cm95ZWQnKTtcbiAgICB9XG4gICAgLy8gd2F0Y2hlciBvcHRpb25zIGZvciAkc3Vic2NyaWJlXG4gICAgY29uc3QgJHN1YnNjcmliZU9wdGlvbnMgPSB7IGRlZXA6IHRydWUgfTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgJHN1YnNjcmliZU9wdGlvbnMub25UcmlnZ2VyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgaWYgKGlzTGlzdGVuaW5nKSB7XG4gICAgICAgICAgICAgICAgZGVidWdnZXJFdmVudHMgPSBldmVudDtcbiAgICAgICAgICAgICAgICAvLyBhdm9pZCB0cmlnZ2VyaW5nIHRoaXMgd2hpbGUgdGhlIHN0b3JlIGlzIGJlaW5nIGJ1aWx0IGFuZCB0aGUgc3RhdGUgaXMgYmVpbmcgc2V0IGluIHBpbmlhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0xpc3RlbmluZyA9PSBmYWxzZSAmJiAhc3RvcmUuX2hvdFVwZGF0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gbGV0IHBhdGNoIHNlbmQgYWxsIHRoZSBldmVudHMgdG9nZXRoZXIgbGF0ZXJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRlYnVnZ2VyRXZlbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlckV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfjY0gZGVidWdnZXJFdmVudHMgc2hvdWxkIGJlIGFuIGFycmF5LiBUaGlzIGlzIG1vc3QgbGlrZWx5IGFuIGludGVybmFsIFBpbmlhIGJ1Zy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIGludGVybmFsIHN0YXRlXG4gICAgbGV0IGlzTGlzdGVuaW5nOyAvLyBzZXQgdG8gdHJ1ZSBhdCB0aGUgZW5kXG4gICAgbGV0IGlzU3luY0xpc3RlbmluZzsgLy8gc2V0IHRvIHRydWUgYXQgdGhlIGVuZFxuICAgIGxldCBzdWJzY3JpcHRpb25zID0gW107XG4gICAgbGV0IGFjdGlvblN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICBsZXQgZGVidWdnZXJFdmVudHM7XG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGluaWEuc3RhdGUudmFsdWVbJGlkXTtcbiAgICAvLyBhdm9pZCBzZXR0aW5nIHRoZSBzdGF0ZSBmb3Igb3B0aW9uIHN0b3JlcyBpZiBpdCBpcyBzZXRcbiAgICAvLyBieSB0aGUgc2V0dXBcbiAgICBpZiAoIWlzT3B0aW9uc1N0b3JlICYmICFpbml0aWFsU3RhdGUgJiYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgIWhvdCkpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0gPSB7fTtcbiAgICB9XG4gICAgY29uc3QgaG90U3RhdGUgPSByZWYoe30pO1xuICAgIC8vIGF2b2lkIHRyaWdnZXJpbmcgdG9vIG1hbnkgbGlzdGVuZXJzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3BpbmlhL2lzc3Vlcy8xMTI5XG4gICAgbGV0IGFjdGl2ZUxpc3RlbmVyO1xuICAgIGZ1bmN0aW9uICRwYXRjaChwYXJ0aWFsU3RhdGVPck11dGF0b3IpIHtcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbk11dGF0aW9uO1xuICAgICAgICBpc0xpc3RlbmluZyA9IGlzU3luY0xpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICAvLyByZXNldCB0aGUgZGVidWdnZXIgZXZlbnRzIHNpbmNlIHBhdGNoZXMgYXJlIHN5bmNcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgZGVidWdnZXJFdmVudHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHBhcnRpYWxTdGF0ZU9yTXV0YXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcGFydGlhbFN0YXRlT3JNdXRhdG9yKHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0pO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTXV0YXRpb24gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWVyZ2VSZWFjdGl2ZU9iamVjdHMocGluaWEuc3RhdGUudmFsdWVbJGlkXSwgcGFydGlhbFN0YXRlT3JNdXRhdG9yKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbk11dGF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCxcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBwYXJ0aWFsU3RhdGVPck11dGF0b3IsXG4gICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG15TGlzdGVuZXJJZCA9IChhY3RpdmVMaXN0ZW5lciA9IFN5bWJvbCgpKTtcbiAgICAgICAgbmV4dFRpY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChhY3RpdmVMaXN0ZW5lciA9PT0gbXlMaXN0ZW5lcklkKSB7XG4gICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBwYXVzZWQgdGhlIHdhdGNoZXIsIHdlIG5lZWQgdG8gbWFudWFsbHkgY2FsbCB0aGUgc3Vic2NyaXB0aW9uc1xuICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhzdWJzY3JpcHRpb25zLCBzdWJzY3JpcHRpb25NdXRhdGlvbiwgcGluaWEuc3RhdGUudmFsdWVbJGlkXSk7XG4gICAgfVxuICAgIGNvbnN0ICRyZXNldCA9IGlzT3B0aW9uc1N0b3JlXG4gICAgICAgID8gZnVuY3Rpb24gJHJlc2V0KCkge1xuICAgICAgICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0gc3RhdGUgPyBzdGF0ZSgpIDoge307XG4gICAgICAgICAgICAvLyB3ZSB1c2UgYSBwYXRjaCB0byBncm91cCBhbGwgY2hhbmdlcyBpbnRvIG9uZSBzaW5nbGUgc3Vic2NyaXB0aW9uXG4gICAgICAgICAgICB0aGlzLiRwYXRjaCgoJHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRklYTUU6IHNob3VsZG4ndCBlcnJvcj9cbiAgICAgICAgICAgICAgICBhc3NpZ24oJHN0YXRlLCBuZXdTdGF0ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDwn42NOiBTdG9yZSBcIiR7JGlkfVwiIGlzIGJ1aWx0IHVzaW5nIHRoZSBzZXR1cCBzeW50YXggYW5kIGRvZXMgbm90IGltcGxlbWVudCAkcmVzZXQoKS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBub29wO1xuICAgIGZ1bmN0aW9uICRkaXNwb3NlKCkge1xuICAgICAgICBzY29wZS5zdG9wKCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICAgICAgYWN0aW9uU3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICBwaW5pYS5fcy5kZWxldGUoJGlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIHRoYXQgd3JhcHMgZnVuY3Rpb24gc28gaXQgY2FuIGJlIHRyYWNrZWQgd2l0aCAkb25BY3Rpb25cbiAgICAgKiBAcGFyYW0gZm4gLSBhY3Rpb24gdG8gd3JhcFxuICAgICAqIEBwYXJhbSBuYW1lIC0gbmFtZSBvZiB0aGUgYWN0aW9uXG4gICAgICovXG4gICAgY29uc3QgYWN0aW9uID0gKGZuLCBuYW1lID0gJycpID0+IHtcbiAgICAgICAgaWYgKEFDVElPTl9NQVJLRVIgaW4gZm4pIHtcbiAgICAgICAgICAgIGZuW0FDVElPTl9OQU1FXSA9IG5hbWU7XG4gICAgICAgICAgICByZXR1cm4gZm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlZEFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBjb25zdCBhZnRlckNhbGxiYWNrTGlzdCA9IFtdO1xuICAgICAgICAgICAgY29uc3Qgb25FcnJvckNhbGxiYWNrTGlzdCA9IFtdO1xuICAgICAgICAgICAgZnVuY3Rpb24gYWZ0ZXIoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBhZnRlckNhbGxiYWNrTGlzdC5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBvbkVycm9yQ2FsbGJhY2tMaXN0LnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoYWN0aW9uU3Vic2NyaXB0aW9ucywge1xuICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgbmFtZTogd3JhcHBlZEFjdGlvbltBQ1RJT05fTkFNRV0sXG4gICAgICAgICAgICAgICAgc3RvcmUsXG4gICAgICAgICAgICAgICAgYWZ0ZXIsXG4gICAgICAgICAgICAgICAgb25FcnJvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IHJldDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gZm4uYXBwbHkodGhpcyAmJiB0aGlzLiRpZCA9PT0gJGlkID8gdGhpcyA6IHN0b3JlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc3luYyBlcnJvcnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKG9uRXJyb3JDYWxsYmFja0xpc3QsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldFxuICAgICAgICAgICAgICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoYWZ0ZXJDYWxsYmFja0xpc3QsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMob25FcnJvckNhbGxiYWNrTGlzdCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhZnRlciBjYWxsYmFja3NcbiAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKGFmdGVyQ2FsbGJhY2tMaXN0LCByZXQpO1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgICAgd3JhcHBlZEFjdGlvbltBQ1RJT05fTUFSS0VSXSA9IHRydWU7XG4gICAgICAgIHdyYXBwZWRBY3Rpb25bQUNUSU9OX05BTUVdID0gbmFtZTsgLy8gd2lsbCBiZSBzZXQgbGF0ZXJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UgYXJlIGludGVudGlvbmFsbHkgbGltaXRpbmcgdGhlIHJldHVybmVkIHR5cGUgdG8ganVzdCBGblxuICAgICAgICAvLyBiZWNhdXNlIGFsbCB0aGUgYWRkZWQgcHJvcGVydGllcyBhcmUgaW50ZXJuYWxzIHRoYXQgYXJlIGV4cG9zZWQgdGhyb3VnaCBgJG9uQWN0aW9uKClgIG9ubHlcbiAgICAgICAgcmV0dXJuIHdyYXBwZWRBY3Rpb247XG4gICAgfTtcbiAgICBjb25zdCBfaG1yUGF5bG9hZCA9IC8qI19fUFVSRV9fKi8gbWFya1Jhdyh7XG4gICAgICAgIGFjdGlvbnM6IHt9LFxuICAgICAgICBnZXR0ZXJzOiB7fSxcbiAgICAgICAgc3RhdGU6IFtdLFxuICAgICAgICBob3RTdGF0ZSxcbiAgICB9KTtcbiAgICBjb25zdCBwYXJ0aWFsU3RvcmUgPSB7XG4gICAgICAgIF9wOiBwaW5pYSxcbiAgICAgICAgLy8gX3M6IHNjb3BlLFxuICAgICAgICAkaWQsXG4gICAgICAgICRvbkFjdGlvbjogYWRkU3Vic2NyaXB0aW9uLmJpbmQobnVsbCwgYWN0aW9uU3Vic2NyaXB0aW9ucyksXG4gICAgICAgICRwYXRjaCxcbiAgICAgICAgJHJlc2V0LFxuICAgICAgICAkc3Vic2NyaWJlKGNhbGxiYWNrLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZVN1YnNjcmlwdGlvbiA9IGFkZFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25zLCBjYWxsYmFjaywgb3B0aW9ucy5kZXRhY2hlZCwgKCkgPT4gc3RvcFdhdGNoZXIoKSk7XG4gICAgICAgICAgICBjb25zdCBzdG9wV2F0Y2hlciA9IHNjb3BlLnJ1bigoKSA9PiB3YXRjaCgoKSA9PiBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5mbHVzaCA9PT0gJ3N5bmMnID8gaXNTeW5jTGlzdGVuaW5nIDogaXNMaXN0ZW5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogTXV0YXRpb25UeXBlLmRpcmVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXG4gICAgICAgICAgICAgICAgICAgIH0sIHN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBhc3NpZ24oe30sICRzdWJzY3JpYmVPcHRpb25zLCBvcHRpb25zKSkpO1xuICAgICAgICAgICAgcmV0dXJuIHJlbW92ZVN1YnNjcmlwdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgJGRpc3Bvc2UsXG4gICAgfTtcbiAgICBjb25zdCBzdG9yZSA9IHJlYWN0aXZlKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAoKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgKHR5cGVvZiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18gIT09ICd1bmRlZmluZWQnICYmIF9fVlVFX1BST0RfREVWVE9PTFNfXykpICYmICEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0JykpICYmIElTX0NMSUVOVClcbiAgICAgICAgPyBhc3NpZ24oe1xuICAgICAgICAgICAgX2htclBheWxvYWQsXG4gICAgICAgICAgICBfY3VzdG9tUHJvcGVydGllczogbWFya1JhdyhuZXcgU2V0KCkpLCAvLyBkZXZ0b29scyBjdXN0b20gcHJvcGVydGllc1xuICAgICAgICB9LCBwYXJ0aWFsU3RvcmVcbiAgICAgICAgLy8gbXVzdCBiZSBhZGRlZCBsYXRlclxuICAgICAgICAvLyBzZXR1cFN0b3JlXG4gICAgICAgIClcbiAgICAgICAgOiBwYXJ0aWFsU3RvcmUpO1xuICAgIC8vIHN0b3JlIHRoZSBwYXJ0aWFsIHN0b3JlIG5vdyBzbyB0aGUgc2V0dXAgb2Ygc3RvcmVzIGNhbiBpbnN0YW50aWF0ZSBlYWNoIG90aGVyIGJlZm9yZSB0aGV5IGFyZSBmaW5pc2hlZCB3aXRob3V0XG4gICAgLy8gY3JlYXRpbmcgaW5maW5pdGUgbG9vcHMuXG4gICAgcGluaWEuX3Muc2V0KCRpZCwgc3RvcmUpO1xuICAgIGNvbnN0IHJ1bldpdGhDb250ZXh0ID0gKHBpbmlhLl9hICYmIHBpbmlhLl9hLnJ1bldpdGhDb250ZXh0KSB8fCBmYWxsYmFja1J1bldpdGhDb250ZXh0O1xuICAgIC8vIFRPRE86IGlkZWEgY3JlYXRlIHNraXBTZXJpYWxpemUgdGhhdCBtYXJrcyBwcm9wZXJ0aWVzIGFzIG5vbiBzZXJpYWxpemFibGUgYW5kIHRoZXkgYXJlIHNraXBwZWRcbiAgICBjb25zdCBzZXR1cFN0b3JlID0gcnVuV2l0aENvbnRleHQoKCkgPT4gcGluaWEuX2UucnVuKCgpID0+IChzY29wZSA9IGVmZmVjdFNjb3BlKCkpLnJ1bigoKSA9PiBzZXR1cCh7IGFjdGlvbiB9KSkpKTtcbiAgICAvLyBvdmVyd3JpdGUgZXhpc3RpbmcgYWN0aW9ucyB0byBzdXBwb3J0ICRvbkFjdGlvblxuICAgIGZvciAoY29uc3Qga2V5IGluIHNldHVwU3RvcmUpIHtcbiAgICAgICAgY29uc3QgcHJvcCA9IHNldHVwU3RvcmVba2V5XTtcbiAgICAgICAgaWYgKChpc1JlZihwcm9wKSAmJiAhaXNDb21wdXRlZChwcm9wKSkgfHwgaXNSZWFjdGl2ZShwcm9wKSkge1xuICAgICAgICAgICAgLy8gbWFyayBpdCBhcyBhIHBpZWNlIG9mIHN0YXRlIHRvIGJlIHNlcmlhbGl6ZWRcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XG4gICAgICAgICAgICAgICAgaG90U3RhdGUudmFsdWVba2V5XSA9IHRvUmVmKHNldHVwU3RvcmUsIGtleSk7XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlT3B0aW9uU3RvcmUgZGlyZWN0bHkgc2V0cyB0aGUgc3RhdGUgaW4gcGluaWEuc3RhdGUudmFsdWUgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4ganVzdCBza2lwIHRoYXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFpc09wdGlvbnNTdG9yZSkge1xuICAgICAgICAgICAgICAgIC8vIGluIHNldHVwIHN0b3JlcyB3ZSBtdXN0IGh5ZHJhdGUgdGhlIHN0YXRlIGFuZCBzeW5jIHBpbmlhIHN0YXRlIHRyZWUgd2l0aCB0aGUgcmVmcyB0aGUgdXNlciBqdXN0IGNyZWF0ZWRcbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbFN0YXRlICYmIHNob3VsZEh5ZHJhdGUocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVmKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wLnZhbHVlID0gaW5pdGlhbFN0YXRlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9iYWJseSBhIHJlYWN0aXZlIG9iamVjdCwgbGV0cyByZWN1cnNpdmVseSBhc3NpZ25cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHByb3AgaXMgdW5rbm93blxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VSZWFjdGl2ZU9iamVjdHMocHJvcCwgaW5pdGlhbFN0YXRlW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVyIHRoZSByZWYgdG8gdGhlIHBpbmlhIHN0YXRlIHRvIGtlZXAgZXZlcnl0aGluZyBpbiBzeW5jXG4gICAgICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVbJGlkXVtrZXldID0gcHJvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgX2htclBheWxvYWQuc3RhdGUucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYWN0aW9uXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHByb3AgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvblZhbHVlID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdCA/IHByb3AgOiBhY3Rpb24ocHJvcCwga2V5KTtcbiAgICAgICAgICAgIC8vIHRoaXMgYSBob3QgbW9kdWxlIHJlcGxhY2VtZW50IHN0b3JlIGJlY2F1c2UgdGhlIGhvdFVwZGF0ZSBtZXRob2QgbmVlZHNcbiAgICAgICAgICAgIC8vIHRvIGRvIGl0IHdpdGggdGhlIHJpZ2h0IGNvbnRleHRcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIHNldHVwU3RvcmVba2V5XSA9IGFjdGlvblZhbHVlO1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBfaG1yUGF5bG9hZC5hY3Rpb25zW2tleV0gPSBwcm9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbGlzdCBhY3Rpb25zIHNvIHRoZXkgY2FuIGJlIHVzZWQgaW4gcGx1Z2luc1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgb3B0aW9uc0ZvclBsdWdpbi5hY3Rpb25zW2tleV0gPSBwcm9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgLy8gYWRkIGdldHRlcnMgZm9yIGRldnRvb2xzXG4gICAgICAgICAgICBpZiAoaXNDb21wdXRlZChwcm9wKSkge1xuICAgICAgICAgICAgICAgIF9obXJQYXlsb2FkLmdldHRlcnNba2V5XSA9IGlzT3B0aW9uc1N0b3JlXG4gICAgICAgICAgICAgICAgICAgID8gLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5nZXR0ZXJzW2tleV1cbiAgICAgICAgICAgICAgICAgICAgOiBwcm9wO1xuICAgICAgICAgICAgICAgIGlmIChJU19DTElFTlQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVycyA9IHNldHVwU3RvcmUuX2dldHRlcnMgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHNhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXR1cFN0b3JlLl9nZXR0ZXJzID0gbWFya1JhdyhbXSkpO1xuICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gYWRkIHRoZSBzdGF0ZSwgZ2V0dGVycywgYW5kIGFjdGlvbiBwcm9wZXJ0aWVzXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgYXNzaWduKHN0b3JlLCBzZXR1cFN0b3JlKTtcbiAgICAvLyBhbGxvd3MgcmV0cmlldmluZyByZWFjdGl2ZSBvYmplY3RzIHdpdGggYHN0b3JlVG9SZWZzKClgLiBNdXN0IGJlIGNhbGxlZCBhZnRlciBhc3NpZ25pbmcgdG8gdGhlIHJlYWN0aXZlIG9iamVjdC5cbiAgICAvLyBNYWtlIGBzdG9yZVRvUmVmcygpYCB3b3JrIHdpdGggYHJlYWN0aXZlKClgICM3OTlcbiAgICBhc3NpZ24odG9SYXcoc3RvcmUpLCBzZXR1cFN0b3JlKTtcbiAgICAvLyB1c2UgdGhpcyBpbnN0ZWFkIG9mIGEgY29tcHV0ZWQgd2l0aCBzZXR0ZXIgdG8gYmUgYWJsZSB0byBjcmVhdGUgaXQgYW55d2hlcmVcbiAgICAvLyB3aXRob3V0IGxpbmtpbmcgdGhlIGNvbXB1dGVkIGxpZmVzcGFuIHRvIHdoZXJldmVyIHRoZSBzdG9yZSBpcyBmaXJzdFxuICAgIC8vIGNyZWF0ZWQuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0b3JlLCAnJHN0YXRlJywge1xuICAgICAgICBnZXQ6ICgpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90ID8gaG90U3RhdGUudmFsdWUgOiBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdKSxcbiAgICAgICAgc2V0OiAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBzZXQgaG90U3RhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRwYXRjaCgoJHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRklYTUU6IHNob3VsZG4ndCBlcnJvcj9cbiAgICAgICAgICAgICAgICBhc3NpZ24oJHN0YXRlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBhZGQgdGhlIGhvdFVwZGF0ZSBiZWZvcmUgcGx1Z2lucyB0byBhbGxvdyB0aGVtIHRvIG92ZXJyaWRlIGl0XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHN0b3JlLl9ob3RVcGRhdGUgPSBtYXJrUmF3KChuZXdTdG9yZSkgPT4ge1xuICAgICAgICAgICAgc3RvcmUuX2hvdFVwZGF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIG5ld1N0b3JlLl9obXJQYXlsb2FkLnN0YXRlLmZvckVhY2goKHN0YXRlS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlS2V5IGluIHN0b3JlLiRzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTdGF0ZVRhcmdldCA9IG5ld1N0b3JlLiRzdGF0ZVtzdGF0ZUtleV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFN0YXRlU291cmNlID0gc3RvcmUuJHN0YXRlW3N0YXRlS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdTdGF0ZVRhcmdldCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUGxhaW5PYmplY3QobmV3U3RhdGVUYXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KG9sZFN0YXRlU291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0Y2hPYmplY3QobmV3U3RhdGVUYXJnZXQsIG9sZFN0YXRlU291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVyIHRoZSByZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0b3JlLiRzdGF0ZVtzdGF0ZUtleV0gPSBvbGRTdGF0ZVNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBwYXRjaCBkaXJlY3QgYWNjZXNzIHByb3BlcnRpZXMgdG8gYWxsb3cgc3RvcmUuc3RhdGVQcm9wZXJ0eSB0byB3b3JrIGFzXG4gICAgICAgICAgICAgICAgLy8gc3RvcmUuJHN0YXRlLnN0YXRlUHJvcGVydHlcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBhbnkgdHlwZVxuICAgICAgICAgICAgICAgIHN0b3JlW3N0YXRlS2V5XSA9IHRvUmVmKG5ld1N0b3JlLiRzdGF0ZSwgc3RhdGVLZXkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZW1vdmUgZGVsZXRlZCBzdGF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLmZvckVhY2goKHN0YXRlS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoc3RhdGVLZXkgaW4gbmV3U3RvcmUuJHN0YXRlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBub29wIGlmIGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN0b3JlW3N0YXRlS2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGF2b2lkIGRldnRvb2xzIGxvZ2dpbmcgdGhpcyBhcyBhIG11dGF0aW9uXG4gICAgICAgICAgICBpc0xpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdID0gdG9SZWYobmV3U3RvcmUuX2htclBheWxvYWQsICdob3RTdGF0ZScpO1xuICAgICAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIG5leHRUaWNrKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbk5hbWUgaW4gbmV3U3RvcmUuX2htclBheWxvYWQuYWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbkZuID0gbmV3U3RvcmVbYWN0aW9uTmFtZV07XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogYWN0aW9uTmFtZSBpcyBhIHN0cmluZ1xuICAgICAgICAgICAgICAgIHN0b3JlW2FjdGlvbk5hbWVdID1cbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uKGFjdGlvbkZuLCBhY3Rpb25OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRPRE86IGRvZXMgdGhpcyB3b3JrIGluIGJvdGggc2V0dXAgYW5kIG9wdGlvbiBzdG9yZT9cbiAgICAgICAgICAgIGZvciAoY29uc3QgZ2V0dGVyTmFtZSBpbiBuZXdTdG9yZS5faG1yUGF5bG9hZC5nZXR0ZXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVyID0gbmV3U3RvcmUuX2htclBheWxvYWQuZ2V0dGVyc1tnZXR0ZXJOYW1lXTtcbiAgICAgICAgICAgICAgICBjb25zdCBnZXR0ZXJWYWx1ZSA9IGlzT3B0aW9uc1N0b3JlXG4gICAgICAgICAgICAgICAgICAgID8gLy8gc3BlY2lhbCBoYW5kbGluZyBvZiBvcHRpb25zIGFwaVxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVyLmNhbGwoc3RvcmUsIHN0b3JlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIDogZ2V0dGVyO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGdldHRlck5hbWUgaXMgYSBzdHJpbmdcbiAgICAgICAgICAgICAgICBzdG9yZVtnZXR0ZXJOYW1lXSA9XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIGdldHRlclZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmVtb3ZlIGRlbGV0ZWQgZ2V0dGVyc1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuX2htclBheWxvYWQuZ2V0dGVycykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmdldHRlcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IG5vb3AgaWYgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RvcmVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYWN0aW9uc1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuX2htclBheWxvYWQuYWN0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IG5vb3AgaWYgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RvcmVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgdmFsdWVzIHVzZWQgaW4gZGV2dG9vbHMgYW5kIHRvIGFsbG93IGRlbGV0aW5nIG5ldyBwcm9wZXJ0aWVzIGxhdGVyIG9uXG4gICAgICAgICAgICBzdG9yZS5faG1yUGF5bG9hZCA9IG5ld1N0b3JlLl9obXJQYXlsb2FkO1xuICAgICAgICAgICAgc3RvcmUuX2dldHRlcnMgPSBuZXdTdG9yZS5fZ2V0dGVycztcbiAgICAgICAgICAgIHN0b3JlLl9ob3RVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgY29uc3Qgbm9uRW51bWVyYWJsZSA9IHtcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgLy8gYXZvaWQgd2FybmluZyBvbiBkZXZ0b29scyB0cnlpbmcgdG8gZGlzcGxheSB0aGlzIHByb3BlcnR5XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgWydfcCcsICdfaG1yUGF5bG9hZCcsICdfZ2V0dGVycycsICdfY3VzdG9tUHJvcGVydGllcyddLmZvckVhY2goKHApID0+IHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZSwgcCwgYXNzaWduKHsgdmFsdWU6IHN0b3JlW3BdIH0sIG5vbkVudW1lcmFibGUpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGFwcGx5IGFsbCBwbHVnaW5zXG4gICAgcGluaWEuX3AuZm9yRWFjaCgoZXh0ZW5kZXIpID0+IHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBzY29wZS5ydW4oKCkgPT4gZXh0ZW5kZXIoe1xuICAgICAgICAgICAgICAgIHN0b3JlOiBzdG9yZSxcbiAgICAgICAgICAgICAgICBhcHA6IHBpbmlhLl9hLFxuICAgICAgICAgICAgICAgIHBpbmlhLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNGb3JQbHVnaW4sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhleHRlbnNpb25zIHx8IHt9KS5mb3JFYWNoKChrZXkpID0+IHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmFkZChrZXkpKTtcbiAgICAgICAgICAgIGFzc2lnbihzdG9yZSwgZXh0ZW5zaW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NpZ24oc3RvcmUsIHNjb3BlLnJ1bigoKSA9PiBleHRlbmRlcih7XG4gICAgICAgICAgICAgICAgc3RvcmU6IHN0b3JlLFxuICAgICAgICAgICAgICAgIGFwcDogcGluaWEuX2EsXG4gICAgICAgICAgICAgICAgcGluaWEsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc0ZvclBsdWdpbixcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgIHN0b3JlLiRzdGF0ZSAmJlxuICAgICAgICB0eXBlb2Ygc3RvcmUuJHN0YXRlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2Ygc3RvcmUuJHN0YXRlLmNvbnN0cnVjdG9yID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICFzdG9yZS4kc3RhdGUuY29uc3RydWN0b3IudG9TdHJpbmcoKS5pbmNsdWRlcygnW25hdGl2ZSBjb2RlXScpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgW/CfjY1dOiBUaGUgXCJzdGF0ZVwiIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuIEl0IGNhbm5vdCBiZVxcbmAgK1xuICAgICAgICAgICAgYFxcdHN0YXRlOiAoKSA9PiBuZXcgTXlDbGFzcygpXFxuYCArXG4gICAgICAgICAgICBgRm91bmQgaW4gc3RvcmUgXCIke3N0b3JlLiRpZH1cIi5gKTtcbiAgICB9XG4gICAgLy8gb25seSBhcHBseSBoeWRyYXRlIHRvIG9wdGlvbiBzdG9yZXMgd2l0aCBhbiBpbml0aWFsIHN0YXRlIGluIHBpbmlhXG4gICAgaWYgKGluaXRpYWxTdGF0ZSAmJlxuICAgICAgICBpc09wdGlvbnNTdG9yZSAmJlxuICAgICAgICBvcHRpb25zLmh5ZHJhdGUpIHtcbiAgICAgICAgb3B0aW9ucy5oeWRyYXRlKHN0b3JlLiRzdGF0ZSwgaW5pdGlhbFN0YXRlKTtcbiAgICB9XG4gICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xuICAgIGlzU3luY0xpc3RlbmluZyA9IHRydWU7XG4gICAgcmV0dXJuIHN0b3JlO1xufVxuLy8gYWxsb3dzIHVudXNlZCBzdG9yZXMgdG8gYmUgdHJlZSBzaGFrZW5cbi8qISAjX19OT19TSURFX0VGRkVDVFNfXyAqL1xuZnVuY3Rpb24gZGVmaW5lU3RvcmUoXG4vLyBUT0RPOiBhZGQgcHJvcGVyIHR5cGVzIGZyb20gYWJvdmVcbmlkLCBzZXR1cCwgc2V0dXBPcHRpb25zKSB7XG4gICAgbGV0IG9wdGlvbnM7XG4gICAgY29uc3QgaXNTZXR1cFN0b3JlID0gdHlwZW9mIHNldHVwID09PSAnZnVuY3Rpb24nO1xuICAgIC8vIHRoZSBvcHRpb24gc3RvcmUgc2V0dXAgd2lsbCBjb250YWluIHRoZSBhY3R1YWwgb3B0aW9ucyBpbiB0aGlzIGNhc2VcbiAgICBvcHRpb25zID0gaXNTZXR1cFN0b3JlID8gc2V0dXBPcHRpb25zIDogc2V0dXA7XG4gICAgZnVuY3Rpb24gdXNlU3RvcmUocGluaWEsIGhvdCkge1xuICAgICAgICBjb25zdCBoYXNDb250ZXh0ID0gaGFzSW5qZWN0aW9uQ29udGV4dCgpO1xuICAgICAgICBwaW5pYSA9XG4gICAgICAgICAgICAvLyBpbiB0ZXN0IG1vZGUsIGlnbm9yZSB0aGUgYXJndW1lbnQgcHJvdmlkZWQgYXMgd2UgY2FuIGFsd2F5cyByZXRyaWV2ZSBhXG4gICAgICAgICAgICAvLyBwaW5pYSBpbnN0YW5jZSB3aXRoIGdldEFjdGl2ZVBpbmlhKClcbiAgICAgICAgICAgICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0JykgJiYgYWN0aXZlUGluaWEgJiYgYWN0aXZlUGluaWEuX3Rlc3RpbmcgPyBudWxsIDogcGluaWEpIHx8XG4gICAgICAgICAgICAgICAgKGhhc0NvbnRleHQgPyBpbmplY3QocGluaWFTeW1ib2wsIG51bGwpIDogbnVsbCk7XG4gICAgICAgIGlmIChwaW5pYSlcbiAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYWN0aXZlUGluaWEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgW/CfjY1dOiBcImdldEFjdGl2ZVBpbmlhKClcIiB3YXMgY2FsbGVkIGJ1dCB0aGVyZSB3YXMgbm8gYWN0aXZlIFBpbmlhLiBBcmUgeW91IHRyeWluZyB0byB1c2UgYSBzdG9yZSBiZWZvcmUgY2FsbGluZyBcImFwcC51c2UocGluaWEpXCI/XFxuYCArXG4gICAgICAgICAgICAgICAgYFNlZSBodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9jb3JlLWNvbmNlcHRzL291dHNpZGUtY29tcG9uZW50LXVzYWdlLmh0bWwgZm9yIGhlbHAuXFxuYCArXG4gICAgICAgICAgICAgICAgYFRoaXMgd2lsbCBmYWlsIGluIHByb2R1Y3Rpb24uYCk7XG4gICAgICAgIH1cbiAgICAgICAgcGluaWEgPSBhY3RpdmVQaW5pYTtcbiAgICAgICAgaWYgKCFwaW5pYS5fcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAvLyBjcmVhdGluZyB0aGUgc3RvcmUgcmVnaXN0ZXJzIGl0IGluIGBwaW5pYS5fc2BcbiAgICAgICAgICAgIGlmIChpc1NldHVwU3RvcmUpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVTZXR1cFN0b3JlKGlkLCBzZXR1cCwgb3B0aW9ucywgcGluaWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlT3B0aW9uc1N0b3JlKGlkLCBvcHRpb25zLCBwaW5pYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IG5vdCB0aGUgcmlnaHQgaW5mZXJyZWQgdHlwZVxuICAgICAgICAgICAgICAgIHVzZVN0b3JlLl9waW5pYSA9IHBpbmlhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0b3JlID0gcGluaWEuX3MuZ2V0KGlkKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGhvdElkID0gJ19faG90OicgKyBpZDtcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0b3JlID0gaXNTZXR1cFN0b3JlXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVTZXR1cFN0b3JlKGhvdElkLCBzZXR1cCwgb3B0aW9ucywgcGluaWEsIHRydWUpXG4gICAgICAgICAgICAgICAgOiBjcmVhdGVPcHRpb25zU3RvcmUoaG90SWQsIGFzc2lnbih7fSwgb3B0aW9ucyksIHBpbmlhLCB0cnVlKTtcbiAgICAgICAgICAgIGhvdC5faG90VXBkYXRlKG5ld1N0b3JlKTtcbiAgICAgICAgICAgIC8vIGNsZWFudXAgdGhlIHN0YXRlIHByb3BlcnRpZXMgYW5kIHRoZSBzdG9yZSBmcm9tIHRoZSBjYWNoZVxuICAgICAgICAgICAgZGVsZXRlIHBpbmlhLnN0YXRlLnZhbHVlW2hvdElkXTtcbiAgICAgICAgICAgIHBpbmlhLl9zLmRlbGV0ZShob3RJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgLy8gc2F2ZSBzdG9yZXMgaW4gaW5zdGFuY2VzIHRvIGFjY2VzcyB0aGVtIGRldnRvb2xzXG4gICAgICAgICAgICBpZiAoY3VycmVudEluc3RhbmNlICYmXG4gICAgICAgICAgICAgICAgY3VycmVudEluc3RhbmNlLnByb3h5ICYmXG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgYWRkaW5nIHN0b3JlcyB0aGF0IGFyZSBqdXN0IGJ1aWx0IGZvciBob3QgbW9kdWxlIHJlcGxhY2VtZW50XG4gICAgICAgICAgICAgICAgIWhvdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZtID0gY3VycmVudEluc3RhbmNlLnByb3h5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gJ19wU3RvcmVzJyBpbiB2bSA/IHZtLl9wU3RvcmVzIDogKHZtLl9wU3RvcmVzID0ge30pO1xuICAgICAgICAgICAgICAgIGNhY2hlW2lkXSA9IHN0b3JlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFN0b3JlR2VuZXJpYyBjYW5ub3QgYmUgY2FzdGVkIHRvd2FyZHMgU3RvcmVcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgIH1cbiAgICB1c2VTdG9yZS4kaWQgPSBpZDtcbiAgICByZXR1cm4gdXNlU3RvcmU7XG59XG5cbmxldCBtYXBTdG9yZVN1ZmZpeCA9ICdTdG9yZSc7XG4vKipcbiAqIENoYW5nZXMgdGhlIHN1ZmZpeCBhZGRlZCBieSBgbWFwU3RvcmVzKClgLiBDYW4gYmUgc2V0IHRvIGFuIGVtcHR5IHN0cmluZy5cbiAqIERlZmF1bHRzIHRvIGBcIlN0b3JlXCJgLiBNYWtlIHN1cmUgdG8gZXh0ZW5kIHRoZSBNYXBTdG9yZXNDdXN0b21pemF0aW9uXG4gKiBpbnRlcmZhY2UgaWYgeW91IGFyZSB1c2luZyBUeXBlU2NyaXB0LlxuICpcbiAqIEBwYXJhbSBzdWZmaXggLSBuZXcgc3VmZml4XG4gKi9cbmZ1bmN0aW9uIHNldE1hcFN0b3JlU3VmZml4KHN1ZmZpeCAvLyBjb3VsZCBiZSAnU3RvcmUnIGJ1dCB0aGF0IHdvdWxkIGJlIGFubm95aW5nIGZvciBKU1xuKSB7XG4gICAgbWFwU3RvcmVTdWZmaXggPSBzdWZmaXg7XG59XG4vKipcbiAqIEFsbG93cyB1c2luZyBzdG9yZXMgd2l0aG91dCB0aGUgY29tcG9zaXRpb24gQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW5cbiAqIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBjb21wdXRlZGAgZmllbGQgb2YgYSBjb21wb25lbnQuIEl0IGFjY2VwdHMgYSBsaXN0XG4gKiBvZiBzdG9yZSBkZWZpbml0aW9ucy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBganNcbiAqIGV4cG9ydCBkZWZhdWx0IHtcbiAqICAgY29tcHV0ZWQ6IHtcbiAqICAgICAvLyBvdGhlciBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gKiAgICAgLi4ubWFwU3RvcmVzKHVzZVVzZXJTdG9yZSwgdXNlQ2FydFN0b3JlKVxuICogICB9LFxuICpcbiAqICAgY3JlYXRlZCgpIHtcbiAqICAgICB0aGlzLnVzZXJTdG9yZSAvLyBzdG9yZSB3aXRoIGlkIFwidXNlclwiXG4gKiAgICAgdGhpcy5jYXJ0U3RvcmUgLy8gc3RvcmUgd2l0aCBpZCBcImNhcnRcIlxuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gc3RvcmVzIC0gbGlzdCBvZiBzdG9yZXMgdG8gbWFwIHRvIGFuIG9iamVjdFxuICovXG5mdW5jdGlvbiBtYXBTdG9yZXMoLi4uc3RvcmVzKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBBcnJheS5pc0FycmF5KHN0b3Jlc1swXSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBb8J+NjV06IERpcmVjdGx5IHBhc3MgYWxsIHN0b3JlcyB0byBcIm1hcFN0b3JlcygpXCIgd2l0aG91dCBwdXR0aW5nIHRoZW0gaW4gYW4gYXJyYXk6XFxuYCArXG4gICAgICAgICAgICBgUmVwbGFjZVxcbmAgK1xuICAgICAgICAgICAgYFxcdG1hcFN0b3JlcyhbdXNlQXV0aFN0b3JlLCB1c2VDYXJ0U3RvcmVdKVxcbmAgK1xuICAgICAgICAgICAgYHdpdGhcXG5gICtcbiAgICAgICAgICAgIGBcXHRtYXBTdG9yZXModXNlQXV0aFN0b3JlLCB1c2VDYXJ0U3RvcmUpXFxuYCArXG4gICAgICAgICAgICBgVGhpcyB3aWxsIGZhaWwgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XG4gICAgICAgIHN0b3JlcyA9IHN0b3Jlc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIHN0b3Jlcy5yZWR1Y2UoKHJlZHVjZWQsIHVzZVN0b3JlKSA9PiB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6ICRpZCBpcyBhZGRlZCBieSBkZWZpbmVTdG9yZVxuICAgICAgICByZWR1Y2VkW3VzZVN0b3JlLiRpZCArIG1hcFN0b3JlU3VmZml4XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZWR1Y2VkO1xuICAgIH0sIHt9KTtcbn1cbi8qKlxuICogQWxsb3dzIHVzaW5nIHN0YXRlIGFuZCBnZXR0ZXJzIGZyb20gb25lIHN0b3JlIHdpdGhvdXQgdXNpbmcgdGhlIGNvbXBvc2l0aW9uXG4gKiBBUEkgKGBzZXR1cCgpYCkgYnkgZ2VuZXJhdGluZyBhbiBvYmplY3QgdG8gYmUgc3ByZWFkIGluIHRoZSBgY29tcHV0ZWRgIGZpZWxkXG4gKiBvZiBhIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0gdXNlU3RvcmUgLSBzdG9yZSB0byBtYXAgZnJvbVxuICogQHBhcmFtIGtleXNPck1hcHBlciAtIGFycmF5IG9yIG9iamVjdFxuICovXG5mdW5jdGlvbiBtYXBTdGF0ZSh1c2VTdG9yZSwga2V5c09yTWFwcGVyKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoa2V5c09yTWFwcGVyKVxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEZJWE1FOiBzaG91bGQgd29yaz9cbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XG4gICAgICAgIH0sIHt9KVxuICAgICAgICA6IE9iamVjdC5rZXlzKGtleXNPck1hcHBlcikucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKHRoaXMuJHBpbmlhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZUtleSA9IGtleXNPck1hcHBlcltrZXldO1xuICAgICAgICAgICAgICAgIC8vIGZvciBzb21lIHJlYXNvbiBUUyBpcyB1bmFibGUgdG8gaW5mZXIgdGhlIHR5cGUgb2Ygc3RvcmVLZXkgdG8gYmUgYVxuICAgICAgICAgICAgICAgIC8vIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBzdG9yZUtleSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICA/IHN0b3JlS2V5LmNhbGwodGhpcywgc3RvcmUpXG4gICAgICAgICAgICAgICAgICAgIDogLy8gQHRzLWV4cGVjdC1lcnJvcjogRklYTUU6IHNob3VsZCB3b3JrP1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVbc3RvcmVLZXldO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xuICAgICAgICB9LCB7fSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciBgbWFwU3RhdGUoKWAuIFlvdSBzaG91bGQgdXNlIGBtYXBTdGF0ZSgpYCBpbnN0ZWFkLlxuICogQGRlcHJlY2F0ZWQgdXNlIGBtYXBTdGF0ZSgpYCBpbnN0ZWFkLlxuICovXG5jb25zdCBtYXBHZXR0ZXJzID0gbWFwU3RhdGU7XG4vKipcbiAqIEFsbG93cyBkaXJlY3RseSB1c2luZyBhY3Rpb25zIGZyb20geW91ciBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxuICogQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW4gb2JqZWN0IHRvIGJlIHNwcmVhZCBpbiB0aGUgYG1ldGhvZHNgIGZpZWxkXG4gKiBvZiBhIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0gdXNlU3RvcmUgLSBzdG9yZSB0byBtYXAgZnJvbVxuICogQHBhcmFtIGtleXNPck1hcHBlciAtIGFycmF5IG9yIG9iamVjdFxuICovXG5mdW5jdGlvbiBtYXBBY3Rpb25zKHVzZVN0b3JlLCBrZXlzT3JNYXBwZXIpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShrZXlzT3JNYXBwZXIpXG4gICAgICAgID8ga2V5c09yTWFwcGVyLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEZJWE1FOiBzaG91bGQgd29yaz9cbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV0oLi4uYXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XG4gICAgICAgIH0sIHt9KVxuICAgICAgICA6IE9iamVjdC5rZXlzKGtleXNPck1hcHBlcikucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRklYTUU6IHNob3VsZCB3b3JrP1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5c09yTWFwcGVyW2tleV1dKC4uLmFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xuICAgICAgICB9LCB7fSk7XG59XG4vKipcbiAqIEFsbG93cyB1c2luZyBzdGF0ZSBhbmQgZ2V0dGVycyBmcm9tIG9uZSBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxuICogQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW4gb2JqZWN0IHRvIGJlIHNwcmVhZCBpbiB0aGUgYGNvbXB1dGVkYCBmaWVsZFxuICogb2YgYSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHVzZVN0b3JlIC0gc3RvcmUgdG8gbWFwIGZyb21cbiAqIEBwYXJhbSBrZXlzT3JNYXBwZXIgLSBhcnJheSBvciBvYmplY3RcbiAqL1xuZnVuY3Rpb24gbWFwV3JpdGFibGVTdGF0ZSh1c2VTdG9yZSwga2V5c09yTWFwcGVyKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoa2V5c09yTWFwcGVyKVxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0ge1xuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXldO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV0gPSB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcbiAgICAgICAgfSwge30pXG4gICAgICAgIDogT2JqZWN0LmtleXMoa2V5c09yTWFwcGVyKS5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0ge1xuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXlzT3JNYXBwZXJba2V5XV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5c09yTWFwcGVyW2tleV1dID0gdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XG4gICAgICAgIH0sIHt9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIG9iamVjdCBvZiByZWZlcmVuY2VzIHdpdGggYWxsIHRoZSBzdGF0ZSwgZ2V0dGVycywgYW5kIHBsdWdpbi1hZGRlZFxuICogc3RhdGUgcHJvcGVydGllcyBvZiB0aGUgc3RvcmUuIFNpbWlsYXIgdG8gYHRvUmVmcygpYCBidXQgc3BlY2lmaWNhbGx5XG4gKiBkZXNpZ25lZCBmb3IgUGluaWEgc3RvcmVzIHNvIG1ldGhvZHMgYW5kIG5vbiByZWFjdGl2ZSBwcm9wZXJ0aWVzIGFyZVxuICogY29tcGxldGVseSBpZ25vcmVkLlxuICpcbiAqIEBwYXJhbSBzdG9yZSAtIHN0b3JlIHRvIGV4dHJhY3QgdGhlIHJlZnMgZnJvbVxuICovXG5mdW5jdGlvbiBzdG9yZVRvUmVmcyhzdG9yZSkge1xuICAgIGNvbnN0IHJhd1N0b3JlID0gdG9SYXcoc3RvcmUpO1xuICAgIGNvbnN0IHJlZnMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdTdG9yZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHJhd1N0b3JlW2tleV07XG4gICAgICAgIC8vIFRoZXJlIGlzIG5vIG5hdGl2ZSBtZXRob2QgdG8gY2hlY2sgZm9yIGEgY29tcHV0ZWRcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL2NvcmUvcHVsbC80MTY1XG4gICAgICAgIGlmICh2YWx1ZS5lZmZlY3QpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRvbyBoYXJkIHRvIHR5cGUgY29ycmVjdGx5XG4gICAgICAgICAgICByZWZzW2tleV0gPVxuICAgICAgICAgICAgICAgIC8vIC4uLlxuICAgICAgICAgICAgICAgIGNvbXB1dGVkKHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBzdG9yZVtrZXldLFxuICAgICAgICAgICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlZih2YWx1ZSkgfHwgaXNSZWFjdGl2ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoZSBrZXkgaXMgc3RhdGUgb3IgZ2V0dGVyXG4gICAgICAgICAgICByZWZzW2tleV0gPVxuICAgICAgICAgICAgICAgIC8vIC0tLVxuICAgICAgICAgICAgICAgIHRvUmVmKHN0b3JlLCBrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZWZzO1xufVxuXG5leHBvcnQgeyBNdXRhdGlvblR5cGUsIGFjY2VwdEhNUlVwZGF0ZSwgY3JlYXRlUGluaWEsIGRlZmluZVN0b3JlLCBkaXNwb3NlUGluaWEsIGdldEFjdGl2ZVBpbmlhLCBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzLCBtYXBTdGF0ZSwgbWFwU3RvcmVzLCBtYXBXcml0YWJsZVN0YXRlLCBzZXRBY3RpdmVQaW5pYSwgc2V0TWFwU3RvcmVTdWZmaXgsIHNob3VsZEh5ZHJhdGUsIHNraXBIeWRyYXRlLCBzdG9yZVRvUmVmcyB9O1xuIiwiLy8gRnVuY3Rpb25zIGluIHRoaXMgZmlsZSBhcmUgbm8tb3AsXG4vLyAgdGhleSBqdXN0IHRha2UgYSBjYWxsYmFjayBmdW5jdGlvbiBhbmQgcmV0dXJuIGl0XG4vLyBUaGV5J3JlIHVzZWQgdG8gYXBwbHkgdHlwaW5ncyB0byB0aGUgY2FsbGJhY2tcbi8vICBwYXJhbWV0ZXJzIGFuZCByZXR1cm4gdmFsdWUgd2hlbiB1c2luZyBRdWFzYXIgd2l0aCBUeXBlU2NyaXB0XG5cbmNvbnN0IHdyYXBwZXIgPSBjYWxsYmFjayA9PiBjYWxsYmFja1xuXG5leHBvcnQgY29uc3QgZGVmaW5lQ29uZmlnID0gd3JhcHBlclxuXG5leHBvcnQgY29uc3QgZGVmaW5lQm9vdCA9IHdyYXBwZXJcbmV4cG9ydCBjb25zdCBkZWZpbmVQcmVGZXRjaCA9IHdyYXBwZXJcbmV4cG9ydCBjb25zdCBkZWZpbmVSb3V0ZXIgPSB3cmFwcGVyXG5leHBvcnQgY29uc3QgZGVmaW5lU3RvcmUgPSB3cmFwcGVyXG5cbmV4cG9ydCBjb25zdCBkZWZpbmVTc3JNaWRkbGV3YXJlID0gd3JhcHBlclxuZXhwb3J0IGNvbnN0IGRlZmluZVNzckNyZWF0ZSA9IHdyYXBwZXJcbmV4cG9ydCBjb25zdCBkZWZpbmVTc3JMaXN0ZW4gPSB3cmFwcGVyXG5leHBvcnQgY29uc3QgZGVmaW5lU3NyQ2xvc2UgPSB3cmFwcGVyXG5leHBvcnQgY29uc3QgZGVmaW5lU3NyU2VydmVTdGF0aWNDb250ZW50ID0gd3JhcHBlclxuZXhwb3J0IGNvbnN0IGRlZmluZVNzclJlbmRlclByZWxvYWRUYWcgPSB3cmFwcGVyXG4iLCJjb25zdCByb3V0ZXMgPSBbXG4gIHtcbiAgICBwYXRoOiAnLycsXG4gICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ2xheW91dHMvTWFpbkxheW91dC52dWUnKSxcbiAgICBjaGlsZHJlbjogW1xuICAgICAge1xuICAgICAgICBwYXRoOiAnJyxcbiAgICAgICAgbmFtZTogJ0luZGV4JyxcbiAgICAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL0luZGV4UGFnZS52dWUnKSxcbiAgICAgICAgbWV0YTogeyB0aXRsZTogJ0luw61jaW8nIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwYXRoOiAncHJvZHVjdHMnLFxuICAgICAgICBuYW1lOiAnUHJvZHVjdHMnLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvUHJvZHVjdHNQYWdlLnZ1ZScpLFxuICAgICAgICBtZXRhOiB7IHRpdGxlOiAnUHJvZHV0b3MnIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwYXRoOiAnc2FsZXMnLFxuICAgICAgICBuYW1lOiAnU2FsZXMnLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvU2FsZXNQYWdlLnZ1ZScpLFxuICAgICAgICBtZXRhOiB7IHRpdGxlOiAnTm92YSBWZW5kYScgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdGg6ICdzYWxlcy9oaXN0b3J5JyxcbiAgICAgICAgbmFtZTogJ3NhbGVzLWhpc3RvcnknLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvU2FsZXNIaXN0b3J5UGFnZS52dWUnKSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdGg6ICdtZXRhJyxcbiAgICAgICAgbmFtZTogJ21ldGEnLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvTWV0YVBhZ2UudnVlJyksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwYXRoOiAncmVwb3J0cycsXG4gICAgICAgIG5hbWU6ICdSZXBvcnRzJyxcbiAgICAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL1JlcG9ydHNQYWdlLnZ1ZScpLFxuICAgICAgICBtZXRhOiB7IHRpdGxlOiAnUmVsYXTDs3Jpb3MnIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwYXRoOiAnaW52ZXN0bWVudHMnLFxuICAgICAgICBuYW1lOiAnSW52ZXN0bWVudHMnLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvSW52ZXN0bWVudHNQYWdlLnZ1ZScpLFxuICAgICAgICBtZXRhOiB7IHRpdGxlOiAnSW52ZXN0aW1lbnRvcycgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHBhdGg6ICdwYXltZW50JyxcbiAgICAgICAgbmFtZTogJ1BheW1lbnQnLFxuICAgICAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvUGF5bWVudFBhZ2UudnVlJyksXG4gICAgICAgIG1ldGE6IHsgdGl0bGU6ICdQYWdhbWVudG8nIH0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICBwYXRoOiAnLzpjYXRjaEFsbCguKikqJyxcbiAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgncGFnZXMvRXJyb3JOb3RGb3VuZC52dWUnKSxcbiAgICBtZXRhOiB7IHRpdGxlOiAnRXJybyA0MDQnIH0sXG4gIH0sXG5dXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlc1xuIiwiaW1wb3J0IHsgZGVmaW5lUm91dGVyIH0gZnJvbSAnI3EtYXBwL3dyYXBwZXJzJ1xuaW1wb3J0IHtcbiAgY3JlYXRlUm91dGVyLFxuICBjcmVhdGVNZW1vcnlIaXN0b3J5LFxuICBjcmVhdGVXZWJIaXN0b3J5LFxuICBjcmVhdGVXZWJIYXNoSGlzdG9yeSxcbn0gZnJvbSAndnVlLXJvdXRlcidcbmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMnXG5cbi8qXG4gKiBJZiBub3QgYnVpbGRpbmcgd2l0aCBTU1IgbW9kZSwgeW91IGNhblxuICogZGlyZWN0bHkgZXhwb3J0IHRoZSBSb3V0ZXIgaW5zdGFudGlhdGlvbjtcbiAqXG4gKiBUaGUgZnVuY3Rpb24gYmVsb3cgY2FuIGJlIGFzeW5jIHRvbzsgZWl0aGVyIHVzZVxuICogYXN5bmMvYXdhaXQgb3IgcmV0dXJuIGEgUHJvbWlzZSB3aGljaCByZXNvbHZlc1xuICogd2l0aCB0aGUgUm91dGVyIGluc3RhbmNlLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGRlZmluZVJvdXRlcihmdW5jdGlvbiAoLyogeyBzdG9yZSwgc3NyQ29udGV4dCB9ICovKSB7XG4gIGNvbnN0IGNyZWF0ZUhpc3RvcnkgPSBwcm9jZXNzLmVudi5TRVJWRVJcbiAgICA/IGNyZWF0ZU1lbW9yeUhpc3RvcnlcbiAgICA6IHByb2Nlc3MuZW52LlZVRV9ST1VURVJfTU9ERSA9PT0gJ2hpc3RvcnknXG4gICAgICA/IGNyZWF0ZVdlYkhpc3RvcnlcbiAgICAgIDogY3JlYXRlV2ViSGFzaEhpc3RvcnlcblxuICBjb25zdCBSb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoe1xuICAgIHNjcm9sbEJlaGF2aW9yOiAoKSA9PiAoeyBsZWZ0OiAwLCB0b3A6IDAgfSksXG4gICAgcm91dGVzLFxuXG4gICAgLy8gTGVhdmUgdGhpcyBhcyBpcyBhbmQgbWFrZSBjaGFuZ2VzIGluIHF1YXNhci5jb25mLmpzIGluc3RlYWQhXG4gICAgLy8gcXVhc2FyLmNvbmYuanMgLT4gYnVpbGQgLT4gdnVlUm91dGVyTW9kZVxuICAgIC8vIHF1YXNhci5jb25mLmpzIC0+IGJ1aWxkIC0+IHB1YmxpY1BhdGhcbiAgICBoaXN0b3J5OiBjcmVhdGVIaXN0b3J5KHByb2Nlc3MuZW52LlZVRV9ST1VURVJfQkFTRSksXG4gIH0pXG5cbiAgcmV0dXJuIFJvdXRlclxufSlcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIFRISVMgRklMRSBJUyBHRU5FUkFURUQgQVVUT01BVElDQUxMWS5cbiAqIERPIE5PVCBFRElULlxuICpcbiAqIFlvdSBhcmUgcHJvYmFibHkgbG9va2luZyBvbiBhZGRpbmcgc3RhcnR1cC9pbml0aWFsaXphdGlvbiBjb2RlLlxuICogVXNlIFwicXVhc2FyIG5ldyBib290IDxuYW1lPlwiIGFuZCBhZGQgaXQgdGhlcmUuXG4gKiBPbmUgYm9vdCBmaWxlIHBlciBjb25jZXJuLiBUaGVuIHJlZmVyZW5jZSB0aGUgZmlsZShzKSBpbiBxdWFzYXIuY29uZmlnIGZpbGUgPiBib290OlxuICogYm9vdDogWydmaWxlJywgLi4uXSAvLyBkbyBub3QgYWRkIFwiLmpzXCIgZXh0ZW5zaW9uIHRvIGl0LlxuICpcbiAqIEJvb3QgZmlsZXMgYXJlIHlvdXIgXCJtYWluLmpzXCJcbiAqKi9cblxuXG5cblxuXG5pbXBvcnQgeyBRdWFzYXIgfSBmcm9tICdxdWFzYXInXG5pbXBvcnQgeyBtYXJrUmF3IH0gZnJvbSAndnVlJ1xuaW1wb3J0IFJvb3RDb21wb25lbnQgZnJvbSAnYXBwL3NyYy9BcHAudnVlJ1xuXG5pbXBvcnQgY3JlYXRlU3RvcmUgZnJvbSAnYXBwL3NyYy9zdG9yZXMvaW5kZXgnXG5pbXBvcnQgY3JlYXRlUm91dGVyIGZyb20gJ2FwcC9zcmMvcm91dGVyL2luZGV4J1xuXG5cblxuXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIChjcmVhdGVBcHBGbiwgcXVhc2FyVXNlck9wdGlvbnMpIHtcbiAgXG5cbiAgLy8gQ3JlYXRlIHRoZSBhcHAgaW5zdGFuY2UuXG4gIC8vIEhlcmUgd2UgaW5qZWN0IGludG8gaXQgdGhlIFF1YXNhciBVSSwgdGhlIHJvdXRlciAmIHBvc3NpYmx5IHRoZSBzdG9yZS5cbiAgY29uc3QgYXBwID0gY3JlYXRlQXBwRm4oUm9vdENvbXBvbmVudClcblxuICBcbiAgYXBwLmNvbmZpZy5wZXJmb3JtYW5jZSA9IHRydWVcbiAgXG5cbiAgYXBwLnVzZShRdWFzYXIsIHF1YXNhclVzZXJPcHRpb25zKVxuXG4gIFxuXG4gIFxuICAgIGNvbnN0IHN0b3JlID0gdHlwZW9mIGNyZWF0ZVN0b3JlID09PSAnZnVuY3Rpb24nXG4gICAgICA/IGF3YWl0IGNyZWF0ZVN0b3JlKHt9KVxuICAgICAgOiBjcmVhdGVTdG9yZVxuXG4gICAgXG4gICAgICBhcHAudXNlKHN0b3JlKVxuXG4gICAgICBcbiAgICBcbiAgXG5cbiAgY29uc3Qgcm91dGVyID0gbWFya1JhdyhcbiAgICB0eXBlb2YgY3JlYXRlUm91dGVyID09PSAnZnVuY3Rpb24nXG4gICAgICA/IGF3YWl0IGNyZWF0ZVJvdXRlcih7c3RvcmV9KVxuICAgICAgOiBjcmVhdGVSb3V0ZXJcbiAgKVxuXG4gIFxuICAgIC8vIG1ha2Ugcm91dGVyIGluc3RhbmNlIGF2YWlsYWJsZSBpbiBzdG9yZVxuICAgIFxuICAgICAgc3RvcmUudXNlKCh7IHN0b3JlIH0pID0+IHsgc3RvcmUucm91dGVyID0gcm91dGVyIH0pXG4gICAgXG4gIFxuXG4gIC8vIEV4cG9zZSB0aGUgYXBwLCB0aGUgcm91dGVyIGFuZCB0aGUgc3RvcmUuXG4gIC8vIE5vdGUgdGhhdCB3ZSBhcmUgbm90IG1vdW50aW5nIHRoZSBhcHAgaGVyZSwgc2luY2UgYm9vdHN0cmFwcGluZyB3aWxsIGJlXG4gIC8vIGRpZmZlcmVudCBkZXBlbmRpbmcgb24gd2hldGhlciB3ZSBhcmUgaW4gYSBicm93c2VyIG9yIG9uIHRoZSBzZXJ2ZXIuXG4gIHJldHVybiB7XG4gICAgYXBwLFxuICAgIHN0b3JlLFxuICAgIHJvdXRlclxuICB9XG59XG4iLCJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IHVzZVNpemVEZWZhdWx0cyA9IHtcbiAgeHM6IDE4LFxuICBzbTogMjQsXG4gIG1kOiAzMixcbiAgbGc6IDM4LFxuICB4bDogNDZcbn1cblxuZXhwb3J0IGNvbnN0IHVzZVNpemVQcm9wcyA9IHtcbiAgc2l6ZTogU3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcywgc2l6ZXMgPSB1c2VTaXplRGVmYXVsdHMpIHtcbiAgLy8gcmV0dXJuIHNpemVTdHlsZVxuICByZXR1cm4gY29tcHV0ZWQoKCkgPT4gKFxuICAgIHByb3BzLnNpemUgIT09IHZvaWQgMFxuICAgICAgPyB7IGZvbnRTaXplOiBwcm9wcy5zaXplIGluIHNpemVzID8gYCR7IHNpemVzWyBwcm9wcy5zaXplIF0gfXB4YCA6IHByb3BzLnNpemUgfVxuICAgICAgOiBudWxsXG4gICkpXG59XG4iLCJpbXBvcnQgeyBoLCB3aXRoRGlyZWN0aXZlcyB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGZ1bmN0aW9uIGhTbG90IChzbG90LCBvdGhlcndpc2UpIHtcbiAgcmV0dXJuIHNsb3QgIT09IHZvaWQgMFxuICAgID8gc2xvdCgpIHx8IG90aGVyd2lzZVxuICAgIDogb3RoZXJ3aXNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoVW5pcXVlU2xvdCAoc2xvdCwgb3RoZXJ3aXNlKSB7XG4gIGlmIChzbG90ICE9PSB2b2lkIDApIHtcbiAgICBjb25zdCB2bm9kZSA9IHNsb3QoKVxuICAgIGlmICh2bm9kZSAhPT0gdm9pZCAwICYmIHZub2RlICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdm5vZGUuc2xpY2UoKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvdGhlcndpc2Vcbn1cblxuLyoqXG4gKiBTb3VyY2UgZGVmaW5pdGVseSBleGlzdHMsXG4gKiBzbyBpdCdzIG1lcmdlZCB3aXRoIHRoZSBwb3NzaWJsZSBzbG90XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoTWVyZ2VTbG90IChzbG90LCBzb3VyY2UpIHtcbiAgcmV0dXJuIHNsb3QgIT09IHZvaWQgMFxuICAgID8gc291cmNlLmNvbmNhdChzbG90KCkpXG4gICAgOiBzb3VyY2Vcbn1cblxuLyoqXG4gKiBNZXJnZSB3aXRoIHBvc3NpYmxlIHNsb3QsXG4gKiBldmVuIGlmIHNvdXJjZSBtaWdodCBub3QgZXhpc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhNZXJnZVNsb3RTYWZlbHkgKHNsb3QsIHNvdXJjZSkge1xuICBpZiAoc2xvdCA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHNvdXJjZVxuICB9XG5cbiAgcmV0dXJuIHNvdXJjZSAhPT0gdm9pZCAwXG4gICAgPyBzb3VyY2UuY29uY2F0KHNsb3QoKSlcbiAgICA6IHNsb3QoKVxufVxuXG4vKlxuICogKFN0cmluZykgIGtleSAgICAgICAtIHVuaXF1ZSB2bm9kZSBrZXlcbiAqIChCb29sZWFuKSBjb25kaXRpb24gLSBzaG91bGQgY2hhbmdlIE9OTFkgd2hlbiBhZGRpbmcvcmVtb3ZpbmcgZGlyZWN0aXZlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoRGlyIChcbiAgdGFnLFxuICBkYXRhLFxuICBjaGlsZHJlbixcbiAga2V5LFxuICBjb25kaXRpb24sXG4gIGdldERpcnNGblxuKSB7XG4gIGRhdGEua2V5ID0ga2V5ICsgY29uZGl0aW9uXG5cbiAgY29uc3Qgdm5vZGUgPSBoKHRhZywgZGF0YSwgY2hpbGRyZW4pXG5cbiAgcmV0dXJuIGNvbmRpdGlvbiA9PT0gdHJ1ZVxuICAgID8gd2l0aERpcmVjdGl2ZXModm5vZGUsIGdldERpcnNGbigpKVxuICAgIDogdm5vZGVcbn1cbiIsImltcG9ydCB7IGgsIGNvbXB1dGVkLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1c2VTaXplLCB7IHVzZVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLXNpemUvdXNlLXNpemUuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuY3JlYXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGhTbG90LCBoTWVyZ2VTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5yZW5kZXIvcmVuZGVyLmpzJ1xuXG5jb25zdCBkZWZhdWx0Vmlld0JveCA9ICcwIDAgMjQgMjQnXG5cbmNvbnN0IHNhbWVGbiA9IGkgPT4gaVxuY29uc3QgaW9uRm4gPSBpID0+IGBpb25pY29ucyAkeyBpIH1gXG5cbmNvbnN0IGxpYk1hcCA9IHtcbiAgJ21kaS0nOiBpID0+IGBtZGkgJHsgaSB9YCxcbiAgJ2ljb24tJzogc2FtZUZuLCAvLyBmb250YXdlc29tZSBlcXVpdlxuICAnYnQtJzogaSA9PiBgYnQgJHsgaSB9YCxcbiAgJ2V2YS0nOiBpID0+IGBldmEgJHsgaSB9YCxcbiAgJ2lvbi1tZCc6IGlvbkZuLFxuICAnaW9uLWlvcyc6IGlvbkZuLFxuICAnaW9uLWxvZ28nOiBpb25GbixcbiAgJ2ljb25mb250ICc6IHNhbWVGbixcbiAgJ3RpLSc6IGkgPT4gYHRoZW1pZnktaWNvbiAkeyBpIH1gLFxuICAnYmktJzogaSA9PiBgYm9vdHN0cmFwLWljb25zICR7IGkgfWAsXG4gICdpLSc6IHNhbWVGbiAvLyBVbm9DU1MgcHVyZSBpY29uc1xufVxuXG5jb25zdCBtYXRNYXAgPSB7XG4gIG9fOiAnLW91dGxpbmVkJyxcbiAgcl86ICctcm91bmQnLFxuICBzXzogJy1zaGFycCdcbn1cblxuY29uc3Qgc3ltTWFwID0ge1xuICBzeW1fb186ICctb3V0bGluZWQnLFxuICBzeW1fcl86ICctcm91bmRlZCcsXG4gIHN5bV9zXzogJy1zaGFycCdcbn1cblxuY29uc3QgbGliUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBPYmplY3Qua2V5cyhsaWJNYXApLmpvaW4oJ3wnKSArICcpJylcbmNvbnN0IG1hdFJFID0gbmV3IFJlZ0V4cCgnXignICsgT2JqZWN0LmtleXMobWF0TWFwKS5qb2luKCd8JykgKyAnKScpXG5jb25zdCBzeW1SRSA9IG5ldyBSZWdFeHAoJ14oJyArIE9iamVjdC5rZXlzKHN5bU1hcCkuam9pbignfCcpICsgJyknKVxuY29uc3QgbVJFID0gL15bTW1dXFxzP1stK10/XFwuP1xcZC9cbmNvbnN0IGltZ1JFID0gL15pbWc6L1xuY29uc3Qgc3ZnVXNlUkUgPSAvXnN2Z3VzZTovXG5jb25zdCBpb25SRSA9IC9eaW9uLS9cbmNvbnN0IGZhUkUgPSAvXihmYS0oY2xhc3NpY3xzaGFycHxzb2xpZHxyZWd1bGFyfGxpZ2h0fGJyYW5kc3xkdW90b25lfHRoaW4pfFtsZl1hW3NybGJka10/KSAvXG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdRSWNvbicsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VTaXplUHJvcHMsXG5cbiAgICB0YWc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdpJ1xuICAgIH0sXG5cbiAgICBuYW1lOiBTdHJpbmcsXG4gICAgY29sb3I6IFN0cmluZyxcbiAgICBsZWZ0OiBCb29sZWFuLFxuICAgIHJpZ2h0OiBCb29sZWFuXG4gIH0sXG5cbiAgc2V0dXAgKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCB7IHByb3h5OiB7ICRxIH0gfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gICAgY29uc3Qgc2l6ZVN0eWxlID0gdXNlU2l6ZShwcm9wcylcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3EtaWNvbidcbiAgICAgICsgKHByb3BzLmxlZnQgPT09IHRydWUgPyAnIG9uLWxlZnQnIDogJycpIC8vIFRPRE8gUXYzOiBkcm9wIHRoaXNcbiAgICAgICsgKHByb3BzLnJpZ2h0ID09PSB0cnVlID8gJyBvbi1yaWdodCcgOiAnJylcbiAgICAgICsgKHByb3BzLmNvbG9yICE9PSB2b2lkIDAgPyBgIHRleHQtJHsgcHJvcHMuY29sb3IgfWAgOiAnJylcbiAgICApXG5cbiAgICBjb25zdCB0eXBlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgbGV0IGNsc1xuICAgICAgbGV0IGljb24gPSBwcm9wcy5uYW1lXG5cbiAgICAgIGlmIChpY29uID09PSAnbm9uZScgfHwgIWljb24pIHtcbiAgICAgICAgcmV0dXJuIHsgbm9uZTogdHJ1ZSB9XG4gICAgICB9XG5cbiAgICAgIGlmICgkcS5pY29uTWFwRm4gIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgcmVzID0gJHEuaWNvbk1hcEZuKGljb24pXG4gICAgICAgIGlmIChyZXMgIT09IHZvaWQgMCkge1xuICAgICAgICAgIGlmIChyZXMuaWNvbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpY29uID0gcmVzLmljb25cbiAgICAgICAgICAgIGlmIChpY29uID09PSAnbm9uZScgfHwgIWljb24pIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgbm9uZTogdHJ1ZSB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgY2xzOiByZXMuY2xzLFxuICAgICAgICAgICAgICBjb250ZW50OiByZXMuY29udGVudCAhPT0gdm9pZCAwXG4gICAgICAgICAgICAgICAgPyByZXMuY29udGVudFxuICAgICAgICAgICAgICAgIDogJyAnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtUkUudGVzdChpY29uKSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBbIGRlZiwgdmlld0JveCA9IGRlZmF1bHRWaWV3Qm94IF0gPSBpY29uLnNwbGl0KCd8JylcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN2ZzogdHJ1ZSxcbiAgICAgICAgICB2aWV3Qm94LFxuICAgICAgICAgIG5vZGVzOiBkZWYuc3BsaXQoJyYmJykubWFwKHBhdGggPT4ge1xuICAgICAgICAgICAgY29uc3QgWyBkLCBzdHlsZSwgdHJhbnNmb3JtIF0gPSBwYXRoLnNwbGl0KCdAQCcpXG4gICAgICAgICAgICByZXR1cm4gaCgncGF0aCcsIHsgc3R5bGUsIGQsIHRyYW5zZm9ybSB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGltZ1JFLnRlc3QoaWNvbikgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpbWc6IHRydWUsXG4gICAgICAgICAgc3JjOiBpY29uLnN1YnN0cmluZyg0KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzdmdVc2VSRS50ZXN0KGljb24pID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IFsgZGVmLCB2aWV3Qm94ID0gZGVmYXVsdFZpZXdCb3ggXSA9IGljb24uc3BsaXQoJ3wnKVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3ZndXNlOiB0cnVlLFxuICAgICAgICAgIHNyYzogZGVmLnN1YnN0cmluZyg3KSxcbiAgICAgICAgICB2aWV3Qm94XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IGNvbnRlbnQgPSAnICdcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBpY29uLm1hdGNoKGxpYlJFKVxuXG4gICAgICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgICAgICBjbHMgPSBsaWJNYXBbIG1hdGNoZXNbIDEgXSBdKGljb24pXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChmYVJFLnRlc3QoaWNvbikgPT09IHRydWUpIHtcbiAgICAgICAgY2xzID0gaWNvblxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaW9uUkUudGVzdChpY29uKSA9PT0gdHJ1ZSkge1xuICAgICAgICBjbHMgPSBgaW9uaWNvbnMgaW9uLSR7ICRxLnBsYXRmb3JtLmlzLmlvcyA9PT0gdHJ1ZSA/ICdpb3MnIDogJ21kJyB9JHsgaWNvbi5zdWJzdHJpbmcoMykgfWBcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN5bVJFLnRlc3QoaWNvbikgPT09IHRydWUpIHtcbiAgICAgICAgLy8gXCJub3RyYW5zbGF0ZVwiIGNsYXNzIGlzIGZvciBHb29nbGUgVHJhbnNsYXRlXG4gICAgICAgIC8vIHRvIGF2b2lkIHRhbXBlcmluZyB3aXRoIE1hdGVyaWFsIFN5bWJvbHMgbGlnYXR1cmUgZm9udFxuICAgICAgICAvL1xuICAgICAgICAvLyBDYXV0aW9uOiBUbyBiZSBhYmxlIHRvIGFkZCBzdWZmaXggdG8gdGhlIGNsYXNzIG5hbWUsXG4gICAgICAgIC8vIGtlZXAgdGhlICdtYXRlcmlhbC1zeW1ib2xzJyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGNscyA9ICdub3RyYW5zbGF0ZSBtYXRlcmlhbC1zeW1ib2xzJ1xuXG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBpY29uLm1hdGNoKHN5bVJFKVxuICAgICAgICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgICAgICAgIGljb24gPSBpY29uLnN1YnN0cmluZyg2KVxuICAgICAgICAgIGNscyArPSBzeW1NYXBbIG1hdGNoZXNbIDEgXSBdXG4gICAgICAgIH1cblxuICAgICAgICBjb250ZW50ID0gaWNvblxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIFwibm90cmFuc2xhdGVcIiBjbGFzcyBpcyBmb3IgR29vZ2xlIFRyYW5zbGF0ZVxuICAgICAgICAvLyB0byBhdm9pZCB0YW1wZXJpbmcgd2l0aCBNYXRlcmlhbCBJY29ucyBsaWdhdHVyZSBmb250XG4gICAgICAgIC8vXG4gICAgICAgIC8vIENhdXRpb246IFRvIGJlIGFibGUgdG8gYWRkIHN1ZmZpeCB0byB0aGUgY2xhc3MgbmFtZSxcbiAgICAgICAgLy8ga2VlcCB0aGUgJ21hdGVyaWFsLWljb25zJyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGNscyA9ICdub3RyYW5zbGF0ZSBtYXRlcmlhbC1pY29ucydcblxuICAgICAgICBjb25zdCBtYXRjaGVzID0gaWNvbi5tYXRjaChtYXRSRSlcbiAgICAgICAgaWYgKG1hdGNoZXMgIT09IG51bGwpIHtcbiAgICAgICAgICBpY29uID0gaWNvbi5zdWJzdHJpbmcoMilcbiAgICAgICAgICBjbHMgKz0gbWF0TWFwWyBtYXRjaGVzWyAxIF0gXVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGVudCA9IGljb25cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2xzLFxuICAgICAgICBjb250ZW50XG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBjbGFzczogY2xhc3Nlcy52YWx1ZSxcbiAgICAgICAgc3R5bGU6IHNpemVTdHlsZS52YWx1ZSxcbiAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnLFxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZS52YWx1ZS5ub25lID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBoKHByb3BzLnRhZywgZGF0YSwgaFNsb3Qoc2xvdHMuZGVmYXVsdCkpXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlLnZhbHVlLmltZyA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gaChwcm9wcy50YWcsIGRhdGEsIGhNZXJnZVNsb3Qoc2xvdHMuZGVmYXVsdCwgW1xuICAgICAgICAgIGgoJ2ltZycsIHsgc3JjOiB0eXBlLnZhbHVlLnNyYyB9KVxuICAgICAgICBdKSlcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGUudmFsdWUuc3ZnID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBoKHByb3BzLnRhZywgZGF0YSwgaE1lcmdlU2xvdChzbG90cy5kZWZhdWx0LCBbXG4gICAgICAgICAgaCgnc3ZnJywge1xuICAgICAgICAgICAgdmlld0JveDogdHlwZS52YWx1ZS52aWV3Qm94IHx8ICcwIDAgMjQgMjQnXG4gICAgICAgICAgfSwgdHlwZS52YWx1ZS5ub2RlcylcbiAgICAgICAgXSkpXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlLnZhbHVlLnN2Z3VzZSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gaChwcm9wcy50YWcsIGRhdGEsIGhNZXJnZVNsb3Qoc2xvdHMuZGVmYXVsdCwgW1xuICAgICAgICAgIGgoJ3N2ZycsIHtcbiAgICAgICAgICAgIHZpZXdCb3g6IHR5cGUudmFsdWUudmlld0JveFxuICAgICAgICAgIH0sIFtcbiAgICAgICAgICAgIGgoJ3VzZScsIHsgJ3hsaW5rOmhyZWYnOiB0eXBlLnZhbHVlLnNyYyB9KVxuICAgICAgICAgIF0pXG4gICAgICAgIF0pKVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZS52YWx1ZS5jbHMgIT09IHZvaWQgMCkge1xuICAgICAgICBkYXRhLmNsYXNzICs9ICcgJyArIHR5cGUudmFsdWUuY2xzXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBoKHByb3BzLnRhZywgZGF0YSwgaE1lcmdlU2xvdChzbG90cy5kZWZhdWx0LCBbXG4gICAgICAgIHR5cGUudmFsdWUuY29udGVudFxuICAgICAgXSkpXG4gICAgfVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBRSWNvbiBmcm9tICcuLi9pY29uL1FJY29uLmpzJ1xuXG5pbXBvcnQgdXNlU2l6ZSwgeyB1c2VTaXplUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1zaXplL3VzZS1zaXplLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNyZWF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBoTWVyZ2VTbG90U2FmZWx5IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5yZW5kZXIvcmVuZGVyLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUUF2YXRhcicsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VTaXplUHJvcHMsXG5cbiAgICBmb250U2l6ZTogU3RyaW5nLFxuXG4gICAgY29sb3I6IFN0cmluZyxcbiAgICB0ZXh0Q29sb3I6IFN0cmluZyxcblxuICAgIGljb246IFN0cmluZyxcbiAgICBzcXVhcmU6IEJvb2xlYW4sXG4gICAgcm91bmRlZDogQm9vbGVhblxuICB9LFxuXG4gIHNldHVwIChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3Qgc2l6ZVN0eWxlID0gdXNlU2l6ZShwcm9wcylcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3EtYXZhdGFyJ1xuICAgICAgKyAocHJvcHMuY29sb3IgPyBgIGJnLSR7IHByb3BzLmNvbG9yIH1gIDogJycpXG4gICAgICArIChwcm9wcy50ZXh0Q29sb3IgPyBgIHRleHQtJHsgcHJvcHMudGV4dENvbG9yIH0gcS1jaGlwLS1jb2xvcmVkYCA6ICcnKVxuICAgICAgKyAoXG4gICAgICAgIHByb3BzLnNxdWFyZSA9PT0gdHJ1ZVxuICAgICAgICAgID8gJyBxLWF2YXRhci0tc3F1YXJlJ1xuICAgICAgICAgIDogKHByb3BzLnJvdW5kZWQgPT09IHRydWUgPyAnIHJvdW5kZWQtYm9yZGVycycgOiAnJylcbiAgICAgIClcbiAgICApXG5cbiAgICBjb25zdCBjb250ZW50U3R5bGUgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBwcm9wcy5mb250U2l6ZVxuICAgICAgICA/IHsgZm9udFNpemU6IHByb3BzLmZvbnRTaXplIH1cbiAgICAgICAgOiBudWxsXG4gICAgKSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBpY29uID0gcHJvcHMuaWNvbiAhPT0gdm9pZCAwXG4gICAgICAgID8gWyBoKFFJY29uLCB7IG5hbWU6IHByb3BzLmljb24gfSkgXVxuICAgICAgICA6IHZvaWQgMFxuXG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogY2xhc3Nlcy52YWx1ZSxcbiAgICAgICAgc3R5bGU6IHNpemVTdHlsZS52YWx1ZVxuICAgICAgfSwgW1xuICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWF2YXRhcl9fY29udGVudCByb3cgZmxleC1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuJyxcbiAgICAgICAgICBzdHlsZTogY29udGVudFN0eWxlLnZhbHVlXG4gICAgICAgIH0sIGhNZXJnZVNsb3RTYWZlbHkoc2xvdHMuZGVmYXVsdCwgaWNvbikpXG4gICAgICBdKVxuICAgIH1cbiAgfVxufSlcbiIsImltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHsgdXNlU2l6ZURlZmF1bHRzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS51c2Utc2l6ZS91c2Utc2l6ZS5qcydcblxuZXhwb3J0IGNvbnN0IHVzZVNwaW5uZXJQcm9wcyA9IHtcbiAgc2l6ZToge1xuICAgIHR5cGU6IFsgU3RyaW5nLCBOdW1iZXIgXSxcbiAgICBkZWZhdWx0OiAnMWVtJ1xuICB9LFxuICBjb2xvcjogU3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVNwaW5uZXIgKHByb3BzKSB7XG4gIHJldHVybiB7XG4gICAgY1NpemU6IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLnNpemUgaW4gdXNlU2l6ZURlZmF1bHRzXG4gICAgICAgID8gYCR7IHVzZVNpemVEZWZhdWx0c1sgcHJvcHMuc2l6ZSBdIH1weGBcbiAgICAgICAgOiBwcm9wcy5zaXplXG4gICAgKSksXG5cbiAgICBjbGFzc2VzOiBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3Etc3Bpbm5lcicgKyAocHJvcHMuY29sb3IgPyBgIHRleHQtJHsgcHJvcHMuY29sb3IgfWAgOiAnJylcbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1c2VTcGlubmVyLCB7IHVzZVNwaW5uZXJQcm9wcyB9IGZyb20gJy4vdXNlLXNwaW5uZXIuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuY3JlYXRlL2NyZWF0ZS5qcydcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FTcGlubmVyJyxcblxuICBwcm9wczoge1xuICAgIC4uLnVzZVNwaW5uZXJQcm9wcyxcblxuICAgIHRoaWNrbmVzczoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogNVxuICAgIH1cbiAgfSxcblxuICBzZXR1cCAocHJvcHMpIHtcbiAgICBjb25zdCB7IGNTaXplLCBjbGFzc2VzIH0gPSB1c2VTcGlubmVyKHByb3BzKVxuXG4gICAgcmV0dXJuICgpID0+IGgoJ3N2ZycsIHtcbiAgICAgIGNsYXNzOiBjbGFzc2VzLnZhbHVlICsgJyBxLXNwaW5uZXItbWF0JyxcbiAgICAgIHdpZHRoOiBjU2l6ZS52YWx1ZSxcbiAgICAgIGhlaWdodDogY1NpemUudmFsdWUsXG4gICAgICB2aWV3Qm94OiAnMjUgMjUgNTAgNTAnXG4gICAgfSwgW1xuICAgICAgaCgnY2lyY2xlJywge1xuICAgICAgICBjbGFzczogJ3BhdGgnLFxuICAgICAgICBjeDogJzUwJyxcbiAgICAgICAgY3k6ICc1MCcsXG4gICAgICAgIHI6ICcyMCcsXG4gICAgICAgIGZpbGw6ICdub25lJyxcbiAgICAgICAgc3Ryb2tlOiAnY3VycmVudENvbG9yJyxcbiAgICAgICAgJ3N0cm9rZS13aWR0aCc6IHByb3BzLnRoaWNrbmVzcyxcbiAgICAgICAgJ3N0cm9rZS1taXRlcmxpbWl0JzogJzEwJ1xuICAgICAgfSlcbiAgICBdKVxuICB9XG59KVxuIiwiaW1wb3J0IHsgdW5yZWYgfSBmcm9tICd2dWUnXG5cbmV4cG9ydCBmdW5jdGlvbiBvZmZzZXQgKGVsKSB7XG4gIGlmIChlbCA9PT0gd2luZG93KSB7XG4gICAgcmV0dXJuIHsgdG9wOiAwLCBsZWZ0OiAwIH1cbiAgfVxuICBjb25zdCB7IHRvcCwgbGVmdCB9ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgcmV0dXJuIHsgdG9wLCBsZWZ0IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0eWxlIChlbCwgcHJvcGVydHkpIHtcbiAgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGVpZ2h0IChlbCkge1xuICByZXR1cm4gZWwgPT09IHdpbmRvd1xuICAgID8gd2luZG93LmlubmVySGVpZ2h0XG4gICAgOiBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdpZHRoIChlbCkge1xuICByZXR1cm4gZWwgPT09IHdpbmRvd1xuICAgID8gd2luZG93LmlubmVyV2lkdGhcbiAgICA6IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjc3MgKGVsZW1lbnQsIGNzcykge1xuICBjb25zdCBzdHlsZSA9IGVsZW1lbnQuc3R5bGVcblxuICBmb3IgKGNvbnN0IHByb3AgaW4gY3NzKSB7XG4gICAgc3R5bGVbIHByb3AgXSA9IGNzc1sgcHJvcCBdXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNzc0JhdGNoIChlbGVtZW50cywgc3R5bGUpIHtcbiAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiBjc3MoZWwsIHN0eWxlKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWR5IChmbikge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSByZXR1cm5cblxuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ2xvYWRpbmcnKSB7XG4gICAgcmV0dXJuIGZuKClcbiAgfVxuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmbiwgZmFsc2UpXG59XG5cbi8vIGludGVybmFsXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudCAoZWwpIHtcbiAgaWYgKGVsID09PSB2b2lkIDAgfHwgZWwgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdm9pZCAwXG4gIH1cblxuICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgfHwgdm9pZCAwXG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB2b2lkIDBcbiAgICB9XG4gIH1cblxuICBjb25zdCB0YXJnZXQgPSB1bnJlZihlbClcbiAgaWYgKHRhcmdldCkge1xuICAgIHJldHVybiB0YXJnZXQuJGVsIHx8IHRhcmdldFxuICB9XG59XG5cbi8vIGludGVybmFsXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRIYXNGb2N1cyAoZWwsIGZvY3VzZWRFbCkge1xuICBpZiAoZWwgPT09IHZvaWQgMCB8fCBlbCA9PT0gbnVsbCB8fCBlbC5jb250YWlucyhmb2N1c2VkRWwpID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGZvciAobGV0IG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7IG5leHQgIT09IG51bGw7IG5leHQgPSBuZXh0Lm5leHRFbGVtZW50U2libGluZykge1xuICAgIGlmIChuZXh0LmNvbnRhaW5zKGZvY3VzZWRFbCkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgb2Zmc2V0LFxuICBzdHlsZSxcbiAgaGVpZ2h0LFxuICB3aWR0aCxcbiAgY3NzLFxuICBjc3NCYXRjaCxcbiAgcmVhZHlcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChmbiwgbGltaXQgPSAyNTApIHtcbiAgbGV0IHdhaXQgPSBmYWxzZSwgcmVzdWx0XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgvKiAuLi5hcmdzICovKSB7XG4gICAgaWYgKHdhaXQgPT09IGZhbHNlKSB7XG4gICAgICB3YWl0ID0gdHJ1ZVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHdhaXQgPSBmYWxzZSB9LCBsaW1pdClcbiAgICAgIHJlc3VsdCA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuY3JlYXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGNzcyB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbS9kb20uanMnXG5pbXBvcnQgeyBwb3NpdGlvbiwgc3RvcCwgYWRkRXZ0LCBjbGVhbkV2dCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50L2V2ZW50LmpzJ1xuaW1wb3J0IHsgaXNLZXlDb2RlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5rZXlib2FyZC9rZXktY29tcG9zaXRpb24uanMnXG5pbXBvcnQgdGhyb3R0bGUgZnJvbSAnLi4vLi4vdXRpbHMvdGhyb3R0bGUvdGhyb3R0bGUuanMnXG5pbXBvcnQgZ2V0U1NSUHJvcHMgZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5ub29wLXNzci1kaXJlY3RpdmUtdHJhbnNmb3JtL25vb3Atc3NyLWRpcmVjdGl2ZS10cmFuc2Zvcm0uanMnXG5cbmZ1bmN0aW9uIHNob3dSaXBwbGUgKGV2dCwgZWwsIGN0eCwgZm9yY2VDZW50ZXIpIHtcbiAgY3R4Lm1vZGlmaWVycy5zdG9wID09PSB0cnVlICYmIHN0b3AoZXZ0KVxuXG4gIGNvbnN0IGNvbG9yID0gY3R4Lm1vZGlmaWVycy5jb2xvclxuICBsZXQgY2VudGVyID0gY3R4Lm1vZGlmaWVycy5jZW50ZXJcbiAgY2VudGVyID0gY2VudGVyID09PSB0cnVlIHx8IGZvcmNlQ2VudGVyID09PSB0cnVlXG5cbiAgY29uc3RcbiAgICBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpLFxuICAgIGlubmVyTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSxcbiAgICBwb3MgPSBwb3NpdGlvbihldnQpLFxuICAgIHsgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0IH0gPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICBkaWFtZXRlciA9IE1hdGguc3FydCh3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0KSxcbiAgICByYWRpdXMgPSBkaWFtZXRlciAvIDIsXG4gICAgY2VudGVyWCA9IGAkeyAod2lkdGggLSBkaWFtZXRlcikgLyAyIH1weGAsXG4gICAgeCA9IGNlbnRlciA/IGNlbnRlclggOiBgJHsgcG9zLmxlZnQgLSBsZWZ0IC0gcmFkaXVzIH1weGAsXG4gICAgY2VudGVyWSA9IGAkeyAoaGVpZ2h0IC0gZGlhbWV0ZXIpIC8gMiB9cHhgLFxuICAgIHkgPSBjZW50ZXIgPyBjZW50ZXJZIDogYCR7IHBvcy50b3AgLSB0b3AgLSByYWRpdXMgfXB4YFxuXG4gIGlubmVyTm9kZS5jbGFzc05hbWUgPSAncS1yaXBwbGVfX2lubmVyJ1xuICBjc3MoaW5uZXJOb2RlLCB7XG4gICAgaGVpZ2h0OiBgJHsgZGlhbWV0ZXIgfXB4YCxcbiAgICB3aWR0aDogYCR7IGRpYW1ldGVyIH1weGAsXG4gICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlM2QoJHsgeCB9LCR7IHkgfSwwKSBzY2FsZTNkKC4yLC4yLDEpYCxcbiAgICBvcGFjaXR5OiAwXG4gIH0pXG5cbiAgbm9kZS5jbGFzc05hbWUgPSBgcS1yaXBwbGUkeyBjb2xvciA/ICcgdGV4dC0nICsgY29sb3IgOiAnJyB9YFxuICBub2RlLnNldEF0dHJpYnV0ZSgnZGlyJywgJ2x0cicpXG4gIG5vZGUuYXBwZW5kQ2hpbGQoaW5uZXJOb2RlKVxuICBlbC5hcHBlbmRDaGlsZChub2RlKVxuXG4gIGNvbnN0IGFib3J0ID0gKCkgPT4ge1xuICAgIG5vZGUucmVtb3ZlKClcbiAgICBjbGVhclRpbWVvdXQodGltZXIpXG4gIH1cbiAgY3R4LmFib3J0LnB1c2goYWJvcnQpXG5cbiAgbGV0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaW5uZXJOb2RlLmNsYXNzTGlzdC5hZGQoJ3EtcmlwcGxlX19pbm5lci0tZW50ZXInKVxuICAgIGlubmVyTm9kZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHsgY2VudGVyWCB9LCR7IGNlbnRlclkgfSwwKSBzY2FsZTNkKDEsMSwxKWBcbiAgICBpbm5lck5vZGUuc3R5bGUub3BhY2l0eSA9IDAuMlxuXG4gICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlubmVyTm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdxLXJpcHBsZV9faW5uZXItLWVudGVyJylcbiAgICAgIGlubmVyTm9kZS5jbGFzc0xpc3QuYWRkKCdxLXJpcHBsZV9faW5uZXItLWxlYXZlJylcbiAgICAgIGlubmVyTm9kZS5zdHlsZS5vcGFjaXR5ID0gMFxuXG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBub2RlLnJlbW92ZSgpXG4gICAgICAgIGN0eC5hYm9ydC5zcGxpY2UoY3R4LmFib3J0LmluZGV4T2YoYWJvcnQpLCAxKVxuICAgICAgfSwgMjc1KVxuICAgIH0sIDI1MClcbiAgfSwgNTApXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU1vZGlmaWVycyAoY3R4LCB7IG1vZGlmaWVycywgdmFsdWUsIGFyZyB9KSB7XG4gIGNvbnN0IGNmZyA9IE9iamVjdC5hc3NpZ24oe30sIGN0eC5jZmcucmlwcGxlLCBtb2RpZmllcnMsIHZhbHVlKVxuICBjdHgubW9kaWZpZXJzID0ge1xuICAgIGVhcmx5OiBjZmcuZWFybHkgPT09IHRydWUsXG4gICAgc3RvcDogY2ZnLnN0b3AgPT09IHRydWUsXG4gICAgY2VudGVyOiBjZmcuY2VudGVyID09PSB0cnVlLFxuICAgIGNvbG9yOiBjZmcuY29sb3IgfHwgYXJnLFxuICAgIGtleUNvZGVzOiBbXS5jb25jYXQoY2ZnLmtleUNvZGVzIHx8IDEzKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZURpcmVjdGl2ZShfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyB7IG5hbWU6ICdyaXBwbGUnLCBnZXRTU1JQcm9wcyB9XG4gIDoge1xuICAgICAgbmFtZTogJ3JpcHBsZScsXG5cbiAgICAgIGJlZm9yZU1vdW50IChlbCwgYmluZGluZykge1xuICAgICAgICBjb25zdCBjZmcgPSBiaW5kaW5nLmluc3RhbmNlLiQuYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcS5jb25maWcgfHwge31cblxuICAgICAgICBpZiAoY2ZnLnJpcHBsZSA9PT0gZmFsc2UpIHJldHVyblxuXG4gICAgICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgICBjZmcsXG4gICAgICAgICAgZW5hYmxlZDogYmluZGluZy52YWx1ZSAhPT0gZmFsc2UsXG4gICAgICAgICAgbW9kaWZpZXJzOiB7fSxcbiAgICAgICAgICBhYm9ydDogW10sXG5cbiAgICAgICAgICBzdGFydCAoZXZ0KSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGN0eC5lbmFibGVkID09PSB0cnVlXG4gICAgICAgICAgICAgICYmIGV2dC5xU2tpcFJpcHBsZSAhPT0gdHJ1ZVxuICAgICAgICAgICAgICAmJiBldnQudHlwZSA9PT0gKGN0eC5tb2RpZmllcnMuZWFybHkgPT09IHRydWUgPyAncG9pbnRlcmRvd24nIDogJ2NsaWNrJylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBzaG93UmlwcGxlKGV2dCwgZWwsIGN0eCwgZXZ0LnFLZXlFdmVudCA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuXG4gICAgICAgICAga2V5c3RhcnQ6IHRocm90dGxlKGV2dCA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGN0eC5lbmFibGVkID09PSB0cnVlXG4gICAgICAgICAgICAgICYmIGV2dC5xU2tpcFJpcHBsZSAhPT0gdHJ1ZVxuICAgICAgICAgICAgICAmJiBpc0tleUNvZGUoZXZ0LCBjdHgubW9kaWZpZXJzLmtleUNvZGVzKSA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAmJiBldnQudHlwZSA9PT0gYGtleSR7IGN0eC5tb2RpZmllcnMuZWFybHkgPT09IHRydWUgPyAnZG93bicgOiAndXAnIH1gXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgc2hvd1JpcHBsZShldnQsIGVsLCBjdHgsIHRydWUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMzAwKVxuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlTW9kaWZpZXJzKGN0eCwgYmluZGluZylcblxuICAgICAgICBlbC5fX3FyaXBwbGUgPSBjdHhcblxuICAgICAgICBhZGRFdnQoY3R4LCAnbWFpbicsIFtcbiAgICAgICAgICBbIGVsLCAncG9pbnRlcmRvd24nLCAnc3RhcnQnLCAncGFzc2l2ZScgXSxcbiAgICAgICAgICBbIGVsLCAnY2xpY2snLCAnc3RhcnQnLCAncGFzc2l2ZScgXSxcbiAgICAgICAgICBbIGVsLCAna2V5ZG93bicsICdrZXlzdGFydCcsICdwYXNzaXZlJyBdLFxuICAgICAgICAgIFsgZWwsICdrZXl1cCcsICdrZXlzdGFydCcsICdwYXNzaXZlJyBdXG4gICAgICAgIF0pXG4gICAgICB9LFxuXG4gICAgICB1cGRhdGVkIChlbCwgYmluZGluZykge1xuICAgICAgICBpZiAoYmluZGluZy5vbGRWYWx1ZSAhPT0gYmluZGluZy52YWx1ZSkge1xuICAgICAgICAgIGNvbnN0IGN0eCA9IGVsLl9fcXJpcHBsZVxuICAgICAgICAgIGlmIChjdHggIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY3R4LmVuYWJsZWQgPSBiaW5kaW5nLnZhbHVlICE9PSBmYWxzZVxuXG4gICAgICAgICAgICBpZiAoY3R4LmVuYWJsZWQgPT09IHRydWUgJiYgT2JqZWN0KGJpbmRpbmcudmFsdWUpID09PSBiaW5kaW5nLnZhbHVlKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZU1vZGlmaWVycyhjdHgsIGJpbmRpbmcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBiZWZvcmVVbm1vdW50IChlbCkge1xuICAgICAgICBjb25zdCBjdHggPSBlbC5fX3FyaXBwbGVcbiAgICAgICAgaWYgKGN0eCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgY3R4LmFib3J0LmZvckVhY2goZm4gPT4geyBmbigpIH0pXG4gICAgICAgICAgY2xlYW5FdnQoY3R4LCAnbWFpbicpXG4gICAgICAgICAgZGVsZXRlIGVsLl9xcmlwcGxlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4pXG4iLCJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IGFsaWduTWFwID0ge1xuICBsZWZ0OiAnc3RhcnQnLFxuICBjZW50ZXI6ICdjZW50ZXInLFxuICByaWdodDogJ2VuZCcsXG4gIGJldHdlZW46ICdiZXR3ZWVuJyxcbiAgYXJvdW5kOiAnYXJvdW5kJyxcbiAgZXZlbmx5OiAnZXZlbmx5JyxcbiAgc3RyZXRjaDogJ3N0cmV0Y2gnXG59XG5cbmV4cG9ydCBjb25zdCBhbGlnblZhbHVlcyA9IE9iamVjdC5rZXlzKGFsaWduTWFwKVxuXG5leHBvcnQgY29uc3QgdXNlQWxpZ25Qcm9wcyA9IHtcbiAgYWxpZ246IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdmFsaWRhdG9yOiB2ID0+IGFsaWduVmFsdWVzLmluY2x1ZGVzKHYpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHByb3BzKSB7XG4gIC8vIHJldHVybiBhbGlnbkNsYXNzXG4gIHJldHVybiBjb21wdXRlZCgoKSA9PiB7XG4gICAgY29uc3QgYWxpZ24gPSBwcm9wcy5hbGlnbiA9PT0gdm9pZCAwXG4gICAgICA/IHByb3BzLnZlcnRpY2FsID09PSB0cnVlID8gJ3N0cmV0Y2gnIDogJ2xlZnQnXG4gICAgICA6IHByb3BzLmFsaWduXG5cbiAgICByZXR1cm4gYCR7IHByb3BzLnZlcnRpY2FsID09PSB0cnVlID8gJ2l0ZW1zJyA6ICdqdXN0aWZ5JyB9LSR7IGFsaWduTWFwWyBhbGlnbiBdIH1gXG4gIH0pXG59XG4iLCIvLyBjb3BpZWQgdG8gZG9jcyB0b29cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJlbnRQcm94eSAocHJveHkpIHtcbiAgaWYgKE9iamVjdChwcm94eS4kcGFyZW50KSA9PT0gcHJveHkuJHBhcmVudCkge1xuICAgIHJldHVybiBwcm94eS4kcGFyZW50XG4gIH1cblxuICBsZXQgeyBwYXJlbnQgfSA9IHByb3h5LiRcblxuICB3aGlsZSAoT2JqZWN0KHBhcmVudCkgPT09IHBhcmVudCkge1xuICAgIGlmIChPYmplY3QocGFyZW50LnByb3h5KSA9PT0gcGFyZW50LnByb3h5KSB7XG4gICAgICByZXR1cm4gcGFyZW50LnByb3h5XG4gICAgfVxuXG4gICAgcGFyZW50ID0gcGFyZW50LnBhcmVudFxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbGxOb3JtYWxpemVkVk5vZGVzIChjaGlsZHJlbiwgdm5vZGUpIHtcbiAgaWYgKHR5cGVvZiB2bm9kZS50eXBlID09PSAnc3ltYm9sJykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZub2RlLmNoaWxkcmVuKSA9PT0gdHJ1ZSkge1xuICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgIGZpbGxOb3JtYWxpemVkVk5vZGVzKGNoaWxkcmVuLCBjaGlsZClcbiAgICAgIH0pXG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGNoaWxkcmVuLmFkZCh2bm9kZSlcbiAgfVxufVxuXG4vLyB2bm9kZXMgZnJvbSByZW5kZXJlZCBpbiBhZHZhbmNlZCBzbG90c1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5vcm1hbGl6ZWRWTm9kZXMgKHZub2Rlcykge1xuICBjb25zdCBjaGlsZHJlbiA9IG5ldyBTZXQoKVxuXG4gIHZub2Rlcy5mb3JFYWNoKHZub2RlID0+IHtcbiAgICBmaWxsTm9ybWFsaXplZFZOb2RlcyhjaGlsZHJlbiwgdm5vZGUpXG4gIH0pXG5cbiAgcmV0dXJuIEFycmF5LmZyb20oY2hpbGRyZW4pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2bUhhc1JvdXRlciAodm0pIHtcbiAgcmV0dXJuIHZtLmFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJHJvdXRlciAhPT0gdm9pZCAwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2bUlzRGVzdHJveWVkICh2bSkge1xuICByZXR1cm4gdm0uaXNVbm1vdW50ZWQgPT09IHRydWUgfHwgdm0uaXNEZWFjdGl2YXRlZCA9PT0gdHJ1ZVxufVxuIiwiLypcbiAqIEluc3BpcmVkIGJ5IFJvdXRlckxpbmsgZnJvbSBWdWUgUm91dGVyXG4gKiAgLS0+IEFQSSBzaG91bGQgbWF0Y2ghXG4gKi9cblxuaW1wb3J0IHsgY29tcHV0ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHsgdm1IYXNSb3V0ZXIgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLnZtL3ZtLmpzJ1xuXG4vLyBHZXQgdGhlIG9yaWdpbmFsIHBhdGggdmFsdWUgb2YgYSByZWNvcmQgYnkgZm9sbG93aW5nIGl0cyBhbGlhc09mXG5mdW5jdGlvbiBnZXRPcmlnaW5hbFBhdGggKHJlY29yZCkge1xuICByZXR1cm4gcmVjb3JkXG4gICAgPyAoXG4gICAgICAgIHJlY29yZC5hbGlhc09mXG4gICAgICAgICAgPyByZWNvcmQuYWxpYXNPZi5wYXRoXG4gICAgICAgICAgOiByZWNvcmQucGF0aFxuICAgICAgKSA6ICcnXG59XG5cbmZ1bmN0aW9uIGlzU2FtZVJvdXRlUmVjb3JkIChhLCBiKSB7XG4gIC8vIHNpbmNlIHRoZSBvcmlnaW5hbCByZWNvcmQgaGFzIGFuIHVuZGVmaW5lZCB2YWx1ZSBmb3IgYWxpYXNPZlxuICAvLyBidXQgYWxsIGFsaWFzZXMgcG9pbnQgdG8gdGhlIG9yaWdpbmFsIHJlY29yZCwgdGhpcyB3aWxsIGFsd2F5cyBjb21wYXJlXG4gIC8vIHRoZSBvcmlnaW5hbCByZWNvcmRcbiAgcmV0dXJuIChhLmFsaWFzT2YgfHwgYSkgPT09IChiLmFsaWFzT2YgfHwgYilcbn1cblxuZnVuY3Rpb24gaW5jbHVkZXNQYXJhbXMgKG91dGVyLCBpbm5lcikge1xuICBmb3IgKGNvbnN0IGtleSBpbiBpbm5lcikge1xuICAgIGNvbnN0XG4gICAgICBpbm5lclZhbHVlID0gaW5uZXJbIGtleSBdLFxuICAgICAgb3V0ZXJWYWx1ZSA9IG91dGVyWyBrZXkgXVxuXG4gICAgaWYgKHR5cGVvZiBpbm5lclZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGlubmVyVmFsdWUgIT09IG91dGVyVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKFxuICAgICAgQXJyYXkuaXNBcnJheShvdXRlclZhbHVlKSA9PT0gZmFsc2VcbiAgICAgIHx8IG91dGVyVmFsdWUubGVuZ3RoICE9PSBpbm5lclZhbHVlLmxlbmd0aFxuICAgICAgfHwgaW5uZXJWYWx1ZS5zb21lKCh2YWx1ZSwgaSkgPT4gdmFsdWUgIT09IG91dGVyVmFsdWVbIGkgXSlcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIGlzRXF1aXZhbGVudEFycmF5IChhLCBiKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGIpID09PSB0cnVlXG4gICAgPyBhLmxlbmd0aCA9PT0gYi5sZW5ndGggJiYgYS5ldmVyeSgodmFsdWUsIGkpID0+IHZhbHVlID09PSBiWyBpIF0pXG4gICAgOiBhLmxlbmd0aCA9PT0gMSAmJiBhWyAwIF0gPT09IGJcbn1cblxuZnVuY3Rpb24gaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtc1ZhbHVlIChhLCBiKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGEpID09PSB0cnVlXG4gICAgPyBpc0VxdWl2YWxlbnRBcnJheShhLCBiKVxuICAgIDogKFxuICAgICAgICBBcnJheS5pc0FycmF5KGIpID09PSB0cnVlXG4gICAgICAgICAgPyBpc0VxdWl2YWxlbnRBcnJheShiLCBhKVxuICAgICAgICAgIDogYSA9PT0gYlxuICAgICAgKVxufVxuXG5mdW5jdGlvbiBpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zIChhLCBiKSB7XG4gIGlmIChPYmplY3Qua2V5cyhhKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZm9yIChjb25zdCBrZXkgaW4gYSkge1xuICAgIGlmIChpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zVmFsdWUoYVsga2V5IF0sIGJbIGtleSBdKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBjb25zdCB1c2VSb3V0ZXJMaW5rTm9uTWF0Y2hpbmdQcm9wcyA9IHtcbiAgLy8gcm91dGVyLWxpbmtcbiAgdG86IFsgU3RyaW5nLCBPYmplY3QgXSxcbiAgcmVwbGFjZTogQm9vbGVhbixcblxuICAvLyByZWd1bGFyIDxhPiBsaW5rXG4gIGhyZWY6IFN0cmluZyxcbiAgdGFyZ2V0OiBTdHJpbmcsXG5cbiAgLy8gc3RhdGVcbiAgZGlzYWJsZTogQm9vbGVhblxufVxuXG5leHBvcnQgY29uc3QgdXNlUm91dGVyTGlua1Byb3BzID0ge1xuICAuLi51c2VSb3V0ZXJMaW5rTm9uTWF0Y2hpbmdQcm9wcyxcblxuICAvLyByb3V0ZXItbGlua1xuICBleGFjdDogQm9vbGVhbixcbiAgYWN0aXZlQ2xhc3M6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ3Etcm91dGVyLWxpbmstLWFjdGl2ZSdcbiAgfSxcbiAgZXhhY3RBY3RpdmVDbGFzczoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAncS1yb3V0ZXItbGluay0tZXhhY3QtYWN0aXZlJ1xuICB9XG59XG5cbi8vIGV4dGVybmFsIHByb3BzOiB0eXBlLCB0YWdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHsgZmFsbGJhY2tUYWcsIHVzZURpc2FibGVGb3JSb3V0ZXJMaW5rUHJvcHMgPSB0cnVlIH0gPSB7fSkge1xuICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gIGNvbnN0IHsgcHJvcHMsIHByb3h5LCBlbWl0IH0gPSB2bVxuXG4gIGNvbnN0IGhhc1JvdXRlciA9IHZtSGFzUm91dGVyKHZtKVxuICBjb25zdCBoYXNIcmVmTGluayA9IGNvbXB1dGVkKCgpID0+IHByb3BzLmRpc2FibGUgIT09IHRydWUgJiYgcHJvcHMuaHJlZiAhPT0gdm9pZCAwKVxuXG4gIC8vIGZvciBwZXJmIHJlYXNvbnMsIHdlIHVzZSBtaW5pbXVtIGFtb3VudCBvZiBydW50aW1lIHdvcmtcbiAgY29uc3QgaGFzUm91dGVyTGlua1Byb3BzID0gdXNlRGlzYWJsZUZvclJvdXRlckxpbmtQcm9wcyA9PT0gdHJ1ZVxuICAgID8gY29tcHV0ZWQoKCkgPT5cbiAgICAgIGhhc1JvdXRlciA9PT0gdHJ1ZVxuICAgICAgJiYgcHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZVxuICAgICAgJiYgaGFzSHJlZkxpbmsudmFsdWUgIT09IHRydWVcbiAgICAgICYmIHByb3BzLnRvICE9PSB2b2lkIDAgJiYgcHJvcHMudG8gIT09IG51bGwgJiYgcHJvcHMudG8gIT09ICcnXG4gICAgKVxuICAgIDogY29tcHV0ZWQoKCkgPT5cbiAgICAgIGhhc1JvdXRlciA9PT0gdHJ1ZVxuICAgICAgJiYgaGFzSHJlZkxpbmsudmFsdWUgIT09IHRydWVcbiAgICAgICYmIHByb3BzLnRvICE9PSB2b2lkIDAgJiYgcHJvcHMudG8gIT09IG51bGwgJiYgcHJvcHMudG8gIT09ICcnXG4gICAgKVxuXG4gIGNvbnN0IHJlc29sdmVkTGluayA9IGNvbXB1dGVkKCgpID0+IChcbiAgICBoYXNSb3V0ZXJMaW5rUHJvcHMudmFsdWUgPT09IHRydWVcbiAgICAgID8gZ2V0TGluayhwcm9wcy50bylcbiAgICAgIDogbnVsbFxuICApKVxuXG4gIGNvbnN0IGhhc1JvdXRlckxpbmsgPSBjb21wdXRlZCgoKSA9PiByZXNvbHZlZExpbmsudmFsdWUgIT09IG51bGwpXG4gIGNvbnN0IGhhc0xpbmsgPSBjb21wdXRlZCgoKSA9PiBoYXNIcmVmTGluay52YWx1ZSA9PT0gdHJ1ZSB8fCBoYXNSb3V0ZXJMaW5rLnZhbHVlID09PSB0cnVlKVxuXG4gIGNvbnN0IGxpbmtUYWcgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgcHJvcHMudHlwZSA9PT0gJ2EnIHx8IGhhc0xpbmsudmFsdWUgPT09IHRydWVcbiAgICAgID8gJ2EnXG4gICAgICA6IChwcm9wcy50YWcgfHwgZmFsbGJhY2tUYWcgfHwgJ2RpdicpXG4gICkpXG5cbiAgY29uc3QgbGlua0F0dHJzID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIGhhc0hyZWZMaW5rLnZhbHVlID09PSB0cnVlXG4gICAgICA/IHtcbiAgICAgICAgICBocmVmOiBwcm9wcy5ocmVmLFxuICAgICAgICAgIHRhcmdldDogcHJvcHMudGFyZ2V0XG4gICAgICAgIH1cbiAgICAgIDogKFxuICAgICAgICAgIGhhc1JvdXRlckxpbmsudmFsdWUgPT09IHRydWVcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGhyZWY6IHJlc29sdmVkTGluay52YWx1ZS5ocmVmLFxuICAgICAgICAgICAgICAgIHRhcmdldDogcHJvcHMudGFyZ2V0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge31cbiAgICAgICAgKVxuICApKVxuXG4gIGNvbnN0IGxpbmtBY3RpdmVJbmRleCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBpZiAoaGFzUm91dGVyTGluay52YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIGNvbnN0XG4gICAgICB7IG1hdGNoZWQgfSA9IHJlc29sdmVkTGluay52YWx1ZSxcbiAgICAgIHsgbGVuZ3RoIH0gPSBtYXRjaGVkLFxuICAgICAgcm91dGVNYXRjaGVkID0gbWF0Y2hlZFsgbGVuZ3RoIC0gMSBdXG5cbiAgICBpZiAocm91dGVNYXRjaGVkID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRNYXRjaGVkID0gcHJveHkuJHJvdXRlLm1hdGNoZWRcblxuICAgIGlmIChjdXJyZW50TWF0Y2hlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIGNvbnN0IGluZGV4ID0gY3VycmVudE1hdGNoZWQuZmluZEluZGV4KFxuICAgICAgaXNTYW1lUm91dGVSZWNvcmQuYmluZChudWxsLCByb3V0ZU1hdGNoZWQpXG4gICAgKVxuXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGluZGV4XG4gICAgfVxuXG4gICAgLy8gcG9zc2libGUgcGFyZW50IHJlY29yZFxuICAgIGNvbnN0IHBhcmVudFJlY29yZFBhdGggPSBnZXRPcmlnaW5hbFBhdGgobWF0Y2hlZFsgbGVuZ3RoIC0gMiBdKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIC8vIHdlIGFyZSBkZWFsaW5nIHdpdGggbmVzdGVkIHJvdXRlc1xuICAgICAgbGVuZ3RoID4gMVxuICAgICAgLy8gaWYgdGhlIHBhcmVudCBhbmQgbWF0Y2hlZCByb3V0ZSBoYXZlIHRoZSBzYW1lIHBhdGgsIHRoaXMgbGluayBpc1xuICAgICAgLy8gcmVmZXJyaW5nIHRvIHRoZSBlbXB0eSBjaGlsZC4gT3Igd2UgY3VycmVudGx5IGFyZSBvbiBhIGRpZmZlcmVudFxuICAgICAgLy8gY2hpbGQgb2YgdGhlIHNhbWUgcGFyZW50XG4gICAgICAmJiBnZXRPcmlnaW5hbFBhdGgocm91dGVNYXRjaGVkKSA9PT0gcGFyZW50UmVjb3JkUGF0aFxuICAgICAgLy8gYXZvaWQgY29tcGFyaW5nIHRoZSBjaGlsZCB3aXRoIGl0cyBwYXJlbnRcbiAgICAgICYmIGN1cnJlbnRNYXRjaGVkWyBjdXJyZW50TWF0Y2hlZC5sZW5ndGggLSAxIF0ucGF0aCAhPT0gcGFyZW50UmVjb3JkUGF0aFxuICAgICAgICA/IGN1cnJlbnRNYXRjaGVkLmZpbmRJbmRleChcbiAgICAgICAgICBpc1NhbWVSb3V0ZVJlY29yZC5iaW5kKG51bGwsIG1hdGNoZWRbIGxlbmd0aCAtIDIgXSlcbiAgICAgICAgKVxuICAgICAgICA6IGluZGV4XG4gICAgKVxuICB9KVxuXG4gIGNvbnN0IGxpbmtJc0FjdGl2ZSA9IGNvbXB1dGVkKCgpID0+XG4gICAgaGFzUm91dGVyTGluay52YWx1ZSA9PT0gdHJ1ZVxuICAgICYmIGxpbmtBY3RpdmVJbmRleC52YWx1ZSAhPT0gLTFcbiAgICAmJiBpbmNsdWRlc1BhcmFtcyhwcm94eS4kcm91dGUucGFyYW1zLCByZXNvbHZlZExpbmsudmFsdWUucGFyYW1zKVxuICApXG5cbiAgY29uc3QgbGlua0lzRXhhY3RBY3RpdmUgPSBjb21wdXRlZCgoKSA9PlxuICAgIGxpbmtJc0FjdGl2ZS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgJiYgbGlua0FjdGl2ZUluZGV4LnZhbHVlID09PSBwcm94eS4kcm91dGUubWF0Y2hlZC5sZW5ndGggLSAxXG4gICAgICAmJiBpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zKHByb3h5LiRyb3V0ZS5wYXJhbXMsIHJlc29sdmVkTGluay52YWx1ZS5wYXJhbXMpXG4gIClcblxuICBjb25zdCBsaW5rQ2xhc3MgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgaGFzUm91dGVyTGluay52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgPyAoXG4gICAgICAgICAgbGlua0lzRXhhY3RBY3RpdmUudmFsdWUgPT09IHRydWVcbiAgICAgICAgICAgID8gYCAkeyBwcm9wcy5leGFjdEFjdGl2ZUNsYXNzIH0gJHsgcHJvcHMuYWN0aXZlQ2xhc3MgfWBcbiAgICAgICAgICAgIDogKFxuICAgICAgICAgICAgICAgIHByb3BzLmV4YWN0ID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICAgICAgICA6IChsaW5rSXNBY3RpdmUudmFsdWUgPT09IHRydWUgPyBgICR7IHByb3BzLmFjdGl2ZUNsYXNzIH1gIDogJycpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgOiAnJ1xuICApKVxuXG4gIGZ1bmN0aW9uIGdldExpbmsgKHRvKSB7XG4gICAgdHJ5IHsgcmV0dXJuIHByb3h5LiRyb3V0ZXIucmVzb2x2ZSh0bykgfVxuICAgIGNhdGNoIChfKSB7fVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBQcm9taXNlPFJvdXRlckVycm9yIHwgZmFsc2UgfCB1bmRlZmluZWQ+XG4gICAqL1xuICBmdW5jdGlvbiBuYXZpZ2F0ZVRvUm91dGVyTGluayAoXG4gICAgZSxcbiAgICB7IHJldHVyblJvdXRlckVycm9yLCB0byA9IHByb3BzLnRvLCByZXBsYWNlID0gcHJvcHMucmVwbGFjZSB9ID0ge31cbiAgKSB7XG4gICAgaWYgKHByb3BzLmRpc2FibGUgPT09IHRydWUpIHtcbiAgICAgIC8vIGVuc3VyZSBuYXRpdmUgbmF2aWdhdGlvbiBpcyBwcmV2ZW50ZWQgaW4gYWxsIGNhc2VzLFxuICAgICAgLy8gbGlrZSB3aGVuIHVzZURpc2FibGVGb3JSb3V0ZXJMaW5rUHJvcHMgPT09IGZhbHNlIChRUm91dGVUYWIpXG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXM7XG4gICAgICAvLyBzaG91bGQgbWF0Y2ggUm91dGVyTGluayBmcm9tIFZ1ZSBSb3V0ZXJcbiAgICAgIGUubWV0YUtleSB8fCBlLmFsdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleVxuXG4gICAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuICAgICAgfHwgKGUuYnV0dG9uICE9PSB2b2lkIDAgJiYgZS5idXR0b24gIT09IDApXG5cbiAgICAgIC8vIGRvbid0IHJlZGlyZWN0IGlmIGl0IHNob3VsZCBvcGVuIGluIGEgbmV3IHdpbmRvd1xuICAgICAgfHwgcHJvcHMudGFyZ2V0ID09PSAnX2JsYW5rJ1xuICAgICkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcbiAgICB9XG5cbiAgICAvLyBoaW5kZXIgdGhlIG5hdGl2ZSBuYXZpZ2F0aW9uXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAvLyB0aGVuKCkgY2FuIGFsc28gcmV0dXJuIGEgXCJzb2Z0XCIgcm91dGVyIGVycm9yIChWdWUgUm91dGVyIGJlaGF2aW9yKVxuICAgIGNvbnN0IHByb21pc2UgPSBwcm94eS4kcm91dGVyWyByZXBsYWNlID09PSB0cnVlID8gJ3JlcGxhY2UnIDogJ3B1c2gnIF0odG8pXG5cbiAgICByZXR1cm4gcmV0dXJuUm91dGVyRXJyb3IgPT09IHRydWVcbiAgICAgID8gcHJvbWlzZVxuICAgICAgLy8gZWxzZSBjYXRjaGluZyBoYXJkIGVycm9ycyBhbmQgYWxzbyBcInNvZnRcIiBvbmVzIC0gdGhlbihlcnIgPT4gLi4uKVxuICAgICAgOiBwcm9taXNlLnRoZW4oKCkgPT4ge30pLmNhdGNoKCgpID0+IHt9KVxuICB9XG5cbiAgLy8gd2FybmluZyEgZW5zdXJlIHRoYXQgdGhlIGNvbXBvbmVudCB1c2luZyBpdCBoYXMgJ2NsaWNrJyBpbmNsdWRlZCBpbiBpdHMgJ2VtaXRzJyBkZWZpbml0aW9uIHByb3BcbiAgZnVuY3Rpb24gbmF2aWdhdGVPbkNsaWNrIChlKSB7XG4gICAgaWYgKGhhc1JvdXRlckxpbmsudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGNvbnN0IGdvID0gb3B0cyA9PiBuYXZpZ2F0ZVRvUm91dGVyTGluayhlLCBvcHRzKVxuXG4gICAgICBlbWl0KCdjbGljaycsIGUsIGdvKVxuICAgICAgZS5kZWZhdWx0UHJldmVudGVkICE9PSB0cnVlICYmIGdvKClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBlbWl0KCdjbGljaycsIGUpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBoYXNSb3V0ZXJMaW5rLFxuICAgIGhhc0hyZWZMaW5rLFxuICAgIGhhc0xpbmssXG5cbiAgICBsaW5rVGFnLFxuICAgIHJlc29sdmVkTGluayxcbiAgICBsaW5rSXNBY3RpdmUsXG4gICAgbGlua0lzRXhhY3RBY3RpdmUsXG4gICAgbGlua0NsYXNzLFxuICAgIGxpbmtBdHRycyxcblxuICAgIGdldExpbmssXG4gICAgbmF2aWdhdGVUb1JvdXRlckxpbmssXG4gICAgbmF2aWdhdGVPbkNsaWNrXG4gIH1cbn1cbiIsImltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlQWxpZ24sIHsgdXNlQWxpZ25Qcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWFsaWduL3VzZS1hbGlnbi5qcydcbmltcG9ydCB1c2VTaXplLCB7IHVzZVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLXNpemUvdXNlLXNpemUuanMnXG5pbXBvcnQgdXNlUm91dGVyTGluaywgeyB1c2VSb3V0ZXJMaW5rTm9uTWF0Y2hpbmdQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLXJvdXRlci1saW5rL3VzZS1yb3V0ZXItbGluay5qcydcblxuZXhwb3J0IGNvbnN0IGJ0blBhZGRpbmcgPSB7XG4gIG5vbmU6IDAsXG4gIHhzOiA0LFxuICBzbTogOCxcbiAgbWQ6IDE2LFxuICBsZzogMjQsXG4gIHhsOiAzMlxufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdFNpemVzID0ge1xuICB4czogOCxcbiAgc206IDEwLFxuICBtZDogMTQsXG4gIGxnOiAyMCxcbiAgeGw6IDI0XG59XG5cbmNvbnN0IGZvcm1UeXBlcyA9IFsgJ2J1dHRvbicsICdzdWJtaXQnLCAncmVzZXQnIF1cbmNvbnN0IG1lZGlhVHlwZVJFID0gL1teXFxzXVxcL1teXFxzXS9cblxuZXhwb3J0IGNvbnN0IGJ0bkRlc2lnbk9wdGlvbnMgPSBbICdmbGF0JywgJ291dGxpbmUnLCAncHVzaCcsICd1bmVsZXZhdGVkJyBdXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCdG5EZXNpZ24gKHByb3BzLCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKHByb3BzLmZsYXQgPT09IHRydWUpIHJldHVybiAnZmxhdCdcbiAgaWYgKHByb3BzLm91dGxpbmUgPT09IHRydWUpIHJldHVybiAnb3V0bGluZSdcbiAgaWYgKHByb3BzLnB1c2ggPT09IHRydWUpIHJldHVybiAncHVzaCdcbiAgaWYgKHByb3BzLnVuZWxldmF0ZWQgPT09IHRydWUpIHJldHVybiAndW5lbGV2YXRlZCdcbiAgcmV0dXJuIGRlZmF1bHRWYWx1ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnRuRGVzaWduQXR0ciAocHJvcHMpIHtcbiAgY29uc3QgZGVzaWduID0gZ2V0QnRuRGVzaWduKHByb3BzKVxuICByZXR1cm4gZGVzaWduICE9PSB2b2lkIDBcbiAgICA/IHsgWyBkZXNpZ24gXTogdHJ1ZSB9XG4gICAgOiB7fVxufVxuXG5leHBvcnQgY29uc3Qgbm9uUm91bmRCdG5Qcm9wcyA9IHtcbiAgLi4udXNlU2l6ZVByb3BzLFxuICAuLi51c2VSb3V0ZXJMaW5rTm9uTWF0Y2hpbmdQcm9wcyxcblxuICB0eXBlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICdidXR0b24nXG4gIH0sXG5cbiAgbGFiZWw6IFsgTnVtYmVyLCBTdHJpbmcgXSxcbiAgaWNvbjogU3RyaW5nLFxuICBpY29uUmlnaHQ6IFN0cmluZyxcblxuICAuLi5idG5EZXNpZ25PcHRpb25zLnJlZHVjZShcbiAgICAoYWNjLCB2YWwpID0+IChhY2NbIHZhbCBdID0gQm9vbGVhbikgJiYgYWNjLFxuICAgIHt9XG4gICksXG5cbiAgc3F1YXJlOiBCb29sZWFuLFxuICByb3VuZGVkOiBCb29sZWFuLFxuICBnbG9zc3k6IEJvb2xlYW4sXG5cbiAgc2l6ZTogU3RyaW5nLFxuICBmYWI6IEJvb2xlYW4sXG4gIGZhYk1pbmk6IEJvb2xlYW4sXG4gIHBhZGRpbmc6IFN0cmluZyxcblxuICBjb2xvcjogU3RyaW5nLFxuICB0ZXh0Q29sb3I6IFN0cmluZyxcbiAgbm9DYXBzOiBCb29sZWFuLFxuICBub1dyYXA6IEJvb2xlYW4sXG4gIGRlbnNlOiBCb29sZWFuLFxuXG4gIHRhYmluZGV4OiBbIE51bWJlciwgU3RyaW5nIF0sXG5cbiAgcmlwcGxlOiB7XG4gICAgdHlwZTogWyBCb29sZWFuLCBPYmplY3QgXSxcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0sXG5cbiAgYWxpZ246IHtcbiAgICAuLi51c2VBbGlnblByb3BzLmFsaWduLFxuICAgIGRlZmF1bHQ6ICdjZW50ZXInXG4gIH0sXG4gIHN0YWNrOiBCb29sZWFuLFxuICBzdHJldGNoOiBCb29sZWFuLFxuICBsb2FkaW5nOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBudWxsXG4gIH0sXG4gIGRpc2FibGU6IEJvb2xlYW5cbn1cblxuZXhwb3J0IGNvbnN0IHVzZUJ0blByb3BzID0ge1xuICAuLi5ub25Sb3VuZEJ0blByb3BzLFxuICByb3VuZDogQm9vbGVhblxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocHJvcHMpIHtcbiAgY29uc3Qgc2l6ZVN0eWxlID0gdXNlU2l6ZShwcm9wcywgZGVmYXVsdFNpemVzKVxuICBjb25zdCBhbGlnbkNsYXNzID0gdXNlQWxpZ24ocHJvcHMpXG4gIGNvbnN0IHsgaGFzUm91dGVyTGluaywgaGFzTGluaywgbGlua1RhZywgbGlua0F0dHJzLCBuYXZpZ2F0ZU9uQ2xpY2sgfSA9IHVzZVJvdXRlckxpbmsoe1xuICAgIGZhbGxiYWNrVGFnOiAnYnV0dG9uJ1xuICB9KVxuXG4gIGNvbnN0IHN0eWxlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IG9iaiA9IHByb3BzLmZhYiA9PT0gZmFsc2UgJiYgcHJvcHMuZmFiTWluaSA9PT0gZmFsc2VcbiAgICAgID8gc2l6ZVN0eWxlLnZhbHVlXG4gICAgICA6IHt9XG5cbiAgICByZXR1cm4gcHJvcHMucGFkZGluZyAhPT0gdm9pZCAwXG4gICAgICA/IE9iamVjdC5hc3NpZ24oe30sIG9iaiwge1xuICAgICAgICBwYWRkaW5nOiBwcm9wcy5wYWRkaW5nXG4gICAgICAgICAgLnNwbGl0KC9cXHMrLylcbiAgICAgICAgICAubWFwKHYgPT4gKHYgaW4gYnRuUGFkZGluZyA/IGJ0blBhZGRpbmdbIHYgXSArICdweCcgOiB2KSlcbiAgICAgICAgICAuam9pbignICcpLFxuICAgICAgICBtaW5XaWR0aDogJzAnLFxuICAgICAgICBtaW5IZWlnaHQ6ICcwJ1xuICAgICAgfSlcbiAgICAgIDogb2JqXG4gIH0pXG5cbiAgY29uc3QgaXNSb3VuZGVkID0gY29tcHV0ZWQoKCkgPT5cbiAgICBwcm9wcy5yb3VuZGVkID09PSB0cnVlIHx8IHByb3BzLmZhYiA9PT0gdHJ1ZSB8fCBwcm9wcy5mYWJNaW5pID09PSB0cnVlXG4gIClcblxuICBjb25zdCBpc0FjdGlvbmFibGUgPSBjb21wdXRlZCgoKSA9PlxuICAgIHByb3BzLmRpc2FibGUgIT09IHRydWUgJiYgcHJvcHMubG9hZGluZyAhPT0gdHJ1ZVxuICApXG5cbiAgY29uc3QgdGFiSW5kZXggPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgaXNBY3Rpb25hYmxlLnZhbHVlID09PSB0cnVlID8gcHJvcHMudGFiaW5kZXggfHwgMCA6IC0xXG4gICkpXG5cbiAgY29uc3QgZGVzaWduID0gY29tcHV0ZWQoKCkgPT4gZ2V0QnRuRGVzaWduKHByb3BzLCAnc3RhbmRhcmQnKSlcblxuICBjb25zdCBhdHRyaWJ1dGVzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IGFjYyA9IHsgdGFiaW5kZXg6IHRhYkluZGV4LnZhbHVlIH1cblxuICAgIGlmIChoYXNMaW5rLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGFjYywgbGlua0F0dHJzLnZhbHVlKVxuICAgIH1cbiAgICBlbHNlIGlmIChmb3JtVHlwZXMuaW5jbHVkZXMocHJvcHMudHlwZSkgPT09IHRydWUpIHtcbiAgICAgIGFjYy50eXBlID0gcHJvcHMudHlwZVxuICAgIH1cblxuICAgIGlmIChsaW5rVGFnLnZhbHVlID09PSAnYScpIHtcbiAgICAgIGlmIChwcm9wcy5kaXNhYmxlID09PSB0cnVlKSB7XG4gICAgICAgIGFjY1sgJ2FyaWEtZGlzYWJsZWQnIF0gPSAndHJ1ZSdcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGFjYy5ocmVmID09PSB2b2lkIDApIHtcbiAgICAgICAgYWNjLnJvbGUgPSAnYnV0dG9uJ1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFzUm91dGVyTGluay52YWx1ZSAhPT0gdHJ1ZSAmJiBtZWRpYVR5cGVSRS50ZXN0KHByb3BzLnR5cGUpID09PSB0cnVlKSB7XG4gICAgICAgIGFjYy50eXBlID0gcHJvcHMudHlwZVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChwcm9wcy5kaXNhYmxlID09PSB0cnVlKSB7XG4gICAgICBhY2MuZGlzYWJsZWQgPSAnJ1xuICAgICAgYWNjWyAnYXJpYS1kaXNhYmxlZCcgXSA9ICd0cnVlJ1xuICAgIH1cblxuICAgIGlmIChwcm9wcy5sb2FkaW5nID09PSB0cnVlICYmIHByb3BzLnBlcmNlbnRhZ2UgIT09IHZvaWQgMCkge1xuICAgICAgT2JqZWN0LmFzc2lnbihhY2MsIHtcbiAgICAgICAgcm9sZTogJ3Byb2dyZXNzYmFyJyxcbiAgICAgICAgJ2FyaWEtdmFsdWVtaW4nOiAwLFxuICAgICAgICAnYXJpYS12YWx1ZW1heCc6IDEwMCxcbiAgICAgICAgJ2FyaWEtdmFsdWVub3cnOiBwcm9wcy5wZXJjZW50YWdlXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBhY2NcbiAgfSlcblxuICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGxldCBjb2xvcnNcblxuICAgIGlmIChwcm9wcy5jb2xvciAhPT0gdm9pZCAwKSB7XG4gICAgICBpZiAocHJvcHMuZmxhdCA9PT0gdHJ1ZSB8fCBwcm9wcy5vdXRsaW5lID09PSB0cnVlKSB7XG4gICAgICAgIGNvbG9ycyA9IGB0ZXh0LSR7IHByb3BzLnRleHRDb2xvciB8fCBwcm9wcy5jb2xvciB9YFxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbG9ycyA9IGBiZy0keyBwcm9wcy5jb2xvciB9IHRleHQtJHsgcHJvcHMudGV4dENvbG9yIHx8ICd3aGl0ZScgfWBcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocHJvcHMudGV4dENvbG9yKSB7XG4gICAgICBjb2xvcnMgPSBgdGV4dC0keyBwcm9wcy50ZXh0Q29sb3IgfWBcbiAgICB9XG5cbiAgICBjb25zdCBzaGFwZSA9IHByb3BzLnJvdW5kID09PSB0cnVlXG4gICAgICA/ICdyb3VuZCdcbiAgICAgIDogYHJlY3RhbmdsZSR7IGlzUm91bmRlZC52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1idG4tLXJvdW5kZWQnIDogKHByb3BzLnNxdWFyZSA9PT0gdHJ1ZSA/ICcgcS1idG4tLXNxdWFyZScgOiAnJykgfWBcblxuICAgIHJldHVybiBgcS1idG4tLSR7IGRlc2lnbi52YWx1ZSB9IHEtYnRuLS0keyBzaGFwZSB9YFxuICAgICAgKyAoY29sb3JzICE9PSB2b2lkIDAgPyAnICcgKyBjb2xvcnMgOiAnJylcbiAgICAgICsgKGlzQWN0aW9uYWJsZS52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1idG4tLWFjdGlvbmFibGUgcS1mb2N1c2FibGUgcS1ob3ZlcmFibGUnIDogKHByb3BzLmRpc2FibGUgPT09IHRydWUgPyAnIGRpc2FibGVkJyA6ICcnKSlcbiAgICAgICsgKHByb3BzLmZhYiA9PT0gdHJ1ZSA/ICcgcS1idG4tLWZhYicgOiAocHJvcHMuZmFiTWluaSA9PT0gdHJ1ZSA/ICcgcS1idG4tLWZhYi1taW5pJyA6ICcnKSlcbiAgICAgICsgKHByb3BzLm5vQ2FwcyA9PT0gdHJ1ZSA/ICcgcS1idG4tLW5vLXVwcGVyY2FzZScgOiAnJylcbiAgICAgICsgKHByb3BzLmRlbnNlID09PSB0cnVlID8gJyBxLWJ0bi0tZGVuc2UnIDogJycpXG4gICAgICArIChwcm9wcy5zdHJldGNoID09PSB0cnVlID8gJyBuby1ib3JkZXItcmFkaXVzIHNlbGYtc3RyZXRjaCcgOiAnJylcbiAgICAgICsgKHByb3BzLmdsb3NzeSA9PT0gdHJ1ZSA/ICcgZ2xvc3N5JyA6ICcnKVxuICAgICAgKyAocHJvcHMuc3F1YXJlID8gJyBxLWJ0bi0tc3F1YXJlJyA6ICcnKVxuICB9KVxuXG4gIGNvbnN0IGlubmVyQ2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgYWxpZ25DbGFzcy52YWx1ZSArIChwcm9wcy5zdGFjayA9PT0gdHJ1ZSA/ICcgY29sdW1uJyA6ICcgcm93JylcbiAgICArIChwcm9wcy5ub1dyYXAgPT09IHRydWUgPyAnIG5vLXdyYXAgdGV4dC1uby13cmFwJyA6ICcnKVxuICAgICsgKHByb3BzLmxvYWRpbmcgPT09IHRydWUgPyAnIHEtYnRuX19jb250ZW50LS1oaWRkZW4nIDogJycpXG4gIClcblxuICByZXR1cm4ge1xuICAgIGNsYXNzZXMsXG4gICAgc3R5bGUsXG4gICAgaW5uZXJDbGFzc2VzLFxuICAgIGF0dHJpYnV0ZXMsXG4gICAgaGFzTGluayxcbiAgICBsaW5rVGFnLFxuICAgIG5hdmlnYXRlT25DbGljayxcbiAgICBpc0FjdGlvbmFibGVcbiAgfVxufVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBjb21wdXRlZCwgVHJhbnNpdGlvbiwgb25CZWZvcmVVbm1vdW50LCB3aXRoRGlyZWN0aXZlcywgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUUljb24gZnJvbSAnLi4vaWNvbi9RSWNvbi5qcydcbmltcG9ydCBRU3Bpbm5lciBmcm9tICcuLi9zcGlubmVyL1FTcGlubmVyLmpzJ1xuXG5pbXBvcnQgUmlwcGxlIGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvcmlwcGxlL1JpcHBsZS5qcydcblxuaW1wb3J0IHVzZUJ0biwgeyB1c2VCdG5Qcm9wcyB9IGZyb20gJy4vdXNlLWJ0bi5qcydcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5jcmVhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgaE1lcmdlU2xvdCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUucmVuZGVyL3JlbmRlci5qcydcbmltcG9ydCB7IHN0b3AsIHByZXZlbnQsIHN0b3BBbmRQcmV2ZW50LCBsaXN0ZW5PcHRzIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQvZXZlbnQuanMnXG5pbXBvcnQgeyBpc0tleUNvZGUgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmtleWJvYXJkL2tleS1jb21wb3NpdGlvbi5qcydcblxuY29uc3QgeyBwYXNzaXZlQ2FwdHVyZSB9ID0gbGlzdGVuT3B0c1xuXG5sZXRcbiAgdG91Y2hUYXJnZXQgPSBudWxsLFxuICBrZXlib2FyZFRhcmdldCA9IG51bGwsXG4gIG1vdXNlVGFyZ2V0ID0gbnVsbFxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUUJ0bicsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VCdG5Qcm9wcyxcblxuICAgIHBlcmNlbnRhZ2U6IE51bWJlcixcbiAgICBkYXJrUGVyY2VudGFnZTogQm9vbGVhbixcblxuICAgIG9uVG91Y2hzdGFydDogWyBGdW5jdGlvbiwgQXJyYXkgXVxuICB9LFxuXG4gIGVtaXRzOiBbICdjbGljaycsICdrZXlkb3duJywgJ21vdXNlZG93bicsICdrZXl1cCcgXSxcblxuICBzZXR1cCAocHJvcHMsIHsgc2xvdHMsIGVtaXQgfSkge1xuICAgIGNvbnN0IHsgcHJveHkgfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG5cbiAgICBjb25zdCB7XG4gICAgICBjbGFzc2VzLCBzdHlsZSwgaW5uZXJDbGFzc2VzLFxuICAgICAgYXR0cmlidXRlcyxcbiAgICAgIGhhc0xpbmssIGxpbmtUYWcsIG5hdmlnYXRlT25DbGljayxcbiAgICAgIGlzQWN0aW9uYWJsZVxuICAgIH0gPSB1c2VCdG4ocHJvcHMpXG5cbiAgICBjb25zdCByb290UmVmID0gcmVmKG51bGwpXG4gICAgY29uc3QgYmx1clRhcmdldFJlZiA9IHJlZihudWxsKVxuXG4gICAgbGV0IGxvY2FsVG91Y2hUYXJnZXRFbCA9IG51bGwsIGF2b2lkTW91c2VSaXBwbGUsIG1vdXNlVGltZXIgPSBudWxsXG5cbiAgICBjb25zdCBoYXNMYWJlbCA9IGNvbXB1dGVkKCgpID0+XG4gICAgICBwcm9wcy5sYWJlbCAhPT0gdm9pZCAwICYmIHByb3BzLmxhYmVsICE9PSBudWxsICYmIHByb3BzLmxhYmVsICE9PSAnJ1xuICAgIClcblxuICAgIGNvbnN0IHJpcHBsZSA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLmRpc2FibGUgPT09IHRydWUgfHwgcHJvcHMucmlwcGxlID09PSBmYWxzZVxuICAgICAgICA/IGZhbHNlXG4gICAgICAgIDoge1xuICAgICAgICAgICAga2V5Q29kZXM6IGhhc0xpbmsudmFsdWUgPT09IHRydWUgPyBbIDEzLCAzMiBdIDogWyAxMyBdLFxuICAgICAgICAgICAgLi4uKHByb3BzLnJpcHBsZSA9PT0gdHJ1ZSA/IHt9IDogcHJvcHMucmlwcGxlKVxuICAgICAgICAgIH1cbiAgICApKVxuXG4gICAgY29uc3QgcmlwcGxlUHJvcHMgPSBjb21wdXRlZCgoKSA9PiAoeyBjZW50ZXI6IHByb3BzLnJvdW5kIH0pKVxuXG4gICAgY29uc3QgcGVyY2VudGFnZVN0eWxlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgY29uc3QgdmFsID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBwcm9wcy5wZXJjZW50YWdlKSlcbiAgICAgIHJldHVybiB2YWwgPiAwXG4gICAgICAgID8geyB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuNnMnLCB0cmFuc2Zvcm06IGB0cmFuc2xhdGVYKCR7IHZhbCAtIDEwMCB9JSlgIH1cbiAgICAgICAgOiB7fVxuICAgIH0pXG5cbiAgICBjb25zdCBvbkV2ZW50cyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGlmIChwcm9wcy5sb2FkaW5nID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgb25Nb3VzZWRvd246IG9uTG9hZGluZ0V2dCxcbiAgICAgICAgICBvblRvdWNoc3RhcnQ6IG9uTG9hZGluZ0V2dCxcbiAgICAgICAgICBvbkNsaWNrOiBvbkxvYWRpbmdFdnQsXG4gICAgICAgICAgb25LZXlkb3duOiBvbkxvYWRpbmdFdnQsXG4gICAgICAgICAgb25LZXl1cDogb25Mb2FkaW5nRXZ0XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGlzQWN0aW9uYWJsZS52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBhY2MgPSB7XG4gICAgICAgICAgb25DbGljayxcbiAgICAgICAgICBvbktleWRvd24sXG4gICAgICAgICAgb25Nb3VzZWRvd25cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm94eS4kcS5wbGF0Zm9ybS5oYXMudG91Y2ggPT09IHRydWUpIHtcbiAgICAgICAgICBjb25zdCBzdWZmaXggPSBwcm9wcy5vblRvdWNoc3RhcnQgIT09IHZvaWQgMFxuICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgOiAnUGFzc2l2ZSdcblxuICAgICAgICAgIGFjY1sgYG9uVG91Y2hzdGFydCR7IHN1ZmZpeCB9YCBdID0gb25Ub3VjaHN0YXJ0XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWNjXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC8vIG5lZWRlZDsgZXNwZWNpYWxseSBmb3IgZGlzYWJsZWQgPGE+IHRhZ3NcbiAgICAgICAgb25DbGljazogc3RvcEFuZFByZXZlbnRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3Qgbm9kZVByb3BzID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgIHJlZjogcm9vdFJlZixcbiAgICAgIGNsYXNzOiAncS1idG4gcS1idG4taXRlbSBub24tc2VsZWN0YWJsZSBuby1vdXRsaW5lICcgKyBjbGFzc2VzLnZhbHVlLFxuICAgICAgc3R5bGU6IHN0eWxlLnZhbHVlLFxuICAgICAgLi4uYXR0cmlidXRlcy52YWx1ZSxcbiAgICAgIC4uLm9uRXZlbnRzLnZhbHVlXG4gICAgfSkpXG5cbiAgICBmdW5jdGlvbiBvbkNsaWNrIChlKSB7XG4gICAgICAvLyBpcyBpdCBhbHJlYWR5IGRlc3Ryb3llZD9cbiAgICAgIGlmIChyb290UmVmLnZhbHVlID09PSBudWxsKSByZXR1cm5cblxuICAgICAgaWYgKGUgIT09IHZvaWQgMCkge1xuICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkID09PSB0cnVlKSByZXR1cm5cblxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICAgICAgLy8gZm9jdXMgYnV0dG9uIGlmIGl0IGNhbWUgZnJvbSBFTlRFUiBvbiBmb3JtXG4gICAgICAgIC8vIHByZXZlbnQgdGhlIG5ldyBzdWJtaXQgKGFscmVhZHkgZG9uZSlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHByb3BzLnR5cGUgPT09ICdzdWJtaXQnXG4gICAgICAgICAgJiYgZWwgIT09IGRvY3VtZW50LmJvZHlcbiAgICAgICAgICAmJiByb290UmVmLnZhbHVlLmNvbnRhaW5zKGVsKSA9PT0gZmFsc2VcbiAgICAgICAgICAvLyByZXF1aXJlZCBmb3IgaU9TIGFuZCBkZXNrdG9wIFNhZmFyaVxuICAgICAgICAgICYmIGVsLmNvbnRhaW5zKHJvb3RSZWYudmFsdWUpID09PSBmYWxzZVxuICAgICAgICApIHtcbiAgICAgICAgICBlLnFBdm9pZEZvY3VzICE9PSB0cnVlICYmIHJvb3RSZWYudmFsdWUuZm9jdXMoKVxuXG4gICAgICAgICAgY29uc3Qgb25DbGlja0NsZWFudXAgPSAoKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgc3RvcEFuZFByZXZlbnQsIHRydWUpXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uQ2xpY2tDbGVhbnVwLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgICAgIHJvb3RSZWYudmFsdWU/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbkNsaWNrQ2xlYW51cCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHN0b3BBbmRQcmV2ZW50LCB0cnVlKVxuICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25DbGlja0NsZWFudXAsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgICAgIHJvb3RSZWYudmFsdWUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uQ2xpY2tDbGVhbnVwLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBuYXZpZ2F0ZU9uQ2xpY2soZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbktleWRvd24gKGUpIHtcbiAgICAgIC8vIGlzIGl0IGFscmVhZHkgZGVzdHJveWVkP1xuICAgICAgaWYgKHJvb3RSZWYudmFsdWUgPT09IG51bGwpIHJldHVyblxuXG4gICAgICBlbWl0KCdrZXlkb3duJywgZSlcblxuICAgICAgaWYgKGlzS2V5Q29kZShlLCBbIDEzLCAzMiBdKSA9PT0gdHJ1ZSAmJiBrZXlib2FyZFRhcmdldCAhPT0gcm9vdFJlZi52YWx1ZSkge1xuICAgICAgICBrZXlib2FyZFRhcmdldCAhPT0gbnVsbCAmJiBjbGVhbnVwKClcblxuICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkICE9PSB0cnVlKSB7XG4gICAgICAgICAgLy8gZm9jdXMgZXh0ZXJuYWwgYnV0dG9uIGlmIHRoZSBmb2N1cyBoZWxwZXIgd2FzIGZvY3VzZWQgYmVmb3JlXG4gICAgICAgICAgZS5xQXZvaWRGb2N1cyAhPT0gdHJ1ZSAmJiByb290UmVmLnZhbHVlLmZvY3VzKClcblxuICAgICAgICAgIGtleWJvYXJkVGFyZ2V0ID0gcm9vdFJlZi52YWx1ZVxuICAgICAgICAgIHJvb3RSZWYudmFsdWUuY2xhc3NMaXN0LmFkZCgncS1idG4tLWFjdGl2ZScpXG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBvblByZXNzRW5kLCB0cnVlKVxuICAgICAgICAgIHJvb3RSZWYudmFsdWUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uUHJlc3NFbmQsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgICB9XG5cbiAgICAgICAgc3RvcEFuZFByZXZlbnQoZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblRvdWNoc3RhcnQgKGUpIHtcbiAgICAgIC8vIGlzIGl0IGFscmVhZHkgZGVzdHJveWVkP1xuICAgICAgaWYgKHJvb3RSZWYudmFsdWUgPT09IG51bGwpIHJldHVyblxuXG4gICAgICBlbWl0KCd0b3VjaHN0YXJ0JywgZSlcblxuICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCA9PT0gdHJ1ZSkgcmV0dXJuXG5cbiAgICAgIGlmICh0b3VjaFRhcmdldCAhPT0gcm9vdFJlZi52YWx1ZSkge1xuICAgICAgICB0b3VjaFRhcmdldCAhPT0gbnVsbCAmJiBjbGVhbnVwKClcbiAgICAgICAgdG91Y2hUYXJnZXQgPSByb290UmVmLnZhbHVlXG5cbiAgICAgICAgbG9jYWxUb3VjaFRhcmdldEVsID0gZS50YXJnZXRcbiAgICAgICAgbG9jYWxUb3VjaFRhcmdldEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgb25QcmVzc0VuZCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgIGxvY2FsVG91Y2hUYXJnZXRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uUHJlc3NFbmQsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgfVxuXG4gICAgICAvLyBhdm9pZCBkdXBsaWNhdGVkIG1vdXNlZG93biBldmVudFxuICAgICAgLy8gdHJpZ2dlcmluZyBhbm90aGVyIGVhcmx5IHJpcHBsZVxuICAgICAgYXZvaWRNb3VzZVJpcHBsZSA9IHRydWVcbiAgICAgIG1vdXNlVGltZXIgIT09IG51bGwgJiYgY2xlYXJUaW1lb3V0KG1vdXNlVGltZXIpXG4gICAgICBtb3VzZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIG1vdXNlVGltZXIgPSBudWxsXG4gICAgICAgIGF2b2lkTW91c2VSaXBwbGUgPSBmYWxzZVxuICAgICAgfSwgMjAwKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uTW91c2Vkb3duIChlKSB7XG4gICAgICAvLyBpcyBpdCBhbHJlYWR5IGRlc3Ryb3llZD9cbiAgICAgIGlmIChyb290UmVmLnZhbHVlID09PSBudWxsKSByZXR1cm5cblxuICAgICAgZS5xU2tpcFJpcHBsZSA9IGF2b2lkTW91c2VSaXBwbGUgPT09IHRydWVcbiAgICAgIGVtaXQoJ21vdXNlZG93bicsIGUpXG5cbiAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQgIT09IHRydWUgJiYgbW91c2VUYXJnZXQgIT09IHJvb3RSZWYudmFsdWUpIHtcbiAgICAgICAgbW91c2VUYXJnZXQgIT09IG51bGwgJiYgY2xlYW51cCgpXG4gICAgICAgIG1vdXNlVGFyZ2V0ID0gcm9vdFJlZi52YWx1ZVxuICAgICAgICByb290UmVmLnZhbHVlLmNsYXNzTGlzdC5hZGQoJ3EtYnRuLS1hY3RpdmUnKVxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25QcmVzc0VuZCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25QcmVzc0VuZCAoZSkge1xuICAgICAgLy8gaXMgaXQgYWxyZWFkeSBkZXN0cm95ZWQ/XG4gICAgICBpZiAocm9vdFJlZi52YWx1ZSA9PT0gbnVsbCkgcmV0dXJuXG5cbiAgICAgIC8vIG5lZWRlZCBmb3IgSUUgKGJlY2F1c2UgaXQgZW1pdHMgYmx1ciB3aGVuIGZvY3VzaW5nIGJ1dHRvbiBmcm9tIGZvY3VzIGhlbHBlcilcbiAgICAgIGlmIChcbiAgICAgICAgZT8udHlwZSA9PT0gJ2JsdXInXG4gICAgICAgICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHJvb3RSZWYudmFsdWVcbiAgICAgICkgcmV0dXJuXG5cbiAgICAgIGlmIChlPy50eXBlID09PSAna2V5dXAnKSB7XG4gICAgICAgIGlmIChrZXlib2FyZFRhcmdldCA9PT0gcm9vdFJlZi52YWx1ZSAmJiBpc0tleUNvZGUoZSwgWyAxMywgMzIgXSkgPT09IHRydWUpIHtcbiAgICAgICAgICAvLyBmb3IgY2xpY2sgdHJpZ2dlclxuICAgICAgICAgIGNvbnN0IGV2dCA9IG5ldyBNb3VzZUV2ZW50KCdjbGljaycsIGUpXG4gICAgICAgICAgZXZ0LnFLZXlFdmVudCA9IHRydWVcbiAgICAgICAgICBlLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHRydWUgJiYgcHJldmVudChldnQpXG4gICAgICAgICAgZS5jYW5jZWxCdWJibGUgPT09IHRydWUgJiYgc3RvcChldnQpXG4gICAgICAgICAgcm9vdFJlZi52YWx1ZS5kaXNwYXRjaEV2ZW50KGV2dClcblxuICAgICAgICAgIHN0b3BBbmRQcmV2ZW50KGUpXG5cbiAgICAgICAgICAvLyBmb3IgcmlwcGxlXG4gICAgICAgICAgZS5xS2V5RXZlbnQgPSB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBlbWl0KCdrZXl1cCcsIGUpXG4gICAgICB9XG5cbiAgICAgIGNsZWFudXAoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXAgKGRlc3Ryb3lpbmcpIHtcbiAgICAgIGNvbnN0IGJsdXJUYXJnZXQgPSBibHVyVGFyZ2V0UmVmLnZhbHVlXG5cbiAgICAgIGlmIChcbiAgICAgICAgZGVzdHJveWluZyAhPT0gdHJ1ZVxuICAgICAgICAmJiAodG91Y2hUYXJnZXQgPT09IHJvb3RSZWYudmFsdWUgfHwgbW91c2VUYXJnZXQgPT09IHJvb3RSZWYudmFsdWUpXG4gICAgICAgICYmIGJsdXJUYXJnZXQgIT09IG51bGxcbiAgICAgICAgJiYgYmx1clRhcmdldCAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgICAgKSB7XG4gICAgICAgIGJsdXJUYXJnZXQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIC0xKVxuICAgICAgICBibHVyVGFyZ2V0LmZvY3VzKClcbiAgICAgIH1cblxuICAgICAgaWYgKHRvdWNoVGFyZ2V0ID09PSByb290UmVmLnZhbHVlKSB7XG4gICAgICAgIGlmIChsb2NhbFRvdWNoVGFyZ2V0RWwgIT09IG51bGwpIHtcbiAgICAgICAgICBsb2NhbFRvdWNoVGFyZ2V0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBvblByZXNzRW5kLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgICBsb2NhbFRvdWNoVGFyZ2V0RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblByZXNzRW5kLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgfVxuICAgICAgICB0b3VjaFRhcmdldCA9IGxvY2FsVG91Y2hUYXJnZXRFbCA9IG51bGxcbiAgICAgIH1cblxuICAgICAgaWYgKG1vdXNlVGFyZ2V0ID09PSByb290UmVmLnZhbHVlKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvblByZXNzRW5kLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgbW91c2VUYXJnZXQgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIGlmIChrZXlib2FyZFRhcmdldCA9PT0gcm9vdFJlZi52YWx1ZSkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uUHJlc3NFbmQsIHRydWUpXG4gICAgICAgIHJvb3RSZWYudmFsdWU/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvblByZXNzRW5kLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAga2V5Ym9hcmRUYXJnZXQgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIHJvb3RSZWYudmFsdWU/LmNsYXNzTGlzdC5yZW1vdmUoJ3EtYnRuLS1hY3RpdmUnKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uTG9hZGluZ0V2dCAoZXZ0KSB7XG4gICAgICBzdG9wQW5kUHJldmVudChldnQpXG4gICAgICBldnQucVNraXBSaXBwbGUgPSB0cnVlXG4gICAgfVxuXG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICAgIGNsZWFudXAodHJ1ZSlcbiAgICB9KVxuXG4gICAgLy8gZXhwb3NlIHB1YmxpYyBtZXRob2RzXG4gICAgT2JqZWN0LmFzc2lnbihwcm94eSwge1xuICAgICAgY2xpY2s6IGUgPT4ge1xuICAgICAgICBpZiAoaXNBY3Rpb25hYmxlLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgICAgb25DbGljayhlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsZXQgaW5uZXIgPSBbXVxuXG4gICAgICBwcm9wcy5pY29uICE9PSB2b2lkIDAgJiYgaW5uZXIucHVzaChcbiAgICAgICAgaChRSWNvbiwge1xuICAgICAgICAgIG5hbWU6IHByb3BzLmljb24sXG4gICAgICAgICAgbGVmdDogcHJvcHMuc3RhY2sgIT09IHRydWUgJiYgaGFzTGFiZWwudmFsdWUgPT09IHRydWUsXG4gICAgICAgICAgcm9sZTogJ2ltZydcbiAgICAgICAgfSlcbiAgICAgIClcblxuICAgICAgaGFzTGFiZWwudmFsdWUgPT09IHRydWUgJiYgaW5uZXIucHVzaChcbiAgICAgICAgaCgnc3BhbicsIHsgY2xhc3M6ICdibG9jaycgfSwgWyBwcm9wcy5sYWJlbCBdKVxuICAgICAgKVxuXG4gICAgICBpbm5lciA9IGhNZXJnZVNsb3Qoc2xvdHMuZGVmYXVsdCwgaW5uZXIpXG5cbiAgICAgIGlmIChwcm9wcy5pY29uUmlnaHQgIT09IHZvaWQgMCAmJiBwcm9wcy5yb3VuZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgaW5uZXIucHVzaChcbiAgICAgICAgICBoKFFJY29uLCB7XG4gICAgICAgICAgICBuYW1lOiBwcm9wcy5pY29uUmlnaHQsXG4gICAgICAgICAgICByaWdodDogcHJvcHMuc3RhY2sgIT09IHRydWUgJiYgaGFzTGFiZWwudmFsdWUgPT09IHRydWUsXG4gICAgICAgICAgICByb2xlOiAnaW1nJ1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2hpbGQgPSBbXG4gICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWZvY3VzLWhlbHBlcicsXG4gICAgICAgICAgcmVmOiBibHVyVGFyZ2V0UmVmXG4gICAgICAgIH0pXG4gICAgICBdXG5cbiAgICAgIGlmIChwcm9wcy5sb2FkaW5nID09PSB0cnVlICYmIHByb3BzLnBlcmNlbnRhZ2UgIT09IHZvaWQgMCkge1xuICAgICAgICBjaGlsZC5wdXNoKFxuICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICBjbGFzczogJ3EtYnRuX19wcm9ncmVzcyBhYnNvbHV0ZS1mdWxsIG92ZXJmbG93LWhpZGRlbicgKyAocHJvcHMuZGFya1BlcmNlbnRhZ2UgPT09IHRydWUgPyAnIHEtYnRuX19wcm9ncmVzcy0tZGFyaycgOiAnJylcbiAgICAgICAgICB9LCBbXG4gICAgICAgICAgICBoKCdzcGFuJywge1xuICAgICAgICAgICAgICBjbGFzczogJ3EtYnRuX19wcm9ncmVzcy1pbmRpY2F0b3IgZml0IGJsb2NrJyxcbiAgICAgICAgICAgICAgc3R5bGU6IHBlcmNlbnRhZ2VTdHlsZS52YWx1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICBdKVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNoaWxkLnB1c2goXG4gICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWJ0bl9fY29udGVudCB0ZXh0LWNlbnRlciBjb2wgaXRlbXMtY2VudGVyIHEtYW5jaG9yLS1za2lwICcgKyBpbm5lckNsYXNzZXMudmFsdWVcbiAgICAgICAgfSwgaW5uZXIpXG4gICAgICApXG5cbiAgICAgIHByb3BzLmxvYWRpbmcgIT09IG51bGwgJiYgY2hpbGQucHVzaChcbiAgICAgICAgaChUcmFuc2l0aW9uLCB7XG4gICAgICAgICAgbmFtZTogJ3EtdHJhbnNpdGlvbi0tZmFkZSdcbiAgICAgICAgfSwgKCkgPT4gKFxuICAgICAgICAgIHByb3BzLmxvYWRpbmcgPT09IHRydWVcbiAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdsb2FkaW5nJyxcbiAgICAgICAgICAgICAgICAgIGNsYXNzOiAnYWJzb2x1dGUtZnVsbCBmbGV4IGZsZXgtY2VudGVyJ1xuICAgICAgICAgICAgICAgIH0sIHNsb3RzLmxvYWRpbmcgIT09IHZvaWQgMCA/IHNsb3RzLmxvYWRpbmcoKSA6IFsgaChRU3Bpbm5lcikgXSlcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICkpXG4gICAgICApXG5cbiAgICAgIHJldHVybiB3aXRoRGlyZWN0aXZlcyhcbiAgICAgICAgaChcbiAgICAgICAgICBsaW5rVGFnLnZhbHVlLFxuICAgICAgICAgIG5vZGVQcm9wcy52YWx1ZSxcbiAgICAgICAgICBjaGlsZFxuICAgICAgICApLFxuICAgICAgICBbIFtcbiAgICAgICAgICBSaXBwbGUsXG4gICAgICAgICAgcmlwcGxlLnZhbHVlLFxuICAgICAgICAgIHZvaWQgMCxcbiAgICAgICAgICByaXBwbGVQcm9wcy52YWx1ZVxuICAgICAgICBdIF1cbiAgICAgIClcbiAgICB9XG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBnbG9iYWxDb25maWcgfSBmcm9tICcuLi9wcml2YXRlLmNvbmZpZy9pbnN0YW5jZS1jb25maWcuanMnXG5cbmNvbnN0IG5vZGVzTGlzdCA9IFtdXG5jb25zdCBwb3J0YWxUeXBlTGlzdCA9IFtdXG5cbmxldCBwb3J0YWxJbmRleCA9IDFcbmxldCB0YXJnZXQgPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyB2b2lkIDBcbiAgOiBkb2N1bWVudC5ib2R5XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHbG9iYWxOb2RlIChpZCwgcG9ydGFsVHlwZSkge1xuICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgZWwuaWQgPSBwb3J0YWxUeXBlICE9PSB2b2lkIDBcbiAgICA/IGBxLXBvcnRhbC0tJHsgcG9ydGFsVHlwZSB9LS0keyBwb3J0YWxJbmRleCsrIH1gXG4gICAgOiBpZFxuXG4gIGlmIChnbG9iYWxDb25maWcuZ2xvYmFsTm9kZXMgIT09IHZvaWQgMCkge1xuICAgIGNvbnN0IGNscyA9IGdsb2JhbENvbmZpZy5nbG9iYWxOb2Rlcy5jbGFzc1xuICAgIGlmIChjbHMgIT09IHZvaWQgMCkge1xuICAgICAgZWwuY2xhc3NOYW1lID0gY2xzXG4gICAgfVxuICB9XG5cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKVxuICBub2Rlc0xpc3QucHVzaChlbClcbiAgcG9ydGFsVHlwZUxpc3QucHVzaChwb3J0YWxUeXBlKVxuXG4gIHJldHVybiBlbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlR2xvYmFsTm9kZSAoZWwpIHtcbiAgY29uc3Qgbm9kZUluZGV4ID0gbm9kZXNMaXN0LmluZGV4T2YoZWwpXG5cbiAgbm9kZXNMaXN0LnNwbGljZShub2RlSW5kZXgsIDEpXG4gIHBvcnRhbFR5cGVMaXN0LnNwbGljZShub2RlSW5kZXgsIDEpXG5cbiAgZWwucmVtb3ZlKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZUdsb2JhbE5vZGVzVGFyZ2V0IChuZXdUYXJnZXQpIHtcbiAgaWYgKG5ld1RhcmdldCA9PT0gdGFyZ2V0KSByZXR1cm5cblxuICB0YXJnZXQgPSBuZXdUYXJnZXRcblxuICBpZiAoXG4gICAgdGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5XG4gICAgLy8gb3Igd2UgaGF2ZSBsZXNzIHRoYW4gMiBkaWFsb2dzOlxuICAgIHx8IHBvcnRhbFR5cGVMaXN0LnJlZHVjZSgoYWNjLCB0eXBlKSA9PiAodHlwZSA9PT0gJ2RpYWxvZycgPyBhY2MgKyAxIDogYWNjKSwgMCkgPCAyXG4gICkge1xuICAgIG5vZGVzTGlzdC5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgaWYgKG5vZGUuY29udGFpbnModGFyZ2V0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKG5vZGUpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgbGFzdERpYWxvZ0luZGV4ID0gcG9ydGFsVHlwZUxpc3QubGFzdEluZGV4T2YoJ2RpYWxvZycpXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlc0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBlbCA9IG5vZGVzTGlzdFsgaSBdXG5cbiAgICBpZiAoXG4gICAgICAoaSA9PT0gbGFzdERpYWxvZ0luZGV4IHx8IHBvcnRhbFR5cGVMaXN0WyBpIF0gIT09ICdkaWFsb2cnKVxuICAgICAgJiYgZWwuY29udGFpbnModGFyZ2V0KSA9PT0gZmFsc2VcbiAgICApIHtcbiAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbClcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IGgsIHJlZiwgbWFya1JhdywgVHJhbnNpdGlvbkdyb3VwIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUUF2YXRhciBmcm9tICcuLi8uLi9jb21wb25lbnRzL2F2YXRhci9RQXZhdGFyLmpzJ1xuaW1wb3J0IFFJY29uIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvaWNvbi9RSWNvbi5qcydcbmltcG9ydCBRQnRuIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvYnRuL1FCdG4uanMnXG5pbXBvcnQgUVNwaW5uZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9zcGlubmVyL1FTcGlubmVyLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDaGlsZEFwcCB9IGZyb20gJy4uLy4uL2luc3RhbGwtcXVhc2FyLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNyZWF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQvZXZlbnQuanMnXG5pbXBvcnQgeyBjcmVhdGVHbG9iYWxOb2RlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5jb25maWcvbm9kZXMuanMnXG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4uLy4uL3V0aWxzL2lzL2lzLmpzJ1xuXG5sZXQgdWlkID0gMFxuXG5jb25zdCBkZWZhdWx0cyA9IHt9XG5jb25zdCBncm91cHMgPSB7fVxuY29uc3Qgbm90aWZpY2F0aW9uc0xpc3QgPSB7fVxuY29uc3QgcG9zaXRpb25DbGFzcyA9IHt9XG5jb25zdCBlbXB0eVJFID0gL15cXHMqJC9cbmNvbnN0IG5vdGlmUmVmcyA9IFtdXG5jb25zdCBpbnZhbGlkVGltZW91dFZhbHVlcyA9IFsgdm9pZCAwLCBudWxsLCB0cnVlLCBmYWxzZSwgJycgXVxuXG5jb25zdCBwb3NpdGlvbkxpc3QgPSBbXG4gICd0b3AtbGVmdCcsICd0b3AtcmlnaHQnLFxuICAnYm90dG9tLWxlZnQnLCAnYm90dG9tLXJpZ2h0JyxcbiAgJ3RvcCcsICdib3R0b20nLCAnbGVmdCcsICdyaWdodCcsICdjZW50ZXInXG5dXG5cbmNvbnN0IGJhZGdlUG9zaXRpb25zID0gW1xuICAndG9wLWxlZnQnLCAndG9wLXJpZ2h0JyxcbiAgJ2JvdHRvbS1sZWZ0JywgJ2JvdHRvbS1yaWdodCdcbl1cblxuY29uc3Qgbm90aWZUeXBlcyA9IHtcbiAgcG9zaXRpdmU6IHtcbiAgICBpY29uOiAkcSA9PiAkcS5pY29uU2V0LnR5cGUucG9zaXRpdmUsXG4gICAgY29sb3I6ICdwb3NpdGl2ZSdcbiAgfSxcblxuICBuZWdhdGl2ZToge1xuICAgIGljb246ICRxID0+ICRxLmljb25TZXQudHlwZS5uZWdhdGl2ZSxcbiAgICBjb2xvcjogJ25lZ2F0aXZlJ1xuICB9LFxuXG4gIHdhcm5pbmc6IHtcbiAgICBpY29uOiAkcSA9PiAkcS5pY29uU2V0LnR5cGUud2FybmluZyxcbiAgICBjb2xvcjogJ3dhcm5pbmcnLFxuICAgIHRleHRDb2xvcjogJ2RhcmsnXG4gIH0sXG5cbiAgaW5mbzoge1xuICAgIGljb246ICRxID0+ICRxLmljb25TZXQudHlwZS5pbmZvLFxuICAgIGNvbG9yOiAnaW5mbydcbiAgfSxcblxuICBvbmdvaW5nOiB7XG4gICAgZ3JvdXA6IGZhbHNlLFxuICAgIHRpbWVvdXQ6IDAsXG4gICAgc3Bpbm5lcjogdHJ1ZSxcbiAgICBjb2xvcjogJ2dyZXktOCdcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGROb3RpZmljYXRpb24gKGNvbmZpZywgJHEsIG9yaWdpbmFsQXBpKSB7XG4gIGlmICghY29uZmlnKSB7XG4gICAgcmV0dXJuIGxvZ0Vycm9yKCdwYXJhbWV0ZXIgcmVxdWlyZWQnKVxuICB9XG5cbiAgbGV0IEFwaVxuICBjb25zdCBub3RpZiA9IHsgdGV4dENvbG9yOiAnd2hpdGUnIH1cblxuICBpZiAoY29uZmlnLmlnbm9yZURlZmF1bHRzICE9PSB0cnVlKSB7XG4gICAgT2JqZWN0LmFzc2lnbihub3RpZiwgZGVmYXVsdHMpXG4gIH1cblxuICBpZiAoaXNPYmplY3QoY29uZmlnKSA9PT0gZmFsc2UpIHtcbiAgICBpZiAobm90aWYudHlwZSkge1xuICAgICAgT2JqZWN0LmFzc2lnbihub3RpZiwgbm90aWZUeXBlc1sgbm90aWYudHlwZSBdKVxuICAgIH1cblxuICAgIGNvbmZpZyA9IHsgbWVzc2FnZTogY29uZmlnIH1cbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24obm90aWYsIG5vdGlmVHlwZXNbIGNvbmZpZy50eXBlIHx8IG5vdGlmLnR5cGUgXSwgY29uZmlnKVxuXG4gIGlmICh0eXBlb2Ygbm90aWYuaWNvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG5vdGlmLmljb24gPSBub3RpZi5pY29uKCRxKVxuICB9XG5cbiAgaWYgKCFub3RpZi5zcGlubmVyKSB7XG4gICAgbm90aWYuc3Bpbm5lciA9IGZhbHNlXG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKG5vdGlmLnNwaW5uZXIgPT09IHRydWUpIHtcbiAgICAgIG5vdGlmLnNwaW5uZXIgPSBRU3Bpbm5lclxuICAgIH1cblxuICAgIG5vdGlmLnNwaW5uZXIgPSBtYXJrUmF3KG5vdGlmLnNwaW5uZXIpXG4gIH1cblxuICBub3RpZi5tZXRhID0ge1xuICAgIGhhc01lZGlhOiBCb29sZWFuKG5vdGlmLnNwaW5uZXIgIT09IGZhbHNlIHx8IG5vdGlmLmljb24gfHwgbm90aWYuYXZhdGFyKSxcbiAgICBoYXNUZXh0OiBoYXNDb250ZW50KG5vdGlmLm1lc3NhZ2UpIHx8IGhhc0NvbnRlbnQobm90aWYuY2FwdGlvbilcbiAgfVxuXG4gIGlmIChub3RpZi5wb3NpdGlvbikge1xuICAgIGlmIChwb3NpdGlvbkxpc3QuaW5jbHVkZXMobm90aWYucG9zaXRpb24pID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGxvZ0Vycm9yKCd3cm9uZyBwb3NpdGlvbicsIGNvbmZpZylcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgbm90aWYucG9zaXRpb24gPSAnYm90dG9tJ1xuICB9XG5cbiAgaWYgKGludmFsaWRUaW1lb3V0VmFsdWVzLmluY2x1ZGVzKG5vdGlmLnRpbWVvdXQpID09PSB0cnVlKSB7XG4gICAgbm90aWYudGltZW91dCA9IDUwMDBcbiAgfVxuICBlbHNlIHtcbiAgICBjb25zdCB0ID0gTnVtYmVyKG5vdGlmLnRpbWVvdXQpIC8vIHdlIGNhdGNoIGV4cG9uZW50aWFsIG5vdGF0aW9uIHRvbyB3aXRoIE51bWJlcigpIGNhc3RpbmdcbiAgICBpZiAoaXNOYU4odCkgfHwgdCA8IDApIHtcbiAgICAgIHJldHVybiBsb2dFcnJvcignd3JvbmcgdGltZW91dCcsIGNvbmZpZylcbiAgICB9XG4gICAgbm90aWYudGltZW91dCA9IE51bWJlci5pc0Zpbml0ZSh0KSA/IHQgOiAwXG4gIH1cblxuICBpZiAobm90aWYudGltZW91dCA9PT0gMCkge1xuICAgIG5vdGlmLnByb2dyZXNzID0gZmFsc2VcbiAgfVxuICBlbHNlIGlmIChub3RpZi5wcm9ncmVzcyA9PT0gdHJ1ZSkge1xuICAgIG5vdGlmLm1ldGEucHJvZ3Jlc3NDbGFzcyA9ICdxLW5vdGlmaWNhdGlvbl9fcHJvZ3Jlc3MnICsgKFxuICAgICAgbm90aWYucHJvZ3Jlc3NDbGFzc1xuICAgICAgICA/IGAgJHsgbm90aWYucHJvZ3Jlc3NDbGFzcyB9YFxuICAgICAgICA6ICcnXG4gICAgKVxuXG4gICAgbm90aWYubWV0YS5wcm9ncmVzc1N0eWxlID0ge1xuICAgICAgYW5pbWF0aW9uRHVyYXRpb246IGAkeyBub3RpZi50aW1lb3V0ICsgMTAwMCB9bXNgXG4gICAgfVxuICB9XG5cbiAgY29uc3QgYWN0aW9ucyA9IChcbiAgICBBcnJheS5pc0FycmF5KGNvbmZpZy5hY3Rpb25zKSA9PT0gdHJ1ZVxuICAgICAgPyBjb25maWcuYWN0aW9uc1xuICAgICAgOiBbXVxuICApLmNvbmNhdChcbiAgICBjb25maWcuaWdub3JlRGVmYXVsdHMgIT09IHRydWUgJiYgQXJyYXkuaXNBcnJheShkZWZhdWx0cy5hY3Rpb25zKSA9PT0gdHJ1ZVxuICAgICAgPyBkZWZhdWx0cy5hY3Rpb25zXG4gICAgICA6IFtdXG4gICkuY29uY2F0KFxuICAgIEFycmF5LmlzQXJyYXkobm90aWZUeXBlc1sgY29uZmlnLnR5cGUgXT8uYWN0aW9ucykgPT09IHRydWVcbiAgICAgID8gbm90aWZUeXBlc1sgY29uZmlnLnR5cGUgXS5hY3Rpb25zXG4gICAgICA6IFtdXG4gIClcblxuICBjb25zdCB7IGNsb3NlQnRuIH0gPSBub3RpZlxuICBjbG9zZUJ0biAmJiBhY3Rpb25zLnB1c2goe1xuICAgIGxhYmVsOiB0eXBlb2YgY2xvc2VCdG4gPT09ICdzdHJpbmcnXG4gICAgICA/IGNsb3NlQnRuXG4gICAgICA6ICRxLmxhbmcubGFiZWwuY2xvc2VcbiAgfSlcblxuICBub3RpZi5hY3Rpb25zID0gYWN0aW9ucy5tYXAoKHsgaGFuZGxlciwgbm9EaXNtaXNzLCAuLi5pdGVtIH0pID0+ICh7XG4gICAgZmxhdDogdHJ1ZSxcbiAgICAuLi5pdGVtLFxuICAgIG9uQ2xpY2s6IHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nXG4gICAgICA/ICgpID0+IHtcbiAgICAgICAgICBoYW5kbGVyKClcbiAgICAgICAgICBub0Rpc21pc3MgIT09IHRydWUgJiYgZGlzbWlzcygpXG4gICAgICAgIH1cbiAgICAgIDogKCkgPT4geyBkaXNtaXNzKCkgfVxuICB9KSlcblxuICBpZiAobm90aWYubXVsdGlMaW5lID09PSB2b2lkIDApIHtcbiAgICBub3RpZi5tdWx0aUxpbmUgPSBub3RpZi5hY3Rpb25zLmxlbmd0aCA+IDFcbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24obm90aWYubWV0YSwge1xuICAgIGNsYXNzOiAncS1ub3RpZmljYXRpb24gcm93IGl0ZW1zLXN0cmV0Y2gnXG4gICAgICArIGAgcS1ub3RpZmljYXRpb24tLSR7IG5vdGlmLm11bHRpTGluZSA9PT0gdHJ1ZSA/ICdtdWx0aS1saW5lJyA6ICdzdGFuZGFyZCcgfWBcbiAgICAgICsgKG5vdGlmLmNvbG9yICE9PSB2b2lkIDAgPyBgIGJnLSR7IG5vdGlmLmNvbG9yIH1gIDogJycpXG4gICAgICArIChub3RpZi50ZXh0Q29sb3IgIT09IHZvaWQgMCA/IGAgdGV4dC0keyBub3RpZi50ZXh0Q29sb3IgfWAgOiAnJylcbiAgICAgICsgKG5vdGlmLmNsYXNzZXMgIT09IHZvaWQgMCA/IGAgJHsgbm90aWYuY2xhc3NlcyB9YCA6ICcnKSxcblxuICAgIHdyYXBwZXJDbGFzczogJ3Etbm90aWZpY2F0aW9uX193cmFwcGVyIGNvbCByZWxhdGl2ZS1wb3NpdGlvbiBib3JkZXItcmFkaXVzLWluaGVyaXQgJ1xuICAgICAgKyAobm90aWYubXVsdGlMaW5lID09PSB0cnVlID8gJ2NvbHVtbiBuby13cmFwIGp1c3RpZnktY2VudGVyJyA6ICdyb3cgaXRlbXMtY2VudGVyJyksXG5cbiAgICBjb250ZW50Q2xhc3M6ICdxLW5vdGlmaWNhdGlvbl9fY29udGVudCByb3cgaXRlbXMtY2VudGVyJ1xuICAgICAgKyAobm90aWYubXVsdGlMaW5lID09PSB0cnVlID8gJycgOiAnIGNvbCcpLFxuXG4gICAgbGVmdENsYXNzOiBub3RpZi5tZXRhLmhhc1RleHQgPT09IHRydWUgPyAnYWRkaXRpb25hbCcgOiAnc2luZ2xlJyxcblxuICAgIGF0dHJzOiB7XG4gICAgICByb2xlOiAnYWxlcnQnLFxuICAgICAgLi4ubm90aWYuYXR0cnNcbiAgICB9XG4gIH0pXG5cbiAgaWYgKG5vdGlmLmdyb3VwID09PSBmYWxzZSkge1xuICAgIG5vdGlmLmdyb3VwID0gdm9pZCAwXG4gICAgbm90aWYubWV0YS5ncm91cCA9IHZvaWQgMFxuICB9XG4gIGVsc2Uge1xuICAgIGlmIChub3RpZi5ncm91cCA9PT0gdm9pZCAwIHx8IG5vdGlmLmdyb3VwID09PSB0cnVlKSB7XG4gICAgICAvLyBkbyBub3QgcmVwbGFjZSBub3RpZmljYXRpb25zIHdpdGggZGlmZmVyZW50IGJ1dHRvbnNcbiAgICAgIG5vdGlmLmdyb3VwID0gW1xuICAgICAgICBub3RpZi5tZXNzYWdlLFxuICAgICAgICBub3RpZi5jYXB0aW9uLFxuICAgICAgICBub3RpZi5tdWx0aWxpbmVcbiAgICAgIF0uY29uY2F0KFxuICAgICAgICBub3RpZi5hY3Rpb25zLm1hcChwcm9wcyA9PiBgJHsgcHJvcHMubGFiZWwgfSokeyBwcm9wcy5pY29uIH1gKVxuICAgICAgKS5qb2luKCd8JylcbiAgICB9XG5cbiAgICBub3RpZi5tZXRhLmdyb3VwID0gbm90aWYuZ3JvdXAgKyAnfCcgKyBub3RpZi5wb3NpdGlvblxuICB9XG5cbiAgaWYgKG5vdGlmLmFjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgbm90aWYuYWN0aW9ucyA9IHZvaWQgMFxuICB9XG4gIGVsc2Uge1xuICAgIG5vdGlmLm1ldGEuYWN0aW9uc0NsYXNzID0gJ3Etbm90aWZpY2F0aW9uX19hY3Rpb25zIHJvdyBpdGVtcy1jZW50ZXIgJ1xuICAgICAgKyAobm90aWYubXVsdGlMaW5lID09PSB0cnVlID8gJ2p1c3RpZnktZW5kJyA6ICdjb2wtYXV0bycpXG4gICAgICArIChub3RpZi5tZXRhLmhhc01lZGlhID09PSB0cnVlID8gJyBxLW5vdGlmaWNhdGlvbl9fYWN0aW9ucy0td2l0aC1tZWRpYScgOiAnJylcbiAgfVxuXG4gIGlmIChvcmlnaW5hbEFwaSAhPT0gdm9pZCAwKSB7XG4gICAgLy8gcmVzZXQgdGltZW91dCBpZiBhbnlcbiAgICBpZiAob3JpZ2luYWxBcGkubm90aWYubWV0YS50aW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KG9yaWdpbmFsQXBpLm5vdGlmLm1ldGEudGltZXIpXG4gICAgICBvcmlnaW5hbEFwaS5ub3RpZi5tZXRhLnRpbWVyID0gdm9pZCAwXG4gICAgfVxuXG4gICAgLy8gcmV0YWluIHVpZFxuICAgIG5vdGlmLm1ldGEudWlkID0gb3JpZ2luYWxBcGkubm90aWYubWV0YS51aWRcblxuICAgIC8vIHJlcGxhY2Ugbm90aWZcbiAgICBjb25zdCBpbmRleCA9IG5vdGlmaWNhdGlvbnNMaXN0WyBub3RpZi5wb3NpdGlvbiBdLnZhbHVlLmluZGV4T2Yob3JpZ2luYWxBcGkubm90aWYpXG4gICAgbm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWVbIGluZGV4IF0gPSBub3RpZlxuICB9XG4gIGVsc2Uge1xuICAgIGNvbnN0IG9yaWdpbmFsID0gZ3JvdXBzWyBub3RpZi5tZXRhLmdyb3VwIF1cblxuICAgIC8vIHdvb2hvbywgaXQncyBhIG5ldyBub3RpZmljYXRpb25cbiAgICBpZiAob3JpZ2luYWwgPT09IHZvaWQgMCkge1xuICAgICAgbm90aWYubWV0YS51aWQgPSB1aWQrK1xuICAgICAgbm90aWYubWV0YS5iYWRnZSA9IDFcblxuICAgICAgaWYgKFsgJ2xlZnQnLCAncmlnaHQnLCAnY2VudGVyJyBdLmluZGV4T2Yobm90aWYucG9zaXRpb24pICE9PSAtMSkge1xuICAgICAgICBub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZS5zcGxpY2UoXG4gICAgICAgICAgTWF0aC5mbG9vcihub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZS5sZW5ndGggLyAyKSxcbiAgICAgICAgICAwLFxuICAgICAgICAgIG5vdGlmXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBub3RpZi5wb3NpdGlvbi5pbmRleE9mKCd0b3AnKSAhPT0gLTEgPyAndW5zaGlmdCcgOiAncHVzaCdcbiAgICAgICAgbm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWVbIGFjdGlvbiBdKG5vdGlmKVxuICAgICAgfVxuXG4gICAgICBpZiAobm90aWYuZ3JvdXAgIT09IHZvaWQgMCkge1xuICAgICAgICBncm91cHNbIG5vdGlmLm1ldGEuZ3JvdXAgXSA9IG5vdGlmXG4gICAgICB9XG4gICAgfVxuICAgIC8vIG9rLCBzbyBpdCdzIE5PVCBhIG5ldyBvbmVcbiAgICBlbHNlIHtcbiAgICAgIC8vIHJlc2V0IHRpbWVvdXQgaWYgYW55XG4gICAgICBpZiAob3JpZ2luYWwubWV0YS50aW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQob3JpZ2luYWwubWV0YS50aW1lcilcbiAgICAgICAgb3JpZ2luYWwubWV0YS50aW1lciA9IHZvaWQgMFxuICAgICAgfVxuXG4gICAgICBpZiAobm90aWYuYmFkZ2VQb3NpdGlvbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGlmIChiYWRnZVBvc2l0aW9ucy5pbmNsdWRlcyhub3RpZi5iYWRnZVBvc2l0aW9uKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gbG9nRXJyb3IoJ3dyb25nIGJhZGdlUG9zaXRpb24nLCBjb25maWcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBub3RpZi5iYWRnZVBvc2l0aW9uID0gYHRvcC0keyBub3RpZi5wb3NpdGlvbi5pbmRleE9mKCdsZWZ0JykgIT09IC0xID8gJ3JpZ2h0JyA6ICdsZWZ0JyB9YFxuICAgICAgfVxuXG4gICAgICBub3RpZi5tZXRhLnVpZCA9IG9yaWdpbmFsLm1ldGEudWlkXG4gICAgICBub3RpZi5tZXRhLmJhZGdlID0gb3JpZ2luYWwubWV0YS5iYWRnZSArIDFcbiAgICAgIG5vdGlmLm1ldGEuYmFkZ2VDbGFzcyA9IGBxLW5vdGlmaWNhdGlvbl9fYmFkZ2UgcS1ub3RpZmljYXRpb25fX2JhZGdlLS0keyBub3RpZi5iYWRnZVBvc2l0aW9uIH1gXG4gICAgICAgICsgKG5vdGlmLmJhZGdlQ29sb3IgIT09IHZvaWQgMCA/IGAgYmctJHsgbm90aWYuYmFkZ2VDb2xvciB9YCA6ICcnKVxuICAgICAgICArIChub3RpZi5iYWRnZVRleHRDb2xvciAhPT0gdm9pZCAwID8gYCB0ZXh0LSR7IG5vdGlmLmJhZGdlVGV4dENvbG9yIH1gIDogJycpXG4gICAgICAgICsgKG5vdGlmLmJhZGdlQ2xhc3MgPyBgICR7IG5vdGlmLmJhZGdlQ2xhc3MgfWAgOiAnJylcblxuICAgICAgY29uc3QgaW5kZXggPSBub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZS5pbmRleE9mKG9yaWdpbmFsKVxuICAgICAgbm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWVbIGluZGV4IF0gPSBncm91cHNbIG5vdGlmLm1ldGEuZ3JvdXAgXSA9IG5vdGlmXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGlzbWlzcyA9ICgpID0+IHtcbiAgICByZW1vdmVOb3RpZmljYXRpb24obm90aWYpXG4gICAgQXBpID0gdm9pZCAwXG4gIH1cblxuICBpZiAobm90aWYudGltZW91dCA+IDApIHtcbiAgICBub3RpZi5tZXRhLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBub3RpZi5tZXRhLnRpbWVyID0gdm9pZCAwXG4gICAgICBkaXNtaXNzKClcbiAgICB9LCBub3RpZi50aW1lb3V0ICsgLyogc2hvdyBkdXJhdGlvbiAqLyAxMDAwKVxuICB9XG5cbiAgLy8gb25seSBub24tZ3JvdXBhYmxlIGNhbiBiZSB1cGRhdGVkXG4gIGlmIChub3RpZi5ncm91cCAhPT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHByb3BzID0+IHtcbiAgICAgIGlmIChwcm9wcyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGxvZ0Vycm9yKCd0cnlpbmcgdG8gdXBkYXRlIGEgZ3JvdXBlZCBvbmUgd2hpY2ggaXMgZm9yYmlkZGVuJywgY29uZmlnKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGRpc21pc3MoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEFwaSA9IHtcbiAgICBkaXNtaXNzLFxuICAgIGNvbmZpZyxcbiAgICBub3RpZlxuICB9XG5cbiAgaWYgKG9yaWdpbmFsQXBpICE9PSB2b2lkIDApIHtcbiAgICBPYmplY3QuYXNzaWduKG9yaWdpbmFsQXBpLCBBcGkpXG4gICAgcmV0dXJuXG4gIH1cblxuICByZXR1cm4gcHJvcHMgPT4ge1xuICAgIC8vIGlmIG5vdGlmaWNhdGlvbiB3YXNuJ3QgcHJldmlvdXNseSBkaXNtaXNzZWRcbiAgICBpZiAoQXBpICE9PSB2b2lkIDApIHtcbiAgICAgIC8vIGlmIG5vIHBhcmFtcywgdGhlbiB3ZSBtdXN0IGRpc21pc3MgdGhlIG5vdGlmaWNhdGlvblxuICAgICAgaWYgKHByb3BzID09PSB2b2lkIDApIHtcbiAgICAgICAgQXBpLmRpc21pc3MoKVxuICAgICAgfVxuICAgICAgLy8gb3RoZXJ3aXNlIHdlJ3JlIHVwZGF0aW5nIGl0XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV3Tm90aWYgPSBPYmplY3QuYXNzaWduKHt9LCBBcGkuY29uZmlnLCBwcm9wcywge1xuICAgICAgICAgIGdyb3VwOiBmYWxzZSxcbiAgICAgICAgICBwb3NpdGlvbjogbm90aWYucG9zaXRpb25cbiAgICAgICAgfSlcblxuICAgICAgICBhZGROb3RpZmljYXRpb24obmV3Tm90aWYsICRxLCBBcGkpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZU5vdGlmaWNhdGlvbiAobm90aWYpIHtcbiAgaWYgKG5vdGlmLm1ldGEudGltZXIpIHtcbiAgICBjbGVhclRpbWVvdXQobm90aWYubWV0YS50aW1lcilcbiAgICBub3RpZi5tZXRhLnRpbWVyID0gdm9pZCAwXG4gIH1cblxuICBjb25zdCBpbmRleCA9IG5vdGlmaWNhdGlvbnNMaXN0WyBub3RpZi5wb3NpdGlvbiBdLnZhbHVlLmluZGV4T2Yobm90aWYpXG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICBpZiAobm90aWYuZ3JvdXAgIT09IHZvaWQgMCkge1xuICAgICAgZGVsZXRlIGdyb3Vwc1sgbm90aWYubWV0YS5ncm91cCBdXG4gICAgfVxuXG4gICAgY29uc3QgZWwgPSBub3RpZlJlZnNbICcnICsgbm90aWYubWV0YS51aWQgXVxuXG4gICAgaWYgKGVsKSB7XG4gICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGdldENvbXB1dGVkU3R5bGUoZWwpXG5cbiAgICAgIGVsLnN0eWxlLmxlZnQgPSBgJHsgZWwub2Zmc2V0TGVmdCB9cHhgXG4gICAgICBlbC5zdHlsZS53aWR0aCA9IHdpZHRoXG4gICAgICBlbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHRcbiAgICB9XG5cbiAgICBub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZS5zcGxpY2UoaW5kZXgsIDEpXG5cbiAgICBpZiAodHlwZW9mIG5vdGlmLm9uRGlzbWlzcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgbm90aWYub25EaXNtaXNzKClcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFzQ29udGVudCAoc3RyKSB7XG4gIHJldHVybiBzdHIgIT09IHZvaWQgMFxuICAgICYmIHN0ciAhPT0gbnVsbFxuICAgICYmIGVtcHR5UkUudGVzdChzdHIpICE9PSB0cnVlXG59XG5cbmZ1bmN0aW9uIGxvZ0Vycm9yIChlcnJvciwgY29uZmlnKSB7XG4gIGNvbnNvbGUuZXJyb3IoYE5vdGlmeTogJHsgZXJyb3IgfWAsIGNvbmZpZylcbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIGdldENvbXBvbmVudCAoKSB7XG4gIHJldHVybiBjcmVhdGVDb21wb25lbnQoe1xuICAgIG5hbWU6ICdRTm90aWZpY2F0aW9ucycsXG5cbiAgICAvLyBoaWRlIEFwcCBmcm9tIFZ1ZSBkZXZ0b29sc1xuICAgIGRldnRvb2xzOiB7IGhpZGU6IHRydWUgfSxcblxuICAgIHNldHVwICgpIHtcbiAgICAgIHJldHVybiAoKSA9PiBoKCdkaXYnLCB7IGNsYXNzOiAncS1ub3RpZmljYXRpb25zJyB9LCBwb3NpdGlvbkxpc3QubWFwKHBvcyA9PiB7XG4gICAgICAgIHJldHVybiBoKFRyYW5zaXRpb25Hcm91cCwge1xuICAgICAgICAgIGtleTogcG9zLFxuICAgICAgICAgIGNsYXNzOiBwb3NpdGlvbkNsYXNzWyBwb3MgXSxcbiAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgIG5hbWU6IGBxLW5vdGlmaWNhdGlvbi0tJHsgcG9zIH1gXG4gICAgICAgIH0sICgpID0+IG5vdGlmaWNhdGlvbnNMaXN0WyBwb3MgXS52YWx1ZS5tYXAobm90aWYgPT4ge1xuICAgICAgICAgIGNvbnN0IG1ldGEgPSBub3RpZi5tZXRhXG4gICAgICAgICAgY29uc3QgbWFpbkNoaWxkID0gW11cblxuICAgICAgICAgIGlmIChtZXRhLmhhc01lZGlhID09PSB0cnVlKSB7XG4gICAgICAgICAgICBpZiAobm90aWYuc3Bpbm5lciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgbWFpbkNoaWxkLnB1c2goXG4gICAgICAgICAgICAgICAgaChub3RpZi5zcGlubmVyLCB7XG4gICAgICAgICAgICAgICAgICBjbGFzczogJ3Etbm90aWZpY2F0aW9uX19zcGlubmVyIHEtbm90aWZpY2F0aW9uX19zcGlubmVyLS0nICsgbWV0YS5sZWZ0Q2xhc3MsXG4gICAgICAgICAgICAgICAgICBjb2xvcjogbm90aWYuc3Bpbm5lckNvbG9yLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogbm90aWYuc3Bpbm5lclNpemVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChub3RpZi5pY29uKSB7XG4gICAgICAgICAgICAgIG1haW5DaGlsZC5wdXNoKFxuICAgICAgICAgICAgICAgIGgoUUljb24sIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzOiAncS1ub3RpZmljYXRpb25fX2ljb24gcS1ub3RpZmljYXRpb25fX2ljb24tLScgKyBtZXRhLmxlZnRDbGFzcyxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IG5vdGlmLmljb24sXG4gICAgICAgICAgICAgICAgICBjb2xvcjogbm90aWYuaWNvbkNvbG9yLFxuICAgICAgICAgICAgICAgICAgc2l6ZTogbm90aWYuaWNvblNpemUsXG4gICAgICAgICAgICAgICAgICByb2xlOiAnaW1nJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vdGlmLmF2YXRhcikge1xuICAgICAgICAgICAgICBtYWluQ2hpbGQucHVzaChcbiAgICAgICAgICAgICAgICBoKFFBdmF0YXIsIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzOiAncS1ub3RpZmljYXRpb25fX2F2YXRhciBxLW5vdGlmaWNhdGlvbl9fYXZhdGFyLS0nICsgbWV0YS5sZWZ0Q2xhc3NcbiAgICAgICAgICAgICAgICB9LCAoKSA9PiBoKCdpbWcnLCB7IHNyYzogbm90aWYuYXZhdGFyLCAnYXJpYS1oaWRkZW4nOiAndHJ1ZScgfSkpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobWV0YS5oYXNUZXh0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBsZXQgbXNnQ2hpbGRcbiAgICAgICAgICAgIGNvbnN0IG1zZ0RhdGEgPSB7IGNsYXNzOiAncS1ub3RpZmljYXRpb25fX21lc3NhZ2UgY29sJyB9XG5cbiAgICAgICAgICAgIGlmIChub3RpZi5odG1sID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIG1zZ0RhdGEuaW5uZXJIVE1MID0gbm90aWYuY2FwdGlvblxuICAgICAgICAgICAgICAgID8gYDxkaXY+JHsgbm90aWYubWVzc2FnZSB9PC9kaXY+PGRpdiBjbGFzcz1cInEtbm90aWZpY2F0aW9uX19jYXB0aW9uXCI+JHsgbm90aWYuY2FwdGlvbiB9PC9kaXY+YFxuICAgICAgICAgICAgICAgIDogbm90aWYubWVzc2FnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IG1zZ05vZGUgPSBbIG5vdGlmLm1lc3NhZ2UgXVxuICAgICAgICAgICAgICBtc2dDaGlsZCA9IG5vdGlmLmNhcHRpb25cbiAgICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgICAgaCgnZGl2JywgbXNnTm9kZSksXG4gICAgICAgICAgICAgICAgICAgIGgoJ2RpdicsIHsgY2xhc3M6ICdxLW5vdGlmaWNhdGlvbl9fY2FwdGlvbicgfSwgWyBub3RpZi5jYXB0aW9uIF0pXG4gICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgOiBtc2dOb2RlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1haW5DaGlsZC5wdXNoKFxuICAgICAgICAgICAgICBoKCdkaXYnLCBtc2dEYXRhLCBtc2dDaGlsZClcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBjaGlsZCA9IFtcbiAgICAgICAgICAgIGgoJ2RpdicsIHsgY2xhc3M6IG1ldGEuY29udGVudENsYXNzIH0sIG1haW5DaGlsZClcbiAgICAgICAgICBdXG5cbiAgICAgICAgICBub3RpZi5wcm9ncmVzcyA9PT0gdHJ1ZSAmJiBjaGlsZC5wdXNoKFxuICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICBrZXk6IGAkeyBtZXRhLnVpZCB9fHB8JHsgbWV0YS5iYWRnZSB9YCxcbiAgICAgICAgICAgICAgY2xhc3M6IG1ldGEucHJvZ3Jlc3NDbGFzcyxcbiAgICAgICAgICAgICAgc3R5bGU6IG1ldGEucHJvZ3Jlc3NTdHlsZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG5cbiAgICAgICAgICBub3RpZi5hY3Rpb25zICE9PSB2b2lkIDAgJiYgY2hpbGQucHVzaChcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgY2xhc3M6IG1ldGEuYWN0aW9uc0NsYXNzXG4gICAgICAgICAgICB9LCBub3RpZi5hY3Rpb25zLm1hcChwcm9wcyA9PiBoKFFCdG4sIHByb3BzKSkpXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgbWV0YS5iYWRnZSA+IDEgJiYgY2hpbGQucHVzaChcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAga2V5OiBgJHsgbWV0YS51aWQgfXwkeyBtZXRhLmJhZGdlIH1gLFxuICAgICAgICAgICAgICBjbGFzczogbm90aWYubWV0YS5iYWRnZUNsYXNzLFxuICAgICAgICAgICAgICBzdHlsZTogbm90aWYuYmFkZ2VTdHlsZVxuICAgICAgICAgICAgfSwgWyBtZXRhLmJhZGdlIF0pXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgICAgIHJlZjogZWwgPT4geyBub3RpZlJlZnNbICcnICsgbWV0YS51aWQgXSA9IGVsIH0sXG4gICAgICAgICAgICBrZXk6IG1ldGEudWlkLFxuICAgICAgICAgICAgY2xhc3M6IG1ldGEuY2xhc3MsXG4gICAgICAgICAgICAuLi5tZXRhLmF0dHJzXG4gICAgICAgICAgfSwgW1xuICAgICAgICAgICAgaCgnZGl2JywgeyBjbGFzczogbWV0YS53cmFwcGVyQ2xhc3MgfSwgY2hpbGQpXG4gICAgICAgICAgXSlcbiAgICAgICAgfSkpXG4gICAgICB9KSlcbiAgICB9XG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgc2V0RGVmYXVsdHMgKG9wdHMpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlKSB7XG4gICAgICBpc09iamVjdChvcHRzKSA9PT0gdHJ1ZSAmJiBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCBvcHRzKVxuICAgIH1cbiAgfSxcblxuICByZWdpc3RlclR5cGUgKHR5cGVOYW1lLCB0eXBlT3B0cykge1xuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18gIT09IHRydWUgJiYgaXNPYmplY3QodHlwZU9wdHMpID09PSB0cnVlKSB7XG4gICAgICBub3RpZlR5cGVzWyB0eXBlTmFtZSBdID0gdHlwZU9wdHNcbiAgICB9XG4gIH0sXG5cbiAgaW5zdGFsbCAoeyAkcSwgcGFyZW50QXBwIH0pIHtcbiAgICAkcS5ub3RpZnkgPSB0aGlzLmNyZWF0ZSA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICAgICAgPyBub29wXG4gICAgICA6IG9wdHMgPT4gYWRkTm90aWZpY2F0aW9uKG9wdHMsICRxKVxuXG4gICAgJHEubm90aWZ5LnNldERlZmF1bHRzID0gdGhpcy5zZXREZWZhdWx0c1xuICAgICRxLm5vdGlmeS5yZWdpc3RlclR5cGUgPSB0aGlzLnJlZ2lzdGVyVHlwZVxuXG4gICAgaWYgKCRxLmNvbmZpZy5ub3RpZnkgIT09IHZvaWQgMCkge1xuICAgICAgdGhpcy5zZXREZWZhdWx0cygkcS5jb25maWcubm90aWZ5KVxuICAgIH1cblxuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18gIT09IHRydWUgJiYgdGhpcy5fX2luc3RhbGxlZCAhPT0gdHJ1ZSkge1xuICAgICAgcG9zaXRpb25MaXN0LmZvckVhY2gocG9zID0+IHtcbiAgICAgICAgbm90aWZpY2F0aW9uc0xpc3RbIHBvcyBdID0gcmVmKFtdKVxuXG4gICAgICAgIGNvbnN0XG4gICAgICAgICAgdmVydCA9IFsgJ2xlZnQnLCAnY2VudGVyJywgJ3JpZ2h0JyBdLmluY2x1ZGVzKHBvcykgPT09IHRydWUgPyAnY2VudGVyJyA6IChwb3MuaW5kZXhPZigndG9wJykgIT09IC0xID8gJ3RvcCcgOiAnYm90dG9tJyksXG4gICAgICAgICAgYWxpZ24gPSBwb3MuaW5kZXhPZignbGVmdCcpICE9PSAtMSA/ICdzdGFydCcgOiAocG9zLmluZGV4T2YoJ3JpZ2h0JykgIT09IC0xID8gJ2VuZCcgOiAnY2VudGVyJyksXG4gICAgICAgICAgY2xhc3NlcyA9IFsgJ2xlZnQnLCAncmlnaHQnIF0uaW5jbHVkZXMocG9zKSA/IGBpdGVtcy0keyBwb3MgPT09ICdsZWZ0JyA/ICdzdGFydCcgOiAnZW5kJyB9IGp1c3RpZnktY2VudGVyYCA6IChwb3MgPT09ICdjZW50ZXInID8gJ2ZsZXgtY2VudGVyJyA6IGBpdGVtcy0keyBhbGlnbiB9YClcblxuICAgICAgICBwb3NpdGlvbkNsYXNzWyBwb3MgXSA9IGBxLW5vdGlmaWNhdGlvbnNfX2xpc3QgcS1ub3RpZmljYXRpb25zX19saXN0LS0keyB2ZXJ0IH0gZml4ZWQgY29sdW1uIG5vLXdyYXAgJHsgY2xhc3NlcyB9YFxuICAgICAgfSlcblxuICAgICAgY29uc3QgZWwgPSBjcmVhdGVHbG9iYWxOb2RlKCdxLW5vdGlmeScpXG4gICAgICBjcmVhdGVDaGlsZEFwcChnZXRDb21wb25lbnQoKSwgcGFyZW50QXBwKS5tb3VudChlbClcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG9uQmVmb3JlVW5tb3VudCB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IEhpc3RvcnkgZnJvbSAnLi4vLi4vcGx1Z2lucy9wcml2YXRlLmhpc3RvcnkvSGlzdG9yeS5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHNob3dpbmcsIGhpZGUsIGhpZGVPblJvdXRlQ2hhbmdlKSB7XG4gIGxldCBoaXN0b3J5RW50cnlcblxuICBmdW5jdGlvbiByZW1vdmVGcm9tSGlzdG9yeSAoKSB7XG4gICAgaWYgKGhpc3RvcnlFbnRyeSAhPT0gdm9pZCAwKSB7XG4gICAgICBIaXN0b3J5LnJlbW92ZShoaXN0b3J5RW50cnkpXG4gICAgICBoaXN0b3J5RW50cnkgPSB2b2lkIDBcbiAgICB9XG4gIH1cblxuICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgIHNob3dpbmcudmFsdWUgPT09IHRydWUgJiYgcmVtb3ZlRnJvbUhpc3RvcnkoKVxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgcmVtb3ZlRnJvbUhpc3RvcnksXG5cbiAgICBhZGRUb0hpc3RvcnkgKCkge1xuICAgICAgaGlzdG9yeUVudHJ5ID0ge1xuICAgICAgICBjb25kaXRpb246ICgpID0+IGhpZGVPblJvdXRlQ2hhbmdlLnZhbHVlID09PSB0cnVlLFxuICAgICAgICBoYW5kbGVyOiBoaWRlXG4gICAgICB9XG5cbiAgICAgIEhpc3RvcnkuYWRkKGhpc3RvcnlFbnRyeSlcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG9uRGVhY3RpdmF0ZWQsIG9uQmVmb3JlVW5tb3VudCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgeyB2bUlzRGVzdHJveWVkIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS52bS92bS5qcydcblxuLypcbiAqIFVzYWdlOlxuICogICAgcmVnaXN0ZXJUaW1lb3V0KGZuWywgZGVsYXldKVxuICogICAgcmVtb3ZlVGltZW91dCgpXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCkge1xuICBsZXQgdGltZXIgPSBudWxsXG4gIGNvbnN0IHZtID0gZ2V0Q3VycmVudEluc3RhbmNlKClcblxuICBmdW5jdGlvbiByZW1vdmVUaW1lb3V0ICgpIHtcbiAgICBpZiAodGltZXIgIT09IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgIHRpbWVyID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIG9uRGVhY3RpdmF0ZWQocmVtb3ZlVGltZW91dClcbiAgb25CZWZvcmVVbm1vdW50KHJlbW92ZVRpbWVvdXQpXG5cbiAgcmV0dXJuIHtcbiAgICByZW1vdmVUaW1lb3V0LFxuXG4gICAgcmVnaXN0ZXJUaW1lb3V0IChmbiwgZGVsYXkpIHtcbiAgICAgIHJlbW92ZVRpbWVvdXQoKVxuXG4gICAgICBpZiAodm1Jc0Rlc3Ryb3llZCh2bSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGltZXIgPSBudWxsXG4gICAgICAgICAgZm4oKVxuICAgICAgICB9LCBkZWxheSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG5leHRUaWNrLCBvbkRlYWN0aXZhdGVkLCBvbkJlZm9yZVVubW91bnQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHsgdm1Jc0Rlc3Ryb3llZCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUudm0vdm0uanMnXG5cbi8qXG4gKiBVc2FnZTpcbiAqICAgIHJlZ2lzdGVyVGljayhmbilcbiAqICAgIHJlbW92ZVRpY2soKVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgbGV0IHRpY2tGblxuICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG5cbiAgZnVuY3Rpb24gcmVtb3ZlVGljayAoKSB7XG4gICAgdGlja0ZuID0gdm9pZCAwXG4gIH1cblxuICBvbkRlYWN0aXZhdGVkKHJlbW92ZVRpY2spXG4gIG9uQmVmb3JlVW5tb3VudChyZW1vdmVUaWNrKVxuXG4gIHJldHVybiB7XG4gICAgcmVtb3ZlVGljayxcblxuICAgIHJlZ2lzdGVyVGljayAoZm4pIHtcbiAgICAgIHRpY2tGbiA9IGZuXG5cbiAgICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgaWYgKHRpY2tGbiA9PT0gZm4pIHtcbiAgICAgICAgICAvLyB3ZSBhbHNvIGNoZWNrIGlmIFZNIGlzIGRlc3Ryb3llZCwgc2luY2UgaWYgaXRcbiAgICAgICAgICAvLyBnb3QgdG8gdHJpZ2dlciBvbmUgbmV4dFRpY2soKSB3ZSBjYW5ub3Qgc3RvcCBpdFxuICAgICAgICAgIHZtSXNEZXN0cm95ZWQodm0pID09PSBmYWxzZSAmJiB0aWNrRm4oKVxuICAgICAgICAgIHRpY2tGbiA9IHZvaWQgMFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgd2F0Y2gsIG5leHRUaWNrLCBvbk1vdW50ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHsgdm1IYXNSb3V0ZXIgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLnZtL3ZtLmpzJ1xuXG5leHBvcnQgY29uc3QgdXNlTW9kZWxUb2dnbGVQcm9wcyA9IHtcbiAgbW9kZWxWYWx1ZToge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogbnVsbFxuICB9LFxuXG4gICdvblVwZGF0ZTptb2RlbFZhbHVlJzogWyBGdW5jdGlvbiwgQXJyYXkgXVxufVxuXG5leHBvcnQgY29uc3QgdXNlTW9kZWxUb2dnbGVFbWl0cyA9IFtcbiAgJ2JlZm9yZVNob3cnLCAnc2hvdycsICdiZWZvcmVIaWRlJywgJ2hpZGUnXG5dXG5cbi8vIGhhbmRsZVNob3cvaGFuZGxlSGlkZSAtPiByZW1vdmVUaWNrKCksIHNlbGYgKCYgZW1pdCBzaG93KVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoe1xuICBzaG93aW5nLFxuICBjYW5TaG93LCAvLyBvcHRpb25hbFxuICBoaWRlT25Sb3V0ZUNoYW5nZSwgLy8gb3B0aW9uYWxcbiAgaGFuZGxlU2hvdywgLy8gb3B0aW9uYWxcbiAgaGFuZGxlSGlkZSwgLy8gb3B0aW9uYWxcbiAgcHJvY2Vzc09uTW91bnQgLy8gb3B0aW9uYWxcbn0pIHtcbiAgY29uc3Qgdm0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuICBjb25zdCB7IHByb3BzLCBlbWl0LCBwcm94eSB9ID0gdm1cblxuICBsZXQgcGF5bG9hZFxuXG4gIGZ1bmN0aW9uIHRvZ2dsZSAoZXZ0KSB7XG4gICAgaWYgKHNob3dpbmcudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGhpZGUoZXZ0KVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHNob3coZXZ0KVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3cgKGV2dCkge1xuICAgIGlmIChcbiAgICAgIChwcm9wcy5kaXNhYmxlID09PSB0cnVlKVxuICAgICAgfHwgKGV2dD8ucUFuY2hvckhhbmRsZWQgPT09IHRydWUpXG4gICAgICB8fCAoY2FuU2hvdyAhPT0gdm9pZCAwICYmIGNhblNob3coZXZ0KSAhPT0gdHJ1ZSlcbiAgICApIHJldHVyblxuXG4gICAgY29uc3QgbGlzdGVuZXIgPSBwcm9wc1sgJ29uVXBkYXRlOm1vZGVsVmFsdWUnIF0gIT09IHZvaWQgMFxuXG4gICAgaWYgKGxpc3RlbmVyID09PSB0cnVlICYmIF9fUVVBU0FSX1NTUl9TRVJWRVJfXyAhPT0gdHJ1ZSkge1xuICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCB0cnVlKVxuICAgICAgcGF5bG9hZCA9IGV2dFxuICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICBpZiAocGF5bG9hZCA9PT0gZXZ0KSB7XG4gICAgICAgICAgcGF5bG9hZCA9IHZvaWQgMFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChwcm9wcy5tb2RlbFZhbHVlID09PSBudWxsIHx8IGxpc3RlbmVyID09PSBmYWxzZSB8fCBfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHtcbiAgICAgIHByb2Nlc3NTaG93KGV2dClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzU2hvdyAoZXZ0KSB7XG4gICAgaWYgKHNob3dpbmcudmFsdWUgPT09IHRydWUpIHJldHVyblxuXG4gICAgc2hvd2luZy52YWx1ZSA9IHRydWVcblxuICAgIGVtaXQoJ2JlZm9yZVNob3cnLCBldnQpXG5cbiAgICBpZiAoaGFuZGxlU2hvdyAhPT0gdm9pZCAwKSB7XG4gICAgICBoYW5kbGVTaG93KGV2dClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBlbWl0KCdzaG93JywgZXZ0KVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGUgKGV2dCkge1xuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18gfHwgcHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSkgcmV0dXJuXG5cbiAgICBjb25zdCBsaXN0ZW5lciA9IHByb3BzWyAnb25VcGRhdGU6bW9kZWxWYWx1ZScgXSAhPT0gdm9pZCAwXG5cbiAgICBpZiAobGlzdGVuZXIgPT09IHRydWUgJiYgX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlKSB7XG4gICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIGZhbHNlKVxuICAgICAgcGF5bG9hZCA9IGV2dFxuICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICBpZiAocGF5bG9hZCA9PT0gZXZ0KSB7XG4gICAgICAgICAgcGF5bG9hZCA9IHZvaWQgMFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChwcm9wcy5tb2RlbFZhbHVlID09PSBudWxsIHx8IGxpc3RlbmVyID09PSBmYWxzZSB8fCBfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHtcbiAgICAgIHByb2Nlc3NIaWRlKGV2dClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwcm9jZXNzSGlkZSAoZXZ0KSB7XG4gICAgaWYgKHNob3dpbmcudmFsdWUgPT09IGZhbHNlKSByZXR1cm5cblxuICAgIHNob3dpbmcudmFsdWUgPSBmYWxzZVxuXG4gICAgZW1pdCgnYmVmb3JlSGlkZScsIGV2dClcblxuICAgIGlmIChoYW5kbGVIaWRlICE9PSB2b2lkIDApIHtcbiAgICAgIGhhbmRsZUhpZGUoZXZ0KVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGVtaXQoJ2hpZGUnLCBldnQpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcHJvY2Vzc01vZGVsQ2hhbmdlICh2YWwpIHtcbiAgICBpZiAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSAmJiB2YWwgPT09IHRydWUpIHtcbiAgICAgIGlmIChwcm9wc1sgJ29uVXBkYXRlOm1vZGVsVmFsdWUnIF0gIT09IHZvaWQgMCkge1xuICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIGZhbHNlKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgodmFsID09PSB0cnVlKSAhPT0gc2hvd2luZy52YWx1ZSkge1xuICAgICAgY29uc3QgZm4gPSB2YWwgPT09IHRydWUgPyBwcm9jZXNzU2hvdyA6IHByb2Nlc3NIaWRlXG4gICAgICBmbihwYXlsb2FkKVxuICAgIH1cbiAgfVxuXG4gIHdhdGNoKCgpID0+IHByb3BzLm1vZGVsVmFsdWUsIHByb2Nlc3NNb2RlbENoYW5nZSlcblxuICBpZiAoaGlkZU9uUm91dGVDaGFuZ2UgIT09IHZvaWQgMCAmJiB2bUhhc1JvdXRlcih2bSkgPT09IHRydWUpIHtcbiAgICB3YXRjaCgoKSA9PiBwcm94eS4kcm91dGUuZnVsbFBhdGgsICgpID0+IHtcbiAgICAgIGlmIChoaWRlT25Sb3V0ZUNoYW5nZS52YWx1ZSA9PT0gdHJ1ZSAmJiBzaG93aW5nLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgIGhpZGUoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBwcm9jZXNzT25Nb3VudCA9PT0gdHJ1ZSAmJiBvbk1vdW50ZWQoKCkgPT4ge1xuICAgIHByb2Nlc3NNb2RlbENoYW5nZShwcm9wcy5tb2RlbFZhbHVlKVxuICB9KVxuXG4gIC8vIGV4cG9zZSBwdWJsaWMgbWV0aG9kc1xuICBjb25zdCBwdWJsaWNNZXRob2RzID0geyBzaG93LCBoaWRlLCB0b2dnbGUgfVxuICBPYmplY3QuYXNzaWduKHByb3h5LCBwdWJsaWNNZXRob2RzKVxuXG4gIHJldHVybiBwdWJsaWNNZXRob2RzXG59XG4iLCJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IHVzZVRyYW5zaXRpb25Qcm9wcyA9IHtcbiAgdHJhbnNpdGlvblNob3c6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ2ZhZGUnXG4gIH0sXG5cbiAgdHJhbnNpdGlvbkhpZGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ2ZhZGUnXG4gIH0sXG5cbiAgdHJhbnNpdGlvbkR1cmF0aW9uOiB7XG4gICAgdHlwZTogWyBTdHJpbmcsIE51bWJlciBdLFxuICAgIGRlZmF1bHQ6IDMwMFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcywgZGVmYXVsdFNob3dGbiA9ICgpID0+IHt9LCBkZWZhdWx0SGlkZUZuID0gKCkgPT4ge30pIHtcbiAgcmV0dXJuIHtcbiAgICB0cmFuc2l0aW9uUHJvcHM6IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGNvbnN0IHNob3cgPSBgcS10cmFuc2l0aW9uLS0keyBwcm9wcy50cmFuc2l0aW9uU2hvdyB8fCBkZWZhdWx0U2hvd0ZuKCkgfWBcbiAgICAgIGNvbnN0IGhpZGUgPSBgcS10cmFuc2l0aW9uLS0keyBwcm9wcy50cmFuc2l0aW9uSGlkZSB8fCBkZWZhdWx0SGlkZUZuKCkgfWBcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwZWFyOiB0cnVlLFxuXG4gICAgICAgIGVudGVyRnJvbUNsYXNzOiBgJHsgc2hvdyB9LWVudGVyLWZyb21gLFxuICAgICAgICBlbnRlckFjdGl2ZUNsYXNzOiBgJHsgc2hvdyB9LWVudGVyLWFjdGl2ZWAsXG4gICAgICAgIGVudGVyVG9DbGFzczogYCR7IHNob3cgfS1lbnRlci10b2AsXG5cbiAgICAgICAgbGVhdmVGcm9tQ2xhc3M6IGAkeyBoaWRlIH0tbGVhdmUtZnJvbWAsXG4gICAgICAgIGxlYXZlQWN0aXZlQ2xhc3M6IGAkeyBoaWRlIH0tbGVhdmUtYWN0aXZlYCxcbiAgICAgICAgbGVhdmVUb0NsYXNzOiBgJHsgaGlkZSB9LWxlYXZlLXRvYFxuICAgICAgfVxuICAgIH0pLFxuXG4gICAgdHJhbnNpdGlvblN0eWxlOiBjb21wdXRlZCgoKSA9PiBgLS1xLXRyYW5zaXRpb24tZHVyYXRpb246ICR7IHByb3BzLnRyYW5zaXRpb25EdXJhdGlvbiB9bXNgKVxuICB9XG59XG4iLCJsZXQgcXVldWUgPSBbXVxubGV0IHdhaXRGbGFncyA9IFtdXG5cbmZ1bmN0aW9uIGNsZWFyRmxhZyAoZmxhZykge1xuICB3YWl0RmxhZ3MgPSB3YWl0RmxhZ3MuZmlsdGVyKGVudHJ5ID0+IGVudHJ5ICE9PSBmbGFnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRm9jdXNXYWl0RmxhZyAoZmxhZykge1xuICBjbGVhckZsYWcoZmxhZylcbiAgd2FpdEZsYWdzLnB1c2goZmxhZylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZvY3VzV2FpdEZsYWcgKGZsYWcpIHtcbiAgY2xlYXJGbGFnKGZsYWcpXG5cbiAgaWYgKHdhaXRGbGFncy5sZW5ndGggPT09IDAgJiYgcXVldWUubGVuZ3RoICE9PSAwKSB7XG4gICAgLy8gb25seSBjYWxsIGxhc3QgZm9jdXMgaGFuZGxlciAoY2FuJ3QgZm9jdXMgbXVsdGlwbGUgdGhpbmdzIGF0IG9uY2UpXG4gICAgcXVldWVbIHF1ZXVlLmxlbmd0aCAtIDEgXSgpXG4gICAgcXVldWUgPSBbXVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRGb2N1c0ZuIChmbikge1xuICBpZiAod2FpdEZsYWdzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZuKClcbiAgfVxuICBlbHNlIHtcbiAgICBxdWV1ZS5wdXNoKGZuKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGb2N1c0ZuIChmbikge1xuICBxdWV1ZSA9IHF1ZXVlLmZpbHRlcihlbnRyeSA9PiBlbnRyeSAhPT0gZm4pXG59XG4iLCJpbXBvcnQgeyBnZXRQYXJlbnRQcm94eSB9IGZyb20gJy4uL3ByaXZhdGUudm0vdm0uanMnXG5cbmV4cG9ydCBjb25zdCBwb3J0YWxQcm94eUxpc3QgPSBbXVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9ydGFsUHJveHkgKGVsKSB7XG4gIHJldHVybiBwb3J0YWxQcm94eUxpc3QuZmluZChwcm94eSA9PlxuICAgIHByb3h5LmNvbnRlbnRFbCAhPT0gbnVsbFxuICAgICYmIHByb3h5LmNvbnRlbnRFbC5jb250YWlucyhlbClcbiAgKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3J0YWxNZW51cyAocHJveHksIGV2dCkge1xuICBkbyB7XG4gICAgaWYgKHByb3h5LiRvcHRpb25zLm5hbWUgPT09ICdRTWVudScpIHtcbiAgICAgIHByb3h5LmhpZGUoZXZ0KVxuXG4gICAgICAvLyBpcyB0aGlzIGEgcG9pbnQgb2Ygc2VwYXJhdGlvbj9cbiAgICAgIGlmIChwcm94eS4kcHJvcHMuc2VwYXJhdGVDbG9zZVBvcHVwID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBnZXRQYXJlbnRQcm94eShwcm94eSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocHJveHkuX19xUG9ydGFsID09PSB0cnVlKSB7XG4gICAgICAvLyB0cmVhdCBpdCBhcyBwb2ludCBvZiBzZXBhcmF0aW9uIGlmIHBhcmVudCBpcyBRUG9wdXBQcm94eVxuICAgICAgLy8gKHNvIG1vYmlsZSBtYXRjaGVzIGRlc2t0b3AgYmVoYXZpb3IpXG4gICAgICAvLyBhbmQgaGlkZSBpdCB0b29cbiAgICAgIGNvbnN0IHBhcmVudCA9IGdldFBhcmVudFByb3h5KHByb3h5KVxuXG4gICAgICBpZiAocGFyZW50Py4kb3B0aW9ucy5uYW1lID09PSAnUVBvcHVwUHJveHknKSB7XG4gICAgICAgIHByb3h5LmhpZGUoZXZ0KVxuICAgICAgICByZXR1cm4gcGFyZW50XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHByb3h5XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJveHkgPSBnZXRQYXJlbnRQcm94eShwcm94eSlcbiAgfSB3aGlsZSAocHJveHkgIT09IHZvaWQgMCAmJiBwcm94eSAhPT0gbnVsbClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlUG9ydGFscyAocHJveHksIGV2dCwgZGVwdGgpIHtcbiAgd2hpbGUgKGRlcHRoICE9PSAwICYmIHByb3h5ICE9PSB2b2lkIDAgJiYgcHJveHkgIT09IG51bGwpIHtcbiAgICBpZiAocHJveHkuX19xUG9ydGFsID09PSB0cnVlKSB7XG4gICAgICBkZXB0aC0tXG5cbiAgICAgIGlmIChwcm94eS4kb3B0aW9ucy5uYW1lID09PSAnUU1lbnUnKSB7XG4gICAgICAgIHByb3h5ID0gY2xvc2VQb3J0YWxNZW51cyhwcm94eSwgZXZ0KVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBwcm94eS5oaWRlKGV2dClcbiAgICB9XG5cbiAgICBwcm94eSA9IGdldFBhcmVudFByb3h5KHByb3h5KVxuICB9XG59XG4iLCJpbXBvcnQgeyBoLCByZWYsIG9uVW5tb3VudGVkLCBUZWxlcG9ydCB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5jcmVhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50L2V2ZW50LmpzJ1xuaW1wb3J0IHsgYWRkRm9jdXNXYWl0RmxhZywgcmVtb3ZlRm9jdXNXYWl0RmxhZyB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuZm9jdXMvZm9jdXMtbWFuYWdlci5qcydcbmltcG9ydCB7IGNyZWF0ZUdsb2JhbE5vZGUsIHJlbW92ZUdsb2JhbE5vZGUgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNvbmZpZy9ub2Rlcy5qcydcbmltcG9ydCB7IHBvcnRhbFByb3h5TGlzdCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUucG9ydGFsL3BvcnRhbC5qcydcbmltcG9ydCB7IGluamVjdFByb3AgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmluamVjdC1vYmotcHJvcC9pbmplY3Qtb2JqLXByb3AuanMnXG5cbi8qKlxuICogTm9vcCBpbnRlcm5hbCBjb21wb25lbnQgdG8gZWFzZSB0ZXN0aW5nXG4gKiBvZiB0aGUgdGVsZXBvcnRlZCBjb250ZW50LlxuICpcbiAqIGNvbnN0IHdyYXBwZXIgPSBtb3VudChRRGlhbG9nLCB7IC4uLiB9KVxuICogY29uc3QgdGVsZXBvcnRlZFdyYXBwZXIgPSB3cmFwcGVyLmZpbmRDb21wb25lbnQoeyBuYW1lOiAnUVBvcnRhbCcgfSlcbiAqL1xuY29uc3QgUVBvcnRhbCA9IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdRUG9ydGFsJyxcbiAgc2V0dXAgKF8sIHsgc2xvdHMgfSkge1xuICAgIHJldHVybiAoKSA9PiBzbG90cy5kZWZhdWx0KClcbiAgfVxufSlcblxuZnVuY3Rpb24gaXNPbkdsb2JhbERpYWxvZyAodm0pIHtcbiAgdm0gPSB2bS5wYXJlbnRcblxuICB3aGlsZSAodm0gIT09IHZvaWQgMCAmJiB2bSAhPT0gbnVsbCkge1xuICAgIGlmICh2bS50eXBlLm5hbWUgPT09ICdRR2xvYmFsRGlhbG9nJykge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgaWYgKHZtLnR5cGUubmFtZSA9PT0gJ1FEaWFsb2cnIHx8IHZtLnR5cGUubmFtZSA9PT0gJ1FNZW51Jykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgdm0gPSB2bS5wYXJlbnRcbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG4vLyBXYXJuaW5nIVxuLy8gWW91IE1VU1Qgc3BlY2lmeSBcImluaGVyaXRBdHRyczogZmFsc2VcIiBpbiB5b3VyIGNvbXBvbmVudFxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAodm0sIGlubmVyUmVmLCByZW5kZXJQb3J0YWxDb250ZW50LCB0eXBlKSB7XG4gIC8vIHNob3dpbmcsIGluY2x1ZGluZyB3aGlsZSBpbiBzaG93L2hpZGUgdHJhbnNpdGlvblxuICBjb25zdCBwb3J0YWxJc0FjdGl2ZSA9IHJlZihmYWxzZSlcblxuICAvLyBzaG93aW5nICYgbm90IGluIGFueSBzaG93L2hpZGUgdHJhbnNpdGlvblxuICBjb25zdCBwb3J0YWxJc0FjY2Vzc2libGUgPSByZWYoZmFsc2UpXG5cbiAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgIHJldHVybiB7XG4gICAgICBwb3J0YWxJc0FjdGl2ZSxcbiAgICAgIHBvcnRhbElzQWNjZXNzaWJsZSxcblxuICAgICAgc2hvd1BvcnRhbDogbm9vcCxcbiAgICAgIGhpZGVQb3J0YWw6IG5vb3AsXG4gICAgICByZW5kZXJQb3J0YWw6IG5vb3BcbiAgICB9XG4gIH1cblxuICBsZXQgcG9ydGFsRWwgPSBudWxsXG4gIGNvbnN0IGZvY3VzT2JqID0ge31cbiAgY29uc3Qgb25HbG9iYWxEaWFsb2cgPSB0eXBlID09PSAnZGlhbG9nJyAmJiBpc09uR2xvYmFsRGlhbG9nKHZtKVxuXG4gIGZ1bmN0aW9uIHNob3dQb3J0YWwgKGlzUmVhZHkpIHtcbiAgICBpZiAoaXNSZWFkeSA9PT0gdHJ1ZSkge1xuICAgICAgcmVtb3ZlRm9jdXNXYWl0RmxhZyhmb2N1c09iailcbiAgICAgIHBvcnRhbElzQWNjZXNzaWJsZS52YWx1ZSA9IHRydWVcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHBvcnRhbElzQWNjZXNzaWJsZS52YWx1ZSA9IGZhbHNlXG5cbiAgICBpZiAocG9ydGFsSXNBY3RpdmUudmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICBpZiAob25HbG9iYWxEaWFsb2cgPT09IGZhbHNlICYmIHBvcnRhbEVsID09PSBudWxsKSB7XG4gICAgICAgIHBvcnRhbEVsID0gY3JlYXRlR2xvYmFsTm9kZShmYWxzZSwgdHlwZSlcbiAgICAgIH1cblxuICAgICAgcG9ydGFsSXNBY3RpdmUudmFsdWUgPSB0cnVlXG5cbiAgICAgIC8vIHJlZ2lzdGVyIHBvcnRhbFxuICAgICAgcG9ydGFsUHJveHlMaXN0LnB1c2godm0ucHJveHkpXG5cbiAgICAgIGFkZEZvY3VzV2FpdEZsYWcoZm9jdXNPYmopXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGlkZVBvcnRhbCAoaXNSZWFkeSkge1xuICAgIHBvcnRhbElzQWNjZXNzaWJsZS52YWx1ZSA9IGZhbHNlXG5cbiAgICBpZiAoaXNSZWFkeSAhPT0gdHJ1ZSkgcmV0dXJuXG5cbiAgICByZW1vdmVGb2N1c1dhaXRGbGFnKGZvY3VzT2JqKVxuICAgIHBvcnRhbElzQWN0aXZlLnZhbHVlID0gZmFsc2VcblxuICAgIC8vIHVucmVnaXN0ZXIgcG9ydGFsXG4gICAgY29uc3QgaW5kZXggPSBwb3J0YWxQcm94eUxpc3QuaW5kZXhPZih2bS5wcm94eSlcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBwb3J0YWxQcm94eUxpc3Quc3BsaWNlKGluZGV4LCAxKVxuICAgIH1cblxuICAgIGlmIChwb3J0YWxFbCAhPT0gbnVsbCkge1xuICAgICAgcmVtb3ZlR2xvYmFsTm9kZShwb3J0YWxFbClcbiAgICAgIHBvcnRhbEVsID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIG9uVW5tb3VudGVkKCgpID0+IHsgaGlkZVBvcnRhbCh0cnVlKSB9KVxuXG4gIC8vIG5lZWRlZCBmb3IgcG9ydGFsIHZtIGRldGVjdGlvblxuICB2bS5wcm94eS5fX3FQb3J0YWwgPSB0cnVlXG5cbiAgLy8gcHVibGljIHdheSBvZiBhY2Nlc3NpbmcgdGhlIHJlbmRlcmVkIGNvbnRlbnRcbiAgaW5qZWN0UHJvcCh2bS5wcm94eSwgJ2NvbnRlbnRFbCcsICgpID0+IGlubmVyUmVmLnZhbHVlKVxuXG4gIHJldHVybiB7XG4gICAgc2hvd1BvcnRhbCxcbiAgICBoaWRlUG9ydGFsLFxuXG4gICAgcG9ydGFsSXNBY3RpdmUsXG4gICAgcG9ydGFsSXNBY2Nlc3NpYmxlLFxuXG4gICAgcmVuZGVyUG9ydGFsOiAoKSA9PiAoXG4gICAgICBvbkdsb2JhbERpYWxvZyA9PT0gdHJ1ZVxuICAgICAgICA/IHJlbmRlclBvcnRhbENvbnRlbnQoKVxuICAgICAgICA6IChcbiAgICAgICAgICAgIHBvcnRhbElzQWN0aXZlLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgICAgID8gWyBoKFRlbGVwb3J0LCB7IHRvOiBwb3J0YWxFbCB9LCBoKFFQb3J0YWwsIHJlbmRlclBvcnRhbENvbnRlbnQpKSBdXG4gICAgICAgICAgICAgIDogdm9pZCAwXG4gICAgICAgICAgKVxuICAgIClcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3NzLCBnZXRFbGVtZW50IH0gZnJvbSAnLi4vZG9tL2RvbS5qcydcblxuZXhwb3J0IGNvbnN0IHNjcm9sbFRhcmdldFByb3AgPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyB7fSAvKiBTU1IgZG9lcyBub3Qga25vdyBhYm91dCBFbGVtZW50ICovXG4gIDogWyBFbGVtZW50LCBTdHJpbmcgXVxuXG5jb25zdCBzY3JvbGxUYXJnZXRzID0gX19RVUFTQVJfU1NSX1NFUlZFUl9fXG4gID8gW11cbiAgOiBbIG51bGwsIGRvY3VtZW50LCBkb2N1bWVudC5ib2R5LCBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgXVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nyb2xsVGFyZ2V0IChlbCwgdGFyZ2V0RWwpIHtcbiAgbGV0IHRhcmdldCA9IGdldEVsZW1lbnQodGFyZ2V0RWwpXG5cbiAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7XG4gICAgaWYgKGVsID09PSB2b2lkIDAgfHwgZWwgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB3aW5kb3dcbiAgICB9XG5cbiAgICB0YXJnZXQgPSBlbC5jbG9zZXN0KCcuc2Nyb2xsLC5zY3JvbGwteSwub3ZlcmZsb3ctYXV0bycpXG4gIH1cblxuICByZXR1cm4gc2Nyb2xsVGFyZ2V0cy5pbmNsdWRlcyh0YXJnZXQpXG4gICAgPyB3aW5kb3dcbiAgICA6IHRhcmdldFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nyb2xsSGVpZ2h0IChlbCkge1xuICByZXR1cm4gKGVsID09PSB3aW5kb3cgPyBkb2N1bWVudC5ib2R5IDogZWwpLnNjcm9sbEhlaWdodFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nyb2xsV2lkdGggKGVsKSB7XG4gIHJldHVybiAoZWwgPT09IHdpbmRvdyA/IGRvY3VtZW50LmJvZHkgOiBlbCkuc2Nyb2xsV2lkdGhcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24gKHNjcm9sbFRhcmdldCkge1xuICByZXR1cm4gc2Nyb2xsVGFyZ2V0ID09PSB3aW5kb3dcbiAgICA/IHdpbmRvdy5wYWdlWU9mZnNldCB8fCB3aW5kb3cuc2Nyb2xsWSB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwXG4gICAgOiBzY3JvbGxUYXJnZXQuc2Nyb2xsVG9wXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24gKHNjcm9sbFRhcmdldCkge1xuICByZXR1cm4gc2Nyb2xsVGFyZ2V0ID09PSB3aW5kb3dcbiAgICA/IHdpbmRvdy5wYWdlWE9mZnNldCB8fCB3aW5kb3cuc2Nyb2xsWCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgMFxuICAgIDogc2Nyb2xsVGFyZ2V0LnNjcm9sbExlZnRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFuaW1WZXJ0aWNhbFNjcm9sbFRvIChlbCwgdG8sIGR1cmF0aW9uID0gMCAvKiAsIHByZXZUaW1lICovKSB7XG4gIGNvbnN0IHByZXZUaW1lID0gYXJndW1lbnRzWyAzIF0gPT09IHZvaWQgMCA/IHBlcmZvcm1hbmNlLm5vdygpIDogYXJndW1lbnRzWyAzIF1cbiAgY29uc3QgcG9zID0gZ2V0VmVydGljYWxTY3JvbGxQb3NpdGlvbihlbClcblxuICBpZiAoZHVyYXRpb24gPD0gMCkge1xuICAgIGlmIChwb3MgIT09IHRvKSB7XG4gICAgICBzZXRTY3JvbGwoZWwsIHRvKVxuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShub3dUaW1lID0+IHtcbiAgICBjb25zdCBmcmFtZVRpbWUgPSBub3dUaW1lIC0gcHJldlRpbWVcbiAgICBjb25zdCBuZXdQb3MgPSBwb3MgKyAodG8gLSBwb3MpIC8gTWF0aC5tYXgoZnJhbWVUaW1lLCBkdXJhdGlvbikgKiBmcmFtZVRpbWVcbiAgICBzZXRTY3JvbGwoZWwsIG5ld1BvcylcbiAgICBpZiAobmV3UG9zICE9PSB0bykge1xuICAgICAgYW5pbVZlcnRpY2FsU2Nyb2xsVG8oZWwsIHRvLCBkdXJhdGlvbiAtIGZyYW1lVGltZSwgbm93VGltZSlcbiAgICB9XG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbmltSG9yaXpvbnRhbFNjcm9sbFRvIChlbCwgdG8sIGR1cmF0aW9uID0gMCAvKiAsIHByZXZUaW1lICovKSB7XG4gIGNvbnN0IHByZXZUaW1lID0gYXJndW1lbnRzWyAzIF0gPT09IHZvaWQgMCA/IHBlcmZvcm1hbmNlLm5vdygpIDogYXJndW1lbnRzWyAzIF1cbiAgY29uc3QgcG9zID0gZ2V0SG9yaXpvbnRhbFNjcm9sbFBvc2l0aW9uKGVsKVxuXG4gIGlmIChkdXJhdGlvbiA8PSAwKSB7XG4gICAgaWYgKHBvcyAhPT0gdG8pIHtcbiAgICAgIHNldEhvcml6b250YWxTY3JvbGwoZWwsIHRvKVxuICAgIH1cbiAgICByZXR1cm5cbiAgfVxuXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShub3dUaW1lID0+IHtcbiAgICBjb25zdCBmcmFtZVRpbWUgPSBub3dUaW1lIC0gcHJldlRpbWVcbiAgICBjb25zdCBuZXdQb3MgPSBwb3MgKyAodG8gLSBwb3MpIC8gTWF0aC5tYXgoZnJhbWVUaW1lLCBkdXJhdGlvbikgKiBmcmFtZVRpbWVcbiAgICBzZXRIb3Jpem9udGFsU2Nyb2xsKGVsLCBuZXdQb3MpXG4gICAgaWYgKG5ld1BvcyAhPT0gdG8pIHtcbiAgICAgIGFuaW1Ib3Jpem9udGFsU2Nyb2xsVG8oZWwsIHRvLCBkdXJhdGlvbiAtIGZyYW1lVGltZSwgbm93VGltZSlcbiAgICB9XG4gIH0pXG59XG5cbmZ1bmN0aW9uIHNldFNjcm9sbCAoc2Nyb2xsVGFyZ2V0LCBvZmZzZXQpIHtcbiAgaWYgKHNjcm9sbFRhcmdldCA9PT0gd2luZG93KSB7XG4gICAgd2luZG93LnNjcm9sbFRvKHdpbmRvdy5wYWdlWE9mZnNldCB8fCB3aW5kb3cuc2Nyb2xsWCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgMCwgb2Zmc2V0KVxuICAgIHJldHVyblxuICB9XG4gIHNjcm9sbFRhcmdldC5zY3JvbGxUb3AgPSBvZmZzZXRcbn1cblxuZnVuY3Rpb24gc2V0SG9yaXpvbnRhbFNjcm9sbCAoc2Nyb2xsVGFyZ2V0LCBvZmZzZXQpIHtcbiAgaWYgKHNjcm9sbFRhcmdldCA9PT0gd2luZG93KSB7XG4gICAgd2luZG93LnNjcm9sbFRvKG9mZnNldCwgd2luZG93LnBhZ2VZT2Zmc2V0IHx8IHdpbmRvdy5zY3JvbGxZIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDApXG4gICAgcmV0dXJuXG4gIH1cbiAgc2Nyb2xsVGFyZ2V0LnNjcm9sbExlZnQgPSBvZmZzZXRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24gKHNjcm9sbFRhcmdldCwgb2Zmc2V0LCBkdXJhdGlvbikge1xuICBpZiAoZHVyYXRpb24pIHtcbiAgICBhbmltVmVydGljYWxTY3JvbGxUbyhzY3JvbGxUYXJnZXQsIG9mZnNldCwgZHVyYXRpb24pXG4gICAgcmV0dXJuXG4gIH1cbiAgc2V0U2Nyb2xsKHNjcm9sbFRhcmdldCwgb2Zmc2V0KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0SG9yaXpvbnRhbFNjcm9sbFBvc2l0aW9uIChzY3JvbGxUYXJnZXQsIG9mZnNldCwgZHVyYXRpb24pIHtcbiAgaWYgKGR1cmF0aW9uKSB7XG4gICAgYW5pbUhvcml6b250YWxTY3JvbGxUbyhzY3JvbGxUYXJnZXQsIG9mZnNldCwgZHVyYXRpb24pXG4gICAgcmV0dXJuXG4gIH1cbiAgc2V0SG9yaXpvbnRhbFNjcm9sbChzY3JvbGxUYXJnZXQsIG9mZnNldClcbn1cblxubGV0IHNpemVcbmV4cG9ydCBmdW5jdGlvbiBnZXRTY3JvbGxiYXJXaWR0aCAoKSB7XG4gIGlmIChzaXplICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gc2l6ZVxuICB9XG5cbiAgY29uc3RcbiAgICBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSxcbiAgICBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgY3NzKGlubmVyLCB7XG4gICAgd2lkdGg6ICcxMDAlJyxcbiAgICBoZWlnaHQ6ICcyMDBweCdcbiAgfSlcbiAgY3NzKG91dGVyLCB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgdG9wOiAnMHB4JyxcbiAgICBsZWZ0OiAnMHB4JyxcbiAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJyxcbiAgICB3aWR0aDogJzIwMHB4JyxcbiAgICBoZWlnaHQ6ICcxNTBweCcsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG4gIH0pXG5cbiAgb3V0ZXIuYXBwZW5kQ2hpbGQoaW5uZXIpXG5cbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcilcblxuICBjb25zdCB3MSA9IGlubmVyLm9mZnNldFdpZHRoXG4gIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCdcbiAgbGV0IHcyID0gaW5uZXIub2Zmc2V0V2lkdGhcblxuICBpZiAodzEgPT09IHcyKSB7XG4gICAgdzIgPSBvdXRlci5jbGllbnRXaWR0aFxuICB9XG5cbiAgb3V0ZXIucmVtb3ZlKClcbiAgc2l6ZSA9IHcxIC0gdzJcblxuICByZXR1cm4gc2l6ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzU2Nyb2xsYmFyIChlbCwgb25ZID0gdHJ1ZSkge1xuICBpZiAoIWVsIHx8IGVsLm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIG9uWVxuICAgID8gKFxuICAgICAgICBlbC5zY3JvbGxIZWlnaHQgPiBlbC5jbGllbnRIZWlnaHQgJiYgKFxuICAgICAgICAgIGVsLmNsYXNzTGlzdC5jb250YWlucygnc2Nyb2xsJylcbiAgICAgICAgICB8fCBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ292ZXJmbG93LWF1dG8nKVxuICAgICAgICAgIHx8IFsgJ2F1dG8nLCAnc2Nyb2xsJyBdLmluY2x1ZGVzKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKVsgJ292ZXJmbG93LXknIF0pXG4gICAgICAgIClcbiAgICAgIClcbiAgICA6IChcbiAgICAgICAgZWwuc2Nyb2xsV2lkdGggPiBlbC5jbGllbnRXaWR0aCAmJiAoXG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzY3JvbGwnKVxuICAgICAgICAgIHx8IGVsLmNsYXNzTGlzdC5jb250YWlucygnb3ZlcmZsb3ctYXV0bycpXG4gICAgICAgICAgfHwgWyAnYXV0bycsICdzY3JvbGwnIF0uaW5jbHVkZXMod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpWyAnb3ZlcmZsb3cteCcgXSlcbiAgICAgICAgKVxuICAgICAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGdldFNjcm9sbFRhcmdldCxcblxuICBnZXRTY3JvbGxIZWlnaHQsXG4gIGdldFNjcm9sbFdpZHRoLFxuXG4gIGdldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24sXG4gIGdldEhvcml6b250YWxTY3JvbGxQb3NpdGlvbixcblxuICBhbmltVmVydGljYWxTY3JvbGxUbyxcbiAgYW5pbUhvcml6b250YWxTY3JvbGxUbyxcblxuICBzZXRWZXJ0aWNhbFNjcm9sbFBvc2l0aW9uLFxuICBzZXRIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24sXG5cbiAgZ2V0U2Nyb2xsYmFyV2lkdGgsXG4gIGhhc1Njcm9sbGJhclxufVxuIiwiaW1wb3J0IHsgaGFzU2Nyb2xsYmFyLCBnZXRWZXJ0aWNhbFNjcm9sbFBvc2l0aW9uLCBnZXRIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24gfSBmcm9tICcuL3Njcm9sbC5qcydcbmltcG9ydCB7IGdldEV2ZW50UGF0aCwgbGlzdGVuT3B0cywgc3RvcEFuZFByZXZlbnQgfSBmcm9tICcuLi9ldmVudC9ldmVudC5qcydcbmltcG9ydCB7IGNsaWVudCB9IGZyb20gJy4uLy4uL3BsdWdpbnMvcGxhdGZvcm0vUGxhdGZvcm0uanMnXG5cbmxldFxuICByZWdpc3RlcmVkID0gMCxcbiAgc2Nyb2xsUG9zaXRpb25YLFxuICBzY3JvbGxQb3NpdGlvblksXG4gIG1heFNjcm9sbFRvcCxcbiAgdnBQZW5kaW5nVXBkYXRlID0gZmFsc2UsXG4gIGJvZHlMZWZ0LFxuICBib2R5VG9wLFxuICBocmVmLFxuICBjbG9zZVRpbWVyID0gbnVsbFxuXG5mdW5jdGlvbiBvbldoZWVsIChlKSB7XG4gIGlmIChzaG91bGRQcmV2ZW50U2Nyb2xsKGUpKSB7XG4gICAgc3RvcEFuZFByZXZlbnQoZSlcbiAgfVxufVxuXG5mdW5jdGlvbiBzaG91bGRQcmV2ZW50U2Nyb2xsIChlKSB7XG4gIGlmIChlLnRhcmdldCA9PT0gZG9jdW1lbnQuYm9keSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3EtbGF5b3V0X19iYWNrZHJvcCcpKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGNvbnN0XG4gICAgcGF0aCA9IGdldEV2ZW50UGF0aChlKSxcbiAgICBzaGlmdCA9IGUuc2hpZnRLZXkgJiYgIWUuZGVsdGFYLFxuICAgIHNjcm9sbFkgPSAhc2hpZnQgJiYgTWF0aC5hYnMoZS5kZWx0YVgpIDw9IE1hdGguYWJzKGUuZGVsdGFZKSxcbiAgICBkZWx0YSA9IHNoaWZ0IHx8IHNjcm9sbFkgPyBlLmRlbHRhWSA6IGUuZGVsdGFYXG5cbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHBhdGgubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY29uc3QgZWwgPSBwYXRoWyBpbmRleCBdXG5cbiAgICBpZiAoaGFzU2Nyb2xsYmFyKGVsLCBzY3JvbGxZKSkge1xuICAgICAgcmV0dXJuIHNjcm9sbFlcbiAgICAgICAgPyAoXG4gICAgICAgICAgICBkZWx0YSA8IDAgJiYgZWwuc2Nyb2xsVG9wID09PSAwXG4gICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICA6IGRlbHRhID4gMCAmJiBlbC5zY3JvbGxUb3AgKyBlbC5jbGllbnRIZWlnaHQgPT09IGVsLnNjcm9sbEhlaWdodFxuICAgICAgICAgIClcbiAgICAgICAgOiAoXG4gICAgICAgICAgICBkZWx0YSA8IDAgJiYgZWwuc2Nyb2xsTGVmdCA9PT0gMFxuICAgICAgICAgICAgICA/IHRydWVcbiAgICAgICAgICAgICAgOiBkZWx0YSA+IDAgJiYgZWwuc2Nyb2xsTGVmdCArIGVsLmNsaWVudFdpZHRoID09PSBlbC5zY3JvbGxXaWR0aFxuICAgICAgICAgIClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBvbkFwcGxlU2Nyb2xsIChlKSB7XG4gIGlmIChlLnRhcmdldCA9PT0gZG9jdW1lbnQpIHtcbiAgICAvLyByZXF1aXJlZCwgb3RoZXJ3aXNlIGlPUyBibG9ja3MgZnVydGhlciBzY3JvbGxpbmdcbiAgICAvLyB1bnRpbCB0aGUgbW9iaWxlIHNjcm9sbGJhciBkaXNzYXBwZWFyc1xuICAgIGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsVG9wID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3AgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB9XG59XG5cbmZ1bmN0aW9uIG9uQXBwbGVSZXNpemUgKGV2dCkge1xuICBpZiAodnBQZW5kaW5nVXBkYXRlID09PSB0cnVlKSByZXR1cm5cblxuICB2cFBlbmRpbmdVcGRhdGUgPSB0cnVlXG5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICB2cFBlbmRpbmdVcGRhdGUgPSBmYWxzZVxuXG4gICAgY29uc3RcbiAgICAgIHsgaGVpZ2h0IH0gPSBldnQudGFyZ2V0LFxuICAgICAgeyBjbGllbnRIZWlnaHQsIHNjcm9sbFRvcCB9ID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudFxuXG4gICAgaWYgKG1heFNjcm9sbFRvcCA9PT0gdm9pZCAwIHx8IGhlaWdodCAhPT0gd2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICBtYXhTY3JvbGxUb3AgPSBjbGllbnRIZWlnaHQgLSBoZWlnaHRcbiAgICAgIGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wXG4gICAgfVxuXG4gICAgaWYgKHNjcm9sbFRvcCA+IG1heFNjcm9sbFRvcCkge1xuICAgICAgZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3AgLT0gTWF0aC5jZWlsKChzY3JvbGxUb3AgLSBtYXhTY3JvbGxUb3ApIC8gOClcbiAgICB9XG4gIH0pXG59XG5cbmZ1bmN0aW9uIGFwcGx5IChhY3Rpb24pIHtcbiAgY29uc3RcbiAgICBib2R5ID0gZG9jdW1lbnQuYm9keSxcbiAgICBoYXNWaWV3cG9ydCA9IHdpbmRvdy52aXN1YWxWaWV3cG9ydCAhPT0gdm9pZCAwXG5cbiAgaWYgKGFjdGlvbiA9PT0gJ2FkZCcpIHtcbiAgICBjb25zdCB7IG92ZXJmbG93WSwgb3ZlcmZsb3dYIH0gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShib2R5KVxuXG4gICAgc2Nyb2xsUG9zaXRpb25YID0gZ2V0SG9yaXpvbnRhbFNjcm9sbFBvc2l0aW9uKHdpbmRvdylcbiAgICBzY3JvbGxQb3NpdGlvblkgPSBnZXRWZXJ0aWNhbFNjcm9sbFBvc2l0aW9uKHdpbmRvdylcbiAgICBib2R5TGVmdCA9IGJvZHkuc3R5bGUubGVmdFxuICAgIGJvZHlUb3AgPSBib2R5LnN0eWxlLnRvcFxuXG4gICAgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmXG5cbiAgICBib2R5LnN0eWxlLmxlZnQgPSBgLSR7IHNjcm9sbFBvc2l0aW9uWCB9cHhgXG4gICAgYm9keS5zdHlsZS50b3AgPSBgLSR7IHNjcm9sbFBvc2l0aW9uWSB9cHhgXG5cbiAgICBpZiAob3ZlcmZsb3dYICE9PSAnaGlkZGVuJyAmJiAob3ZlcmZsb3dYID09PSAnc2Nyb2xsJyB8fCBib2R5LnNjcm9sbFdpZHRoID4gd2luZG93LmlubmVyV2lkdGgpKSB7XG4gICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ3EtYm9keS0tZm9yY2Utc2Nyb2xsYmFyLXgnKVxuICAgIH1cbiAgICBpZiAob3ZlcmZsb3dZICE9PSAnaGlkZGVuJyAmJiAob3ZlcmZsb3dZID09PSAnc2Nyb2xsJyB8fCBib2R5LnNjcm9sbEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCkpIHtcbiAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZCgncS1ib2R5LS1mb3JjZS1zY3JvbGxiYXIteScpXG4gICAgfVxuXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdxLWJvZHktLXByZXZlbnQtc2Nyb2xsJylcbiAgICBkb2N1bWVudC5xU2Nyb2xsUHJldmVudGVkID0gdHJ1ZVxuXG4gICAgaWYgKGNsaWVudC5pcy5pb3MgPT09IHRydWUpIHtcbiAgICAgIGlmIChoYXNWaWV3cG9ydCA9PT0gdHJ1ZSkge1xuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMClcbiAgICAgICAgd2luZG93LnZpc3VhbFZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uQXBwbGVSZXNpemUsIGxpc3Rlbk9wdHMucGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgIHdpbmRvdy52aXN1YWxWaWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvbkFwcGxlUmVzaXplLCBsaXN0ZW5PcHRzLnBhc3NpdmVDYXB0dXJlKVxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMClcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25BcHBsZVNjcm9sbCwgbGlzdGVuT3B0cy5wYXNzaXZlQ2FwdHVyZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoY2xpZW50LmlzLmRlc2t0b3AgPT09IHRydWUgJiYgY2xpZW50LmlzLm1hYyA9PT0gdHJ1ZSkge1xuICAgIC8vIHJlZi4gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3VwZGF0ZXMvMjAxNy8wMS9zY3JvbGxpbmctaW50ZXJ2ZW50aW9uXG4gICAgd2luZG93WyBgJHsgYWN0aW9uIH1FdmVudExpc3RlbmVyYCBdKCd3aGVlbCcsIG9uV2hlZWwsIGxpc3Rlbk9wdHMubm90UGFzc2l2ZSlcbiAgfVxuXG4gIGlmIChhY3Rpb24gPT09ICdyZW1vdmUnKSB7XG4gICAgaWYgKGNsaWVudC5pcy5pb3MgPT09IHRydWUpIHtcbiAgICAgIGlmIChoYXNWaWV3cG9ydCA9PT0gdHJ1ZSkge1xuICAgICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25BcHBsZVJlc2l6ZSwgbGlzdGVuT3B0cy5wYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgd2luZG93LnZpc3VhbFZpZXdwb3J0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uQXBwbGVSZXNpemUsIGxpc3Rlbk9wdHMucGFzc2l2ZUNhcHR1cmUpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uQXBwbGVTY3JvbGwsIGxpc3Rlbk9wdHMucGFzc2l2ZUNhcHR1cmUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdxLWJvZHktLXByZXZlbnQtc2Nyb2xsJylcbiAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3EtYm9keS0tZm9yY2Utc2Nyb2xsYmFyLXgnKVxuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncS1ib2R5LS1mb3JjZS1zY3JvbGxiYXIteScpXG5cbiAgICBkb2N1bWVudC5xU2Nyb2xsUHJldmVudGVkID0gZmFsc2VcblxuICAgIGJvZHkuc3R5bGUubGVmdCA9IGJvZHlMZWZ0XG4gICAgYm9keS5zdHlsZS50b3AgPSBib2R5VG9wXG5cbiAgICAvLyBzY3JvbGwgYmFjayBvbmx5IGlmIHJvdXRlIGhhcyBub3QgY2hhbmdlZFxuICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZiA9PT0gaHJlZikge1xuICAgICAgd2luZG93LnNjcm9sbFRvKHNjcm9sbFBvc2l0aW9uWCwgc2Nyb2xsUG9zaXRpb25ZKVxuICAgIH1cblxuICAgIG1heFNjcm9sbFRvcCA9IHZvaWQgMFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzdGF0ZSkge1xuICBsZXQgYWN0aW9uID0gJ2FkZCdcblxuICBpZiAoc3RhdGUgPT09IHRydWUpIHtcbiAgICByZWdpc3RlcmVkKytcblxuICAgIGlmIChjbG9zZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICBjbGVhclRpbWVvdXQoY2xvc2VUaW1lcilcbiAgICAgIGNsb3NlVGltZXIgPSBudWxsXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAocmVnaXN0ZXJlZCA+IDEpIHJldHVyblxuICB9XG4gIGVsc2Uge1xuICAgIGlmIChyZWdpc3RlcmVkID09PSAwKSByZXR1cm5cblxuICAgIHJlZ2lzdGVyZWQtLVxuXG4gICAgaWYgKHJlZ2lzdGVyZWQgPiAwKSByZXR1cm5cblxuICAgIGFjdGlvbiA9ICdyZW1vdmUnXG5cbiAgICBpZiAoY2xpZW50LmlzLmlvcyA9PT0gdHJ1ZSAmJiBjbGllbnQuaXMubmF0aXZlTW9iaWxlID09PSB0cnVlKSB7XG4gICAgICBjbG9zZVRpbWVyICE9PSBudWxsICYmIGNsZWFyVGltZW91dChjbG9zZVRpbWVyKVxuICAgICAgY2xvc2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBhcHBseShhY3Rpb24pXG4gICAgICAgIGNsb3NlVGltZXIgPSBudWxsXG4gICAgICB9LCAxMDApXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cblxuICBhcHBseShhY3Rpb24pXG59XG4iLCJpbXBvcnQgcHJldmVudFNjcm9sbCBmcm9tICcuLi8uLi91dGlscy9zY3JvbGwvcHJldmVudC1zY3JvbGwuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgbGV0IGN1cnJlbnRTdGF0ZVxuXG4gIHJldHVybiB7XG4gICAgcHJldmVudEJvZHlTY3JvbGwgKHN0YXRlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHN0YXRlICE9PSBjdXJyZW50U3RhdGVcbiAgICAgICAgJiYgKGN1cnJlbnRTdGF0ZSAhPT0gdm9pZCAwIHx8IHN0YXRlID09PSB0cnVlKVxuICAgICAgKSB7XG4gICAgICAgIGN1cnJlbnRTdGF0ZSA9IHN0YXRlXG4gICAgICAgIHByZXZlbnRTY3JvbGwoc3RhdGUpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBjbGllbnQgfSBmcm9tICcuLi8uLi9wbHVnaW5zL3BsYXRmb3JtL1BsYXRmb3JtLmpzJ1xuaW1wb3J0IHsgaXNLZXlDb2RlIH0gZnJvbSAnLi4vcHJpdmF0ZS5rZXlib2FyZC9rZXktY29tcG9zaXRpb24uanMnXG5cbmNvbnN0IGhhbmRsZXJzID0gW11cbmxldCBlc2NEb3duXG5cbmZ1bmN0aW9uIG9uS2V5ZG93biAoZXZ0KSB7XG4gIGVzY0Rvd24gPSBldnQua2V5Q29kZSA9PT0gMjdcbn1cblxuZnVuY3Rpb24gb25CbHVyICgpIHtcbiAgaWYgKGVzY0Rvd24gPT09IHRydWUpIHtcbiAgICBlc2NEb3duID0gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBvbktleXVwIChldnQpIHtcbiAgaWYgKGVzY0Rvd24gPT09IHRydWUpIHtcbiAgICBlc2NEb3duID0gZmFsc2VcblxuICAgIGlmIChpc0tleUNvZGUoZXZ0LCAyNykgPT09IHRydWUpIHtcbiAgICAgIGhhbmRsZXJzWyBoYW5kbGVycy5sZW5ndGggLSAxIF0oZXZ0KVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGUgKGFjdGlvbikge1xuICB3aW5kb3dbIGFjdGlvbiBdKCdrZXlkb3duJywgb25LZXlkb3duKVxuICB3aW5kb3dbIGFjdGlvbiBdKCdibHVyJywgb25CbHVyKVxuICB3aW5kb3dbIGFjdGlvbiBdKCdrZXl1cCcsIG9uS2V5dXApXG4gIGVzY0Rvd24gPSBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRXNjYXBlS2V5IChmbikge1xuICBpZiAoY2xpZW50LmlzLmRlc2t0b3AgPT09IHRydWUpIHtcbiAgICBoYW5kbGVycy5wdXNoKGZuKVxuXG4gICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdXBkYXRlKCdhZGRFdmVudExpc3RlbmVyJylcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUVzY2FwZUtleSAoZm4pIHtcbiAgY29uc3QgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGZuKVxuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuXG4gICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdXBkYXRlKCdyZW1vdmVFdmVudExpc3RlbmVyJylcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IGNsaWVudCB9IGZyb20gJy4uLy4uL3BsdWdpbnMvcGxhdGZvcm0vUGxhdGZvcm0uanMnXG5cbmNvbnN0IGhhbmRsZXJzID0gW11cblxuZnVuY3Rpb24gdHJpZ2dlciAoZSkge1xuICBoYW5kbGVyc1sgaGFuZGxlcnMubGVuZ3RoIC0gMSBdKGUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRGb2N1c291dCAoZm4pIHtcbiAgaWYgKGNsaWVudC5pcy5kZXNrdG9wID09PSB0cnVlKSB7XG4gICAgaGFuZGxlcnMucHVzaChmbilcblxuICAgIGlmIChoYW5kbGVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIHRyaWdnZXIpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGb2N1c291dCAoZm4pIHtcbiAgY29uc3QgaW5kZXggPSBoYW5kbGVycy5pbmRleE9mKGZuKVxuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuXG4gICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdHJpZ2dlcilcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIHdhdGNoLCBvbkJlZm9yZVVubW91bnQsIFRyYW5zaXRpb24sIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHVzZUhpc3RvcnkgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS51c2UtaGlzdG9yeS91c2UtaGlzdG9yeS5qcydcbmltcG9ydCB1c2VUaW1lb3V0IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3VzZS10aW1lb3V0L3VzZS10aW1lb3V0LmpzJ1xuaW1wb3J0IHVzZVRpY2sgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvdXNlLXRpY2svdXNlLXRpY2suanMnXG5pbXBvcnQgdXNlTW9kZWxUb2dnbGUsIHsgdXNlTW9kZWxUb2dnbGVQcm9wcywgdXNlTW9kZWxUb2dnbGVFbWl0cyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLW1vZGVsLXRvZ2dsZS91c2UtbW9kZWwtdG9nZ2xlLmpzJ1xuaW1wb3J0IHVzZVRyYW5zaXRpb24sIHsgdXNlVHJhbnNpdGlvblByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS51c2UtdHJhbnNpdGlvbi91c2UtdHJhbnNpdGlvbi5qcydcbmltcG9ydCB1c2VQb3J0YWwgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS51c2UtcG9ydGFsL3VzZS1wb3J0YWwuanMnXG5pbXBvcnQgdXNlUHJldmVudFNjcm9sbCBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1wcmV2ZW50LXNjcm9sbC91c2UtcHJldmVudC1zY3JvbGwuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuY3JlYXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGNoaWxkSGFzRm9jdXMgfSBmcm9tICcuLi8uLi91dGlscy9kb20vZG9tLmpzJ1xuaW1wb3J0IHsgaFNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLnJlbmRlci9yZW5kZXIuanMnXG5pbXBvcnQgeyBhZGRFc2NhcGVLZXksIHJlbW92ZUVzY2FwZUtleSB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUua2V5Ym9hcmQvZXNjYXBlLWtleS5qcydcbmltcG9ydCB7IGFkZEZvY3Vzb3V0LCByZW1vdmVGb2N1c291dCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuZm9jdXMvZm9jdXNvdXQuanMnXG5pbXBvcnQgeyBhZGRGb2N1c0ZuIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5mb2N1cy9mb2N1cy1tYW5hZ2VyLmpzJ1xuXG5sZXQgbWF4aW1pemVkTW9kYWxzID0gMFxuXG5jb25zdCBwb3NpdGlvbkNsYXNzID0ge1xuICBzdGFuZGFyZDogJ2ZpeGVkLWZ1bGwgZmxleC1jZW50ZXInLFxuICB0b3A6ICdmaXhlZC10b3AganVzdGlmeS1jZW50ZXInLFxuICBib3R0b206ICdmaXhlZC1ib3R0b20ganVzdGlmeS1jZW50ZXInLFxuICByaWdodDogJ2ZpeGVkLXJpZ2h0IGl0ZW1zLWNlbnRlcicsXG4gIGxlZnQ6ICdmaXhlZC1sZWZ0IGl0ZW1zLWNlbnRlcidcbn1cblxuY29uc3QgZGVmYXVsdFRyYW5zaXRpb25zID0ge1xuICBzdGFuZGFyZDogWyAnc2NhbGUnLCAnc2NhbGUnIF0sXG4gIHRvcDogWyAnc2xpZGUtZG93bicsICdzbGlkZS11cCcgXSxcbiAgYm90dG9tOiBbICdzbGlkZS11cCcsICdzbGlkZS1kb3duJyBdLFxuICByaWdodDogWyAnc2xpZGUtbGVmdCcsICdzbGlkZS1yaWdodCcgXSxcbiAgbGVmdDogWyAnc2xpZGUtcmlnaHQnLCAnc2xpZGUtbGVmdCcgXVxufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUURpYWxvZycsXG5cbiAgaW5oZXJpdEF0dHJzOiBmYWxzZSxcblxuICBwcm9wczoge1xuICAgIC4uLnVzZU1vZGVsVG9nZ2xlUHJvcHMsXG4gICAgLi4udXNlVHJhbnNpdGlvblByb3BzLFxuXG4gICAgdHJhbnNpdGlvblNob3c6IFN0cmluZywgLy8gb3ZlcnJpZGUgdXNlVHJhbnNpdGlvblByb3BzXG4gICAgdHJhbnNpdGlvbkhpZGU6IFN0cmluZywgLy8gb3ZlcnJpZGUgdXNlVHJhbnNpdGlvblByb3BzXG5cbiAgICBwZXJzaXN0ZW50OiBCb29sZWFuLFxuICAgIGF1dG9DbG9zZTogQm9vbGVhbixcbiAgICBhbGxvd0ZvY3VzT3V0c2lkZTogQm9vbGVhbixcblxuICAgIG5vRXNjRGlzbWlzczogQm9vbGVhbixcbiAgICBub0JhY2tkcm9wRGlzbWlzczogQm9vbGVhbixcbiAgICBub1JvdXRlRGlzbWlzczogQm9vbGVhbixcbiAgICBub1JlZm9jdXM6IEJvb2xlYW4sXG4gICAgbm9Gb2N1czogQm9vbGVhbixcbiAgICBub1NoYWtlOiBCb29sZWFuLFxuXG4gICAgc2VhbWxlc3M6IEJvb2xlYW4sXG5cbiAgICBtYXhpbWl6ZWQ6IEJvb2xlYW4sXG4gICAgZnVsbFdpZHRoOiBCb29sZWFuLFxuICAgIGZ1bGxIZWlnaHQ6IEJvb2xlYW4sXG5cbiAgICBzcXVhcmU6IEJvb2xlYW4sXG5cbiAgICBiYWNrZHJvcEZpbHRlcjogU3RyaW5nLFxuXG4gICAgcG9zaXRpb246IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdzdGFuZGFyZCcsXG4gICAgICB2YWxpZGF0b3I6IHZhbCA9PiBbICdzdGFuZGFyZCcsICd0b3AnLCAnYm90dG9tJywgJ2xlZnQnLCAncmlnaHQnIF0uaW5jbHVkZXModmFsKVxuICAgIH1cbiAgfSxcblxuICBlbWl0czogW1xuICAgIC4uLnVzZU1vZGVsVG9nZ2xlRW1pdHMsXG4gICAgJ3NoYWtlJywgJ2NsaWNrJywgJ2VzY2FwZUtleSdcbiAgXSxcblxuICBzZXR1cCAocHJvcHMsIHsgc2xvdHMsIGVtaXQsIGF0dHJzIH0pIHtcbiAgICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG5cbiAgICBjb25zdCBpbm5lclJlZiA9IHJlZihudWxsKVxuICAgIGNvbnN0IHNob3dpbmcgPSByZWYoZmFsc2UpXG4gICAgY29uc3QgYW5pbWF0aW5nID0gcmVmKGZhbHNlKVxuXG4gICAgbGV0IHNoYWtlVGltZW91dCA9IG51bGwsIHJlZm9jdXNUYXJnZXQgPSBudWxsLCBpc01heGltaXplZCwgYXZvaWRBdXRvQ2xvc2VcblxuICAgIGNvbnN0IGhpZGVPblJvdXRlQ2hhbmdlID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIHByb3BzLnBlcnNpc3RlbnQgIT09IHRydWVcbiAgICAgICYmIHByb3BzLm5vUm91dGVEaXNtaXNzICE9PSB0cnVlXG4gICAgICAmJiBwcm9wcy5zZWFtbGVzcyAhPT0gdHJ1ZVxuICAgIClcblxuICAgIGNvbnN0IHsgcHJldmVudEJvZHlTY3JvbGwgfSA9IHVzZVByZXZlbnRTY3JvbGwoKVxuICAgIGNvbnN0IHsgcmVnaXN0ZXJUaW1lb3V0IH0gPSB1c2VUaW1lb3V0KClcbiAgICBjb25zdCB7IHJlZ2lzdGVyVGljaywgcmVtb3ZlVGljayB9ID0gdXNlVGljaygpXG5cbiAgICBjb25zdCB7IHRyYW5zaXRpb25Qcm9wcywgdHJhbnNpdGlvblN0eWxlIH0gPSB1c2VUcmFuc2l0aW9uKFxuICAgICAgcHJvcHMsXG4gICAgICAoKSA9PiBkZWZhdWx0VHJhbnNpdGlvbnNbIHByb3BzLnBvc2l0aW9uIF1bIDAgXSxcbiAgICAgICgpID0+IGRlZmF1bHRUcmFuc2l0aW9uc1sgcHJvcHMucG9zaXRpb24gXVsgMSBdXG4gICAgKVxuXG4gICAgY29uc3QgYmFja2Ryb3BTdHlsZSA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHRyYW5zaXRpb25TdHlsZS52YWx1ZVxuICAgICAgKyAoXG4gICAgICAgIHByb3BzLmJhY2tkcm9wRmlsdGVyICE9PSB2b2lkIDBcbiAgICAgICAgICAvLyBTYWZhcmkgcmVxdWlyZXMgdGhlIC13ZWJraXQgcHJlZml4XG4gICAgICAgICAgPyBgO2JhY2tkcm9wLWZpbHRlcjokeyBwcm9wcy5iYWNrZHJvcEZpbHRlciB9Oy13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOiR7IHByb3BzLmJhY2tkcm9wRmlsdGVyIH1gXG4gICAgICAgICAgOiAnJ1xuICAgICAgKVxuICAgICkpXG5cbiAgICBjb25zdCB7IHNob3dQb3J0YWwsIGhpZGVQb3J0YWwsIHBvcnRhbElzQWNjZXNzaWJsZSwgcmVuZGVyUG9ydGFsIH0gPSB1c2VQb3J0YWwoXG4gICAgICB2bSwgaW5uZXJSZWYsIHJlbmRlclBvcnRhbENvbnRlbnQsICdkaWFsb2cnXG4gICAgKVxuXG4gICAgY29uc3QgeyBoaWRlIH0gPSB1c2VNb2RlbFRvZ2dsZSh7XG4gICAgICBzaG93aW5nLFxuICAgICAgaGlkZU9uUm91dGVDaGFuZ2UsXG4gICAgICBoYW5kbGVTaG93LFxuICAgICAgaGFuZGxlSGlkZSxcbiAgICAgIHByb2Nlc3NPbk1vdW50OiB0cnVlXG4gICAgfSlcblxuICAgIGNvbnN0IHsgYWRkVG9IaXN0b3J5LCByZW1vdmVGcm9tSGlzdG9yeSB9ID0gdXNlSGlzdG9yeShzaG93aW5nLCBoaWRlLCBoaWRlT25Sb3V0ZUNoYW5nZSlcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3EtZGlhbG9nX19pbm5lciBmbGV4IG5vLXBvaW50ZXItZXZlbnRzJ1xuICAgICAgKyBgIHEtZGlhbG9nX19pbm5lci0tJHsgcHJvcHMubWF4aW1pemVkID09PSB0cnVlID8gJ21heGltaXplZCcgOiAnbWluaW1pemVkJyB9YFxuICAgICAgKyBgIHEtZGlhbG9nX19pbm5lci0tJHsgcHJvcHMucG9zaXRpb24gfSAkeyBwb3NpdGlvbkNsYXNzWyBwcm9wcy5wb3NpdGlvbiBdIH1gXG4gICAgICArIChhbmltYXRpbmcudmFsdWUgPT09IHRydWUgPyAnIHEtZGlhbG9nX19pbm5lci0tYW5pbWF0aW5nJyA6ICcnKVxuICAgICAgKyAocHJvcHMuZnVsbFdpZHRoID09PSB0cnVlID8gJyBxLWRpYWxvZ19faW5uZXItLWZ1bGx3aWR0aCcgOiAnJylcbiAgICAgICsgKHByb3BzLmZ1bGxIZWlnaHQgPT09IHRydWUgPyAnIHEtZGlhbG9nX19pbm5lci0tZnVsbGhlaWdodCcgOiAnJylcbiAgICAgICsgKHByb3BzLnNxdWFyZSA9PT0gdHJ1ZSA/ICcgcS1kaWFsb2dfX2lubmVyLS1zcXVhcmUnIDogJycpXG4gICAgKVxuXG4gICAgY29uc3QgdXNlQmFja2Ryb3AgPSBjb21wdXRlZCgoKSA9PiBzaG93aW5nLnZhbHVlID09PSB0cnVlICYmIHByb3BzLnNlYW1sZXNzICE9PSB0cnVlKVxuXG4gICAgY29uc3Qgb25FdmVudHMgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBwcm9wcy5hdXRvQ2xvc2UgPT09IHRydWVcbiAgICAgICAgPyB7IG9uQ2xpY2s6IG9uQXV0b0Nsb3NlIH1cbiAgICAgICAgOiB7fVxuICAgICkpXG5cbiAgICBjb25zdCByb290Q2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+IFtcbiAgICAgICdxLWRpYWxvZyBmdWxsc2NyZWVuIG5vLXBvaW50ZXItZXZlbnRzICdcbiAgICAgICAgKyBgcS1kaWFsb2ctLSR7IHVzZUJhY2tkcm9wLnZhbHVlID09PSB0cnVlID8gJ21vZGFsJyA6ICdzZWFtbGVzcycgfWAsXG4gICAgICBhdHRycy5jbGFzc1xuICAgIF0pXG5cbiAgICB3YXRjaCgoKSA9PiBwcm9wcy5tYXhpbWl6ZWQsIHN0YXRlID0+IHtcbiAgICAgIHNob3dpbmcudmFsdWUgPT09IHRydWUgJiYgdXBkYXRlTWF4aW1pemVkKHN0YXRlKVxuICAgIH0pXG5cbiAgICB3YXRjaCh1c2VCYWNrZHJvcCwgdmFsID0+IHtcbiAgICAgIHByZXZlbnRCb2R5U2Nyb2xsKHZhbClcblxuICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICBhZGRGb2N1c291dChvbkZvY3VzQ2hhbmdlKVxuICAgICAgICBhZGRFc2NhcGVLZXkob25Fc2NhcGVLZXkpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVtb3ZlRm9jdXNvdXQob25Gb2N1c0NoYW5nZSlcbiAgICAgICAgcmVtb3ZlRXNjYXBlS2V5KG9uRXNjYXBlS2V5KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBoYW5kbGVTaG93IChldnQpIHtcbiAgICAgIGFkZFRvSGlzdG9yeSgpXG5cbiAgICAgIHJlZm9jdXNUYXJnZXQgPSBwcm9wcy5ub1JlZm9jdXMgPT09IGZhbHNlICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IG51bGxcbiAgICAgICAgPyBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICAgIDogbnVsbFxuXG4gICAgICB1cGRhdGVNYXhpbWl6ZWQocHJvcHMubWF4aW1pemVkKVxuICAgICAgc2hvd1BvcnRhbCgpXG4gICAgICBhbmltYXRpbmcudmFsdWUgPSB0cnVlXG5cbiAgICAgIGlmIChwcm9wcy5ub0ZvY3VzICE9PSB0cnVlKSB7XG4gICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ/LmJsdXIoKVxuICAgICAgICByZWdpc3RlclRpY2soZm9jdXMpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVtb3ZlVGljaygpXG4gICAgICB9XG5cbiAgICAgIC8vIHNob3VsZCByZW1vdmVUaW1lb3V0KCkgaWYgdGhpcyBnZXRzIHJlbW92ZWRcbiAgICAgIHJlZ2lzdGVyVGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh2bS5wcm94eS4kcS5wbGF0Zm9ybS5pcy5pb3MgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAocHJvcHMuc2VhbWxlc3MgIT09IHRydWUgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgeyB0b3AsIGJvdHRvbSB9ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgeyBpbm5lckhlaWdodCB9ID0gd2luZG93LFxuICAgICAgICAgICAgICBoZWlnaHQgPSB3aW5kb3cudmlzdWFsVmlld3BvcnQgIT09IHZvaWQgMFxuICAgICAgICAgICAgICAgID8gd2luZG93LnZpc3VhbFZpZXdwb3J0LmhlaWdodFxuICAgICAgICAgICAgICAgIDogaW5uZXJIZWlnaHRcblxuICAgICAgICAgICAgaWYgKHRvcCA+IDAgJiYgYm90dG9tID4gaGVpZ2h0IC8gMikge1xuICAgICAgICAgICAgICBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50LnNjcm9sbFRvcCA9IE1hdGgubWluKFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGJvdHRvbSA+PSBpbm5lckhlaWdodFxuICAgICAgICAgICAgICAgICAgPyBJbmZpbml0eVxuICAgICAgICAgICAgICAgICAgOiBNYXRoLmNlaWwoZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3AgKyBib3R0b20gLSBoZWlnaHQgLyAyKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJlcXVpcmVkIGluIG9yZGVyIHRvIGF2b2lkIHRoZSBcImRvdWJsZS10YXAgbmVlZGVkXCIgaXNzdWVcbiAgICAgICAgICBhdm9pZEF1dG9DbG9zZSA9IHRydWVcbiAgICAgICAgICBpbm5lclJlZi52YWx1ZS5jbGljaygpXG4gICAgICAgICAgYXZvaWRBdXRvQ2xvc2UgPSBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgc2hvd1BvcnRhbCh0cnVlKSAvLyBkb25lIHNob3dpbmcgcG9ydGFsXG4gICAgICAgIGFuaW1hdGluZy52YWx1ZSA9IGZhbHNlXG4gICAgICAgIGVtaXQoJ3Nob3cnLCBldnQpXG4gICAgICB9LCBwcm9wcy50cmFuc2l0aW9uRHVyYXRpb24pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlSGlkZSAoZXZ0KSB7XG4gICAgICByZW1vdmVUaWNrKClcbiAgICAgIHJlbW92ZUZyb21IaXN0b3J5KClcbiAgICAgIGNsZWFudXAodHJ1ZSlcbiAgICAgIGFuaW1hdGluZy52YWx1ZSA9IHRydWVcbiAgICAgIGhpZGVQb3J0YWwoKVxuXG4gICAgICBpZiAocmVmb2N1c1RhcmdldCAhPT0gbnVsbCkge1xuICAgICAgICAoKGV2dD8udHlwZS5pbmRleE9mKCdrZXknKSA9PT0gMFxuICAgICAgICAgID8gcmVmb2N1c1RhcmdldC5jbG9zZXN0KCdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXhePVwiLVwiXSknKVxuICAgICAgICAgIDogdm9pZCAwXG4gICAgICAgICkgfHwgcmVmb2N1c1RhcmdldCkuZm9jdXMoKVxuXG4gICAgICAgIHJlZm9jdXNUYXJnZXQgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIC8vIHNob3VsZCByZW1vdmVUaW1lb3V0KCkgaWYgdGhpcyBnZXRzIHJlbW92ZWRcbiAgICAgIHJlZ2lzdGVyVGltZW91dCgoKSA9PiB7XG4gICAgICAgIGhpZGVQb3J0YWwodHJ1ZSkgLy8gZG9uZSBoaWRpbmcsIG5vdyBkZXN0cm95XG4gICAgICAgIGFuaW1hdGluZy52YWx1ZSA9IGZhbHNlXG4gICAgICAgIGVtaXQoJ2hpZGUnLCBldnQpXG4gICAgICB9LCBwcm9wcy50cmFuc2l0aW9uRHVyYXRpb24pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9jdXMgKHNlbGVjdG9yKSB7XG4gICAgICBhZGRGb2N1c0ZuKCgpID0+IHtcbiAgICAgICAgbGV0IG5vZGUgPSBpbm5lclJlZi52YWx1ZVxuXG4gICAgICAgIGlmIChub2RlID09PSBudWxsKSByZXR1cm5cblxuICAgICAgICBpZiAoc2VsZWN0b3IgIT09IHZvaWQgMCkge1xuICAgICAgICAgIGNvbnN0IHRhcmdldCA9IG5vZGUucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgICAgICAgICBpZiAodGFyZ2V0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0YXJnZXQuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobm9kZS5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIG5vZGUgPSAoXG4gICAgICAgICAgICBub2RlLnF1ZXJ5U2VsZWN0b3IoJ1thdXRvZm9jdXNdW3RhYmluZGV4XSwgW2RhdGEtYXV0b2ZvY3VzXVt0YWJpbmRleF0nKVxuICAgICAgICAgICAgfHwgbm9kZS5xdWVyeVNlbGVjdG9yKCdbYXV0b2ZvY3VzXSBbdGFiaW5kZXhdLCBbZGF0YS1hdXRvZm9jdXNdIFt0YWJpbmRleF0nKVxuICAgICAgICAgICAgfHwgbm9kZS5xdWVyeVNlbGVjdG9yKCdbYXV0b2ZvY3VzXSwgW2RhdGEtYXV0b2ZvY3VzXScpXG4gICAgICAgICAgICB8fCBub2RlXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgbm9kZS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaGFrZSAoZm9jdXNUYXJnZXQpIHtcbiAgICAgIGlmIChmb2N1c1RhcmdldCAmJiB0eXBlb2YgZm9jdXNUYXJnZXQuZm9jdXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZm9jdXNUYXJnZXQuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZm9jdXMoKVxuICAgICAgfVxuXG4gICAgICBlbWl0KCdzaGFrZScpXG5cbiAgICAgIGNvbnN0IG5vZGUgPSBpbm5lclJlZi52YWx1ZVxuXG4gICAgICBpZiAobm9kZSAhPT0gbnVsbCkge1xuICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ3EtYW5pbWF0ZS0tc2NhbGUnKVxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3EtYW5pbWF0ZS0tc2NhbGUnKVxuICAgICAgICBzaGFrZVRpbWVvdXQgIT09IG51bGwgJiYgY2xlYXJUaW1lb3V0KHNoYWtlVGltZW91dClcbiAgICAgICAgc2hha2VUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc2hha2VUaW1lb3V0ID0gbnVsbFxuICAgICAgICAgIGlmIChpbm5lclJlZi52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdxLWFuaW1hdGUtLXNjYWxlJylcbiAgICAgICAgICAgIC8vIHNvbWUgcGxhdGZvcm1zIChsaWtlIGRlc2t0b3AgQ2hyb21lKVxuICAgICAgICAgICAgLy8gcmVxdWlyZSBjYWxsaW5nIGZvY3VzKCkgYWdhaW5cbiAgICAgICAgICAgIGZvY3VzKClcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDE3MClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkVzY2FwZUtleSAoKSB7XG4gICAgICBpZiAocHJvcHMuc2VhbWxlc3MgIT09IHRydWUpIHtcbiAgICAgICAgaWYgKHByb3BzLnBlcnNpc3RlbnQgPT09IHRydWUgfHwgcHJvcHMubm9Fc2NEaXNtaXNzID09PSB0cnVlKSB7XG4gICAgICAgICAgcHJvcHMubWF4aW1pemVkICE9PSB0cnVlICYmIHByb3BzLm5vU2hha2UgIT09IHRydWUgJiYgc2hha2UoKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGVtaXQoJ2VzY2FwZUtleScpXG4gICAgICAgICAgaGlkZSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbnVwIChoaWRpbmcpIHtcbiAgICAgIGlmIChzaGFrZVRpbWVvdXQgIT09IG51bGwpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNoYWtlVGltZW91dClcbiAgICAgICAgc2hha2VUaW1lb3V0ID0gbnVsbFxuICAgICAgfVxuXG4gICAgICBpZiAoaGlkaW5nID09PSB0cnVlIHx8IHNob3dpbmcudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgdXBkYXRlTWF4aW1pemVkKGZhbHNlKVxuXG4gICAgICAgIGlmIChwcm9wcy5zZWFtbGVzcyAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHByZXZlbnRCb2R5U2Nyb2xsKGZhbHNlKVxuICAgICAgICAgIHJlbW92ZUZvY3Vzb3V0KG9uRm9jdXNDaGFuZ2UpXG4gICAgICAgICAgcmVtb3ZlRXNjYXBlS2V5KG9uRXNjYXBlS2V5KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChoaWRpbmcgIT09IHRydWUpIHtcbiAgICAgICAgcmVmb2N1c1RhcmdldCA9IG51bGxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVNYXhpbWl6ZWQgKGFjdGl2ZSkge1xuICAgICAgaWYgKGFjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBpZiAoaXNNYXhpbWl6ZWQgIT09IHRydWUpIHtcbiAgICAgICAgICBtYXhpbWl6ZWRNb2RhbHMgPCAxICYmIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgncS1ib2R5LS1kaWFsb2cnKVxuICAgICAgICAgIG1heGltaXplZE1vZGFscysrXG5cbiAgICAgICAgICBpc01heGltaXplZCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaXNNYXhpbWl6ZWQgPT09IHRydWUpIHtcbiAgICAgICAgaWYgKG1heGltaXplZE1vZGFscyA8IDIpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3EtYm9keS0tZGlhbG9nJylcbiAgICAgICAgfVxuXG4gICAgICAgIG1heGltaXplZE1vZGFscy0tXG4gICAgICAgIGlzTWF4aW1pemVkID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkF1dG9DbG9zZSAoZSkge1xuICAgICAgaWYgKGF2b2lkQXV0b0Nsb3NlICE9PSB0cnVlKSB7XG4gICAgICAgIGhpZGUoZSlcbiAgICAgICAgZW1pdCgnY2xpY2snLCBlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQmFja2Ryb3BDbGljayAoZSkge1xuICAgICAgaWYgKHByb3BzLnBlcnNpc3RlbnQgIT09IHRydWUgJiYgcHJvcHMubm9CYWNrZHJvcERpc21pc3MgIT09IHRydWUpIHtcbiAgICAgICAgaGlkZShlKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocHJvcHMubm9TaGFrZSAhPT0gdHJ1ZSkge1xuICAgICAgICBzaGFrZSgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Gb2N1c0NoYW5nZSAoZXZ0KSB7XG4gICAgICAvLyB0aGUgZm9jdXMgaXMgbm90IGluIGEgdnVlIGNoaWxkIGNvbXBvbmVudFxuICAgICAgaWYgKFxuICAgICAgICBwcm9wcy5hbGxvd0ZvY3VzT3V0c2lkZSAhPT0gdHJ1ZVxuICAgICAgICAmJiBwb3J0YWxJc0FjY2Vzc2libGUudmFsdWUgPT09IHRydWVcbiAgICAgICAgJiYgY2hpbGRIYXNGb2N1cyhpbm5lclJlZi52YWx1ZSwgZXZ0LnRhcmdldCkgIT09IHRydWVcbiAgICAgICkge1xuICAgICAgICBmb2N1cygnW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKHZtLnByb3h5LCB7XG4gICAgICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgICAgIGZvY3VzLCBzaGFrZSxcblxuICAgICAgLy8gcHJpdmF0ZSBidXQgbmVlZGVkIGJ5IFFTZWxlY3RcbiAgICAgIF9fdXBkYXRlUmVmb2N1c1RhcmdldCAodGFyZ2V0KSB7XG4gICAgICAgIHJlZm9jdXNUYXJnZXQgPSB0YXJnZXQgfHwgbnVsbFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBvbkJlZm9yZVVubW91bnQoY2xlYW51cClcblxuICAgIGZ1bmN0aW9uIHJlbmRlclBvcnRhbENvbnRlbnQgKCkge1xuICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgcm9sZTogJ2RpYWxvZycsXG4gICAgICAgICdhcmlhLW1vZGFsJzogdXNlQmFja2Ryb3AudmFsdWUgPT09IHRydWUgPyAndHJ1ZScgOiAnZmFsc2UnLFxuICAgICAgICAuLi5hdHRycyxcbiAgICAgICAgY2xhc3M6IHJvb3RDbGFzc2VzLnZhbHVlXG4gICAgICB9LCBbXG4gICAgICAgIGgoVHJhbnNpdGlvbiwge1xuICAgICAgICAgIG5hbWU6ICdxLXRyYW5zaXRpb24tLWZhZGUnLFxuICAgICAgICAgIGFwcGVhcjogdHJ1ZVxuICAgICAgICB9LCAoKSA9PiAoXG4gICAgICAgICAgdXNlQmFja2Ryb3AudmFsdWUgPT09IHRydWVcbiAgICAgICAgICAgID8gaCgnZGl2Jywge1xuICAgICAgICAgICAgICBjbGFzczogJ3EtZGlhbG9nX19iYWNrZHJvcCBmaXhlZC1mdWxsJyxcbiAgICAgICAgICAgICAgc3R5bGU6IGJhY2tkcm9wU3R5bGUudmFsdWUsXG4gICAgICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcbiAgICAgICAgICAgICAgdGFiaW5kZXg6IC0xLFxuICAgICAgICAgICAgICBvbkNsaWNrOiBvbkJhY2tkcm9wQ2xpY2tcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgKSksXG5cbiAgICAgICAgaChcbiAgICAgICAgICBUcmFuc2l0aW9uLFxuICAgICAgICAgIHRyYW5zaXRpb25Qcm9wcy52YWx1ZSxcbiAgICAgICAgICAoKSA9PiAoXG4gICAgICAgICAgICBzaG93aW5nLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgICAgID8gaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIHJlZjogaW5uZXJSZWYsXG4gICAgICAgICAgICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHRyYW5zaXRpb25TdHlsZS52YWx1ZSxcbiAgICAgICAgICAgICAgICB0YWJpbmRleDogLTEsXG4gICAgICAgICAgICAgICAgLi4ub25FdmVudHMudmFsdWVcbiAgICAgICAgICAgICAgfSwgaFNsb3Qoc2xvdHMuZGVmYXVsdCkpXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgXSlcbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyUG9ydGFsXG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IHVzZURhcmtQcm9wcyA9IHtcbiAgZGFyazoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogbnVsbFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcywgJHEpIHtcbiAgLy8gcmV0dXJuIGlzRGFya1xuICByZXR1cm4gY29tcHV0ZWQoKCkgPT4gKFxuICAgIHByb3BzLmRhcmsgPT09IG51bGxcbiAgICAgID8gJHEuZGFyay5pc0FjdGl2ZVxuICAgICAgOiBwcm9wcy5kYXJrXG4gICkpXG59XG4iLCJpbXBvcnQgeyBoLCBjb21wdXRlZCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlRGFyaywgeyB1c2VEYXJrUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1kYXJrL3VzZS1kYXJrLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNyZWF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBoU2xvdCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUucmVuZGVyL3JlbmRlci5qcydcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FDYXJkJyxcblxuICBwcm9wczoge1xuICAgIC4uLnVzZURhcmtQcm9wcyxcblxuICAgIHRhZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ2RpdidcbiAgICB9LFxuXG4gICAgc3F1YXJlOiBCb29sZWFuLFxuICAgIGZsYXQ6IEJvb2xlYW4sXG4gICAgYm9yZGVyZWQ6IEJvb2xlYW5cbiAgfSxcblxuICBzZXR1cCAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgIGNvbnN0IHsgcHJveHk6IHsgJHEgfSB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcbiAgICBjb25zdCBpc0RhcmsgPSB1c2VEYXJrKHByb3BzLCAkcSlcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3EtY2FyZCdcbiAgICAgICsgKGlzRGFyay52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1jYXJkLS1kYXJrIHEtZGFyaycgOiAnJylcbiAgICAgICsgKHByb3BzLmJvcmRlcmVkID09PSB0cnVlID8gJyBxLWNhcmQtLWJvcmRlcmVkJyA6ICcnKVxuICAgICAgKyAocHJvcHMuc3F1YXJlID09PSB0cnVlID8gJyBxLWNhcmQtLXNxdWFyZSBuby1ib3JkZXItcmFkaXVzJyA6ICcnKVxuICAgICAgKyAocHJvcHMuZmxhdCA9PT0gdHJ1ZSA/ICcgcS1jYXJkLS1mbGF0IG5vLXNoYWRvdycgOiAnJylcbiAgICApXG5cbiAgICByZXR1cm4gKCkgPT4gaChwcm9wcy50YWcsIHsgY2xhc3M6IGNsYXNzZXMudmFsdWUgfSwgaFNsb3Qoc2xvdHMuZGVmYXVsdCkpXG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBoLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5jcmVhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgaFNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLnJlbmRlci9yZW5kZXIuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdRQ2FyZFNlY3Rpb24nLFxuXG4gIHByb3BzOiB7XG4gICAgdGFnOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnZGl2J1xuICAgIH0sXG5cbiAgICBob3Jpem9udGFsOiBCb29sZWFuXG4gIH0sXG5cbiAgc2V0dXAgKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICdxLWNhcmRfX3NlY3Rpb24nXG4gICAgICArIGAgcS1jYXJkX19zZWN0aW9uLS0keyBwcm9wcy5ob3Jpem9udGFsID09PSB0cnVlID8gJ2hvcml6IHJvdyBuby13cmFwJyA6ICd2ZXJ0JyB9YFxuICAgIClcblxuICAgIHJldHVybiAoKSA9PiBoKHByb3BzLnRhZywgeyBjbGFzczogY2xhc3Nlcy52YWx1ZSB9LCBoU2xvdChzbG90cy5kZWZhdWx0KSlcbiAgfVxufSlcbiIsImltcG9ydCB7IGgsIGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlQWxpZ24sIHsgdXNlQWxpZ25Qcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWFsaWduL3VzZS1hbGlnbi5qcydcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5jcmVhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgaFNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLnJlbmRlci9yZW5kZXIuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdRQ2FyZEFjdGlvbnMnLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlQWxpZ25Qcm9wcyxcbiAgICB2ZXJ0aWNhbDogQm9vbGVhblxuICB9LFxuXG4gIHNldHVwIChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgYWxpZ25DbGFzcyA9IHVzZUFsaWduKHByb3BzKVxuXG4gICAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgICBgcS1jYXJkX19hY3Rpb25zICR7IGFsaWduQ2xhc3MudmFsdWUgfWBcbiAgICAgICsgYCBxLWNhcmRfX2FjdGlvbnMtLSR7IHByb3BzLnZlcnRpY2FsID09PSB0cnVlID8gJ3ZlcnQgY29sdW1uJyA6ICdob3JpeiByb3cnIH1gXG4gICAgKVxuXG4gICAgcmV0dXJuICgpID0+IGgoJ2RpdicsIHsgY2xhc3M6IGNsYXNzZXMudmFsdWUgfSwgaFNsb3Qoc2xvdHMuZGVmYXVsdCkpXG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBoLCBjb21wdXRlZCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlRGFyaywgeyB1c2VEYXJrUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1kYXJrL3VzZS1kYXJrLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNyZWF0ZS9jcmVhdGUuanMnXG5cbmNvbnN0IGluc2V0TWFwID0ge1xuICB0cnVlOiAnaW5zZXQnLFxuICBpdGVtOiAnaXRlbS1pbnNldCcsXG4gICdpdGVtLXRodW1ibmFpbCc6ICdpdGVtLXRodW1ibmFpbC1pbnNldCdcbn1cblxuZXhwb3J0IGNvbnN0IG1hcmdpbnMgPSB7XG4gIHhzOiAyLFxuICBzbTogNCxcbiAgbWQ6IDgsXG4gIGxnOiAxNixcbiAgeGw6IDI0XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdRU2VwYXJhdG9yJyxcblxuICBwcm9wczoge1xuICAgIC4uLnVzZURhcmtQcm9wcyxcblxuICAgIHNwYWNlZDogWyBCb29sZWFuLCBTdHJpbmcgXSxcbiAgICBpbnNldDogWyBCb29sZWFuLCBTdHJpbmcgXSxcbiAgICB2ZXJ0aWNhbDogQm9vbGVhbixcbiAgICBjb2xvcjogU3RyaW5nLFxuICAgIHNpemU6IFN0cmluZ1xuICB9LFxuXG4gIHNldHVwIChwcm9wcykge1xuICAgIGNvbnN0IHZtID0gZ2V0Q3VycmVudEluc3RhbmNlKClcbiAgICBjb25zdCBpc0RhcmsgPSB1c2VEYXJrKHByb3BzLCB2bS5wcm94eS4kcSlcblxuICAgIGNvbnN0IG9yaWVudGF0aW9uID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgcHJvcHMudmVydGljYWwgPT09IHRydWVcbiAgICAgICAgPyAndmVydGljYWwnXG4gICAgICAgIDogJ2hvcml6b250YWwnXG4gICAgKSlcblxuICAgIGNvbnN0IG9yaWVudENsYXNzID0gY29tcHV0ZWQoKCkgPT4gYCBxLXNlcGFyYXRvci0tJHsgb3JpZW50YXRpb24udmFsdWUgfWApXG5cbiAgICBjb25zdCBpbnNldENsYXNzID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgcHJvcHMuaW5zZXQgIT09IGZhbHNlXG4gICAgICAgID8gYCR7IG9yaWVudENsYXNzLnZhbHVlIH0tJHsgaW5zZXRNYXBbIHByb3BzLmluc2V0IF0gfWBcbiAgICAgICAgOiAnJ1xuICAgICkpXG5cbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIGBxLXNlcGFyYXRvciR7IG9yaWVudENsYXNzLnZhbHVlIH0keyBpbnNldENsYXNzLnZhbHVlIH1gXG4gICAgICArIChwcm9wcy5jb2xvciAhPT0gdm9pZCAwID8gYCBiZy0keyBwcm9wcy5jb2xvciB9YCA6ICcnKVxuICAgICAgKyAoaXNEYXJrLnZhbHVlID09PSB0cnVlID8gJyBxLXNlcGFyYXRvci0tZGFyaycgOiAnJylcbiAgICApXG5cbiAgICBjb25zdCBzdHlsZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGNvbnN0IGFjYyA9IHt9XG5cbiAgICAgIGlmIChwcm9wcy5zaXplICE9PSB2b2lkIDApIHtcbiAgICAgICAgYWNjWyBwcm9wcy52ZXJ0aWNhbCA9PT0gdHJ1ZSA/ICd3aWR0aCcgOiAnaGVpZ2h0JyBdID0gcHJvcHMuc2l6ZVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHMuc3BhY2VkICE9PSBmYWxzZSkge1xuICAgICAgICBjb25zdCBzaXplID0gcHJvcHMuc3BhY2VkID09PSB0cnVlXG4gICAgICAgICAgPyBgJHsgbWFyZ2lucy5tZCB9cHhgXG4gICAgICAgICAgOiBwcm9wcy5zcGFjZWQgaW4gbWFyZ2lucyA/IGAkeyBtYXJnaW5zWyBwcm9wcy5zcGFjZWQgXSB9cHhgIDogcHJvcHMuc3BhY2VkXG5cbiAgICAgICAgY29uc3QgZGlyID0gcHJvcHMudmVydGljYWwgPT09IHRydWVcbiAgICAgICAgICA/IFsgJ0xlZnQnLCAnUmlnaHQnIF1cbiAgICAgICAgICA6IFsgJ1RvcCcsICdCb3R0b20nIF1cblxuICAgICAgICBhY2NbIGBtYXJnaW4keyBkaXJbIDAgXSB9YCBdID0gYWNjWyBgbWFyZ2luJHsgZGlyWyAxIF0gfWAgXSA9IHNpemVcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFjY1xuICAgIH0pXG5cbiAgICByZXR1cm4gKCkgPT4gaCgnaHInLCB7XG4gICAgICBjbGFzczogY2xhc3Nlcy52YWx1ZSxcbiAgICAgIHN0eWxlOiBzdHlsZS52YWx1ZSxcbiAgICAgICdhcmlhLW9yaWVudGF0aW9uJzogb3JpZW50YXRpb24udmFsdWVcbiAgICB9KVxuICB9XG59KVxuIiwiLyoqXG4gKiBCYXNlZCBvbiB0aGUgd29yayBvZiBodHRwczovL2dpdGh1Yi5jb20vamNob29rL3V1aWQtcmFuZG9tXG4gKi9cblxubGV0XG4gIGJ1ZixcbiAgYnVmSWR4ID0gMFxuY29uc3QgaGV4Qnl0ZXMgPSBuZXcgQXJyYXkoMjU2KVxuXG4vLyBQcmUtY2FsY3VsYXRlIHRvU3RyaW5nKDE2KSBmb3Igc3BlZWRcbmZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgaGV4Qnl0ZXNbIGkgXSA9IChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSlcbn1cblxuLy8gVXNlIGJlc3QgYXZhaWxhYmxlIFBSTkdcbmNvbnN0IHJhbmRvbUJ5dGVzID0gKCgpID0+IHtcbiAgLy8gTm9kZSAmIEJyb3dzZXIgc3VwcG9ydFxuICBjb25zdCBsaWIgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJ1xuICAgID8gY3J5cHRvXG4gICAgOiAoXG4gICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgPyB3aW5kb3cuY3J5cHRvIHx8IHdpbmRvdy5tc0NyeXB0b1xuICAgICAgICAgIDogdm9pZCAwXG4gICAgICApXG5cbiAgaWYgKGxpYiAhPT0gdm9pZCAwKSB7XG4gICAgaWYgKGxpYi5yYW5kb21CeXRlcyAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gbGliLnJhbmRvbUJ5dGVzXG4gICAgfVxuICAgIGlmIChsaWIuZ2V0UmFuZG9tVmFsdWVzICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBuID0+IHtcbiAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShuKVxuICAgICAgICBsaWIuZ2V0UmFuZG9tVmFsdWVzKGJ5dGVzKVxuICAgICAgICByZXR1cm4gYnl0ZXNcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbiA9PiB7XG4gICAgY29uc3QgciA9IFtdXG4gICAgZm9yIChsZXQgaSA9IG47IGkgPiAwOyBpLS0pIHtcbiAgICAgIHIucHVzaChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpKVxuICAgIH1cbiAgICByZXR1cm4gclxuICB9XG59KSgpXG5cbi8vIEJ1ZmZlciByYW5kb20gbnVtYmVycyBmb3Igc3BlZWRcbi8vIFJlZHVjZSBtZW1vcnkgdXNhZ2UgYnkgZGVjcmVhc2luZyB0aGlzIG51bWJlciAobWluIDE2KVxuLy8gb3IgaW1wcm92ZSBzcGVlZCBieSBpbmNyZWFzaW5nIHRoaXMgbnVtYmVyICh0cnkgMTYzODQpXG5jb25zdCBCVUZGRVJfU0laRSA9IDQwOTZcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCkge1xuICAvLyBCdWZmZXIgc29tZSByYW5kb20gYnl0ZXMgZm9yIHNwZWVkXG4gIGlmIChidWYgPT09IHZvaWQgMCB8fCAoYnVmSWR4ICsgMTYgPiBCVUZGRVJfU0laRSkpIHtcbiAgICBidWZJZHggPSAwXG4gICAgYnVmID0gcmFuZG9tQnl0ZXMoQlVGRkVSX1NJWkUpXG4gIH1cblxuICBjb25zdCBiID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYnVmLCBidWZJZHgsIChidWZJZHggKz0gMTYpKVxuICBiWyA2IF0gPSAoYlsgNiBdICYgMHgwZikgfCAweDQwXG4gIGJbIDggXSA9IChiWyA4IF0gJiAweDNmKSB8IDB4ODBcblxuICByZXR1cm4gaGV4Qnl0ZXNbIGJbIDAgXSBdICsgaGV4Qnl0ZXNbIGJbIDEgXSBdXG4gICAgKyBoZXhCeXRlc1sgYlsgMiBdIF0gKyBoZXhCeXRlc1sgYlsgMyBdIF0gKyAnLSdcbiAgICArIGhleEJ5dGVzWyBiWyA0IF0gXSArIGhleEJ5dGVzWyBiWyA1IF0gXSArICctJ1xuICAgICsgaGV4Qnl0ZXNbIGJbIDYgXSBdICsgaGV4Qnl0ZXNbIGJbIDcgXSBdICsgJy0nXG4gICAgKyBoZXhCeXRlc1sgYlsgOCBdIF0gKyBoZXhCeXRlc1sgYlsgOSBdIF0gKyAnLSdcbiAgICArIGhleEJ5dGVzWyBiWyAxMCBdIF0gKyBoZXhCeXRlc1sgYlsgMTEgXSBdXG4gICAgKyBoZXhCeXRlc1sgYlsgMTIgXSBdICsgaGV4Qnl0ZXNbIGJbIDEzIF0gXVxuICAgICsgaGV4Qnl0ZXNbIGJbIDE0IF0gXSArIGhleEJ5dGVzWyBiWyAxNSBdIF1cbn1cbiIsImltcG9ydCB7IHJlZiwgY29tcHV0ZWQsIHdhdGNoLCBvbk1vdW50ZWQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1aWQgZnJvbSAnLi4vLi4vdXRpbHMvdWlkL3VpZC5qcydcblxuaW1wb3J0IHsgaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uIH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9wbGF0Zm9ybS9QbGF0Zm9ybS5qcydcblxuZnVuY3Rpb24gcGFyc2VWYWx1ZSAodmFsKSB7XG4gIHJldHVybiB2YWwgPT09IHZvaWQgMCB8fCB2YWwgPT09IG51bGxcbiAgICA/IG51bGxcbiAgICA6IHZhbFxufVxuXG5mdW5jdGlvbiBnZXRJZCAodmFsLCByZXF1aXJlZCkge1xuICByZXR1cm4gdmFsID09PSB2b2lkIDAgfHwgdmFsID09PSBudWxsXG4gICAgPyAocmVxdWlyZWQgPT09IHRydWUgPyBgZl8keyB1aWQoKSB9YCA6IG51bGwpXG4gICAgOiB2YWxcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIFwiaWRcIiB3aGljaCBpcyBhIHJlZigpIHRoYXQgY2FuIGJlIHVzZWQgYXNcbiAqIGEgdW5pcXVlIGlkZW50aWZpZXIgdG8gYXBwbHkgdG8gYSBET00gbm9kZSBhdHRyaWJ1dGUuXG4gKlxuICogT24gU1NSLCBpdCB0YWtlcyBjYXJlIG9mIGdlbmVyYXRpbmcgdGhlIGlkIG9uIHRoZSBjbGllbnQgc2lkZSAob25seSkgdG9cbiAqIGF2b2lkIGh5ZHJhdGlvbiBlcnJvcnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh7IGdldFZhbHVlLCByZXF1aXJlZCA9IHRydWUgfSA9IHt9KSB7XG4gIGlmIChpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24udmFsdWUgPT09IHRydWUpIHtcbiAgICBjb25zdCBpZCA9IGdldFZhbHVlICE9PSB2b2lkIDBcbiAgICAgID8gcmVmKHBhcnNlVmFsdWUoZ2V0VmFsdWUoKSkpXG4gICAgICA6IHJlZihudWxsKVxuXG4gICAgaWYgKHJlcXVpcmVkID09PSB0cnVlICYmIGlkLnZhbHVlID09PSBudWxsKSB7XG4gICAgICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgICAgICBpZC52YWx1ZSA9IGBmXyR7IHVpZCgpIH1gIC8vIGdldElkKG51bGwsIHRydWUpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChnZXRWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICB3YXRjaChnZXRWYWx1ZSwgbmV3SWQgPT4ge1xuICAgICAgICBpZC52YWx1ZSA9IGdldElkKG5ld0lkLCByZXF1aXJlZClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICByZXR1cm4gZ2V0VmFsdWUgIT09IHZvaWQgMFxuICAgID8gY29tcHV0ZWQoKCkgPT4gZ2V0SWQoZ2V0VmFsdWUoKSwgcmVxdWlyZWQpKVxuICAgIDogcmVmKGBmXyR7IHVpZCgpIH1gKSAvLyBnZXRJZChudWxsLCB0cnVlKVxufVxuIiwiaW1wb3J0IHsgcmVmLCBvbkJlZm9yZVVwZGF0ZSwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5jb25zdCBsaXN0ZW5lclJFID0gL15vbltBLVpdL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHsgYXR0cnMsIHZub2RlIH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuXG4gIGNvbnN0IGFjYyA9IHtcbiAgICBsaXN0ZW5lcnM6IHJlZih7fSksXG4gICAgYXR0cmlidXRlczogcmVmKHt9KVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlICgpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0ge31cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB7fVxuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgIGlmIChrZXkgIT09ICdjbGFzcycgJiYga2V5ICE9PSAnc3R5bGUnICYmIGxpc3RlbmVyUkUudGVzdChrZXkpID09PSBmYWxzZSkge1xuICAgICAgICBhdHRyaWJ1dGVzWyBrZXkgXSA9IGF0dHJzWyBrZXkgXVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3Qga2V5IGluIHZub2RlLnByb3BzKSB7XG4gICAgICBpZiAobGlzdGVuZXJSRS50ZXN0KGtleSkgPT09IHRydWUpIHtcbiAgICAgICAgbGlzdGVuZXJzWyBrZXkgXSA9IHZub2RlLnByb3BzWyBrZXkgXVxuICAgICAgfVxuICAgIH1cblxuICAgIGFjYy5hdHRyaWJ1dGVzLnZhbHVlID0gYXR0cmlidXRlc1xuICAgIGFjYy5saXN0ZW5lcnMudmFsdWUgPSBsaXN0ZW5lcnNcbiAgfVxuXG4gIG9uQmVmb3JlVXBkYXRlKHVwZGF0ZSlcblxuICB1cGRhdGUoKVxuXG4gIHJldHVybiBhY2Ncbn1cbiIsImltcG9ydCB7IGluamVjdCwgd2F0Y2gsIGdldEN1cnJlbnRJbnN0YW5jZSwgb25Nb3VudGVkLCBvbkJlZm9yZVVubW91bnQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB7IGZvcm1LZXkgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLnN5bWJvbHMvc3ltYm9scy5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHsgdmFsaWRhdGUsIHJlc2V0VmFsaWRhdGlvbiwgcmVxdWlyZXNRRm9ybSB9KSB7XG4gIGNvbnN0ICRmb3JtID0gaW5qZWN0KGZvcm1LZXksIGZhbHNlKVxuXG4gIGlmICgkZm9ybSAhPT0gZmFsc2UpIHtcbiAgICBjb25zdCB7IHByb3BzLCBwcm94eSB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcblxuICAgIC8vIGV4cG9ydCBwdWJsaWMgbWV0aG9kIChzbyBpdCBjYW4gYmUgdXNlZCBpbiBRRm9ybSlcbiAgICBPYmplY3QuYXNzaWduKHByb3h5LCB7IHZhbGlkYXRlLCByZXNldFZhbGlkYXRpb24gfSlcblxuICAgIHdhdGNoKCgpID0+IHByb3BzLmRpc2FibGUsIHZhbCA9PiB7XG4gICAgICBpZiAodmFsID09PSB0cnVlKSB7XG4gICAgICAgIHR5cGVvZiByZXNldFZhbGlkYXRpb24gPT09ICdmdW5jdGlvbicgJiYgcmVzZXRWYWxpZGF0aW9uKClcbiAgICAgICAgJGZvcm0udW5iaW5kQ29tcG9uZW50KHByb3h5KVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICRmb3JtLmJpbmRDb21wb25lbnQocHJveHkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICAvLyByZWdpc3RlciB0byBwYXJlbnQgUUZvcm1cbiAgICAgIHByb3BzLmRpc2FibGUgIT09IHRydWUgJiYgJGZvcm0uYmluZENvbXBvbmVudChwcm94eSlcbiAgICB9KVxuXG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICAgIC8vIHVuLXJlZ2lzdGVyIGZyb20gcGFyZW50IFFGb3JtXG4gICAgICBwcm9wcy5kaXNhYmxlICE9PSB0cnVlICYmICRmb3JtLnVuYmluZENvbXBvbmVudChwcm94eSlcbiAgICB9KVxuICB9XG4gIGVsc2UgaWYgKHJlcXVpcmVzUUZvcm0gPT09IHRydWUpIHtcbiAgICBjb25zb2xlLmVycm9yKCdQYXJlbnQgUUZvcm0gbm90IGZvdW5kIG9uIHVzZUZvcm1DaGlsZCgpIScpXG4gIH1cbn1cbiIsIi8vIGZpbGUgcmVmZXJlbmNlZCBmcm9tIGRvY3NcblxuY29uc3RcbiAgaGV4ID0gL14jWzAtOWEtZkEtRl17M30oWzAtOWEtZkEtRl17M30pPyQvLFxuICBoZXhhID0gL14jWzAtOWEtZkEtRl17NH0oWzAtOWEtZkEtRl17NH0pPyQvLFxuICBoZXhPckhleGEgPSAvXiMoWzAtOWEtZkEtRl17M318WzAtOWEtZkEtRl17NH18WzAtOWEtZkEtRl17Nn18WzAtOWEtZkEtRl17OH0pJC8sXG4gIHJnYiA9IC9ecmdiXFwoKCgwfFsxLTldW1xcZF0/fDFbXFxkXXswLDJ9fDJbXFxkXT98MlswLTRdW1xcZF18MjVbMC01XSksKXsyfSgwfFsxLTldW1xcZF0/fDFbXFxkXXswLDJ9fDJbXFxkXT98MlswLTRdW1xcZF18MjVbMC01XSlcXCkkLyxcbiAgcmdiYSA9IC9ecmdiYVxcKCgoMHxbMS05XVtcXGRdP3wxW1xcZF17MCwyfXwyW1xcZF0/fDJbMC00XVtcXGRdfDI1WzAtNV0pLCl7Mn0oMHxbMS05XVtcXGRdP3wxW1xcZF17MCwyfXwyW1xcZF0/fDJbMC00XVtcXGRdfDI1WzAtNV0pLCgwfDBcXC5bMC05XStbMS05XXwwXFwuWzEtOV0rfDEpXFwpJC9cblxuLy8gS2VlcCBpbiBzeW5jIHdpdGggdWkvdHlwZXMvYXBpL3ZhbGlkYXRpb24uZC50c1xuZXhwb3J0IGNvbnN0IHRlc3RQYXR0ZXJuID0ge1xuICBkYXRlOiB2ID0+IC9eLT9bXFxkXStcXC9bMC0xXVxcZFxcL1swLTNdXFxkJC8udGVzdCh2KSxcbiAgdGltZTogdiA9PiAvXihbMC0xXT9cXGR8MlswLTNdKTpbMC01XVxcZCQvLnRlc3QodiksXG4gIGZ1bGx0aW1lOiB2ID0+IC9eKFswLTFdP1xcZHwyWzAtM10pOlswLTVdXFxkOlswLTVdXFxkJC8udGVzdCh2KSxcbiAgdGltZU9yRnVsbHRpbWU6IHYgPT4gL14oWzAtMV0/XFxkfDJbMC0zXSk6WzAtNV1cXGQoOlswLTVdXFxkKT8kLy50ZXN0KHYpLFxuXG4gIC8vIC0tIFJGQyA1MzIyIC0tXG4gIC8vIC0tIEFkZGVkIGluIHYyLjYuNiAtLVxuICAvLyBUaGlzIGlzIGEgYmFzaWMgaGVscGVyIHZhbGlkYXRpb24uXG4gIC8vIEZvciBzb21ldGhpbmcgbW9yZSBjb21wbGV4IChsaWtlIFJGQyA4MjIpIHlvdSBzaG91bGQgd3JpdGUgYW5kIHVzZSB5b3VyIG93biBydWxlLlxuICAvLyBXZSB3b24ndCBiZSBhY2NlcHRpbmcgUFJzIHRvIGVuaGFuY2UgdGhlIG9uZSBiZWxvdyBiZWNhdXNlIG9mIHRoZSByZWFzb24gYWJvdmUuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBlbWFpbDogdiA9PiAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLy50ZXN0KHYpLFxuXG4gIGhleENvbG9yOiB2ID0+IGhleC50ZXN0KHYpLFxuICBoZXhhQ29sb3I6IHYgPT4gaGV4YS50ZXN0KHYpLFxuICBoZXhPckhleGFDb2xvcjogdiA9PiBoZXhPckhleGEudGVzdCh2KSxcblxuICByZ2JDb2xvcjogdiA9PiByZ2IudGVzdCh2KSxcbiAgcmdiYUNvbG9yOiB2ID0+IHJnYmEudGVzdCh2KSxcbiAgcmdiT3JSZ2JhQ29sb3I6IHYgPT4gcmdiLnRlc3QodikgfHwgcmdiYS50ZXN0KHYpLFxuXG4gIGhleE9yUmdiQ29sb3I6IHYgPT4gaGV4LnRlc3QodikgfHwgcmdiLnRlc3QodiksXG4gIGhleGFPclJnYmFDb2xvcjogdiA9PiBoZXhhLnRlc3QodikgfHwgcmdiYS50ZXN0KHYpLFxuICBhbnlDb2xvcjogdiA9PiBoZXhPckhleGEudGVzdCh2KSB8fCByZ2IudGVzdCh2KSB8fCByZ2JhLnRlc3Qodilcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICB0ZXN0UGF0dGVyblxufVxuIiwiaW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgd2F0Y2gsIG9uQmVmb3JlVW5tb3VudCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlRm9ybUNoaWxkIGZyb20gJy4uL3VzZS1mb3JtL3VzZS1mb3JtLWNoaWxkLmpzJ1xuaW1wb3J0IHsgdGVzdFBhdHRlcm4gfSBmcm9tICcuLi8uLi91dGlscy9wYXR0ZXJucy9wYXR0ZXJucy5qcydcbmltcG9ydCBkZWJvdW5jZSBmcm9tICcuLi8uLi91dGlscy9kZWJvdW5jZS9kZWJvdW5jZS5qcydcbmltcG9ydCB7IGluamVjdFByb3AgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmluamVjdC1vYmotcHJvcC9pbmplY3Qtb2JqLXByb3AuanMnXG5cbmNvbnN0IGxhenlSdWxlc1ZhbHVlcyA9IFsgdHJ1ZSwgZmFsc2UsICdvbmRlbWFuZCcgXVxuXG5leHBvcnQgY29uc3QgdXNlVmFsaWRhdGVQcm9wcyA9IHtcbiAgbW9kZWxWYWx1ZToge30sXG5cbiAgZXJyb3I6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IG51bGxcbiAgfSxcbiAgZXJyb3JNZXNzYWdlOiBTdHJpbmcsXG4gIG5vRXJyb3JJY29uOiBCb29sZWFuLFxuXG4gIHJ1bGVzOiBBcnJheSxcbiAgcmVhY3RpdmVSdWxlczogQm9vbGVhbixcbiAgbGF6eVJ1bGVzOiB7XG4gICAgdHlwZTogWyBCb29sZWFuLCBTdHJpbmcgXSxcbiAgICBkZWZhdWx0OiBmYWxzZSwgLy8gc3RhdGVtZW50IHVubmVlZGVkIGJ1dCBhdm9pZHMgZnV0dXJlIHZ1ZSBpbXBsZW1lbnRhdGlvbiBjaGFuZ2VzXG4gICAgdmFsaWRhdG9yOiB2ID0+IGxhenlSdWxlc1ZhbHVlcy5pbmNsdWRlcyh2KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChmb2N1c2VkLCBpbm5lckxvYWRpbmcpIHtcbiAgY29uc3QgeyBwcm9wcywgcHJveHkgfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG5cbiAgY29uc3QgaW5uZXJFcnJvciA9IHJlZihmYWxzZSlcbiAgY29uc3QgaW5uZXJFcnJvck1lc3NhZ2UgPSByZWYobnVsbClcbiAgY29uc3QgaXNEaXJ0eU1vZGVsID0gcmVmKGZhbHNlKVxuXG4gIHVzZUZvcm1DaGlsZCh7IHZhbGlkYXRlLCByZXNldFZhbGlkYXRpb24gfSlcblxuICBsZXQgdmFsaWRhdGVJbmRleCA9IDAsIHVud2F0Y2hSdWxlc1xuXG4gIGNvbnN0IGhhc1J1bGVzID0gY29tcHV0ZWQoKCkgPT5cbiAgICBwcm9wcy5ydWxlcyAhPT0gdm9pZCAwXG4gICAgJiYgcHJvcHMucnVsZXMgIT09IG51bGxcbiAgICAmJiBwcm9wcy5ydWxlcy5sZW5ndGggIT09IDBcbiAgKVxuXG4gIGNvbnN0IGNhbkRlYm91bmNlVmFsaWRhdGUgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgcHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZVxuICAgICYmIGhhc1J1bGVzLnZhbHVlID09PSB0cnVlXG4gICAgLy8gU2hvdWxkIG5vdCBoYXZlIGEgdmFsaWRhdGlvbiBpbiBwcm9ncmVzcyBhbHJlYWR5O1xuICAgIC8vIEl0IG1pZ2h0IG1lYW4gdGhhdCBmb2N1cyBzd2l0Y2hlZCB0byBzdWJtaXQgYnRuIGFuZFxuICAgIC8vIFFGb3JtJ3Mgc3VibWl0KCkgaGFzIGJlZW4gY2FsbGVkIGFscmVhZHkgKEVOVEVSIGtleSlcbiAgICAmJiBpbm5lckxvYWRpbmcudmFsdWUgPT09IGZhbHNlXG4gICkpXG5cbiAgY29uc3QgaGFzRXJyb3IgPSBjb21wdXRlZCgoKSA9PlxuICAgIHByb3BzLmVycm9yID09PSB0cnVlIHx8IGlubmVyRXJyb3IudmFsdWUgPT09IHRydWVcbiAgKVxuXG4gIGNvbnN0IGVycm9yTWVzc2FnZSA9IGNvbXB1dGVkKCgpID0+IChcbiAgICB0eXBlb2YgcHJvcHMuZXJyb3JNZXNzYWdlID09PSAnc3RyaW5nJyAmJiBwcm9wcy5lcnJvck1lc3NhZ2UubGVuZ3RoICE9PSAwXG4gICAgICA/IHByb3BzLmVycm9yTWVzc2FnZVxuICAgICAgOiBpbm5lckVycm9yTWVzc2FnZS52YWx1ZVxuICApKVxuXG4gIHdhdGNoKCgpID0+IHByb3BzLm1vZGVsVmFsdWUsICgpID0+IHtcbiAgICBpc0RpcnR5TW9kZWwudmFsdWUgPSB0cnVlXG5cbiAgICBpZiAoXG4gICAgICBjYW5EZWJvdW5jZVZhbGlkYXRlLnZhbHVlID09PSB0cnVlXG4gICAgICAvLyB0cmlnZ2VyIHZhbGlkYXRpb24gaWYgbm90IHVzaW5nIGFueSBraW5kIG9mIGxhenktcnVsZXNcbiAgICAgICYmIHByb3BzLmxhenlSdWxlcyA9PT0gZmFsc2VcbiAgICApIHtcbiAgICAgIGRlYm91bmNlZFZhbGlkYXRlKClcbiAgICB9XG4gIH0pXG5cbiAgZnVuY3Rpb24gb25SdWxlc0NoYW5nZSAoKSB7XG4gICAgaWYgKFxuICAgICAgcHJvcHMubGF6eVJ1bGVzICE9PSAnb25kZW1hbmQnXG4gICAgICAmJiBjYW5EZWJvdW5jZVZhbGlkYXRlLnZhbHVlID09PSB0cnVlXG4gICAgICAmJiBpc0RpcnR5TW9kZWwudmFsdWUgPT09IHRydWVcbiAgICApIHtcbiAgICAgIGRlYm91bmNlZFZhbGlkYXRlKClcbiAgICB9XG4gIH1cblxuICB3YXRjaCgoKSA9PiBwcm9wcy5yZWFjdGl2ZVJ1bGVzLCB2YWwgPT4ge1xuICAgIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICAgIGlmICh1bndhdGNoUnVsZXMgPT09IHZvaWQgMCkge1xuICAgICAgICB1bndhdGNoUnVsZXMgPSB3YXRjaCgoKSA9PiBwcm9wcy5ydWxlcywgb25SdWxlc0NoYW5nZSwgeyBpbW1lZGlhdGU6IHRydWUsIGRlZXA6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodW53YXRjaFJ1bGVzICE9PSB2b2lkIDApIHtcbiAgICAgIHVud2F0Y2hSdWxlcygpXG4gICAgICB1bndhdGNoUnVsZXMgPSB2b2lkIDBcbiAgICB9XG4gIH0sIHsgaW1tZWRpYXRlOiB0cnVlIH0pXG5cbiAgd2F0Y2goKCkgPT4gcHJvcHMubGF6eVJ1bGVzLCBvblJ1bGVzQ2hhbmdlKVxuXG4gIHdhdGNoKGZvY3VzZWQsIHZhbCA9PiB7XG4gICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgaXNEaXJ0eU1vZGVsLnZhbHVlID0gdHJ1ZVxuICAgIH1cbiAgICBlbHNlIGlmIChcbiAgICAgIGNhbkRlYm91bmNlVmFsaWRhdGUudmFsdWUgPT09IHRydWVcbiAgICAgICYmIHByb3BzLmxhenlSdWxlcyAhPT0gJ29uZGVtYW5kJ1xuICAgICkge1xuICAgICAgZGVib3VuY2VkVmFsaWRhdGUoKVxuICAgIH1cbiAgfSlcblxuICBmdW5jdGlvbiByZXNldFZhbGlkYXRpb24gKCkge1xuICAgIHZhbGlkYXRlSW5kZXgrK1xuICAgIGlubmVyTG9hZGluZy52YWx1ZSA9IGZhbHNlXG4gICAgaXNEaXJ0eU1vZGVsLnZhbHVlID0gZmFsc2VcbiAgICBpbm5lckVycm9yLnZhbHVlID0gZmFsc2VcbiAgICBpbm5lckVycm9yTWVzc2FnZS52YWx1ZSA9IG51bGxcbiAgICBkZWJvdW5jZWRWYWxpZGF0ZS5jYW5jZWwoKVxuICB9XG5cbiAgLypcbiAgICogUmV0dXJuIHZhbHVlXG4gICAqICAgLSB0cnVlICh2YWxpZGF0aW9uIHN1Y2NlZWRlZClcbiAgICogICAtIGZhbHNlICh2YWxpZGF0aW9uIGZhaWxlZClcbiAgICogICAtIFByb21pc2UgKHBlbmRpbmcgYXN5bmMgdmFsaWRhdGlvbilcbiAgICovXG4gIGZ1bmN0aW9uIHZhbGlkYXRlICh2YWwgPSBwcm9wcy5tb2RlbFZhbHVlKSB7XG4gICAgaWYgKFxuICAgICAgcHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZVxuICAgICAgfHwgaGFzUnVsZXMudmFsdWUgPT09IGZhbHNlXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGluZGV4ID0gKyt2YWxpZGF0ZUluZGV4XG5cbiAgICBjb25zdCBzZXREaXJ0eSA9IGlubmVyTG9hZGluZy52YWx1ZSAhPT0gdHJ1ZVxuICAgICAgPyAoKSA9PiB7IGlzRGlydHlNb2RlbC52YWx1ZSA9IHRydWUgfVxuICAgICAgOiAoKSA9PiB7fVxuXG4gICAgY29uc3QgdXBkYXRlID0gKGVyciwgbXNnKSA9PiB7XG4gICAgICBlcnIgPT09IHRydWUgJiYgc2V0RGlydHkoKVxuXG4gICAgICBpbm5lckVycm9yLnZhbHVlID0gZXJyXG4gICAgICBpbm5lckVycm9yTWVzc2FnZS52YWx1ZSA9IG1zZyB8fCBudWxsXG4gICAgICBpbm5lckxvYWRpbmcudmFsdWUgPSBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IHByb21pc2VzID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcHMucnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJ1bGUgPSBwcm9wcy5ydWxlc1sgaSBdXG4gICAgICBsZXQgcmVzXG5cbiAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXMgPSBydWxlKHZhbCwgdGVzdFBhdHRlcm4pXG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0eXBlb2YgcnVsZSA9PT0gJ3N0cmluZycgJiYgdGVzdFBhdHRlcm5bIHJ1bGUgXSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJlcyA9IHRlc3RQYXR0ZXJuWyBydWxlIF0odmFsKVxuICAgICAgfVxuXG4gICAgICBpZiAocmVzID09PSBmYWxzZSB8fCB0eXBlb2YgcmVzID09PSAnc3RyaW5nJykge1xuICAgICAgICB1cGRhdGUodHJ1ZSwgcmVzKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHJlcyAhPT0gdHJ1ZSAmJiByZXMgIT09IHZvaWQgMCkge1xuICAgICAgICBwcm9taXNlcy5wdXNoKHJlcylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB1cGRhdGUoZmFsc2UpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlubmVyTG9hZGluZy52YWx1ZSA9IHRydWVcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihcbiAgICAgIHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMgPT09IHZvaWQgMCB8fCBBcnJheS5pc0FycmF5KHJlcykgPT09IGZhbHNlIHx8IHJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBpbmRleCA9PT0gdmFsaWRhdGVJbmRleCAmJiB1cGRhdGUoZmFsc2UpXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1zZyA9IHJlcy5maW5kKHIgPT4gciA9PT0gZmFsc2UgfHwgdHlwZW9mIHIgPT09ICdzdHJpbmcnKVxuICAgICAgICBpbmRleCA9PT0gdmFsaWRhdGVJbmRleCAmJiB1cGRhdGUobXNnICE9PSB2b2lkIDAsIG1zZylcbiAgICAgICAgcmV0dXJuIG1zZyA9PT0gdm9pZCAwXG4gICAgICB9LFxuICAgICAgZSA9PiB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gdmFsaWRhdGVJbmRleCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSlcbiAgICAgICAgICB1cGRhdGUodHJ1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gIGNvbnN0IGRlYm91bmNlZFZhbGlkYXRlID0gZGVib3VuY2UodmFsaWRhdGUsIDApXG5cbiAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICB1bndhdGNoUnVsZXM/LigpXG4gICAgZGVib3VuY2VkVmFsaWRhdGUuY2FuY2VsKClcbiAgfSlcblxuICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHMgJiBwcm9wc1xuICBPYmplY3QuYXNzaWduKHByb3h5LCB7IHJlc2V0VmFsaWRhdGlvbiwgdmFsaWRhdGUgfSlcbiAgaW5qZWN0UHJvcChwcm94eSwgJ2hhc0Vycm9yJywgKCkgPT4gaGFzRXJyb3IudmFsdWUpXG5cbiAgcmV0dXJuIHtcbiAgICBpc0RpcnR5TW9kZWwsXG4gICAgaGFzUnVsZXMsXG4gICAgaGFzRXJyb3IsXG4gICAgZXJyb3JNZXNzYWdlLFxuXG4gICAgdmFsaWRhdGUsXG4gICAgcmVzZXRWYWxpZGF0aW9uXG4gIH1cbn1cbiIsImltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIFRyYW5zaXRpb24sIG5leHRUaWNrLCBvbkFjdGl2YXRlZCwgb25EZWFjdGl2YXRlZCwgb25CZWZvcmVVbm1vdW50LCBvbk1vdW50ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFJY29uIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvaWNvbi9RSWNvbi5qcydcbmltcG9ydCBRU3Bpbm5lciBmcm9tICcuLi8uLi9jb21wb25lbnRzL3NwaW5uZXIvUVNwaW5uZXIuanMnXG5cbmltcG9ydCB1c2VJZCBmcm9tICcuLi91c2UtaWQvdXNlLWlkLmpzJ1xuaW1wb3J0IHVzZVNwbGl0QXR0cnMgZnJvbSAnLi4vdXNlLXNwbGl0LWF0dHJzL3VzZS1zcGxpdC1hdHRycy5qcydcbmltcG9ydCB1c2VEYXJrLCB7IHVzZURhcmtQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWRhcmsvdXNlLWRhcmsuanMnXG5pbXBvcnQgdXNlVmFsaWRhdGUsIHsgdXNlVmFsaWRhdGVQcm9wcyB9IGZyb20gJy4uL3ByaXZhdGUudXNlLXZhbGlkYXRlL3VzZS12YWxpZGF0ZS5qcydcblxuaW1wb3J0IHsgaFNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLnJlbmRlci9yZW5kZXIuanMnXG5pbXBvcnQgeyBwcmV2ZW50LCBzdG9wQW5kUHJldmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50L2V2ZW50LmpzJ1xuaW1wb3J0IHsgYWRkRm9jdXNGbiwgcmVtb3ZlRm9jdXNGbiB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuZm9jdXMvZm9jdXMtbWFuYWdlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGZpZWxkVmFsdWVJc0ZpbGxlZCAodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IHZvaWQgMFxuICAgICYmIHZhbCAhPT0gbnVsbFxuICAgICYmICgnJyArIHZhbCkubGVuZ3RoICE9PSAwXG59XG5cbmV4cG9ydCBjb25zdCB1c2VOb25JbnB1dEZpZWxkUHJvcHMgPSB7XG4gIC4uLnVzZURhcmtQcm9wcyxcbiAgLi4udXNlVmFsaWRhdGVQcm9wcyxcblxuICBsYWJlbDogU3RyaW5nLFxuICBzdGFja0xhYmVsOiBCb29sZWFuLFxuICBoaW50OiBTdHJpbmcsXG4gIGhpZGVIaW50OiBCb29sZWFuLFxuICBwcmVmaXg6IFN0cmluZyxcbiAgc3VmZml4OiBTdHJpbmcsXG5cbiAgbGFiZWxDb2xvcjogU3RyaW5nLFxuICBjb2xvcjogU3RyaW5nLFxuICBiZ0NvbG9yOiBTdHJpbmcsXG5cbiAgZmlsbGVkOiBCb29sZWFuLFxuICBvdXRsaW5lZDogQm9vbGVhbixcbiAgYm9yZGVybGVzczogQm9vbGVhbixcbiAgc3RhbmRvdXQ6IFsgQm9vbGVhbiwgU3RyaW5nIF0sXG5cbiAgc3F1YXJlOiBCb29sZWFuLFxuXG4gIGxvYWRpbmc6IEJvb2xlYW4sXG5cbiAgbGFiZWxTbG90OiBCb29sZWFuLFxuXG4gIGJvdHRvbVNsb3RzOiBCb29sZWFuLFxuICBoaWRlQm90dG9tU3BhY2U6IEJvb2xlYW4sXG5cbiAgcm91bmRlZDogQm9vbGVhbixcbiAgZGVuc2U6IEJvb2xlYW4sXG4gIGl0ZW1BbGlnbmVkOiBCb29sZWFuLFxuXG4gIGNvdW50ZXI6IEJvb2xlYW4sXG5cbiAgY2xlYXJhYmxlOiBCb29sZWFuLFxuICBjbGVhckljb246IFN0cmluZyxcblxuICBkaXNhYmxlOiBCb29sZWFuLFxuICByZWFkb25seTogQm9vbGVhbixcblxuICBhdXRvZm9jdXM6IEJvb2xlYW4sXG5cbiAgZm9yOiBTdHJpbmdcbn1cblxuZXhwb3J0IGNvbnN0IHVzZUZpZWxkUHJvcHMgPSB7XG4gIC4uLnVzZU5vbklucHV0RmllbGRQcm9wcyxcbiAgbWF4bGVuZ3RoOiBbIE51bWJlciwgU3RyaW5nIF1cbn1cblxuZXhwb3J0IGNvbnN0IHVzZUZpZWxkRW1pdHMgPSBbICd1cGRhdGU6bW9kZWxWYWx1ZScsICdjbGVhcicsICdmb2N1cycsICdibHVyJyBdXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VGaWVsZFN0YXRlICh7IHJlcXVpcmVkRm9yQXR0ciA9IHRydWUsIHRhZ1Byb3AsIGNoYW5nZUV2ZW50ID0gZmFsc2UgfSA9IHt9KSB7XG4gIGNvbnN0IHsgcHJvcHMsIHByb3h5IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuXG4gIGNvbnN0IGlzRGFyayA9IHVzZURhcmsocHJvcHMsIHByb3h5LiRxKVxuICBjb25zdCB0YXJnZXRVaWQgPSB1c2VJZCh7XG4gICAgcmVxdWlyZWQ6IHJlcXVpcmVkRm9yQXR0cixcbiAgICBnZXRWYWx1ZTogKCkgPT4gcHJvcHMuZm9yXG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlZEZvckF0dHIsXG4gICAgY2hhbmdlRXZlbnQsXG4gICAgdGFnOiB0YWdQcm9wID09PSB0cnVlXG4gICAgICA/IGNvbXB1dGVkKCgpID0+IHByb3BzLnRhZylcbiAgICAgIDogeyB2YWx1ZTogJ2xhYmVsJyB9LFxuXG4gICAgaXNEYXJrLFxuXG4gICAgZWRpdGFibGU6IGNvbXB1dGVkKCgpID0+XG4gICAgICBwcm9wcy5kaXNhYmxlICE9PSB0cnVlICYmIHByb3BzLnJlYWRvbmx5ICE9PSB0cnVlXG4gICAgKSxcblxuICAgIGlubmVyTG9hZGluZzogcmVmKGZhbHNlKSxcbiAgICBmb2N1c2VkOiByZWYoZmFsc2UpLFxuICAgIGhhc1BvcHVwT3BlbjogZmFsc2UsXG5cbiAgICBzcGxpdEF0dHJzOiB1c2VTcGxpdEF0dHJzKCksXG4gICAgdGFyZ2V0VWlkLFxuXG4gICAgcm9vdFJlZjogcmVmKG51bGwpLFxuICAgIHRhcmdldFJlZjogcmVmKG51bGwpLFxuICAgIGNvbnRyb2xSZWY6IHJlZihudWxsKVxuXG4gICAgLyoqXG4gICAgICogdXNlciBzdXBwbGllZCBhZGRpdGlvbmFsczpcblxuICAgICAqIGlubmVyVmFsdWUgLSBjb21wdXRlZFxuICAgICAqIGZsb2F0aW5nTGFiZWwgLSBjb21wdXRlZFxuICAgICAqIGlucHV0UmVmIC0gY29tcHV0ZWRcblxuICAgICAqIGZpZWxkQ2xhc3MgLSBjb21wdXRlZFxuICAgICAqIGhhc1NoYWRvdyAtIGNvbXB1dGVkXG5cbiAgICAgKiBjb250cm9sRXZlbnRzIC0gT2JqZWN0IHdpdGggZm4oZSlcblxuICAgICAqIGdldENvbnRyb2wgLSBmblxuICAgICAqIGdldElubmVyQXBwZW5kIC0gZm5cbiAgICAgKiBnZXRDb250cm9sQ2hpbGQgLSBmblxuICAgICAqIGdldFNoYWRvd0NvbnRyb2wgLSBmblxuICAgICAqIHNob3dQb3B1cCAtIGZuXG4gICAgICovXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHN0YXRlKSB7XG4gIGNvbnN0IHsgcHJvcHMsIGVtaXQsIHNsb3RzLCBhdHRycywgcHJveHkgfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gIGNvbnN0IHsgJHEgfSA9IHByb3h5XG5cbiAgbGV0IGZvY3Vzb3V0VGltZXIgPSBudWxsXG5cbiAgaWYgKHN0YXRlLmhhc1ZhbHVlID09PSB2b2lkIDApIHtcbiAgICBzdGF0ZS5oYXNWYWx1ZSA9IGNvbXB1dGVkKCgpID0+IGZpZWxkVmFsdWVJc0ZpbGxlZChwcm9wcy5tb2RlbFZhbHVlKSlcbiAgfVxuXG4gIGlmIChzdGF0ZS5lbWl0VmFsdWUgPT09IHZvaWQgMCkge1xuICAgIHN0YXRlLmVtaXRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICAgIGVtaXQoJ3VwZGF0ZTptb2RlbFZhbHVlJywgdmFsdWUpXG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXRlLmNvbnRyb2xFdmVudHMgPT09IHZvaWQgMCkge1xuICAgIHN0YXRlLmNvbnRyb2xFdmVudHMgPSB7XG4gICAgICBvbkZvY3VzaW46IG9uQ29udHJvbEZvY3VzaW4sXG4gICAgICBvbkZvY3Vzb3V0OiBvbkNvbnRyb2xGb2N1c291dFxuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24oc3RhdGUsIHtcbiAgICBjbGVhclZhbHVlLFxuICAgIG9uQ29udHJvbEZvY3VzaW4sXG4gICAgb25Db250cm9sRm9jdXNvdXQsXG4gICAgZm9jdXNcbiAgfSlcblxuICBpZiAoc3RhdGUuY29tcHV0ZWRDb3VudGVyID09PSB2b2lkIDApIHtcbiAgICBzdGF0ZS5jb21wdXRlZENvdW50ZXIgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICBpZiAocHJvcHMuY291bnRlciAhPT0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbGVuID0gdHlwZW9mIHByb3BzLm1vZGVsVmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBwcm9wcy5tb2RlbFZhbHVlID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gKCcnICsgcHJvcHMubW9kZWxWYWx1ZSkubGVuZ3RoXG4gICAgICAgICAgOiAoQXJyYXkuaXNBcnJheShwcm9wcy5tb2RlbFZhbHVlKSA9PT0gdHJ1ZSA/IHByb3BzLm1vZGVsVmFsdWUubGVuZ3RoIDogMClcblxuICAgICAgICBjb25zdCBtYXggPSBwcm9wcy5tYXhsZW5ndGggIT09IHZvaWQgMFxuICAgICAgICAgID8gcHJvcHMubWF4bGVuZ3RoXG4gICAgICAgICAgOiBwcm9wcy5tYXhWYWx1ZXNcblxuICAgICAgICByZXR1cm4gbGVuICsgKG1heCAhPT0gdm9pZCAwID8gJyAvICcgKyBtYXggOiAnJylcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29uc3Qge1xuICAgIGlzRGlydHlNb2RlbCxcbiAgICBoYXNSdWxlcyxcbiAgICBoYXNFcnJvcixcbiAgICBlcnJvck1lc3NhZ2UsXG4gICAgcmVzZXRWYWxpZGF0aW9uXG4gIH0gPSB1c2VWYWxpZGF0ZShzdGF0ZS5mb2N1c2VkLCBzdGF0ZS5pbm5lckxvYWRpbmcpXG5cbiAgY29uc3QgZmxvYXRpbmdMYWJlbCA9IHN0YXRlLmZsb2F0aW5nTGFiZWwgIT09IHZvaWQgMFxuICAgID8gY29tcHV0ZWQoKCkgPT4gcHJvcHMuc3RhY2tMYWJlbCA9PT0gdHJ1ZSB8fCBzdGF0ZS5mb2N1c2VkLnZhbHVlID09PSB0cnVlIHx8IHN0YXRlLmZsb2F0aW5nTGFiZWwudmFsdWUgPT09IHRydWUpXG4gICAgOiBjb21wdXRlZCgoKSA9PiBwcm9wcy5zdGFja0xhYmVsID09PSB0cnVlIHx8IHN0YXRlLmZvY3VzZWQudmFsdWUgPT09IHRydWUgfHwgc3RhdGUuaGFzVmFsdWUudmFsdWUgPT09IHRydWUpXG5cbiAgY29uc3Qgc2hvdWxkUmVuZGVyQm90dG9tID0gY29tcHV0ZWQoKCkgPT5cbiAgICBwcm9wcy5ib3R0b21TbG90cyA9PT0gdHJ1ZVxuICAgIHx8IHByb3BzLmhpbnQgIT09IHZvaWQgMFxuICAgIHx8IGhhc1J1bGVzLnZhbHVlID09PSB0cnVlXG4gICAgfHwgcHJvcHMuY291bnRlciA9PT0gdHJ1ZVxuICAgIHx8IHByb3BzLmVycm9yICE9PSBudWxsXG4gIClcblxuICBjb25zdCBzdHlsZVR5cGUgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgaWYgKHByb3BzLmZpbGxlZCA9PT0gdHJ1ZSkgeyByZXR1cm4gJ2ZpbGxlZCcgfVxuICAgIGlmIChwcm9wcy5vdXRsaW5lZCA9PT0gdHJ1ZSkgeyByZXR1cm4gJ291dGxpbmVkJyB9XG4gICAgaWYgKHByb3BzLmJvcmRlcmxlc3MgPT09IHRydWUpIHsgcmV0dXJuICdib3JkZXJsZXNzJyB9XG4gICAgaWYgKHByb3BzLnN0YW5kb3V0KSB7IHJldHVybiAnc3RhbmRvdXQnIH1cbiAgICByZXR1cm4gJ3N0YW5kYXJkJ1xuICB9KVxuXG4gIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgIGBxLWZpZWxkIHJvdyBuby13cmFwIGl0ZW1zLXN0YXJ0IHEtZmllbGQtLSR7IHN0eWxlVHlwZS52YWx1ZSB9YFxuICAgICsgKHN0YXRlLmZpZWxkQ2xhc3MgIT09IHZvaWQgMCA/IGAgJHsgc3RhdGUuZmllbGRDbGFzcy52YWx1ZSB9YCA6ICcnKVxuICAgICsgKHByb3BzLnJvdW5kZWQgPT09IHRydWUgPyAnIHEtZmllbGQtLXJvdW5kZWQnIDogJycpXG4gICAgKyAocHJvcHMuc3F1YXJlID09PSB0cnVlID8gJyBxLWZpZWxkLS1zcXVhcmUnIDogJycpXG4gICAgKyAoZmxvYXRpbmdMYWJlbC52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1maWVsZC0tZmxvYXQnIDogJycpXG4gICAgKyAoaGFzTGFiZWwudmFsdWUgPT09IHRydWUgPyAnIHEtZmllbGQtLWxhYmVsZWQnIDogJycpXG4gICAgKyAocHJvcHMuZGVuc2UgPT09IHRydWUgPyAnIHEtZmllbGQtLWRlbnNlJyA6ICcnKVxuICAgICsgKHByb3BzLml0ZW1BbGlnbmVkID09PSB0cnVlID8gJyBxLWZpZWxkLS1pdGVtLWFsaWduZWQgcS1pdGVtLXR5cGUnIDogJycpXG4gICAgKyAoc3RhdGUuaXNEYXJrLnZhbHVlID09PSB0cnVlID8gJyBxLWZpZWxkLS1kYXJrJyA6ICcnKVxuICAgICsgKHN0YXRlLmdldENvbnRyb2wgPT09IHZvaWQgMCA/ICcgcS1maWVsZC0tYXV0by1oZWlnaHQnIDogJycpXG4gICAgKyAoc3RhdGUuZm9jdXNlZC52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1maWVsZC0tZm9jdXNlZCcgOiAnJylcbiAgICArIChoYXNFcnJvci52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1maWVsZC0tZXJyb3InIDogJycpXG4gICAgKyAoaGFzRXJyb3IudmFsdWUgPT09IHRydWUgfHwgc3RhdGUuZm9jdXNlZC52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1maWVsZC0taGlnaGxpZ2h0ZWQnIDogJycpXG4gICAgKyAocHJvcHMuaGlkZUJvdHRvbVNwYWNlICE9PSB0cnVlICYmIHNob3VsZFJlbmRlckJvdHRvbS52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1maWVsZC0td2l0aC1ib3R0b20nIDogJycpXG4gICAgKyAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSA/ICcgcS1maWVsZC0tZGlzYWJsZWQnIDogKHByb3BzLnJlYWRvbmx5ID09PSB0cnVlID8gJyBxLWZpZWxkLS1yZWFkb25seScgOiAnJykpXG4gIClcblxuICBjb25zdCBjb250ZW50Q2xhc3MgPSBjb21wdXRlZCgoKSA9PlxuICAgICdxLWZpZWxkX19jb250cm9sIHJlbGF0aXZlLXBvc2l0aW9uIHJvdyBuby13cmFwJ1xuICAgICsgKHByb3BzLmJnQ29sb3IgIT09IHZvaWQgMCA/IGAgYmctJHsgcHJvcHMuYmdDb2xvciB9YCA6ICcnKVxuICAgICsgKFxuICAgICAgaGFzRXJyb3IudmFsdWUgPT09IHRydWVcbiAgICAgICAgPyAnIHRleHQtbmVnYXRpdmUnXG4gICAgICAgIDogKFxuICAgICAgICAgICAgdHlwZW9mIHByb3BzLnN0YW5kb3V0ID09PSAnc3RyaW5nJyAmJiBwcm9wcy5zdGFuZG91dC5sZW5ndGggIT09IDAgJiYgc3RhdGUuZm9jdXNlZC52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgICAgICA/IGAgJHsgcHJvcHMuc3RhbmRvdXQgfWBcbiAgICAgICAgICAgICAgOiAocHJvcHMuY29sb3IgIT09IHZvaWQgMCA/IGAgdGV4dC0keyBwcm9wcy5jb2xvciB9YCA6ICcnKVxuICAgICAgICAgIClcbiAgICApXG4gIClcblxuICBjb25zdCBoYXNMYWJlbCA9IGNvbXB1dGVkKCgpID0+XG4gICAgcHJvcHMubGFiZWxTbG90ID09PSB0cnVlIHx8IHByb3BzLmxhYmVsICE9PSB2b2lkIDBcbiAgKVxuXG4gIGNvbnN0IGxhYmVsQ2xhc3MgPSBjb21wdXRlZCgoKSA9PlxuICAgICdxLWZpZWxkX19sYWJlbCBuby1wb2ludGVyLWV2ZW50cyBhYnNvbHV0ZSBlbGxpcHNpcydcbiAgICArIChwcm9wcy5sYWJlbENvbG9yICE9PSB2b2lkIDAgJiYgaGFzRXJyb3IudmFsdWUgIT09IHRydWUgPyBgIHRleHQtJHsgcHJvcHMubGFiZWxDb2xvciB9YCA6ICcnKVxuICApXG5cbiAgY29uc3QgY29udHJvbFNsb3RTY29wZSA9IGNvbXB1dGVkKCgpID0+ICh7XG4gICAgaWQ6IHN0YXRlLnRhcmdldFVpZC52YWx1ZSxcbiAgICBlZGl0YWJsZTogc3RhdGUuZWRpdGFibGUudmFsdWUsXG4gICAgZm9jdXNlZDogc3RhdGUuZm9jdXNlZC52YWx1ZSxcbiAgICBmbG9hdGluZ0xhYmVsOiBmbG9hdGluZ0xhYmVsLnZhbHVlLFxuICAgIG1vZGVsVmFsdWU6IHByb3BzLm1vZGVsVmFsdWUsXG4gICAgZW1pdFZhbHVlOiBzdGF0ZS5lbWl0VmFsdWVcbiAgfSkpXG5cbiAgY29uc3QgYXR0cmlidXRlcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBjb25zdCBhY2MgPSB7fVxuXG4gICAgaWYgKHN0YXRlLnRhcmdldFVpZC52YWx1ZSkge1xuICAgICAgYWNjLmZvciA9IHN0YXRlLnRhcmdldFVpZC52YWx1ZVxuICAgIH1cblxuICAgIGlmIChwcm9wcy5kaXNhYmxlID09PSB0cnVlKSB7XG4gICAgICBhY2NbICdhcmlhLWRpc2FibGVkJyBdID0gJ3RydWUnXG4gICAgfVxuXG4gICAgcmV0dXJuIGFjY1xuICB9KVxuXG4gIGZ1bmN0aW9uIGZvY3VzSGFuZGxlciAoKSB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgbGV0IHRhcmdldCA9IHN0YXRlLnRhcmdldFJlZj8udmFsdWVcblxuICAgIGlmICh0YXJnZXQgJiYgKGVsID09PSBudWxsIHx8IGVsLmlkICE9PSBzdGF0ZS50YXJnZXRVaWQudmFsdWUpKSB7XG4gICAgICB0YXJnZXQuaGFzQXR0cmlidXRlKCd0YWJpbmRleCcpID09PSB0cnVlIHx8ICh0YXJnZXQgPSB0YXJnZXQucXVlcnlTZWxlY3RvcignW3RhYmluZGV4XScpKVxuICAgICAgaWYgKHRhcmdldCAhPT0gZWwpIHtcbiAgICAgICAgdGFyZ2V0Py5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmb2N1cyAoKSB7XG4gICAgYWRkRm9jdXNGbihmb2N1c0hhbmRsZXIpXG4gIH1cblxuICBmdW5jdGlvbiBibHVyICgpIHtcbiAgICByZW1vdmVGb2N1c0ZuKGZvY3VzSGFuZGxlcilcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICBpZiAoZWwgIT09IG51bGwgJiYgc3RhdGUucm9vdFJlZi52YWx1ZS5jb250YWlucyhlbCkpIHtcbiAgICAgIGVsLmJsdXIoKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ29udHJvbEZvY3VzaW4gKGUpIHtcbiAgICBpZiAoZm9jdXNvdXRUaW1lciAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGZvY3Vzb3V0VGltZXIpXG4gICAgICBmb2N1c291dFRpbWVyID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChzdGF0ZS5lZGl0YWJsZS52YWx1ZSA9PT0gdHJ1ZSAmJiBzdGF0ZS5mb2N1c2VkLnZhbHVlID09PSBmYWxzZSkge1xuICAgICAgc3RhdGUuZm9jdXNlZC52YWx1ZSA9IHRydWVcbiAgICAgIGVtaXQoJ2ZvY3VzJywgZSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkNvbnRyb2xGb2N1c291dCAoZSwgdGhlbikge1xuICAgIGZvY3Vzb3V0VGltZXIgIT09IG51bGwgJiYgY2xlYXJUaW1lb3V0KGZvY3Vzb3V0VGltZXIpXG4gICAgZm9jdXNvdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZm9jdXNvdXRUaW1lciA9IG51bGxcblxuICAgICAgaWYgKFxuICAgICAgICBkb2N1bWVudC5oYXNGb2N1cygpID09PSB0cnVlICYmIChcbiAgICAgICAgICBzdGF0ZS5oYXNQb3B1cE9wZW4gPT09IHRydWVcbiAgICAgICAgICB8fCBzdGF0ZS5jb250cm9sUmVmID09PSB2b2lkIDBcbiAgICAgICAgICB8fCBzdGF0ZS5jb250cm9sUmVmLnZhbHVlID09PSBudWxsXG4gICAgICAgICAgfHwgc3RhdGUuY29udHJvbFJlZi52YWx1ZS5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSAhPT0gZmFsc2VcbiAgICAgICAgKVxuICAgICAgKSByZXR1cm5cblxuICAgICAgaWYgKHN0YXRlLmZvY3VzZWQudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgc3RhdGUuZm9jdXNlZC52YWx1ZSA9IGZhbHNlXG4gICAgICAgIGVtaXQoJ2JsdXInLCBlKVxuICAgICAgfVxuXG4gICAgICB0aGVuPy4oKVxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBjbGVhclZhbHVlIChlKSB7XG4gICAgLy8gcHJldmVudCBhY3RpdmF0aW5nIHRoZSBmaWVsZCBidXQga2VlcCBmb2N1cyBvbiBkZXNrdG9wXG4gICAgc3RvcEFuZFByZXZlbnQoZSlcblxuICAgIGlmICgkcS5wbGF0Zm9ybS5pcy5tb2JpbGUgIT09IHRydWUpIHtcbiAgICAgIGNvbnN0IGVsID0gc3RhdGUudGFyZ2V0UmVmPy52YWx1ZSB8fCBzdGF0ZS5yb290UmVmLnZhbHVlXG4gICAgICBlbC5mb2N1cygpXG4gICAgfVxuICAgIGVsc2UgaWYgKHN0YXRlLnJvb3RSZWYudmFsdWUuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgPT09IHRydWUpIHtcbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpXG4gICAgfVxuXG4gICAgaWYgKHByb3BzLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgLy8gZG8gbm90IGxldCBmb2N1cyBiZSB0cmlnZ2VyZWRcbiAgICAgIC8vIGFzIGl0IHdpbGwgbWFrZSB0aGUgbmF0aXZlIGZpbGUgZGlhbG9nXG4gICAgICAvLyBhcHBlYXIgZm9yIGFub3RoZXIgc2VsZWN0aW9uXG4gICAgICBzdGF0ZS5pbnB1dFJlZi52YWx1ZS52YWx1ZSA9IG51bGxcbiAgICB9XG5cbiAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIG51bGwpXG4gICAgc3RhdGUuY2hhbmdlRXZlbnQgPT09IHRydWUgJiYgZW1pdCgnY2hhbmdlJywgbnVsbClcbiAgICBlbWl0KCdjbGVhcicsIHByb3BzLm1vZGVsVmFsdWUpXG5cbiAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICBjb25zdCBpc0RpcnR5ID0gaXNEaXJ0eU1vZGVsLnZhbHVlXG4gICAgICByZXNldFZhbGlkYXRpb24oKVxuICAgICAgaXNEaXJ0eU1vZGVsLnZhbHVlID0gaXNEaXJ0eVxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBvbkNsZWFyYWJsZUtleXVwIChldnQpIHtcbiAgICBbIDEzLCAzMiBdLmluY2x1ZGVzKGV2dC5rZXlDb2RlKSAmJiBjbGVhclZhbHVlKGV2dClcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENvbnRlbnQgKCkge1xuICAgIGNvbnN0IG5vZGUgPSBbXVxuXG4gICAgc2xvdHMucHJlcGVuZCAhPT0gdm9pZCAwICYmIG5vZGUucHVzaChcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6ICdxLWZpZWxkX19wcmVwZW5kIHEtZmllbGRfX21hcmdpbmFsIHJvdyBuby13cmFwIGl0ZW1zLWNlbnRlcicsXG4gICAgICAgIGtleTogJ3ByZXBlbmQnLFxuICAgICAgICBvbkNsaWNrOiBwcmV2ZW50XG4gICAgICB9LCBzbG90cy5wcmVwZW5kKCkpXG4gICAgKVxuXG4gICAgbm9kZS5wdXNoKFxuICAgICAgaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3EtZmllbGRfX2NvbnRyb2wtY29udGFpbmVyIGNvbCByZWxhdGl2ZS1wb3NpdGlvbiByb3cgbm8td3JhcCBxLWFuY2hvci0tc2tpcCdcbiAgICAgIH0sIGdldENvbnRyb2xDb250YWluZXIoKSlcbiAgICApXG5cbiAgICBoYXNFcnJvci52YWx1ZSA9PT0gdHJ1ZSAmJiBwcm9wcy5ub0Vycm9ySWNvbiA9PT0gZmFsc2UgJiYgbm9kZS5wdXNoKFxuICAgICAgZ2V0SW5uZXJBcHBlbmROb2RlKCdlcnJvcicsIFtcbiAgICAgICAgaChRSWNvbiwgeyBuYW1lOiAkcS5pY29uU2V0LmZpZWxkLmVycm9yLCBjb2xvcjogJ25lZ2F0aXZlJyB9KVxuICAgICAgXSlcbiAgICApXG5cbiAgICBpZiAocHJvcHMubG9hZGluZyA9PT0gdHJ1ZSB8fCBzdGF0ZS5pbm5lckxvYWRpbmcudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIG5vZGUucHVzaChcbiAgICAgICAgZ2V0SW5uZXJBcHBlbmROb2RlKFxuICAgICAgICAgICdpbm5lci1sb2FkaW5nLWFwcGVuZCcsXG4gICAgICAgICAgc2xvdHMubG9hZGluZyAhPT0gdm9pZCAwXG4gICAgICAgICAgICA/IHNsb3RzLmxvYWRpbmcoKVxuICAgICAgICAgICAgOiBbIGgoUVNwaW5uZXIsIHsgY29sb3I6IHByb3BzLmNvbG9yIH0pIF1cbiAgICAgICAgKVxuICAgICAgKVxuICAgIH1cbiAgICBlbHNlIGlmIChwcm9wcy5jbGVhcmFibGUgPT09IHRydWUgJiYgc3RhdGUuaGFzVmFsdWUudmFsdWUgPT09IHRydWUgJiYgc3RhdGUuZWRpdGFibGUudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIG5vZGUucHVzaChcbiAgICAgICAgZ2V0SW5uZXJBcHBlbmROb2RlKCdpbm5lci1jbGVhcmFibGUtYXBwZW5kJywgW1xuICAgICAgICAgIGgoUUljb24sIHtcbiAgICAgICAgICAgIGNsYXNzOiAncS1maWVsZF9fZm9jdXNhYmxlLWFjdGlvbicsXG4gICAgICAgICAgICBuYW1lOiBwcm9wcy5jbGVhckljb24gfHwgJHEuaWNvblNldC5maWVsZC5jbGVhcixcbiAgICAgICAgICAgIHRhYmluZGV4OiAwLFxuICAgICAgICAgICAgcm9sZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAnZmFsc2UnLFxuICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiAkcS5sYW5nLmxhYmVsLmNsZWFyLFxuICAgICAgICAgICAgb25LZXl1cDogb25DbGVhcmFibGVLZXl1cCxcbiAgICAgICAgICAgIG9uQ2xpY2s6IGNsZWFyVmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgKVxuICAgIH1cblxuICAgIHNsb3RzLmFwcGVuZCAhPT0gdm9pZCAwICYmIG5vZGUucHVzaChcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6ICdxLWZpZWxkX19hcHBlbmQgcS1maWVsZF9fbWFyZ2luYWwgcm93IG5vLXdyYXAgaXRlbXMtY2VudGVyJyxcbiAgICAgICAga2V5OiAnYXBwZW5kJyxcbiAgICAgICAgb25DbGljazogcHJldmVudFxuICAgICAgfSwgc2xvdHMuYXBwZW5kKCkpXG4gICAgKVxuXG4gICAgc3RhdGUuZ2V0SW5uZXJBcHBlbmQgIT09IHZvaWQgMCAmJiBub2RlLnB1c2goXG4gICAgICBnZXRJbm5lckFwcGVuZE5vZGUoJ2lubmVyLWFwcGVuZCcsIHN0YXRlLmdldElubmVyQXBwZW5kKCkpXG4gICAgKVxuXG4gICAgc3RhdGUuZ2V0Q29udHJvbENoaWxkICE9PSB2b2lkIDAgJiYgbm9kZS5wdXNoKFxuICAgICAgc3RhdGUuZ2V0Q29udHJvbENoaWxkKClcbiAgICApXG5cbiAgICByZXR1cm4gbm9kZVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29udHJvbENvbnRhaW5lciAoKSB7XG4gICAgY29uc3Qgbm9kZSA9IFtdXG5cbiAgICBwcm9wcy5wcmVmaXggIT09IHZvaWQgMCAmJiBwcm9wcy5wcmVmaXggIT09IG51bGwgJiYgbm9kZS5wdXNoKFxuICAgICAgaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3EtZmllbGRfX3ByZWZpeCBuby1wb2ludGVyLWV2ZW50cyByb3cgaXRlbXMtY2VudGVyJ1xuICAgICAgfSwgcHJvcHMucHJlZml4KVxuICAgIClcblxuICAgIGlmIChzdGF0ZS5nZXRTaGFkb3dDb250cm9sICE9PSB2b2lkIDAgJiYgc3RhdGUuaGFzU2hhZG93LnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBub2RlLnB1c2goXG4gICAgICAgIHN0YXRlLmdldFNoYWRvd0NvbnRyb2woKVxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChzdGF0ZS5nZXRDb250cm9sICE9PSB2b2lkIDApIHtcbiAgICAgIG5vZGUucHVzaChzdGF0ZS5nZXRDb250cm9sKCkpXG4gICAgfVxuICAgIC8vIGludGVybmFsIHVzYWdlIG9ubHk6XG4gICAgZWxzZSBpZiAoc2xvdHMucmF3Q29udHJvbCAhPT0gdm9pZCAwKSB7XG4gICAgICBub2RlLnB1c2goc2xvdHMucmF3Q29udHJvbCgpKVxuICAgIH1cbiAgICBlbHNlIGlmIChzbG90cy5jb250cm9sICE9PSB2b2lkIDApIHtcbiAgICAgIG5vZGUucHVzaChcbiAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgIHJlZjogc3RhdGUudGFyZ2V0UmVmLFxuICAgICAgICAgIGNsYXNzOiAncS1maWVsZF9fbmF0aXZlIHJvdycsXG4gICAgICAgICAgdGFiaW5kZXg6IC0xLFxuICAgICAgICAgIC4uLnN0YXRlLnNwbGl0QXR0cnMuYXR0cmlidXRlcy52YWx1ZSxcbiAgICAgICAgICAnZGF0YS1hdXRvZm9jdXMnOiBwcm9wcy5hdXRvZm9jdXMgPT09IHRydWUgfHwgdm9pZCAwXG4gICAgICAgIH0sIHNsb3RzLmNvbnRyb2woY29udHJvbFNsb3RTY29wZS52YWx1ZSkpXG4gICAgICApXG4gICAgfVxuXG4gICAgaGFzTGFiZWwudmFsdWUgPT09IHRydWUgJiYgbm9kZS5wdXNoKFxuICAgICAgaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogbGFiZWxDbGFzcy52YWx1ZVxuICAgICAgfSwgaFNsb3Qoc2xvdHMubGFiZWwsIHByb3BzLmxhYmVsKSlcbiAgICApXG5cbiAgICBwcm9wcy5zdWZmaXggIT09IHZvaWQgMCAmJiBwcm9wcy5zdWZmaXggIT09IG51bGwgJiYgbm9kZS5wdXNoKFxuICAgICAgaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3EtZmllbGRfX3N1ZmZpeCBuby1wb2ludGVyLWV2ZW50cyByb3cgaXRlbXMtY2VudGVyJ1xuICAgICAgfSwgcHJvcHMuc3VmZml4KVxuICAgIClcblxuICAgIHJldHVybiBub2RlLmNvbmNhdChoU2xvdChzbG90cy5kZWZhdWx0KSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEJvdHRvbSAoKSB7XG4gICAgbGV0IG1zZywga2V5XG5cbiAgICBpZiAoaGFzRXJyb3IudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGlmIChlcnJvck1lc3NhZ2UudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgbXNnID0gWyBoKCdkaXYnLCB7IHJvbGU6ICdhbGVydCcgfSwgZXJyb3JNZXNzYWdlLnZhbHVlKSBdXG4gICAgICAgIGtleSA9IGBxLS1zbG90LWVycm9yLSR7IGVycm9yTWVzc2FnZS52YWx1ZSB9YFxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG1zZyA9IGhTbG90KHNsb3RzLmVycm9yKVxuICAgICAgICBrZXkgPSAncS0tc2xvdC1lcnJvcidcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocHJvcHMuaGlkZUhpbnQgIT09IHRydWUgfHwgc3RhdGUuZm9jdXNlZC52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHByb3BzLmhpbnQgIT09IHZvaWQgMCkge1xuICAgICAgICBtc2cgPSBbIGgoJ2RpdicsIHByb3BzLmhpbnQpIF1cbiAgICAgICAga2V5ID0gYHEtLXNsb3QtaGludC0keyBwcm9wcy5oaW50IH1gXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbXNnID0gaFNsb3Qoc2xvdHMuaGludClcbiAgICAgICAga2V5ID0gJ3EtLXNsb3QtaGludCdcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBoYXNDb3VudGVyID0gcHJvcHMuY291bnRlciA9PT0gdHJ1ZSB8fCBzbG90cy5jb3VudGVyICE9PSB2b2lkIDBcblxuICAgIGlmIChcbiAgICAgIHByb3BzLmhpZGVCb3R0b21TcGFjZSA9PT0gdHJ1ZVxuICAgICAgJiYgaGFzQ291bnRlciA9PT0gZmFsc2VcbiAgICAgICYmIG1zZyA9PT0gdm9pZCAwXG4gICAgKSByZXR1cm5cblxuICAgIGNvbnN0IG1haW4gPSBoKCdkaXYnLCB7XG4gICAgICBrZXksXG4gICAgICBjbGFzczogJ3EtZmllbGRfX21lc3NhZ2VzIGNvbCdcbiAgICB9LCBtc2cpXG5cbiAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgY2xhc3M6ICdxLWZpZWxkX19ib3R0b20gcm93IGl0ZW1zLXN0YXJ0IHEtZmllbGRfX2JvdHRvbS0tJ1xuICAgICAgICArIChwcm9wcy5oaWRlQm90dG9tU3BhY2UgIT09IHRydWUgPyAnYW5pbWF0ZWQnIDogJ3N0YWxlJyksXG4gICAgICBvbkNsaWNrOiBwcmV2ZW50XG4gICAgfSwgW1xuICAgICAgcHJvcHMuaGlkZUJvdHRvbVNwYWNlID09PSB0cnVlXG4gICAgICAgID8gbWFpblxuICAgICAgICA6IGgoVHJhbnNpdGlvbiwgeyBuYW1lOiAncS10cmFuc2l0aW9uLS1maWVsZC1tZXNzYWdlJyB9LCAoKSA9PiBtYWluKSxcblxuICAgICAgaGFzQ291bnRlciA9PT0gdHJ1ZVxuICAgICAgICA/IGgoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogJ3EtZmllbGRfX2NvdW50ZXInXG4gICAgICAgIH0sIHNsb3RzLmNvdW50ZXIgIT09IHZvaWQgMCA/IHNsb3RzLmNvdW50ZXIoKSA6IHN0YXRlLmNvbXB1dGVkQ291bnRlci52YWx1ZSlcbiAgICAgICAgOiBudWxsXG4gICAgXSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldElubmVyQXBwZW5kTm9kZSAoa2V5LCBjb250ZW50KSB7XG4gICAgcmV0dXJuIGNvbnRlbnQgPT09IG51bGxcbiAgICAgID8gbnVsbFxuICAgICAgOiBoKCdkaXYnLCB7XG4gICAgICAgIGtleSxcbiAgICAgICAgY2xhc3M6ICdxLWZpZWxkX19hcHBlbmQgcS1maWVsZF9fbWFyZ2luYWwgcm93IG5vLXdyYXAgaXRlbXMtY2VudGVyIHEtYW5jaG9yLS1za2lwJ1xuICAgICAgfSwgY29udGVudClcbiAgfVxuXG4gIGxldCBzaG91bGRBY3RpdmF0ZSA9IGZhbHNlXG5cbiAgb25EZWFjdGl2YXRlZCgoKSA9PiB7XG4gICAgc2hvdWxkQWN0aXZhdGUgPSB0cnVlXG4gIH0pXG5cbiAgb25BY3RpdmF0ZWQoKCkgPT4ge1xuICAgIHNob3VsZEFjdGl2YXRlID09PSB0cnVlICYmIHByb3BzLmF1dG9mb2N1cyA9PT0gdHJ1ZSAmJiBwcm94eS5mb2N1cygpXG4gIH0pXG5cbiAgcHJvcHMuYXV0b2ZvY3VzID09PSB0cnVlICYmIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgcHJveHkuZm9jdXMoKVxuICB9KVxuXG4gIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgZm9jdXNvdXRUaW1lciAhPT0gbnVsbCAmJiBjbGVhclRpbWVvdXQoZm9jdXNvdXRUaW1lcilcbiAgfSlcblxuICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgT2JqZWN0LmFzc2lnbihwcm94eSwgeyBmb2N1cywgYmx1ciB9KVxuXG4gIHJldHVybiBmdW5jdGlvbiByZW5kZXJGaWVsZCAoKSB7XG4gICAgY29uc3QgbGFiZWxBdHRycyA9IHN0YXRlLmdldENvbnRyb2wgPT09IHZvaWQgMCAmJiBzbG90cy5jb250cm9sID09PSB2b2lkIDBcbiAgICAgID8ge1xuICAgICAgICAgIC4uLnN0YXRlLnNwbGl0QXR0cnMuYXR0cmlidXRlcy52YWx1ZSxcbiAgICAgICAgICAnZGF0YS1hdXRvZm9jdXMnOiBwcm9wcy5hdXRvZm9jdXMgPT09IHRydWUgfHwgdm9pZCAwLFxuICAgICAgICAgIC4uLmF0dHJpYnV0ZXMudmFsdWVcbiAgICAgICAgfVxuICAgICAgOiBhdHRyaWJ1dGVzLnZhbHVlXG5cbiAgICByZXR1cm4gaChzdGF0ZS50YWcudmFsdWUsIHtcbiAgICAgIHJlZjogc3RhdGUucm9vdFJlZixcbiAgICAgIGNsYXNzOiBbXG4gICAgICAgIGNsYXNzZXMudmFsdWUsXG4gICAgICAgIGF0dHJzLmNsYXNzXG4gICAgICBdLFxuICAgICAgc3R5bGU6IGF0dHJzLnN0eWxlLFxuICAgICAgLi4ubGFiZWxBdHRyc1xuICAgIH0sIFtcbiAgICAgIHNsb3RzLmJlZm9yZSAhPT0gdm9pZCAwXG4gICAgICAgID8gaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAncS1maWVsZF9fYmVmb3JlIHEtZmllbGRfX21hcmdpbmFsIHJvdyBuby13cmFwIGl0ZW1zLWNlbnRlcicsXG4gICAgICAgICAgb25DbGljazogcHJldmVudFxuICAgICAgICB9LCBzbG90cy5iZWZvcmUoKSlcbiAgICAgICAgOiBudWxsLFxuXG4gICAgICBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAncS1maWVsZF9faW5uZXIgcmVsYXRpdmUtcG9zaXRpb24gY29sIHNlbGYtc3RyZXRjaCdcbiAgICAgIH0sIFtcbiAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgIHJlZjogc3RhdGUuY29udHJvbFJlZixcbiAgICAgICAgICBjbGFzczogY29udGVudENsYXNzLnZhbHVlLFxuICAgICAgICAgIHRhYmluZGV4OiAtMSxcbiAgICAgICAgICAuLi5zdGF0ZS5jb250cm9sRXZlbnRzXG4gICAgICAgIH0sIGdldENvbnRlbnQoKSksXG5cbiAgICAgICAgc2hvdWxkUmVuZGVyQm90dG9tLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgPyBnZXRCb3R0b20oKVxuICAgICAgICAgIDogbnVsbFxuICAgICAgXSksXG5cbiAgICAgIHNsb3RzLmFmdGVyICE9PSB2b2lkIDBcbiAgICAgICAgPyBoKCdkaXYnLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWZpZWxkX19hZnRlciBxLWZpZWxkX19tYXJnaW5hbCByb3cgbm8td3JhcCBpdGVtcy1jZW50ZXInLFxuICAgICAgICAgIG9uQ2xpY2s6IHByZXZlbnRcbiAgICAgICAgfSwgc2xvdHMuYWZ0ZXIoKSlcbiAgICAgICAgOiBudWxsXG4gICAgXSlcbiAgfVxufVxuIiwiaW1wb3J0IHsgcmVmLCB3YXRjaCwgbmV4dFRpY2sgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB7IHNob3VsZElnbm9yZUtleSB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUua2V5Ym9hcmQva2V5LWNvbXBvc2l0aW9uLmpzJ1xuXG4vLyBsZWF2ZSBOQU1FRF9NQVNLUyBhdCB0b3Agb2YgZmlsZSAoY29kZSByZWZlcmVuY2VkIGZyb20gZG9jcylcbmNvbnN0IE5BTUVEX01BU0tTID0ge1xuICBkYXRlOiAnIyMjIy8jIy8jIycsXG4gIGRhdGV0aW1lOiAnIyMjIy8jIy8jIyAjIzojIycsXG4gIHRpbWU6ICcjIzojIycsXG4gIGZ1bGx0aW1lOiAnIyM6IyM6IyMnLFxuICBwaG9uZTogJygjIyMpICMjIyAtICMjIyMnLFxuICBjYXJkOiAnIyMjIyAjIyMjICMjIyMgIyMjIydcbn1cblxuY29uc3QgVE9LRU5TID0ge1xuICAnIyc6IHsgcGF0dGVybjogJ1tcXFxcZF0nLCBuZWdhdGU6ICdbXlxcXFxkXScgfSxcblxuICBTOiB7IHBhdHRlcm46ICdbYS16QS1aXScsIG5lZ2F0ZTogJ1teYS16QS1aXScgfSxcbiAgTjogeyBwYXR0ZXJuOiAnWzAtOWEtekEtWl0nLCBuZWdhdGU6ICdbXjAtOWEtekEtWl0nIH0sXG5cbiAgQTogeyBwYXR0ZXJuOiAnW2EtekEtWl0nLCBuZWdhdGU6ICdbXmEtekEtWl0nLCB0cmFuc2Zvcm06IHYgPT4gdi50b0xvY2FsZVVwcGVyQ2FzZSgpIH0sXG4gIGE6IHsgcGF0dGVybjogJ1thLXpBLVpdJywgbmVnYXRlOiAnW15hLXpBLVpdJywgdHJhbnNmb3JtOiB2ID0+IHYudG9Mb2NhbGVMb3dlckNhc2UoKSB9LFxuXG4gIFg6IHsgcGF0dGVybjogJ1swLTlhLXpBLVpdJywgbmVnYXRlOiAnW14wLTlhLXpBLVpdJywgdHJhbnNmb3JtOiB2ID0+IHYudG9Mb2NhbGVVcHBlckNhc2UoKSB9LFxuICB4OiB7IHBhdHRlcm46ICdbMC05YS16QS1aXScsIG5lZ2F0ZTogJ1teMC05YS16QS1aXScsIHRyYW5zZm9ybTogdiA9PiB2LnRvTG9jYWxlTG93ZXJDYXNlKCkgfVxufVxuXG5jb25zdCBLRVlTID0gT2JqZWN0LmtleXMoVE9LRU5TKVxuS0VZUy5mb3JFYWNoKGtleSA9PiB7XG4gIFRPS0VOU1sga2V5IF0ucmVnZXggPSBuZXcgUmVnRXhwKFRPS0VOU1sga2V5IF0ucGF0dGVybilcbn0pXG5cbmNvbnN0XG4gIHRva2VuUmVnZXhNYXNrID0gbmV3IFJlZ0V4cCgnXFxcXFxcXFwoW14uKis/XiR7fSgpfChbXFxcXF1dKXwoWy4qKz9eJHt9KCl8W1xcXFxdXSl8KFsnICsgS0VZUy5qb2luKCcnKSArICddKXwoLiknLCAnZycpLFxuICBlc2NSZWdleCA9IC9bLiorP14ke30oKXxbXFxdXFxcXF0vZ1xuXG5jb25zdCBNQVJLRVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDEpXG5cbmV4cG9ydCBjb25zdCB1c2VNYXNrUHJvcHMgPSB7XG4gIG1hc2s6IFN0cmluZyxcbiAgcmV2ZXJzZUZpbGxNYXNrOiBCb29sZWFuLFxuICBmaWxsTWFzazogWyBCb29sZWFuLCBTdHJpbmcgXSxcbiAgdW5tYXNrZWRWYWx1ZTogQm9vbGVhblxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocHJvcHMsIGVtaXQsIGVtaXRWYWx1ZSwgaW5wdXRSZWYpIHtcbiAgbGV0IG1hc2tNYXJrZWQsIG1hc2tSZXBsYWNlZCwgY29tcHV0ZWRNYXNrLCBjb21wdXRlZFVubWFzaywgcGFzdGVkVGV4dFN0YXJ0LCBzZWxlY3Rpb25BbmNob3JcblxuICBjb25zdCBoYXNNYXNrID0gcmVmKG51bGwpXG4gIGNvbnN0IGlubmVyVmFsdWUgPSByZWYoZ2V0SW5pdGlhbE1hc2tlZFZhbHVlKCkpXG5cbiAgZnVuY3Rpb24gZ2V0SXNUeXBlVGV4dCAoKSB7XG4gICAgcmV0dXJuIHByb3BzLmF1dG9ncm93ID09PSB0cnVlXG4gICAgICB8fCBbICd0ZXh0YXJlYScsICd0ZXh0JywgJ3NlYXJjaCcsICd1cmwnLCAndGVsJywgJ3Bhc3N3b3JkJyBdLmluY2x1ZGVzKHByb3BzLnR5cGUpXG4gIH1cblxuICB3YXRjaCgoKSA9PiBwcm9wcy50eXBlICsgcHJvcHMuYXV0b2dyb3csIHVwZGF0ZU1hc2tJbnRlcm5hbHMpXG5cbiAgd2F0Y2goKCkgPT4gcHJvcHMubWFzaywgdiA9PiB7XG4gICAgaWYgKHYgIT09IHZvaWQgMCkge1xuICAgICAgdXBkYXRlTWFza1ZhbHVlKGlubmVyVmFsdWUudmFsdWUsIHRydWUpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgdmFsID0gdW5tYXNrVmFsdWUoaW5uZXJWYWx1ZS52YWx1ZSlcbiAgICAgIHVwZGF0ZU1hc2tJbnRlcm5hbHMoKVxuICAgICAgcHJvcHMubW9kZWxWYWx1ZSAhPT0gdmFsICYmIGVtaXQoJ3VwZGF0ZTptb2RlbFZhbHVlJywgdmFsKVxuICAgIH1cbiAgfSlcblxuICB3YXRjaCgoKSA9PiBwcm9wcy5maWxsTWFzayArIHByb3BzLnJldmVyc2VGaWxsTWFzaywgKCkgPT4ge1xuICAgIGhhc01hc2sudmFsdWUgPT09IHRydWUgJiYgdXBkYXRlTWFza1ZhbHVlKGlubmVyVmFsdWUudmFsdWUsIHRydWUpXG4gIH0pXG5cbiAgd2F0Y2goKCkgPT4gcHJvcHMudW5tYXNrZWRWYWx1ZSwgKCkgPT4ge1xuICAgIGhhc01hc2sudmFsdWUgPT09IHRydWUgJiYgdXBkYXRlTWFza1ZhbHVlKGlubmVyVmFsdWUudmFsdWUpXG4gIH0pXG5cbiAgZnVuY3Rpb24gZ2V0SW5pdGlhbE1hc2tlZFZhbHVlICgpIHtcbiAgICB1cGRhdGVNYXNrSW50ZXJuYWxzKClcblxuICAgIGlmIChoYXNNYXNrLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBjb25zdCBtYXNrZWQgPSBtYXNrVmFsdWUodW5tYXNrVmFsdWUocHJvcHMubW9kZWxWYWx1ZSkpXG5cbiAgICAgIHJldHVybiBwcm9wcy5maWxsTWFzayAhPT0gZmFsc2VcbiAgICAgICAgPyBmaWxsV2l0aE1hc2sobWFza2VkKVxuICAgICAgICA6IG1hc2tlZFxuICAgIH1cblxuICAgIHJldHVybiBwcm9wcy5tb2RlbFZhbHVlXG4gIH1cblxuICBmdW5jdGlvbiBnZXRQYWRkZWRNYXNrTWFya2VkIChzaXplKSB7XG4gICAgaWYgKHNpemUgPCBtYXNrTWFya2VkLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG1hc2tNYXJrZWQuc2xpY2UoLXNpemUpXG4gICAgfVxuXG4gICAgbGV0IHBhZCA9ICcnLCBsb2NhbE1hc2tNYXJrZWQgPSBtYXNrTWFya2VkXG4gICAgY29uc3QgcGFkUG9zID0gbG9jYWxNYXNrTWFya2VkLmluZGV4T2YoTUFSS0VSKVxuXG4gICAgaWYgKHBhZFBvcyAhPT0gLTEpIHtcbiAgICAgIGZvciAobGV0IGkgPSBzaXplIC0gbG9jYWxNYXNrTWFya2VkLmxlbmd0aDsgaSA+IDA7IGktLSkge1xuICAgICAgICBwYWQgKz0gTUFSS0VSXG4gICAgICB9XG5cbiAgICAgIGxvY2FsTWFza01hcmtlZCA9IGxvY2FsTWFza01hcmtlZC5zbGljZSgwLCBwYWRQb3MpICsgcGFkICsgbG9jYWxNYXNrTWFya2VkLnNsaWNlKHBhZFBvcylcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYWxNYXNrTWFya2VkXG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVNYXNrSW50ZXJuYWxzICgpIHtcbiAgICBoYXNNYXNrLnZhbHVlID0gcHJvcHMubWFzayAhPT0gdm9pZCAwXG4gICAgICAmJiBwcm9wcy5tYXNrLmxlbmd0aCAhPT0gMFxuICAgICAgJiYgZ2V0SXNUeXBlVGV4dCgpXG5cbiAgICBpZiAoaGFzTWFzay52YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgIGNvbXB1dGVkVW5tYXNrID0gdm9pZCAwXG4gICAgICBtYXNrTWFya2VkID0gJydcbiAgICAgIG1hc2tSZXBsYWNlZCA9ICcnXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdFxuICAgICAgbG9jYWxDb21wdXRlZE1hc2sgPSBOQU1FRF9NQVNLU1sgcHJvcHMubWFzayBdID09PSB2b2lkIDBcbiAgICAgICAgPyBwcm9wcy5tYXNrXG4gICAgICAgIDogTkFNRURfTUFTS1NbIHByb3BzLm1hc2sgXSxcbiAgICAgIGZpbGxDaGFyID0gdHlwZW9mIHByb3BzLmZpbGxNYXNrID09PSAnc3RyaW5nJyAmJiBwcm9wcy5maWxsTWFzay5sZW5ndGggIT09IDBcbiAgICAgICAgPyBwcm9wcy5maWxsTWFzay5zbGljZSgwLCAxKVxuICAgICAgICA6ICdfJyxcbiAgICAgIGZpbGxDaGFyRXNjYXBlZCA9IGZpbGxDaGFyLnJlcGxhY2UoZXNjUmVnZXgsICdcXFxcJCYnKSxcbiAgICAgIHVubWFzayA9IFtdLFxuICAgICAgZXh0cmFjdCA9IFtdLFxuICAgICAgbWFzayA9IFtdXG5cbiAgICBsZXRcbiAgICAgIGZpcnN0TWF0Y2ggPSBwcm9wcy5yZXZlcnNlRmlsbE1hc2sgPT09IHRydWUsXG4gICAgICB1bm1hc2tDaGFyID0gJycsXG4gICAgICBuZWdhdGVDaGFyID0gJydcblxuICAgIGxvY2FsQ29tcHV0ZWRNYXNrLnJlcGxhY2UodG9rZW5SZWdleE1hc2ssIChfLCBjaGFyMSwgZXNjLCB0b2tlbiwgY2hhcjIpID0+IHtcbiAgICAgIGlmICh0b2tlbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbnN0IGMgPSBUT0tFTlNbIHRva2VuIF1cbiAgICAgICAgbWFzay5wdXNoKGMpXG4gICAgICAgIG5lZ2F0ZUNoYXIgPSBjLm5lZ2F0ZVxuICAgICAgICBpZiAoZmlyc3RNYXRjaCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGV4dHJhY3QucHVzaCgnKD86JyArIG5lZ2F0ZUNoYXIgKyAnKyk/KCcgKyBjLnBhdHRlcm4gKyAnKyk/KD86JyArIG5lZ2F0ZUNoYXIgKyAnKyk/KCcgKyBjLnBhdHRlcm4gKyAnKyk/JylcbiAgICAgICAgICBmaXJzdE1hdGNoID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBleHRyYWN0LnB1c2goJyg/OicgKyBuZWdhdGVDaGFyICsgJyspPygnICsgYy5wYXR0ZXJuICsgJyk/JylcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVzYyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHVubWFza0NoYXIgPSAnXFxcXCcgKyAoZXNjID09PSAnXFxcXCcgPyAnJyA6IGVzYylcbiAgICAgICAgbWFzay5wdXNoKGVzYylcbiAgICAgICAgdW5tYXNrLnB1c2goJyhbXicgKyB1bm1hc2tDaGFyICsgJ10rKT8nICsgdW5tYXNrQ2hhciArICc/JylcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjID0gY2hhcjEgIT09IHZvaWQgMCA/IGNoYXIxIDogY2hhcjJcbiAgICAgICAgdW5tYXNrQ2hhciA9IGMgPT09ICdcXFxcJyA/ICdcXFxcXFxcXFxcXFxcXFxcJyA6IGMucmVwbGFjZShlc2NSZWdleCwgJ1xcXFxcXFxcJCYnKVxuICAgICAgICBtYXNrLnB1c2goYylcbiAgICAgICAgdW5tYXNrLnB1c2goJyhbXicgKyB1bm1hc2tDaGFyICsgJ10rKT8nICsgdW5tYXNrQ2hhciArICc/JylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3RcbiAgICAgIHVubWFza01hdGNoZXIgPSBuZXcgUmVnRXhwKFxuICAgICAgICAnXidcbiAgICAgICAgKyB1bm1hc2suam9pbignJylcbiAgICAgICAgKyAnKCcgKyAodW5tYXNrQ2hhciA9PT0gJycgPyAnLicgOiAnW14nICsgdW5tYXNrQ2hhciArICddJykgKyAnKyk/J1xuICAgICAgICArICh1bm1hc2tDaGFyID09PSAnJyA/ICcnIDogJ1snICsgdW5tYXNrQ2hhciArICddKicpICsgJyQnXG4gICAgICApLFxuICAgICAgZXh0cmFjdExhc3QgPSBleHRyYWN0Lmxlbmd0aCAtIDEsXG4gICAgICBleHRyYWN0TWF0Y2hlciA9IGV4dHJhY3QubWFwKChyZSwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAwICYmIHByb3BzLnJldmVyc2VGaWxsTWFzayA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIGZpbGxDaGFyRXNjYXBlZCArICcqJyArIHJlKVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluZGV4ID09PSBleHRyYWN0TGFzdCkge1xuICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFxuICAgICAgICAgICAgJ14nICsgcmVcbiAgICAgICAgICAgICsgJygnICsgKG5lZ2F0ZUNoYXIgPT09ICcnID8gJy4nIDogbmVnYXRlQ2hhcikgKyAnKyk/J1xuICAgICAgICAgICAgKyAocHJvcHMucmV2ZXJzZUZpbGxNYXNrID09PSB0cnVlID8gJyQnIDogZmlsbENoYXJFc2NhcGVkICsgJyonKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIHJlKVxuICAgICAgfSlcblxuICAgIGNvbXB1dGVkTWFzayA9IG1hc2tcbiAgICBjb21wdXRlZFVubWFzayA9IHZhbCA9PiB7XG4gICAgICBjb25zdCB1bm1hc2tNYXRjaCA9IHVubWFza01hdGNoZXIuZXhlYyhwcm9wcy5yZXZlcnNlRmlsbE1hc2sgPT09IHRydWUgPyB2YWwgOiB2YWwuc2xpY2UoMCwgbWFzay5sZW5ndGggKyAxKSlcbiAgICAgIGlmICh1bm1hc2tNYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICB2YWwgPSB1bm1hc2tNYXRjaC5zbGljZSgxKS5qb2luKCcnKVxuICAgICAgfVxuXG4gICAgICBjb25zdFxuICAgICAgICBleHRyYWN0TWF0Y2ggPSBbXSxcbiAgICAgICAgZXh0cmFjdE1hdGNoZXJMZW5ndGggPSBleHRyYWN0TWF0Y2hlci5sZW5ndGhcblxuICAgICAgZm9yIChsZXQgaSA9IDAsIHN0ciA9IHZhbDsgaSA8IGV4dHJhY3RNYXRjaGVyTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbSA9IGV4dHJhY3RNYXRjaGVyWyBpIF0uZXhlYyhzdHIpXG5cbiAgICAgICAgaWYgKG0gPT09IG51bGwpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgc3RyID0gc3RyLnNsaWNlKG0uc2hpZnQoKS5sZW5ndGgpXG4gICAgICAgIGV4dHJhY3RNYXRjaC5wdXNoKC4uLm0pXG4gICAgICB9XG4gICAgICBpZiAoZXh0cmFjdE1hdGNoLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICByZXR1cm4gZXh0cmFjdE1hdGNoLmpvaW4oJycpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWxcbiAgICB9XG4gICAgbWFza01hcmtlZCA9IG1hc2subWFwKHYgPT4gKHR5cGVvZiB2ID09PSAnc3RyaW5nJyA/IHYgOiBNQVJLRVIpKS5qb2luKCcnKVxuICAgIG1hc2tSZXBsYWNlZCA9IG1hc2tNYXJrZWQuc3BsaXQoTUFSS0VSKS5qb2luKGZpbGxDaGFyKVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTWFza1ZhbHVlIChyYXdWYWwsIHVwZGF0ZU1hc2tJbnRlcm5hbHNGbGFnLCBpbnB1dFR5cGUpIHtcbiAgICBjb25zdFxuICAgICAgaW5wID0gaW5wdXRSZWYudmFsdWUsXG4gICAgICBlbmQgPSBpbnAuc2VsZWN0aW9uRW5kLFxuICAgICAgZW5kUmV2ZXJzZSA9IGlucC52YWx1ZS5sZW5ndGggLSBlbmQsXG4gICAgICB1bm1hc2tlZCA9IHVubWFza1ZhbHVlKHJhd1ZhbClcblxuICAgIC8vIFVwZGF0ZSBoZXJlIHNvIHVubWFzayB1c2VzIHRoZSBvcmlnaW5hbCBmaWxsQ2hhclxuICAgIHVwZGF0ZU1hc2tJbnRlcm5hbHNGbGFnID09PSB0cnVlICYmIHVwZGF0ZU1hc2tJbnRlcm5hbHMoKVxuXG4gICAgY29uc3RcbiAgICAgIHByZU1hc2tlZCA9IG1hc2tWYWx1ZSh1bm1hc2tlZCksXG4gICAgICBtYXNrZWQgPSBwcm9wcy5maWxsTWFzayAhPT0gZmFsc2VcbiAgICAgICAgPyBmaWxsV2l0aE1hc2socHJlTWFza2VkKVxuICAgICAgICA6IHByZU1hc2tlZCxcbiAgICAgIGNoYW5nZWQgPSBpbm5lclZhbHVlLnZhbHVlICE9PSBtYXNrZWRcblxuICAgIC8vIFdlIHdhbnQgdG8gYXZvaWQgXCJmbGlja2VyaW5nXCIgc28gd2Ugc2V0IHZhbHVlIGltbWVkaWF0ZWx5XG4gICAgaW5wLnZhbHVlICE9PSBtYXNrZWQgJiYgKGlucC52YWx1ZSA9IG1hc2tlZClcblxuICAgIGNoYW5nZWQgPT09IHRydWUgJiYgKGlubmVyVmFsdWUudmFsdWUgPSBtYXNrZWQpXG5cbiAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBpbnAgJiYgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgaWYgKG1hc2tlZCA9PT0gbWFza1JlcGxhY2VkKSB7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IHByb3BzLnJldmVyc2VGaWxsTWFzayA9PT0gdHJ1ZSA/IG1hc2tSZXBsYWNlZC5sZW5ndGggOiAwXG4gICAgICAgIGlucC5zZXRTZWxlY3Rpb25SYW5nZShjdXJzb3IsIGN1cnNvciwgJ2ZvcndhcmQnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKGlucHV0VHlwZSA9PT0gJ2luc2VydEZyb21QYXN0ZScgJiYgcHJvcHMucmV2ZXJzZUZpbGxNYXNrICE9PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IG1heEVuZCA9IGlucC5zZWxlY3Rpb25FbmRcbiAgICAgICAgbGV0IGN1cnNvciA9IGVuZCAtIDFcbiAgICAgICAgLy8gZWFjaCBub24tbWFya2VyIGNoYXIgbWVhbnMgd2UgbW92ZSBvbmNlIHRvIHJpZ2h0XG4gICAgICAgIGZvciAobGV0IGkgPSBwYXN0ZWRUZXh0U3RhcnQ7IGkgPD0gY3Vyc29yICYmIGkgPCBtYXhFbmQ7IGkrKykge1xuICAgICAgICAgIGlmIChtYXNrTWFya2VkWyBpIF0gIT09IE1BUktFUikge1xuICAgICAgICAgICAgY3Vyc29yKytcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBtb3ZlQ3Vyc29yLnJpZ2h0KGlucCwgY3Vyc29yKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKFsgJ2RlbGV0ZUNvbnRlbnRCYWNrd2FyZCcsICdkZWxldGVDb250ZW50Rm9yd2FyZCcgXS5pbmRleE9mKGlucHV0VHlwZSkgIT09IC0xKSB7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IHByb3BzLnJldmVyc2VGaWxsTWFzayA9PT0gdHJ1ZVxuICAgICAgICAgID8gKFxuICAgICAgICAgICAgICBlbmQgPT09IDBcbiAgICAgICAgICAgICAgICA/IChtYXNrZWQubGVuZ3RoID4gcHJlTWFza2VkLmxlbmd0aCA/IDEgOiAwKVxuICAgICAgICAgICAgICAgIDogTWF0aC5tYXgoMCwgbWFza2VkLmxlbmd0aCAtIChtYXNrZWQgPT09IG1hc2tSZXBsYWNlZCA/IDAgOiBNYXRoLm1pbihwcmVNYXNrZWQubGVuZ3RoLCBlbmRSZXZlcnNlKSArIDEpKSArIDFcbiAgICAgICAgICAgIClcbiAgICAgICAgICA6IGVuZFxuXG4gICAgICAgIGlucC5zZXRTZWxlY3Rpb25SYW5nZShjdXJzb3IsIGN1cnNvciwgJ2ZvcndhcmQnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzLnJldmVyc2VGaWxsTWFzayA9PT0gdHJ1ZSkge1xuICAgICAgICBpZiAoY2hhbmdlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGNvbnN0IGN1cnNvciA9IE1hdGgubWF4KDAsIG1hc2tlZC5sZW5ndGggLSAobWFza2VkID09PSBtYXNrUmVwbGFjZWQgPyAwIDogTWF0aC5taW4ocHJlTWFza2VkLmxlbmd0aCwgZW5kUmV2ZXJzZSArIDEpKSlcblxuICAgICAgICAgIGlmIChjdXJzb3IgPT09IDEgJiYgZW5kID09PSAxKSB7XG4gICAgICAgICAgICBpbnAuc2V0U2VsZWN0aW9uUmFuZ2UoY3Vyc29yLCBjdXJzb3IsICdmb3J3YXJkJylcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtb3ZlQ3Vyc29yLnJpZ2h0UmV2ZXJzZShpbnAsIGN1cnNvcilcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29uc3QgY3Vyc29yID0gbWFza2VkLmxlbmd0aCAtIGVuZFJldmVyc2VcbiAgICAgICAgICBpbnAuc2V0U2VsZWN0aW9uUmFuZ2UoY3Vyc29yLCBjdXJzb3IsICdiYWNrd2FyZCcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAoY2hhbmdlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGNvbnN0IGN1cnNvciA9IE1hdGgubWF4KDAsIG1hc2tNYXJrZWQuaW5kZXhPZihNQVJLRVIpLCBNYXRoLm1pbihwcmVNYXNrZWQubGVuZ3RoLCBlbmQpIC0gMSlcbiAgICAgICAgICBtb3ZlQ3Vyc29yLnJpZ2h0KGlucCwgY3Vyc29yKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGVuZCAtIDFcbiAgICAgICAgICBtb3ZlQ3Vyc29yLnJpZ2h0KGlucCwgY3Vyc29yKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IHZhbCA9IHByb3BzLnVubWFza2VkVmFsdWUgPT09IHRydWVcbiAgICAgID8gdW5tYXNrVmFsdWUobWFza2VkKVxuICAgICAgOiBtYXNrZWRcblxuICAgIGlmIChcbiAgICAgIFN0cmluZyhwcm9wcy5tb2RlbFZhbHVlKSAhPT0gdmFsXG4gICAgICAmJiAocHJvcHMubW9kZWxWYWx1ZSAhPT0gbnVsbCB8fCB2YWwgIT09ICcnKVxuICAgICkge1xuICAgICAgZW1pdFZhbHVlKHZhbCwgdHJ1ZSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlQ3Vyc29yRm9yUGFzdGUgKGlucCwgc3RhcnQsIGVuZCkge1xuICAgIGNvbnN0IHByZU1hc2tlZCA9IG1hc2tWYWx1ZSh1bm1hc2tWYWx1ZShpbnAudmFsdWUpKVxuXG4gICAgc3RhcnQgPSBNYXRoLm1heCgwLCBtYXNrTWFya2VkLmluZGV4T2YoTUFSS0VSKSwgTWF0aC5taW4ocHJlTWFza2VkLmxlbmd0aCwgc3RhcnQpKVxuICAgIHBhc3RlZFRleHRTdGFydCA9IHN0YXJ0XG5cbiAgICBpbnAuc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQsIGVuZCwgJ2ZvcndhcmQnKVxuICB9XG5cbiAgY29uc3QgbW92ZUN1cnNvciA9IHtcbiAgICBsZWZ0IChpbnAsIGN1cnNvcikge1xuICAgICAgY29uc3Qgbm9NYXJrQmVmb3JlID0gbWFza01hcmtlZC5zbGljZShjdXJzb3IgLSAxKS5pbmRleE9mKE1BUktFUikgPT09IC0xXG4gICAgICBsZXQgaSA9IE1hdGgubWF4KDAsIGN1cnNvciAtIDEpXG5cbiAgICAgIGZvciAoOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAobWFza01hcmtlZFsgaSBdID09PSBNQVJLRVIpIHtcbiAgICAgICAgICBjdXJzb3IgPSBpXG4gICAgICAgICAgbm9NYXJrQmVmb3JlID09PSB0cnVlICYmIGN1cnNvcisrXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGkgPCAwXG4gICAgICAgICYmIG1hc2tNYXJrZWRbIGN1cnNvciBdICE9PSB2b2lkIDBcbiAgICAgICAgJiYgbWFza01hcmtlZFsgY3Vyc29yIF0gIT09IE1BUktFUlxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBtb3ZlQ3Vyc29yLnJpZ2h0KGlucCwgMClcbiAgICAgIH1cblxuICAgICAgY3Vyc29yID49IDAgJiYgaW5wLnNldFNlbGVjdGlvblJhbmdlKGN1cnNvciwgY3Vyc29yLCAnYmFja3dhcmQnKVxuICAgIH0sXG5cbiAgICByaWdodCAoaW5wLCBjdXJzb3IpIHtcbiAgICAgIGNvbnN0IGxpbWl0ID0gaW5wLnZhbHVlLmxlbmd0aFxuICAgICAgbGV0IGkgPSBNYXRoLm1pbihsaW1pdCwgY3Vyc29yICsgMSlcblxuICAgICAgZm9yICg7IGkgPD0gbGltaXQ7IGkrKykge1xuICAgICAgICBpZiAobWFza01hcmtlZFsgaSBdID09PSBNQVJLRVIpIHtcbiAgICAgICAgICBjdXJzb3IgPSBpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtYXNrTWFya2VkWyBpIC0gMSBdID09PSBNQVJLRVIpIHtcbiAgICAgICAgICBjdXJzb3IgPSBpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBpID4gbGltaXRcbiAgICAgICAgJiYgbWFza01hcmtlZFsgY3Vyc29yIC0gMSBdICE9PSB2b2lkIDBcbiAgICAgICAgJiYgbWFza01hcmtlZFsgY3Vyc29yIC0gMSBdICE9PSBNQVJLRVJcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gbW92ZUN1cnNvci5sZWZ0KGlucCwgbGltaXQpXG4gICAgICB9XG5cbiAgICAgIGlucC5zZXRTZWxlY3Rpb25SYW5nZShjdXJzb3IsIGN1cnNvciwgJ2ZvcndhcmQnKVxuICAgIH0sXG5cbiAgICBsZWZ0UmV2ZXJzZSAoaW5wLCBjdXJzb3IpIHtcbiAgICAgIGNvbnN0XG4gICAgICAgIGxvY2FsTWFza01hcmtlZCA9IGdldFBhZGRlZE1hc2tNYXJrZWQoaW5wLnZhbHVlLmxlbmd0aClcbiAgICAgIGxldCBpID0gTWF0aC5tYXgoMCwgY3Vyc29yIC0gMSlcblxuICAgICAgZm9yICg7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChsb2NhbE1hc2tNYXJrZWRbIGkgLSAxIF0gPT09IE1BUktFUikge1xuICAgICAgICAgIGN1cnNvciA9IGlcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxvY2FsTWFza01hcmtlZFsgaSBdID09PSBNQVJLRVIpIHtcbiAgICAgICAgICBjdXJzb3IgPSBpXG4gICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgaSA8IDBcbiAgICAgICAgJiYgbG9jYWxNYXNrTWFya2VkWyBjdXJzb3IgXSAhPT0gdm9pZCAwXG4gICAgICAgICYmIGxvY2FsTWFza01hcmtlZFsgY3Vyc29yIF0gIT09IE1BUktFUlxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBtb3ZlQ3Vyc29yLnJpZ2h0UmV2ZXJzZShpbnAsIDApXG4gICAgICB9XG5cbiAgICAgIGN1cnNvciA+PSAwICYmIGlucC5zZXRTZWxlY3Rpb25SYW5nZShjdXJzb3IsIGN1cnNvciwgJ2JhY2t3YXJkJylcbiAgICB9LFxuXG4gICAgcmlnaHRSZXZlcnNlIChpbnAsIGN1cnNvcikge1xuICAgICAgY29uc3RcbiAgICAgICAgbGltaXQgPSBpbnAudmFsdWUubGVuZ3RoLFxuICAgICAgICBsb2NhbE1hc2tNYXJrZWQgPSBnZXRQYWRkZWRNYXNrTWFya2VkKGxpbWl0KSxcbiAgICAgICAgbm9NYXJrQmVmb3JlID0gbG9jYWxNYXNrTWFya2VkLnNsaWNlKDAsIGN1cnNvciArIDEpLmluZGV4T2YoTUFSS0VSKSA9PT0gLTFcbiAgICAgIGxldCBpID0gTWF0aC5taW4obGltaXQsIGN1cnNvciArIDEpXG5cbiAgICAgIGZvciAoOyBpIDw9IGxpbWl0OyBpKyspIHtcbiAgICAgICAgaWYgKGxvY2FsTWFza01hcmtlZFsgaSAtIDEgXSA9PT0gTUFSS0VSKSB7XG4gICAgICAgICAgY3Vyc29yID0gaVxuICAgICAgICAgIGN1cnNvciA+IDAgJiYgbm9NYXJrQmVmb3JlID09PSB0cnVlICYmIGN1cnNvci0tXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGkgPiBsaW1pdFxuICAgICAgICAmJiBsb2NhbE1hc2tNYXJrZWRbIGN1cnNvciAtIDEgXSAhPT0gdm9pZCAwXG4gICAgICAgICYmIGxvY2FsTWFza01hcmtlZFsgY3Vyc29yIC0gMSBdICE9PSBNQVJLRVJcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gbW92ZUN1cnNvci5sZWZ0UmV2ZXJzZShpbnAsIGxpbWl0KVxuICAgICAgfVxuXG4gICAgICBpbnAuc2V0U2VsZWN0aW9uUmFuZ2UoY3Vyc29yLCBjdXJzb3IsICdmb3J3YXJkJylcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbk1hc2tlZENsaWNrIChlKSB7XG4gICAgZW1pdCgnY2xpY2snLCBlKVxuXG4gICAgc2VsZWN0aW9uQW5jaG9yID0gdm9pZCAwXG4gIH1cblxuICBmdW5jdGlvbiBvbk1hc2tlZEtleWRvd24gKGUpIHtcbiAgICBlbWl0KCdrZXlkb3duJywgZSlcblxuICAgIGlmIChcbiAgICAgIHNob3VsZElnbm9yZUtleShlKSA9PT0gdHJ1ZVxuICAgICAgfHwgZS5hbHRLZXkgPT09IHRydWUgLy8gbGV0IGJyb3dzZXIgaGFuZGxlIHRoZXNlXG4gICAgKSByZXR1cm5cblxuICAgIGNvbnN0XG4gICAgICBpbnAgPSBpbnB1dFJlZi52YWx1ZSxcbiAgICAgIHN0YXJ0ID0gaW5wLnNlbGVjdGlvblN0YXJ0LFxuICAgICAgZW5kID0gaW5wLnNlbGVjdGlvbkVuZFxuXG4gICAgaWYgKCFlLnNoaWZ0S2V5KSB7XG4gICAgICBzZWxlY3Rpb25BbmNob3IgPSB2b2lkIDBcbiAgICB9XG5cbiAgICBpZiAoZS5rZXlDb2RlID09PSAzNyB8fCBlLmtleUNvZGUgPT09IDM5KSB7IC8vIExlZnQgLyBSaWdodFxuICAgICAgaWYgKGUuc2hpZnRLZXkgJiYgc2VsZWN0aW9uQW5jaG9yID09PSB2b2lkIDApIHtcbiAgICAgICAgc2VsZWN0aW9uQW5jaG9yID0gaW5wLnNlbGVjdGlvbkRpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnID8gc3RhcnQgOiBlbmRcbiAgICAgIH1cblxuICAgICAgY29uc3QgZm4gPSBtb3ZlQ3Vyc29yWyAoZS5rZXlDb2RlID09PSAzOSA/ICdyaWdodCcgOiAnbGVmdCcpICsgKHByb3BzLnJldmVyc2VGaWxsTWFzayA9PT0gdHJ1ZSA/ICdSZXZlcnNlJyA6ICcnKSBdXG5cbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZm4oaW5wLCBzZWxlY3Rpb25BbmNob3IgPT09IHN0YXJ0ID8gZW5kIDogc3RhcnQpXG5cbiAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGlucC5zZWxlY3Rpb25TdGFydFxuICAgICAgICBpbnAuc2V0U2VsZWN0aW9uUmFuZ2UoTWF0aC5taW4oc2VsZWN0aW9uQW5jaG9yLCBjdXJzb3IpLCBNYXRoLm1heChzZWxlY3Rpb25BbmNob3IsIGN1cnNvciksICdmb3J3YXJkJylcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoXG4gICAgICBlLmtleUNvZGUgPT09IDggLy8gQmFja3NwYWNlXG4gICAgICAmJiBwcm9wcy5yZXZlcnNlRmlsbE1hc2sgIT09IHRydWVcbiAgICAgICYmIHN0YXJ0ID09PSBlbmRcbiAgICApIHtcbiAgICAgIG1vdmVDdXJzb3IubGVmdChpbnAsIHN0YXJ0KVxuICAgICAgaW5wLnNldFNlbGVjdGlvblJhbmdlKGlucC5zZWxlY3Rpb25TdGFydCwgZW5kLCAnYmFja3dhcmQnKVxuICAgIH1cbiAgICBlbHNlIGlmIChcbiAgICAgIGUua2V5Q29kZSA9PT0gNDYgLy8gRGVsZXRlXG4gICAgICAmJiBwcm9wcy5yZXZlcnNlRmlsbE1hc2sgPT09IHRydWVcbiAgICAgICYmIHN0YXJ0ID09PSBlbmRcbiAgICApIHtcbiAgICAgIG1vdmVDdXJzb3IucmlnaHRSZXZlcnNlKGlucCwgZW5kKVxuICAgICAgaW5wLnNldFNlbGVjdGlvblJhbmdlKHN0YXJ0LCBpbnAuc2VsZWN0aW9uRW5kLCAnZm9yd2FyZCcpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFza1ZhbHVlICh2YWwpIHtcbiAgICBpZiAodmFsID09PSB2b2lkIDAgfHwgdmFsID09PSBudWxsIHx8IHZhbCA9PT0gJycpIHsgcmV0dXJuICcnIH1cblxuICAgIGlmIChwcm9wcy5yZXZlcnNlRmlsbE1hc2sgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBtYXNrVmFsdWVSZXZlcnNlKHZhbClcbiAgICB9XG5cbiAgICBjb25zdCBtYXNrID0gY29tcHV0ZWRNYXNrXG5cbiAgICBsZXQgdmFsSW5kZXggPSAwLCBvdXRwdXQgPSAnJ1xuXG4gICAgZm9yIChsZXQgbWFza0luZGV4ID0gMDsgbWFza0luZGV4IDwgbWFzay5sZW5ndGg7IG1hc2tJbmRleCsrKSB7XG4gICAgICBjb25zdFxuICAgICAgICB2YWxDaGFyID0gdmFsWyB2YWxJbmRleCBdLFxuICAgICAgICBtYXNrRGVmID0gbWFza1sgbWFza0luZGV4IF1cblxuICAgICAgaWYgKHR5cGVvZiBtYXNrRGVmID09PSAnc3RyaW5nJykge1xuICAgICAgICBvdXRwdXQgKz0gbWFza0RlZlxuICAgICAgICB2YWxDaGFyID09PSBtYXNrRGVmICYmIHZhbEluZGV4KytcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHZhbENoYXIgIT09IHZvaWQgMCAmJiBtYXNrRGVmLnJlZ2V4LnRlc3QodmFsQ2hhcikpIHtcbiAgICAgICAgb3V0cHV0ICs9IG1hc2tEZWYudHJhbnNmb3JtICE9PSB2b2lkIDBcbiAgICAgICAgICA/IG1hc2tEZWYudHJhbnNmb3JtKHZhbENoYXIpXG4gICAgICAgICAgOiB2YWxDaGFyXG4gICAgICAgIHZhbEluZGV4KytcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gb3V0cHV0XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgZnVuY3Rpb24gbWFza1ZhbHVlUmV2ZXJzZSAodmFsKSB7XG4gICAgY29uc3RcbiAgICAgIG1hc2sgPSBjb21wdXRlZE1hc2ssXG4gICAgICBmaXJzdFRva2VuSW5kZXggPSBtYXNrTWFya2VkLmluZGV4T2YoTUFSS0VSKVxuXG4gICAgbGV0IHZhbEluZGV4ID0gdmFsLmxlbmd0aCAtIDEsIG91dHB1dCA9ICcnXG5cbiAgICBmb3IgKGxldCBtYXNrSW5kZXggPSBtYXNrLmxlbmd0aCAtIDE7IG1hc2tJbmRleCA+PSAwICYmIHZhbEluZGV4ICE9PSAtMTsgbWFza0luZGV4LS0pIHtcbiAgICAgIGNvbnN0IG1hc2tEZWYgPSBtYXNrWyBtYXNrSW5kZXggXVxuXG4gICAgICBsZXQgdmFsQ2hhciA9IHZhbFsgdmFsSW5kZXggXVxuXG4gICAgICBpZiAodHlwZW9mIG1hc2tEZWYgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG91dHB1dCA9IG1hc2tEZWYgKyBvdXRwdXRcbiAgICAgICAgdmFsQ2hhciA9PT0gbWFza0RlZiAmJiB2YWxJbmRleC0tXG4gICAgICB9XG4gICAgICBlbHNlIGlmICh2YWxDaGFyICE9PSB2b2lkIDAgJiYgbWFza0RlZi5yZWdleC50ZXN0KHZhbENoYXIpKSB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBvdXRwdXQgPSAobWFza0RlZi50cmFuc2Zvcm0gIT09IHZvaWQgMCA/IG1hc2tEZWYudHJhbnNmb3JtKHZhbENoYXIpIDogdmFsQ2hhcikgKyBvdXRwdXRcbiAgICAgICAgICB2YWxJbmRleC0tXG4gICAgICAgICAgdmFsQ2hhciA9IHZhbFsgdmFsSW5kZXggXVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5tb2RpZmllZC1sb29wLWNvbmRpdGlvblxuICAgICAgICB9IHdoaWxlIChmaXJzdFRva2VuSW5kZXggPT09IG1hc2tJbmRleCAmJiB2YWxDaGFyICE9PSB2b2lkIDAgJiYgbWFza0RlZi5yZWdleC50ZXN0KHZhbENoYXIpKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICBmdW5jdGlvbiB1bm1hc2tWYWx1ZSAodmFsKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWwgIT09ICdzdHJpbmcnIHx8IGNvbXB1dGVkVW5tYXNrID09PSB2b2lkIDBcbiAgICAgID8gKHR5cGVvZiB2YWwgPT09ICdudW1iZXInID8gY29tcHV0ZWRVbm1hc2soJycgKyB2YWwpIDogdmFsKVxuICAgICAgOiBjb21wdXRlZFVubWFzayh2YWwpXG4gIH1cblxuICBmdW5jdGlvbiBmaWxsV2l0aE1hc2sgKHZhbCkge1xuICAgIGlmIChtYXNrUmVwbGFjZWQubGVuZ3RoIC0gdmFsLmxlbmd0aCA8PSAwKSB7XG4gICAgICByZXR1cm4gdmFsXG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3BzLnJldmVyc2VGaWxsTWFzayA9PT0gdHJ1ZSAmJiB2YWwubGVuZ3RoICE9PSAwXG4gICAgICA/IG1hc2tSZXBsYWNlZC5zbGljZSgwLCAtdmFsLmxlbmd0aCkgKyB2YWxcbiAgICAgIDogdmFsICsgbWFza1JlcGxhY2VkLnNsaWNlKHZhbC5sZW5ndGgpXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGlubmVyVmFsdWUsXG4gICAgaGFzTWFzayxcbiAgICBtb3ZlQ3Vyc29yRm9yUGFzdGUsXG4gICAgdXBkYXRlTWFza1ZhbHVlLFxuICAgIG9uTWFza2VkS2V5ZG93bixcbiAgICBvbk1hc2tlZENsaWNrXG4gIH1cbn1cbiIsImltcG9ydCB7IGgsIGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgY29uc3QgdXNlRm9ybVByb3BzID0ge1xuICBuYW1lOiBTdHJpbmdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZvcm1BdHRycyAocHJvcHMpIHtcbiAgcmV0dXJuIGNvbXB1dGVkKCgpID0+ICh7XG4gICAgdHlwZTogJ2hpZGRlbicsXG4gICAgbmFtZTogcHJvcHMubmFtZSxcbiAgICB2YWx1ZTogcHJvcHMubW9kZWxWYWx1ZVxuICB9KSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZvcm1JbmplY3QgKGZvcm1BdHRycyA9IHt9KSB7XG4gIHJldHVybiAoY2hpbGQsIGFjdGlvbiwgY2xhc3NOYW1lKSA9PiB7XG4gICAgY2hpbGRbIGFjdGlvbiBdKFxuICAgICAgaCgnaW5wdXQnLCB7XG4gICAgICAgIGNsYXNzOiAnaGlkZGVuJyArIChjbGFzc05hbWUgfHwgJycpLFxuICAgICAgICAuLi5mb3JtQXR0cnMudmFsdWVcbiAgICAgIH0pXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VGb3JtSW5wdXROYW1lQXR0ciAocHJvcHMpIHtcbiAgcmV0dXJuIGNvbXB1dGVkKCgpID0+IHByb3BzLm5hbWUgfHwgcHJvcHMuZm9yKVxufVxuIiwiaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcywgdHlwZUd1YXJkKSB7XG4gIGZ1bmN0aW9uIGdldEZvcm1Eb21Qcm9wcyAoKSB7XG4gICAgY29uc3QgbW9kZWwgPSBwcm9wcy5tb2RlbFZhbHVlXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZHQgPSAnRGF0YVRyYW5zZmVyJyBpbiB3aW5kb3dcbiAgICAgICAgPyBuZXcgRGF0YVRyYW5zZmVyKClcbiAgICAgICAgOiAoJ0NsaXBib2FyZEV2ZW50JyBpbiB3aW5kb3dcbiAgICAgICAgICAgID8gbmV3IENsaXBib2FyZEV2ZW50KCcnKS5jbGlwYm9hcmREYXRhXG4gICAgICAgICAgICA6IHZvaWQgMFxuICAgICAgICAgIClcblxuICAgICAgaWYgKE9iamVjdChtb2RlbCkgPT09IG1vZGVsKSB7XG4gICAgICAgICgnbGVuZ3RoJyBpbiBtb2RlbFxuICAgICAgICAgID8gQXJyYXkuZnJvbShtb2RlbClcbiAgICAgICAgICA6IFsgbW9kZWwgXVxuICAgICAgICApLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgZHQuaXRlbXMuYWRkKGZpbGUpXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZpbGVzOiBkdC5maWxlc1xuICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZmlsZXM6IHZvaWQgMFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0eXBlR3VhcmQgPT09IHRydWVcbiAgICA/IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGlmIChwcm9wcy50eXBlICE9PSAnZmlsZScpIHJldHVyblxuICAgICAgcmV0dXJuIGdldEZvcm1Eb21Qcm9wcygpXG4gICAgfSlcbiAgICA6IGNvbXB1dGVkKGdldEZvcm1Eb21Qcm9wcylcbn1cbiIsImltcG9ydCB7IGNsaWVudCB9IGZyb20gJy4uLy4uL3BsdWdpbnMvcGxhdGZvcm0vUGxhdGZvcm0uanMnXG5cbmNvbnN0IGlzSmFwYW5lc2UgPSAvW1xcdTMwMDAtXFx1MzAzZlxcdTMwNDAtXFx1MzA5ZlxcdTMwYTAtXFx1MzBmZlxcdWZmMDAtXFx1ZmY5ZlxcdTRlMDAtXFx1OWZhZlxcdTM0MDAtXFx1NGRiZl0vXG5jb25zdCBpc0NoaW5lc2UgPSAvW1xcdTRlMDAtXFx1OWZmZlxcdTM0MDAtXFx1NGRiZlxcdXsyMDAwMH0tXFx1ezJhNmRmfVxcdXsyYTcwMH0tXFx1ezJiNzNmfVxcdXsyYjc0MH0tXFx1ezJiODFmfVxcdXsyYjgyMH0tXFx1ezJjZWFmfVxcdWY5MDAtXFx1ZmFmZlxcdTMzMDAtXFx1MzNmZlxcdWZlMzAtXFx1ZmU0ZlxcdWY5MDAtXFx1ZmFmZlxcdXsyZjgwMH0tXFx1ezJmYTFmfV0vdVxuY29uc3QgaXNLb3JlYW4gPSAvW1xcdTMxMzEtXFx1MzE0ZVxcdTMxNGYtXFx1MzE2M1xcdWFjMDAtXFx1ZDdhM10vXG5jb25zdCBpc1BsYWluVGV4dCA9IC9bYS16MC05XyAtXSQvaVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAob25JbnB1dCkge1xuICByZXR1cm4gZnVuY3Rpb24gb25Db21wb3NpdGlvbiAoZSkge1xuICAgIGlmIChlLnR5cGUgPT09ICdjb21wb3NpdGlvbmVuZCcgfHwgZS50eXBlID09PSAnY2hhbmdlJykge1xuICAgICAgaWYgKGUudGFyZ2V0LnFDb21wb3NpbmcgIT09IHRydWUpIHJldHVyblxuICAgICAgZS50YXJnZXQucUNvbXBvc2luZyA9IGZhbHNlXG4gICAgICBvbklucHV0KGUpXG4gICAgfVxuICAgIGVsc2UgaWYgKFxuICAgICAgZS50eXBlID09PSAnY29tcG9zaXRpb251cGRhdGUnXG4gICAgICAmJiBlLnRhcmdldC5xQ29tcG9zaW5nICE9PSB0cnVlXG4gICAgICAmJiB0eXBlb2YgZS5kYXRhID09PSAnc3RyaW5nJ1xuICAgICkge1xuICAgICAgY29uc3QgaXNDb21wb3NpbmcgPSBjbGllbnQuaXMuZmlyZWZveCA9PT0gdHJ1ZVxuICAgICAgICA/IGlzUGxhaW5UZXh0LnRlc3QoZS5kYXRhKSA9PT0gZmFsc2VcbiAgICAgICAgOiBpc0phcGFuZXNlLnRlc3QoZS5kYXRhKSA9PT0gdHJ1ZSB8fCBpc0NoaW5lc2UudGVzdChlLmRhdGEpID09PSB0cnVlIHx8IGlzS29yZWFuLnRlc3QoZS5kYXRhKSA9PT0gdHJ1ZVxuXG4gICAgICBpZiAoaXNDb21wb3NpbmcgPT09IHRydWUpIHtcbiAgICAgICAgZS50YXJnZXQucUNvbXBvc2luZyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIHdhdGNoLCBvbkJlZm9yZVVubW91bnQsIG9uTW91bnRlZCwgbmV4dFRpY2ssIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHVzZUZpZWxkLCB7IHVzZUZpZWxkU3RhdGUsIHVzZUZpZWxkUHJvcHMsIHVzZUZpZWxkRW1pdHMsIGZpZWxkVmFsdWVJc0ZpbGxlZCB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWZpZWxkL3VzZS1maWVsZC5qcydcbmltcG9ydCB1c2VNYXNrLCB7IHVzZU1hc2tQcm9wcyB9IGZyb20gJy4vdXNlLW1hc2suanMnXG5pbXBvcnQgeyB1c2VGb3JtUHJvcHMsIHVzZUZvcm1JbnB1dE5hbWVBdHRyIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvdXNlLWZvcm0vcHJpdmF0ZS51c2UtZm9ybS5qcydcbmltcG9ydCB1c2VGaWxlRm9ybURvbVByb3BzIGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWZpbGUvdXNlLWZpbGUtZG9tLXByb3BzLmpzJ1xuaW1wb3J0IHVzZUtleUNvbXBvc2l0aW9uIGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWtleS1jb21wb3NpdGlvbi91c2Uta2V5LWNvbXBvc2l0aW9uLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNyZWF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBzdG9wIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQvZXZlbnQuanMnXG5pbXBvcnQgeyBhZGRGb2N1c0ZuIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5mb2N1cy9mb2N1cy1tYW5hZ2VyLmpzJ1xuaW1wb3J0IHsgaW5qZWN0UHJvcCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuaW5qZWN0LW9iai1wcm9wL2luamVjdC1vYmotcHJvcC5qcydcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FJbnB1dCcsXG5cbiAgaW5oZXJpdEF0dHJzOiBmYWxzZSxcblxuICBwcm9wczoge1xuICAgIC4uLnVzZUZpZWxkUHJvcHMsXG4gICAgLi4udXNlTWFza1Byb3BzLFxuICAgIC4uLnVzZUZvcm1Qcm9wcyxcblxuICAgIC8vIG92ZXJyaWRlIG9mIHVzZUZpZWxkUHJvcHMgPiBtb2RlbFZhbHVlXG4gICAgbW9kZWxWYWx1ZTogX19RVUFTQVJfU1NSX1NFUlZFUl9fXG4gICAgICA/IHt9IC8vIFNTUiBkb2VzIG5vdCBrbm93IGFib3V0IEZpbGVMaXN0XG4gICAgICA6IFsgU3RyaW5nLCBOdW1iZXIsIEZpbGVMaXN0IF0sXG5cbiAgICBzaGFkb3dUZXh0OiBTdHJpbmcsXG5cbiAgICB0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAndGV4dCdcbiAgICB9LFxuXG4gICAgZGVib3VuY2U6IFsgU3RyaW5nLCBOdW1iZXIgXSxcblxuICAgIGF1dG9ncm93OiBCb29sZWFuLCAvLyBtYWtlcyBhIHRleHRhcmVhXG5cbiAgICBpbnB1dENsYXNzOiBbIEFycmF5LCBTdHJpbmcsIE9iamVjdCBdLFxuICAgIGlucHV0U3R5bGU6IFsgQXJyYXksIFN0cmluZywgT2JqZWN0IF1cbiAgfSxcblxuICBlbWl0czogW1xuICAgIC4uLnVzZUZpZWxkRW1pdHMsXG4gICAgJ3Bhc3RlJywgJ2NoYW5nZScsXG4gICAgJ2tleWRvd24nLCAnY2xpY2snLCAnYW5pbWF0aW9uZW5kJ1xuICBdLFxuXG4gIHNldHVwIChwcm9wcywgeyBlbWl0LCBhdHRycyB9KSB7XG4gICAgY29uc3QgeyBwcm94eSB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcbiAgICBjb25zdCB7ICRxIH0gPSBwcm94eVxuXG4gICAgY29uc3QgdGVtcCA9IHt9XG4gICAgbGV0IGVtaXRDYWNoZWRWYWx1ZSA9IE5hTiwgdHlwZWROdW1iZXIsIHN0b3BWYWx1ZVdhdGNoZXIsIGVtaXRUaW1lciA9IG51bGwsIGVtaXRWYWx1ZUZuXG5cbiAgICBjb25zdCBpbnB1dFJlZiA9IHJlZihudWxsKVxuICAgIGNvbnN0IG5hbWVQcm9wID0gdXNlRm9ybUlucHV0TmFtZUF0dHIocHJvcHMpXG5cbiAgICBjb25zdCB7XG4gICAgICBpbm5lclZhbHVlLFxuICAgICAgaGFzTWFzayxcbiAgICAgIG1vdmVDdXJzb3JGb3JQYXN0ZSxcbiAgICAgIHVwZGF0ZU1hc2tWYWx1ZSxcbiAgICAgIG9uTWFza2VkS2V5ZG93bixcbiAgICAgIG9uTWFza2VkQ2xpY2tcbiAgICB9ID0gdXNlTWFzayhwcm9wcywgZW1pdCwgZW1pdFZhbHVlLCBpbnB1dFJlZilcblxuICAgIGNvbnN0IGZvcm1Eb21Qcm9wcyA9IHVzZUZpbGVGb3JtRG9tUHJvcHMocHJvcHMsIC8qIHR5cGUgZ3VhcmQgKi8gdHJ1ZSlcbiAgICBjb25zdCBoYXNWYWx1ZSA9IGNvbXB1dGVkKCgpID0+IGZpZWxkVmFsdWVJc0ZpbGxlZChpbm5lclZhbHVlLnZhbHVlKSlcblxuICAgIGNvbnN0IG9uQ29tcG9zaXRpb24gPSB1c2VLZXlDb21wb3NpdGlvbihvbklucHV0KVxuXG4gICAgY29uc3Qgc3RhdGUgPSB1c2VGaWVsZFN0YXRlKHsgY2hhbmdlRXZlbnQ6IHRydWUgfSlcblxuICAgIGNvbnN0IGlzVGV4dGFyZWEgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgcHJvcHMudHlwZSA9PT0gJ3RleHRhcmVhJyB8fCBwcm9wcy5hdXRvZ3JvdyA9PT0gdHJ1ZVxuICAgIClcblxuICAgIGNvbnN0IGlzVHlwZVRleHQgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgaXNUZXh0YXJlYS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgfHwgWyAndGV4dCcsICdzZWFyY2gnLCAndXJsJywgJ3RlbCcsICdwYXNzd29yZCcgXS5pbmNsdWRlcyhwcm9wcy50eXBlKVxuICAgIClcblxuICAgIGNvbnN0IG9uRXZlbnRzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgY29uc3QgZXZ0ID0ge1xuICAgICAgICAuLi5zdGF0ZS5zcGxpdEF0dHJzLmxpc3RlbmVycy52YWx1ZSxcbiAgICAgICAgb25JbnB1dCxcbiAgICAgICAgb25QYXN0ZSxcbiAgICAgICAgLy8gU2FmYXJpIDwgMTAuMiAmIFVJV2ViVmlldyBkb2Vzbid0IGZpcmUgY29tcG9zaXRpb25lbmQgd2hlblxuICAgICAgICAvLyBzd2l0Y2hpbmcgZm9jdXMgYmVmb3JlIGNvbmZpcm1pbmcgY29tcG9zaXRpb24gY2hvaWNlXG4gICAgICAgIC8vIHRoaXMgYWxzbyBmaXhlcyB0aGUgaXNzdWUgd2hlcmUgc29tZSBicm93c2VycyBlLmcuIGlPUyBDaHJvbWVcbiAgICAgICAgLy8gZmlyZXMgXCJjaGFuZ2VcIiBpbnN0ZWFkIG9mIFwiaW5wdXRcIiBvbiBhdXRvY29tcGxldGUuXG4gICAgICAgIG9uQ2hhbmdlLFxuICAgICAgICBvbkJsdXI6IG9uRmluaXNoRWRpdGluZyxcbiAgICAgICAgb25Gb2N1czogc3RvcFxuICAgICAgfVxuXG4gICAgICBldnQub25Db21wb3NpdGlvbnN0YXJ0ID0gZXZ0Lm9uQ29tcG9zaXRpb251cGRhdGUgPSBldnQub25Db21wb3NpdGlvbmVuZCA9IG9uQ29tcG9zaXRpb25cblxuICAgICAgaWYgKGhhc01hc2sudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgZXZ0Lm9uS2V5ZG93biA9IG9uTWFza2VkS2V5ZG93blxuICAgICAgICAvLyByZXNldCBzZWxlY3Rpb24gYW5jaG9yIG9uIHBvaW50ZXIgc2VsZWN0aW9uXG4gICAgICAgIGV2dC5vbkNsaWNrID0gb25NYXNrZWRDbGlja1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHMuYXV0b2dyb3cgPT09IHRydWUpIHtcbiAgICAgICAgZXZ0Lm9uQW5pbWF0aW9uZW5kID0gb25BbmltYXRpb25lbmRcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGV2dFxuICAgIH0pXG5cbiAgICBjb25zdCBpbnB1dEF0dHJzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgY29uc3QgYXR0cnMgPSB7XG4gICAgICAgIHRhYmluZGV4OiAwLFxuICAgICAgICAnZGF0YS1hdXRvZm9jdXMnOiBwcm9wcy5hdXRvZm9jdXMgPT09IHRydWUgfHwgdm9pZCAwLFxuICAgICAgICByb3dzOiBwcm9wcy50eXBlID09PSAndGV4dGFyZWEnID8gNiA6IHZvaWQgMCxcbiAgICAgICAgJ2FyaWEtbGFiZWwnOiBwcm9wcy5sYWJlbCxcbiAgICAgICAgbmFtZTogbmFtZVByb3AudmFsdWUsXG4gICAgICAgIC4uLnN0YXRlLnNwbGl0QXR0cnMuYXR0cmlidXRlcy52YWx1ZSxcbiAgICAgICAgaWQ6IHN0YXRlLnRhcmdldFVpZC52YWx1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiBwcm9wcy5tYXhsZW5ndGgsXG4gICAgICAgIGRpc2FibGVkOiBwcm9wcy5kaXNhYmxlID09PSB0cnVlLFxuICAgICAgICByZWFkb25seTogcHJvcHMucmVhZG9ubHkgPT09IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKGlzVGV4dGFyZWEudmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICAgIGF0dHJzLnR5cGUgPSBwcm9wcy50eXBlXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wcy5hdXRvZ3JvdyA9PT0gdHJ1ZSkge1xuICAgICAgICBhdHRycy5yb3dzID0gMVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXR0cnNcbiAgICB9KVxuXG4gICAgLy8gc29tZSBicm93c2VycyBsb3NlIHRoZSBuYXRpdmUgaW5wdXQgdmFsdWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHJlYXR0YWNoIGl0IGR5bmFtaWNhbGx5XG4gICAgLy8gKGxpa2UgdHlwZT1cInBhc3N3b3JkXCIgPC0+IHR5cGU9XCJ0ZXh0XCI7IHNlZSAjMTIwNzgpXG4gICAgd2F0Y2goKCkgPT4gcHJvcHMudHlwZSwgKCkgPT4ge1xuICAgICAgaWYgKGlucHV0UmVmLnZhbHVlKSB7XG4gICAgICAgIGlucHV0UmVmLnZhbHVlLnZhbHVlID0gcHJvcHMubW9kZWxWYWx1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICB3YXRjaCgoKSA9PiBwcm9wcy5tb2RlbFZhbHVlLCB2ID0+IHtcbiAgICAgIGlmIChoYXNNYXNrLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgIGlmIChzdG9wVmFsdWVXYXRjaGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgc3RvcFZhbHVlV2F0Y2hlciA9IGZhbHNlXG4gICAgICAgICAgaWYgKFN0cmluZyh2KSA9PT0gZW1pdENhY2hlZFZhbHVlKSByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZU1hc2tWYWx1ZSh2KVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaW5uZXJWYWx1ZS52YWx1ZSAhPT0gdikge1xuICAgICAgICBpbm5lclZhbHVlLnZhbHVlID0gdlxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBwcm9wcy50eXBlID09PSAnbnVtYmVyJ1xuICAgICAgICAgICYmIHRlbXAuaGFzT3duUHJvcGVydHkoJ3ZhbHVlJykgPT09IHRydWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVkTnVtYmVyID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0eXBlZE51bWJlciA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlIHRlbXAudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gdGV4dGFyZWEgb25seVxuICAgICAgcHJvcHMuYXV0b2dyb3cgPT09IHRydWUgJiYgbmV4dFRpY2soYWRqdXN0SGVpZ2h0KVxuICAgIH0pXG5cbiAgICB3YXRjaCgoKSA9PiBwcm9wcy5hdXRvZ3JvdywgdmFsID0+IHtcbiAgICAgIC8vIHRleHRhcmVhIG9ubHlcbiAgICAgIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICAgICAgbmV4dFRpY2soYWRqdXN0SGVpZ2h0KVxuICAgICAgfVxuICAgICAgLy8gaWYgaXQgaGFzIGEgbnVtYmVyIG9mIHJvd3Mgc2V0IHJlc3BlY3QgaXRcbiAgICAgIGVsc2UgaWYgKGlucHV0UmVmLnZhbHVlICE9PSBudWxsICYmIGF0dHJzLnJvd3MgPiAwKSB7XG4gICAgICAgIGlucHV0UmVmLnZhbHVlLnN0eWxlLmhlaWdodCA9ICdhdXRvJ1xuICAgICAgfVxuICAgIH0pXG5cbiAgICB3YXRjaCgoKSA9PiBwcm9wcy5kZW5zZSwgKCkgPT4ge1xuICAgICAgcHJvcHMuYXV0b2dyb3cgPT09IHRydWUgJiYgbmV4dFRpY2soYWRqdXN0SGVpZ2h0KVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBmb2N1cyAoKSB7XG4gICAgICBhZGRGb2N1c0ZuKCgpID0+IHtcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICAgIGlmIChcbiAgICAgICAgICBpbnB1dFJlZi52YWx1ZSAhPT0gbnVsbFxuICAgICAgICAgICYmIGlucHV0UmVmLnZhbHVlICE9PSBlbFxuICAgICAgICAgICYmIChlbCA9PT0gbnVsbCB8fCBlbC5pZCAhPT0gc3RhdGUudGFyZ2V0VWlkLnZhbHVlKVxuICAgICAgICApIHtcbiAgICAgICAgICBpbnB1dFJlZi52YWx1ZS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3QgKCkge1xuICAgICAgaW5wdXRSZWYudmFsdWU/LnNlbGVjdCgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25QYXN0ZSAoZSkge1xuICAgICAgaWYgKGhhc01hc2sudmFsdWUgPT09IHRydWUgJiYgcHJvcHMucmV2ZXJzZUZpbGxNYXNrICE9PSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IGlucCA9IGUudGFyZ2V0XG4gICAgICAgIG1vdmVDdXJzb3JGb3JQYXN0ZShpbnAsIGlucC5zZWxlY3Rpb25TdGFydCwgaW5wLnNlbGVjdGlvbkVuZClcbiAgICAgIH1cblxuICAgICAgZW1pdCgncGFzdGUnLCBlKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uSW5wdXQgKGUpIHtcbiAgICAgIGlmICghZSB8fCAhZS50YXJnZXQpIHJldHVyblxuXG4gICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgIGVtaXQoJ3VwZGF0ZTptb2RlbFZhbHVlJywgZS50YXJnZXQuZmlsZXMpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCB2YWwgPSBlLnRhcmdldC52YWx1ZVxuXG4gICAgICBpZiAoZS50YXJnZXQucUNvbXBvc2luZyA9PT0gdHJ1ZSkge1xuICAgICAgICB0ZW1wLnZhbHVlID0gdmFsXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoaGFzTWFzay52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICB1cGRhdGVNYXNrVmFsdWUodmFsLCBmYWxzZSwgZS5pbnB1dFR5cGUpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZW1pdFZhbHVlKHZhbClcblxuICAgICAgICBpZiAoaXNUeXBlVGV4dC52YWx1ZSA9PT0gdHJ1ZSAmJiBlLnRhcmdldCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZCB9ID0gZS50YXJnZXRcblxuICAgICAgICAgIGlmIChzZWxlY3Rpb25TdGFydCAhPT0gdm9pZCAwICYmIHNlbGVjdGlvbkVuZCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChlLnRhcmdldCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiB2YWwuaW5kZXhPZihlLnRhcmdldC52YWx1ZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBlLnRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3ZSBuZWVkIHRvIHRyaWdnZXIgaXQgaW1tZWRpYXRlbHkgdG9vLFxuICAgICAgLy8gdG8gYXZvaWQgXCJmbGlja2VyaW5nXCJcbiAgICAgIHByb3BzLmF1dG9ncm93ID09PSB0cnVlICYmIGFkanVzdEhlaWdodCgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25BbmltYXRpb25lbmQgKGUpIHtcbiAgICAgIGVtaXQoJ2FuaW1hdGlvbmVuZCcsIGUpXG4gICAgICBhZGp1c3RIZWlnaHQoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVtaXRWYWx1ZSAodmFsLCBzdG9wV2F0Y2hlcikge1xuICAgICAgZW1pdFZhbHVlRm4gPSAoKSA9PiB7XG4gICAgICAgIGVtaXRUaW1lciA9IG51bGxcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJvcHMudHlwZSAhPT0gJ251bWJlcidcbiAgICAgICAgICAmJiB0ZW1wLmhhc093blByb3BlcnR5KCd2YWx1ZScpID09PSB0cnVlXG4gICAgICAgICkge1xuICAgICAgICAgIGRlbGV0ZSB0ZW1wLnZhbHVlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvcHMubW9kZWxWYWx1ZSAhPT0gdmFsICYmIGVtaXRDYWNoZWRWYWx1ZSAhPT0gdmFsKSB7XG4gICAgICAgICAgZW1pdENhY2hlZFZhbHVlID0gdmFsXG5cbiAgICAgICAgICBzdG9wV2F0Y2hlciA9PT0gdHJ1ZSAmJiAoc3RvcFZhbHVlV2F0Y2hlciA9IHRydWUpXG4gICAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCB2YWwpXG5cbiAgICAgICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICBlbWl0Q2FjaGVkVmFsdWUgPT09IHZhbCAmJiAoZW1pdENhY2hlZFZhbHVlID0gTmFOKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBlbWl0VmFsdWVGbiA9IHZvaWQgMFxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdHlwZWROdW1iZXIgPSB0cnVlXG4gICAgICAgIHRlbXAudmFsdWUgPSB2YWxcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzLmRlYm91bmNlICE9PSB2b2lkIDApIHtcbiAgICAgICAgZW1pdFRpbWVyICE9PSBudWxsICYmIGNsZWFyVGltZW91dChlbWl0VGltZXIpXG4gICAgICAgIHRlbXAudmFsdWUgPSB2YWxcbiAgICAgICAgZW1pdFRpbWVyID0gc2V0VGltZW91dChlbWl0VmFsdWVGbiwgcHJvcHMuZGVib3VuY2UpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZW1pdFZhbHVlRm4oKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHRleHRhcmVhIG9ubHlcbiAgICBmdW5jdGlvbiBhZGp1c3RIZWlnaHQgKCkge1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wID0gaW5wdXRSZWYudmFsdWVcbiAgICAgICAgaWYgKGlucCAhPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnN0IHBhcmVudFN0eWxlID0gaW5wLnBhcmVudE5vZGUuc3R5bGVcbiAgICAgICAgICAvLyBjaHJvbWUgZG9lcyBub3Qga2VlcCBzY3JvbGwgIzE1NDk4XG4gICAgICAgICAgY29uc3QgeyBzY3JvbGxUb3AgfSA9IGlucFxuICAgICAgICAgIC8vIGNocm9tZSBjYWxjdWxhdGVzIGEgc21hbGxlciBzY3JvbGxIZWlnaHQgd2hlbiBpbiBhIC5jb2x1bW4gY29udGFpbmVyXG4gICAgICAgICAgY29uc3QgeyBvdmVyZmxvd1ksIG1heEhlaWdodCB9ID0gJHEucGxhdGZvcm0uaXMuZmlyZWZveCA9PT0gdHJ1ZVxuICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgOiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpbnApXG4gICAgICAgICAgLy8gb24gZmlyZWZveCBvciBpZiBvdmVyZmxvd1kgaXMgc3BlY2lmaWVkIGFzIHNjcm9sbCAjMTQyNjMsICMxNDM0NFxuICAgICAgICAgIC8vIHdlIGRvbid0IHRvdWNoIG92ZXJmbG93XG4gICAgICAgICAgLy8gZmlyZWZveCBpcyBub3Qgc28gYmFkIGluIHRoZSBlbmRcbiAgICAgICAgICBjb25zdCBjaGFuZ2VPdmVyZmxvdyA9IG92ZXJmbG93WSAhPT0gdm9pZCAwICYmIG92ZXJmbG93WSAhPT0gJ3Njcm9sbCdcblxuICAgICAgICAgIC8vIHJlc2V0IGhlaWdodCBvZiB0ZXh0YXJlYSB0byBhIHNtYWxsIHNpemUgdG8gZGV0ZWN0IHRoZSByZWFsIGhlaWdodFxuICAgICAgICAgIC8vIGJ1dCBrZWVwIHRoZSB0b3RhbCBjb250cm9sIHNpemUgdGhlIHNhbWVcbiAgICAgICAgICBjaGFuZ2VPdmVyZmxvdyA9PT0gdHJ1ZSAmJiAoaW5wLnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nKVxuICAgICAgICAgIHBhcmVudFN0eWxlLm1hcmdpbkJvdHRvbSA9IChpbnAuc2Nyb2xsSGVpZ2h0IC0gMSkgKyAncHgnXG4gICAgICAgICAgaW5wLnN0eWxlLmhlaWdodCA9ICcxcHgnXG5cbiAgICAgICAgICBpbnAuc3R5bGUuaGVpZ2h0ID0gaW5wLnNjcm9sbEhlaWdodCArICdweCdcbiAgICAgICAgICAvLyB3ZSBzaG91bGQgYWxsb3cgc2Nyb2xsYmFycyBvbmx5XG4gICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbWF4SGVpZ2h0IGFuZCBjb250ZW50IGlzIHRhbGxlciB0aGFuIG1heEhlaWdodFxuICAgICAgICAgIGNoYW5nZU92ZXJmbG93ID09PSB0cnVlICYmIChpbnAuc3R5bGUub3ZlcmZsb3dZID0gcGFyc2VJbnQobWF4SGVpZ2h0LCAxMCkgPCBpbnAuc2Nyb2xsSGVpZ2h0ID8gJ2F1dG8nIDogJ2hpZGRlbicpXG4gICAgICAgICAgcGFyZW50U3R5bGUubWFyZ2luQm90dG9tID0gJydcbiAgICAgICAgICBpbnAuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25DaGFuZ2UgKGUpIHtcbiAgICAgIG9uQ29tcG9zaXRpb24oZSlcblxuICAgICAgaWYgKGVtaXRUaW1lciAhPT0gbnVsbCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoZW1pdFRpbWVyKVxuICAgICAgICBlbWl0VGltZXIgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIGVtaXRWYWx1ZUZuPy4oKVxuXG4gICAgICBlbWl0KCdjaGFuZ2UnLCBlLnRhcmdldC52YWx1ZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkZpbmlzaEVkaXRpbmcgKGUpIHtcbiAgICAgIGUgIT09IHZvaWQgMCAmJiBzdG9wKGUpXG5cbiAgICAgIGlmIChlbWl0VGltZXIgIT09IG51bGwpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGVtaXRUaW1lcilcbiAgICAgICAgZW1pdFRpbWVyID0gbnVsbFxuICAgICAgfVxuXG4gICAgICBlbWl0VmFsdWVGbj8uKClcblxuICAgICAgdHlwZWROdW1iZXIgPSBmYWxzZVxuICAgICAgc3RvcFZhbHVlV2F0Y2hlciA9IGZhbHNlXG4gICAgICBkZWxldGUgdGVtcC52YWx1ZVxuXG4gICAgICAvLyB3ZSBuZWVkIHRvIHVzZSBzZXRUaW1lb3V0IGluc3RlYWQgb2YgdGhpcy4kbmV4dFRpY2tcbiAgICAgIC8vIHRvIGF2b2lkIGEgYnVnIHdoZXJlIGZvY3Vzb3V0IGlzIG5vdCBlbWl0dGVkIGZvciB0eXBlIGRhdGUvdGltZS93ZWVrLy4uLlxuICAgICAgcHJvcHMudHlwZSAhPT0gJ2ZpbGUnICYmIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoaW5wdXRSZWYudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICBpbnB1dFJlZi52YWx1ZS52YWx1ZSA9IGlubmVyVmFsdWUudmFsdWUgIT09IHZvaWQgMCA/IGlubmVyVmFsdWUudmFsdWUgOiAnJ1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEN1clZhbHVlICgpIHtcbiAgICAgIHJldHVybiB0ZW1wLmhhc093blByb3BlcnR5KCd2YWx1ZScpID09PSB0cnVlXG4gICAgICAgID8gdGVtcC52YWx1ZVxuICAgICAgICA6IChpbm5lclZhbHVlLnZhbHVlICE9PSB2b2lkIDAgPyBpbm5lclZhbHVlLnZhbHVlIDogJycpXG4gICAgfVxuXG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICAgIG9uRmluaXNoRWRpdGluZygpXG4gICAgfSlcblxuICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICAvLyB0ZXh0YXJlYSBvbmx5XG4gICAgICBwcm9wcy5hdXRvZ3JvdyA9PT0gdHJ1ZSAmJiBhZGp1c3RIZWlnaHQoKVxuICAgIH0pXG5cbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCB7XG4gICAgICBpbm5lclZhbHVlLFxuXG4gICAgICBmaWVsZENsYXNzOiBjb21wdXRlZCgoKSA9PlxuICAgICAgICBgcS0keyBpc1RleHRhcmVhLnZhbHVlID09PSB0cnVlID8gJ3RleHRhcmVhJyA6ICdpbnB1dCcgfWBcbiAgICAgICAgKyAocHJvcHMuYXV0b2dyb3cgPT09IHRydWUgPyAnIHEtdGV4dGFyZWEtLWF1dG9ncm93JyA6ICcnKVxuICAgICAgKSxcblxuICAgICAgaGFzU2hhZG93OiBjb21wdXRlZCgoKSA9PlxuICAgICAgICBwcm9wcy50eXBlICE9PSAnZmlsZSdcbiAgICAgICAgJiYgdHlwZW9mIHByb3BzLnNoYWRvd1RleHQgPT09ICdzdHJpbmcnXG4gICAgICAgICYmIHByb3BzLnNoYWRvd1RleHQubGVuZ3RoICE9PSAwXG4gICAgICApLFxuXG4gICAgICBpbnB1dFJlZixcblxuICAgICAgZW1pdFZhbHVlLFxuXG4gICAgICBoYXNWYWx1ZSxcblxuICAgICAgZmxvYXRpbmdMYWJlbDogY29tcHV0ZWQoKCkgPT5cbiAgICAgICAgKFxuICAgICAgICAgIGhhc1ZhbHVlLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgJiYgKHByb3BzLnR5cGUgIT09ICdudW1iZXInIHx8IGlzTmFOKGlubmVyVmFsdWUudmFsdWUpID09PSBmYWxzZSlcbiAgICAgICAgKVxuICAgICAgICB8fCBmaWVsZFZhbHVlSXNGaWxsZWQocHJvcHMuZGlzcGxheVZhbHVlKVxuICAgICAgKSxcblxuICAgICAgZ2V0Q29udHJvbDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gaChpc1RleHRhcmVhLnZhbHVlID09PSB0cnVlID8gJ3RleHRhcmVhJyA6ICdpbnB1dCcsIHtcbiAgICAgICAgICByZWY6IGlucHV0UmVmLFxuICAgICAgICAgIGNsYXNzOiBbXG4gICAgICAgICAgICAncS1maWVsZF9fbmF0aXZlIHEtcGxhY2Vob2xkZXInLFxuICAgICAgICAgICAgcHJvcHMuaW5wdXRDbGFzc1xuICAgICAgICAgIF0sXG4gICAgICAgICAgc3R5bGU6IHByb3BzLmlucHV0U3R5bGUsXG4gICAgICAgICAgLi4uaW5wdXRBdHRycy52YWx1ZSxcbiAgICAgICAgICAuLi5vbkV2ZW50cy52YWx1ZSxcbiAgICAgICAgICAuLi4oXG4gICAgICAgICAgICBwcm9wcy50eXBlICE9PSAnZmlsZSdcbiAgICAgICAgICAgICAgPyB7IHZhbHVlOiBnZXRDdXJWYWx1ZSgpIH1cbiAgICAgICAgICAgICAgOiBmb3JtRG9tUHJvcHMudmFsdWVcbiAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgICB9LFxuXG4gICAgICBnZXRTaGFkb3dDb250cm9sOiAoKSA9PiB7XG4gICAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWZpZWxkX19uYXRpdmUgcS1maWVsZF9fc2hhZG93IGFic29sdXRlLWJvdHRvbSBuby1wb2ludGVyLWV2ZW50cydcbiAgICAgICAgICAgICsgKGlzVGV4dGFyZWEudmFsdWUgPT09IHRydWUgPyAnJyA6ICcgdGV4dC1uby13cmFwJylcbiAgICAgICAgfSwgW1xuICAgICAgICAgIGgoJ3NwYW4nLCB7IGNsYXNzOiAnaW52aXNpYmxlJyB9LCBnZXRDdXJWYWx1ZSgpKSxcbiAgICAgICAgICBoKCdzcGFuJywgcHJvcHMuc2hhZG93VGV4dClcbiAgICAgICAgXSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgcmVuZGVyRm4gPSB1c2VGaWVsZChzdGF0ZSlcblxuICAgIC8vIGV4cG9zZSBwdWJsaWMgbWV0aG9kc1xuICAgIE9iamVjdC5hc3NpZ24ocHJveHksIHtcbiAgICAgIGZvY3VzLFxuICAgICAgc2VsZWN0LFxuICAgICAgZ2V0TmF0aXZlRWxlbWVudDogKCkgPT4gaW5wdXRSZWYudmFsdWUgLy8gZGVwcmVjYXRlZFxuICAgIH0pXG5cbiAgICBpbmplY3RQcm9wKHByb3h5LCAnbmF0aXZlRWwnLCAoKSA9PiBpbnB1dFJlZi52YWx1ZSlcblxuICAgIHJldHVybiByZW5kZXJGblxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQsIHJlZiB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHByb3BzLCByb290UmVmKSB7XG4gIGNvbnN0IHJlZm9jdXNSZWYgPSByZWYobnVsbClcblxuICBjb25zdCByZWZvY3VzVGFyZ2V0RWwgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgaWYgKHByb3BzLmRpc2FibGUgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIGgoJ3NwYW4nLCB7XG4gICAgICByZWY6IHJlZm9jdXNSZWYsXG4gICAgICBjbGFzczogJ25vLW91dGxpbmUnLFxuICAgICAgdGFiaW5kZXg6IC0xXG4gICAgfSlcbiAgfSlcblxuICBmdW5jdGlvbiByZWZvY3VzVGFyZ2V0IChlKSB7XG4gICAgY29uc3Qgcm9vdCA9IHJvb3RSZWYudmFsdWVcblxuICAgIGlmIChlPy5xQXZvaWRGb2N1cyA9PT0gdHJ1ZSkgcmV0dXJuXG5cbiAgICBpZiAoZT8udHlwZS5pbmRleE9mKCdrZXknKSA9PT0gMCkge1xuICAgICAgaWYgKFxuICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSByb290XG4gICAgICAgICYmIHJvb3Q/LmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpID09PSB0cnVlXG4gICAgICApIHtcbiAgICAgICAgcm9vdC5mb2N1cygpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKFxuICAgICAgcmVmb2N1c1JlZi52YWx1ZSAhPT0gbnVsbFxuICAgICAgJiYgKChlID09PSB2b2lkIDApIHx8IChyb290Py5jb250YWlucyhlLnRhcmdldCkgPT09IHRydWUpKVxuICAgICkge1xuICAgICAgcmVmb2N1c1JlZi52YWx1ZS5mb2N1cygpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZWZvY3VzVGFyZ2V0RWwsXG4gICAgcmVmb2N1c1RhcmdldFxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIHhzOiAzMCxcbiAgc206IDM1LFxuICBtZDogNDAsXG4gIGxnOiA1MCxcbiAgeGw6IDYwXG59XG4iLCJpbXBvcnQgeyBoLCByZWYsIGNvbXB1dGVkLCBnZXRDdXJyZW50SW5zdGFuY2UsIHRvUmF3IH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUUljb24gZnJvbSAnLi4vaWNvbi9RSWNvbi5qcydcblxuaW1wb3J0IHVzZURhcmssIHsgdXNlRGFya1Byb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS51c2UtZGFyay91c2UtZGFyay5qcydcbmltcG9ydCB1c2VTaXplLCB7IHVzZVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLXNpemUvdXNlLXNpemUuanMnXG5pbXBvcnQgdXNlUmVmb2N1c1RhcmdldCBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1yZWZvY3VzLXRhcmdldC91c2UtcmVmb2N1cy10YXJnZXQuanMnXG5pbXBvcnQgeyB1c2VGb3JtUHJvcHMsIHVzZUZvcm1JbmplY3QgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy91c2UtZm9ybS9wcml2YXRlLnVzZS1mb3JtLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNyZWF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgb3B0aW9uU2l6ZXMgZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5vcHRpb24tc2l6ZXMvb3B0aW9uLXNpemVzLmpzJ1xuaW1wb3J0IHsgc3RvcEFuZFByZXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudC9ldmVudC5qcydcbmltcG9ydCB7IGhTbG90LCBoTWVyZ2VTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5yZW5kZXIvcmVuZGVyLmpzJ1xuXG5jb25zdCBjcmVhdGVTdmcgPSAoKSA9PiBoKCdzdmcnLCB7XG4gIGtleTogJ3N2ZycsXG4gIGNsYXNzOiAncS1yYWRpb19fYmcgYWJzb2x1dGUgbm9uLXNlbGVjdGFibGUnLFxuICB2aWV3Qm94OiAnMCAwIDI0IDI0J1xufSwgW1xuICBoKCdwYXRoJywge1xuICAgIGQ6ICdNMTIsMjJhMTAsMTAgMCAwIDEgLTEwLC0xMGExMCwxMCAwIDAgMSAxMCwtMTBhMTAsMTAgMCAwIDEgMTAsMTBhMTAsMTAgMCAwIDEgLTEwLDEwbTAsLTIyYTEyLDEyIDAgMCAwIC0xMiwxMmExMiwxMiAwIDAgMCAxMiwxMmExMiwxMiAwIDAgMCAxMiwtMTJhMTIsMTIgMCAwIDAgLTEyLC0xMidcbiAgfSksXG5cbiAgaCgncGF0aCcsIHtcbiAgICBjbGFzczogJ3EtcmFkaW9fX2NoZWNrJyxcbiAgICBkOiAnTTEyLDZhNiw2IDAgMCAwIC02LDZhNiw2IDAgMCAwIDYsNmE2LDYgMCAwIDAgNiwtNmE2LDYgMCAwIDAgLTYsLTYnXG4gIH0pXG5dKVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUVJhZGlvJyxcblxuICBwcm9wczoge1xuICAgIC4uLnVzZURhcmtQcm9wcyxcbiAgICAuLi51c2VTaXplUHJvcHMsXG4gICAgLi4udXNlRm9ybVByb3BzLFxuXG4gICAgbW9kZWxWYWx1ZTogeyByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHZhbDogeyByZXF1aXJlZDogdHJ1ZSB9LFxuXG4gICAgbGFiZWw6IFN0cmluZyxcbiAgICBsZWZ0TGFiZWw6IEJvb2xlYW4sXG5cbiAgICBjaGVja2VkSWNvbjogU3RyaW5nLFxuICAgIHVuY2hlY2tlZEljb246IFN0cmluZyxcblxuICAgIGNvbG9yOiBTdHJpbmcsXG4gICAga2VlcENvbG9yOiBCb29sZWFuLFxuICAgIGRlbnNlOiBCb29sZWFuLFxuXG4gICAgZGlzYWJsZTogQm9vbGVhbixcbiAgICB0YWJpbmRleDogWyBTdHJpbmcsIE51bWJlciBdXG4gIH0sXG5cbiAgZW1pdHM6IFsgJ3VwZGF0ZTptb2RlbFZhbHVlJyBdLFxuXG4gIHNldHVwIChwcm9wcywgeyBzbG90cywgZW1pdCB9KSB7XG4gICAgY29uc3QgeyBwcm94eSB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcblxuICAgIGNvbnN0IGlzRGFyayA9IHVzZURhcmsocHJvcHMsIHByb3h5LiRxKVxuICAgIGNvbnN0IHNpemVTdHlsZSA9IHVzZVNpemUocHJvcHMsIG9wdGlvblNpemVzKVxuXG4gICAgY29uc3Qgcm9vdFJlZiA9IHJlZihudWxsKVxuICAgIGNvbnN0IHsgcmVmb2N1c1RhcmdldEVsLCByZWZvY3VzVGFyZ2V0IH0gPSB1c2VSZWZvY3VzVGFyZ2V0KHByb3BzLCByb290UmVmKVxuXG4gICAgY29uc3QgaXNUcnVlID0gY29tcHV0ZWQoKCkgPT4gdG9SYXcocHJvcHMubW9kZWxWYWx1ZSkgPT09IHRvUmF3KHByb3BzLnZhbCkpXG5cbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICdxLXJhZGlvIGN1cnNvci1wb2ludGVyIG5vLW91dGxpbmUgcm93IGlubGluZSBuby13cmFwIGl0ZW1zLWNlbnRlcidcbiAgICAgICsgKHByb3BzLmRpc2FibGUgPT09IHRydWUgPyAnIGRpc2FibGVkJyA6ICcnKVxuICAgICAgKyAoaXNEYXJrLnZhbHVlID09PSB0cnVlID8gJyBxLXJhZGlvLS1kYXJrJyA6ICcnKVxuICAgICAgKyAocHJvcHMuZGVuc2UgPT09IHRydWUgPyAnIHEtcmFkaW8tLWRlbnNlJyA6ICcnKVxuICAgICAgKyAocHJvcHMubGVmdExhYmVsID09PSB0cnVlID8gJyByZXZlcnNlJyA6ICcnKVxuICAgIClcblxuICAgIGNvbnN0IGlubmVyQ2xhc3MgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICBjb25zdCBjb2xvciA9IHByb3BzLmNvbG9yICE9PSB2b2lkIDAgJiYgKFxuICAgICAgICBwcm9wcy5rZWVwQ29sb3IgPT09IHRydWVcbiAgICAgICAgfHwgaXNUcnVlLnZhbHVlID09PSB0cnVlXG4gICAgICApXG4gICAgICAgID8gYCB0ZXh0LSR7IHByb3BzLmNvbG9yIH1gXG4gICAgICAgIDogJydcblxuICAgICAgcmV0dXJuICdxLXJhZGlvX19pbm5lciByZWxhdGl2ZS1wb3NpdGlvbiAnXG4gICAgICAgICsgYHEtcmFkaW9fX2lubmVyLS0keyBpc1RydWUudmFsdWUgPT09IHRydWUgPyAndHJ1dGh5JyA6ICdmYWxzeScgfSR7IGNvbG9yIH1gXG4gICAgfSlcblxuICAgIGNvbnN0IGljb24gPSBjb21wdXRlZCgoKSA9PlxuICAgICAgKGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICA/IHByb3BzLmNoZWNrZWRJY29uXG4gICAgICAgIDogcHJvcHMudW5jaGVja2VkSWNvblxuICAgICAgKSB8fCBudWxsXG4gICAgKVxuXG4gICAgY29uc3QgdGFiaW5kZXggPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBwcm9wcy5kaXNhYmxlID09PSB0cnVlID8gLTEgOiBwcm9wcy50YWJpbmRleCB8fCAwXG4gICAgKSlcblxuICAgIGNvbnN0IGZvcm1BdHRycyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGNvbnN0IHByb3AgPSB7IHR5cGU6ICdyYWRpbycgfVxuXG4gICAgICBwcm9wcy5uYW1lICE9PSB2b2lkIDAgJiYgT2JqZWN0LmFzc2lnbihwcm9wLCB7XG4gICAgICAgIC8vIHNlZSBodHRwczovL3Z1ZWpzLm9yZy9ndWlkZS9leHRyYXMvcmVuZGVyLWZ1bmN0aW9uLmh0bWwjY3JlYXRpbmctdm5vZGVzICgucHJvcClcbiAgICAgICAgJy5jaGVja2VkJzogaXNUcnVlLnZhbHVlID09PSB0cnVlLFxuICAgICAgICAnXmNoZWNrZWQnOiBpc1RydWUudmFsdWUgPT09IHRydWUgPyAnY2hlY2tlZCcgOiB2b2lkIDAsXG4gICAgICAgIG5hbWU6IHByb3BzLm5hbWUsXG4gICAgICAgIHZhbHVlOiBwcm9wcy52YWxcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBwcm9wXG4gICAgfSlcblxuICAgIGNvbnN0IGluamVjdEZvcm1JbnB1dCA9IHVzZUZvcm1JbmplY3QoZm9ybUF0dHJzKVxuXG4gICAgZnVuY3Rpb24gb25DbGljayAoZSkge1xuICAgICAgaWYgKGUgIT09IHZvaWQgMCkge1xuICAgICAgICBzdG9wQW5kUHJldmVudChlKVxuICAgICAgICByZWZvY3VzVGFyZ2V0KGUpXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wcy5kaXNhYmxlICE9PSB0cnVlICYmIGlzVHJ1ZS52YWx1ZSAhPT0gdHJ1ZSkge1xuICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIHByb3BzLnZhbCwgZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbktleWRvd24gKGUpIHtcbiAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzIHx8IGUua2V5Q29kZSA9PT0gMzIpIHtcbiAgICAgICAgc3RvcEFuZFByZXZlbnQoZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbktleXVwIChlKSB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyB8fCBlLmtleUNvZGUgPT09IDMyKSB7XG4gICAgICAgIG9uQ2xpY2soZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgICBPYmplY3QuYXNzaWduKHByb3h5LCB7IHNldDogb25DbGljayB9KVxuXG4gICAgY29uc3Qgc3ZnID0gY3JlYXRlU3ZnKClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZW50ID0gaWNvbi52YWx1ZSAhPT0gbnVsbFxuICAgICAgICA/IFtcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAga2V5OiAnaWNvbicsXG4gICAgICAgICAgICAgIGNsYXNzOiAncS1yYWRpb19faWNvbi1jb250YWluZXIgYWJzb2x1dGUtZnVsbCBmbGV4IGZsZXgtY2VudGVyIG5vLXdyYXAnXG4gICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgIGgoUUljb24sIHtcbiAgICAgICAgICAgICAgICBjbGFzczogJ3EtcmFkaW9fX2ljb24nLFxuICAgICAgICAgICAgICAgIG5hbWU6IGljb24udmFsdWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgXVxuICAgICAgICA6IFsgc3ZnIF1cblxuICAgICAgcHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSAmJiBpbmplY3RGb3JtSW5wdXQoXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgICd1bnNoaWZ0JyxcbiAgICAgICAgJyBxLXJhZGlvX19uYXRpdmUgcS1tYS1ub25lIHEtcGEtbm9uZSdcbiAgICAgIClcblxuICAgICAgY29uc3QgY2hpbGQgPSBbXG4gICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogaW5uZXJDbGFzcy52YWx1ZSxcbiAgICAgICAgICBzdHlsZTogc2l6ZVN0eWxlLnZhbHVlLFxuICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgICAgICB9LCBjb250ZW50KVxuICAgICAgXVxuXG4gICAgICBpZiAocmVmb2N1c1RhcmdldEVsLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIGNoaWxkLnB1c2gocmVmb2N1c1RhcmdldEVsLnZhbHVlKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBsYWJlbCA9IHByb3BzLmxhYmVsICE9PSB2b2lkIDBcbiAgICAgICAgPyBoTWVyZ2VTbG90KHNsb3RzLmRlZmF1bHQsIFsgcHJvcHMubGFiZWwgXSlcbiAgICAgICAgOiBoU2xvdChzbG90cy5kZWZhdWx0KVxuXG4gICAgICBsYWJlbCAhPT0gdm9pZCAwICYmIGNoaWxkLnB1c2goXG4gICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogJ3EtcmFkaW9fX2xhYmVsIHEtYW5jaG9yLS1za2lwJ1xuICAgICAgICB9LCBsYWJlbClcbiAgICAgIClcblxuICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgcmVmOiByb290UmVmLFxuICAgICAgICBjbGFzczogY2xhc3Nlcy52YWx1ZSxcbiAgICAgICAgdGFiaW5kZXg6IHRhYmluZGV4LnZhbHVlLFxuICAgICAgICByb2xlOiAncmFkaW8nLFxuICAgICAgICAnYXJpYS1sYWJlbCc6IHByb3BzLmxhYmVsLFxuICAgICAgICAnYXJpYS1jaGVja2VkJzogaXNUcnVlLnZhbHVlID09PSB0cnVlID8gJ3RydWUnIDogJ2ZhbHNlJyxcbiAgICAgICAgJ2FyaWEtZGlzYWJsZWQnOiBwcm9wcy5kaXNhYmxlID09PSB0cnVlID8gJ3RydWUnIDogdm9pZCAwLFxuICAgICAgICBvbkNsaWNrLFxuICAgICAgICBvbktleWRvd24sXG4gICAgICAgIG9uS2V5dXBcbiAgICAgIH0sIGNoaWxkKVxuICAgIH1cbiAgfVxufSlcbiIsImltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSwgdG9SYXcgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1c2VEYXJrLCB7IHVzZURhcmtQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWRhcmsvdXNlLWRhcmsuanMnXG5pbXBvcnQgdXNlU2l6ZSwgeyB1c2VTaXplUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlLnVzZS1zaXplL3VzZS1zaXplLmpzJ1xuaW1wb3J0IHVzZVJlZm9jdXNUYXJnZXQgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS51c2UtcmVmb2N1cy10YXJnZXQvdXNlLXJlZm9jdXMtdGFyZ2V0LmpzJ1xuaW1wb3J0IHsgdXNlRm9ybUluamVjdCwgdXNlRm9ybVByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvdXNlLWZvcm0vcHJpdmF0ZS51c2UtZm9ybS5qcydcblxuaW1wb3J0IG9wdGlvblNpemVzIGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUub3B0aW9uLXNpemVzL29wdGlvbi1zaXplcy5qcydcbmltcG9ydCB7IHN0b3BBbmRQcmV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQvZXZlbnQuanMnXG5pbXBvcnQgeyBoU2xvdCwgaE1lcmdlU2xvdCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUucmVuZGVyL3JlbmRlci5qcydcblxuZXhwb3J0IGNvbnN0IHVzZUNoZWNrYm94UHJvcHMgPSB7XG4gIC4uLnVzZURhcmtQcm9wcyxcbiAgLi4udXNlU2l6ZVByb3BzLFxuICAuLi51c2VGb3JtUHJvcHMsXG5cbiAgbW9kZWxWYWx1ZToge1xuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIGRlZmF1bHQ6IG51bGxcbiAgfSxcbiAgdmFsOiB7fSxcblxuICB0cnVlVmFsdWU6IHsgZGVmYXVsdDogdHJ1ZSB9LFxuICBmYWxzZVZhbHVlOiB7IGRlZmF1bHQ6IGZhbHNlIH0sXG4gIGluZGV0ZXJtaW5hdGVWYWx1ZTogeyBkZWZhdWx0OiBudWxsIH0sXG5cbiAgY2hlY2tlZEljb246IFN0cmluZyxcbiAgdW5jaGVja2VkSWNvbjogU3RyaW5nLFxuICBpbmRldGVybWluYXRlSWNvbjogU3RyaW5nLFxuXG4gIHRvZ2dsZU9yZGVyOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHZhbGlkYXRvcjogdiA9PiB2ID09PSAndGYnIHx8IHYgPT09ICdmdCdcbiAgfSxcbiAgdG9nZ2xlSW5kZXRlcm1pbmF0ZTogQm9vbGVhbixcblxuICBsYWJlbDogU3RyaW5nLFxuICBsZWZ0TGFiZWw6IEJvb2xlYW4sXG5cbiAgY29sb3I6IFN0cmluZyxcbiAga2VlcENvbG9yOiBCb29sZWFuLFxuICBkZW5zZTogQm9vbGVhbixcblxuICBkaXNhYmxlOiBCb29sZWFuLFxuICB0YWJpbmRleDogWyBTdHJpbmcsIE51bWJlciBdXG59XG5cbmV4cG9ydCBjb25zdCB1c2VDaGVja2JveEVtaXRzID0gWyAndXBkYXRlOm1vZGVsVmFsdWUnIF1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHR5cGUsIGdldElubmVyKSB7XG4gIGNvbnN0IHsgcHJvcHMsIHNsb3RzLCBlbWl0LCBwcm94eSB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcbiAgY29uc3QgeyAkcSB9ID0gcHJveHlcblxuICBjb25zdCBpc0RhcmsgPSB1c2VEYXJrKHByb3BzLCAkcSlcblxuICBjb25zdCByb290UmVmID0gcmVmKG51bGwpXG4gIGNvbnN0IHsgcmVmb2N1c1RhcmdldEVsLCByZWZvY3VzVGFyZ2V0IH0gPSB1c2VSZWZvY3VzVGFyZ2V0KHByb3BzLCByb290UmVmKVxuICBjb25zdCBzaXplU3R5bGUgPSB1c2VTaXplKHByb3BzLCBvcHRpb25TaXplcylcblxuICBjb25zdCBtb2RlbElzQXJyYXkgPSBjb21wdXRlZCgoKSA9PlxuICAgIHByb3BzLnZhbCAhPT0gdm9pZCAwICYmIEFycmF5LmlzQXJyYXkocHJvcHMubW9kZWxWYWx1ZSlcbiAgKVxuXG4gIGNvbnN0IGluZGV4ID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IHZhbCA9IHRvUmF3KHByb3BzLnZhbClcbiAgICByZXR1cm4gbW9kZWxJc0FycmF5LnZhbHVlID09PSB0cnVlXG4gICAgICA/IHByb3BzLm1vZGVsVmFsdWUuZmluZEluZGV4KG9wdCA9PiB0b1JhdyhvcHQpID09PSB2YWwpXG4gICAgICA6IC0xXG4gIH0pXG5cbiAgY29uc3QgaXNUcnVlID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIG1vZGVsSXNBcnJheS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgPyBpbmRleC52YWx1ZSAhPT0gLTFcbiAgICAgIDogdG9SYXcocHJvcHMubW9kZWxWYWx1ZSkgPT09IHRvUmF3KHByb3BzLnRydWVWYWx1ZSlcbiAgKSlcblxuICBjb25zdCBpc0ZhbHNlID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIG1vZGVsSXNBcnJheS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgPyBpbmRleC52YWx1ZSA9PT0gLTFcbiAgICAgIDogdG9SYXcocHJvcHMubW9kZWxWYWx1ZSkgPT09IHRvUmF3KHByb3BzLmZhbHNlVmFsdWUpXG4gICkpXG5cbiAgY29uc3QgaXNJbmRldGVybWluYXRlID0gY29tcHV0ZWQoKCkgPT5cbiAgICBpc1RydWUudmFsdWUgPT09IGZhbHNlICYmIGlzRmFsc2UudmFsdWUgPT09IGZhbHNlXG4gIClcblxuICBjb25zdCB0YWJpbmRleCA9IGNvbXB1dGVkKCgpID0+IChcbiAgICBwcm9wcy5kaXNhYmxlID09PSB0cnVlID8gLTEgOiBwcm9wcy50YWJpbmRleCB8fCAwXG4gICkpXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgYHEtJHsgdHlwZSB9IGN1cnNvci1wb2ludGVyIG5vLW91dGxpbmUgcm93IGlubGluZSBuby13cmFwIGl0ZW1zLWNlbnRlcmBcbiAgICArIChwcm9wcy5kaXNhYmxlID09PSB0cnVlID8gJyBkaXNhYmxlZCcgOiAnJylcbiAgICArIChpc0RhcmsudmFsdWUgPT09IHRydWUgPyBgIHEtJHsgdHlwZSB9LS1kYXJrYCA6ICcnKVxuICAgICsgKHByb3BzLmRlbnNlID09PSB0cnVlID8gYCBxLSR7IHR5cGUgfS0tZGVuc2VgIDogJycpXG4gICAgKyAocHJvcHMubGVmdExhYmVsID09PSB0cnVlID8gJyByZXZlcnNlJyA6ICcnKVxuICApXG5cbiAgY29uc3QgaW5uZXJDbGFzcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZSA/ICd0cnV0aHknIDogKGlzRmFsc2UudmFsdWUgPT09IHRydWUgPyAnZmFsc3knIDogJ2luZGV0JylcbiAgICBjb25zdCBjb2xvciA9IHByb3BzLmNvbG9yICE9PSB2b2lkIDAgJiYgKFxuICAgICAgcHJvcHMua2VlcENvbG9yID09PSB0cnVlXG4gICAgICB8fCAodHlwZSA9PT0gJ3RvZ2dsZScgPyBpc1RydWUudmFsdWUgPT09IHRydWUgOiBpc0ZhbHNlLnZhbHVlICE9PSB0cnVlKVxuICAgIClcbiAgICAgID8gYCB0ZXh0LSR7IHByb3BzLmNvbG9yIH1gXG4gICAgICA6ICcnXG5cbiAgICByZXR1cm4gYHEtJHsgdHlwZSB9X19pbm5lciByZWxhdGl2ZS1wb3NpdGlvbiBub24tc2VsZWN0YWJsZSBxLSR7IHR5cGUgfV9faW5uZXItLSR7IHN0YXRlIH0keyBjb2xvciB9YFxuICB9KVxuXG4gIGNvbnN0IGZvcm1BdHRycyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBjb25zdCBwcm9wID0geyB0eXBlOiAnY2hlY2tib3gnIH1cblxuICAgIHByb3BzLm5hbWUgIT09IHZvaWQgMCAmJiBPYmplY3QuYXNzaWduKHByb3AsIHtcbiAgICAgIC8vIHNlZSBodHRwczovL3Z1ZWpzLm9yZy9ndWlkZS9leHRyYXMvcmVuZGVyLWZ1bmN0aW9uLmh0bWwjY3JlYXRpbmctdm5vZGVzICgucHJvcClcbiAgICAgICcuY2hlY2tlZCc6IGlzVHJ1ZS52YWx1ZSxcbiAgICAgICdeY2hlY2tlZCc6IGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZSA/ICdjaGVja2VkJyA6IHZvaWQgMCxcbiAgICAgIG5hbWU6IHByb3BzLm5hbWUsXG4gICAgICB2YWx1ZTogbW9kZWxJc0FycmF5LnZhbHVlID09PSB0cnVlXG4gICAgICAgID8gcHJvcHMudmFsXG4gICAgICAgIDogcHJvcHMudHJ1ZVZhbHVlXG4gICAgfSlcblxuICAgIHJldHVybiBwcm9wXG4gIH0pXG5cbiAgY29uc3QgaW5qZWN0Rm9ybUlucHV0ID0gdXNlRm9ybUluamVjdChmb3JtQXR0cnMpXG5cbiAgY29uc3QgYXR0cmlidXRlcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBjb25zdCBhdHRycyA9IHtcbiAgICAgIHRhYmluZGV4OiB0YWJpbmRleC52YWx1ZSxcbiAgICAgIHJvbGU6IHR5cGUgPT09ICd0b2dnbGUnID8gJ3N3aXRjaCcgOiAnY2hlY2tib3gnLFxuICAgICAgJ2FyaWEtbGFiZWwnOiBwcm9wcy5sYWJlbCxcbiAgICAgICdhcmlhLWNoZWNrZWQnOiBpc0luZGV0ZXJtaW5hdGUudmFsdWUgPT09IHRydWVcbiAgICAgICAgPyAnbWl4ZWQnXG4gICAgICAgIDogKGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZSA/ICd0cnVlJyA6ICdmYWxzZScpXG4gICAgfVxuXG4gICAgaWYgKHByb3BzLmRpc2FibGUgPT09IHRydWUpIHtcbiAgICAgIGF0dHJzWyAnYXJpYS1kaXNhYmxlZCcgXSA9ICd0cnVlJ1xuICAgIH1cblxuICAgIHJldHVybiBhdHRyc1xuICB9KVxuXG4gIGZ1bmN0aW9uIG9uQ2xpY2sgKGUpIHtcbiAgICBpZiAoZSAhPT0gdm9pZCAwKSB7XG4gICAgICBzdG9wQW5kUHJldmVudChlKVxuICAgICAgcmVmb2N1c1RhcmdldChlKVxuICAgIH1cblxuICAgIGlmIChwcm9wcy5kaXNhYmxlICE9PSB0cnVlKSB7XG4gICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIGdldE5leHRWYWx1ZSgpLCBlKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE5leHRWYWx1ZSAoKSB7XG4gICAgaWYgKG1vZGVsSXNBcnJheS52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCB2YWwgPSBwcm9wcy5tb2RlbFZhbHVlLnNsaWNlKClcbiAgICAgICAgdmFsLnNwbGljZShpbmRleC52YWx1ZSwgMSlcbiAgICAgICAgcmV0dXJuIHZhbFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvcHMubW9kZWxWYWx1ZS5jb25jYXQoWyBwcm9wcy52YWwgXSlcbiAgICB9XG5cbiAgICBpZiAoaXNUcnVlLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBpZiAocHJvcHMudG9nZ2xlT3JkZXIgIT09ICdmdCcgfHwgcHJvcHMudG9nZ2xlSW5kZXRlcm1pbmF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHByb3BzLmZhbHNlVmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNGYWxzZS52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHByb3BzLnRvZ2dsZU9yZGVyID09PSAnZnQnIHx8IHByb3BzLnRvZ2dsZUluZGV0ZXJtaW5hdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBwcm9wcy50cnVlVmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gcHJvcHMudG9nZ2xlT3JkZXIgIT09ICdmdCdcbiAgICAgICAgPyBwcm9wcy50cnVlVmFsdWVcbiAgICAgICAgOiBwcm9wcy5mYWxzZVZhbHVlXG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3BzLmluZGV0ZXJtaW5hdGVWYWx1ZVxuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlkb3duIChlKSB7XG4gICAgaWYgKGUua2V5Q29kZSA9PT0gMTMgfHwgZS5rZXlDb2RlID09PSAzMikge1xuICAgICAgc3RvcEFuZFByZXZlbnQoZSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbktleXVwIChlKSB7XG4gICAgaWYgKGUua2V5Q29kZSA9PT0gMTMgfHwgZS5rZXlDb2RlID09PSAzMikge1xuICAgICAgb25DbGljayhlKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGdldElubmVyQ29udGVudCA9IGdldElubmVyKGlzVHJ1ZSwgaXNJbmRldGVybWluYXRlKVxuXG4gIC8vIGV4cG9zZSBwdWJsaWMgbWV0aG9kc1xuICBPYmplY3QuYXNzaWduKHByb3h5LCB7IHRvZ2dsZTogb25DbGljayB9KVxuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgY29uc3QgaW5uZXIgPSBnZXRJbm5lckNvbnRlbnQoKVxuXG4gICAgcHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSAmJiBpbmplY3RGb3JtSW5wdXQoXG4gICAgICBpbm5lcixcbiAgICAgICd1bnNoaWZ0JyxcbiAgICAgIGAgcS0keyB0eXBlIH1fX25hdGl2ZSBhYnNvbHV0ZSBxLW1hLW5vbmUgcS1wYS1ub25lYFxuICAgIClcblxuICAgIGNvbnN0IGNoaWxkID0gW1xuICAgICAgaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogaW5uZXJDbGFzcy52YWx1ZSxcbiAgICAgICAgc3R5bGU6IHNpemVTdHlsZS52YWx1ZSxcbiAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnXG4gICAgICB9LCBpbm5lcilcbiAgICBdXG5cbiAgICBpZiAocmVmb2N1c1RhcmdldEVsLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICBjaGlsZC5wdXNoKHJlZm9jdXNUYXJnZXRFbC52YWx1ZSlcbiAgICB9XG5cbiAgICBjb25zdCBsYWJlbCA9IHByb3BzLmxhYmVsICE9PSB2b2lkIDBcbiAgICAgID8gaE1lcmdlU2xvdChzbG90cy5kZWZhdWx0LCBbIHByb3BzLmxhYmVsIF0pXG4gICAgICA6IGhTbG90KHNsb3RzLmRlZmF1bHQpXG5cbiAgICBsYWJlbCAhPT0gdm9pZCAwICYmIGNoaWxkLnB1c2goXG4gICAgICBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiBgcS0keyB0eXBlIH1fX2xhYmVsIHEtYW5jaG9yLS1za2lwYFxuICAgICAgfSwgbGFiZWwpXG4gICAgKVxuXG4gICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgIHJlZjogcm9vdFJlZixcbiAgICAgIGNsYXNzOiBjbGFzc2VzLnZhbHVlLFxuICAgICAgLi4uYXR0cmlidXRlcy52YWx1ZSxcbiAgICAgIG9uQ2xpY2ssXG4gICAgICBvbktleWRvd24sXG4gICAgICBvbktleXVwXG4gICAgfSwgY2hpbGQpXG4gIH1cbn1cbiIsImltcG9ydCB7IGgsIGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUUljb24gZnJvbSAnLi4vaWNvbi9RSWNvbi5qcydcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5jcmVhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHVzZUNoZWNrYm94LCB7IHVzZUNoZWNrYm94UHJvcHMsIHVzZUNoZWNrYm94RW1pdHMgfSBmcm9tICcuL3VzZS1jaGVja2JveC5qcydcblxuY29uc3QgY3JlYXRlQmdOb2RlID0gKCkgPT4gaCgnZGl2Jywge1xuICBrZXk6ICdzdmcnLFxuICBjbGFzczogJ3EtY2hlY2tib3hfX2JnIGFic29sdXRlJ1xufSwgW1xuICBoKCdzdmcnLCB7XG4gICAgY2xhc3M6ICdxLWNoZWNrYm94X19zdmcgZml0IGFic29sdXRlLWZ1bGwnLFxuICAgIHZpZXdCb3g6ICcwIDAgMjQgMjQnXG4gIH0sIFtcbiAgICBoKCdwYXRoJywge1xuICAgICAgY2xhc3M6ICdxLWNoZWNrYm94X190cnV0aHknLFxuICAgICAgZmlsbDogJ25vbmUnLFxuICAgICAgZDogJ00xLjczLDEyLjkxIDguMSwxOS4yOCAyMi43OSw0LjU5J1xuICAgIH0pLFxuXG4gICAgaCgncGF0aCcsIHtcbiAgICAgIGNsYXNzOiAncS1jaGVja2JveF9faW5kZXQnLFxuICAgICAgZDogJ000LDE0SDIwVjEwSDQnXG4gICAgfSlcbiAgXSlcbl0pXG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdRQ2hlY2tib3gnLFxuXG4gIHByb3BzOiB1c2VDaGVja2JveFByb3BzLFxuICBlbWl0czogdXNlQ2hlY2tib3hFbWl0cyxcblxuICBzZXR1cCAocHJvcHMpIHtcbiAgICBjb25zdCBiZ05vZGUgPSBjcmVhdGVCZ05vZGUoKVxuXG4gICAgZnVuY3Rpb24gZ2V0SW5uZXIgKGlzVHJ1ZSwgaXNJbmRldGVybWluYXRlKSB7XG4gICAgICBjb25zdCBpY29uID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICAgKGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgID8gcHJvcHMuY2hlY2tlZEljb25cbiAgICAgICAgICA6IChpc0luZGV0ZXJtaW5hdGUudmFsdWUgPT09IHRydWVcbiAgICAgICAgICAgICAgPyBwcm9wcy5pbmRldGVybWluYXRlSWNvblxuICAgICAgICAgICAgICA6IHByb3BzLnVuY2hlY2tlZEljb25cbiAgICAgICAgICAgIClcbiAgICAgICAgKSB8fCBudWxsXG4gICAgICApXG5cbiAgICAgIHJldHVybiAoKSA9PiAoXG4gICAgICAgIGljb24udmFsdWUgIT09IG51bGxcbiAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGtleTogJ2ljb24nLFxuICAgICAgICAgICAgICAgIGNsYXNzOiAncS1jaGVja2JveF9faWNvbi1jb250YWluZXIgYWJzb2x1dGUtZnVsbCBmbGV4IGZsZXgtY2VudGVyIG5vLXdyYXAnXG4gICAgICAgICAgICAgIH0sIFtcbiAgICAgICAgICAgICAgICBoKFFJY29uLCB7XG4gICAgICAgICAgICAgICAgICBjbGFzczogJ3EtY2hlY2tib3hfX2ljb24nLFxuICAgICAgICAgICAgICAgICAgbmFtZTogaWNvbi52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbIGJnTm9kZSBdXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIHVzZUNoZWNrYm94KCdjaGVja2JveCcsIGdldElubmVyKVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBRSWNvbiBmcm9tICcuLi9pY29uL1FJY29uLmpzJ1xuXG5pbXBvcnQgdXNlQ2hlY2tib3gsIHsgdXNlQ2hlY2tib3hQcm9wcywgdXNlQ2hlY2tib3hFbWl0cyB9IGZyb20gJy4uL2NoZWNrYm94L3VzZS1jaGVja2JveC5qcydcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS5jcmVhdGUvY3JlYXRlLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUVRvZ2dsZScsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VDaGVja2JveFByb3BzLFxuXG4gICAgaWNvbjogU3RyaW5nLFxuICAgIGljb25Db2xvcjogU3RyaW5nXG4gIH0sXG5cbiAgZW1pdHM6IHVzZUNoZWNrYm94RW1pdHMsXG5cbiAgc2V0dXAgKHByb3BzKSB7XG4gICAgZnVuY3Rpb24gZ2V0SW5uZXIgKGlzVHJ1ZSwgaXNJbmRldGVybWluYXRlKSB7XG4gICAgICBjb25zdCBpY29uID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICAgKGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgID8gcHJvcHMuY2hlY2tlZEljb25cbiAgICAgICAgICA6IChpc0luZGV0ZXJtaW5hdGUudmFsdWUgPT09IHRydWUgPyBwcm9wcy5pbmRldGVybWluYXRlSWNvbiA6IHByb3BzLnVuY2hlY2tlZEljb24pXG4gICAgICAgICkgfHwgcHJvcHMuaWNvblxuICAgICAgKVxuXG4gICAgICBjb25zdCBjb2xvciA9IGNvbXB1dGVkKCgpID0+IChpc1RydWUudmFsdWUgPT09IHRydWUgPyBwcm9wcy5pY29uQ29sb3IgOiBudWxsKSlcblxuICAgICAgcmV0dXJuICgpID0+IFtcbiAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3EtdG9nZ2xlX190cmFjaycgfSksXG5cbiAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAncS10b2dnbGVfX3RodW1iIGFic29sdXRlIGZsZXggZmxleC1jZW50ZXIgbm8td3JhcCdcbiAgICAgICAgfSwgaWNvbi52YWx1ZSAhPT0gdm9pZCAwXG4gICAgICAgICAgPyBbXG4gICAgICAgICAgICAgIGgoUUljb24sIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBpY29uLnZhbHVlLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvci52YWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICAgIDogdm9pZCAwXG4gICAgICAgIClcbiAgICAgIF1cbiAgICB9XG5cbiAgICByZXR1cm4gdXNlQ2hlY2tib3goJ3RvZ2dsZScsIGdldElubmVyKVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFSYWRpbyBmcm9tICcuLi9yYWRpby9RUmFkaW8uanMnXG5pbXBvcnQgUUNoZWNrYm94IGZyb20gJy4uL2NoZWNrYm94L1FDaGVja2JveC5qcydcbmltcG9ydCBRVG9nZ2xlIGZyb20gJy4uL3RvZ2dsZS9RVG9nZ2xlLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNyZWF0ZS9jcmVhdGUuanMnXG5cbmltcG9ydCB1c2VEYXJrLCB7IHVzZURhcmtQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWRhcmsvdXNlLWRhcmsuanMnXG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4uLy4uL3V0aWxzL2lzL2lzLmpzJ1xuXG5jb25zdCBjb21wb25lbnRzID0ge1xuICByYWRpbzogUVJhZGlvLFxuICBjaGVja2JveDogUUNoZWNrYm94LFxuICB0b2dnbGU6IFFUb2dnbGVcbn1cblxuY29uc3QgdHlwZVZhbHVlcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudHMpXG5cbmZ1bmN0aW9uIGdldFByb3BWYWx1ZUZuICh1c2VyUHJvcE5hbWUsIGRlZmF1bHRQcm9wTmFtZSkge1xuICBpZiAodHlwZW9mIHVzZXJQcm9wTmFtZSA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIHVzZXJQcm9wTmFtZVxuXG4gIGNvbnN0IHByb3BOYW1lID0gdXNlclByb3BOYW1lICE9PSB2b2lkIDBcbiAgICA/IHVzZXJQcm9wTmFtZVxuICAgIDogZGVmYXVsdFByb3BOYW1lXG5cbiAgcmV0dXJuIG9wdCA9PiBvcHRbIHByb3BOYW1lIF1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FPcHRpb25Hcm91cCcsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VEYXJrUHJvcHMsXG5cbiAgICBtb2RlbFZhbHVlOiB7XG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgb3B0aW9uczoge1xuICAgICAgdHlwZTogQXJyYXksXG4gICAgICB2YWxpZGF0b3I6IG9wdHMgPT4gb3B0cy5ldmVyeShpc09iamVjdCksXG4gICAgICBkZWZhdWx0OiAoKSA9PiBbXVxuICAgIH0sXG5cbiAgICBvcHRpb25WYWx1ZTogWyBGdW5jdGlvbiwgU3RyaW5nIF0sXG4gICAgb3B0aW9uTGFiZWw6IFsgRnVuY3Rpb24sIFN0cmluZyBdLFxuICAgIG9wdGlvbkRpc2FibGU6IFsgRnVuY3Rpb24sIFN0cmluZyBdLFxuXG4gICAgbmFtZTogU3RyaW5nLFxuXG4gICAgdHlwZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ3JhZGlvJyxcbiAgICAgIHZhbGlkYXRvcjogdiA9PiB0eXBlVmFsdWVzLmluY2x1ZGVzKHYpXG4gICAgfSxcblxuICAgIGNvbG9yOiBTdHJpbmcsXG4gICAga2VlcENvbG9yOiBCb29sZWFuLFxuICAgIGRlbnNlOiBCb29sZWFuLFxuXG4gICAgc2l6ZTogU3RyaW5nLFxuXG4gICAgbGVmdExhYmVsOiBCb29sZWFuLFxuICAgIGlubGluZTogQm9vbGVhbixcbiAgICBkaXNhYmxlOiBCb29sZWFuXG4gIH0sXG5cbiAgZW1pdHM6IFsgJ3VwZGF0ZTptb2RlbFZhbHVlJyBdLFxuXG4gIHNldHVwIChwcm9wcywgeyBlbWl0LCBzbG90cyB9KSB7XG4gICAgY29uc3QgeyBwcm94eTogeyAkcSB9IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuXG4gICAgY29uc3QgYXJyYXlNb2RlbCA9IEFycmF5LmlzQXJyYXkocHJvcHMubW9kZWxWYWx1ZSlcblxuICAgIGlmIChwcm9wcy50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICBpZiAoYXJyYXlNb2RlbCA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdxLW9wdGlvbi1ncm91cDogbW9kZWwgc2hvdWxkIG5vdCBiZSBhcnJheScpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGFycmF5TW9kZWwgPT09IGZhbHNlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdxLW9wdGlvbi1ncm91cDogbW9kZWwgc2hvdWxkIGJlIGFycmF5IGluIHlvdXIgY2FzZScpXG4gICAgfVxuXG4gICAgY29uc3QgaXNEYXJrID0gdXNlRGFyayhwcm9wcywgJHEpXG4gICAgY29uc3QgY29tcG9uZW50ID0gY29tcHV0ZWQoKCkgPT4gY29tcG9uZW50c1sgcHJvcHMudHlwZSBdKVxuXG4gICAgY29uc3QgZ2V0T3B0aW9uVmFsdWUgPSBjb21wdXRlZCgoKSA9PiBnZXRQcm9wVmFsdWVGbihwcm9wcy5vcHRpb25WYWx1ZSwgJ3ZhbHVlJykpXG4gICAgY29uc3QgZ2V0T3B0aW9uTGFiZWwgPSBjb21wdXRlZCgoKSA9PiBnZXRQcm9wVmFsdWVGbihwcm9wcy5vcHRpb25MYWJlbCwgJ2xhYmVsJykpXG4gICAgY29uc3QgZ2V0T3B0aW9uRGlzYWJsZSA9IGNvbXB1dGVkKCgpID0+IGdldFByb3BWYWx1ZUZuKHByb3BzLm9wdGlvbkRpc2FibGUsICdkaXNhYmxlJykpXG5cbiAgICBjb25zdCBpbm5lck9wdGlvbnMgPSBjb21wdXRlZCgoKSA9PiBwcm9wcy5vcHRpb25zLm1hcChvcHQgPT4gKHtcbiAgICAgIHZhbDogZ2V0T3B0aW9uVmFsdWUudmFsdWUob3B0KSxcbiAgICAgIG5hbWU6IG9wdC5uYW1lID09PSB2b2lkIDAgPyBwcm9wcy5uYW1lIDogb3B0Lm5hbWUsXG4gICAgICBkaXNhYmxlOiBwcm9wcy5kaXNhYmxlIHx8IGdldE9wdGlvbkRpc2FibGUudmFsdWUob3B0KSxcbiAgICAgIGxlZnRMYWJlbDogb3B0LmxlZnRMYWJlbCA9PT0gdm9pZCAwID8gcHJvcHMubGVmdExhYmVsIDogb3B0LmxlZnRMYWJlbCxcbiAgICAgIGNvbG9yOiBvcHQuY29sb3IgPT09IHZvaWQgMCA/IHByb3BzLmNvbG9yIDogb3B0LmNvbG9yLFxuICAgICAgY2hlY2tlZEljb246IG9wdC5jaGVja2VkSWNvbixcbiAgICAgIHVuY2hlY2tlZEljb246IG9wdC51bmNoZWNrZWRJY29uLFxuICAgICAgZGFyazogb3B0LmRhcmsgPT09IHZvaWQgMCA/IGlzRGFyay52YWx1ZSA6IG9wdC5kYXJrLFxuICAgICAgc2l6ZTogb3B0LnNpemUgPT09IHZvaWQgMCA/IHByb3BzLnNpemUgOiBvcHQuc2l6ZSxcbiAgICAgIGRlbnNlOiBwcm9wcy5kZW5zZSxcbiAgICAgIGtlZXBDb2xvcjogb3B0LmtlZXBDb2xvciA9PT0gdm9pZCAwID8gcHJvcHMua2VlcENvbG9yIDogb3B0LmtlZXBDb2xvclxuICAgIH0pKSlcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3Etb3B0aW9uLWdyb3VwIHEtZ3V0dGVyLXgtc20nXG4gICAgICArIChwcm9wcy5pbmxpbmUgPT09IHRydWUgPyAnIHEtb3B0aW9uLWdyb3VwLS1pbmxpbmUnIDogJycpXG4gICAgKVxuXG4gICAgY29uc3QgYXR0cnMgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICBjb25zdCBhdHRycyA9IHsgcm9sZTogJ2dyb3VwJyB9XG5cbiAgICAgIGlmIChwcm9wcy50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgIGF0dHJzLnJvbGUgPSAncmFkaW9ncm91cCdcblxuICAgICAgICBpZiAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGF0dHJzWyAnYXJpYS1kaXNhYmxlZCcgXSA9ICd0cnVlJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhdHRyc1xuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBvblVwZGF0ZU1vZGVsVmFsdWUgKHZhbHVlKSB7XG4gICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIHZhbHVlKVxuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiBoKCdkaXYnLCB7XG4gICAgICBjbGFzczogY2xhc3Nlcy52YWx1ZSxcbiAgICAgIC4uLmF0dHJzLnZhbHVlXG4gICAgfSwgcHJvcHMub3B0aW9ucy5tYXAoKG9wdCwgaSkgPT4ge1xuICAgICAgLy8gVE9ETzogKFF2MykgTWFrZSB0aGUgJ29wdCcgYSBzZXBhcmF0ZSBwcm9wZXJ0eSBpbnN0ZWFkIG9mXG4gICAgICAvLyB0aGUgd2hvbGUgc2NvcGUgZm9yIGNvbnNpc3RlbmN5IGFuZCBmbGV4aWJpbGl0eVxuICAgICAgLy8gKGUuZy4geyBvcHQgfSBpbnN0ZWFkIG9mIG9wdClcbiAgICAgIGNvbnN0IGNoaWxkID0gc2xvdHNbICdsYWJlbC0nICsgaSBdICE9PSB2b2lkIDBcbiAgICAgICAgPyAoKSA9PiBzbG90c1sgJ2xhYmVsLScgKyBpIF0ob3B0KVxuICAgICAgICA6IChcbiAgICAgICAgICAgIHNsb3RzLmxhYmVsICE9PSB2b2lkIDBcbiAgICAgICAgICAgICAgPyAoKSA9PiBzbG90cy5sYWJlbChvcHQpXG4gICAgICAgICAgICAgIDogdm9pZCAwXG4gICAgICAgICAgKVxuXG4gICAgICByZXR1cm4gaCgnZGl2JywgW1xuICAgICAgICBoKGNvbXBvbmVudC52YWx1ZSwge1xuICAgICAgICAgIGxhYmVsOiBjaGlsZCA9PT0gdm9pZCAwID8gZ2V0T3B0aW9uTGFiZWwudmFsdWUob3B0KSA6IG51bGwsXG4gICAgICAgICAgbW9kZWxWYWx1ZTogcHJvcHMubW9kZWxWYWx1ZSxcbiAgICAgICAgICAnb25VcGRhdGU6bW9kZWxWYWx1ZSc6IG9uVXBkYXRlTW9kZWxWYWx1ZSxcbiAgICAgICAgICAuLi5pbm5lck9wdGlvbnMudmFsdWVbIGkgXVxuICAgICAgICB9LCBjaGlsZClcbiAgICAgIF0pXG4gICAgfSkpXG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBoLCByZWYsIGNvbXB1dGVkLCB3YXRjaCwgdG9SYXcsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFEaWFsb2cgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9kaWFsb2cvUURpYWxvZy5qcydcbmltcG9ydCBRQnRuIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvYnRuL1FCdG4uanMnXG5cbmltcG9ydCBRQ2FyZCBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2NhcmQvUUNhcmQuanMnXG5pbXBvcnQgUUNhcmRTZWN0aW9uIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvY2FyZC9RQ2FyZFNlY3Rpb24uanMnXG5pbXBvcnQgUUNhcmRBY3Rpb25zIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvY2FyZC9RQ2FyZEFjdGlvbnMuanMnXG5pbXBvcnQgUVNlcGFyYXRvciBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL3NlcGFyYXRvci9RU2VwYXJhdG9yLmpzJ1xuXG5pbXBvcnQgUUlucHV0IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvaW5wdXQvUUlucHV0LmpzJ1xuaW1wb3J0IFFPcHRpb25Hcm91cCBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL29wdGlvbi1ncm91cC9RT3B0aW9uR3JvdXAuanMnXG5cbmltcG9ydCBRU3Bpbm5lciBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL3NwaW5uZXIvUVNwaW5uZXIuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3ByaXZhdGUuY3JlYXRlL2NyZWF0ZS5qcydcbmltcG9ydCB1c2VEYXJrLCB7IHVzZURhcmtQcm9wcyB9IGZyb20gJy4uLy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUudXNlLWRhcmsvdXNlLWRhcmsuanMnXG5cbmltcG9ydCB7IGlzS2V5Q29kZSB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3ByaXZhdGUua2V5Ym9hcmQva2V5LWNvbXBvc2l0aW9uLmpzJ1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuLi8uLi8uLi91dGlscy9pcy9pcy5qcydcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ0RpYWxvZ1BsdWdpbkNvbXBvbmVudCcsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VEYXJrUHJvcHMsXG5cbiAgICB0aXRsZTogU3RyaW5nLFxuICAgIG1lc3NhZ2U6IFN0cmluZyxcbiAgICBwcm9tcHQ6IE9iamVjdCxcbiAgICBvcHRpb25zOiBPYmplY3QsXG4gICAgcHJvZ3Jlc3M6IFsgQm9vbGVhbiwgT2JqZWN0IF0sXG5cbiAgICBodG1sOiBCb29sZWFuLFxuXG4gICAgb2s6IHtcbiAgICAgIHR5cGU6IFsgU3RyaW5nLCBPYmplY3QsIEJvb2xlYW4gXSxcbiAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LFxuICAgIGNhbmNlbDogWyBTdHJpbmcsIE9iamVjdCwgQm9vbGVhbiBdLFxuICAgIGZvY3VzOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnb2snLFxuICAgICAgdmFsaWRhdG9yOiB2ID0+IFsgJ29rJywgJ2NhbmNlbCcsICdub25lJyBdLmluY2x1ZGVzKHYpXG4gICAgfSxcblxuICAgIHN0YWNrQnV0dG9uczogQm9vbGVhbixcbiAgICBjb2xvcjogU3RyaW5nLFxuXG4gICAgY2FyZENsYXNzOiBbIFN0cmluZywgQXJyYXksIE9iamVjdCBdLFxuICAgIGNhcmRTdHlsZTogWyBTdHJpbmcsIEFycmF5LCBPYmplY3QgXVxuICB9LFxuXG4gIGVtaXRzOiBbICdvaycsICdoaWRlJyBdLFxuXG4gIHNldHVwIChwcm9wcywgeyBlbWl0IH0pIHtcbiAgICBjb25zdCB7IHByb3h5IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuICAgIGNvbnN0IHsgJHEgfSA9IHByb3h5XG5cbiAgICBjb25zdCBpc0RhcmsgPSB1c2VEYXJrKHByb3BzLCAkcSlcblxuICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHJlZihudWxsKVxuXG4gICAgY29uc3QgbW9kZWwgPSByZWYoXG4gICAgICBwcm9wcy5wcm9tcHQgIT09IHZvaWQgMFxuICAgICAgICA/IHByb3BzLnByb21wdC5tb2RlbFxuICAgICAgICA6IChwcm9wcy5vcHRpb25zICE9PSB2b2lkIDAgPyBwcm9wcy5vcHRpb25zLm1vZGVsIDogdm9pZCAwKVxuICAgIClcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3EtZGlhbG9nLXBsdWdpbidcbiAgICAgICsgKGlzRGFyay52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1kaWFsb2ctcGx1Z2luLS1kYXJrIHEtZGFyaycgOiAnJylcbiAgICAgICsgKHByb3BzLnByb2dyZXNzICE9PSBmYWxzZSA/ICcgcS1kaWFsb2ctcGx1Z2luLS1wcm9ncmVzcycgOiAnJylcbiAgICApXG5cbiAgICBjb25zdCB2bUNvbG9yID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIHByb3BzLmNvbG9yIHx8IChpc0RhcmsudmFsdWUgPT09IHRydWUgPyAnYW1iZXInIDogJ3ByaW1hcnknKVxuICAgIClcblxuICAgIGNvbnN0IHNwaW5uZXIgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBwcm9wcy5wcm9ncmVzcyA9PT0gZmFsc2VcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogKFxuICAgICAgICAgICAgaXNPYmplY3QocHJvcHMucHJvZ3Jlc3MpID09PSB0cnVlXG4gICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiBwcm9wcy5wcm9ncmVzcy5zcGlubmVyIHx8IFFTcGlubmVyLFxuICAgICAgICAgICAgICAgICAgcHJvcHM6IHsgY29sb3I6IHByb3BzLnByb2dyZXNzLmNvbG9yIHx8IHZtQ29sb3IudmFsdWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IFFTcGlubmVyLFxuICAgICAgICAgICAgICAgICAgcHJvcHM6IHsgY29sb3I6IHZtQ29sb3IudmFsdWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgKSlcblxuICAgIGNvbnN0IGhhc0Zvcm0gPSBjb21wdXRlZCgoKSA9PlxuICAgICAgcHJvcHMucHJvbXB0ICE9PSB2b2lkIDAgfHwgcHJvcHMub3B0aW9ucyAhPT0gdm9pZCAwXG4gICAgKVxuXG4gICAgY29uc3QgZm9ybVByb3BzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgaWYgKGhhc0Zvcm0udmFsdWUgIT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHt9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgbW9kZWwsIGlzVmFsaWQsIGl0ZW1zLCAuLi5mb3JtUHJvcHMgfSA9IHByb3BzLnByb21wdCAhPT0gdm9pZCAwXG4gICAgICAgID8gcHJvcHMucHJvbXB0XG4gICAgICAgIDogcHJvcHMub3B0aW9uc1xuXG4gICAgICByZXR1cm4gZm9ybVByb3BzXG4gICAgfSlcblxuICAgIGNvbnN0IG9rTGFiZWwgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBpc09iamVjdChwcm9wcy5vaykgPT09IHRydWVcbiAgICAgICAgPyAkcS5sYW5nLmxhYmVsLm9rXG4gICAgICAgIDogKFxuICAgICAgICAgICAgcHJvcHMub2sgPT09IHRydWVcbiAgICAgICAgICAgICAgPyAkcS5sYW5nLmxhYmVsLm9rXG4gICAgICAgICAgICAgIDogcHJvcHMub2tcbiAgICAgICAgICApXG4gICAgKSlcblxuICAgIGNvbnN0IGNhbmNlbExhYmVsID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgaXNPYmplY3QocHJvcHMuY2FuY2VsKSA9PT0gdHJ1ZVxuICAgICAgICA/ICRxLmxhbmcubGFiZWwuY2FuY2VsXG4gICAgICAgIDogKFxuICAgICAgICAgICAgcHJvcHMuY2FuY2VsID09PSB0cnVlXG4gICAgICAgICAgICAgID8gJHEubGFuZy5sYWJlbC5jYW5jZWxcbiAgICAgICAgICAgICAgOiBwcm9wcy5jYW5jZWxcbiAgICAgICAgICApXG4gICAgKSlcblxuICAgIGNvbnN0IG9rRGlzYWJsZWQgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICBpZiAocHJvcHMucHJvbXB0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIHByb3BzLnByb21wdC5pc1ZhbGlkICE9PSB2b2lkIDBcbiAgICAgICAgICAmJiBwcm9wcy5wcm9tcHQuaXNWYWxpZChtb2RlbC52YWx1ZSkgIT09IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wcy5vcHRpb25zICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIHByb3BzLm9wdGlvbnMuaXNWYWxpZCAhPT0gdm9pZCAwXG4gICAgICAgICAgJiYgcHJvcHMub3B0aW9ucy5pc1ZhbGlkKG1vZGVsLnZhbHVlKSAhPT0gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcblxuICAgIGNvbnN0IG9rUHJvcHMgPSBjb21wdXRlZCgoKSA9PiAoe1xuICAgICAgY29sb3I6IHZtQ29sb3IudmFsdWUsXG4gICAgICBsYWJlbDogb2tMYWJlbC52YWx1ZSxcbiAgICAgIHJpcHBsZTogZmFsc2UsXG4gICAgICBkaXNhYmxlOiBva0Rpc2FibGVkLnZhbHVlLFxuICAgICAgLi4uKGlzT2JqZWN0KHByb3BzLm9rKSA9PT0gdHJ1ZSA/IHByb3BzLm9rIDogeyBmbGF0OiB0cnVlIH0pLFxuICAgICAgJ2RhdGEtYXV0b2ZvY3VzJzogKHByb3BzLmZvY3VzID09PSAnb2snICYmIGhhc0Zvcm0udmFsdWUgIT09IHRydWUpIHx8IHZvaWQgMCxcbiAgICAgIG9uQ2xpY2s6IG9uT2tcbiAgICB9KSlcblxuICAgIGNvbnN0IGNhbmNlbFByb3BzID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgIGNvbG9yOiB2bUNvbG9yLnZhbHVlLFxuICAgICAgbGFiZWw6IGNhbmNlbExhYmVsLnZhbHVlLFxuICAgICAgcmlwcGxlOiBmYWxzZSxcbiAgICAgIC4uLihpc09iamVjdChwcm9wcy5jYW5jZWwpID09PSB0cnVlID8gcHJvcHMuY2FuY2VsIDogeyBmbGF0OiB0cnVlIH0pLFxuICAgICAgJ2RhdGEtYXV0b2ZvY3VzJzogKHByb3BzLmZvY3VzID09PSAnY2FuY2VsJyAmJiBoYXNGb3JtLnZhbHVlICE9PSB0cnVlKSB8fCB2b2lkIDAsXG4gICAgICBvbkNsaWNrOiBvbkNhbmNlbFxuICAgIH0pKVxuXG4gICAgd2F0Y2goKCkgPT4gcHJvcHMucHJvbXB0ICYmIHByb3BzLnByb21wdC5tb2RlbCwgb25VcGRhdGVNb2RlbClcbiAgICB3YXRjaCgoKSA9PiBwcm9wcy5vcHRpb25zICYmIHByb3BzLm9wdGlvbnMubW9kZWwsIG9uVXBkYXRlTW9kZWwpXG5cbiAgICBmdW5jdGlvbiBzaG93ICgpIHtcbiAgICAgIGRpYWxvZ1JlZi52YWx1ZS5zaG93KClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaWRlICgpIHtcbiAgICAgIGRpYWxvZ1JlZi52YWx1ZS5oaWRlKClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbk9rICgpIHtcbiAgICAgIGVtaXQoJ29rJywgdG9SYXcobW9kZWwudmFsdWUpKVxuICAgICAgaGlkZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25DYW5jZWwgKCkge1xuICAgICAgaGlkZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25EaWFsb2dIaWRlICgpIHtcbiAgICAgIGVtaXQoJ2hpZGUnKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uVXBkYXRlTW9kZWwgKHZhbCkge1xuICAgICAgbW9kZWwudmFsdWUgPSB2YWxcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbklucHV0S2V5dXAgKGV2dCkge1xuICAgICAgLy8gaWYgRU5URVIga2V5XG4gICAgICBpZiAoXG4gICAgICAgIG9rRGlzYWJsZWQudmFsdWUgIT09IHRydWVcbiAgICAgICAgJiYgcHJvcHMucHJvbXB0LnR5cGUgIT09ICd0ZXh0YXJlYSdcbiAgICAgICAgJiYgaXNLZXlDb2RlKGV2dCwgMTMpID09PSB0cnVlXG4gICAgICApIHtcbiAgICAgICAgb25PaygpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U2VjdGlvbiAoY2xhc3NlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHByb3BzLmh0bWwgPT09IHRydWVcbiAgICAgICAgPyBoKFFDYXJkU2VjdGlvbiwge1xuICAgICAgICAgIGNsYXNzOiBjbGFzc2VzLFxuICAgICAgICAgIGlubmVySFRNTDogdGV4dFxuICAgICAgICB9KVxuICAgICAgICA6IGgoUUNhcmRTZWN0aW9uLCB7IGNsYXNzOiBjbGFzc2VzIH0sICgpID0+IHRleHQpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UHJvbXB0ICgpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIGgoUUlucHV0LCB7XG4gICAgICAgICAgY29sb3I6IHZtQ29sb3IudmFsdWUsXG4gICAgICAgICAgZGVuc2U6IHRydWUsXG4gICAgICAgICAgYXV0b2ZvY3VzOiB0cnVlLFxuICAgICAgICAgIGRhcms6IGlzRGFyay52YWx1ZSxcbiAgICAgICAgICAuLi5mb3JtUHJvcHMudmFsdWUsXG4gICAgICAgICAgbW9kZWxWYWx1ZTogbW9kZWwudmFsdWUsXG4gICAgICAgICAgJ29uVXBkYXRlOm1vZGVsVmFsdWUnOiBvblVwZGF0ZU1vZGVsLFxuICAgICAgICAgIG9uS2V5dXA6IG9uSW5wdXRLZXl1cFxuICAgICAgICB9KVxuICAgICAgXVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE9wdGlvbnMgKCkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgaChRT3B0aW9uR3JvdXAsIHtcbiAgICAgICAgICBjb2xvcjogdm1Db2xvci52YWx1ZSxcbiAgICAgICAgICBvcHRpb25zOiBwcm9wcy5vcHRpb25zLml0ZW1zLFxuICAgICAgICAgIGRhcms6IGlzRGFyay52YWx1ZSxcbiAgICAgICAgICAuLi5mb3JtUHJvcHMudmFsdWUsXG4gICAgICAgICAgbW9kZWxWYWx1ZTogbW9kZWwudmFsdWUsXG4gICAgICAgICAgJ29uVXBkYXRlOm1vZGVsVmFsdWUnOiBvblVwZGF0ZU1vZGVsXG4gICAgICAgIH0pXG4gICAgICBdXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0QnV0dG9ucyAoKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IFtdXG5cbiAgICAgIHByb3BzLmNhbmNlbCAmJiBjaGlsZC5wdXNoKFxuICAgICAgICBoKFFCdG4sIGNhbmNlbFByb3BzLnZhbHVlKVxuICAgICAgKVxuXG4gICAgICBwcm9wcy5vayAmJiBjaGlsZC5wdXNoKFxuICAgICAgICBoKFFCdG4sIG9rUHJvcHMudmFsdWUpXG4gICAgICApXG5cbiAgICAgIHJldHVybiBoKFFDYXJkQWN0aW9ucywge1xuICAgICAgICBjbGFzczogcHJvcHMuc3RhY2tCdXR0b25zID09PSB0cnVlID8gJ2l0ZW1zLWVuZCcgOiAnJyxcbiAgICAgICAgdmVydGljYWw6IHByb3BzLnN0YWNrQnV0dG9ucyxcbiAgICAgICAgYWxpZ246ICdyaWdodCdcbiAgICAgIH0sICgpID0+IGNoaWxkKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENhcmRDb250ZW50ICgpIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gW11cblxuICAgICAgcHJvcHMudGl0bGUgJiYgY2hpbGQucHVzaChcbiAgICAgICAgZ2V0U2VjdGlvbigncS1kaWFsb2dfX3RpdGxlJywgcHJvcHMudGl0bGUpXG4gICAgICApXG5cbiAgICAgIHByb3BzLnByb2dyZXNzICE9PSBmYWxzZSAmJiBjaGlsZC5wdXNoKFxuICAgICAgICBoKFxuICAgICAgICAgIFFDYXJkU2VjdGlvbixcbiAgICAgICAgICB7IGNsYXNzOiAncS1kaWFsb2dfX3Byb2dyZXNzJyB9LFxuICAgICAgICAgICgpID0+IGgoc3Bpbm5lci52YWx1ZS5jb21wb25lbnQsIHNwaW5uZXIudmFsdWUucHJvcHMpXG4gICAgICAgIClcbiAgICAgIClcblxuICAgICAgcHJvcHMubWVzc2FnZSAmJiBjaGlsZC5wdXNoKFxuICAgICAgICBnZXRTZWN0aW9uKCdxLWRpYWxvZ19fbWVzc2FnZScsIHByb3BzLm1lc3NhZ2UpXG4gICAgICApXG5cbiAgICAgIGlmIChwcm9wcy5wcm9tcHQgIT09IHZvaWQgMCkge1xuICAgICAgICBjaGlsZC5wdXNoKFxuICAgICAgICAgIGgoXG4gICAgICAgICAgICBRQ2FyZFNlY3Rpb24sXG4gICAgICAgICAgICB7IGNsYXNzOiAnc2Nyb2xsIHEtZGlhbG9nLXBsdWdpbl9fZm9ybScgfSxcbiAgICAgICAgICAgIGdldFByb21wdFxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocHJvcHMub3B0aW9ucyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGNoaWxkLnB1c2goXG4gICAgICAgICAgaChRU2VwYXJhdG9yLCB7IGRhcms6IGlzRGFyay52YWx1ZSB9KSxcbiAgICAgICAgICBoKFxuICAgICAgICAgICAgUUNhcmRTZWN0aW9uLFxuICAgICAgICAgICAgeyBjbGFzczogJ3Njcm9sbCBxLWRpYWxvZy1wbHVnaW5fX2Zvcm0nIH0sXG4gICAgICAgICAgICBnZXRPcHRpb25zXG4gICAgICAgICAgKSxcbiAgICAgICAgICBoKFFTZXBhcmF0b3IsIHsgZGFyazogaXNEYXJrLnZhbHVlIH0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzLm9rIHx8IHByb3BzLmNhbmNlbCkge1xuICAgICAgICBjaGlsZC5wdXNoKGdldEJ1dHRvbnMoKSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNoaWxkXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29udGVudCAoKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBoKFFDYXJkLCB7XG4gICAgICAgICAgY2xhc3M6IFtcbiAgICAgICAgICAgIGNsYXNzZXMudmFsdWUsXG4gICAgICAgICAgICBwcm9wcy5jYXJkQ2xhc3NcbiAgICAgICAgICBdLFxuICAgICAgICAgIHN0eWxlOiBwcm9wcy5jYXJkU3R5bGUsXG4gICAgICAgICAgZGFyazogaXNEYXJrLnZhbHVlXG4gICAgICAgIH0sIGdldENhcmRDb250ZW50KVxuICAgICAgXVxuICAgIH1cblxuICAgIC8vIGV4cG9zZSBwdWJsaWMgbWV0aG9kc1xuICAgIE9iamVjdC5hc3NpZ24ocHJveHksIHsgc2hvdywgaGlkZSB9KVxuXG4gICAgcmV0dXJuICgpID0+IGgoUURpYWxvZywge1xuICAgICAgcmVmOiBkaWFsb2dSZWYsXG4gICAgICBvbkhpZGU6IG9uRGlhbG9nSGlkZVxuICAgIH0sIGdldENvbnRlbnQpXG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBoLCByZWYsIG5leHRUaWNrIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgeyBjcmVhdGVDaGlsZEFwcCB9IGZyb20gJy4uLy4uL2luc3RhbGwtcXVhc2FyLmpzJ1xuaW1wb3J0IHsgY3JlYXRlR2xvYmFsTm9kZSwgcmVtb3ZlR2xvYmFsTm9kZSB9IGZyb20gJy4uL3ByaXZhdGUuY29uZmlnL25vZGVzLmpzJ1xuXG5jb25zdCBzc3JBUEkgPSB7XG4gIG9uT2s6ICgpID0+IHNzckFQSSxcbiAgb25DYW5jZWw6ICgpID0+IHNzckFQSSxcbiAgb25EaXNtaXNzOiAoKSA9PiBzc3JBUEksXG4gIGhpZGU6ICgpID0+IHNzckFQSSxcbiAgdXBkYXRlOiAoKSA9PiBzc3JBUElcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlICh0YXJnZXQsIHNvdXJjZSkge1xuICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICBpZiAoa2V5ICE9PSAnc3Bpbm5lcicgJiYgT2JqZWN0KHNvdXJjZVsga2V5IF0pID09PSBzb3VyY2VbIGtleSBdKSB7XG4gICAgICB0YXJnZXRbIGtleSBdID0gT2JqZWN0KHRhcmdldFsga2V5IF0pICE9PSB0YXJnZXRbIGtleSBdXG4gICAgICAgID8ge31cbiAgICAgICAgOiB7IC4uLnRhcmdldFsga2V5IF0gfVxuXG4gICAgICBtZXJnZSh0YXJnZXRbIGtleSBdLCBzb3VyY2VbIGtleSBdKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRhcmdldFsga2V5IF0gPSBzb3VyY2VbIGtleSBdXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChEZWZhdWx0Q29tcG9uZW50LCBzdXBwb3J0c0N1c3RvbUNvbXBvbmVudCwgcGFyZW50QXBwKSB7XG4gIHJldHVybiBwbHVnaW5Qcm9wcyA9PiB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykgeyByZXR1cm4gc3NyQVBJIH1cblxuICAgIGxldCBEaWFsb2dDb21wb25lbnQsIHByb3BzXG4gICAgY29uc3QgaXNDdXN0b20gPSBzdXBwb3J0c0N1c3RvbUNvbXBvbmVudCA9PT0gdHJ1ZVxuICAgICAgJiYgcGx1Z2luUHJvcHMuY29tcG9uZW50ICE9PSB2b2lkIDBcblxuICAgIGlmIChpc0N1c3RvbSA9PT0gdHJ1ZSkge1xuICAgICAgY29uc3QgeyBjb21wb25lbnQsIGNvbXBvbmVudFByb3BzIH0gPSBwbHVnaW5Qcm9wc1xuXG4gICAgICBEaWFsb2dDb21wb25lbnQgPSAodHlwZW9mIGNvbXBvbmVudCA9PT0gJ3N0cmluZycpXG4gICAgICAgID8gcGFyZW50QXBwLmNvbXBvbmVudChjb21wb25lbnQpXG4gICAgICAgIDogY29tcG9uZW50XG5cbiAgICAgIHByb3BzID0gY29tcG9uZW50UHJvcHMgfHwge31cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCB7IGNsYXNzOiBrbGFzcywgc3R5bGUsIC4uLm90aGVyUHJvcHMgfSA9IHBsdWdpblByb3BzXG5cbiAgICAgIERpYWxvZ0NvbXBvbmVudCA9IERlZmF1bHRDb21wb25lbnRcbiAgICAgIHByb3BzID0gb3RoZXJQcm9wc1xuICAgICAga2xhc3MgIT09IHZvaWQgMCAmJiAob3RoZXJQcm9wcy5jYXJkQ2xhc3MgPSBrbGFzcylcbiAgICAgIHN0eWxlICE9PSB2b2lkIDAgJiYgKG90aGVyUHJvcHMuY2FyZFN0eWxlID0gc3R5bGUpXG4gICAgfVxuXG4gICAgbGV0IHZtLCBlbWl0dGVkT0sgPSBmYWxzZVxuICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHJlZihudWxsKVxuICAgIGNvbnN0IGVsID0gY3JlYXRlR2xvYmFsTm9kZShmYWxzZSwgJ2RpYWxvZycpXG5cbiAgICBjb25zdCBhcHBseVN0YXRlID0gY21kID0+IHtcbiAgICAgIGlmIChkaWFsb2dSZWYudmFsdWU/LlsgY21kIF0gIT09IHZvaWQgMCkge1xuICAgICAgICBkaWFsb2dSZWYudmFsdWVbIGNtZCBdKClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhcmdldCA9IHZtLiQuc3ViVHJlZVxuXG4gICAgICBpZiAodGFyZ2V0Py5jb21wb25lbnQpIHtcbiAgICAgICAgLy8gYWNjb3VudCBmb3IgXCJzY3JpcHQgc2V0dXBcIiB3YXkgb2YgZGVjbGFyaW5nIGNvbXBvbmVudFxuICAgICAgICBpZiAodGFyZ2V0LmNvbXBvbmVudC5wcm94eSAmJiB0YXJnZXQuY29tcG9uZW50LnByb3h5WyBjbWQgXSkge1xuICAgICAgICAgIHRhcmdldC5jb21wb25lbnQucHJveHlbIGNtZCBdKClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFjY291bnQgZm9yIFwic2NyaXB0IHNldHVwXCIgKyBhc3luYyBjb21wb25lbnQgd2F5IG9mIGRlY2xhcmluZyBjb21wb25lbnRcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRhcmdldC5jb21wb25lbnQuc3ViVHJlZVxuICAgICAgICAgICYmIHRhcmdldC5jb21wb25lbnQuc3ViVHJlZS5jb21wb25lbnRcbiAgICAgICAgICAmJiB0YXJnZXQuY29tcG9uZW50LnN1YlRyZWUuY29tcG9uZW50LnByb3h5XG4gICAgICAgICAgJiYgdGFyZ2V0LmNvbXBvbmVudC5zdWJUcmVlLmNvbXBvbmVudC5wcm94eVsgY21kIF1cbiAgICAgICAgKSB7XG4gICAgICAgICAgdGFyZ2V0LmNvbXBvbmVudC5zdWJUcmVlLmNvbXBvbmVudC5wcm94eVsgY21kIF0oKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tRdWFzYXJdIEluY29ycmVjdGx5IGRlZmluZWQgRGlhbG9nIGNvbXBvbmVudCcpXG4gICAgfVxuXG4gICAgY29uc3RcbiAgICAgIG9rRm5zID0gW10sXG4gICAgICBjYW5jZWxGbnMgPSBbXSxcbiAgICAgIEFQSSA9IHtcbiAgICAgICAgb25PayAoZm4pIHtcbiAgICAgICAgICBva0Zucy5wdXNoKGZuKVxuICAgICAgICAgIHJldHVybiBBUElcbiAgICAgICAgfSxcbiAgICAgICAgb25DYW5jZWwgKGZuKSB7XG4gICAgICAgICAgY2FuY2VsRm5zLnB1c2goZm4pXG4gICAgICAgICAgcmV0dXJuIEFQSVxuICAgICAgICB9LFxuICAgICAgICBvbkRpc21pc3MgKGZuKSB7XG4gICAgICAgICAgb2tGbnMucHVzaChmbilcbiAgICAgICAgICBjYW5jZWxGbnMucHVzaChmbilcbiAgICAgICAgICByZXR1cm4gQVBJXG4gICAgICAgIH0sXG4gICAgICAgIGhpZGUgKCkge1xuICAgICAgICAgIGFwcGx5U3RhdGUoJ2hpZGUnKVxuICAgICAgICAgIHJldHVybiBBUElcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlIChjb21wb25lbnRQcm9wcykge1xuICAgICAgICAgIGlmICh2bSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGlzQ3VzdG9tID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocHJvcHMsIGNvbXBvbmVudFByb3BzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IHsgY2xhc3M6IGtsYXNzLCBzdHlsZSwgLi4uY2ZnIH0gPSBjb21wb25lbnRQcm9wc1xuXG4gICAgICAgICAgICAgIGtsYXNzICE9PSB2b2lkIDAgJiYgKGNmZy5jYXJkQ2xhc3MgPSBrbGFzcylcbiAgICAgICAgICAgICAgc3R5bGUgIT09IHZvaWQgMCAmJiAoY2ZnLmNhcmRTdHlsZSA9IHN0eWxlKVxuICAgICAgICAgICAgICBtZXJnZShwcm9wcywgY2ZnKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2bS4kZm9yY2VVcGRhdGUoKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBBUElcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgY29uc3Qgb25PayA9IGRhdGEgPT4ge1xuICAgICAgZW1pdHRlZE9LID0gdHJ1ZVxuICAgICAgb2tGbnMuZm9yRWFjaChmbiA9PiB7IGZuKGRhdGEpIH0pXG4gICAgfVxuXG4gICAgY29uc3Qgb25IaWRlID0gKCkgPT4ge1xuICAgICAgYXBwLnVubW91bnQoZWwpXG4gICAgICByZW1vdmVHbG9iYWxOb2RlKGVsKVxuICAgICAgYXBwID0gbnVsbFxuICAgICAgdm0gPSBudWxsXG5cbiAgICAgIGlmIChlbWl0dGVkT0sgIT09IHRydWUpIHtcbiAgICAgICAgY2FuY2VsRm5zLmZvckVhY2goZm4gPT4geyBmbigpIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGFwcCA9IGNyZWF0ZUNoaWxkQXBwKHtcbiAgICAgIG5hbWU6ICdRR2xvYmFsRGlhbG9nJyxcbiAgICAgIHNldHVwOiAoKSA9PiAoKSA9PiBoKERpYWxvZ0NvbXBvbmVudCwge1xuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgcmVmOiBkaWFsb2dSZWYsXG4gICAgICAgIG9uT2ssXG4gICAgICAgIG9uSGlkZSxcbiAgICAgICAgb25Wbm9kZU1vdW50ZWQgKC4uLmFyZ3MpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHByb3BzLm9uVm5vZGVNb3VudGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBwcm9wcy5vblZub2RlTW91bnRlZCguLi5hcmdzKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHRUaWNrKCgpID0+IGFwcGx5U3RhdGUoJ3Nob3cnKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBwYXJlbnRBcHApXG5cbiAgICB2bSA9IGFwcC5tb3VudChlbClcblxuICAgIHJldHVybiBBUElcbiAgfVxufVxuIiwiaW1wb3J0IERpYWxvZ1BsdWdpbiBmcm9tICcuL2NvbXBvbmVudC9EaWFsb2dQbHVnaW5Db21wb25lbnQuanMnXG5pbXBvcnQgZ2xvYmFsRGlhbG9nIGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuZGlhbG9nL2NyZWF0ZS1kaWFsb2cuanMnXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaW5zdGFsbCAoeyAkcSwgcGFyZW50QXBwIH0pIHtcbiAgICAkcS5kaWFsb2cgPSB0aGlzLmNyZWF0ZSA9IGdsb2JhbERpYWxvZyhEaWFsb2dQbHVnaW4sIHRydWUsIHBhcmVudEFwcClcbiAgfVxufVxuIiwiaW1wb3J0IHsgaCwgVHJhbnNpdGlvbiwgb25Nb3VudGVkIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUVNwaW5uZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9zcGlubmVyL1FTcGlubmVyLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDaGlsZEFwcCB9IGZyb20gJy4uLy4uL2luc3RhbGwtcXVhc2FyLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVSZWFjdGl2ZVBsdWdpbiB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUuY3JlYXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGNyZWF0ZUdsb2JhbE5vZGUsIHJlbW92ZUdsb2JhbE5vZGUgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlLmNvbmZpZy9ub2Rlcy5qcydcbmltcG9ydCBwcmV2ZW50U2Nyb2xsIGZyb20gJy4uLy4uL3V0aWxzL3Njcm9sbC9wcmV2ZW50LXNjcm9sbC5qcydcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi4vLi4vdXRpbHMvaXMvaXMuanMnXG5cbmxldFxuICBhcHAsXG4gIHZtLFxuICB1aWQgPSAwLFxuICB0aW1lb3V0ID0gbnVsbCxcbiAgcHJvcHMgPSB7fSxcbiAgYWN0aXZlR3JvdXBzID0ge31cblxuY29uc3Qgb3JpZ2luYWxEZWZhdWx0cyA9IHtcbiAgZ3JvdXA6ICdfX2RlZmF1bHRfcXVhc2FyX2dyb3VwX18nLFxuICBkZWxheTogMCxcbiAgbWVzc2FnZTogZmFsc2UsXG4gIGh0bWw6IGZhbHNlLFxuICBzcGlubmVyU2l6ZTogODAsXG4gIHNwaW5uZXJDb2xvcjogJycsXG4gIG1lc3NhZ2VDb2xvcjogJycsXG4gIGJhY2tncm91bmRDb2xvcjogJycsXG4gIGJveENsYXNzOiAnJyxcbiAgc3Bpbm5lcjogUVNwaW5uZXIsXG4gIGN1c3RvbUNsYXNzOiAnJ1xufVxuXG5jb25zdCBkZWZhdWx0cyA9IHsgLi4ub3JpZ2luYWxEZWZhdWx0cyB9XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyUHJvcHMgKG9wdHMpIHtcbiAgaWYgKG9wdHM/Lmdyb3VwICE9PSB2b2lkIDAgJiYgYWN0aXZlR3JvdXBzWyBvcHRzLmdyb3VwIF0gIT09IHZvaWQgMCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGFjdGl2ZUdyb3Vwc1sgb3B0cy5ncm91cCBdLCBvcHRzKVxuICB9XG5cbiAgY29uc3QgbmV3UHJvcHMgPSBpc09iamVjdChvcHRzKSA9PT0gdHJ1ZSAmJiBvcHRzLmlnbm9yZURlZmF1bHRzID09PSB0cnVlXG4gICAgPyB7IC4uLm9yaWdpbmFsRGVmYXVsdHMsIC4uLm9wdHMgfVxuICAgIDogeyAuLi5kZWZhdWx0cywgLi4ub3B0cyB9XG5cbiAgYWN0aXZlR3JvdXBzWyBuZXdQcm9wcy5ncm91cCBdID0gbmV3UHJvcHNcbiAgcmV0dXJuIG5ld1Byb3BzXG59XG5cbmNvbnN0IFBsdWdpbiA9IGNyZWF0ZVJlYWN0aXZlUGx1Z2luKHtcbiAgaXNBY3RpdmU6IGZhbHNlXG59LCB7XG4gIHNob3cgKG9wdHMpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSByZXR1cm5cblxuICAgIHByb3BzID0gcmVnaXN0ZXJQcm9wcyhvcHRzKVxuICAgIGNvbnN0IHsgZ3JvdXAgfSA9IHByb3BzXG5cbiAgICBQbHVnaW4uaXNBY3RpdmUgPSB0cnVlXG5cbiAgICBpZiAoYXBwICE9PSB2b2lkIDApIHtcbiAgICAgIHByb3BzLnVpZCA9IHVpZFxuICAgICAgdm0uJGZvcmNlVXBkYXRlKClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBwcm9wcy51aWQgPSArK3VpZFxuICAgICAgdGltZW91dCAhPT0gbnVsbCAmJiBjbGVhclRpbWVvdXQodGltZW91dClcblxuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aW1lb3V0ID0gbnVsbFxuXG4gICAgICAgIGNvbnN0IGVsID0gY3JlYXRlR2xvYmFsTm9kZSgncS1sb2FkaW5nJylcblxuICAgICAgICBhcHAgPSBjcmVhdGVDaGlsZEFwcCh7XG4gICAgICAgICAgbmFtZTogJ1FMb2FkaW5nJyxcblxuICAgICAgICAgIHNldHVwICgpIHtcbiAgICAgICAgICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICAgICAgICAgIHByZXZlbnRTY3JvbGwodHJ1ZSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uQWZ0ZXJMZWF2ZSAoKSB7XG4gICAgICAgICAgICAgIC8vIG1pZ2h0IGJlIGNhbGxlZCB0byBmaW5hbGl6ZVxuICAgICAgICAgICAgICAvLyBwcmV2aW91cyBsZWF2ZSwgZXZlbiBpZiBpdCB3YXMgY2FuY2VsbGVkXG4gICAgICAgICAgICAgIGlmIChQbHVnaW4uaXNBY3RpdmUgIT09IHRydWUgJiYgYXBwICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50U2Nyb2xsKGZhbHNlKVxuICAgICAgICAgICAgICAgIGFwcC51bm1vdW50KGVsKVxuICAgICAgICAgICAgICAgIHJlbW92ZUdsb2JhbE5vZGUoZWwpXG4gICAgICAgICAgICAgICAgYXBwID0gdm9pZCAwXG4gICAgICAgICAgICAgICAgdm0gPSB2b2lkIDBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRDb250ZW50ICgpIHtcbiAgICAgICAgICAgICAgaWYgKFBsdWdpbi5pc0FjdGl2ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gW1xuICAgICAgICAgICAgICAgIGgocHJvcHMuc3Bpbm5lciwge1xuICAgICAgICAgICAgICAgICAgY2xhc3M6ICdxLWxvYWRpbmdfX3NwaW5uZXInLFxuICAgICAgICAgICAgICAgICAgY29sb3I6IHByb3BzLnNwaW5uZXJDb2xvcixcbiAgICAgICAgICAgICAgICAgIHNpemU6IHByb3BzLnNwaW5uZXJTaXplXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgXVxuXG4gICAgICAgICAgICAgIHByb3BzLm1lc3NhZ2UgJiYgY29udGVudC5wdXNoKFxuICAgICAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzOiAncS1sb2FkaW5nX19tZXNzYWdlJ1xuICAgICAgICAgICAgICAgICAgICArIChwcm9wcy5tZXNzYWdlQ29sb3IgPyBgIHRleHQtJHsgcHJvcHMubWVzc2FnZUNvbG9yIH1gIDogJycpLFxuICAgICAgICAgICAgICAgICAgWyBwcm9wcy5odG1sID09PSB0cnVlID8gJ2lubmVySFRNTCcgOiAndGV4dENvbnRlbnQnIF06IHByb3BzLm1lc3NhZ2VcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzczogJ3EtbG9hZGluZyBmdWxsc2NyZWVuIGZsZXggZmxleC1jZW50ZXIgei1tYXggJyArIHByb3BzLmN1c3RvbUNsYXNzLnRyaW0oKSxcbiAgICAgICAgICAgICAgICBrZXk6IHByb3BzLnVpZFxuICAgICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgY2xhc3M6ICdxLWxvYWRpbmdfX2JhY2tkcm9wJ1xuICAgICAgICAgICAgICAgICAgICArIChwcm9wcy5iYWNrZ3JvdW5kQ29sb3IgPyBgIGJnLSR7IHByb3BzLmJhY2tncm91bmRDb2xvciB9YCA6ICcnKVxuICAgICAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgY2xhc3M6ICdxLWxvYWRpbmdfX2JveCBjb2x1bW4gaXRlbXMtY2VudGVyICcgKyBwcm9wcy5ib3hDbGFzc1xuICAgICAgICAgICAgICAgIH0sIGNvbnRlbnQpXG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoKSA9PiBoKFRyYW5zaXRpb24sIHtcbiAgICAgICAgICAgICAgbmFtZTogJ3EtdHJhbnNpdGlvbi0tZmFkZScsXG4gICAgICAgICAgICAgIGFwcGVhcjogdHJ1ZSxcbiAgICAgICAgICAgICAgb25BZnRlckxlYXZlXG4gICAgICAgICAgICB9LCBnZXRDb250ZW50KVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgUGx1Z2luLl9fcGFyZW50QXBwKVxuXG4gICAgICAgIHZtID0gYXBwLm1vdW50KGVsKVxuICAgICAgfSwgcHJvcHMuZGVsYXkpXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmFtUHJvcHMgPT4ge1xuICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBwYXJhbXMgKG9yIG5vdCBhbiBPYmplY3QgcGFyYW0pIHRoZW4gd2UgbmVlZCB0byBoaWRlIHRoaXMgZ3JvdXBcbiAgICAgIGlmIChwYXJhbVByb3BzID09PSB2b2lkIDAgfHwgT2JqZWN0KHBhcmFtUHJvcHMpICE9PSBwYXJhbVByb3BzKSB7XG4gICAgICAgIFBsdWdpbi5oaWRlKGdyb3VwKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgLy8gZWxzZSB3ZSBoYXZlIHBhcmFtcyBzbyB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGlzIGdyb3VwXG4gICAgICBQbHVnaW4uc2hvdyh7IC4uLnBhcmFtUHJvcHMsIGdyb3VwIH0pXG4gICAgfVxuICB9LFxuXG4gIGhpZGUgKGdyb3VwKSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyAhPT0gdHJ1ZSAmJiBQbHVnaW4uaXNBY3RpdmUgPT09IHRydWUpIHtcbiAgICAgIGlmIChncm91cCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIC8vIGNsZWFyIG91dCBhbnkgYWN0aXZlIGdyb3Vwc1xuICAgICAgICBhY3RpdmVHcm91cHMgPSB7fVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoYWN0aXZlR3JvdXBzWyBncm91cCBdID09PSB2b2lkIDApIHtcbiAgICAgICAgLy8gd2UndmUgYWxyZWFkeSBoaWRkZW4gaXQgc28gbm90aGluZyB0byBkb1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyByZW1vdmUgYWN0aXZlIGdyb3VwXG4gICAgICAgIGRlbGV0ZSBhY3RpdmVHcm91cHNbIGdyb3VwIF1cblxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYWN0aXZlR3JvdXBzKVxuXG4gICAgICAgIC8vIGlmIHRoZXJlIGFyZSBvdGhlciBncm91cHMgcmVnaXN0ZXJlZCB0aGVuXG4gICAgICAgIC8vIHNob3cgbGFzdCByZWdpc3RlcmVkIG9uZSBzaW5jZSB0aGF0IG9uZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgLy8gZ2V0IGxhc3QgcmVnaXN0ZXJlZCBncm91cFxuICAgICAgICAgIGNvbnN0IGxhc3RHcm91cCA9IGtleXNbIGtleXMubGVuZ3RoIC0gMSBdXG4gICAgICAgICAgUGx1Z2luLnNob3coeyBncm91cDogbGFzdEdyb3VwIH0pXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRpbWVvdXQgIT09IG51bGwpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpXG4gICAgICAgIHRpbWVvdXQgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIFBsdWdpbi5pc0FjdGl2ZSA9IGZhbHNlXG4gICAgfVxuICB9LFxuXG4gIHNldERlZmF1bHRzIChvcHRzKSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyAhPT0gdHJ1ZSkge1xuICAgICAgaXNPYmplY3Qob3B0cykgPT09IHRydWUgJiYgT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgb3B0cylcbiAgICB9XG4gIH0sXG5cbiAgaW5zdGFsbCAoeyAkcSwgcGFyZW50QXBwIH0pIHtcbiAgICAkcS5sb2FkaW5nID0gdGhpc1xuXG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyAhPT0gdHJ1ZSkge1xuICAgICAgUGx1Z2luLl9fcGFyZW50QXBwID0gcGFyZW50QXBwXG5cbiAgICAgIGlmICgkcS5jb25maWcubG9hZGluZyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHRoaXMuc2V0RGVmYXVsdHMoJHEuY29uZmlnLmxvYWRpbmcpXG4gICAgICB9XG4gICAgfVxuICB9XG59KVxuXG5leHBvcnQgZGVmYXVsdCBQbHVnaW5cbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi8uLi8uLi91dGlscy9ldmVudC9ldmVudC5qcydcbmltcG9ydCB7IGlzRGF0ZSwgaXNSZWdleHAgfSBmcm9tICcuLi8uLi8uLi91dGlscy9pcy9pcy5qcydcblxuZnVuY3Rpb24gZW5jb2RlICh2YWx1ZSkge1xuICBpZiAoaXNEYXRlKHZhbHVlKSA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiAnX19xX2RhdGV8JyArIHZhbHVlLmdldFRpbWUoKVxuICB9XG4gIGlmIChpc1JlZ2V4cCh2YWx1ZSkgPT09IHRydWUpIHtcbiAgICByZXR1cm4gJ19fcV9leHByfCcgKyB2YWx1ZS5zb3VyY2VcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiAnX19xX251bWJ8JyArIHZhbHVlXG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuICdfX3FfYm9vbHwnICsgKHZhbHVlID8gJzEnIDogJzAnKVxuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuICdfX3Ffc3RybnwnICsgdmFsdWVcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuICdfX3Ffc3RybnwnICsgdmFsdWUudG9TdHJpbmcoKVxuICB9XG4gIGlmICh2YWx1ZSA9PT0gT2JqZWN0KHZhbHVlKSkge1xuICAgIHJldHVybiAnX19xX29ianR8JyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKVxuICB9XG5cbiAgLy8gaG1tLCB3ZSBkb24ndCBrbm93IHdoYXQgdG8gZG8gd2l0aCBpdCxcbiAgLy8gc28ganVzdCByZXR1cm4gaXQgYXMgaXNcbiAgcmV0dXJuIHZhbHVlXG59XG5cbmZ1bmN0aW9uIGRlY29kZSAodmFsdWUpIHtcbiAgY29uc3QgbGVuZ3RoID0gdmFsdWUubGVuZ3RoXG4gIGlmIChsZW5ndGggPCA5KSB7XG4gICAgLy8gdGhlbiBpdCB3YXNuJ3QgZW5jb2RlZCBieSB1c1xuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgY29uc3QgdHlwZSA9IHZhbHVlLnN1YnN0cmluZygwLCA4KVxuICBjb25zdCBzb3VyY2UgPSB2YWx1ZS5zdWJzdHJpbmcoOSlcblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdfX3FfZGF0ZSc6XG4gICAgICBjb25zdCBudW1iZXIgPSBOdW1iZXIoc291cmNlKVxuICAgICAgcmV0dXJuIG5ldyBEYXRlKE51bWJlci5pc05hTihudW1iZXIpID09PSB0cnVlID8gc291cmNlIDogbnVtYmVyKVxuXG4gICAgY2FzZSAnX19xX2V4cHInOlxuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoc291cmNlKVxuXG4gICAgY2FzZSAnX19xX251bWInOlxuICAgICAgcmV0dXJuIE51bWJlcihzb3VyY2UpXG5cbiAgICBjYXNlICdfX3FfYm9vbCc6XG4gICAgICByZXR1cm4gQm9vbGVhbihzb3VyY2UgPT09ICcxJylcblxuICAgIGNhc2UgJ19fcV9zdHJuJzpcbiAgICAgIHJldHVybiAnJyArIHNvdXJjZVxuXG4gICAgY2FzZSAnX19xX29ianQnOlxuICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc291cmNlKVxuXG4gICAgZGVmYXVsdDpcbiAgICAgIC8vIGhtbSwgd2UgcmVhY2hlZCBoZXJlLCB3ZSBkb24ndCBrbm93IHRoZSB0eXBlLFxuICAgICAgLy8gdGhlbiBpdCBtZWFucyBpdCB3YXNuJ3QgZW5jb2RlZCBieSB1cywgc28ganVzdFxuICAgICAgLy8gcmV0dXJuIHdoYXRldmVyIHZhbHVlIGl0IGlzXG4gICAgICByZXR1cm4gdmFsdWVcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW1wdHlTdG9yYWdlICgpIHtcbiAgY29uc3QgZ2V0VmFsID0gKCkgPT4gbnVsbFxuXG4gIHJldHVybiB7XG4gICAgaGFzOiAoKSA9PiBmYWxzZSwgLy8gYWxpYXMgZm9yIGhhc0l0ZW07IFRPRE86IHJlbW92ZSBpbiBRdjNcbiAgICBoYXNJdGVtOiAoKSA9PiBmYWxzZSxcbiAgICBnZXRMZW5ndGg6ICgpID0+IDAsXG4gICAgZ2V0SXRlbTogZ2V0VmFsLFxuICAgIGdldEluZGV4OiBnZXRWYWwsXG4gICAgZ2V0S2V5OiBnZXRWYWwsXG4gICAgZ2V0QWxsOiAoKSA9PiB7fSxcbiAgICBnZXRBbGxLZXlzOiAoKSA9PiBbXSxcbiAgICBzZXQ6IG5vb3AsIC8vIGFsaWFzIGZvciBzZXRJdGVtOyBUT0RPOiByZW1vdmUgaW4gUXYzXG4gICAgc2V0SXRlbTogbm9vcCxcbiAgICByZW1vdmU6IG5vb3AsIC8vIGFsaWFzIGZvciByZW1vdmVJdGVtOyBUT0RPOiByZW1vdmUgaW4gUXYzXG4gICAgcmVtb3ZlSXRlbTogbm9vcCxcbiAgICBjbGVhcjogbm9vcCxcbiAgICBpc0VtcHR5OiAoKSA9PiB0cnVlXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JhZ2UgKHR5cGUpIHtcbiAgY29uc3RcbiAgICB3ZWJTdG9yYWdlID0gd2luZG93WyB0eXBlICsgJ1N0b3JhZ2UnIF0sXG4gICAgZ2V0ID0ga2V5ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB3ZWJTdG9yYWdlLmdldEl0ZW0oa2V5KVxuICAgICAgcmV0dXJuIGl0ZW1cbiAgICAgICAgPyBkZWNvZGUoaXRlbSlcbiAgICAgICAgOiBudWxsXG4gICAgfVxuXG4gIGNvbnN0IGhhc0l0ZW0gPSBrZXkgPT4gd2ViU3RvcmFnZS5nZXRJdGVtKGtleSkgIT09IG51bGxcbiAgY29uc3Qgc2V0SXRlbSA9IChrZXksIHZhbHVlKSA9PiB7IHdlYlN0b3JhZ2Uuc2V0SXRlbShrZXksIGVuY29kZSh2YWx1ZSkpIH1cbiAgY29uc3QgcmVtb3ZlSXRlbSA9IGtleSA9PiB7IHdlYlN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpIH1cblxuICByZXR1cm4ge1xuICAgIGhhczogaGFzSXRlbSwgLy8gVE9ETzogcmVtb3ZlIGluIFF2M1xuICAgIGhhc0l0ZW0sXG4gICAgZ2V0TGVuZ3RoOiAoKSA9PiB3ZWJTdG9yYWdlLmxlbmd0aCxcbiAgICBnZXRJdGVtOiBnZXQsXG4gICAgZ2V0SW5kZXg6IGluZGV4ID0+IHtcbiAgICAgIHJldHVybiBpbmRleCA8IHdlYlN0b3JhZ2UubGVuZ3RoXG4gICAgICAgID8gZ2V0KHdlYlN0b3JhZ2Uua2V5KGluZGV4KSlcbiAgICAgICAgOiBudWxsXG4gICAgfSxcbiAgICBnZXRLZXk6IGluZGV4ID0+IHtcbiAgICAgIHJldHVybiBpbmRleCA8IHdlYlN0b3JhZ2UubGVuZ3RoXG4gICAgICAgID8gd2ViU3RvcmFnZS5rZXkoaW5kZXgpXG4gICAgICAgIDogbnVsbFxuICAgIH0sXG4gICAgZ2V0QWxsOiAoKSA9PiB7XG4gICAgICBsZXQga2V5XG4gICAgICBjb25zdCByZXN1bHQgPSB7fSwgbGVuID0gd2ViU3RvcmFnZS5sZW5ndGhcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBrZXkgPSB3ZWJTdG9yYWdlLmtleShpKVxuICAgICAgICByZXN1bHRbIGtleSBdID0gZ2V0KGtleSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0sXG4gICAgZ2V0QWxsS2V5czogKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gW10sIGxlbiA9IHdlYlN0b3JhZ2UubGVuZ3RoXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgcmVzdWx0LnB1c2god2ViU3RvcmFnZS5rZXkoaSkpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9LFxuICAgIHNldDogc2V0SXRlbSwgLy8gVE9ETzogcmVtb3ZlIGluIFF2M1xuICAgIHNldEl0ZW0sXG4gICAgcmVtb3ZlOiByZW1vdmVJdGVtLCAvLyBUT0RPOiByZW1vdmUgaW4gUXYzXG4gICAgcmVtb3ZlSXRlbSxcbiAgICBjbGVhcjogKCkgPT4geyB3ZWJTdG9yYWdlLmNsZWFyKCkgfSxcbiAgICBpc0VtcHR5OiAoKSA9PiB3ZWJTdG9yYWdlLmxlbmd0aCA9PT0gMFxuICB9XG59XG4iLCJpbXBvcnQgeyBjbGllbnQgfSBmcm9tICcuLi9wbGF0Zm9ybS9QbGF0Zm9ybS5qcydcbmltcG9ydCB7IGdldEVtcHR5U3RvcmFnZSwgZ2V0U3RvcmFnZSB9IGZyb20gJy4vZW5naW5lL3dlYi1zdG9yYWdlLmpzJ1xuXG5jb25zdCBzdG9yYWdlID0gX19RVUFTQVJfU1NSX1NFUlZFUl9fIHx8IGNsaWVudC5oYXMud2ViU3RvcmFnZSA9PT0gZmFsc2VcbiAgPyBnZXRFbXB0eVN0b3JhZ2UoKVxuICA6IGdldFN0b3JhZ2UoJ2xvY2FsJylcblxuY29uc3QgUGx1Z2luID0ge1xuICBpbnN0YWxsICh7ICRxIH0pIHtcbiAgICAkcS5sb2NhbFN0b3JhZ2UgPSBzdG9yYWdlXG4gIH1cbn1cblxuT2JqZWN0LmFzc2lnbihQbHVnaW4sIHN0b3JhZ2UpXG5cbmV4cG9ydCBkZWZhdWx0IFBsdWdpblxuIiwiaW1wb3J0IHsgY2xpZW50IH0gZnJvbSAnLi4vcGxhdGZvcm0vUGxhdGZvcm0uanMnXG5pbXBvcnQgeyBnZXRFbXB0eVN0b3JhZ2UsIGdldFN0b3JhZ2UgfSBmcm9tICcuL2VuZ2luZS93ZWItc3RvcmFnZS5qcydcblxuY29uc3Qgc3RvcmFnZSA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfXyB8fCBjbGllbnQuaGFzLndlYlN0b3JhZ2UgPT09IGZhbHNlXG4gID8gZ2V0RW1wdHlTdG9yYWdlKClcbiAgOiBnZXRTdG9yYWdlKCdzZXNzaW9uJylcblxuY29uc3QgUGx1Z2luID0ge1xuICBpbnN0YWxsICh7ICRxIH0pIHtcbiAgICAkcS5zZXNzaW9uU3RvcmFnZSA9IHN0b3JhZ2VcbiAgfVxufVxuXG5PYmplY3QuYXNzaWduKFBsdWdpbiwgc3RvcmFnZSlcblxuZXhwb3J0IGRlZmF1bHQgUGx1Z2luXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBUSElTIEZJTEUgSVMgR0VORVJBVEVEIEFVVE9NQVRJQ0FMTFkuXG4gKiBETyBOT1QgRURJVC5cbiAqXG4gKiBZb3UgYXJlIHByb2JhYmx5IGxvb2tpbmcgb24gYWRkaW5nIHN0YXJ0dXAvaW5pdGlhbGl6YXRpb24gY29kZS5cbiAqIFVzZSBcInF1YXNhciBuZXcgYm9vdCA8bmFtZT5cIiBhbmQgYWRkIGl0IHRoZXJlLlxuICogT25lIGJvb3QgZmlsZSBwZXIgY29uY2Vybi4gVGhlbiByZWZlcmVuY2UgdGhlIGZpbGUocykgaW4gcXVhc2FyLmNvbmZpZyBmaWxlID4gYm9vdDpcbiAqIGJvb3Q6IFsnZmlsZScsIC4uLl0gLy8gZG8gbm90IGFkZCBcIi5qc1wiIGV4dGVuc2lvbiB0byBpdC5cbiAqXG4gKiBCb290IGZpbGVzIGFyZSB5b3VyIFwibWFpbi5qc1wiXG4gKiovXG5cblxuXG5pbXBvcnQge05vdGlmeSxEaWFsb2csTG9hZGluZyxMb2NhbFN0b3JhZ2UsU2Vzc2lvblN0b3JhZ2V9IGZyb20gJ3F1YXNhcidcblxuXG5cbmV4cG9ydCBkZWZhdWx0IHsgY29uZmlnOiB7fSxwbHVnaW5zOiB7Tm90aWZ5LERpYWxvZyxMb2FkaW5nLExvY2FsU3RvcmFnZSxTZXNzaW9uU3RvcmFnZX0gfVxuXG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBUSElTIEZJTEUgSVMgR0VORVJBVEVEIEFVVE9NQVRJQ0FMTFkuXG4gKiBETyBOT1QgRURJVC5cbiAqXG4gKiBZb3UgYXJlIHByb2JhYmx5IGxvb2tpbmcgb24gYWRkaW5nIHN0YXJ0dXAvaW5pdGlhbGl6YXRpb24gY29kZS5cbiAqIFVzZSBcInF1YXNhciBuZXcgYm9vdCA8bmFtZT5cIiBhbmQgYWRkIGl0IHRoZXJlLlxuICogT25lIGJvb3QgZmlsZSBwZXIgY29uY2Vybi4gVGhlbiByZWZlcmVuY2UgdGhlIGZpbGUocykgaW4gcXVhc2FyLmNvbmZpZyBmaWxlID4gYm9vdDpcbiAqIGJvb3Q6IFsnZmlsZScsIC4uLl0gLy8gZG8gbm90IGFkZCBcIi5qc1wiIGV4dGVuc2lvbiB0byBpdC5cbiAqXG4gKiBCb290IGZpbGVzIGFyZSB5b3VyIFwibWFpbi5qc1wiXG4gKiovXG5cblxuaW1wb3J0IHsgY3JlYXRlQXBwIH0gZnJvbSAndnVlJ1xuXG5cblxuXG5cblxuXG5pbXBvcnQgJ0BxdWFzYXIvZXh0cmFzL3JvYm90by1mb250L3JvYm90by1mb250LmNzcydcblxuaW1wb3J0ICdAcXVhc2FyL2V4dHJhcy9tYXRlcmlhbC1pY29ucy9tYXRlcmlhbC1pY29ucy5jc3MnXG5cblxuXG5cbi8vIFdlIGxvYWQgUXVhc2FyIHN0eWxlc2hlZXQgZmlsZVxuaW1wb3J0ICdxdWFzYXIvZGlzdC9xdWFzYXIuc2FzcydcblxuXG5cblxuaW1wb3J0ICdzcmMvY3NzL2FwcC5zY3NzJ1xuXG5cbmltcG9ydCBjcmVhdGVRdWFzYXJBcHAgZnJvbSAnLi9hcHAuanMnXG5pbXBvcnQgcXVhc2FyVXNlck9wdGlvbnMgZnJvbSAnLi9xdWFzYXItdXNlci1vcHRpb25zLmpzJ1xuXG5cblxuXG5cblxuXG5jb25zdCBwdWJsaWNQYXRoID0gYC9zdHlsbHVzX2NvbnRyb2xlL2BcblxuYXN5bmMgZnVuY3Rpb24gc3RhcnQgKHtcbiAgYXBwLFxuICByb3V0ZXJcbiAgLCBzdG9yZVxufSwgYm9vdEZpbGVzKSB7XG4gIFxuICBsZXQgaGFzUmVkaXJlY3RlZCA9IGZhbHNlXG4gIGNvbnN0IGdldFJlZGlyZWN0VXJsID0gdXJsID0+IHtcbiAgICB0cnkgeyByZXR1cm4gcm91dGVyLnJlc29sdmUodXJsKS5ocmVmIH1cbiAgICBjYXRjaCAoZXJyKSB7fVxuXG4gICAgcmV0dXJuIE9iamVjdCh1cmwpID09PSB1cmxcbiAgICAgID8gbnVsbFxuICAgICAgOiB1cmxcbiAgfVxuICBjb25zdCByZWRpcmVjdCA9IHVybCA9PiB7XG4gICAgaGFzUmVkaXJlY3RlZCA9IHRydWVcblxuICAgIGlmICh0eXBlb2YgdXJsID09PSAnc3RyaW5nJyAmJiAvXmh0dHBzPzpcXC9cXC8vLnRlc3QodXJsKSkge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmxcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGhyZWYgPSBnZXRSZWRpcmVjdFVybCh1cmwpXG5cbiAgICAvLyBjb250aW51ZSBpZiB3ZSBkaWRuJ3QgZmFpbCB0byByZXNvbHZlIHRoZSB1cmxcbiAgICBpZiAoaHJlZiAhPT0gbnVsbCkge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmXG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICB9XG4gIH1cblxuICBjb25zdCB1cmxQYXRoID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSh3aW5kb3cubG9jYXRpb24ub3JpZ2luLCAnJylcblxuICBmb3IgKGxldCBpID0gMDsgaGFzUmVkaXJlY3RlZCA9PT0gZmFsc2UgJiYgaSA8IGJvb3RGaWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBib290RmlsZXNbaV0oe1xuICAgICAgICBhcHAsXG4gICAgICAgIHJvdXRlcixcbiAgICAgICAgc3RvcmUsXG4gICAgICAgIHNzckNvbnRleHQ6IG51bGwsXG4gICAgICAgIHJlZGlyZWN0LFxuICAgICAgICB1cmxQYXRoLFxuICAgICAgICBwdWJsaWNQYXRoXG4gICAgICB9KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyICYmIGVyci51cmwpIHtcbiAgICAgICAgcmVkaXJlY3QoZXJyLnVybClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tRdWFzYXJdIGJvb3QgZXJyb3I6JywgZXJyKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICB9XG5cbiAgaWYgKGhhc1JlZGlyZWN0ZWQgPT09IHRydWUpIHJldHVyblxuICBcblxuICBhcHAudXNlKHJvdXRlcilcblxuICBcblxuICAgIFxuXG4gICAgXG4gICAgICBhcHAubW91bnQoJyNxLWFwcCcpXG4gICAgXG4gIFxuXG59XG5cbmNyZWF0ZVF1YXNhckFwcChjcmVhdGVBcHAsIHF1YXNhclVzZXJPcHRpb25zKVxuXG4gIC50aGVuKGFwcCA9PiB7XG4gICAgLy8gZXZlbnR1YWxseSByZW1vdmUgdGhpcyB3aGVuIENvcmRvdmEvQ2FwYWNpdG9yL0VsZWN0cm9uIHN1cHBvcnQgYmVjb21lcyBvbGRcbiAgICBjb25zdCBbIG1ldGhvZCwgbWFwRm4gXSA9IFByb21pc2UuYWxsU2V0dGxlZCAhPT0gdm9pZCAwXG4gICAgICA/IFtcbiAgICAgICAgJ2FsbFNldHRsZWQnLFxuICAgICAgICBib290RmlsZXMgPT4gYm9vdEZpbGVzLm1hcChyZXN1bHQgPT4ge1xuICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAncmVqZWN0ZWQnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbUXVhc2FyXSBib290IGVycm9yOicsIHJlc3VsdC5yZWFzb24pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZS5kZWZhdWx0XG4gICAgICAgIH0pXG4gICAgICBdXG4gICAgICA6IFtcbiAgICAgICAgJ2FsbCcsXG4gICAgICAgIGJvb3RGaWxlcyA9PiBib290RmlsZXMubWFwKGVudHJ5ID0+IGVudHJ5LmRlZmF1bHQpXG4gICAgICBdXG5cbiAgICByZXR1cm4gUHJvbWlzZVsgbWV0aG9kIF0oW1xuICAgICAgXG4gICAgICBpbXBvcnQoJ2Jvb3QvYXhpb3MnKVxuICAgICAgXG4gICAgXSkudGhlbihib290RmlsZXMgPT4ge1xuICAgICAgY29uc3QgYm9vdCA9IG1hcEZuKGJvb3RGaWxlcykuZmlsdGVyKGVudHJ5ID0+IHR5cGVvZiBlbnRyeSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgIHN0YXJ0KGFwcCwgYm9vdClcbiAgICB9KVxuICB9KVxuXG4iXSwiZmlsZSI6ImFzc2V0cy9pbmRleC1EVFJ4eGJRNy5qcyJ9