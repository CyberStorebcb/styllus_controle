import{_ as T,r as m,o as z,k,Z as w,$ as c,a0 as n,a2 as a,a1 as t,a4 as p,a8 as v,a9 as f,ae as P,af as A,a3 as q,a5 as g,a6 as V,a7 as C,ad as L,ab as $,ac as O,ag as U,ah as W,ai as M,b as j,aj as I,ak as Z}from"./index-DhQyY180.js";import{Q as D}from"./QBadge-C-BWgy33.js";import{Q as G}from"./QSelect-b2qa-pRZ.js";import{Q as H}from"./QForm-DLgz-_xu.js";import{Q as F}from"./QExpansionItem-BOx5Ua_R.js";import{Q as J,b as K,c as S,a as X}from"./QList-CsQOYvm0.js";import{Q as Y}from"./QPage-DI6gLvA2.js";import{u as ee}from"./product-store-BlvvGknn.js";import"./format-B9i47xOl.js";import"./index-xsH4HHeE.js";const oe={class:"products-content"},te={class:"row items-center q-mb-md q-mt-lg"},ae={class:"col"},se={class:"custom-font-bold gradient-title animate-title text-h4 flex items-center"},ne={class:"col-auto flex items-center"},le={class:"row q-col-gutter-md q-mb-md"},re={class:"col-12 col-md-8"},ie={class:"col-12 col-md-4"},de={class:"row q-col-gutter-md"},ce={class:"col-12 col-md-6"},ue={class:"col-12 col-md-4"},me={class:"col-12 col-md-2 flex flex-center"},pe={class:"row q-col-gutter-md"},fe={class:"custom-font-bold text-h6"},ve={class:"custom-font-light text-grey-7"},ge={key:0,class:"col-12 text-center q-mt-md"},_e={__name:"ProductsPage",setup(ye){const r=ee(),_=m(""),u=m("Todos"),d=m({name:"",quantity:0}),y=m(null),b=m(null);z(async()=>{await r.loadProducts()});const h=k(()=>{const s=_.value.toLowerCase();return r.products.filter(e=>{const o=e.name.toLowerCase().includes(s),i=u.value==="Todos"||u.value==="Disponíveis"&&e.quantity>0||u.value==="Esgotados"&&e.quantity===0;return o&&i})}),Q=k(()=>r.products.filter(s=>s.quantity===0));function l(s,e){Z.create({type:s,message:e})}async function N(){y.value.validate()&&(await r.addProduct({...d.value}),d.value={name:"",quantity:0},y.value.resetValidation(),await j(),b.value?.focus&&b.value.focus(),l("positive","Produto adicionado com sucesso!"))}function x(s){return r.products.find(e=>e.id===s)}async function B(s){if(!x(s))return l("negative","Produto não encontrado.");await r.deleteProduct(s),l("positive","Produto removido com sucesso!")}function E(s){const e=x(s);if(!e)return l("negative","Produto não encontrado.");I.create({title:"Reabastecer Produto",message:`Informe a quantidade para reabastecer o produto "${e.name}":`,prompt:{model:"",type:"number",isValid:o=>o>0,label:"Quantidade",placeholder:"Digite a quantidade"},cancel:!0,persistent:!0}).onOk(async o=>{const i=parseInt(o,10);if(isNaN(i)||i<=0){l("negative","Quantidade inválida.");return}await r.restockProduct(s,i),l("positive","Produto reabastecido!")}).onCancel(()=>{l("info","Reabastecimento cancelado.")})}function R(s){const e=x(s);if(!e)return l("negative","Produto não encontrado.");I.create({title:"Confirmar Exclusão",message:`Tem certeza de que deseja excluir o produto "${e.name}"?`,cancel:!0,persistent:!0,icon:"warning",color:"red"}).onOk(()=>B(s)).onCancel(()=>l("info","A exclusão foi cancelada."))}return(s,e)=>(c(),w(Y,null,{default:n(()=>[a("div",oe,[a("div",te,[a("div",ae,[a("div",se,[t(v,{name:"inventory_2",size:"28px",class:"q-mr-sm"}),e[4]||(e[4]=p(" Produtos "))])]),a("div",ne,[t(D,{color:"green",class:"q-mr-sm badge-pill animate-badge"},{default:n(()=>[p(" Disponíveis: "+f(h.value.length),1)]),_:1}),t(D,{color:"red",class:"badge-pill animate-badge"},{default:n(()=>[p(" Esgotados: "+f(Q.value.length),1)]),_:1})])]),a("div",le,[a("div",re,[t(P,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=o=>_.value=o),label:"Buscar Produto",outlined:"",dense:"",class:"q-mb-none",placeholder:"Digite o nome do produto",clearable:"",prefix:"🔍",color:"primary","input-style":{fontFamily:"Inter, Poppins, Roboto, sans-serif",fontWeight:500}},null,8,["modelValue"])]),a("div",ie,[t(G,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),options:["Todos","Disponíveis","Esgotados"],label:"Filtrar",outlined:"",dense:"",class:"q-mb-none",color:"primary","input-style":{fontFamily:"Inter, Poppins, Roboto, sans-serif",fontWeight:500}},null,8,["modelValue"])])]),t(F,{label:"Adicionar Produto","expand-separator":"",class:"add-expansion animate-fade-in",icon:"add_box","header-class":"expansion-header"},{default:n(()=>[t(H,{onSubmit:A(N,["prevent"]),ref_key:"productForm",ref:y},{default:n(()=>[a("div",de,[a("div",ce,[t(P,{ref_key:"nameInput",ref:b,modelValue:d.value.name,"onUpdate:modelValue":e[2]||(e[2]=o=>d.value.name=o),label:"Nome do Produto",placeholder:"Digite o nome do produto",outlined:"",dense:"",rules:[o=>!!o||"O nome do produto é obrigatório"],color:"primary","input-style":{fontFamily:"Inter, Poppins, Roboto, sans-serif",fontWeight:500}},null,8,["modelValue","rules"])]),a("div",ue,[t(P,{modelValue:d.value.quantity,"onUpdate:modelValue":e[3]||(e[3]=o=>d.value.quantity=o),modelModifiers:{number:!0},label:"Quantidade",placeholder:"Digite a quantidade",type:"number",outlined:"",dense:"",rules:[o=>o>0||"A quantidade deve ser maior que zero"],color:"primary","input-style":{fontFamily:"Inter, Poppins, Roboto, sans-serif",fontWeight:500}},null,8,["modelValue","rules"])]),a("div",me,[t(q,{label:"+ Adicionar",type:"submit",color:"primary",class:"full-width",icon:"add_box",unelevated:"","no-caps":""})])])]),_:1},512)]),_:1}),t(F,{label:"Produtos Esgotados","expand-separator":"",class:"out-expansion animate-fade-in",icon:"warning","header-class":"expansion-header"},{default:n(()=>[t(J,null,{default:n(()=>[(c(!0),g(V,null,C(Q.value,o=>(c(),w(K,{key:o.id},{default:n(()=>[t(S,{avatar:""},{default:n(()=>[t(v,{name:"warning",color:"red"})]),_:1}),t(S,null,{default:n(()=>[t(X,{class:"custom-font-bold"},{default:n(()=>[p(f(o.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),a("div",pe,[(c(!0),g(V,null,C(h.value,o=>(c(),g("div",{key:o.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[t($,{class:"product-card animate-fade-in"},{default:n(()=>[t(O,{class:"row items-center"},{default:n(()=>[t(v,{name:"inventory_2",color:"primary",size:"32px",class:"q-mr-sm"}),a("div",null,[a("div",fe,f(o.name),1),a("div",ve,[e[5]||(e[5]=p(" Quantidade: ")),a("span",{class:U(o.quantity===0?"text-red":"text-green")},f(o.quantity),3)])])]),_:2},1024),t(W),t(M,{align:"right",class:"action-group"},{default:n(()=>[t(q,{icon:"add",label:"Adicionar Estoque",color:"green",flat:"",onClick:i=>E(o.id),class:"q-mr-xs","no-caps":""},null,8,["onClick"]),t(q,{icon:"delete",label:"Remover",color:"red",flat:"",onClick:i=>R(o.id),"no-caps":""},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),h.value.length===0?(c(),g("div",ge,[t(v,{name:"info",size:"lg",color:"grey-6"}),e[6]||(e[6]=a("p",{class:"custom-font-light"},"Nenhum produto encontrado.",-1))])):L("",!0)])])]),_:1}))}},Ie=T(_e,[["__scopeId","data-v-d9d787a2"]]);export{Ie as default};
